## 动效

`[key] 关键帧动效`

``` javascript
{
    // [key] 关键帧动效 START
    "k": {
        // [in] 进场动画 START
        "i": {
			// [playIndex] 元素播放顺序
            // 页动画特有属性
            // int
            "pi": 1,
            // 动画 id
            // string
            "resId": 'id',
            // [delay] 元素播放顺序延迟 START
            // 页动画特有属性
            "d": {
                // [type] 延迟类型
                // int
                "t": 1,
                // 属性详情根据 [type] 控制
                ...,
            },
            // [delay] 元素播放顺序延迟 END
            // 关键帧动画集合类型
            // int
            "kwst": 1,
            // 关键帧动画集合 START
           	"kws": {
                "c": [
                    // 关键帧动画 START
                    {
                        // 起始关键帧
                        // int
                        "ip": 0,
                        // 结束关键帧
                        // int
                        "op": 100,
                        // 关键帧详情 START
                        "ks": {
                            // 透明度 START
                            "o": {
                                // 属性关键帧详情 START
                                "k": [
                                    // 帧动画详情 START
                                    {
                                        // 起始帧
                                        // int
                                        "t": 0,
                                        // 属性
                                        "s": [
                                            // 透明度（范围：0 - 1）（精度：四舍五入保留两位小数）
                                            // float
                                            0.0
                                        ],
                                        // 内切线点集合 START
                                        "i": {
                                            // 属性详情集合
                                            s: [
                                                // x（精度：四舍五入保留四位小数）
                                                // float
                                                1.0,
                                                // y（精度：四舍五入保留四位小数）
                                                // float
                                                1.0
                                            ]
                                        },
                                        // 内切线点集合 END
                                        // 外切线点集合 START
                                        "o": {
                                            // 与上述内切点属性描述相同
                                            s: [1.0, 1.0]
                                        }
                                        // 外切线点集合 END
                                    }
                                    // 帧动画详情 END
                                ]
                                // 属性关键帧详情 END
                            },
                            // 透明度 END
                            // 旋转 START
                            "r": {},
                            // 旋转 END
                            // 位置 START
                            "p": {},
                            // 位置 END
                            // 缩放 START
                            "s": {
                                // x 轴缩放
                                "x": {
                                	// 属性关键帧详情 START
                                    "k": [
                                        // 帧动画详情 START
                                        {
                                            // 起始帧
                                            // int
                                            "t": 0,
                                            // 属性
                                            "s": [
                                                // 缩放值（范围：0 - 1）（精度：四舍五入保留两位小数）
                                                // float
                                                0.0
                                            ],
                                            // 内切线点集合 START
                                            "i": {
                                                // 属性详情集合
                                                s: [
                                                    // x（精度：四舍五入保留四位小数）
                                                    // float
                                                    1.0,
                                                    // y（精度：四舍五入保留四位小数）
                                                    // float
                                                    1.0
                                                ]
                                            },
                                            // 内切线点集合 END
                                            // 外切线点集合 START
                                            "o": {
                                                // 属性详情集合
                                                s: [
                                                    // x（精度：四舍五入保留四位小数）
                                                    // float
                                                    1.0,
                                                    // y（精度：四舍五入保留四位小数）
                                                    // float
                                                    1.0
                                                ]
                                            }
                                            // 外切线点集合 END
                                        }
                                        // 帧动画详情 END
                                    ]
                                    // 属性关键帧详情 END
                                },
                                // y 轴缩放
                                "y": {
                                    
                                },
                                // z 轴缩放
                                "z": {
                                    
                                }
                            },
                            // 缩放 END
                            // [custom] 自定义动画 START
                            "c": [
                                {
                                    // [type] 动画类型
                                    // int
                                    "t": 1,
                                    // 自定义动画详情 START
                                    "ks": {}
                                    // 自定义动画详情 END
                                }
                            ]
                            // [custom] 自定义动画 END
                        }
                        // 关键帧详情 END
                    }
                   // 关键帧动画 END
                ]
            }
            // 关键帧动画集合 END
        },
        // [in] 进场动画 END
        // [stay] 驻场动画 START
        "s": {},
        // [stay] 驻场动画 END
        // [out] 出场动画 START
        "o": {}
        // [out] 出场动画 END
    }
    // [key] 关键帧动效 END
}
```



### 动画应用

动画播放顺序 元素动画 > 页动画。同时存在页动画与元素动画时动画元素执行元素动画。



#### 页动画

``` javascript
{
    "pageInfo": [
        {
            // 页动画
            "k": "[key] 关键帧动效"
        }
    ]
}
```



#### 元素动画

``` javascript
{
    "work": [
        [
            {
                "attribute": {
                    // 元素动画
                    "k": "[key] 关键帧动效"
                }
            }
        ]
    ]
}
```



### 元素播放顺序延迟

`k -> i -> d` 元素播放顺序延迟

``` javascript
// 以下数据结构为 t 为 1 时的案例
{
    // [delay] 元素播放顺序延迟 START
    // 页动画特有属性
    "d": {
        // [type] 延迟类型
        // int
        "t": 1,
        // 属性详情根据 [type] 控制
       	"s": [
            // 延迟帧数
            // int
            0,
            30
        ]
    }
    // [delay] 元素播放顺序延迟 END
}
```

`s`数组中的延迟帧数从上一个元素动画开始帧为起始帧数。数组内延迟帧数循环应用于画板内元素。

如：

``` javascript
{
    "s": [
        0
    ]
}
// 元素执行动画时所以元素动画一起执行

{
    "s": [
        0,
        30
    ]
}
// 元素执行动画时
// 第 1 个元素：直接播放
// 第 2 个元素：在上述元素开始播放后 30 帧后开始播放
// 第 3 个元素：在上述元素开始播放时开始播放
// 第 4 个元素：在上述元素开始播放后 30 帧后开始播放
// ...
```





### 元素播放顺序

`k -> i -> pi` 元素播放顺序

`pi`各种类型详解：

- 1
  - 按元素绘制起始点与画布上边距离由小到大按顺序播放
- 2
  - 按元素绘制起始点与画布右边距离由小到大按顺序播放
- 3
  - 按元素绘制起始点与画布下边距离由小到大按顺序播放
- 4
  - 按元素绘制起始点与画布左边距离由小到大按顺序播放
- 5
  - 按元素 zIndex 由大到小进行播放
- 6
  - 按元素 zIndex 由小到大进行播放
- 7
  - 按元素 zIndex 由小到大左右往中间
- 8
  - 按元素 zIndex 由小到大四周往中间


### 关键帧动画集合类型

`kwst`对 `kws` 中的动画对元素的赋予进行了说明

`kwst` 各种类型详解：

- 1

  - ```javascript
    // 之后的所有类型都在此基础类型上进行扩展
    {
        "kwst": 1,
        "kws": {
            // [common] 普通元素动画
            // 按顺序循环赋予元素
            "c": [
                // 动画 1
                {},
                // 动画 2
                {}
            ]
        }
    }
    // 元素执行动画时
    // 第 1 个元素：动画 1
    // 第 2 个元素：动画 2
    // 第 3 个元素：动画 1
    // 第 4 个元素：动画 2
    // ...
    
    {
        "kwst": 1,
        "kws": {
            // [common] 普通元素动画
            // 按顺序循环赋予元素
            "c": [
                // 动画 1
                {},
                // 动画 2
                {}
            ],
            // [text] 文本动画（只对文本生效）
            "t": [
                // 文本动画 1
                {},
                // 文本动画 2
                {}
            ]
        }
    }
    // 如有文本动画时文本动画赋予单独计算不对其他动画赋予进行影响
    // 元素执行动画时
    // 第 1 个元素（非文本）：动画 1
    // 第 2 个元素（文本）：文本动画 1
    // 第 3 个元素（非文本）：动画 2
    // 第 4 个元素（非文本）：动画 1
    // 第 5 个元素（文本）：文本动画 2
    // ...
    ```

- 2

  - ``` javascript
    {
        "kwst": 2,
        "kws": {
            // [main] 主元素动画
            "m": [
                // 主动画 1
                {}
            ]
            // [common] 普通元素动画
            // 按顺序循环赋予元素
            "c": [
                // 动画 1
                {},
                // 动画 2
                {}
            ]
        }
    }
    // 元素执行动画时，无特殊说明的情况下第一个元素为主元素
    // 第 1 个元素：主动画 1
    // 第 2 个元素：动画 1
    // 第 3 个元素：动画 2
    // 第 4 个元素：动画 1
    // ...
    ```

    



### 自定义动画