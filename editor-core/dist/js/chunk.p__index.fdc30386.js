(self["webpackChunk"]=self["webpackChunk"]||[]).push([[866],{40384:function(e){e.exports={RolePageWarp:"RolePageWarp___1ZAxy",moreShow:"moreShow___1pxB7",simpleShow:"simpleShow___3EzYo",simpleShowTop:"simpleShowTop___2F_zS",simpleShowTopLeft:"simpleShowTopLeft___2fiNH",simpleShowTopRight:"simpleShowTopRight___3oz1v",simpleShowContent:"simpleShowContent___10fcL",item:"item___15M31",rolePopoverWarp:"rolePopoverWarp___3I1Ld",rolePopoverWarpTitle:"rolePopoverWarpTitle___mrx2W",rolePopoverWarpContent:"rolePopoverWarpContent___2Hu6q",rolePopoverWarpItem4:"rolePopoverWarpItem4___3b6bj",rolePopoverWarpItem:"rolePopoverWarpItem___2z_jg",rolePopoverWarpItemImg:"rolePopoverWarpItemImg___1peSu",rolePopoverWarpItemName:"rolePopoverWarpItemName___2u-Fz",rolePopover:"rolePopover___1x1vw"}},34625:function(e){e.exports={awsc:"awsc___bd7QG",awscTitle:"awscTitle___2dAKf"}},59322:function(e){e.exports={handle:"handle___hk_27"}},80026:function(e){e.exports={"rail-wrap":"rail-wrap___3vnKG"}},74567:function(e){e.exports={capacityToRemindWarp:"capacityToRemindWarp___1QEVf",capacityToRemindWarpTop:"capacityToRemindWarpTop___2xGYC",capacityToRemindWarpTopIcon:"capacityToRemindWarpTopIcon___2mKZV",capacityToRemindWarpTopCont:"capacityToRemindWarpTopCont___3INUW",capacityToRemindWarpTopFooter:"capacityToRemindWarpTopFooter___2HNMA",button1:"button1___2B32V",button2:"button2___36sRb"}},46468:function(e){e.exports={fontBgColor:"fontBgColor___1jDRJ",fontBgItem:"fontBgItem___3Fmjd"}},93599:function(e){e.exports={basicRow:"basicRow___58xsK",color:"color___2NB9d"}},49815:function(e){e.exports={colorPickup:"colorPickup___3i_ZN",pointer:"pointer___2CxrO",huePicker:"huePicker___JWJcX",alphaPicker:"alphaPicker___1h0eu",colorPickupFooter:"colorPickupFooter___24sAC",left:"left___1zGHV",content:"content___2iRiA",right:"right___1XMpO"}},80245:function(e){e.exports={designerColorPopover:"designerColorPopover___39KJi",colorPopover:"colorPopover___1eQeq",colorPopoverRight:"colorPopoverRight___cnra-",colorWarp:"colorWarp___1IKCc",colorWarpItem:"colorWarpItem___2RBCR"}},36055:function(e){e.exports={designerColorPopover:"designerColorPopover___1oh2t",colorWarp:"colorWarp___1_P2V",colorWarpItem:"colorWarpItem___3tCxc",colorPopover:"colorPopover___3_0y2",colorPopoverRight:"colorPopoverRight___3aNlY"}},81490:function(e){e.exports={colorPopover:"colorPopover___2TtTS",colorTab:"colorTab___1MslM",colorTabItemActive:"colorTabItemActive___ShV9Y",colorTabItem:"colorTabItem___1mvZV"}},84676:function(e){e.exports={EffectWrapper:"EffectWrapper___34vP1",EffectItem:"EffectItem___3I_l_",background:"background___14Jiu",video:"video___bZGw_",img:"img___Fjqwe"}},70044:function(e){e.exports={"music-list-item":"music-list-item___3Sqg5","action-btn":"action-btn___3ZAI2","music-play-area":"music-play-area___2Q6we","play-icon":"play-icon___1y6hC","music-process":"music-process___ItGC6","music-time":"music-time___2yCK1"}},4933:function(e){e.exports={"no-title-modal":"no-title-modal___2yte4"}},88355:function(e){e.exports={"overwrite-popover":"overwrite-popover___1q1x8","no-popover-arrow":"no-popover-arrow___WWANN"}},27916:function(e){e.exports={"timeLine-item-wrapper":"timeLine-item-wrapper___3qB6c","timeLine-item":"timeLine-item___2P0rB","timeLine-dragCamera":"timeLine-dragCamera___1cNYb","timeLine-dragCamera-active":"timeLine-dragCamera-active___FxS7U","timeLine-dragCamera-dragging":"timeLine-dragCamera-dragging___2OA21","timeLine-dragCamera-link":"timeLine-dragCamera-link___2cCB-",line:"line___2JJCQ",dian:"dian___2lEpK",triangle:"triangle___3NlX9",add:"add___34xnM","last-dragCamera-link":"last-dragCamera-link___2Z7MA","no-action":"no-action___3HcqL","no-camera":"no-camera___3PK2O","dragCamera-title":"dragCamera-title___1ydEY",actionPopover:"actionPopover___22OXl",actionMenu:"actionMenu___3dA4h",actionMenuItem:"actionMenuItem___1jLTn"}},20824:function(e){e.exports={violationModalContent:"violationModalContent___1dS5t",violationModalContentTitle:"violationModalContentTitle___1U6TZ",violationModalContentIcon:"violationModalContentIcon___2tJvl",lianxikefuErweima:"lianxikefuErweima___CA2B1",violationModalContentFooter:"violationModalContentFooter___1XAf6",violationModalContentFooterButton:"violationModalContentFooterButton___1o3Ia"}},50209:function(e){e.exports={warnModalContent:"warnModalContent___3ngcX",warnModalContentTitle:"warnModalContentTitle___3oarZ",warnModalContentContent:"warnModalContentContent___2gBo4"}},47409:function(e){e.exports={EffectWrapper:"EffectWrapper___OQQwp",EffectItem:"EffectItem___3FS0K",background:"background___3ergQ",video:"video___35w-S",img:"img___3hW7l"}},40203:function(e){e.exports={video:"video___1Kusz"}},12416:function(e){e.exports={lllegal:"lllegal___T-27-",lllegalIcon:"lllegalIcon___1QdhE",lllegalTip:"lllegalTip___26wbm"}},46179:function(e){e.exports={dragView:"dragView___ej3uw",dragViewWrap:"dragViewWrap___Ughu4",dragViewWrapCenter:"dragViewWrapCenter___59tzx",dragIconWrap:"dragIconWrap___1NYi6",text:"text___E55du",dragIcon:"dragIcon___2BGXO"}},68204:function(e){e.exports={size:"size___2hr-i",active:"active___N5FV7",action:"action___3qfdC","input-number":"input-number___1rFAl"}},72196:function(e){e.exports={"absolute-top-left":"absolute-top-left___ev2g-","absolute-top-right":"absolute-top-right___27BAu","absolute-bottom-left":"absolute-bottom-left___2KCgW","xiudodo-hidden":"xiudodo-hidden___3LuTh","xiudodo-default-background":"xiudodo-default-background___3K5UB","text-ellipsis":"text-ellipsis___1YCdC","icon-size":"icon-size___1mp0e",hover:"hover___2hUjV"}},13232:function(e){e.exports={"absolute-top-left":"absolute-top-left___3dzoy","absolute-top-right":"absolute-top-right___3N6RI","absolute-bottom-left":"absolute-bottom-left___2GAO7","xiudodo-hidden":"xiudodo-hidden___1pP1G","xiudodo-default-background":"xiudodo-default-background___1OtaD","text-ellipsis":"text-ellipsis___29nIV","flex-box":"flex-box___3dPBg",wrap:"wrap___3JZI1",partTransition:"partTransition___1XuQK","cover-dropdown":"cover-dropdown___5oDiR","transfer-opt-item":"transfer-opt-item___1WxjL","add-tooltip":"add-tooltip___3NkcK",icon:"icon___ouIz8",iconChoosed:"iconChoosed___1eZ_c"}},67434:function(e){e.exports={"operate-bar":"operate-bar___1EOAy","video-frame-wrap":"video-frame-wrap___3eUlu","axis-track-video-overlay":"axis-track-video-overlay___32eBk",icon:"icon___asHQC","axis-track-overlay":"axis-track-overlay___p9wHL","axis-track-text":"axis-track-text___1cyZE","axis-track-element":"axis-track-element___2Z3cW","axis-track-module":"axis-track-module___k0Ls_",assetAea:"assetAea___1tPvr","assetAea-icon":"assetAea-icon___ETwgl","assetAea-i":"assetAea-i___1TBQS","assetAea-o":"assetAea-o___3IzhD","assetAea-line":"assetAea-line___F-ZDc"}},45747:function(e){e.exports={"image-list":"image-list___3tpVV","image-item":"image-item___cMW_I",duration:"duration___2hGhL","image-item-mask":"image-item-mask___1B6AF",action:"action___1y7UX"}},65826:function(e){e.exports={"absolute-top-left":"absolute-top-left___jdOVQ","absolute-top-right":"absolute-top-right___2QxwZ","absolute-bottom-left":"absolute-bottom-left___3kd15","xiudodo-hidden":"xiudodo-hidden___147B8","xiudodo-default-background":"xiudodo-default-background___zmXsU","text-ellipsis":"text-ellipsis___3xSuT","file-action-replace":"file-action-replace___3PfrQ",num:"num___WdZk9"}},16627:function(e){e.exports={"absolute-top-left":"absolute-top-left___2gguO","absolute-top-right":"absolute-top-right___1MmjK","absolute-bottom-left":"absolute-bottom-left___1Shfe","xiudodo-hidden":"xiudodo-hidden___2viv5","xiudodo-default-background":"xiudodo-default-background___jWBgp","text-ellipsis":"text-ellipsis___3ivvS","text-desc":"text-desc___39P1a","text-list":"text-list___1mraT","text-item":"text-item___MrcMJ","text-item-active":"text-item-active___17m2T"}},61082:function(e){e.exports={Assets:"Assets___3ezck",title:"title___3M2BR",assetList:"assetList___1G19U",count:"count___2hHUz",text:"text___3MQq_",MediaItem:"MediaItem___1L6GI",duration:"duration___13jsm",operation:"operation___2ZkoN",delete:"delete___2SKS6",TextItem:"TextItem___2IEEM",active:"active___DOUYE"}},30700:function(e){e.exports={Card:"Card___2CVsG",active:"active___i9S9i",hidden:"hidden___3Bo62",show:"show___1pDa2"}},39287:function(e){e.exports={Content:"Content___3T54h",canvasWrapper:"canvasWrapper___2U70x",stage:"stage___2yCQA",poster:"poster___2Sphd",coverPlayer:"coverPlayer___2kZWg",slider:"slider___2StRa",progress:"progress___2WySq",footer:"footer___nfPrl",partWrapper:"partWrapper___11HW-",partTitle:"partTitle___1fjYr",partButton:"partButton___3CGg6",player:"player___30VF7",playerIcon:"playerIcon___1bcMj",icon:"icon___1Xx5x"}},59353:function(e){e.exports={Header:"Header___wRGUp",left:"left___3K3mJ",progress:"progress___3y5n4",progressText:"progressText___oFRPi",replace:"replace___20F0s"}},87246:function(e){e.exports={Parts:"Parts___3Hj3o",operation:"operation___ZR0LR",copy:"copy___2lq-l",delete:"delete___1l-Gs",duration:"duration___3Gx-a",partItem:"partItem___HEJQd",active:"active___25lWs",cover:"cover___21XUa"}},23223:function(e){e.exports={ActionHelper:"ActionHelper___1K740",content:"content___2lAk8",item:"item___3hcEa",active:"active___2dvji"}},31536:function(e){e.exports={ConciseMode:"ConciseMode___2aiit",loading:"loading___1WdJl",show:"show___1oAKd"}},32827:function(e){e.exports={"absolute-top-left":"absolute-top-left___qnS6s","absolute-top-right":"absolute-top-right___lSW1u","absolute-bottom-left":"absolute-bottom-left___cOE-U","xiudodo-hidden":"xiudodo-hidden___2mj_R","xiudodo-default-background":"xiudodo-default-background___1nrz9","text-ellipsis":"text-ellipsis___3m6Fr","icon-size":"icon-size___gdLTi",line:"line___17q22",hover:"hover___3RazU",lineItem:"lineItem___3wfK8"}},41623:function(e){e.exports={icon:"icon___44iXm",wrap:"wrap___2sg7n"}},65037:function(e){e.exports={Color:"Color___58xIE",ColorPopover:"ColorPopover___21-mo",colorDraggableModal:"colorDraggableModal___MXSVt"}},74765:function(e){e.exports={FontSize:"FontSize___Lrx8k",select:"select___1X36v",item:"item___3BjpX"}},49541:function(e){e.exports={Color:"Color___3pT4E"}},62356:function(e){e.exports={item:"item____n4XN",active:"active___w8NlC"}},94175:function(e){e.exports={CustomColor:"CustomColor___1xX6O",Saturation:"Saturation___sRJnu",handler:"handler___2fziI",Hue:"Hue___ZvpBc",TwitterPicker:"TwitterPicker___2UXrK"}},84627:function(e){e.exports={ActionHelper:"ActionHelper___1TuUh",content:"content___35e5r"}},67155:function(e){e.exports={hoverLineX:"hoverLineX___SaA8h",referenceLineX:"referenceLineX___1sUqc",hoverLineY:"hoverLineY___2aiHj",referenceLineY:"referenceLineY___3O9pN",referenceLineXTip:"referenceLineXTip___1dBb2",referenceLineYTip:"referenceLineYTip___VGBCC","corner-block":"corner-block___3eH1O","horizontal-rulers":"horizontal-rulers___27IeP","vertical-rulers":"vertical-rulers___lCHFa","vertical-rulers-content":"vertical-rulers-content___u7a0S"}},80656:function(e){e.exports={SvgEditor:"SvgEditor___2ud-0"}},39004:function(e){e.exports={wrap:"wrap___3wIZB","watermark-icon":"watermark-icon___PfQWe",text:"text___2qDbz",desc:"desc___3aMog","desc-right":"desc-right___mgKSZ","desc-top":"desc-top___12zAt"}},62454:function(e){e.exports={assetWrap:"assetWrap___Purrw",actionWrap:"actionWrap___6tiMt",actionItem:"actionItem___1nkOv",actionItemChoosed:"actionItemChoosed___5du-e",assetList:"assetList___t5NMs",assetListItem:"assetListItem___1rTR7",assetListItemTitle:"assetListItemTitle___3GsC-",assetListItemWrap:"assetListItemWrap___R2fg6",MediaItem:"MediaItem___3URrS",duration:"duration___1rhuF",operation:"operation___31d8L",actionDrop:"actionDrop___2oqKJ",actionDropWrap:"actionDropWrap___2g1sg",actionDropWrapItem:"actionDropWrapItem___3lJ42"}},75195:function(e){e.exports={Card:"Card___15rFh",active:"active___2Nvmb",hidden:"hidden___3oKPS",show:"show___19tll"}},5037:function(e){e.exports={Header:"Header___1X2SK",top:"top___1mZaI",bottom:"bottom___1BIkJ",left:"left___pf329",leftText:"leftText___Zc3De",replace:"replace___3ozIG",leftTip:"leftTip___G62Kv",icon:"icon___2_lBn",replaceButton:"replaceButton___39UVa",newFun:"newFun___28Dxj",right:"right___3w3_H",button:"button___3lBM6",iconNext:"iconNext___2wwkM",buttonDisabled:"buttonDisabled___2SjZM",pulse:"pulse___3aioq"}},4730:function(e){e.exports={oneKeyReplaceModal:"oneKeyReplaceModal___3NqZZ",oneKeyWrapper:"oneKeyWrapper___2znpw",loading:"loading___jfhP_",show:"show___2KjGr"}},61877:function(e){e.exports={"flex-box":"flex-box___1668z",actions:"actions___3yWWk","actions-left":"actions-left___2EviL","actions-right":"actions-right___mVVMo","action-item":"action-item___12VMp",disabled:"disabled___11aQt",choosed:"choosed___3QqWr",copy:"copy___2XIxJ",assetDuration:"assetDuration___30ymK",name:"name___4ChyH",ruler:"ruler___2NWsv"}},49197:function(e){e.exports={menu:"menu___1-34c","overlay-dropdown":"overlay-dropdown___2PzDy"}},36345:function(e){e.exports={wrap:"wrap___1Seg2",text:"text___yCGXi"}},30730:function(e){e.exports={"image-wrap":"image-wrap___3auHb"}},30959:function(e){e.exports={"text-wrap":"text-wrap___2r1AL",text:"text___1BX0c"}},79066:function(e){e.exports={"video-wrap":"video-wrap___3TulW"}},34947:function(e){e.exports={"asset-item":"asset-item___3ORdY","asset-item-active":"asset-item-active___1MRju",duration:"duration___1SXxO"}},1304:function(e){e.exports={dropContainer:"dropContainer___1W6SN",assetsWrap:"assetsWrap___2IJrr",assets:"assets___3zdRI",assetsBackground:"assetsBackground___3Pse1","asset-track":"asset-track___16zAA","asset-track-large":"asset-track-large___v5vbN"}},10198:function(e){e.exports={menu:"menu___9w9LH","overlay-dropdown":"overlay-dropdown___Ckjmv"}},42992:function(e){e.exports={"camera-action":"camera-action___1JBVS","camera-action-item":"camera-action-item___OarIL",icon:"icon___3cqgJ"}},77197:function(e){e.exports={"designer-timeLine":"designer-timeLine___rNAtf","timeLine-item":"timeLine-item___2WwlJ","timeLine-dragCamera":"timeLine-dragCamera___1OjiC","timeLine-dragCamera-active":"timeLine-dragCamera-active___1atGF","timeLine-dragCamera-dragging":"timeLine-dragCamera-dragging___2P-aA","timeLine-dragCamera-link":"timeLine-dragCamera-link___2nnd2",line:"line___1ZvHv",dian:"dian___1_by5",triangle:"triangle___3Bqgb",add:"add___3HNd_","last-dragCamera-link":"last-dragCamera-link___3uAi7","no-action":"no-action___3Fogt","no-camera":"no-camera___2sm7z","dragCamera-title":"dragCamera-title___CoojM",actionPopover:"actionPopover___g3HU3",actionMenu:"actionMenu___1JSyL",actionMenuItem:"actionMenuItem___35D9S"}},14750:function(e){e.exports={wrap:"wrap___Wdrtk","change-btn":"change-btn___3jZta",slider:"slider___a5eip",line:"line___3SqoN",handler:"handler___3GAPT"}},45552:function(e){e.exports={hoverLineX:"hoverLineX___XkJ-d",referenceLineX:"referenceLineX___2ACOg",hoverLineY:"hoverLineY___29tu1",referenceLineY:"referenceLineY___q2iZW",referenceLineXTip:"referenceLineXTip___2TfPg",referenceLineYTip:"referenceLineYTip___1--L_",designer_corner_block:"designer_corner_block___2JTDE",designerHorizontal:"designerHorizontal___2RYrO",designer_vertical:"designer_vertical___3Sbaw",designer_vertical_content:"designer_vertical_content___2zQRj"}},5493:function(e){e.exports={"preview-modal":"preview-modal___2zo5w","preview-video":"preview-video___2qzLU"}},73345:function(e){e.exports={"input-suffix":"input-suffix___JpKzz"}},22979:function(e){e.exports={"designer-header":"designer-header___Qj2_h","flex-box":"flex-box___9XRST","flex-box-item":"flex-box-item___WwV-y","flex-box-item-disabled":"flex-box-item-disabled___5M7e4","header-left":"header-left___2gR0y","header-right":"header-right___2mPxT","header-home":"header-home___3fD6V","header-save":"header-save___5z84p",icon:"icon___2SEUU","header-submit":"header-submit___19N9E","header-preview":"header-preview___3EmjB","save-loading":"save-loading___3oW8E"}},58817:function(e){e.exports={animationPanel:"animationPanel___aPqQM",animationTabItem:"animationTabItem___25iei",animationListBox:"animationListBox___2Cpq-",animationListWhiteFont:"animationListWhiteFont___2EIDs",animationTimeBox:"animationTimeBox___2C5VL",timeLabel:"timeLabel___2M85K"}},1897:function(e){e.exports={basicRow:"basicRow___24wwM",basicRowName:"basicRowName___2ptyR",basicRowContent:"basicRowContent___3gE73",color:"color___1oaab",colorPopover:"colorPopover___2B4FK",colorTab:"colorTab___gc8rK",colorTabItemActive:"colorTabItemActive___32vPq",colorTabItem:"colorTabItem___2xzRs",colorPopoverSketch:"colorPopoverSketch___iwNg-",chooseColor:"chooseColor___34VcL",chooseColorGradient:"chooseColorGradient___3v3fV",flipItem:"flipItem___1euL7",icon:"icon___1BtnO",flipItemSelectd:"flipItemSelectd___3nVKE"}},45417:function(e){e.exports={FiltersAdjust:"FiltersAdjust___2oIcR",list:"list___3FqG6",color:"color___16XTe",colorTitle:"colorTitle___27jLT",textColor:"textColor___2f1ZB",bottom:"bottom___1GbJJ",reset:"reset___3UXb9"}},60605:function(e){e.exports={basics:"basics___kXoo8",overturn:"overturn___gip5f",label:"label___3PhKG",active:"active___uzDVY",icon15:"icon15___bfWF9",icon6:"icon6___2vF4H",button:"button___3oAWp",bottom:"bottom___1CyX8",opacity:"opacity___1E7wj",progress:"progress___qoJS4",number:"number___3LFBY"}},79042:function(e){e.exports={item:"item___3q3tE",autoDestroyVideo:"autoDestroyVideo___3lE_0",itemButton:"itemButton___3s_Ul",time:"time___1O0a2",itemButtonReplace:"itemButtonReplace___qajFT",itemButtonAdd:"itemButtonAdd___3d00W"}},80510:function(e){e.exports={"color-picker":"color-picker___2ngVT",more:"more___3F476",initialPageWarp:"initialPageWarp___1XarN",colorBackground:"colorBackground___R9Qdd",title:"title___1cY8b",content:"content___goUY7",top:"top___e-w9K",colorFirstItem:"colorFirstItem___1dTdC",colorItem:"colorItem___6RwTb",colorWarp:"colorWarp___2RlOS",colorText:"colorText___TVgqm",colorContent:"colorContent___1ifmF",colorItem4:"colorItem4___2EmYG",detailPage:"detailPage___2uEf8",detailPageT:"detailPageT___1Ysxd",tagWarp:"tagWarp___2p_n0",detailPageTop:"detailPageTop___VYeoH",detailPageTopLeft:"detailPageTopLeft___1xp9t",detailPageTopRight:"detailPageTopRight___-0YZX",detailPageTitle:"detailPageTitle___1sr-0",itemName:"itemName___2V4iR",itemText:"itemText___3QTE7",active:"active___22mAo",item:"item___2tm8U",itemWarp:"itemWarp___OZ31q",autoDestroyVideo:"autoDestroyVideo___2hQay",itemButton:"itemButton___3QkuR",time:"time___3Mu95",itemButtonReplace:"itemButtonReplace___1gnVc",itemButtonAdd:"itemButtonAdd___2czWH",searchPage:"searchPage___3i_o2",searchPageScreen:"searchPageScreen___1dTpb",tagsTopWarp:"tagsTopWarp___2_v50",searchContent:"searchContent___2NyID",tagsTop:"tagsTop___1Pgt2",searchPageContent:"searchPageContent___iNYuC",bgaItem:"bgaItem___3kAB7",bgaTitle:"bgaTitle___TPgB-",emptyWarp:"emptyWarp___2uaoe",img:"img___2RnDO"}},13070:function(e){e.exports={backgroundWarp:"backgroundWarp___Zq81k",topInput:"topInput___34fgE",suffix:"suffix___Kn0K7",content:"content___bB9Jp"}},75233:function(e){e.exports={title:"title___I0584",overlayRow:"overlayRow___3h3jO",radioGroup:"radioGroup___3NqlE",overlayColor:"overlayColor___9GjK4",overlayLabel:"overlayLabel___1yarC",colorSelector:"colorSelector___1b-99",slider:"slider___wVEl6"}},46953:function(e){e.exports={EffectPanel:"EffectPanel___3_6sA",list:"list___K2z51"}},71453:function(e){e.exports={initialPageWarp:"initialPageWarp___27EZq",more:"more___1Un6j",detailPage:"detailPage___3ycOj",detailPageT:"detailPageT___19w6L",tagsTop:"tagsTop___4SC55",tagWarp:"tagWarp___RrJMI",detailPageTop:"detailPageTop___1tFtY",detailPageTopLeft:"detailPageTopLeft___2uWKg",detailPageTopRight:"detailPageTopRight___2gjMG",detailPageTitle:"detailPageTitle___R9gRu",itemName:"itemName___1paue",itemText:"itemText___ZkhNU",active:"active___1dI2Y",item:"item___7hH55",itemWarp:"itemWarp___201c6",autoDestroyVideo:"autoDestroyVideo___3kz-e",itemButton:"itemButton___2bKjI",loading:"loading___35LYf",itemButtonAdd:"itemButtonAdd___3GJ0U",searchPage:"searchPage___3ktjI",searchPageScreen:"searchPageScreen___2lQUh",tagsTopWarp:"tagsTopWarp___33PSJ",searchContent:"searchContent___3G8ZH",searchPageContent:"searchPageContent___3Aleb",emptyWarp:"emptyWarp___3IMMM",img:"img___2PT5g"}},90965:function(e){e.exports={imagesWarp:"imagesWarp___1puG5",topInput:"topInput___2ZZ6u",suffix:"suffix___3zRaT",content:"content___gLaqv"}},94171:function(e){e.exports={tabWarp:"tabWarp___2mqLw",tabItem:"tabItem___2zhbb",moreCmp:"moreCmp___1HIOb"}},79050:function(e){e.exports={searchPart:"searchPart___2-21a",searchCatolag:"searchCatolag___2OcNV",icon:"icon___3fy6N",searchCatalogView:"searchCatalogView___1FeX4"}},54825:function(e){e.exports={singer:"singer___28u2u",moldTitle:"moldTitle___19vCV",header:"header___2k7A0",goback:"goback___1HVPc"}},24433:function(e){e.exports={material:"material___3qZjB",materialHeader:"materialHeader___3iDIC",materialInput:"materialInput___FnscF",suffix:"suffix___DaZRn",lazyLoad:"lazyLoad___2yLdu"}},37187:function(e){e.exports={musicTags:"musicTags___3TOoU",itemText:"itemText___1QJyq",active:"active___3UmWc",item:"item___477sT"}},54757:function(e){e.exports={emptyWarp:"emptyWarp___1uQby",img:"img___38R0y",musicContentWarp:"musicContentWarp___1AFT5",check:"check___l4bhq",musicItemPlay:"musicItemPlay___2j173",musicItemWarp:"musicItemWarp___2RoKv",musicItemAdd:"musicItemAdd___1tMHZ",musicItemLeft:"musicItemLeft___2cY14",musicItemRight:"musicItemRight___3NIhl",musicItemRightTop:"musicItemRightTop___z4luE",musicItemRightBottom:"musicItemRightBottom___32ZHM",musicPlayWarp:"musicPlayWarp___3QyGA",musicPlayLeft:"musicPlayLeft___2g9DG",musicPlayContent:"musicPlayContent___1LO0i",musicPlayContentTop:"musicPlayContentTop___pVMOL",musicPlayContentBottom:"musicPlayContentBottom___29CyI",musicPlayStatTime:"musicPlayStatTime___22t2O",shuxian:"shuxian___1OFbE",musicPlayEndtime:"musicPlayEndtime___2b4vW",musicPlayProgress:"musicPlayProgress___CIUqg",musicPlayClose:"musicPlayClose___39WTt",musicItemtooltipText:"musicItemtooltipText___cFP2l"}},91953:function(e){e.exports={musicPanel:"musicPanel___29WsZ",topInput:"topInput___2e6OJ","music-tags":"music-tags___1547V","music-tag-label":"music-tag-label___1GHqb","music-tag-item":"music-tag-item___1l2En",active:"active___1o4LM"}},76025:function(e){e.exports={RolePageWarp:"RolePageWarp___3exDA",moreShow:"moreShow___1nUwc",simpleShow:"simpleShow___XCtl3",simpleShowTop:"simpleShowTop___3OJyN",simpleShowTopLeft:"simpleShowTopLeft___2GiaP",simpleShowTopRight:"simpleShowTopRight___2uqGe",simpleShowContent:"simpleShowContent___1C7uf",item:"item___tXE6g",rolePopoverWarp:"rolePopoverWarp___2BQG1",rolePopoverWarpTitle:"rolePopoverWarpTitle___obEJA",rolePopoverWarpContent:"rolePopoverWarpContent___1wDYd",rolePopoverWarpItem4:"rolePopoverWarpItem4___km12s",rolePopoverWarpItem:"rolePopoverWarpItem___2E3YF",rolePopoverWarpItemImg:"rolePopoverWarpItemImg___2TNKc",rolePopoverWarpItemName:"rolePopoverWarpItemName___2IYaR",rolePopover:"rolePopover___1L-k0"}},85518:function(e){e.exports={transAction:"transAction___lYC2S",transActionItem:"transActionItem___KmnTZ",transActionItemRow:"transActionItemRow___6wsUB",rowTip:"rowTip___l417c",transActionItemRowColor:"transActionItemRowColor___1pGLn"}},1522:function(e){e.exports={"absolute-top-left":"absolute-top-left___3oD2n","absolute-top-right":"absolute-top-right___2AAde","absolute-bottom-left":"absolute-bottom-left___1QJWv","xiudodo-hidden":"xiudodo-hidden___2aXb-","xiudodo-default-background":"xiudodo-default-background___dX1Vk","text-ellipsis":"text-ellipsis___MDKA8",item:"item___1Zocv","item-active":"item-active___3_H9B",name:"name___2uhSK",addButton:"addButton___3t3S4"}},54655:function(e){e.exports={color:"color___1CWNy",chooseColor:"chooseColor___tzvIr"}},5236:function(e){e.exports={"language-tabs":"language-tabs___s_Mcy","language-tabs-item":"language-tabs-item___7Hz8P","language-item-active":"language-item-active___2jLH3","font-family-list":"font-family-list___1dtoX","font-family-item":"font-family-item___3-s5r","font-family-active":"font-family-active___2G_oQ","font-family-group":"font-family-group___3vND4","font-family-wrap":"font-family-wrap___3FGBe","designer-font-family":"designer-font-family___1-5Ri","font-family-wrap-desiger":"font-family-wrap-desiger___2_KQc","wrap-icon":"wrap-icon___2Jn6R",cateName:"cateName___1B20l","popover-styles":"popover-styles___rDMOn"}},66979:function(e){e.exports={size:"size___3ikVJ",active:"active___3IDo5","size-list":"size-list___1sOjF",inputDesiger:"inputDesiger___3vu9q","input-number-desiger":"input-number-desiger___10H72",action2:"action2___1vfwN","popover-styles":"popover-styles___5JbG1"}},23891:function(e){e.exports={"absolute-top-left":"absolute-top-left___1UdFG","absolute-top-right":"absolute-top-right___2phTy","absolute-bottom-left":"absolute-bottom-left___1CCfv","xiudodo-hidden":"xiudodo-hidden___3YzJQ","xiudodo-default-background":"xiudodo-default-background___2A9_l","text-ellipsis":"text-ellipsis___1BUTL",list:"list___1OmmG"}},91745:function(e){e.exports={"absolute-top-left":"absolute-top-left___3bfeT","absolute-top-right":"absolute-top-right___3P0CY","absolute-bottom-left":"absolute-bottom-left___sozik","xiudodo-hidden":"xiudodo-hidden___1S0YL","xiudodo-default-background":"xiudodo-default-background___104Er","text-ellipsis":"text-ellipsis___sgsCR",sliderText:"sliderText___2JRt2",slider:"slider___3cTsq",input:"input___2F_A0"}},41834:function(e){e.exports={"absolute-top-left":"absolute-top-left___3VBAg","absolute-top-right":"absolute-top-right___1M3J7","absolute-bottom-left":"absolute-bottom-left___2GIOT","xiudodo-hidden":"xiudodo-hidden___2C4uD","xiudodo-default-background":"xiudodo-default-background___Seum0","text-ellipsis":"text-ellipsis___2zB2j",styleItem:"styleItem___bOe8b",active:"active___wV_I-"}},7183:function(e){e.exports={"absolute-top-left":"absolute-top-left___RoyAs","absolute-top-right":"absolute-top-right___FRFVP","absolute-bottom-left":"absolute-bottom-left___2aQDO","xiudodo-hidden":"xiudodo-hidden___3AO2N","xiudodo-default-background":"xiudodo-default-background___5evAM","text-ellipsis":"text-ellipsis___2q7S2",list:"list___1hX4u"}},58067:function(e){e.exports={"absolute-top-left":"absolute-top-left___3JiQp","absolute-top-right":"absolute-top-right___lOHpS","absolute-bottom-left":"absolute-bottom-left___3nBLV","xiudodo-hidden":"xiudodo-hidden___1n7SR","xiudodo-default-background":"xiudodo-default-background___3wql6","text-ellipsis":"text-ellipsis___1IVS-",basicItem:"basicItem___3XpbN",basicItemTitle:"basicItemTitle___2fnDZ",basicItemView:"basicItemView___329ku"}},46583:function(e){e.exports={"upload-list-item":"upload-list-item___2Vr8u"}},72721:function(e){e.exports={"upload-list":"upload-list___2PwHN",header:"header___iWQhI","upload-list-tabs":"upload-list-tabs___2EyvC"}},40989:function(e){e.exports={list:"list___1CZRs",item:"item___1_BAM",emptyWarp:"emptyWarp___1PibU",img:"img___33S_H","classify-tags-wrap":"classify-tags-wrap___1tVPV","classify-label":"classify-label___1zOF6","classify-tags":"classify-tags___1b3I6"}},51193:function(e){e.exports={initialPageWarp:"initialPageWarp___1Z7bn",simpleShow:"simpleShow___Xahwf",simpleShowTop:"simpleShowTop___3jW2P",simpleShowTopLeft:"simpleShowTopLeft___rJc8c",simpleShowContent:"simpleShowContent___2873j",simpleShowTopRight:"simpleShowTopRight___bQVqw",item:"item___3hJyo",detailPage:"detailPage___1t9fo",detailPageT:"detailPageT___25Vt8",tagsTop:"tagsTop___3LoI-",detailPageTop:"detailPageTop___27CnJ",detailPageTopLeft:"detailPageTopLeft___s0rEC",detailPageTopRight:"detailPageTopRight___3gf_y",searchPage:"searchPage___1rFwn",searchPageScreen:"searchPageScreen___1Iuel",tagsTopWarp:"tagsTopWarp___2Ni9D",searchContent:"searchContent___2qPWh"}},68711:function(e){e.exports={imagesWarp:"imagesWarp___3uJ1h",topInput:"topInput___1tKrD",suffix:"suffix___3Yw6M"}},33381:function(e){e.exports={"absolute-top-left":"absolute-top-left___gMW3c","absolute-top-right":"absolute-top-right___2MDpm","absolute-bottom-left":"absolute-bottom-left___1lwcq","xiudodo-hidden":"xiudodo-hidden___38vuP","xiudodo-default-background":"xiudodo-default-background___1t2FG","text-ellipsis":"text-ellipsis___XeiX-",desigerSideTabPanel:"desigerSideTabPanel___31xZC"}},64590:function(e){e.exports={textTabsView:"textTabsView___1yqKX",txtCloseIcon:"txtCloseIcon___1brU7"}},97688:function(e){e.exports={"xiudodo-designer-aside":"xiudodo-designer-aside___1KB-5","side-menu":"side-menu___KjdVm","menu-item":"menu-item___2SFkn","menu-item-active":"menu-item-active___22CMQ",icon:"icon___3ZmWy","menu-item-active-background":"menu-item-active-background___3fNzB","side-panel":"side-panel___dchar"}},98955:function(e){e.exports={wrap:"wrap___23Pkl",right:"right___2B3Z6","video-title-wrap":"video-title-wrap___22cEL","video-title":"video-title___1FohY",left:"left___Xr97Y",type:"type___3d2Nm",ellipsis:"ellipsis___3Vxvw"}},3737:function(e){e.exports={wrap:"wrap___3U5OF","flex-box":"flex-box___2_9iq","border-top":"border-top___18Nli",active:"active___QX4IW",icon:"icon___1XUhN","font-size-18":"font-size-18___2Popk",avatar:"avatar___1cGpT","right-wrap":"right-wrap___25kGy",ellipsis:"ellipsis___xM4T-","bottom-menu":"bottom-menu___2_6bt"}},84537:function(e){e.exports={wrap:"wrap___39hIp",left:"left___21BKr",right:"right___238Rz",menu:"menu___TaUU_",active:"active___UtjdB",user:"user___1ieGZ"}},43471:function(e){e.exports={"reverse-scale":"reverse-scale___1Xv_C",wrap:"wrap___3I_gQ","video-scale":"video-scale___3b6Ue","video-bg":"video-bg___3TvuW","video-top":"video-top___1nqQ2","video-bottom":"video-bottom___2x8wo",play:"play___1tvZE","video-desc":"video-desc___TkQm0","video-title":"video-title___2N_sj","user-name":"user-name___wTY1_",bgm:"bgm___GbxOt",ellipsis:"ellipsis___HsmW4"}},88616:function(e){e.exports={wrap:"wrap___15BIx",left:"left___1FwK3",right:"right___23xkX","video-title-wrap":"video-title-wrap___2OLB3","video-title":"video-title___3PHcx"}},36619:function(e){e.exports={inviteMembersModal:"inviteMembersModal___3zcL5",inviteMembersModalTop:"inviteMembersModalTop___2GjK_",inviteMembersModalContent:"inviteMembersModalContent___2n6LC",inviteMembersModalFooter:"inviteMembersModalFooter___GbFI-"}},83343:function(e){e.exports={couponWarp:"couponWarp___1ZiD9",coupon:"coupon___1BUdJ",couponTitle:"couponTitle___1R8wU",couponContentWarp:"couponContentWarp___1asIK",couponContentTxt:"couponContentTxt___2YYZd",couponContent:"couponContent___3NQBu",couponRadio:"couponRadio___3w7Hc",couponCard:"couponCard___2bY8f",cardLeft:"cardLeft___2G3U0",cardLeftLeft:"cardLeftLeft___1L_Xj",cardLeftRight:"cardLeftRight___jmNtI",cardRight:"cardRight___3-4Bl",cardRightTop:"cardRightTop___2H7nQ",cardRightBottom:"cardRightBottom___1Yrwv"}},27811:function(e){e.exports={"payment-entry":"payment-entry___2Gwp6",classNameQRCodeWarp:"classNameQRCodeWarp___43MOB",classNameWarp:"classNameWarp___3LSSM",classNameTxt:"classNameTxt___1VWJw",classNameBtn:"classNameBtn___3_boq",classNameQRCode:"classNameQRCode___1pXpM","qrcode-des":"qrcode-des___vfzEU","qrcode-des-payment":"qrcode-des-payment___2J2lo",anticon:"anticon___1wj79","qrcode-des-formula":"qrcode-des-formula___4YIA4","vip-settlement-price":"vip-settlement-price___3-Oh0","strong-tip":"strong-tip___18vzc","need-to-pay-span":"need-to-pay-span___1UyoU","need-to-pay":"need-to-pay___2mOqC","qrcode-show":"qrcode-show___3X3yo","show-qrcode-loading":"show-qrcode-loading___2nzlu"}},14155:function(e){e.exports={active:"active___1jh-J",vipPackagesLi:"vipPackagesLi___F7WQc",postscript:"postscript___wamVW",timeLimit:"timeLimit___1E5hW",o_price:"o_price___U859u",count:"count___252GH",explain:"explain___2pIYB",price:"price___1RVlk"}},35983:function(e){e.exports={"recharge-modal":"recharge-modal___kj3Gl","pay-success":"pay-success___1Q3xr","recharge-modal-inner":"recharge-modal-inner___11jyV","recharge-modal-Top":"recharge-modal-Top___h0QFv","user-avatar":"user-avatar___wWVb1","vip-tab":"vip-tab___2DcVD","vip-tab1":"vip-tab1___3Fz0Q",vipTabItemIcon:"vipTabItemIcon___3Lc6N",vipTabActive:"vipTabActive___3yk-1","vip-user-info":"vip-user-info___31HRH","vip-id":"vip-id___3taD1","vip-username":"vip-username___Ste4g","expire-date":"expire-date___2Wzl5","primary-color":"primary-color___Ms33F","recharge-modal-Bottom":"recharge-modal-Bottom___1QVYI","recharge-modal-footer":"recharge-modal-footer___33wSU","strong-tip":"strong-tip___2wzvz","vip-shop":"vip-shop___UUN3w","vip-userinfo":"vip-userinfo___LpFs0","vip-detail":"vip-detail___3N_m4","vip-packages-wrapper":"vip-packages-wrapper___1s1Bu","vip-packages":"vip-packages___3PQVf","vip-upgrade":"vip-upgrade___3X4wC","ant-divider-vertical":"ant-divider-vertical___29Uch","vip-detail-title":"vip-detail-title___1jwBf",paysuccess:"paysuccess___1zShH","pmc-top":"pmc-top___1grBc","pay-successs-title":"pay-successs-title___13bWk",anticon:"anticon___1XsiO","ant-btn":"ant-btn___jnTWV","vip-settlement-price":"vip-settlement-price___2tg40",classNameQRCodeWarp:"classNameQRCodeWarp___3qoBR","qrcode-des-payment":"qrcode-des-payment___1mydK",upgradePriceDesc:"upgradePriceDesc___33dey",icon:"icon___UZEHN","vip-interest":"vip-interest___29CoK","vip-interest-line":"vip-interest-line___2HRYO","current-vip-interest":"current-vip-interest___3HGtD","current-vip-interest-title":"current-vip-interest-title___31Eub",strong:"strong___3LNV8"}},97496:function(e){e.exports={"recharge-modal":"recharge-modal___dKd8v","pay-success":"pay-success___Xk-A1","recharge-modal-inner":"recharge-modal-inner___2BBWe","recharge-modal-Top":"recharge-modal-Top___ykwt1","user-avatar":"user-avatar___DkLiq","vip-tab":"vip-tab___jx89A","vip-tab1":"vip-tab1___YK5zw",vipTabItemIcon:"vipTabItemIcon___1D5db",vipTabActive:"vipTabActive___3khQs","vip-user-info":"vip-user-info___1WwfH","vip-id":"vip-id___1XBVi","vip-username":"vip-username___fzE2x","expire-date":"expire-date___HXTPi","primary-color":"primary-color___GcrKX","recharge-modal-Bottom":"recharge-modal-Bottom___2SPVr","recharge-modal-footer":"recharge-modal-footer___sTpkG","strong-tip":"strong-tip___2xwou","vip-shop":"vip-shop___gQZ9U","vip-userinfo":"vip-userinfo___23_Es","vip-detail":"vip-detail___tWsGC","vip-packages-wrapper":"vip-packages-wrapper___1p5u2","vip-packages":"vip-packages___3UPhM","vip-upgrade":"vip-upgrade___q_pXt","ant-divider-vertical":"ant-divider-vertical___h4qoF","vip-detail-title":"vip-detail-title___WEPkL",paysuccess:"paysuccess___Zdg6M","pmc-top":"pmc-top___35jA3","pay-successs-title":"pay-successs-title___3hyYN",anticon:"anticon___TlWMh","ant-btn":"ant-btn___2LpN8","vip-settlement-price":"vip-settlement-price___2VLek",classNameQRCodeWarp:"classNameQRCodeWarp___y_U2G","qrcode-des-payment":"qrcode-des-payment___1Xq6u",upgradePriceDesc:"upgradePriceDesc___1-wI0",icon:"icon___SuaXV"}},34138:function(e){e.exports={"down-load":"down-load___2K90_","down-load-right":"down-load-right___1XIlh","down-load-left":"down-load-left___11c9c","down-load-left-icon":"down-load-left-icon___2R8Gl",shareDropdownMenu:"shareDropdownMenu___1VYrI",shareDropdownMenuItem:"shareDropdownMenuItem___3Jh2M",shareDropdownMenuItemIcon:"shareDropdownMenuItemIcon___2ihvZ"}},98060:function(e){e.exports={wrap:"wrap___eq9Er",header:"header___1YbhO",desc:"desc___262XF"}},28277:function(e){e.exports={wrap:"wrap___2PHPh",header:"header___3-wF1",desc:"desc___3Emco",buttonWarp:"buttonWarp___3VtfD",buttonLeft:"buttonLeft___2WRvb",buttonRight:"buttonRight___1fLYP"}},72182:function(e){e.exports={filter:"filter___1pSb2",label:"label___1cg86",list:"list___1Xith",showAll:"showAll___8glSE",item:"item___3NHgF",active:"active___2mXxP",sortRow:"sortRow___23zdk",filterRow:"filterRow___2G1SI",selector:"selector___bBKRP",more:"more___TaBq5",collapsed:"collapsed___KlysR",menuItem:"menuItem___2unmt"}},36571:function(e){e.exports={Preview:"Preview___1ZGac",content:"content___1P9d2",mask:"mask___1vQ8S",video:"video____PRw9",videoWrapper:"videoWrapper___3mLHk",close:"close___-ivHt"}},49556:function(e){e.exports={SelectPart:"SelectPart___LtQA1",show:"show___1XdfC",header:"header___1Hubz",back:"back___5Xklg",backIcon:"backIcon___2uWbH",title:"title___q4fQ-",selectAll:"selectAll___3S3fP",body:"body___3jbWB",list:"list___1PiEd",item:"item___1yrFa",checkbox:"checkbox___utpOh",footer:"footer___2HjEW"}},53044:function(e){e.exports={"absolute-top-left":"absolute-top-left___3shEs","absolute-top-right":"absolute-top-right___11O7s","absolute-bottom-left":"absolute-bottom-left___3sabP","xiudodo-hidden":"xiudodo-hidden___1O2yi","xiudodo-default-background":"xiudodo-default-background___2Mv2j","text-ellipsis":"text-ellipsis___3GPJL",emptyData:"emptyData___3NUge",emptyDataIcon:"emptyDataIcon___1pMOc",TemplateList:"TemplateList___1UyDG",emptyItem:"emptyItem___3MsaU",addEmpty:"addEmpty___2WLlc",addEmptyIcon:"addEmptyIcon___1sbW9",empty:"empty___LLe3V",item:"item___1tkbw",video:"video___2k_l1",hidden:"hidden___3dDlg",hover:"hover___7FM3r",partCount:"partCount___1SIxr",favorite:"favorite___2j5wC",preview:"preview___10bcs",add:"add___1BGGy",icon:"icon___1Lh4V",favorited:"favorited___MfkTT",name:"name___slptf",hid:"hid___2hesZ"}},13422:function(e){e.exports={wrapper:"wrapper___1d5mx",header:"header___3Kv_u",title:"title___DJgMf",right:"right___1dfuu",search:"search___nmYL3",body:"body___2hTi2",aside:"aside___1iMQv",templateType:"templateType___1tpsq",active:"active____EO7F",content:"content___3LxdE",result:"result___3UjZI",footer:"footer___2epda"}},41521:function(e){e.exports={AddPartModal:"AddPartModal___2KTXa"}},76978:function(e){e.exports={audioItem:"audioItem___-wSkP",audioItemNode:"audioItemNode___Vm4Z-"}},53653:function(e){e.exports={listWarp:"listWarp___Dwr99",list:"list___34J_9",listItem:"listItem___3Tin3"}},93236:function(e){e.exports={cloudWarp:"cloudWarp___MHtEJ",cloudWarpTabRight:"cloudWarpTabRight___2GlDk"}},19688:function(e){e.exports={"absolute-top-left":"absolute-top-left___1eYx1","absolute-top-right":"absolute-top-right___3GcWD","absolute-bottom-left":"absolute-bottom-left___3jwco","xiudodo-hidden":"xiudodo-hidden___4KeU3","xiudodo-default-background":"xiudodo-default-background___1771q","text-ellipsis":"text-ellipsis___3tqgf",elementWarp:"elementWarp___19Xxf",elementReplace:"elementReplace___9e-Uc",elementDuration:"elementDuration___1wbqX",selector:"selector___1YEpP",moreDropdown:"moreDropdown___1Ag3m"}},46787:function(e){e.exports={uploadFileList:"uploadFileList___2WHQy","upload-file-drag-desc":"upload-file-drag-desc___2iYwM","upload-file-drag-default":"upload-file-drag-default___2MXQj","upload-file-dragenter":"upload-file-dragenter___1lKP9","upload-file-drag-icon":"upload-file-drag-icon___1tAOs","upload-file-drag-desc-content":"upload-file-drag-desc-content___1DY_7",uploadList:"uploadList___2xvlS",fileItem:"fileItem___CgG98",moreDropdown:"moreDropdown___2ANiL",checkboxItem:"checkboxItem___3l6hr",checkboxItemActive:"checkboxItemActive___2vjGW","not-allow":"not-allow___2kaLR","file-item-content":"file-item-content___297Kt",uploadListPagination:"uploadListPagination___1duze",uploadFileListCheckAll:"uploadFileListCheckAll___2EaH-",checkAllLeft:"checkAllLeft___3G2K5",checkAllNum:"checkAllNum___1QDfu",checkAllDel:"checkAllDel___1ConB",checkAllOut:"checkAllOut___35O20",uploadEmpty:"uploadEmpty___2xQPI",uploadEmptyTxt:"uploadEmptyTxt___2UCTG",uploadEmptyButton:"uploadEmptyButton___B1Xhj"}},1103:function(e){e.exports={personalWarp:"personalWarp___Sl6Ix",personalWarpTabRight:"personalWarpTabRight___3G_Me","upload-button-item":"upload-button-item___220b_"}},98087:function(e){e.exports={right:"right___2HQfk",content:"content___kPeM-",replaceInfo:"replaceInfo___3t-3r",text:"text___33b3r",replaceModalContent:"replaceModalContent___2samv",left:"left___JJdKa",leftItem:"leftItem___2YH1j",leftItemActive:"leftItemActive___3W6wI"}},96477:function(e){e.exports={loginAlert:"loginAlert___pS9kS",btn:"btn___3643W",closeBtn:"closeBtn___1-POE"}},86226:function(e){e.exports={bindResultWarp:"bindResultWarp___r1tpy",bindResultWarpTitle:"bindResultWarpTitle___YbWC8",bindResultWarpContent:"bindResultWarpContent___2s7YE",bindResultWarpButton:"bindResultWarpButton___3fy0a",bindResultWarpFooter:"bindResultWarpFooter___2u-Lx",leftButton:"leftButton___1bSeo",rightButton:"rightButton___12klf"}},12202:function(e){e.exports={bindPhone:"bindPhone___3__PB",bindPhoneTop:"bindPhoneTop___X1uOd",bindPhoneTxt:"bindPhoneTxt___3_ApZ",bindPhoneContent:"bindPhoneContent___1dFvZ",bindPhoneContentTopInput:"bindPhoneContentTopInput___3j0y7",bindPhoneContentBottom:"bindPhoneContentBottom___vZ11N",bindPhoneContentBottomInput:"bindPhoneContentBottomInput___3CbTW","submit-disabled":"submit-disabled___23TWW","send-code-btn":"send-code-btn___CcBlD","tel-login-error":"tel-login-error___3-hXq","tel-login-submit":"tel-login-submit___1RlTr","tel-login-submit-active":"tel-login-submit-active___2LcnG"}},42449:function(e){e.exports={LabelItem:"LabelItem___A9www",label:"label___3X6bV",content:"content___9pVV5"}},26198:function(e){e.exports={Preview:"Preview___gTXmO",canvas:"canvas___JXCJu",tooltip:"tooltip___77FEQ",button:"button___1RyMV"}},77511:function(e){e.exports={Setting:"Setting___RlbVB",title:"title___dMckY",StyleSet:"StyleSet___39BAu",colorPicker:"colorPicker___3_GSt",colorOverlay:"colorOverlay___2hV5V",imgList:"imgList___15cxI",img:"img___GyP7P",icon:"icon___2Xr-s",addIcon:"addIcon___2Nl1F"}},20369:function(e){e.exports={QrCodeEditModal:"QrCodeEditModal___2VXrr",Wrapper:"Wrapper___7b9Fc"}},67986:function(e){e.exports={fileModal:"fileModal___p-klk",fileModalTitle:"fileModalTitle___RhGun",fileModalLine:"fileModalLine____-2qZ",fileModalFooter:"fileModalFooter___1SILS",fileModalFooterButton:"fileModalFooterButton___3qjvt",createCopy:"createCopy___3s5oo"}},88324:function(e){e.exports={"absolute-top-left":"absolute-top-left____kPWA","absolute-top-right":"absolute-top-right___1bVdo","absolute-bottom-left":"absolute-bottom-left___x_B6G","xiudodo-hidden":"xiudodo-hidden___LuqpR","xiudodo-default-background":"xiudodo-default-background___3bnRM","text-ellipsis":"text-ellipsis___3gsp4",referenceLine:"referenceLine___Xs1Q6",referenceLineMenuItem:"referenceLineMenuItem___2KSJy",referenceLineMenuItemActive:"referenceLineMenuItemActive___1YgPF",referenceLineSubMenuItem:"referenceLineSubMenuItem___2IB5B"}},88510:function(e){e.exports={itemFooterTopRightIsExport:"itemFooterTopRightIsExport___3IZf6",itemFooterTopInput:"itemFooterTopInput___1nEoi",itemFooterTopRightWarp:"itemFooterTopRightWarp___3nUbv",itemFooterTopRightIcon:"itemFooterTopRightIcon___2hfkK",itemFooterTopRight:"itemFooterTopRight___2ozhQ",itemFooterTopRightName:"itemFooterTopRightName___21TtA"}},2461:function(e){e.exports={"absolute-top-left":"absolute-top-left___2-7e7","absolute-top-right":"absolute-top-right___1UAoV","absolute-bottom-left":"absolute-bottom-left___1R3OV","xiudodo-hidden":"xiudodo-hidden___1G49h","xiudodo-default-background":"xiudodo-default-background___1yz_J","text-ellipsis":"text-ellipsis___2Z7_M",file:"file___1Mk8L",fileDropdownMenu:"fileDropdownMenu___Kyoh9",fileDropdownMenuXs:"fileDropdownMenuXs___2zBLq",fileDropdownMenuPicId:"fileDropdownMenuPicId___3_iCz",fileDropdownMenuLine:"fileDropdownMenuLine___2JAVz",fileDropdownMenuWork:"fileDropdownMenuWork___kStAl",referenceLineDropdown:"referenceLineDropdown___38OkA"}},28278:function(e){e.exports={openMember:"openMember___2fGt0",openMemberTop:"openMemberTop___3kz_k",topItem:"topItem___2Ime9",topItemTxt:"topItemTxt___1ZjQT",openMemberContent:"openMemberContent___13-Qv",contentTag:"contentTag___3bKJJ",contentTop:"contentTop___2KM8M",topLeft:"topLeft___1OTqF",topRight:"topRight___3CsVE",topRightLeft:"topRightLeft___1sN4u",topRightRight:"topRightRight___3l9O0",contentBottom:"contentBottom___31iib",bottomLeft:"bottomLeft___25KYu",bottomLeftNum:"bottomLeftNum___1wPJi",bottomRight:"bottomRight___12iAD",openMemberBottom:"openMemberBottom___3qel6",openMemberBottomTitle:"openMemberBottomTitle___3iWNs",openMemberBottomTitleItem:"openMemberBottomTitleItem___1BXM8",itemImg:"itemImg___uYYQr"}},69561:function(e){e.exports={icon:"icon___1y5lz",item:"item___3lqMs"}},59092:function(e){e.exports={synthesisModal:"synthesisModal___3V-Oc",synthesisModalTitle:"synthesisModalTitle___3RiqJ",synthesisModalProgress:"synthesisModalProgress___3-MZF",synthesisModalFooter:"synthesisModalFooter___32iOE",fillModal:"fillModal___3AgcA",fillModalIcon:"fillModalIcon___HN0CJ",fillModalText:"fillModalText___3b_YK",fillModalButton:"fillModalButton___3T9DG",successModal:"successModal___3hGEe",successModalTitle:"successModalTitle___3aGxx",successModalQRcode:"successModalQRcode___3KGV2",successModalText:"successModalText___jt2cl",successModalFooter:"successModalFooter___1WSXs",footerTitle:"footerTitle___26gqD",footerInput:"footerInput___3dPNM",footerButton:"footerButton___EGO40"}},19277:function(e){e.exports={SwitchMode:"SwitchMode___16aIC",button:"button___aseUk"}},22395:function(e){e.exports={headerWrap:"headerWrap___2folC",logo:"logo___1v-s3",headerItem:"headerItem___27jLu",templateTitle:"templateTitle___168Sc",title:"title___2NZeD","btn-bg":"btn-bg___22df_",icon:"icon___2Mz-e",disabled:"disabled___31STS",left:"left___FbZdV",leftText:"leftText___2liWn",next:"next___2iNGg",right:"right___nUKOu",save:"save___8tGdf","save-loading":"save-loading___3zrG6",preview:"preview___16wtU",button:"button___JNHZe",downloadButton:"downloadButton___3Dkeg",headerModal:"headerModal___1-tH7",headerModalTitle:"headerModalTitle___3_MPK",headerModalText:"headerModalText___3MfaQ",headerModalButton:"headerModalButton___1t5Dv",compressModalWarp:"compressModalWarp___3rHLK",modalTxt:"modalTxt___5tvmU",modalTxt1:"modalTxt1___3JSPI",modalButton:"modalButton___1S0w3"}},25601:function(e){e.exports={"absolute-top-left":"absolute-top-left___k7_rn","absolute-top-right":"absolute-top-right___2MMes","absolute-bottom-left":"absolute-bottom-left___3SsxL","xiudodo-hidden":"xiudodo-hidden____j8qU","xiudodo-default-background":"xiudodo-default-background___1LylE","text-ellipsis":"text-ellipsis___248TE","xdd-pixel-tip":"xdd-pixel-tip___11E8Z","guide-wrap":"guide-wrap___2_te8","guide-content":"guide-content___18aLt",content:"content___RxNJ2",step:"step___1Sd0o",current:"current___2erb5",popover:"popover___2CVFg",title:"title___28U2Y",desc:"desc___1kr19",nextWrap:"nextWrap___2bivC",next:"next___39xlG",bottomWrap:"bottomWrap___1TdAj",close:"close___3l46E",progress:"progress___1cTYF",progressPoint:"progressPoint___1xlK7",choosed:"choosed___3beZ2",closeIcon:"closeIcon___VNm8f",arrowTip:"arrowTip___3SIIK",NoviceGuidedesc:"NoviceGuidedesc___2VVC0",icon:"icon___tvPbN","top-left":"top-left___2vyIE",top:"top___19nzs","top-right":"top-right___2idEK","bottom-left":"bottom-left___2JPRN","bottom-right":"bottom-right___2q3Jz",bottom:"bottom___3aKk_",left:"left___BxJwF","left-top":"left-top___1lkPz","left-bottom":"left-bottom___16IrR","right-top":"right-top___2_lO0","right-bottom":"right-bottom___3Ey4Y",right:"right___2BMPh","guide-animation":"guide-animation___2EbOU","animation-bottom":"animation-bottom___31jml","animation-top":"animation-top___2Ix2Z","animation-left":"animation-left___2ue5p","animation-right":"animation-right___J_COC"}},24400:function(e){e.exports={wrap:"wrap___2VSAg",controls:"controls___3Ik6i",left:"left___3-qTd",right:"right___1YzUr","play-icon":"play-icon___1CIqT"}},24904:function(e){e.exports={listWarp:"listWarp___3CyJA",content:"content___Cob-1",item:"item___2ghYc",noAnimation:"noAnimation___3PjPL",animationImg:"animationImg___2UKrx",active:"active___3GdFa",title:"title___nonzf"}},37207:function(e){e.exports={backColor:"backColor___3GwRm",backColorTitle:"backColorTitle___1gnQ-",topColor:"topColor___3OmKU",colorItem:"colorItem___3sTAn",colorItem1:"colorItem1___1j2xm"}},25558:function(e){e.exports={searchPage:"searchPage___1xerB",searchPageSearchBar:"searchPageSearchBar___2nxsY",searchPageContent:"searchPageContent___2vLJS","empty-keyword":"empty-keyword___3U6Nl",emptyTxt:"emptyTxt___2ma6m"}},76586:function(e){e.exports={defaultPage:"defaultPage___2Mq4o",defaultPageDivider:"defaultPageDivider____4vNX",defaultPageContent:"defaultPageContent___1oBwP",defaultPageContentTabIcon:"defaultPageContentTabIcon___1adCv",defaultPageContentMenuItem:"defaultPageContentMenuItem___37kFV"}},71192:function(e){e.exports={"more-list":"more-list___1Mho7","class-name":"class-name___3usJ_"}},70639:function(e){e.exports={addColorDropdownTitle:"addColorDropdownTitle___2S04J",leftAddIcon:"leftAddIcon___32WLX",addColorDropdownContent:"addColorDropdownContent___t9kIi",addColorDropdownMenuItem:"addColorDropdownMenuItem___E2hvi",menuItemTitle:"menuItemTitle___mfgXX",menuItemContent:"menuItemContent___29MUN",colorItem:"colorItem___3-BTG"}},48481:function(e){e.exports={colorItem:"colorItem___1gpM7",colorItemClose:"colorItemClose___1yhB7",itemColor:"itemColor___2s6jg"}},76684:function(e){e.exports={brandColorItem:"brandColorItem___3V8eg",brandColorItemTop:"brandColorItemTop___3Glgb",topTitle:"topTitle___3OqCG",itemFooterTopRightIsExport:"itemFooterTopRightIsExport___1o5dn",itemFooterTopInput:"itemFooterTopInput___3jKbk",itemFooterTopRightWarp:"itemFooterTopRightWarp___3QyQW",itemFooterTopRightIcon:"itemFooterTopRightIcon___3mw4Y",itemFooterTopRight:"itemFooterTopRight___1qs4g",itemFooterTopRightName:"itemFooterTopRightName___7gzZe",topBtn:"topBtn___chwuj",brandColorItemBottom:"brandColorItemBottom___wippf",colorItem:"colorItem___13MHV",addBtn:"addBtn___2mhY3",topTitleMenuIcon:"topTitleMenuIcon___1v_Fn"}},64486:function(e){e.exports={brandColor:"brandColor___avyg3",brandColorWarp:"brandColorWarp___c54u_",rightBtn:"rightBtn___9xjqW",rightBtnSpan:"rightBtnSpan___XtYTR"}},69426:function(e){e.exports={brandFontDropdown:"brandFontDropdown___3qM__",brandFontStyleItem:"brandFontStyleItem___iirZN",leftSpan:"leftSpan___2mC4s",rightSpan:"rightSpan___26F1t"}},98503:function(e){e.exports={fontSet:"fontSet___2usuW",fontSetInput:"fontSetInput___QH_ZK",fontSetType:"fontSetType___qnPaf","font-family-item":"font-family-item___3W7HA","font-family-active":"font-family-active___26cto"}},65285:function(e){e.exports={uploadProgress:"uploadProgress___37Uwd",uploadProgressTitle:"uploadProgressTitle___2AcaH"}},58442:function(e){e.exports={"selected-fontFamily":"selected-fontFamily___2AC4k",right:"right___3a25l",left:"left___loKtE"}},63249:function(e){e.exports={uploadFont:"uploadFont___-JYUF",uploadFontListWarp:"uploadFontListWarp___tgN_u",listItem:"listItem___8SW_e",uploadFontWarp:"uploadFontWarp___hKGEr",uploadWarp:"uploadWarp___3u54L",fontUploaIcon:"fontUploaIcon___1R_D0"}},75041:function(e){e.exports={brandFont:"brandFont___1tRln",brandFontWarp:"brandFontWarp___35_LN","ant-tabs-nav":"ant-tabs-nav___3m84L",rightBtn:"rightBtn___E5k11",rightBtnSpan:"rightBtnSpan___2f2qs"}},18710:function(e){e.exports={branLogoItem:"branLogoItem___1vDwK",branLogoItemImg:"branLogoItemImg___2c5we",branLogoItemIcon:"branLogoItemIcon___3XA1h",branLogoItemMenuIcon:"branLogoItemMenuIcon___1J8lL"}},99386:function(e){e.exports={uploadLogo:"uploadLogo___154sF",uploadLogoTxt:"uploadLogoTxt___2t9kE",uploadLogoHoverTxt:"uploadLogoHoverTxt___kCg9t",uploadLogoIcon:"uploadLogoIcon___2fKHf",uploadProgress:"uploadProgress___3fUtQ",uploadProgressTitle:"uploadProgressTitle___hMFZx"}},20270:function(e){e.exports={branLogo:"branLogo___3UEa9",branLogoWarp:"branLogoWarp___z95PX"}},5870:function(e){e.exports={dropDown:"dropDown___1mKdk",dropDownTop:"dropDownTop___9jXZ0",dropDownTopLeft:"dropDownTopLeft___JKFII",dropDownTopLeftIcon:"dropDownTopLeftIcon___16Nvz",dropDownTopLeftSpan:"dropDownTopLeftSpan___2Qt0J"}},94103:function(e){e.exports={brandDetail:"brandDetail___1wYHm",brandDetailWarp:"brandDetailWarp___2moKF",brandDetailTitle:"brandDetailTitle___2fujW",itemFooterTopRightIsExport:"itemFooterTopRightIsExport___1v8HW",itemFooterTopInput:"itemFooterTopInput___3F_qc",itemFooterTopRightWarp:"itemFooterTopRightWarp___2wy8B",itemFooterTopRightIcon:"itemFooterTopRightIcon___3infj",itemFooterTopRight:"itemFooterTopRight___T-z1M",itemFooterTopRightName:"itemFooterTopRightName___3f3PT"}},65629:function(e){e.exports={brandList:"brandList___1G5-u",brandListTitle:"brandListTitle___1BjvI",brandListContent:"brandListContent___3IeQu",brandListItemActive:"brandListItemActive___1ZJ5m",brandListItem:"brandListItem___15Uhp",itemTop:"itemTop___208wh",itemTopImg:"itemTopImg___2TgwU",itemTopColor:"itemTopColor___1xDMl",itemTopColorItem:"itemTopColorItem___GQUe-",itemBottom:"itemBottom___1xJzF",itemBottomLeft:"itemBottomLeft___3-RqI"}},68632:function(e){e.exports={brandModalTop:"brandModalTop___1ZQMQ",left:"left___11Zei",leftIcon:"leftIcon___H3620",leftTitle:"leftTitle___1eW6u",leftIcon1:"leftIcon1___33DG8",right:"right___ZtHi8"}},23006:function(e){e.exports={FreeformDraw:"FreeformDraw___1v73m",shape:"shape___1tINN",item:"item___1ovW8",active:"active___3dDOa"}},45876:function(e){e.exports={list:"list___P-XmK",content:"content___1htkN",contentTop:"contentTop___2-yJ_",left:"left___2LPZI",right:"right___2cgQ2",contentBottom:"contentBottom___JDdQ-","element-warp":"element-warp___1p3rq",centre:"centre___3xVET",imgBottomTooltip:"imgBottomTooltip___1NDve",item:"item___2EvS3",img:"img___1I-Nv",itemButtonLeft:"itemButtonLeft___1g03o",itemButtonRight:"itemButtonRight___3DxRV"}},99881:function(e){e.exports={cloundElementTabs:"cloundElementTabs___2Nhpv",title:"title___1zBW2",list:"list___3ugL8"}},54236:function(e){e.exports={catalogList:"catalogList___2Qiaa",catalog:"catalog___31klY",catalogPic:"catalogPic___3tozl",catalogTitle:"catalogTitle___1j5hP"}},4177:function(e){e.exports={CloudImg:"CloudImg___2SV15"}},65086:function(e){e.exports={wrap:"wrap___fh3rG",action:"action___1G_tI",bgImg:"bgImg___2rmB_","action-wrap":"action-wrap___3fgIw",duration:"duration___2ocDt",collection:"collection___LY0eY"}},6423:function(e){e.exports={"absolute-top-left":"absolute-top-left___3KLr5","absolute-top-right":"absolute-top-right___2gqjq","absolute-bottom-left":"absolute-bottom-left___3xmac","xiudodo-hidden":"xiudodo-hidden___1Q0iu","xiudodo-default-background":"xiudodo-default-background___yZ2we","text-ellipsis":"text-ellipsis___2KtTd","class-name":"class-name___2b9J2",more:"more___3W9oN","more-list":"more-list___qb68d","list-wrap":"list-wrap___3uKq6","xiudd-videoE-search-list":"xiudd-videoE-search-list___21K8q",indexTabs:"indexTabs___1k6Br",keyword:"keyword___3dO41"}},30305:function(e){e.exports={"absolute-top-left":"absolute-top-left___2szyK","absolute-top-right":"absolute-top-right___1n_jh","absolute-bottom-left":"absolute-bottom-left___2wSBH","xiudodo-hidden":"xiudodo-hidden___3rq6m","xiudodo-default-background":"xiudodo-default-background___29F3U","text-ellipsis":"text-ellipsis___WDxDZ",indexTabs:"indexTabs___1Z5DO","video-list":"video-list___2oqVq"}},81370:function(e){e.exports={Filters:"Filters___1sJFo",content:"content___2aOao",category:"category___oGTbF",title:"title___alJYC",list:"list___2GFXF",item:"item___3BZYR",img:"img___2g8PZ",active:"active___3yrZz",name:"name___3ewM4",bottom:"bottom___48zuY",reset:"reset___3qv86"}},6591:function(e){e.exports={FiltersAdjust:"FiltersAdjust___1AujB",list:"list___2jgeb",bottom:"bottom___1AIzS",reset:"reset___2Wavr"}},2826:function(e){e.exports={positionWarp:"positionWarp___3Udub",positionWarpItem:"positionWarpItem___2x4cP",dot:"dot___2KblW",positionWarpItemActive:"positionWarpItemActive___3qD_k"}},574:function(e){e.exports={warp:"warp___1nyTd",notuploadWarpper:"notuploadWarpper___xq-jC",notuploadWarp:"notuploadWarp___2DrhL",icon:"icon___2hQ7a",text:"text___3rk0Q",text1:"text1___lBuXc",button:"button___1tAwL",text2:"text2___5zMDx",imgWarp:"imgWarp___xwy_Q",imgShow:"imgShow___3Qkcf",img:"img___3eOQ5",replace:"replace___cWR3E",del:"del___2xD7W",watermarkPosition:"watermarkPosition___3ByKU",Sliders2:"Sliders2___1RhVY",Sliders1:"Sliders1___3Q4HL"}},23688:function(e){e.exports={"absolute-top-left":"absolute-top-left___3HD9B","absolute-top-right":"absolute-top-right___TX-ab","absolute-bottom-left":"absolute-bottom-left___3w_Yq","xiudodo-hidden":"xiudodo-hidden___5fQzv","xiudodo-default-background":"xiudodo-default-background___1HJuH","text-ellipsis":"text-ellipsis___2Bwn7",maskModuleItem:"maskModuleItem___1PsAp"}},19499:function(e){e.exports={"absolute-top-left":"absolute-top-left___2Kiu_","absolute-top-right":"absolute-top-right___1nEWe","absolute-bottom-left":"absolute-bottom-left___UCD8l","xiudodo-hidden":"xiudodo-hidden___18wiS","xiudodo-default-background":"xiudodo-default-background___2M837","text-ellipsis":"text-ellipsis____C31Z","class-name":"class-name___1qcmh","more-content":"more-content___3RJOB"}},29856:function(e){e.exports={"absolute-top-left":"absolute-top-left___2JJuw","absolute-top-right":"absolute-top-right___3ijxl","absolute-bottom-left":"absolute-bottom-left___3LG6Y","xiudodo-hidden":"xiudodo-hidden___2EtAl","xiudodo-default-background":"xiudodo-default-background___32fTo","text-ellipsis":"text-ellipsis___3Uf_m",more:"more___3ftxS",module:"module___vUVjx"}},84559:function(e){e.exports={"list-height":"list-height___2h3bN",localUpload:"localUpload___am2uL",localUploadTop:"localUploadTop___-DR5k",topItem:"topItem___r3dad",topItemIcon:"topItemIcon___1-8ne"}},21563:function(e){e.exports={"music-tabs-item":"music-tabs-item___3f5dP","music-filter-sub":"music-filter-sub___3NqNC","music-filter-item":"music-filter-item___1l7kw","music-filter":"music-filter___t6Kja","music-filter-dropdown":"music-filter-dropdown___3aC_g","music-filter-dropdown-wrap":"music-filter-dropdown-wrap___3xSmc","music-filter-item-choosed":"music-filter-item-choosed___1sHeV","music-filter-more":"music-filter-more___2gfOn","music-search":"music-search___VvMFJ","music-search-tabs":"music-search-tabs___2aRm-","music-search-more":"music-search-more___2SZJW","music-search-list":"music-search-list___2UwEN","class-name":"class-name___1avLO",more:"more___LrVxE"}},4273:function(e){e.exports={soundBgImg:"soundBgImg___fGPV3",soundTitle:"soundTitle___djeZY",sound:"sound___3opZG",soundItem:"soundItem___2LzP5",soundItemIcon:"soundItemIcon___2nDKX",closeIcon:"closeIcon___24dG7",soundButtomRed:"soundButtomRed___2UEAJ",soundButtom:"soundButtom___1Vw6H",soundButtomInner:"soundButtomInner___3g45-",soundRight:"soundRight___1U5BS",soundRightTip:"soundRightTip___tPuTI",soundRightTime:"soundRightTime___3DIfO",primary:"primary___1TDwT",soundButtonOver:"soundButtonOver___3F48i",Left25:"Left25___1KXf-",Left15:"Left15___3tuhL",soundButtonReset:"soundButtonReset___Y8bSS",warn:"warn___2ov0v",warnIcon:"warnIcon___2qN4k",uploadProgress:"uploadProgress___1tDZ3",uploadProgressRow:"uploadProgressRow___1kiCF",uploadProgressTxt:"uploadProgressTxt___2HfHE",uploadProgressTip:"uploadProgressTip___20CEz",recorderModal:"recorderModal___2E920"}},71088:function(e){e.exports={"music-list-item":"music-list-item___2jy5A","music-list-scan_process":"music-list-scan_process___2rfFe","process-text":"process-text___4X7DJ","music-list-scan_flag":"music-list-scan_flag___3Q0lY",scan_flag_icon:"scan_flag_icon___3XmBZ","music-list-item-wrap":"music-list-item-wrap___2eVNc","music-list-item-pic":"music-list-item-pic___3QuzD","music-list-item-defaultBg":"music-list-item-defaultBg___3q6zn","music-list-item-right":"music-list-item-right___1Cm2N","music-list-item-action":"music-list-item-action___2cLx-","music-list-item-top":"music-list-item-top___36rch","top-left":"top-left___3OOSn","music-play-area":"music-play-area___2T_jG","music-process":"music-process___Y07Pd","music-time":"music-time___2LvS6","action-btn":"action-btn___2FCEJ","del-btn":"del-btn___2GAzg","play-wrap-playing":"play-wrap-playing___LZpFr","play-wrap-mask":"play-wrap-mask___2wx3a","play-icon":"play-icon___B4zHN","play-wrap":"play-wrap___fnHHt","play-progress":"play-progress___1B5Tg"}},92750:function(e){e.exports={"absolute-top-left":"absolute-top-left___2kIW1","absolute-top-right":"absolute-top-right___1UaTf","absolute-bottom-left":"absolute-bottom-left___1fEfp","xiudodo-hidden":"xiudodo-hidden___CyFBb","xiudodo-default-background":"xiudodo-default-background___19ksr","text-ellipsis":"text-ellipsis___16_Is","music-panel":"music-panel___GxC0A",musicTabs:"musicTabs___1a-gB","copyright-desc":"copyright-desc___2yi8i","music-categories":"music-categories___1mjk5","music-guide":"music-guide___23gTn",close:"close___1i5YJ"}},34870:function(e){e.exports={QrCodePanel:"QrCodePanel___33qca",list:"list___3s9hi",item:"item___snLE3",canvas:"canvas___bxo8i"}},59239:function(e){e.exports={ratioRadio:"ratioRadio___L7q1D",ratioRadioLeft:"ratioRadioLeft___8U_Hw"}},54547:function(e){e.exports={FiltersAdjust:"FiltersAdjust___2Vy4H",list:"list___1plSB",bottom:"bottom___LiKBY",reset:"reset___18ecf"}},93996:function(e){e.exports={ratioRadio:"ratioRadio___1UTPy",ratioRadioLeft:"ratioRadioLeft___EbOc1"}},87290:function(e){e.exports={"absolute-top-left":"absolute-top-left___38C0l","absolute-top-right":"absolute-top-right___2i82p","absolute-bottom-left":"absolute-bottom-left___1rj8J","xiudodo-hidden":"xiudodo-hidden___9KkIZ","xiudodo-default-background":"xiudodo-default-background___1Bdf5","text-ellipsis":"text-ellipsis___2wgC_",wrap:"wrap___32Y9q",list:"list___2WGiV",poster:"poster___31_wD",action:"action___1fa_W",add:"add___1-pbB",replace:"replace___25tdj",duration:"duration___3qyX4",header:"header___2CPBK",back:"back___2wOzc","replace-button":"replace-button___1AUBW"}},78972:function(e){e.exports={brandColor:"brandColor___3Ucel",brandColorTop:"brandColorTop___2pA9h",brandColorContent:"brandColorContent___2PqLX",brandColorAdd:"brandColorAdd___3aQwm",contentColors:"contentColors___2_PUD",contentColorsItem:"contentColorsItem___TAqlb",itemName:"itemName___Epesb",brandColorContentColors:"brandColorContentColors___1fg-b",firstColor:"firstColor___2cOr3",colorItem:"colorItem___2lixB",brandColorTopLine:"brandColorTopLine___3UhQ4"}},96185:function(e){e.exports={svgColorSelector:"svgColorSelector___3lS2k"}},27454:function(e){e.exports={"absolute-top-left":"absolute-top-left___4kvjv","absolute-top-right":"absolute-top-right___2LTeC","absolute-bottom-left":"absolute-bottom-left___oG_Eh","xiudodo-hidden":"xiudodo-hidden___IGvAG","xiudodo-default-background":"xiudodo-default-background___17N2q","text-ellipsis":"text-ellipsis___30J9F",transitionPanel:"transitionPanel___3dKhE",duration:"duration___2HOJi",transitionItem:"transitionItem___SyGUl",item:"item___1Vv7z",active:"active___3GVlL",itemVideo:"itemVideo___1BfRV",itemName:"itemName___1fzKx",transitionBottom:"transitionBottom___3IN1k",transitionTitle:"transitionTitle___24uoL",transitionDown:"transitionDown___1YlAo",transAction:"transAction___1Loi_",transActionItem:"transActionItem___29Ndx",transActionItemRow:"transActionItemRow___2cwll",rowTip:"rowTip___2CqBx",transActionItemRowColor:"transActionItemRowColor___3ACrs"}},105:function(e){e.exports={uploadFontItem:"uploadFontItem___24xFJ",uploadFontItemTop:"uploadFontItemTop___2YiFy",uploadFontItemTopName:"uploadFontItemTopName___3jbiX",uploadFontItemTopRight:"uploadFontItemTopRight___3jmFl",uploadFontItemCheckCircleFilled:"uploadFontItemCheckCircleFilled___X4D-t",uploadFontItemCheckCircleFilledIcon:"uploadFontItemCheckCircleFilledIcon___2fhN1",uploadFontItemClose:"uploadFontItemClose___22PIv",uploadFontItemCloseIcon:"uploadFontItemCloseIcon___2YnsY",uploadFontItemCloseIcon1:"uploadFontItemCloseIcon1___VKtr8",uploadFontItemCloseSpan:"uploadFontItemCloseSpan___1kGhw",uploadFontItemProgress:"uploadFontItemProgress___cwX-D"}},71678:function(e){e.exports={fontItemActive:"fontItemActive___c3vya",fontItem:"fontItem___1ntQy",uploadFontwarp:"uploadFontwarp___2s9IT",uploadFont:"uploadFont___2jABS",uploadFontIcon:"uploadFontIcon___2m5G8",uploadFontTxt:"uploadFontTxt___3nrCV"}},54885:function(e){e.exports={wapper:"wapper___2kNqe",title:"title___cSnhy",ORcode:"ORcode___8s7xM",mask:"mask___1yT-X",popover:"popover___1DYVV"}},12263:function(e){e.exports={wrap:"wrap___boW8s",action:"action___190YD","action-wrap":"action-wrap___1Gi1_",duration:"duration___3cicw"}},67077:function(e){e.exports={"absolute-top-left":"absolute-top-left___rJW1T","absolute-top-right":"absolute-top-right___KTG8T","absolute-bottom-left":"absolute-bottom-left___3PQFM","xiudodo-hidden":"xiudodo-hidden___3zjBU","xiudodo-default-background":"xiudodo-default-background___31E49","text-ellipsis":"text-ellipsis___15ph2","class-name":"class-name___3C9Ew",more:"more___85dV-","more-list":"more-list___G64K-","list-wrap":"list-wrap___2eum7","xiudd-videoE-search-list":"xiudd-videoE-search-list___3yDyz",recommend:"recommend___23qx3"}},75945:function(e){e.exports={Header:"Header___DNR4T",title:"title___19ktd",back:"back___2zr8X",icon:"icon___2VKjN"}},70170:function(e){e.exports={Mark:"Mark___e77mn",icon:"icon___G4cz1",bgMark:"bgMark___DIUMt",audioMark:"audioMark___12OX6",cameraMark:"cameraMark___2Zhrj"}},47311:function(e){e.exports={"mixin-flex":"mixin-flex___Nzzec",previewWrapper:"previewWrapper___2bGKa",lock:"lock___rW2xv",previewAsset:"previewAsset___3EGBP",aniMark:"aniMark___31eSc",aniStart:"aniStart___37DOV",aniEnd:"aniEnd___3U0Uo",line:"line___QNFnc",emptyBg:"emptyBg___2YwkF",text:"text___3AuX5",module:"module___3Vcgn",video:"video___GX2mi",locked:"locked___PqsSd",textWrapper:"textWrapper___1tWPN",Image:"Image___3o_l1",previewImage:"previewImage___3tM8u",Group:"Group___2O5QD",svgPath:"svgPath___3rb60",Video:"Video___3DpEm",videoOffset:"videoOffset___3LE7B",icon:"icon___2gj-p",previewItem:"previewItem___3_t8k"}},67915:function(e){e.exports={"camera-action":"camera-action___1_0LH","camera-action-item":"camera-action-item___EI_jk",icon:"icon___2a83q"}},74355:function(e){e.exports={canvas:"canvas___26a9U",stage:"stage___1fhwF",ContextMenu:"ContextMenu___1R6P1"}},36338:function(e){e.exports={timeLineWrapper:"timeLineWrapper___1d9SP",timeLineBody:"timeLineBody___2360k",ruler:"ruler___w5Mrt",cameras:"cameras___2SWIe",timeLines:"timeLines___1rDHC",assetTimeLine:"assetTimeLine___7gFVD",parts:"parts___1E4Ne",assetTimeLineItem:"assetTimeLineItem___1eSA1",bgs:"bgs___1PGUc",audios:"audios___2yeLu",virtualScroll:"virtualScroll___37BB9"}},74702:function(e){e.exports={Tools:"Tools___25vrn",operation:"operation___2SwYH",tool:"tool___3GVBH",hasAfter:"hasAfter___3kZ5Y",icon:"icon___3FjJ2",disable:"disable___1-wvS",toolChoosed:"toolChoosed___2xnVI",duration:"duration___1lqWe",control:"control___2Pcic",timeLineSize:"timeLineSize___oerNE",slider:"slider___1hSuB"}},78793:function(e){e.exports={TimeLine:"TimeLine___18kez",content:"content___2U8Dp",canvas:"canvas___10Wfb",stage:"stage___2zshc",bottom:"bottom___2wEgG",tabs:"tabs___3vcLn"}},61496:function(e){e.exports={AssetPosition:"AssetPosition___Thovm",item:"item___39TaL",icon:"icon___1_fBl"}},9196:function(e){e.exports={basicRow:"basicRow___3CtgT",color:"color___DWZvG"}},16334:function(e){e.exports={left:"left___1BEDH",itemTxt:"itemTxt___WQL5S",itemTxt1:"itemTxt1___SaN59",right:"right___1sWyj",rightItem:"rightItem___7ZUfO",rightItemIcon:"rightItemIcon___1XDNC"}},8287:function(e){e.exports={colorPart:"colorPart___3y2lm",toolColor:"toolColor___2zFRP",toolColorView:"toolColorView___2FJzH",toolColorViewItem:"toolColorViewItem___1ZHn2",toolColorViewItemView:"toolColorViewItemView___1DQQJ",caihong:"caihong___DqQx3",colorView:"colorView___yJp4z",colorViewLeft:"colorViewLeft___1b31b",colorItem:"colorItem___fYIah",colorPro:"colorPro___IF2Su",choosedColorBottom:"choosedColorBottom___wf7ww",choosedColor:"choosedColor___20rBm"}},41593:function(e){e.exports={fontBackground:"fontBackground___KnHXN",colorPro:"colorPro___yKfcN",icon:"icon___10DeP",colorProRow:"colorProRow___3K532",choosedColor:"choosedColor___sHmco",fontBg:"fontBg___2F-FF",fontBgRow:"fontBgRow___33DjO",fontBgRowName:"fontBgRowName___2X597",tip:"tip___29Ffr",disabled:"disabled___2lISx"}},46121:function(e){e.exports={fontColor:"fontColor___1vhaH",choosedColor:"choosedColor___2QTK5"}},10432:function(e){e.exports={size:"size___1_xb6",active:"active___3B_a0","size-list":"size-list___4KF2W",action:"action___3VhLA","input-number":"input-number___3N-Fp"}},52824:function(e){e.exports={toolSelectView:"toolSelectView___7uSdL",toolSelectItem:"toolSelectItem___A_NoC",disabled:"disabled___3qs_5"}},99335:function(e){e.exports={mattingModal:"mattingModal___21-Gj",mattingModalTitle:"mattingModalTitle___1bs2a",spanSpan:"spanSpan___1pjoN",mattingModalBtn:"mattingModalBtn___10Rcd",mattinBtn:"mattinBtn___3VTGc",mattinBtnIcon:"mattinBtnIcon___2_-t9"}},55635:function(e){e.exports={basicRow:"basicRow___js-zP",color:"color___2tq8Q"}},40077:function(e){e.exports={basicRow:"basicRow___1I7NK",basicRowName:"basicRowName___jzh5c",basicRowContent:"basicRowContent___YXxvV",color:"color___3zOgZ",colorPopover:"colorPopover___2SY-b",colorTab:"colorTab___1ldCp",colorTabItemActive:"colorTabItemActive___blTWk",colorTabItem:"colorTabItem___3k0Xz",chooseColor:"chooseColor___23u05",chooseColorGradientWrap:"chooseColorGradientWrap___QuRKk",chooseColorGradient:"chooseColorGradient___384KK",flipItem:"flipItem___2D73-",icon:"icon___2VdSL",flipItemSelectd:"flipItemSelectd___1Fysr"}},51377:function(e){e.exports={basicRow:"basicRow___1tLEk",color:"color___19NiK"}},58023:function(e){e.exports={basicRow:"basicRow___2NBA6",basicRowContent:"basicRowContent___3BWsA",chooseColorGradientWrap:"chooseColorGradientWrap___ps9ex",chooseColorGradient:"chooseColorGradient___1ZJlG"}},27216:function(e){e.exports={fontBackgroundWrap:"fontBackgroundWrap___nbG-7",fontBackground:"fontBackground___Hu5yM",colorPro:"colorPro___18VG5",icon:"icon___8bnbi",colorProRow:"colorProRow___2q4k3",choosedColor:"choosedColor___1kJpy",fontBg:"fontBg___2JLJz",fontBgRow:"fontBgRow___2BNaa",fontBgRowName:"fontBgRowName___1-ZQ9",tip:"tip___fjWNO"}},35375:function(e){e.exports={textStyles:"textStyles___25s6r",fontcolor:"fontcolor___2few1",tiled:"tiled___UoSKG",watermarkPosition:"watermarkPosition___3w42m",watermarkname:"watermarkname___sOYJL",transparency:"transparency___2gAh8",top:"top___17ryx",right:"right___3I2Xv",bottom:"bottom___1NwIR",fontcolorIcon:"fontcolorIcon___1tbys",toolsVipCard:"toolsVipCard___21rGr"}},57066:function(e){e.exports={warp:"warp___2PSkL",notuploadWarpper:"notuploadWarpper___1KMiQ",notuploadWarp:"notuploadWarp___TQgP1",icon:"icon____u_tn",text:"text___3QDFZ",text1:"text1___2MW3k",button:"button___16gvk",text2:"text2___i6MUX",imgWarp:"imgWarp___uxRNu",imgShow:"imgShow___F2nXK",img:"img___j2HfT",replace:"replace___1gxnk",del:"del___9ttzN",watermarkPosition:"watermarkPosition___1_kBo",Sliders2:"Sliders2___1qaaf",Sliders1:"Sliders1___3vVCG"}},51113:function(e){e.exports={positionWarp:"positionWarp___3bdPp",positionWarpItem:"positionWarpItem___1qlRT",dot:"dot___aoXuk",positionWarpItemActive:"positionWarpItemActive___29M9A"}},69530:function(e){e.exports={transparency:"transparency___22efH",top:"top___aBkGJ",right:"right___IUjD4",bottom:"bottom___2tcqU"}},61270:function(e){e.exports={warp:"warp___3BqrO",textarea:"textarea___32Twk",textStyles:"textStyles___3dNeg",fontcolor:"fontcolor___3GkAa",watermarkSize:"watermarkSize___y_gA_",watermarkPosition:"watermarkPosition___3kjjX",watermarkname:"watermarkname___cW4g5",PopoverWarp:"PopoverWarp___gI6UJ",PopoverText:"PopoverText___3bzLV",Popoverbutton:"Popoverbutton___24qwV"}},9142:function(e){e.exports={watermarkTabsWarp:"watermarkTabsWarp___2OEiF",watermarkTabs:"watermarkTabs___16VNw",watermarkFooter:"watermarkFooter___77qY3",watermarkFooterText:"watermarkFooterText___EcnYQ",toolsVipCard:"toolsVipCard___q0fHP"}},89262:function(e){e.exports={"xiudodo-tools-main":"xiudodo-tools-main___3bsi-","xiudodo-tools-aside":"xiudodo-tools-aside___3ZvaI","xiudodo-tools-content":"xiudodo-tools-content___louaB","xiudodo-tools-canvas":"xiudodo-tools-canvas___3pfLG",warp:"warp___1g0mB",button:"button___2iQeE",TimeAxis:"TimeAxis___1lA1O",time:"time___3c-OS"}},86568:function(){},56194:function(){},41995:function(e){function t(e){var t,i,a;return e<128?[e]:e<2048?(t=192+(e>>6),i=128+(63&e),[t,i]):(t=224+(e>>12),i=128+(e>>6&63),a=128+(63&e),[t,i,a])}function i(e){for(var i=[],a=0;a<e.length;a++)for(var n=e.charCodeAt(a),r=t(n),o=0;o<r.length;o++)i.push(r[o]);return i}function a(e,t){this.typeNumber=-1,this.errorCorrectLevel=t,this.modules=null,this.moduleCount=0,this.dataCache=null,this.rsBlocks=null,this.totalDataCount=-1,this.data=e,this.utf8bytes=i(e),this.make()}a.prototype={constructor:a,getModuleCount(){return this.moduleCount},make(){this.getRightType(),this.dataCache=this.createData(),this.createQrcode()},makeImpl(e){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var t=0;t<this.moduleCount;t++)this.modules[t]=new Array(this.moduleCount);this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(!0,e),this.typeNumber>=7&&this.setupTypeNumber(!0),this.mapData(this.dataCache,e)},setupPositionProbePattern(e,t){for(var i=-1;i<=7;i++)if(!(e+i<=-1||this.moduleCount<=e+i))for(var a=-1;a<=7;a++)t+a<=-1||this.moduleCount<=t+a||(this.modules[e+i][t+a]=i>=0&&i<=6&&(0==a||6==a)||a>=0&&a<=6&&(0==i||6==i)||i>=2&&i<=4&&a>=2&&a<=4)},createQrcode(){for(var e=0,t=0,i=null,a=0;a<8;a++){this.makeImpl(a);var n=o.getLostPoint(this);(0==a||e>n)&&(e=n,t=a,i=this.modules)}this.modules=i,this.setupTypeInfo(!1,t),this.typeNumber>=7&&this.setupTypeNumber(!1)},setupTimingPattern(){for(var e=8;e<this.moduleCount-8;e++)null==this.modules[e][6]&&(this.modules[e][6]=e%2==0,null==this.modules[6][e]&&(this.modules[6][e]=e%2==0))},setupPositionAdjustPattern(){for(var e=o.getPatternPosition(this.typeNumber),t=0;t<e.length;t++)for(var i=0;i<e.length;i++){var a=e[t],n=e[i];if(null==this.modules[a][n])for(var r=-2;r<=2;r++)for(var s=-2;s<=2;s++)this.modules[a+r][n+s]=-2==r||2==r||-2==s||2==s||0==r&&0==s}},setupTypeNumber(e){for(var t=o.getBCHTypeNumber(this.typeNumber),i=0;i<18;i++){var a=!e&&1==(t>>i&1);this.modules[Math.floor(i/3)][i%3+this.moduleCount-8-3]=a,this.modules[i%3+this.moduleCount-8-3][Math.floor(i/3)]=a}},setupTypeInfo(e,t){for(var i=n[this.errorCorrectLevel]<<3|t,a=o.getBCHTypeInfo(i),r=0;r<15;r++){var s=!e&&1==(a>>r&1);r<6?this.modules[r][8]=s:r<8?this.modules[r+1][8]=s:this.modules[this.moduleCount-15+r][8]=s;s=!e&&1==(a>>r&1);r<8?this.modules[8][this.moduleCount-r-1]=s:r<9?this.modules[8][15-r-1+1]=s:this.modules[8][15-r-1]=s}this.modules[this.moduleCount-8][8]=!e},createData(){var e=new u,t=this.typeNumber>9?16:8;e.put(4,4),e.put(this.utf8bytes.length,t);for(var i=0,n=this.utf8bytes.length;i<n;i++)e.put(this.utf8bytes[i],8);e.length+4<=8*this.totalDataCount&&e.put(0,4);while(e.length%8!=0)e.putBit(!1);while(1){if(e.length>=8*this.totalDataCount)break;if(e.put(a.PAD0,8),e.length>=8*this.totalDataCount)break;e.put(a.PAD1,8)}return this.createBytes(e)},createBytes(e){for(var t=0,i=0,a=0,n=this.rsBlock.length/3,r=new Array,s=0;s<n;s++)for(var l=this.rsBlock[3*s+0],d=this.rsBlock[3*s+1],u=this.rsBlock[3*s+2],p=0;p<l;p++)r.push([u,d]);for(var v=new Array(r.length),m=new Array(r.length),h=0;h<r.length;h++){var f=r[h][0],g=r[h][1]-f;i=Math.max(i,f),a=Math.max(a,g),v[h]=new Array(f);for(s=0;s<v[h].length;s++)v[h][s]=255&e.buffer[s+t];t+=f;var x=o.getErrorCorrectPolynomial(g),y=new c(v[h],x.getLength()-1),b=y.mod(x);m[h]=new Array(x.getLength()-1);for(s=0;s<m[h].length;s++){var _=s+b.getLength()-m[h].length;m[h][s]=_>=0?b.get(_):0}}var j=new Array(this.totalDataCount),w=0;for(s=0;s<i;s++)for(h=0;h<r.length;h++)s<v[h].length&&(j[w++]=v[h][s]);for(s=0;s<a;s++)for(h=0;h<r.length;h++)s<m[h].length&&(j[w++]=m[h][s]);return j},mapData(e,t){for(var i=-1,a=this.moduleCount-1,n=7,r=0,s=this.moduleCount-1;s>0;s-=2){6==s&&s--;while(1){for(var l=0;l<2;l++)if(null==this.modules[a][s-l]){var c=!1;r<e.length&&(c=1==(e[r]>>>n&1));var d=o.getMask(t,a,s-l);d&&(c=!c),this.modules[a][s-l]=c,n--,-1==n&&(r++,n=7)}if(a+=i,a<0||this.moduleCount<=a){a-=i,i=-i;break}}}}},a.PAD0=236,a.PAD1=17;for(var n=[1,0,3,2],r={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},o={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo(e){var t=e<<10;while(o.getBCHDigit(t)-o.getBCHDigit(o.G15)>=0)t^=o.G15<<o.getBCHDigit(t)-o.getBCHDigit(o.G15);return(e<<10|t)^o.G15_MASK},getBCHTypeNumber(e){var t=e<<12;while(o.getBCHDigit(t)-o.getBCHDigit(o.G18)>=0)t^=o.G18<<o.getBCHDigit(t)-o.getBCHDigit(o.G18);return e<<12|t},getBCHDigit(e){var t=0;while(0!=e)t++,e>>>=1;return t},getPatternPosition(e){return o.PATTERN_POSITION_TABLE[e-1]},getMask(e,t,i){switch(e){case r.PATTERN000:return(t+i)%2==0;case r.PATTERN001:return t%2==0;case r.PATTERN010:return i%3==0;case r.PATTERN011:return(t+i)%3==0;case r.PATTERN100:return(Math.floor(t/2)+Math.floor(i/3))%2==0;case r.PATTERN101:return t*i%2+t*i%3==0;case r.PATTERN110:return(t*i%2+t*i%3)%2==0;case r.PATTERN111:return(t*i%3+(t+i)%2)%2==0;default:throw new Error("bad maskPattern:".concat(e))}},getErrorCorrectPolynomial(e){for(var t=new c([1],0),i=0;i<e;i++)t=t.multiply(new c([1,s.gexp(i)],0));return t},getLostPoint(e){for(var t=e.getModuleCount(),i=0,a=0,n=0;n<t;n++)for(var r=0,o=e.modules[n][0],s=0;s<t;s++){var l=e.modules[n][s];if(s<t-6&&l&&!e.modules[n][s+1]&&e.modules[n][s+2]&&e.modules[n][s+3]&&e.modules[n][s+4]&&!e.modules[n][s+5]&&e.modules[n][s+6]&&(s<t-10?e.modules[n][s+7]&&e.modules[n][s+8]&&e.modules[n][s+9]&&e.modules[n][s+10]&&(i+=40):s>3&&e.modules[n][s-1]&&e.modules[n][s-2]&&e.modules[n][s-3]&&e.modules[n][s-4]&&(i+=40)),n<t-1&&s<t-1){var c=0;l&&c++,e.modules[n+1][s]&&c++,e.modules[n][s+1]&&c++,e.modules[n+1][s+1]&&c++,0!=c&&4!=c||(i+=3)}o^l?r++:(o=l,r>=5&&(i+=3+r-5),r=1),l&&a++}for(s=0;s<t;s++)for(r=0,o=e.modules[0][s],n=0;n<t;n++){l=e.modules[n][s];n<t-6&&l&&!e.modules[n+1][s]&&e.modules[n+2][s]&&e.modules[n+3][s]&&e.modules[n+4][s]&&!e.modules[n+5][s]&&e.modules[n+6][s]&&(n<t-10?e.modules[n+7][s]&&e.modules[n+8][s]&&e.modules[n+9][s]&&e.modules[n+10][s]&&(i+=40):n>3&&e.modules[n-1][s]&&e.modules[n-2][s]&&e.modules[n-3][s]&&e.modules[n-4][s]&&(i+=40)),o^l?r++:(o=l,r>=5&&(i+=3+r-5),r=1)}var d=Math.abs(100*a/t/t-50)/5;return i+=10*d,i}},s={glog(e){if(e<1)throw new Error("glog(".concat(e,")"));return s.LOG_TABLE[e]},gexp(e){while(e<0)e+=255;while(e>=256)e-=255;return s.EXP_TABLE[e]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)s.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)s.EXP_TABLE[l]=s.EXP_TABLE[l-4]^s.EXP_TABLE[l-5]^s.EXP_TABLE[l-6]^s.EXP_TABLE[l-8];for(l=0;l<255;l++)s.LOG_TABLE[s.EXP_TABLE[l]]=l;function c(e,t){if(void 0==e.length)throw new Error("".concat(e.length,"/").concat(t));var i=0;while(i<e.length&&0==e[i])i++;this.num=new Array(e.length-i+t);for(var a=0;a<e.length-i;a++)this.num[a]=e[a+i]}c.prototype={get(e){return this.num[e]},getLength(){return this.num.length},multiply(e){for(var t=new Array(this.getLength()+e.getLength()-1),i=0;i<this.getLength();i++)for(var a=0;a<e.getLength();a++)t[i+a]^=s.gexp(s.glog(this.get(i))+s.glog(e.get(a)));return new c(t,0)},mod(e){var t=this.getLength(),i=e.getLength();if(t-i<0)return this;for(var a=new Array(t),n=0;n<t;n++)a[n]=this.get(n);while(a.length>=i){var r=s.glog(a[0])-s.glog(e.get(0));for(n=0;n<e.getLength();n++)a[n]^=s.gexp(s.glog(e.get(n))+r);while(0==a[0])a.shift()}return new c(a,0)}};var d=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]];function u(){this.buffer=new Array,this.length=0}a.prototype.getRightType=function(){for(var e=1;e<41;e++){var t=d[4*(e-1)+this.errorCorrectLevel];if(void 0==t)throw new Error("bad rs block @ typeNumber:".concat(e,"/errorCorrectLevel:").concat(this.errorCorrectLevel));for(var i=t.length/3,a=0,n=0;n<i;n++){var r=t[3*n+0],o=t[3*n+2];a+=o*r}var s=e>9?2:1;if(this.utf8bytes.length+s<a||40==e){this.typeNumber=e,this.rsBlock=t,this.totalDataCount=a;break}}},u.prototype={get(e){var t=Math.floor(e/8);return this.buffer[t]>>>7-e%8&1},put(e,t){for(var i=0;i<t;i++)this.putBit(e>>>t-i-1&1)},putBit(e){var t=Math.floor(this.length/8);this.buffer.length<=t&&this.buffer.push(0),e&&(this.buffer[t]|=128>>>this.length%8),this.length++}},e.exports=a},86188:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return Sde}});var a,n=i(86483),r=i(12924),o=i.n(r),s=i(64122),l=i(63620),c=i(61651),d=i(51222),u=i(52663),p=i(68699),v=i(94043),m=i.n(v),h=i(59730),f=i(62014);(function(e){e[e["Stopped"]=-1]="Stopped",e[e["Paused"]=0]="Paused",e[e["Playing"]=1]="Playing"})(a||(a={}));var g=["image","pic","video","videoE"],x={blur:0,brightness:0,contrast:0,"gamma-r":1,"gamma-g":1,"gamma-b":1,hue:0,saturate:0,sharpen:0,strong:1},y={sepia:0,brightness:100,contrast:100,saturate:100,grayscale:0,invert:0,hue:0,blur:0},b="xdd-asset-";function _(e){return 90-e}function j(e){var t=e.r,i=e.g,a=e.b,n=e.a,r=void 0===n?1:n;return void 0!==r?"rgba(".concat(t,",").concat(i,",").concat(a,",").concat(r,")"):"rgba(".concat(t,",").concat(i,",").concat(a,")")}function w(e,t){var i=e.r,a=e.g,n=e.b;return"rgba(".concat(i,",").concat(a,",").concat(n,",").concat(t,")")}function k(e){if("string"===typeof e){e=e.replaceAll("rgba(",""),e=e.replaceAll(")","");var t=e.split(",");return{r:parseInt(t[0],10),g:parseInt(t[1],10),b:parseInt(t[2],10),a:parseFloat(t[3])}}return e}function T(e,t,i){return Z.apply(this,arguments)}function Z(){return Z=(0,p.Z)(m().mark((function e(t,i,a){var n,r,o,s;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n={},r=t,a&&("GET"===i.method?(o=[],Object.keys(a).forEach((e=>{o.push("".concat(e,"=").concat(a[e]))})),r="".concat(r,"?").concat(o.join("&"))):n={body:a}),e.next=5,fetch(r,(0,u.Z)({credentials:"include"},n));case 5:return s=e.sent,e.abrupt("return",s.json());case 7:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}class C{constructor(e,t,i){var a=this;this.resources=new Map,this.url=void 0,this.fetchConfig={method:"GET"},this.formatData=e=>1===e.stat?{data:e,cache:!0}:{data:e,cache:!1},this.getData=function(){var e=(0,p.Z)(m().mark((function e(t,i,n){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!a.resources.has(t)){e.next=2;break}return e.abrupt("return",a.resources.get(t));case 2:return a.resources.set(t,a.fetch(t,i,n)),e.abrupt("return",a.getData(t));case 4:case"end":return e.stop()}}),e)})));return function(t,i,a){return e.apply(this,arguments)}}(),this.url=e,t&&(this.fetchConfig=t),i&&(this.formatData=i)}fetch(e,t,i){var a=this;return(0,p.Z)(m().mark((function n(){var r,o,s,l,c;return m().wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.prev=0,r=null!==i&&void 0!==i?i:a.url,n.next=4,T(r,a.fetchConfig,t);case 4:if(o=n.sent,s=a.formatData(o),l=s.cache,c=s.data,!l){n.next=9;break}return a.resources.set(e,c),n.abrupt("return",a.getData(e));case 9:return n.abrupt("return",c);case 12:n.prev=12,n.t0=n["catch"](0),console.error("fetch error: ",n.t0);case 15:case"end":return n.stop()}}),n,null,[[0,12]])})))()}}class N{constructor(e,t){var i,n=this;this.node=void 0,this.playStatus=a.Stopped,this.playPromise=void 0,this.startTime=void 0,this.endTime=void 0,this.cst=0,this.cet=0,this.isLoop=!1,this.volume=void 0,this.speed=void 0,this.setVideoClip=(e,t)=>{var i=e.cst,a=e.cet;this.cst=null!==i&&void 0!==i?i:0,this.cet=null!==a&&void 0!==a?a:1e3*this.node.duration,this.correctCurrentTime(t,"setVideoClip")},this.setVideoDuration=e=>{var t=e.startTime,i=e.endTime;this.startTime=t,this.endTime=i},this.setLoop=e=>{this.isLoop=e,this.node.loop=this.isLoop},this.getCurrentTime=e=>{var t=e-this.startTime;return t>0?t:0},this.onTimeUpdate=e=>{var t=e.currentTarget.currentTime,i=this.cst/1e3,a=this.cet/1e3;t>a&&(this.isLoop?this.node.currentTime=i:this.node.paused||(this.node.pause(),this.node.currentTime=a))},this.getVideoDuration=()=>this.cet-this.cst,this.correctCurrentTime=(e,t)=>{var i=this.getVideoDuration(),a=(i?this.getCurrentTime(e)%i:this.getCurrentTime(e))+this.cst;this.node.currentTime=a/1e3},this.throttleCorrectCurrentTime=(0,h.Z)(this.correctCurrentTime,100),this.setVolume=e=>{this.volume!==e&&(this.volume=e,this.node.volume=this.volume)},this.setSpeed=e=>{this.speed!==e&&(this.speed=e,this.node.playbackRate=this.speed)},this.play=e=>{if(this.playStatus!==a.Playing){this.playStatus=a.Playing,this.playPromise=this.node.play();var t=Date.now();this.playPromise.then((()=>{this.playPromise=void 0,this.correctCurrentTime(e+Date.now()-t)}))}},this.pause=function(){var e=(0,p.Z)(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n.playStatus!==a.Paused?(n.playPromise?n.playPromise.then((()=>{n.playStatus=a.Paused,n.node.pause(),n.playPromise=void 0})):(n.playStatus=a.Paused,n.node.pause()),n.correctCurrentTime(t,"pause")):n.throttleCorrectCurrentTime(t,"pause");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.stop=()=>{this.playStatus!==a.Stopped&&(this.playStatus=a.Stopped,this.node.pause(),setTimeout((()=>{this.correctCurrentTime(0,"stop")}),50))},this.node=e,this.startTime=t.startTime,this.endTime=t.endTime,this.setVideoClip(t,0),this.setLoop(!!t.isLoop),this.setVolume(null!==(i=t.volume)&&void 0!==i?i:0),this.node.ontimeupdate=this.onTimeUpdate}}function S(e,t,i){var a=(0,r.useRef)(null),n=(0,r.useRef)();function o(){if(a.current)return n.current=new N(a.current,(0,u.Z)({startTime:e,endTime:t},i)),n.current}return{targetRef:a,loadHandler:o,playerHelper:n.current}}function I(e){return e?{}:{display:"none"}}function A(e){var t,i,a;if(Array.isArray(e)){i=Array(t=e.length);while(t--)i[t]=(a=e[t])&&"object"===typeof a?A(a):a;return i}if("[object Object]"===Object.prototype.toString.call(e)){for(t in i={},e)"__proto__"===t?Object.defineProperty(i,t,{value:A(e[t]),configurable:!0,enumerable:!0,writable:!0}):i[t]=(a=e[t])&&"object"===typeof a?A(a):a;return i}return e}function P(e,t){var i=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&i.test(e)){e=e.toLowerCase();for(var a=[],n=1;n<7;n+=2)a.push(parseInt("0x".concat(e.slice(n,n+2))));return"rgba(".concat(a.join(","),",").concat(t,")")}return e}function M(e){return"0".concat(e.toString(16)).slice(-2)}var E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#",i=e.r,a=e.g,n=e.b,r=e.a,o=void 0===r?1:r;return i=Math.floor(i*o),a=Math.floor(a*o),n=Math.floor(n*o),"".concat(t).concat(M(i)).concat(M(a)).concat(M(n))};function L(e){var t=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;if(e&&t.test(e)){if(e=e.toLowerCase(),4===e.length){for(var i="#",a=1;a<4;a+=1)i+=e.slice(a,a+1).concat(e.slice(a,a+1));e=i}for(var n=[],r=1;r<7;r+=2)n.push(parseInt("0x".concat(e.slice(r,r+2))));return{r:n[0],g:n[1],b:n[2],a:1}}return{}}function D(e){if(e*=1,e<0&&(e+=360),0==e)return{x1:0,y1:0,x2:1,y2:0};if(180==e)return{x1:1,y1:0,x2:0,y2:0};if(90==e)return{x1:0,y1:1,x2:0,y2:0};if(270==e)return{x1:0,y1:0,x2:0,y2:1};var t=Math.abs(Math.cos(Math.PI/180*e)),i=Math.abs(Math.sin(Math.PI/180*e));return e>0&&e<90?{x1:0,y1:i,x2:t,y2:0}:e>90&&e<180?{x1:t,y1:i,x2:0,y2:0}:e>180&&e<270?{x1:t,y1:0,x2:0,y2:i}:e>270&&e<360?{x1:0,y1:0,x2:t,y2:i}:void 0}function R(e,t){if(e){var i=["0,0","0,1","0,2","1,1","1,2","2,1","2,2"];if("string"===typeof e&&(e.indexOf(",")>-1?(e=e.replaceAll(" ",""),e=e.split(",")):e=e.split(" ")),2===e.length){var a="".concat((0,f.Z)(e[0])/t,",").concat((0,f.Z)(e[1])/t);return i.findIndex((e=>e===a))}return-1}return 0}function z(e,t){var i=[[0,0],[0,1],[0,2],[1,1],[1,2],[2,1],[2,2]],a=i[e],n="".concat(a[0]*t,",").concat(a[1]*t);return n}function F(e){return e.includes("{placeholder.png}")&&(e=e.replaceAll("{placeholder.png}",se)),e}function O(e){if(e){var t;if("mask"===e.meta.type)if(1===(null===(t=e.assets)||void 0===t?void 0:t.length))return e.assets[0];return e}}function B(){return document.getElementById("HC-CORE-EDITOR-CANVAS").getBoundingClientRect()}function W(e){e.stopPropagation(),e.nativeEvent.stopPropagation()}function V(e,t,i){var a=e.clientX,n=e.clientY,r=e=>{var i=e.clientX,r=e.clientY;t&&t(i-a,r-n)},o=e=>{var t=e.clientX,s=e.clientY;i&&i(t-a,s-n),window.removeEventListener("mouseup",o),window.removeEventListener("mousemove",r)};window.addEventListener("mouseup",o),window.addEventListener("mousemove",r)}function U(e){var t=JSON.parse(JSON.stringify(e));t.colorStops.sort(((e,t)=>e.offset-t.offset)),t.angle=_(t.angle);var i="linear-gradient(".concat(t.angle,"deg,");return t.colorStops.forEach(((e,a)=>{var n=e.color;n&&("string"!==typeof n&&(n=j(n)),i=a===t.colorStops.length-1?"".concat(i+n," ").concat(100*e.offset,"%"):"".concat(i+n," ").concat(100*e.offset,"%,"))})),i+=")",i}function G(e,t){if(0===Math.abs(e)&&0===Math.abs(t))return 90;var i=Math.atan(t/e),a=Math.floor(180/(Math.PI/i));return a=Math.abs(parseInt(a)),e<0&&t<0?a=180-a:e>0&&t<0||(e>0&&t>0?a=-a:e<0&&t>0&&(a=-(180-a))),a}var X=i(35868),q=i.n(X),H={},Y={font9:"syht",font0:"yahei",font1:"fzfsjt",font2:"fzhtjt",font3:"fzktjt",font4:"pmzdbtt",font5:"qsgcfxt",font6:"qscmxxjt",font7:"qsyrt",font8:"qsyh",font11:"wqydkwmh",font12:"wqydkzh",font13:"zkgdh",font14:"zkklt",font15:"ztgjbs",font16:"ztgjfm",font18:"ztgjpxe",font19:"ztgjrx",font20:"2Dumb",font21:"3Dumb",font22:"AaShouXieHB",font23:"AaWanWan",font24:"AbrilFatface",font25:"AleoLight",font26:"AleoRegular",font27:"AlexBrush",font28:"Aliquam",font29:"AmaticSC",font30:"Amble",font31:"ArialRegular",font32:"Aspire",font33:"BebasNeueBook",font34:"BebasNeue",font35:"BukhariScript",font36:"DancingScript",font37:"DroidSerif",font38:"Edo",font39:"GrandHotel",font40:"GreatVibes",font41:"KoolBeans",font42:"Langdon",font43:"NeutonRegular",font44:"NeutonSCLight",font45:"OswaldStencil",font46:"Parisish",font47:"PlayfairDisplaySC",font48:"Quango",font49:"Rochester",font50:"ScriptinaPro",font51:"SixCaps",font52:"Trocchi",font54:"systjixi",font55:"systx",font56:"systcg",font57:"systct",font58:"fn851sxzzt",font59:"fnlhzt",font60:"fnyrdzst",font61:"fnzkkh",font62:"fnzkxwlogot",font63:"fnzqkhyt",font101:"fnAmaranthBold",font102:"fnAmaranthItalic",font103:"fnAsapCondensedBold",font104:"fnBadScriptRegular",font105:"fnBahianaRegular",font106:"fnBarrioRegular",font107:"fnblowbrush",font108:"fnDancingScriptBold",font109:"fnDancingScriptRegular",font110:"fnDolceVitaLight",font111:"fnDroidSansBold",font112:"fnFinelinerScript",font113:"fnFirstShineregular",font114:"fnLeagueScript",font115:"fnMarckScriptRegular",font116:"fnNISCRIPTRegular",font117:"fnParalinesRegular",font118:"fnPlaylistScript",font119:"fnPoiretOneRegular",font120:"fnPostNoBillsColomboExtraBold",font121:"fnsoulhandwritingfreeversion",font122:"fnTypoPRODancingScriptRegular",font123:"fnfzfsft",font124:"fnfzhtft",font125:"fnfzktGBK",font126:"fnfzktft",font127:"fnhymztHanaMinA",font128:"fnhymctHanaMinB",font129:"fnsyhtLight",font130:"fnsyhtRegular",font131:"fnsyhtSourceHanSansKHeavy",font132:"fnsyhtjzxExtraLight",font133:"fnsyhtjzxLight",font134:"fnsyhtjzxRegular",font135:"fntwjybbzks",font136:"fntwjybbzst",font137:"fntwqzksmjs",font138:"fnwhzbktkx",font139:"fnwhzbktky",font140:"fnwhzchtqpdw",font141:"fnwhzcgtbz",font142:"fnwhzchtsy",font143:"fnwhzcktj",font144:"fnwhzcytsk",font145:"fnwhzhbtbts",font146:"fnwhzktyf",font147:"fnwhzklhb",font148:"fnwhzkzhb",font149:"fnwhzyktf",font150:"fnwhzzlsf",font151:"fnwhzzytf",font152:"fnwhzzytsky",font153:"fnyrdzstBold",font154:"fnyrdzstExtralight",font155:"fnyrdzstHeavy",font156:"fnyrdzstMedium",font157:"fnyrdzstRegular",font158:"fnyrdzstSemibold",font159:"fnyjmc",font160:"fnzkwyt",font161:"fnzkydlt01",font162:"fnzkydlt02",font163:"fnsystSCBold",font164:"fnsystSCExtraLight",font165:"fnsystSCHeavy",font166:"fnsystSCLight",font167:"fnfystSCRegular",font168:"fnsystSCSemiBold",font169:"fnsyhtHeavy",font200:"zh2hllcht",font201:"zh3hyxht",font202:"zh4hcjxkt",font203:"zh5hwwrht",font204:"zh6hrjcht",font205:"zh7hwntzt",font206:"zh8hzznct",font207:"zh10hgyxsjxkt",font208:"zh17hmqgdt",font209:"zh19hxyfbt",font210:"zh20hstt",font211:"zh21hbqsyt",font212:"zh24hzhss",font213:"zh27hbdt",font214:"zh32hwzyxzt",font215:"zh34hsnhft",font216:"zh35hsxheht",font217:"zh36hsxhskt",font218:"zh37hsxhggt",font219:"zh38hyxxkt",font220:"zh39fzklt",font221:"zh40hxcfft",font222:"zh41hcxt",font223:"zh42kxsk",font224:"zh43hgcss",font225:"zh44hkxyh",font226:"zh46hmmt",font227:"zh47hsfxk",font228:"zh49hxyxs",font229:"zh51qqzjt",font230:"zh52hakmht",font231:"zh53hyxt",font232:"zh54hxh",font233:"zh55hlyss",font234:"zh56hhlmblsjt",font235:"zh57hcxh",font236:"zh58hczh",font237:"zh59hcch",font238:"zh60hmxszt",font239:"zh62hsjt",font240:"zh63hppt",font241:"zh64hmqrtt",font242:"zh66hzzt",font243:"zh70hlyht",font244:"zh71hysjs",font245:"zh73hjnss",font246:"zh74hfmss",font247:"zh75hlyzmt",font248:"zh79hmqnyt",font249:"zh80hmqxyt",font250:"zh81hqft",font251:"zh92hxchbt",font252:"zh95hsks",font253:"zh96hhxss",font254:"zh100hffxft",font255:"zh101hxqx",font256:"zh103hhtss",font257:"zh104hsxt",font258:"zh105hjyh",font259:"zh107hmqhlt",font260:"zh109hfgxzt",font261:"zh110hwljht",font262:"zh111hjbzpt",font263:"zh113hdmsnt",font264:"zh119htzeft",font265:"zh120hpbsht",font266:"zh122hqsb",font267:"zh126hyzt",font268:"zh127hyyt",font269:"zh128hwxpmt",font270:"zh129hbhxft",font271:"zh130hklqht",font272:"zh131hklcwt",font273:"zh133hmkkb",font274:"zh137hcyls",font275:"zh138hbrss",font276:"zh139hmqyyt",font277:"zh141hhlydt",font280:"zh116hfmss",font281:"zh142hxhx",font282:"zh151hlmzyt",font283:"zh152hjjcjh",font284:"zh155hfqt",font286:"zh162hyqllt",font287:"zh164hfyh",font288:"zh173hqxt",font289:"zh179hzkbbt",font290:"zh184hyycyh",font291:"zh194hmqfxt",font292:"zh199hmqcct",font293:"zh201hmqyht",font294:"zh208hxcqwt",font295:"zh160ts",font296:"zh176ccy",font297:"zh181fcbtt",font298:"zh143zkcjh",font299:"zh167yrh",font300:"zh144lyt",font301:"zh31ns",font302:"zh45byys",font303:"zh23xws",font304:"zh193wsfgt",font305:"zh197dms",font306:"zh237ylss",font307:"zh210gfsnt"};function K(){return Y}function Q(){if(Object.keys(H).length>0)return H;var e=K();return Object.keys(e).forEach((t=>{H[e[t]]=t})),H}var J="font130";function $(e){var t,i=Q();return null!==(t=i[e])&&void 0!==t?t:e}var ee={ArrowDown:40,ArrowRight:39,ArrowLeft:37,ArrowUp:38},te=Object.keys(ee),ie={Delete:46,Backspace:8},ae=Object.keys(ie),ne={KeyC:67,KeyX:88,KeyZ:90},re=Object.keys(ne),oe=30,se="https://js.xiudodo.com/editor/mask/maskModel.png",le=()=>({i:{pbr:1,kw:void 0,duration:0},o:{pbr:1,kw:void 0,duration:0},s:{pbr:1,kw:void 0,duration:0}});function ce(){console.log("onAssetChange")}class de{constructor(e){var t=e.baseFrames,i=void 0===t?1:t;this.videoTimerSrc="",this.hpMode=!0,this.wholeTemplate=!1,this.autoCalcTemplateEndTime=!1,this.backgroundEditable=!1,this.PlayStatus=a,this.getDefaultPlaybackRate=le,this.maxZIndex=99999,this.maxAssetIndex=999,this.editZIndex=this.maxZIndex+10,this.minZIndex=-1e3,this.frameRat=16.7,this.baseFrames=30,this.frameInterval=1/this.baseFrames,this.aeAnimationBaseTime=500,this.precision=void 0,this.videoTypes=["video","videoE"],this.imageTypes=["image","background","pic"],this.useContainerSizeTypes=["image","background","pic"],this.canUseTextEditor=["text"],this.hostName="",this.cdnHost="",this.handImgSrc="",this.fontsPath="",this.getFontFamily=$,this.editAble=["text","image","pic","videoE"],this.replaceable=["image","pic","videoE","SVG","lottie","mask"],this.apis={getSpecificWord:"",getAeAnimationDetail:"",getWebmFrameImage:""},this.classNameCreator=void 0,this.container=void 0,this.assetHoverTip=!0,this.specificWordsFetcher=void 0,this.onChange=void 0,this.onError=void 0,this.onAssetChange=(0,d.Z)(ce,500),this.getApi=e=>{var t,i;return"".concat(this.hostName).concat(null!==(t=null===(i=this.apis)||void 0===i?void 0:i[e])&&void 0!==t?t:"")},this.handleVideoStatus=(e,t)=>{var i=t.onPlay,a=t.onStop,n=t.onPause;switch(e){case this.PlayStatus.Playing:i();break;case this.PlayStatus.Stopped:a();break;case this.PlayStatus.Paused:n();break}},this.setBaseFrames=e=>{if(e<1)throw new Error("baseFrames Must be a positive integer\uff08baseFrames\u5fc5\u987b\u662f\u6b63\u6574\u6570\uff09 ");this.baseFrames=e,this.frameInterval=1/this.baseFrames,this.precision=de.getPrecisionTime(this.frameInterval)},this.getFramesPointTime=e=>{var t,i,a=null!==(t=null===this||void 0===this?void 0:this.precision)&&void 0!==t?t:0,n=null!==(i=null===this||void 0===this?void 0:this.frameInterval)&&void 0!==i?i:0,r=Math.pow(10,a),o=Math.round(e/n),s=o*r*n/r;return Number(s.toFixed(3))},this.videoTimerLoadError=e=>{console.error("\u9884\u68c0\u5931\u8d25,\u8bf7\u68c0\u67e5videoTimerSrc\u662f\u5426\u662f\u6709\u6548\u94fe\u63a5---src:".concat(e))},this.calculateVideoTime=e=>{var t=e/1e3;return Number.isNaN(t)?0:t},this.createClassName=(e,t)=>{var i;if(this.classNameCreator)return this.classNameCreator(e,t);var a=null!==(i=e.meta.className)&&void 0!==i?i:"";return t&&(a+="_showOnly_".concat(a)),a},this.updateConfig=e=>{Object.keys(e).forEach((t=>{void 0!==e[t]&&(this[t]=e[t])}))},this.setBaseFrames(i)}}de.getPrecisionTime=e=>{if(void 0===e)return 0;var t=e.toString(),i=t.indexOf("."),a=0;return-1!==i&&(a=t.length-i-1),a};var ue,pe,ve,me,he,fe,ge,xe,ye,be,_e,je,we,ke,Te,Ze,Ce,Ne,Se,Ie,Ae,Pe,Me,Ee,Le,De,Re,ze,Fe=new de({baseFrames:oe});function Oe(e){Fe.updateConfig(e);var t=Fe.getApi("getSpecificWord");Fe.specificWordsFetcher=new C(t)}function Be(e){Fe.updateConfig(e)}function We(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];setTimeout((()=>{var i;null===(i=Fe.onChange)||void 0===i||i.call(Fe,e,t)}))}function Ve(){return{playStatus:Fe.PlayStatus.Stopped,currentTime:0}}var Ue=(ue=Reflect.metadata("design:type","undefined"===typeof PreCheck?Object:PreCheck),pe=Reflect.metadata("design:type","undefined"===typeof ContainerAddedAsset?Object:ContainerAddedAsset),ve=Reflect.metadata("design:type","undefined"===typeof CanvasInfo?Object:CanvasInfo),me=Reflect.metadata("design:type","undefined"===typeof VideoStatus?Object:VideoStatus),he=Reflect.metadata("design:type","undefined"===typeof VideoStatus?Object:VideoStatus),fe=Reflect.metadata("design:type","undefined"===typeof VideoStatus?Object:VideoStatus),ge=Reflect.metadata("design:type","undefined"===typeof VideoStatus?Object:VideoStatus),xe=Reflect.metadata("design:type","undefined"===typeof ManualCurrent?Object:ManualCurrent),ye=class{constructor(){(0,l.Z)(this,"preCheck",be,this),(0,l.Z)(this,"containerAddedAsset",_e,this),(0,l.Z)(this,"canvasInfo",je,this),(0,l.Z)(this,"previewPartOfVideoStatus",we,this),(0,l.Z)(this,"previewVideoStatus",ke,this),(0,l.Z)(this,"videoStatus",Te,this),(0,l.Z)(this,"videoStatusOfPart",Ze,this),(0,l.Z)(this,"manualPreview",Ce,this),(0,l.Z)(this,"manualCurrentTime",Ne,this),(0,l.Z)(this,"currentTimeRange",Se,this),(0,l.Z)(this,"setPreCheck",Ie,this),(0,l.Z)(this,"setCanvasInfo",Ae,this),(0,l.Z)(this,"setPreviewPartOfVideo",Pe,this),(0,l.Z)(this,"setPreviewVideo",Me,this),(0,l.Z)(this,"setVideoInfo",Ee,this),(0,l.Z)(this,"setVideoInfoOfPart",Le,this),(0,l.Z)(this,"setCurrentTimeRange",De,this),(0,l.Z)(this,"setManualPreview",Re,this),(0,l.Z)(this,"setManualCurrent",ze,this),(0,s.rC)(this)}},be=(0,c.Z)(ye.prototype,"preCheck",[s.LO,ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{videoTimerLoad:!0}}}),_e=(0,c.Z)(ye.prototype,"containerAddedAsset",[s.LO,pe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{index:-1,info:[]}}}),je=(0,c.Z)(ye.prototype,"canvasInfo",[s.LO,ve],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{width:0,height:0,scale:0}}}),we=(0,c.Z)(ye.prototype,"previewPartOfVideoStatus",[s.LO,me],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve()}}),ke=(0,c.Z)(ye.prototype,"previewVideoStatus",[s.LO,he],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve()}}),Te=(0,c.Z)(ye.prototype,"videoStatus",[s.LO,fe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve()}}),Ze=(0,c.Z)(ye.prototype,"videoStatusOfPart",[s.LO,ge],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ve()}}),Ce=(0,c.Z)(ye.prototype,"manualPreview",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ne=(0,c.Z)(ye.prototype,"manualCurrentTime",[s.LO,xe],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Se=(0,c.Z)(ye.prototype,"currentTimeRange",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ie=(0,c.Z)(ye.prototype,"setPreCheck",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.preCheck,e)}}}),Ae=(0,c.Z)(ye.prototype,"setCanvasInfo",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.canvasInfo,e)}}}),Pe=(0,c.Z)(ye.prototype,"setPreviewPartOfVideo",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.previewPartOfVideoStatus,e)}}}),Me=(0,c.Z)(ye.prototype,"setPreviewVideo",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.previewVideoStatus,e)}}}),Ee=(0,c.Z)(ye.prototype,"setVideoInfo",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.playStatus,i=e.currentTime;void 0!==t&&t!==this.videoStatusOfPart.playStatus&&(t!==this.videoStatusOfPart.playStatus&&(this.videoStatusOfPart.playStatus=t),t!==this.videoStatus.playStatus&&(this.videoStatus.playStatus=t)),void 0!==i&&(this.videoStatus.currentTime=i)}}}),Le=(0,c.Z)(ye.prototype,"setVideoInfoOfPart",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.playStatus,i=e.currentTime,a=void 0===i?this.videoStatusOfPart.currentTime:i;void 0!==t&&t!==this.videoStatusOfPart.playStatus&&(t!==this.videoStatusOfPart.playStatus&&(this.videoStatusOfPart.playStatus=t),t!==this.videoStatus.playStatus&&(this.videoStatus.playStatus=t)),this.videoStatusOfPart.currentTime=a-this.currentTimeRange}}}),De=(0,c.Z)(ye.prototype,"setCurrentTimeRange",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{e!==this.currentTimeRange&&(this.currentTimeRange=e)}}}),Re=(0,c.Z)(ye.prototype,"setManualPreview",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.manualPreview=e}}}),ze=(0,c.Z)(ye.prototype,"setManualCurrent",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.manualCurrentTime=e}}}),ye),Ge=new Ue,Xe=i(97406),qe=i(98377),He=i(56194);function Ye(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=0,n=0;e.top&&(a=e.left,n=e.top),null!==e&&void 0!==e&&e.x&&(a=e.x,n=e.y);var r=t.width,o=t.height;return i?{x:a-r/2,y:n-o/2}:{x:a+r/2,y:n+o/2}}function Ke(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.transform,a=e.attribute;return Ye({x:i.posX*t,y:i.posY*t},{width:a.width*t,height:a.height*t})}function Qe(e){return{left:e.x,top:e.y}}function Je(e){return{x:e.left,y:e.top}}class $e{constructor(e,t,i){this.center=void 0,this.size=void 0,this.originSize=void 0,this.originPosition=void 0,this.leftTop=void 0,this.rightTop=void 0,this.leftBottom=void 0,this.rightBottom=void 0,this.leftCenter=void 0,this.topCenter=void 0,this.rightCenter=void 0,this.bottomCenter=void 0;var a=e.width*i,n=e.height*i,r=t.left*i,o=t.top*i;this.size={width:a,height:n},this.originSize=e,this.originPosition=t,this.center={x:r+a/2,y:o+n/2},this.leftTop={x:r,y:o},this.rightTop={x:r+a,y:o},this.leftBottom={x:r,y:o+n},this.rightBottom={x:r+a,y:o+n},this.leftCenter={x:this.leftTop.x,y:this.center.y},this.topCenter={x:this.center.x,y:this.leftTop.y},this.rightCenter={x:this.rightTop.x,y:this.center.y},this.bottomCenter={x:this.center.x,y:this.leftBottom.y}}}function et(e){return e*Math.PI/180}function tt(e,t,i){if(Math.abs(i)%360===0)return(0,u.Z)({},e);var a=et(i),n=Math.cos(a),r=Math.sin(a),o=e.x-t.x,s=e.y-t.y;return{x:o*n-s*r+t.x,y:o*r+s*n+t.y}}$e.coordinateTOPosition=Qe,$e.positionToCoordinate=Je;function it(e,t){var i=e.width,a=e.height,n=t.x,r=t.y,o={x:n+i,y:r+a},s={x:n+i/2,y:r+a/2};return{symmetry:o,center:s}}function at(e,t){return Math.abs(e-t)<=3}function nt(e,t,i){return{vertical:{start:t.y,center:e.y,end:i.y},horizontal:{start:t.x,center:e.x,end:i.x}}}function rt(e,t){var i=it(e,t),a=i.symmetry,n=i.center;return nt(n,t,a)}function ot(e,t,i){var a=it(t,i),n=a.center,r=a.symmetry,o={top:tt(i,n,e),bottom:tt(r,n,e),left:tt({x:i.x,y:r.y},n,e),right:tt({x:r.x,y:i.y},n,e)},s={y:o.top.y,x:o.left.x},l={y:o.bottom.y,x:o.right.x};return Object.keys(o).forEach((e=>{var t=o[e];t.x<s.x&&(s.x=t.x),t.x>l.x&&(l.x=t.x),t.y<s.y&&(s.y=t.y),t.y>l.y&&(l.y=t.y)})),nt(n,s,l)}function st(e,t,i){return i?ot(i,e,t):rt(e,t)}function lt(e,t,i){var a,n=i[e],r=t[e];for(var o in n){var s=n[o];for(var l in r){var c=r[l];if(at(s,c)){a={targetKey:l,targetValue:c,currentKey:o,currentValue:s};break}}}if(a){var d,u={};if("vertical"===e){var p=Math.min(t.horizontal.start,i.horizontal.start),v=Math.max(t.horizontal.end,i.horizontal.end),m=a.targetValue,h=0;switch(a.currentKey){case"start":h=m;break;case"center":h=m-Math.abs(i.vertical.center-i.vertical.start);break;case"end":h=m-Math.abs(i.vertical.end-i.vertical.start);break}u={opacity:1,width:Math.abs(p-v),height:1,top:m,left:p},d={left:i.horizontal.start,top:h}}else{var f=Math.min(t.vertical.start,i.vertical.start),g=Math.max(t.vertical.end,i.vertical.end),x=a.targetValue,y=0;switch(a.currentKey){case"start":y=x;break;case"center":y=x-Math.abs(i.horizontal.center-i.horizontal.start);break;case"end":y=x-Math.abs(i.horizontal.end-i.horizontal.start);break}u={opacity:1,width:1,height:Math.abs(f-g),top:f,left:x},d={left:y,top:i.vertical.start}}return{currentKey:a.currentKey,position:d,style:u}}}var ct=1e3,dt=["i","o","s"],ut=["stay","exit","enter"],pt={stay:"s",exit:"o",enter:"i"},vt=()=>({vertical:{start:0,center:0,end:0},horizontal:{start:0,center:0,end:0}});function mt(e){var t=e||{},i=t.aeA;return i||Fe.getDefaultPlaybackRate()}function ht(e,t){return{width:t.width/e.width,height:t.height/e.height}}function ft(e,t){return{width:e.width*t.width,height:e.height*t.height}}function gt(e,t){return t.width/e.width}function xt(e,t){return Math.round(e/t)}function yt(e){return e/Fe.baseFrames*1e3}function bt(e,t){if(!e)return 0;var i=xt(e.op-e.ip,t);return Math.round(yt(i))}function _t(e,t){if(!t)return 1;var i=e/1e3*Fe.baseFrames;return(t.op-t.ip)/i}function jt(e){return e.split("@")[0]}function wt(e,t){return"".concat(e,"&x-oss-process=video/snapshot,t_").concat(t,",f_jpg,w_100")}function kt(e,t){if(!t)return e;var i=(0,n.Z)(t,2),a=i[0],r=i[1];return e-(r+a)}function Tt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a=e.endTime-e.startTime,r=(0,n.Z)(i,2),o=(r[0],r[1]),s=t-o;return{startTime:s-a,endTime:s}}function Zt(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a=e.endTime-e.startTime,r=(0,n.Z)(i,1),o=r[0];return{startTime:o,endTime:o+a}}function Ct(e){var t=e.left,i=e.top;return{x:t,y:i}}var Nt=(e,t)=>{var i,a=null!==(i=e.meta.className)&&void 0!==i?i:"";return t&&(a+="_showOnly_".concat(a)),a};function St(e){return e.endTime-e.startTime}function It(e){if(e)return e.parent?It(e.parent):e}function At(e){return Number(e.toFixed(2))}var Pt=["video","videoE"],Mt=["image","background","pic"],Et=["i","s","o"],Lt=100,Dt='<svg version="1.1" id="\u56fe\u5c42_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 830 830" enable-background="new 0 0 830 830" xml:space="preserve">\n   <g>\n     <defs>\n       <rect id="SVGID_1_1526035162" width="830" height="830"/>\n     </defs>\n     <clipPath id="SVGID_2_1526035162">\n       <use xlink:href="#SVGID_1_1526035162"  overflow="visible"/>\n     </clipPath>\n     <g transform="matrix(1 0 0 1 -1.525879e-05 0)" clip-path="url(#SVGID_2_1526035162)">\n         <image overflow="visible" width="3898" height="2480" xlink:href="https://js.tuguaishou.com/index_img/editorV6.0/containerBg.jpg"  transform="matrix(0.3536 0 0 0.3536 -230.5513 -27.1287)">\n       </image>\n     </g>\n   </g>\n</svg>',Rt=[25,48,21,12,56,4,10,49,50,24,46,47,9,45,41,20,5,18,37,16,38,39,40,55,54,65,51],zt=[3,4,6,7,8,10,12,13,14,28,28,29,35,37,39,43,45,57,61,62,70,81,82,83,84];function Ft(e){return{attribute:(0,u.Z)({},e)}}function Ot(e){return{meta:(0,u.Z)({},e)}}function Bt(e){return{transform:(0,u.Z)({},e)}}var Wt,Vt,Ut=function(){var e=(0,p.Z)(m().mark((function e(t,i){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.length){e.next=5;break}return a=[],t.forEach(((e,t)=>{a.push(xd(e.asset,!0).then((e=>{})))})),e.next=5,Promise.all(a);case 5:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),Gt=(e,t)=>{if(e.length){var i=[];return e.forEach((e=>{var a;if("group"!==e.meta.type&&(!ti(e)||null!==(a=e.assets)&&void 0!==a&&a.length)){var n=wk(!0,e),r=new Pn(n,t);i.push(r)}})),i}return[]};function Xt(e){var t;if(0===e.length)return{width:0,height:0,left:0,top:0,zIndex:-1,assetTime:{startTime:0,endTime:0}};var i,a,n=Ge.canvasInfo.scale,r={startTime:-1,endTime:-1};e.forEach((e=>{var t=e.transform,n=e.auxiliary,o=e.assetDuration;(r.startTime<0||o.startTime<r.startTime)&&(r.startTime=o.startTime),(r.endTime<0||o.endTime>r.endTime)&&(r.endTime=o.endTime),n&&(i?(n.horizontal.start<i.x1&&(i.x1=n.horizontal.start),n.horizontal.end>i.x2&&(i.x2=n.horizontal.end),n.vertical.start<i.y1&&(i.y1=n.vertical.start),n.vertical.end>i.y2&&(i.y2=n.vertical.end),a>t.zindex&&(a=t.zindex)):(i={x1:n.horizontal.start,x2:n.horizontal.end,y1:n.vertical.start,y2:n.vertical.end},a=t.zindex))}));var o=null!==(t=i)&&void 0!==t?t:{},s=o.x1,l=void 0===s?0:s,c=o.x2,d=void 0===c?0:c,u=o.y1,p=void 0===u?0:u,v=o.y2,m=void 0===v?0:v;return{width:Math.abs(d-l)/n,height:Math.abs(m-p)/n,left:l/n,top:p/n,zIndex:a,assetTime:r}}function qt(e,t){if("number"===typeof e){var i,a,n=Nl.assets,r=void 0===n?[]:n;if("number"===typeof t&&t>-1)r=null!==(i=null===(a=Nl.templates)||void 0===a?void 0:a[t].assets)&&void 0!==i?i:[];var o=(t,i)=>{for(var a=0;a<t.length;a++){var n,r=null!==i&&void 0!==i?i:[],s=t[a];if(s.meta.id===e)return r.push(a),r;if(null!==(n=s.assets)&&void 0!==n&&n.length)return o(s.assets,r)}return[]};return o(r)}}(function(e){function t(e,t,i){var a=0,n=e;return e+i<=t?i<0&&(a=-i,n=e+i):i>=0?n=t-i:(a=-i,n=t),{skew:a,size:n}}function i(e,t){var i=e.attribute,a=Number(t.source_width),n=Number(t.source_height),r=i.width,o=i.height,s=(i.container,r),l=o;return a>n?l=s/(a/n):s=l/(n/a),{width:s,height:l,posX:0,posY:0}}e.calcSizePosition=t,e.replaceSvgSize=i})(Wt||(Wt={})),function(e){function t(e){var t=[];e.forEach(((e,i)=>{for(var a in e)["top","left","strokeWidth","shadowH","shadowV","shadowBlur"].includes(a)&&0!=e[a]&&t.push({sizes:[{index:i,key:a}],range:{min:e[a]/10,max:2*e[a]}})}))}function i(e){var t=[];for(var i in e){var a=i.split(",");t.push(Object.assign(e[i],{colorBlock:{r:a[0],g:a[1],b:a[2],a:a[3]}}))}return t}function a(e){var t={};return null===e||void 0===e||e.layers.forEach(((e,i)=>{for(var a in e){var n=e[a];if(("color"===a||"strokeColor"===a||"shadowColor"===a)&&n.a&&n.a>0){var r="".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a);t[r]||(t[r]={},t[r].colors=[]),t[r].colors.push({index:i,key:a})}}})),i(t)}e.filterVariableSize=t,e.resetColorBlock=i,e.filterFontEffectColor=a}(Vt||(Vt={}));var Ht=(e,t)=>{var i;if("number"===typeof e){var a,n,r;if(e<0)return;return"number"===typeof t&&t>-1?null===(n=Nl.templates)||void 0===n||null===(r=n[t].assets)||void 0===r?void 0:r[e]:null===(a=Nl.assets)||void 0===a?void 0:a[e]}for(var o=Nl.assets,s=void 0===o?[]:o,l=e.length-2,c=0;c<l;c++){var d,u;s=null!==(d=null===(u=s)||void 0===u?void 0:u[c].assets)&&void 0!==d?d:[]}return null===(i=s)||void 0===i?void 0:i[l]},Yt=(e,t)=>{if("number"===typeof e){var i,a,n=Nl.assets,r=void 0===n?[]:n;if("number"===typeof t&&t>-1)r=null!==(i=null===(a=Nl.templates)||void 0===a?void 0:a[t].assets)&&void 0!==i?i:[];var o=t=>{var i,a=(0,Xe.Z)(t);try{for(a.s();!(i=a.n()).done;){var n,r=i.value;if(r.meta.id===e)return r;if(null!==(n=r.assets)&&void 0!==n&&n.length){var s=o(r.assets);if(s)return s}}}catch(l){a.e(l)}finally{a.f()}};return o(r)}},Kt=e=>null===e||void 0===e?void 0:e.parent;function Qt(e){if(e){var t=e.assetPositionScale,i=e.assetSizeScale,a=Math.min(120,i.width/3),n=Math.min(50,i.height/4);a=Math.max(30,a),n=Math.max(30,n);var r={width:a,height:n,left:(null===t||void 0===t?void 0:t.left)+(i.width/2-a/2),top:(null===t||void 0===t?void 0:t.top)+(i.height/2-n/2)};return r}}function Jt(e){return e&&["effect"].includes(e.meta.type)}function $t(e){if(e){var t=e.meta;return!t.isTransfer&&!t.isLogo&&"effect"!==t.type&&((Fe.backgroundEditable||!t.isBackground)&&!t.locked)}return!1}function ei(e){if(!e)return!1;var t=e.animation,i=e.stayEffect,a=e.bgAnimation,n=void 0===a?{id:0}:a;if(t||n||i){var r,o,s,l,c,d,u=null!==(r=null===t||void 0===t||null===(o=t.enter)||void 0===o?void 0:o.baseId)&&void 0!==r?r:0,p=null!==(s=null===t||void 0===t||null===(l=t.exit)||void 0===l?void 0:l.baseId)&&void 0!==s?s:0,v=null!==(c=null===t||void 0===t||null===(d=t.stay)||void 0===d?void 0:d.baseId)&&void 0!==c?c:0;return u>0||p>0||v>0||n.id>0||i}return!1}function ti(e){var t;return"module"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)}function ii(e){var t;return"__module"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)}function ai(e){var t;return"mask"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)}function ni(e){var t;return"lottie"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)}function ri(e){return e&&e.parent}function oi(e){return e&&Mt.includes(e.meta.type)}function si(e){return e&&Pt.includes(e.meta.type)}function li(e){if(e){var t=e.meta;return!(t.isTransfer||t.isLogo||t.isWatermark)&&(!!Fe.backgroundEditable||!t.isBackground)}return!1}function ci(e,t){if(!e)return!1;if(e.meta.hidden)return!1;var i=e.assetDuration,a=i.startTime,n=i.endTime;return t>=a&&t<n}function di(e){var t;if(e)return null===(t=e.meta)||void 0===t?void 0:t.isAlwaysVisible}function ui(e){if(!e)return!1;var t=e.transform.rotate;return!!t&&t%360!==0}function pi(e){if(!e)return!1;var t=e.meta,i=(t.type,t.isTransfer),a=t.isLogo,n=t.isWatermark;return!a&&!i&&!n}function vi(e,t){if(!e)return!1;var i=e.transform,a=i.posX,n=i.posY,r=e.attribute,o=r.width,s=r.height,l=n+s<0,c=n>t.height,d=a+o<0,u=a>t.width;return!!(l||c||d||u)}function mi(e,t){var i=Qt(e),a=Ou(i);return a.xMax>t.left&&a.xMin<t.left&&a.yMax>t.top&&a.yMin<t.top}var hi=e=>{var t,i=ai(e)&&null!==e&&void 0!==e&&null!==(t=e.assets)&&void 0!==t&&t.length?e.assets[0]:e;return i};function fi(e){return zt.includes(Number(e))}function gi(e){return Rt.includes(Number(e))}function xi(e){if(!e)return!1;if("text"!==(null===e||void 0===e?void 0:e.meta.type))return!1;var t=!0,i=e.attribute,a=i.effectColorful,n=i.effect;if(a&&a.resId&&(t=!fi(a.resId)),n){var r=Number(n.split("@")[0]);t=!gi(r)}return t}class yi{constructor(e){this.id=1,this.prefix=void 0,this.prefix=e}createId(){var e=this.id;return this.id+=1,this.prefix?"".concat(this.prefix,"-").concat(e):e}}var bi=new yi,_i=new yi("dom");function ji(){return bi.createId()}function wi(){return _i.createId()}function ki(){for(var e=[],t="0123456789abcdef",i=0;i<5;i++)e[i]=t.substr(Math.floor(16*Math.random()),1);var a="".concat(e.join(""),"_gradient");return a}var Ti=e=>{Ge.setCanvasInfo(e)};function Zi(e){return{pauseVideo:()=>{Ge[e]({playStatus:Fe.PlayStatus.Paused})},stopVideo:()=>{Ge[e]({playStatus:Fe.PlayStatus.Stopped,currentTime:0})},playVideo:()=>{Ge[e]({playStatus:Fe.PlayStatus.Playing})},setCurrentTime:function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=t*(i?1e3:1);Ge[e]({currentTime:a,currentTimeWithClip:a})}}}var Ci=Zi("setVideoInfo");Ci.playVideo,Ci.setCurrentTime,Ci.stopVideo,Ci.pauseVideo;var Ni=Zi("setPreviewVideo");Ni.playVideo,Ni.setCurrentTime,Ni.stopVideo,Ni.pauseVideo;Zi("setVideoInfoOfPart");var Si=()=>({videoStatus:Ge.videoStatusOfPart,setVideoStatus:Ge.setVideoInfoOfPart,resetVideoStatus:()=>{Ge.setVideoInfoOfPart({playStatus:a.Stopped,currentTime:0}),Ge.setCurrentTimeRange(0)},setCurrentTimeRange:e=>{Ge.setCurrentTimeRange(e)}});function Ii(){return Ge.videoStatus}function Ai(){return Ge.previewVideoStatus}function Pi(){return Ge.manualPreview}function Mi(){return Ge.canvasInfo}function Ei(){return Ge.manualCurrentTime}function Li(){var e=Ge.canvasInfo,t=e.width,i=e.height,a=e.scale;return{width:t*a,height:i*a,scale:a}}var Di,Ri,zi,Fi,Oi,Bi,Wi,Vi,Ui,Gi,Xi,qi,Hi,Yi,Ki,Qi,Ji,$i,ea,ta,ia,aa,na,ra,oa,sa,la,ca,da,ua,pa,va,ma,ha,fa,ga,xa,ya,ba,_a,ja,wa,ka,Ta,Za,Ca,Na,Sa,Ia,Aa,Pa,Ma,Ea,La,Da,Ra,za,Fa,Oa,Ba,Wa,Va,Ua,Ga,Xa,qa,Ha,Ya,Ka,Qa,Ja,$a,en,tn,an,nn,rn,on,sn,ln,cn,dn,un=Mi,pn=()=>Fe.wholeTemplate?Ge.videoStatusOfPart.currentTime:Ge.videoStatus.currentTime,vn=i(29932);function mn(e,t){return{x:t.x-e.width/2,y:t.y-e.height/2}}function hn(e){var t=e.left,i=e.top,a=e.width,n=e.height;return{xMin:t,xMax:t+a,yMin:i,yMax:i+n}}function fn(e){var t=e.left,i=e.top,a=e.width,n=e.height;return{x:t+a/2,y:i+n/2}}function gn(e){return fn((0,u.Z)((0,u.Z)({},e.assetPositionScale),e.assetSizeScale))}function xn(e){var t=e.left,i=e.top,a=e.width,n=e.height;return{rect:[{x:t,y:i},{x:t+a,y:i},{x:t+a,y:i+n},{x:t,y:i+n}],center:fn({left:t,top:i,width:a,height:n})}}function yn(e){return e*Math.PI/180}function bn(e,t){return{x:Math.min(e.x,t.x)+Math.abs(t.x-e.x)/2,y:Math.min(e.y,t.y)+Math.abs(t.y-e.y)/2}}function _n(e){var t=(0,n.Z)(e,4),i=t[0],a=(t[1],t[2]);t[3];return bn(i,a)}function jn(e,t){var i=t.x-e.x,a=t.y-e.y;return Math.sqrt(i*i+a*a)}function wn(e,t,i){var a=(0,vn.U1)(yn(i),t.x,t.y);return(0,vn.qU)(a,e)}function kn(e,t,i,a,n){var r=(0,vn.U1)(yn(n),t.x,t.y),o=(0,vn.bA)(a.x,a.y,i.x,i.y),s=(0,vn.qC)(r,o);return(0,vn.qU)(s,e)}function Tn(e,t,i){var a=(0,vn.U1)(yn(i),t.x,t.y);return(0,vn.hC)(a,e)}function Zn(e){var t=(0,n.Z)(e,4),i=t[0],a=t[1],r=t[2],o=t[3];return{lt:i,rt:a,rb:r,lb:o}}function Cn(e){var t=(0,n.Z)(e,4),i=t[0],a=t[1],r=t[2];t[3];return{left:i.x,top:i.y,width:Math.abs(a.x-i.x),height:Math.abs(r.y-i.y)}}function Nn(e,t,i){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=t.transform,r=n.posY,o=n.posX,s=n.rotate,l=void 0===s?0:s,c=t.attribute,d=c.width,p=c.height,v=e.tempData.rt_relative,m=void 0===v?{posY:0,posX:0,rotate:0}:v,h=a?m:e.transform,f=h.posY,g=h.posX,x=h.rotate,y={},b=a?{x:o+g*d,y:r+f*p}:{x:o+g,y:r+f};if(i){var _=fn((0,u.Z)((0,u.Z)({},e.containerSize),{},{left:b.x,top:b.y})),j=Tn(_,i,l),w=mn(e.containerSize,j);Object.assign(y,{posX:w.x,posY:w.y})}else Object.assign(y,{posX:b.x,posY:b.y});return y.rotate=x+l,y}function Sn(e,t){var i=t.attribute,a=i.width,n=i.height,r=e.tempData.rt_relative,o=r||{},s=o.posY,l=void 0===s?0:s,c=o.posX,d=void 0===c?0:c,u={posX:d*a,posY:l*n};return u}var In,An,Pn=(Di=Reflect.metadata("design:type","undefined"===typeof He.Asset?Object:He.Asset),Ri=s.LO.shallow,zi=Reflect.metadata("design:type","undefined"===typeof IObservableArray?Object:IObservableArray),Fi=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),Oi=s.LO.shallow,Bi=Reflect.metadata("design:type","undefined"===typeof He.AssetTempUpdateParams?Object:He.AssetTempUpdateParams),Wi=s.LO.ref,Vi=Reflect.metadata("design:type","undefined"===typeof He.TemplateClass?Object:He.TemplateClass),Ui=Reflect.metadata("design:type",Function),Gi=Reflect.metadata("design:paramtypes",[]),Xi=Reflect.metadata("design:type",Function),qi=Reflect.metadata("design:paramtypes",[]),Hi=Reflect.metadata("design:type",Function),Yi=Reflect.metadata("design:paramtypes",[]),Ki=Reflect.metadata("design:type",Function),Qi=Reflect.metadata("design:paramtypes",[]),Ji=Reflect.metadata("design:type",Function),$i=Reflect.metadata("design:paramtypes",[]),ea=Reflect.metadata("design:type",Function),ta=Reflect.metadata("design:paramtypes",[]),ia=Reflect.metadata("design:type",Function),aa=Reflect.metadata("design:paramtypes",[]),na=Reflect.metadata("design:type",Function),ra=Reflect.metadata("design:paramtypes",[]),oa=Reflect.metadata("design:type",Function),sa=Reflect.metadata("design:paramtypes",[]),la=Reflect.metadata("design:type",Function),ca=Reflect.metadata("design:paramtypes",[]),da=Reflect.metadata("design:type",Function),ua=Reflect.metadata("design:paramtypes",[]),pa=Reflect.metadata("design:type",Function),va=Reflect.metadata("design:paramtypes",[]),ma=Reflect.metadata("design:type",Function),ha=Reflect.metadata("design:paramtypes",[]),fa=Reflect.metadata("design:type",Function),ga=Reflect.metadata("design:paramtypes",[]),xa=Reflect.metadata("design:type",Function),ya=Reflect.metadata("design:paramtypes",[]),ba=Reflect.metadata("design:type",Function),_a=Reflect.metadata("design:paramtypes",[]),ja=Reflect.metadata("design:type",Function),wa=Reflect.metadata("design:paramtypes",[]),ka=Reflect.metadata("design:type",Function),Ta=Reflect.metadata("design:paramtypes",[]),Za=Reflect.metadata("design:type",Function),Ca=Reflect.metadata("design:paramtypes",[]),Na=Reflect.metadata("design:type",Function),Sa=Reflect.metadata("design:paramtypes",[]),Ia=Reflect.metadata("design:type",Function),Aa=Reflect.metadata("design:paramtypes",[]),Pa=Reflect.metadata("design:type",Function),Ma=Reflect.metadata("design:paramtypes",[]),Ea=Reflect.metadata("design:type",Function),La=Reflect.metadata("design:paramtypes",[]),Da=Reflect.metadata("design:type",Function),Ra=Reflect.metadata("design:paramtypes",[]),za=Reflect.metadata("design:type",Function),Fa=Reflect.metadata("design:paramtypes",[]),Oa=Reflect.metadata("design:type",Function),Ba=Reflect.metadata("design:paramtypes",["undefined"===typeof He.TemplateClass?Object:He.TemplateClass]),Wa=class{get attribute(){return this.asset.attribute}get transform(){return this.asset.transform}get meta(){return this.asset.meta}get isAllAnimation(){return this.attribute.kw||this.attribute.aeA||this.attribute.animation||this.attribute.rt_previewAeA||this.attribute.stayEffect||this.attribute.bgAnimation||this.attribute.rt_previewAnimation}get isAea(){return!!this.attribute.rt_previewAeA||!ei(this.attribute)}get isAeaText(){if(this.attribute.aeA){var e=this.attribute.aeA;return dt.some((t=>{var i;return!!e[t].kw&&!(null===(i=e[t].kw)||void 0===i||!i.isText)}))}return!1}get assetTransform(){var e=this.transform||{},t=e.rotate,i=void 0===t?0:t,a=e.alpha,n=void 0===a?100:a,r=e.zindex,o=void 0===r?1:r;return{rotate:i,opacity:n/100,zIndex:100*o}}get assetPosition(){var e=this.transform,t=e.posY,i=e.posX;return{left:i,top:t}}get assetAbsolutePosition(){var e,t,i=this.transform,a=i.posY,n=i.posX,r=(null===(e=this.parent)||void 0===e?void 0:e.assetAbsolutePosition.left)||0,o=(null===(t=this.parent)||void 0===t?void 0:t.assetAbsolutePosition.top)||0;return{left:n+r,top:a+o}}get assetAbsolutePositionScale(){if(this.parent&&ti(this.parent)){var e,t=un(),i=t.scale,a=this.parent.transform.rotate,n=void 0===a?0:a,r=n%360>0;r&&(e=fn((0,u.Z)((0,u.Z)({},this.parent.assetSize),this.parent.assetPosition)));var o=Nn(this,this.parent,e,!1),s=o.posY,l=void 0===s?0:s,c=o.posX,d=void 0===c?0:c,p=o.rotate,v=void 0===p?0:p;return{left:d*i,top:l*i,rotate:v}}return(0,u.Z)((0,u.Z)({},this.assetPositionScale),{},{rotate:this.transform.rotate})}get assetPositionScale(){var e=un(),t=e.scale,i=this.assetPosition,a=i.left,n=i.top;return{left:a*t,top:n*t}}get assetSize(){var e=this.attribute,t=e.width,i=e.height;return{width:t,height:i}}get assetSizeScale(){var e=this.assetSize,t=e.width,i=e.height,a=un(),n=a.scale;return{width:t*n,height:i*n}}get containerSize(){var e=this.asset.attribute,t=e.container;if(oi(this)&&null!==t&&void 0!==t&&t.id){var i=t.width,a=void 0===i?0:i,n=t.height,r=void 0===n?0:n;return{width:a,height:r}}return this.assetSize}get containerSizeScale(){var e=un(),t=e.scale,i=this.containerSize,a=i.width,n=i.height;return{width:a*t,height:n*t}}get animationItemPbr(){var e={i:1,s:1,o:1},t=this.attribute.aeA;return dt.forEach((i=>{var a;e[i]=null!==(a=null===t||void 0===t?void 0:t[i].pbr)&&void 0!==a?a:1})),e}get animationItemPbrWithRealData(){var e={i:0,s:0,o:0},t=this.attribute.aeA;return t&&dt.forEach((i=>{var a,n=t[i];n.kw&&n.pbr&&(e[i]=null!==(a=n.pbr)&&void 0!==a?a:1)})),e}get animationItemDuration(){var e={i:0,s:0,o:0},t=this.attribute,i=t.animation,a=t.aeA,n=t.stayEffect,r=t.endTime,o=t.startTime;return this.isAea?a&&dt.forEach((t=>{var i=a[t];i.kw&&i.pbr&&(i.kw.isText?e[t]=ct/i.pbr:e[t]=bt(i.kw,i.pbr))})):i&&ut.forEach((t=>{var n=i[t];if(n&&n.baseId>0&&n.duration){var r,o=pt[t];e[o]=n.duration,null!==a&&void 0!==a&&null!==(r=a[o])&&void 0!==r&&r.pbr&&(e[o]*=a[o].pbr)}})),n&&(e.s=r-o),e}get previewFrame(){if(ti(this)){var e=-1;return this.assets.forEach((t=>{var i=t.attribute.startTime;(-1===e||i>e)&&(e=i+10)})),e}return this.attribute.startTime}get minAssetDuration(){if(ti(this)){var e;this.assets.forEach((t=>{(!e||t.minAssetDuration<e.minAssetDuration)&&(e=t)}));var t=e.assetDuration.startTime-this.attribute.startTime,i=this.attribute.endTime-e.assetDuration.endTime;return e.minAssetDuration+t+i}var a=this.animationItemDuration,n=a.o,r=a.i;return 100+n+r}get fontFamily(){var e=this.attribute.fontFamily;return e?$(e):""}get fontSizeScale(){var e=this.attribute.fontSize;return e?e/Lt:1}get assetDuration(){var e=this.attribute,t=e.startTime,i=e.endTime,a=this.animationItemDuration,n=a.i,r=a.o;return this.isAea?{startTime:t-n,endTime:i+r}:{startTime:t-n,endTime:i}}get videoClip(){var e=ai(this)&&this.assets[0]?this.assets[0]:this;if(si(e)){var t=this.assetDuration,i=t.startTime,a=t.endTime,n=e.attribute.rt_total_time,r=e.attribute,o=r.cst,s=void 0===o?0:o,l=r.cet,c=void 0===l?Math.min(a-i,n):l;return{cst:s,cet:c,totalTime:n}}return{cst:0,cet:0}}get assetDurationWithOffset(){if(this.template){var e=this.assetDuration,t=e.startTime,i=e.endTime,a=this.template.videoInfo,r=a.pageTime,o=a.offsetTime;o=void 0===o?[0,0]:o;var s=(0,n.Z)(o,2),l=s[0],c=s[1];t<l&&(t=l);var d=r-c;return i>d&&(i=d),{startTime:t-l,endTime:i-l}}return this.assetDuration}constructor(e,t){(0,l.Z)(this,"asset",Va,this),(0,l.Z)(this,"id",Ua,this),(0,l.Z)(this,"auxiliary",Ga,this),(0,l.Z)(this,"assets",Xa,this),(0,l.Z)(this,"parent",qa,this),(0,l.Z)(this,"tempData",Ha,this),(0,l.Z)(this,"template",Ya,this),this._autoRunAuxiliary=()=>{(0,s.EH)((()=>{ti(this.parent)||ai(this.parent)||this.autoUpdateAuxiliary()}),{delay:100})},this.autoUpdateAuxiliary=()=>{if(this){var e=this.assetTransform.rotate;this.setAuxiliary(st(this.containerSizeScale,Ct(this.assetPositionScale),e))}},this._reactionClearRtRelativeByParent=()=>{(0,s.U5)((()=>this.parent),(e=>{e||this.setRtRelativeByParent()}))},(0,l.Z)(this,"buildAssets",Ka,this),(0,l.Z)(this,"setChildren",Qa,this),(0,l.Z)(this,"setParent",Ja,this),(0,l.Z)(this,"replaceChild",$a,this),(0,l.Z)(this,"replaceAssetSelf",en,this),(0,l.Z)(this,"restore",tn,this),(0,l.Z)(this,"setAuxiliary",an,this),(0,l.Z)(this,"setTempData",nn,this),this.scaleSvgPath=(e,t,i)=>{e&&e.forEach((e=>{var a=e.start,n=e.startControl,r=e.end,o=e.endControl;e.start=[a[0]*t,a[1]*i],e.end=[r[0]*t,r[1]*i],n&&(e.startControl=[n[0]*t,n[1]*i]),o&&(e.endControl=[o[0]*t,o[1]*i])}))},(0,l.Z)(this,"update",rn,this),(0,l.Z)(this,"updateContainer",on,this),(0,l.Z)(this,"updateAeaItem",sn,this),(0,l.Z)(this,"autoUpdateAssetTime",ln,this),this.autoCalcChildrenStyle=()=>{if(this.assets.length){var e,t=this.transform.rotate,i=void 0===t?0:t,a=i%360>0;a&&(e=fn((0,u.Z)((0,u.Z)({},this.assetSize),this.assetPosition)));var n=(0,u.Z)({},this.assetSize);this.assets.forEach((t=>{var i=t.tempData,a=i.rt_relativeSizeRatio,r=void 0===a?{width:1,height:1}:a,o=i.rt_relativeFontSizeRatio,s=void 0===o?1:o,l=i.rt_relativeLetterSpacingRatio,c=void 0===l?1:l,d={attribute:ft(n,r),transform:{}};if(t.attribute.fontSize&&(d.attribute.fontSize=n.width*s),t.attribute.letterSpacing&&(d.attribute.letterSpacing=n.width*c),ii(this)){var u=Nn(t,this,e);Object.assign(d.transform,u)}else{var p=Sn(t,this);Object.assign(d.transform,p)}t.update(d)}))}},this.setRtRelativeByParent=()=>{var e={};if(this.parent){var t=this.parent,i=t.assetPosition,a=t.containerSize;ii(this.parent)?e.rt_relative=(0,u.Z)((0,u.Z)({},this.transform),{},{posX:(this.assetPosition.left-i.left)/a.width,posY:(this.assetPosition.top-i.top)/a.height}):e.rt_relative=(0,u.Z)((0,u.Z)({},this.transform),{},{posX:this.assetPosition.left/a.width,posY:this.assetPosition.top/a.height}),e.rt_relativeSizeRatio=ht(this.parent.assetSize,this.containerSize),e.rt_relativeFontSizeRatio=(this.attribute.fontSize||0)/this.parent.assetSize.width,e.rt_relativeLetterSpacingRatio=(this.attribute.letterSpacing||0)/this.parent.assetSize.width}else e.rt_relativeSizeRatio=void 0,e.rt_relativeFontSizeRatio=void 0,e.rt_relativeLetterSpacingRatio=void 0,e.rt_relative=void 0;this.setTempData(e)},(0,l.Z)(this,"setModuleStyleByChildren",cn,this),this.getAssetCloned=()=>{var e=(0,u.Z)({},A(this.asset));return this.assets.length?e.assets=this.assets.map((e=>e.getAssetCloned())):delete e.assets,e},this.getAssetClonedWithRender=()=>{var e=this.asset,t=this.assetSize,i=this.containerSize,a=this.containerSizeScale,n=this.assetSizeScale,r=this.assetPosition,o=this.animationItemPbr,s=this.animationItemDuration,l=this.fontFamily,c=this.fontSizeScale,d=this.assetDuration,p=this.isAea,v=this.id,m=this.assetTransform,h=A((0,u.Z)((0,u.Z)({},e),{},{id:v,isAea:p,assetTransform:m,assetSize:t,containerSize:i,containerSizeScale:a,assetSizeScale:n,assetPosition:r,animationItemPbr:o,animationItemDuration:s,fontFamily:l,fontSizeScale:c,assetDuration:d}));return this.assets.length?h.assets=this.assets.map((e=>e.getAssetClonedWithRender())):delete h.assets,h},(0,l.Z)(this,"deletePreviewAEAKw",dn,this),this.replaceContainerSVG=e=>{this.updateContainer({rt_svgString:e})},this.setContainerViewBox=e=>{var t=this.attribute.container,i={viewBoxWidth:t.width,viewBoxHeight:t.height,viewBoxWidthBack:parseInt(e.width,10),viewBoxHeightBack:parseInt(e.height,10)};(0,qe.Z)((0,u.Z)((0,u.Z)({},t),i),t)||this.updateContainer({viewBoxWidth:t.width,viewBoxHeight:t.height,viewBoxWidthBack:parseInt(e.width,10),viewBoxHeightBack:parseInt(e.height,10)}),(0,qe.Z)(this.attribute.viewBox,e)||this.update(Ft({viewBox:e}))},this.setContainerViewBoxInClip=()=>{var e=this.attribute.container;this.updateContainer({viewBoxWidth:e.width,viewBoxHeight:e.height,viewBoxWidthBack:e.viewBoxWidth,viewBoxHeightBack:e.viewBoxHeight})},this.setTextEditor=e=>{var t=Ft({textEditor:[e]});this.update(t)},this.replaceSVG=e=>{var t=this.asset;if((null===t||void 0===t?void 0:t.attribute.picUrl)!==e){var i=Ft({picUrl:e});this.update(i)}},this.setSVGViewBox=e=>{var t,i=null!==(t=this.asset)&&void 0!==t?t:{},a=i.attribute;if(a&&!(0,qe.Z)(a.viewBox,e)){var n=Ft({viewBox:e});this.update(n)}},this.setSVGString=e=>{var t,i=null!==(t=this.asset)&&void 0!==t?t:{},a=i.attribute;if(a&&!(0,qe.Z)(a.picUrl,e)){var n=Ft({rt_svgString:e});this.update(n)}},this.setSVGColors=e=>{var t,i=null!==(t=this.asset)&&void 0!==t?t:{},a=i.attribute;if(a&&!(0,qe.Z)(a.colors,e)){var n=Ft({colors:e});this.update(n)}},this.setSVGStrokes=e=>{var t,i=null!==(t=this.asset)&&void 0!==t?t:{},a=i.attribute;if(a&&!(0,qe.Z)(a.svgStrokes,e)){var n=Ft({svgStrokes:e});this.update(n)}},this.setSVGStretch=e=>{var t,i=null!==(t=this.asset)&&void 0!==t?t:{},a=i.attribute;if(a&&!(0,qe.Z)(a.svgStretch,e)){var n=Ft({svgStretch:e});this.update(n)}},this.replaceAssetSelf(e),this.parent=t,this._autoRunAuxiliary(),this._reactionClearRtRelativeByParent(),(0,s.rC)(this)}setTemplatePoint(e){this.template!==e&&(this.template=e)}setSVGRtAttribute(e){var t,i=null!==(t=this.tempData)&&void 0!==t?t:{},a=i.rt_attribute;e&&((0,qe.Z)(a,e)||this.update({rt_attribute:e}))}updateAssetChildrenDuration(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,0],a=(0,n.Z)(i,2),r=a[0],o=(a[1],this.assetDuration),s=this.assets,l={startTime:e.startTime+r,endTime:e.endTime+r},c=St(e)/St(t);s.forEach((t=>{var i=t.assetDuration,a=i.startTime,n=void 0===a?0:a,r=i.endTime,s=void 0===r?0:r,d=(n-o.startTime)*c,u=(o.endTime-s)*c,p=t.animationItemDuration,v=p.i,m=p.o,h={startTime:l.startTime+v+d,endTime:l.endTime-m-u};if(ai(t)){var f=t.assets[0];f.update({attribute:e})}t.update({attribute:h})}))}updateAssetDuration(e){var t,i,a,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0],o=(0,n.Z)(r,1),s=o[0],l=this.animationItemDuration,c=this.assetDuration,d={startTime:e.startTime+s,endTime:e.endTime+s},p=l.i,v=l.o;if(this.isAea?(d.startTime+=p,d.endTime-=v):d.startTime+=p,ti(this))this.updateAssetChildrenDuration(e,c,r);else if(ai(this)&&this.assets.length){var m=this.assets[0];m.update({attribute:(0,u.Z)((0,u.Z)({},e),{},{aeA:void 0,animation:void 0})})}null!==(t=this.attribute)&&void 0!==t&&t.stayEffect&&this.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===(i=this.attribute)||void 0===i?void 0:i.stayEffect),{},{duration:Math.min(d.endTime-d.startTime,null===(a=this.attribute)||void 0===a?void 0:a.stayEffect.duration)})}));this.update({attribute:d})}setAssetDuration(e){var t=ai(this)&&this.assets.length?this.assets[0]:this,i=(0,n.Z)(e,2),a=i[0],r=i[1],o=this.assetDuration,s=o.startTime,l=o.endTime;s+=a,l+=r;var c=si(t);if(c){var d=t.attribute.cst,u=void 0===d?0:d;u+=a,t.update({attribute:{cst:u,cet:u+(l-s)}})}this.updateAssetDuration({startTime:s,endTime:l})}},Va=(0,c.Z)(Wa.prototype,"asset",[s.LO,Di],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ua=(0,c.Z)(Wa.prototype,"id",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ji()}}),Ga=(0,c.Z)(Wa.prototype,"auxiliary",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vt()}}),Xa=(0,c.Z)(Wa.prototype,"assets",[Ri,zi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),qa=(0,c.Z)(Wa.prototype,"parent",[s.LO,Fi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ha=(0,c.Z)(Wa.prototype,"tempData",[Oi,Bi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{rt_itemScale:1,rt_loading:!1}}}),Ya=(0,c.Z)(Wa.prototype,"template",[Wi,Vi],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),(0,c.Z)(Wa.prototype,"attribute",[s.Fl,Ui,Gi],Object.getOwnPropertyDescriptor(Wa.prototype,"attribute"),Wa.prototype),(0,c.Z)(Wa.prototype,"transform",[s.Fl,Xi,qi],Object.getOwnPropertyDescriptor(Wa.prototype,"transform"),Wa.prototype),(0,c.Z)(Wa.prototype,"meta",[s.Fl,Hi,Yi],Object.getOwnPropertyDescriptor(Wa.prototype,"meta"),Wa.prototype),(0,c.Z)(Wa.prototype,"isAllAnimation",[s.Fl,Ki,Qi],Object.getOwnPropertyDescriptor(Wa.prototype,"isAllAnimation"),Wa.prototype),(0,c.Z)(Wa.prototype,"isAea",[s.Fl,Ji,$i],Object.getOwnPropertyDescriptor(Wa.prototype,"isAea"),Wa.prototype),(0,c.Z)(Wa.prototype,"isAeaText",[s.Fl,ea,ta],Object.getOwnPropertyDescriptor(Wa.prototype,"isAeaText"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetTransform",[s.Fl,ia,aa],Object.getOwnPropertyDescriptor(Wa.prototype,"assetTransform"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetPosition",[s.Fl,na,ra],Object.getOwnPropertyDescriptor(Wa.prototype,"assetPosition"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetAbsolutePosition",[s.Fl,oa,sa],Object.getOwnPropertyDescriptor(Wa.prototype,"assetAbsolutePosition"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetAbsolutePositionScale",[s.Fl,la,ca],Object.getOwnPropertyDescriptor(Wa.prototype,"assetAbsolutePositionScale"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetPositionScale",[s.Fl,da,ua],Object.getOwnPropertyDescriptor(Wa.prototype,"assetPositionScale"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetSize",[s.Fl,pa,va],Object.getOwnPropertyDescriptor(Wa.prototype,"assetSize"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetSizeScale",[s.Fl,ma,ha],Object.getOwnPropertyDescriptor(Wa.prototype,"assetSizeScale"),Wa.prototype),(0,c.Z)(Wa.prototype,"containerSize",[s.Fl,fa,ga],Object.getOwnPropertyDescriptor(Wa.prototype,"containerSize"),Wa.prototype),(0,c.Z)(Wa.prototype,"containerSizeScale",[s.Fl,xa,ya],Object.getOwnPropertyDescriptor(Wa.prototype,"containerSizeScale"),Wa.prototype),(0,c.Z)(Wa.prototype,"animationItemPbr",[s.Fl,ba,_a],Object.getOwnPropertyDescriptor(Wa.prototype,"animationItemPbr"),Wa.prototype),(0,c.Z)(Wa.prototype,"animationItemPbrWithRealData",[s.Fl,ja,wa],Object.getOwnPropertyDescriptor(Wa.prototype,"animationItemPbrWithRealData"),Wa.prototype),(0,c.Z)(Wa.prototype,"animationItemDuration",[s.Fl,ka,Ta],Object.getOwnPropertyDescriptor(Wa.prototype,"animationItemDuration"),Wa.prototype),(0,c.Z)(Wa.prototype,"previewFrame",[s.Fl,Za,Ca],Object.getOwnPropertyDescriptor(Wa.prototype,"previewFrame"),Wa.prototype),(0,c.Z)(Wa.prototype,"minAssetDuration",[s.Fl,Na,Sa],Object.getOwnPropertyDescriptor(Wa.prototype,"minAssetDuration"),Wa.prototype),(0,c.Z)(Wa.prototype,"fontFamily",[s.Fl,Ia,Aa],Object.getOwnPropertyDescriptor(Wa.prototype,"fontFamily"),Wa.prototype),(0,c.Z)(Wa.prototype,"fontSizeScale",[s.Fl,Pa,Ma],Object.getOwnPropertyDescriptor(Wa.prototype,"fontSizeScale"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetDuration",[s.Fl,Ea,La],Object.getOwnPropertyDescriptor(Wa.prototype,"assetDuration"),Wa.prototype),(0,c.Z)(Wa.prototype,"videoClip",[s.Fl,Da,Ra],Object.getOwnPropertyDescriptor(Wa.prototype,"videoClip"),Wa.prototype),(0,c.Z)(Wa.prototype,"assetDurationWithOffset",[s.Fl,za,Fa],Object.getOwnPropertyDescriptor(Wa.prototype,"assetDurationWithOffset"),Wa.prototype),Ka=(0,c.Z)(Wa.prototype,"buildAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.assets.replace(Gt(t,e)),Ut(e.assets),i&&(ti(e)||ai(e))){var a=e.assetDuration,n=a.startTime,r=a.endTime;e.assets.forEach((t=>{ai(e)&&(t.attribute.startTime!==n||t.attribute.endTime)&&t.update(Ft({startTime:n,endTime:r})),t.setRtRelativeByParent()}))}}}}),(0,c.Z)(Wa.prototype,"setTemplatePoint",[s.aD,Oa,Ba],Object.getOwnPropertyDescriptor(Wa.prototype,"setTemplatePoint"),Wa.prototype),Qa=(0,c.Z)(Wa.prototype,"setChildren",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.assets.replace(t),i&&t.forEach((t=>{t.setParent(e),(ti(e)||ai(e))&&t.setRtRelativeByParent()}))}}}),Ja=(0,c.Z)(Wa.prototype,"setParent",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.parent=e}}}),$a=(0,c.Z)(Wa.prototype,"replaceChild",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.assets.splice(t,1,new Pn(e,this))}}}),en=(0,c.Z)(Wa.prototype,"replaceAssetSelf",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.meta,i=e.attribute,a=e.transform;this.asset={meta:(0,u.Z)((0,u.Z)({},t),{},{id:this.id}),attribute:i,transform:a,assets:[]},ai(this.parent)&&this.setRtRelativeByParent(),this.autoUpdateAuxiliary(),e.assets&&e.assets.length?this.buildAssets(e.assets,!0):this.assets.clear()}}}),tn=(0,c.Z)(Wa.prototype,"restore",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.meta,i=e.transform,a=e.attribute,n=e.assets,r=void 0===n?[]:n;Object.assign(this.asset,{meta:A(t),transform:A(i),attribute:A(a)});var o=[];r.forEach((e=>{var t=this.assets.find((t=>t.id===e.id));if(t)t.restore(e),o.push(t);else{var i=new Pn({meta:A(e.meta),transform:A(e.transform),attribute:A(e.attribute),assets:e.assets},this);o.push(i)}})),o.length&&this.assets.replace(o)}}}),an=(0,c.Z)(Wa.prototype,"setAuxiliary",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.auxiliary=e}}}),nn=(0,c.Z)(Wa.prototype,"setTempData",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.tempData,e)}}}),rn=(0,c.Z)(Wa.prototype,"update",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],a=e.asset,n=a.attribute,r=n.svgInfo,o=n.width,s=n.height,l=null===r||void 0===r?void 0:r.pathItems;t.tempData&&Object.assign(e.tempData,t.tempData),t.meta&&Object.assign(a.meta,t.meta),t.attribute&&((t.attribute.width||t.attribute.height)&&e.scaleSvgPath(l,(t.attribute.width||o)/o,(t.attribute.height||s)/s),t.attribute.width&&(t.attribute.width=At(t.attribute.width)),t.attribute.height&&(t.attribute.height=At(t.attribute.height)),t.attribute.fontSize&&(t.attribute.fontSize=At(t.attribute.fontSize)),Object.assign(a.attribute,t.attribute)),t.transform&&(t.transform.posX&&(t.transform.posX=At(t.transform.posX)),t.transform.posY&&(t.transform.posY=At(t.transform.posY)),Object.assign(a.transform,t.transform)),i&&(t.attribute||t.transform)&&e.autoCalcChildrenStyle()}}}),on=(0,c.Z)(Wa.prototype,"updateContainer",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.attribute.container;t&&(this.asset.attribute.container=(0,u.Z)((0,u.Z)({},t),e))}}}),sn=(0,c.Z)(Wa.prototype,"updateAeaItem",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=(0,u.Z)({},this.assetDuration);this.attribute.animation&&(this.attribute.animation=void 0),this.attribute.kw&&(this.attribute.kw=void 0),this.attribute.stayEffect&&(this.attribute.stayEffect=void 0),this.attribute.aeA||(this.attribute.aeA=mt());var i=this.attribute.aeA;e.forEach((e=>{var t=e.key,a=e.data;null!==i&&void 0!==i&&i[t]&&(i[t]=a)})),this.autoUpdateAssetTime(t)}}}),ln=(0,c.Z)(Wa.prototype,"autoUpdateAssetTime",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.startTime,i=e.endTime,a=this.animationItemDuration,n=a.i,r=a.o,o=t+n,s=i-r;s-o<100&&(s=o+100),Object.assign(this.attribute,{startTime:o,endTime:s});var l=s-o;this.attribute.stayEffect&&l<this.attribute.stayEffect.duration&&Object.assign(this.attribute,{stayEffect:(0,u.Z)((0,u.Z)({},this.attribute.stayEffect),{},{duration:s-o})})}}}),cn=(0,c.Z)(Wa.prototype,"setModuleStyleByChildren",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e=Xt(this.assets),t=e.width,i=e.height,a=e.left,n=e.top,r=e.zIndex,o=e.assetTime;Object.assign(this.asset.attribute,(0,u.Z)({width:t,height:i},o)),Object.assign(this.asset.transform,{posX:a,posY:n,rotate:0,zindex:r})}}}),dn=(0,c.Z)(Wa.prototype,"deletePreviewAEAKw",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.asset.attribute.rt_previewAeA=void 0}}}),Wa);function Mn(e){return e.map((e=>e.getTemplateCloned()))}function En(e){return e.map((e=>e.getTemplateClonedWithRender()))}function Ln(e){var t=e.pageAttr,i=t.pageInfo,a=i.pageTime,n=void 0===a?0:a,r=i.baseTime;return(0,u.Z)((0,u.Z)({},e),{},{pageAttr:(0,u.Z)((0,u.Z)({},e.pageAttr),{},{pageInfo:(0,u.Z)((0,u.Z)({},i),{},{gifInfo:void 0,pageTime:n,baseTime:r||n}),sound:{list:[]}}),templateId:e.templateId,BGMIndex:0})}function Dn(e){var t,i=e.meta,a=e.transform,n=e.attribute,r=n.width,o=n.height,l=n.container,c=n.startTime,d=n.endTime,p=n.aeA,v=n.kw,m=n.animation,h=n.stayEffect,f=n.dropShadow,g={meta:{locked:!1,index:i.index,name:"",group:"",type:"mask",isQuickEditor:null!==(t=e.meta.isQuickEditor)&&void 0!==t&&t,isClip:!1},attribute:{width:r,height:o,startTime:c,endTime:d,aeA:p,kw:v,animation:m,stayEffect:h,dropShadow:f,assetHeight:0,assetWidth:0,opacity:100,resId:"25653871",SVGUrl:"",source_key:"https://xiudodo.com/api/asset/25653871/923FCA8AC21565C9243124",rt_svgString:Dt},transform:(0,u.Z)((0,u.Z)({},a),{},{horizontalFlip:!1,verticalFlip:!1}),assets:[]};if(l&&(l.rt_svgString?g.attribute.rt_svgString=l.rt_svgString:(0,s.z)((()=>{var e="";id(l.source_key).then((t=>{e=t})),e=F(e),g.attribute.rt_svgString=e})),g.meta.isClip=!0,g.attribute.source_key=l.source_key,g.attribute.resId=l.id,g.attribute.width=l.width,g.attribute.height=l.height),a.rotate%360>0){var x=fn({width:r,height:o,left:a.posX,top:a.posY}),y=fn({width:r,height:o,left:a.posX,top:a.posY}),b=Tn({x:a.posX,y:a.posY},x,a.rotate),_=Tn(y,x,a.rotate),j=Tn(b,_,-a.rotate);g.transform.posX=j.x,g.transform.posY=j.y}return g}function Rn(e){var t=Dn(e),i=e.attribute.container||{},a=i.posX,n=void 0===a?0:a,r=i.posY,o=void 0===r?0:r,s=i.width,l=void 0===s?0:s,c=i.height,d=void 0===c?0:c,p=e.attribute||{},v=p.width,m=void 0===v?0:v,h=p.height,f=void 0===h?0:h,g=e.transform||{},x=g.horizontalFlip,y=void 0!==x&&x,b=g.verticalFlip,_=void 0!==b&&b,j=n,w=o;if(y){var k=m-l-Math.abs(n);j=-k}if(_){var T=f-d-Math.abs(o);w=-T}var Z=(0,u.Z)((0,u.Z)({},e),{},{attribute:(0,u.Z)((0,u.Z)({},e.attribute),{},{container:void 0,aeA:void 0,animation:void 0,kw:void 0}),transform:(0,u.Z)((0,u.Z)({},e.transform),{},{posX:j,posY:w,rotate:0})});return t.assets=[Z],t}function zn(e,t){var i=t.width,a=t.height,n=e.containerSize,r=i/a,o=n.width,s=n.width,l=n.width>n.height?n.width:n.height;return i>=a?(o=l,s=l*r):(o=l/r,s=l),{width:s,height:o}}function Fn(e){if(e&&ai(e)){var t=e.assets,i=void 0===t?[]:t,a=e.transform;if((null===i||void 0===i?void 0:i.length)>0){var n=i[0].transform;n.posX>0&&n.posY>0&&Object.assign(i[0].transform,(0,u.Z)((0,u.Z)({},n),{},{posX:n.posX-a.posX,posY:n.posY-a.posY}))}}return e}function On(e){var t=e.width,i=e.height;return t>=i?{type:"width",value:t}:{type:"height",value:i}}function Bn(e,t,i,a){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=On(e),s=On(t),l=e.width/e.height;return"width"===o.type?(e.width=s.value,e.height=s.value/l):(e.height=s.value,e.width=s.value*l),e.height>a&&(e.height=a,e.width=e.height*l),e.width>i&&(e.width=i,e.height=e.width/l),e.height<r&&(e.height=r,e.width=e.height*l),e.width<n&&(e.width=n,e.height=e.width/l),e}function Wn(e){var t,i;if(!g.includes(e.meta.type)||null!==e&&void 0!==e&&e.meta.isBackground||null!==e&&void 0!==e&&e.parent)return e;var a=Dn(e.getAssetCloned()),n=new Pn((0,u.Z)((0,u.Z)({},a),{},{assets:[]}));return e.update({attribute:{aeA:void 0,animation:void 0,container:void 0},transform:{posX:0,posY:0,rotate:0}}),n.update({meta:{isClip:!0}}),n.setChildren([e]),e.setRtRelativeByParent(),null===(t=e.template)||void 0===t||t.removeAsset(e.meta.id),null===(i=e.template)||void 0===i||i.addAssets([n]),Nl.setEditActive(n),n}(function(e){function t(e,t,i){var a=0,n=e;return e+i<=t?i<0&&(a=-i,n=e+i):i>=0?n=t-i:(a=-i,n=t),{skew:a,size:n}}function i(e,t){var i=e.attribute,a=Number(t.source_width),n=Number(t.source_height),r=i.width,o=i.height,s=(i.container,r),l=o;return a>n?l=s/(a/n):s=l/(n/a),{width:s,height:l,posX:0,posY:0}}e.calcSizePosition=t,e.replaceSvgSize=i})(In||(In={})),function(e){function t(e){var t=[];e.forEach(((e,i)=>{for(var a in e)["top","left","strokeWidth","shadowH","shadowV","shadowBlur"].includes(a)&&0!=e[a]&&t.push({sizes:[{index:i,key:a}],range:{min:e[a]/10,max:2*e[a]}})}))}function i(e){var t=[];for(var i in e){var a=i.split(",");t.push(Object.assign(e[i],{colorBlock:{r:a[0],g:a[1],b:a[2],a:a[3]}}))}return t}function a(e){var t={};return null===e||void 0===e||e.layers.forEach(((e,i)=>{for(var a in e){var n=e[a];if(("color"===a||"strokeColor"===a||"shadowColor"===a)&&n.a&&n.a>0){var r="".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a);t[r]||(t[r]={},t[r].colors=[]),t[r].colors.push({index:i,key:a})}}})),i(t)}e.filterVariableSize=t,e.resetColorBlock=i,e.filterFontEffectColor=a}(An||(An={}));var Vn,Un,Gn,Xn,qn;function Hn(e,t){return{widthScale:e.width/t.width,heightScale:e.height/t.height}}function Yn(e,t){var i=t.width*e.widthScale,a=t.height*e.heightScale;return{width:i,height:a}}function Kn(){var e={meta:{type:"__module",index:-1,id:-1,isQuickEditor:!1,isAlwaysVisible:!0},attribute:{width:0,height:0,startTime:0,endTime:0},transform:{posX:0,posY:0,zindex:-1,rotate:0}};return e}function Qn(e){var t={meta:{type:"module",index:-1,id:-1,isQuickEditor:!1},attribute:{width:0,height:0,startTime:0,endTime:0},transform:{posX:0,posY:0,zindex:-1,rotate:0}};return e&&(t.transform=(0,u.Z)({},e.transform),t.attribute=(0,u.Z)({},e.attribute)),t}function Jn(){return new Pn(Kn())}var $n,er,tr,ir,ar,nr,rr,or,sr,lr,cr,dr,ur,pr,vr,mr,hr,fr,gr,xr,yr,br,_r,jr,wr,kr,Tr,Zr,Cr,Nr,Sr,Ir,Ar,Pr,Mr,Er,Lr,Dr,Rr,zr,Fr,Or,Br,Wr,Vr,Ur,Gr,Xr,qr,Hr,Yr,Kr,Qr,Jr,$r,eo,to,io,ao,no,ro,oo,so,lo,co,uo,po,vo,mo,ho,fo,go,xo,yo,bo,_o,jo,wo,ko,To,Zo,Co,No,So,Io,Ao,Po,Mo,Eo,Lo,Do,Ro,zo,Fo,Oo,Bo,Wo,Vo,Uo,Go,Xo,qo,Ho,Yo,Ko,Qo,Jo,$o,es,ts,is,as,ns,rs,os,ss,ls,cs,ds,us,ps,vs,ms,hs,fs,gs,xs,ys,bs,_s,js,ws,ks,Ts,Zs,Cs,Ns,Ss,Is,As,Ps,Ms,Es,Ls,Ds,Rs,zs,Fs,Os,Bs,Ws,Vs,Us,Gs,Xs,qs,Hs,Ys,Ks,Qs,Js,$s,el,tl,il,al,nl,rl,ol,sl,ll,cl,dl,ul,pl,vl,ml,hl,fl,gl,xl,yl,bl,_l,jl,wl=(Vn=Reflect.metadata("design:type","undefined"===typeof He.Camera?Object:He.Camera),Un=class{constructor(e){(0,l.Z)(this,"id",Gn,this),(0,l.Z)(this,"camera",Xn,this),(0,l.Z)(this,"update",qn,this),this.getCameraCloned=()=>{var e=(0,u.Z)({},A(this.camera));return e},this.camera=e,(0,s.rC)(this)}},Gn=(0,c.Z)(Un.prototype,"id",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ji()}}),Xn=(0,c.Z)(Un.prototype,"camera",[s.LO,Vn],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qn=(0,c.Z)(Un.prototype,"update",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.camera;Object.assign(t,e)}}}),Un),kl=($n=s.LO.shallow,er=Reflect.metadata("design:type","undefined"===typeof IObservableArray?Object:IObservableArray),tr=s.LO.shallow,ir=Reflect.metadata("design:type","undefined"===typeof Set?Object:Set),ar=s.LO.shallow,nr=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),rr=Reflect.metadata("design:type","undefined"===typeof He.RawTemplateData?Object:He.RawTemplateData),or=Reflect.metadata("design:type","undefined"===typeof IObservableArray?Object:IObservableArray),sr=Reflect.metadata("design:type",Function),lr=Reflect.metadata("design:paramtypes",[]),cr=Reflect.metadata("design:type",Function),dr=Reflect.metadata("design:paramtypes",[]),ur=Reflect.metadata("design:type",Function),pr=Reflect.metadata("design:paramtypes",[]),vr=Reflect.metadata("design:type",Function),mr=Reflect.metadata("design:paramtypes",[]),hr=Reflect.metadata("design:type",Function),fr=Reflect.metadata("design:paramtypes",[]),gr=Reflect.metadata("design:type",Function),xr=Reflect.metadata("design:paramtypes",[]),yr=Reflect.metadata("design:type",Function),br=Reflect.metadata("design:paramtypes",[]),_r=Reflect.metadata("design:type",Function),jr=Reflect.metadata("design:paramtypes",[]),wr=Reflect.metadata("design:type",Function),kr=Reflect.metadata("design:paramtypes",[]),Tr=Reflect.metadata("design:type",Function),Zr=Reflect.metadata("design:paramtypes",[]),Cr=Reflect.metadata("design:type",Function),Nr=Reflect.metadata("design:paramtypes",[]),Sr=Reflect.metadata("design:type",Function),Ir=Reflect.metadata("design:paramtypes",[]),Ar=Reflect.metadata("design:type",Function),Pr=Reflect.metadata("design:paramtypes",[]),Mr=Reflect.metadata("design:type",Function),Er=Reflect.metadata("design:paramtypes",[]),Lr=Reflect.metadata("design:type",Function),Dr=Reflect.metadata("design:paramtypes",[]),Rr=class{get assetList(){return[this.tempModule,...this.assets]}get pageAttr(){return this.template.pageAttr}get zIndex(){var e=0,t=0;return this.assets.forEach(((i,a)=>{if(!i.meta.isLogo){var n=i.transform.zindex;1===this.assets.length?(e=n,t=n):i.meta.isBackground||(e||t||(e=n,t=n),i.transform.zindex>e&&(e=n),i.transform.zindex<t&&(t=n))}})),{max:e,min:t}}get minZIndex(){return this.zIndex.min}get maxZIndex(){return this.zIndex.max}get background(){var e=this.template.pageAttr,t=e.backgroundColor,i=e.backgroundImage;return{backgroundColor:t,backgroundImage:i}}get endTransfer(){return this.assets.find((e=>"after"===e.meta.transferLocation))}get validAssets(){return this.assets.filter(pi)}get startTransfer(){return this.assets.find((e=>"before"===e.meta.transferLocation))}get effectVideoE(){return this.assets.find((e=>e.meta.isOverlay))}get logo(){var e={text:void 0,image:void 0},t=this.assets.filter((e=>e.meta.isLogo));return t.forEach((t=>{"text"===t.meta.type?e.text=t:"image"===t.meta.type&&(e.image=t)})),e}get watermark(){var e={text:void 0,image:void 0},t=this.assets.filter((e=>e.meta.isWatermark));return t.forEach((t=>{"text"===t.meta.type?e.text=t:"image"===t.meta.type&&(e.image=t)})),e}get videoInfo(){var e=this.template.pageAttr,t=e.pageInfo,i=t.offsetTime,a=void 0===i?[0,0]:i,n=t.pageTime,r=void 0===n?0:n,o=t.baseTime,s=t.speed,l=void 0===s?1:s,c=kt(r,a);return{startTime:0,endTime:r,allAnimationTime:c,allAnimationTimeBySpeed:c*(1/l),speed:l,offsetTime:a,pageTime:r,baseTime:o||r}}get backgroundAsset(){return this.assets.find((e=>e.meta.isBackground))}get templateCameras(){var e=this.getTemplateCloned();return e.cameras}constructor(e){(0,l.Z)(this,"assets",zr,this),(0,l.Z)(this,"multiSelect",Fr,this),(0,l.Z)(this,"tempModule",Or,this),(0,l.Z)(this,"template",Br,this),(0,l.Z)(this,"cameras",Wr,this),this.id=ji(),this.getAssetIndexById=e=>void 0===e?-1:this.assets.findIndex((t=>t.id===e)),this.getTemplateCloned=()=>{var e=A(this.template);return e.assets=this.assets.map((e=>e.getAssetCloned())),e.cameras=this.cameras.map((e=>e.getCameraCloned())),e},this.getTemplateClonedWithRender=()=>{var e=A(this.template);return e.id=this.id,e.videoInfo=A(this.videoInfo),e.assets=this.assets.map((e=>e.getAssetClonedWithRender())),e.cameras=this.cameras.map((e=>e.getCameraCloned())),e},this._reactionMultiSelectToTempModuleChildren=()=>{(0,s.U5)((()=>this.multiSelect.size),(e=>{this.tempModule&&(this.tempModule.setChildren(Array.from(this.multiSelect)),this.tempModule.setModuleStyleByChildren())}))},this.buildAssets=e=>{var t=Gt(e);Ut(t),(0,s.z)((()=>{this.assets.replace(t)})),this.checkAssetsTemplate()},this.buildCameras=e=>{e.forEach((e=>{this.cameras.push(new wl(e))}))},(0,l.Z)(this,"addMultiSelect",Vr,this),(0,l.Z)(this,"replaceSelf",Ur,this),(0,l.Z)(this,"restore",Gr,this),(0,l.Z)(this,"setMultiSelect",Xr,this),(0,l.Z)(this,"removeMultiSelect",qr,this),(0,l.Z)(this,"clearMultiSelect",Hr,this),(0,l.Z)(this,"addAsset",Yr,this),(0,l.Z)(this,"addAssets",Kr,this),(0,l.Z)(this,"replaceAsset",Qr,this),(0,l.Z)(this,"replaceAssetClass",Jr,this),(0,l.Z)(this,"replaceAssetClasses",$r,this),(0,l.Z)(this,"removeAsset",eo,this),(0,l.Z)(this,"autoRemoveAsset",to,this),(0,l.Z)(this,"updateTemplate",io,this),(0,l.Z)(this,"updatePageInfo",ao,this),(0,l.Z)(this,"updateBackgroundColor",no,this),(0,l.Z)(this,"updateBackgroundImage",ro,this),(0,l.Z)(this,"addCamera",oo,this),(0,l.Z)(this,"addCameraPre",so,this),(0,l.Z)(this,"removeCamera",lo,this),(0,l.Z)(this,"removeAllCamera",co,this),this.replaceSelf(e),this._reactionMultiSelectToTempModuleChildren(),(0,s.rC)(this)}checkAssetsTemplate(){this.assets.forEach((e=>{e.setTemplatePoint(this)}))}},zr=(0,c.Z)(Rr.prototype,"assets",[$n,er],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),Fr=(0,c.Z)(Rr.prototype,"multiSelect",[tr,ir],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),Or=(0,c.Z)(Rr.prototype,"tempModule",[ar,nr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Jn()}}),Br=(0,c.Z)(Rr.prototype,"template",[s.LO,rr],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Wr=(0,c.Z)(Rr.prototype,"cameras",[s.LO,or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),(0,c.Z)(Rr.prototype,"assetList",[s.Fl,sr,lr],Object.getOwnPropertyDescriptor(Rr.prototype,"assetList"),Rr.prototype),(0,c.Z)(Rr.prototype,"pageAttr",[s.Fl,cr,dr],Object.getOwnPropertyDescriptor(Rr.prototype,"pageAttr"),Rr.prototype),(0,c.Z)(Rr.prototype,"zIndex",[s.Fl,ur,pr],Object.getOwnPropertyDescriptor(Rr.prototype,"zIndex"),Rr.prototype),(0,c.Z)(Rr.prototype,"minZIndex",[s.Fl,vr,mr],Object.getOwnPropertyDescriptor(Rr.prototype,"minZIndex"),Rr.prototype),(0,c.Z)(Rr.prototype,"maxZIndex",[s.Fl,hr,fr],Object.getOwnPropertyDescriptor(Rr.prototype,"maxZIndex"),Rr.prototype),(0,c.Z)(Rr.prototype,"background",[s.Fl,gr,xr],Object.getOwnPropertyDescriptor(Rr.prototype,"background"),Rr.prototype),(0,c.Z)(Rr.prototype,"endTransfer",[s.Fl,yr,br],Object.getOwnPropertyDescriptor(Rr.prototype,"endTransfer"),Rr.prototype),(0,c.Z)(Rr.prototype,"validAssets",[s.Fl,_r,jr],Object.getOwnPropertyDescriptor(Rr.prototype,"validAssets"),Rr.prototype),(0,c.Z)(Rr.prototype,"startTransfer",[s.Fl,wr,kr],Object.getOwnPropertyDescriptor(Rr.prototype,"startTransfer"),Rr.prototype),(0,c.Z)(Rr.prototype,"effectVideoE",[s.Fl,Tr,Zr],Object.getOwnPropertyDescriptor(Rr.prototype,"effectVideoE"),Rr.prototype),(0,c.Z)(Rr.prototype,"logo",[s.Fl,Cr,Nr],Object.getOwnPropertyDescriptor(Rr.prototype,"logo"),Rr.prototype),(0,c.Z)(Rr.prototype,"watermark",[s.Fl,Sr,Ir],Object.getOwnPropertyDescriptor(Rr.prototype,"watermark"),Rr.prototype),(0,c.Z)(Rr.prototype,"videoInfo",[s.Fl,Ar,Pr],Object.getOwnPropertyDescriptor(Rr.prototype,"videoInfo"),Rr.prototype),(0,c.Z)(Rr.prototype,"backgroundAsset",[s.Fl,Mr,Er],Object.getOwnPropertyDescriptor(Rr.prototype,"backgroundAsset"),Rr.prototype),(0,c.Z)(Rr.prototype,"templateCameras",[s.Fl,Lr,Dr],Object.getOwnPropertyDescriptor(Rr.prototype,"templateCameras"),Rr.prototype),Vr=(0,c.Z)(Rr.prototype,"addMultiSelect",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];ii(t)||(e.multiSelect.add(t),i&&t.setParent(e.tempModule))}}}),Ur=(0,c.Z)(Rr.prototype,"replaceSelf",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.template=(0,u.Z)((0,u.Z)({},e),{},{assets:[]}),this.buildAssets(e.assets),this.buildCameras(e.cameras),this.checkAssetsTemplate()}}}),Gr=(0,c.Z)(Rr.prototype,"restore",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.template=A((0,u.Z)((0,u.Z)({},e),{},{assets:[]}));var t=[],i=e.assets,a=e.cameras;i.forEach((e=>{var i=this.assets.find((t=>t.id===e.id));if(i)i.restore(e),t.push(i);else{var a=e.transform,n=e.meta,r=e.attribute,o=e.assets,s=new Pn({meta:A(n),transform:A(a),attribute:A(r),assets:o});t.push(s)}}));var n=[];a.forEach((e=>{var t=new wl(e);n.push(t)})),this.cameras.replace(n),this.assets.replace(t),this.checkAssetsTemplate()}}}),Xr=(0,c.Z)(Rr.prototype,"setMultiSelect",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.multiSelect=new Set([...t]),i&&e.multiSelect.forEach((e=>{e.setParent(void 0)}))}}}),qr=(0,c.Z)(Rr.prototype,"removeMultiSelect",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.multiSelect.delete(t),i&&t.setParent(void 0)}}}),Hr=(0,c.Z)(Rr.prototype,"clearMultiSelect",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];t&&e.multiSelect.forEach((e=>{e.setParent(void 0)})),e.multiSelect.clear()}}}),Yr=(0,c.Z)(Rr.prototype,"addAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{if(this.assets){e.transform.zindex=this.zIndex.max+1;var i=new Pn(e);t&&(i=t(i)),this.assets.push(i);var a=this.assets.length-1;return this.checkAssetsTemplate(),this.assets[a]}}}}),Kr=(0,c.Z)(Rr.prototype,"addAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.assets.slice();this.assets.replace([...t,...e]),this.checkAssetsTemplate()}}}),Qr=(0,c.Z)(Rr.prototype,"replaceAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{t<0||this.assets&&(Object.assign(this.assets[t],new Pn(e)),this.checkAssetsTemplate())}}}),Jr=(0,c.Z)(Rr.prototype,"replaceAssetClass",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{t<0||this.assets&&(Object.assign(this.assets[t],e),this.checkAssetsTemplate())}}}),$r=(0,c.Z)(Rr.prototype,"replaceAssetClasses",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.assets&&(this.assets.replace(e),this.checkAssetsTemplate())}}}),eo=(0,c.Z)(Rr.prototype,"removeAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{if(this.assets){var t=this.getAssetIndexById(e),i=this.assets[t];t>-1&&(ii(i)?(this.multiSelect.forEach((e=>{this.removeAsset(e.id)})),this.clearMultiSelect()):this.assets.splice(t,1))}}}}),to=(0,c.Z)(Rr.prototype,"autoRemoveAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{if(this.assets){var t,i,a=-1;if(e===this.tempModule.id)t=this.tempModule;else a=this.getAssetIndexById(e),t=this.assets[a],null!==(i=t)&&void 0!==i&&i.parent&&(t=t.parent,a=this.getAssetIndexById(t.id));ii(t)?(this.multiSelect.forEach((e=>{this.removeAsset(e.id)})),this.clearMultiSelect()):a>-1&&this.assets.splice(a,1)}}}}),io=(0,c.Z)(Rr.prototype,"updateTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.template,e)}}}),ao=(0,c.Z)(Rr.prototype,"updatePageInfo",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.pageAttr.pageInfo,e)}}}),no=(0,c.Z)(Rr.prototype,"updateBackgroundColor",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.pageAttr.backgroundColor=e}}}),ro=(0,c.Z)(Rr.prototype,"updateBackgroundImage",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.pageAttr.backgroundImage=(0,u.Z)({},e)}}}),oo=(0,c.Z)(Rr.prototype,"addCamera",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(e.cameras){var a=new wl(t);-1!==i?e.cameras.splice(i+1,0,a):e.cameras.push(a);var n=e.cameras.length-1;return e.cameras[n]}}}}),so=(0,c.Z)(Rr.prototype,"addCameraPre",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{if(this.cameras){var t=new wl(e);return this.cameras.unshift(t),t}}}}),lo=(0,c.Z)(Rr.prototype,"removeCamera",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.cameras&&this.cameras.splice(e,1)}}}),co=(0,c.Z)(Rr.prototype,"removeAllCamera",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.cameras=[]}}}),Rr),Tl={backgroundColor:{r:255,g:255,b:255,a:1},backgroundImage:{resId:"",rt_imageUrl:"",backgroundSize:{width:0,height:0}}},Zl={startTime:0,endTime:0,allAnimationTime:0,pageTime:0,baseTime:0,offsetTime:[0,0],allAnimationTimeBySpeed:0},Cl=(uo=s.LO.shallow,po=Reflect.metadata("design:type","undefined"===typeof IObservableArray?Object:IObservableArray),vo=Reflect.metadata("design:type",Array),mo=Reflect.metadata("design:type",Array),ho=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),fo=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),go=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),xo=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),yo=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),bo=Reflect.metadata("design:type","undefined"===typeof He.LogoAsset?Object:He.LogoAsset),_o=Reflect.metadata("design:type","undefined"===typeof He.AssetClass?Object:He.AssetClass),jo=Reflect.metadata("design:type","undefined"===typeof wl?Object:wl),wo=Reflect.metadata("design:type",Function),ko=Reflect.metadata("design:paramtypes",[]),To=Reflect.metadata("design:type",Function),Zo=Reflect.metadata("design:paramtypes",[]),Co=Reflect.metadata("design:type",Function),No=Reflect.metadata("design:paramtypes",[]),So=Reflect.metadata("design:type",Function),Io=Reflect.metadata("design:paramtypes",[]),Ao=Reflect.metadata("design:type",Function),Po=Reflect.metadata("design:paramtypes",[]),Mo=Reflect.metadata("design:type",Function),Eo=Reflect.metadata("design:paramtypes",[]),Lo=Reflect.metadata("design:type",Function),Do=Reflect.metadata("design:paramtypes",[]),Ro=Reflect.metadata("design:type",Function),zo=Reflect.metadata("design:paramtypes",[]),Fo=Reflect.metadata("design:type",Function),Oo=Reflect.metadata("design:paramtypes",[]),Bo=Reflect.metadata("design:type",Function),Wo=Reflect.metadata("design:paramtypes",[]),Vo=Reflect.metadata("design:type",Function),Uo=Reflect.metadata("design:paramtypes",[]),Go=class{constructor(){(0,l.Z)(this,"templates",Xo,this),(0,l.Z)(this,"reloadMarker",qo,this),(0,l.Z)(this,"replaceTemplateLoading",Ho,this),(0,l.Z)(this,"currentTemplateIndex",Yo,this),(0,l.Z)(this,"auxiliaryTargetIndex",Ko,this),(0,l.Z)(this,"highlightAssets",Qo,this),(0,l.Z)(this,"maxZIndex",Jo,this),(0,l.Z)(this,"active",$o,this),(0,l.Z)(this,"moduleItemActive",es,this),(0,l.Z)(this,"hoverActive",ts,this),(0,l.Z)(this,"moveActive",is,this),(0,l.Z)(this,"textEditActive",as,this),(0,l.Z)(this,"logoAsset",ns,this),(0,l.Z)(this,"assetId",rs,this),(0,l.Z)(this,"moveActiveMask",os,this),(0,l.Z)(this,"editCamera",ss,this),(0,l.Z)(this,"status",ls,this),(0,l.Z)(this,"lllegelAssets",cs,this),this._reactionAutoRemoveLoading=()=>{(0,s.U5)((()=>this.currentAsset),((e,t)=>{e||null===t||void 0===t||t.setTempData({rt_loading:!1})}))},(0,l.Z)(this,"setStatus",ds,this),(0,l.Z)(this,"clearAllActive",us,this),(0,l.Z)(this,"initTemplateStatus",ps,this),(0,l.Z)(this,"setAuxiliaryTargetIndex",vs,this),(0,l.Z)(this,"setEditActive",ms,this),(0,l.Z)(this,"setModuleItemActive",hs,this),(0,l.Z)(this,"setTextEditActive",fs,this),(0,l.Z)(this,"setHoverActive",gs,this),(0,l.Z)(this,"setMoveActive",xs,this),(0,l.Z)(this,"setMoveActiveMask",ys,this),(0,l.Z)(this,"seteditCamera",bs,this),this.getAssetIndexById=(e,t)=>qt(e,t),this.getTargetAsset=(e,t)=>Ht(e,t),this.getTargetAssetById=(e,t)=>Yt(e,t),(0,l.Z)(this,"setHighlightAssets",_s,this),(0,l.Z)(this,"setCurrentTemplate",js,this),(0,l.Z)(this,"setReplaceTemplateLoading",ws,this),(0,l.Z)(this,"addTemplate",ks,this),(0,l.Z)(this,"addTemplateClass",Ts,this),(0,l.Z)(this,"removeTemplate",Zs,this),(0,l.Z)(this,"replaceTemplate",Cs,this),(0,l.Z)(this,"replaceAllTemplate",Ns,this),(0,l.Z)(this,"restoreAllTemplate",Ss,this),(0,l.Z)(this,"updateEditActiveMask",Is,this),(0,l.Z)(this,"setLogoAsset",As,this),(0,l.Z)(this,"setLllegelAssets",Ps,this),(0,s.rC)(this)}get currentTemplate(){return[...this.templates][this.currentTemplateIndex]}get currentAsset(){return this.moduleItemActive||this.active}get currentCamera(){return this.editCamera}get assets(){var e;return(null===(e=this.currentTemplate)||void 0===e?void 0:e.assets)||[]}get currentTemplateBackground(){return this.currentTemplate?this.currentTemplate.background:Tl}get currentTemplateVideoInfo(){if(this.currentTemplate){var e=this.currentTemplate.videoInfo;return e}return Zl}get allTemplateVideoTime(){var e=0;return this.templates.forEach((t=>{e+=Number(t.videoInfo.allAnimationTimeBySpeed)})),e}get assetLoaded(){return this.assets,!0}get watermark(){var e;return this.assets&&(e=this.assets.find((e=>e.meta.isWatermark&&!e.meta.hidden))),e}get logo(){var e;return this.assets&&(e=this.assets.find((e=>e.meta.isLogo&&!e.meta.hidden))),e}get timeScale(){var e,t=[],i=0,a=(0,Xe.Z)(this.templates);try{for(a.s();!(e=a.n()).done;){var n=e.value,r=n.videoInfo,o=(r.allAnimationTime,r.allAnimationTimeBySpeed),s=i+o;t.push([i,s]),i=s}}catch(l){a.e(l)}finally{a.f()}return t}},Xo=(0,c.Z)(Go.prototype,"templates",[uo,po],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),qo=(0,c.Z)(Go.prototype,"reloadMarker",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ho=(0,c.Z)(Go.prototype,"replaceTemplateLoading",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Yo=(0,c.Z)(Go.prototype,"currentTemplateIndex",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),Ko=(0,c.Z)(Go.prototype,"auxiliaryTargetIndex",[s.LO,vo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),Qo=(0,c.Z)(Go.prototype,"highlightAssets",[s.LO,mo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),Jo=(0,c.Z)(Go.prototype,"maxZIndex",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$o=(0,c.Z)(Go.prototype,"active",[s.LO,ho],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),es=(0,c.Z)(Go.prototype,"moduleItemActive",[s.LO,fo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ts=(0,c.Z)(Go.prototype,"hoverActive",[s.LO,go],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),is=(0,c.Z)(Go.prototype,"moveActive",[s.LO,xo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),as=(0,c.Z)(Go.prototype,"textEditActive",[s.LO,yo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ns=(0,c.Z)(Go.prototype,"logoAsset",[s.LO,bo],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{text:void 0,image:void 0}}}),rs=(0,c.Z)(Go.prototype,"assetId",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),os=(0,c.Z)(Go.prototype,"moveActiveMask",[s.LO,_o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ss=(0,c.Z)(Go.prototype,"editCamera",[s.LO,jo],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ls=(0,c.Z)(Go.prototype,"status",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{inClipping:!1,inReplacing:!1,inRotating:!1,inMoving:!1,inMask:!1,hideTransformerBox:!1,mousePosition:{left:0,top:0},inAniPath:-1,inWhirl:!1,inCamera:!1}}}),cs=(0,c.Z)(Go.prototype,"lllegelAssets",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),(0,c.Z)(Go.prototype,"currentTemplate",[s.Fl,wo,ko],Object.getOwnPropertyDescriptor(Go.prototype,"currentTemplate"),Go.prototype),(0,c.Z)(Go.prototype,"currentAsset",[s.Fl,To,Zo],Object.getOwnPropertyDescriptor(Go.prototype,"currentAsset"),Go.prototype),(0,c.Z)(Go.prototype,"currentCamera",[s.Fl,Co,No],Object.getOwnPropertyDescriptor(Go.prototype,"currentCamera"),Go.prototype),(0,c.Z)(Go.prototype,"assets",[s.Fl,So,Io],Object.getOwnPropertyDescriptor(Go.prototype,"assets"),Go.prototype),(0,c.Z)(Go.prototype,"currentTemplateBackground",[s.Fl,Ao,Po],Object.getOwnPropertyDescriptor(Go.prototype,"currentTemplateBackground"),Go.prototype),(0,c.Z)(Go.prototype,"currentTemplateVideoInfo",[s.Fl,Mo,Eo],Object.getOwnPropertyDescriptor(Go.prototype,"currentTemplateVideoInfo"),Go.prototype),(0,c.Z)(Go.prototype,"allTemplateVideoTime",[s.Fl,Lo,Do],Object.getOwnPropertyDescriptor(Go.prototype,"allTemplateVideoTime"),Go.prototype),(0,c.Z)(Go.prototype,"assetLoaded",[s.Fl,Ro,zo],Object.getOwnPropertyDescriptor(Go.prototype,"assetLoaded"),Go.prototype),(0,c.Z)(Go.prototype,"watermark",[s.Fl,Fo,Oo],Object.getOwnPropertyDescriptor(Go.prototype,"watermark"),Go.prototype),(0,c.Z)(Go.prototype,"logo",[s.Fl,Bo,Wo],Object.getOwnPropertyDescriptor(Go.prototype,"logo"),Go.prototype),(0,c.Z)(Go.prototype,"timeScale",[s.Fl,Vo,Uo],Object.getOwnPropertyDescriptor(Go.prototype,"timeScale"),Go.prototype),ds=(0,c.Z)(Go.prototype,"setStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.status,e)}}}),us=(0,c.Z)(Go.prototype,"clearAllActive",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.assetId=-1,this.active=void 0,this.textEditActive=void 0,this.moveActive=void 0,this.hoverActive=void 0}}}),ps=(0,c.Z)(Go.prototype,"initTemplateStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.clearAllActive(),this.auxiliaryTargetIndex=[],this.reloadMarker+=1}}}),vs=(0,c.Z)(Go.prototype,"setAuxiliaryTargetIndex",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{(0,qe.Z)(this.auxiliaryTargetIndex,e)||(this.auxiliaryTargetIndex=e)}}}),ms=(0,c.Z)(Go.prototype,"setEditActive",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t;this.active=e,null!==e&&void 0!==e&&null!==(t=e.attribute.stayEffect)&&void 0!==t&&t.graph&&(this.status.inAniPath=2)}}}),hs=(0,c.Z)(Go.prototype,"setModuleItemActive",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.moduleItemActive=e}}}),fs=(0,c.Z)(Go.prototype,"setTextEditActive",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.textEditActive=e}}}),gs=(0,c.Z)(Go.prototype,"setHoverActive",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.hoverActive=e}}}),xs=(0,c.Z)(Go.prototype,"setMoveActive",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.moveActive=e}}}),ys=(0,c.Z)(Go.prototype,"setMoveActiveMask",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.moveActiveMask=e}}}),bs=(0,c.Z)(Go.prototype,"seteditCamera",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.editCamera=e}}}),_s=(0,c.Z)(Go.prototype,"setHighlightAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.highlightAssets=e}}}),js=(0,c.Z)(Go.prototype,"setCurrentTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.currentTemplateIndex=e}}}),ws=(0,c.Z)(Go.prototype,"setReplaceTemplateLoading",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.replaceTemplateLoading=e}}}),ks=(0,c.Z)(Go.prototype,"addTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e.initTemplateStatus();var a=i;return t.forEach((t=>{a>-1?(e.templates.splice(a,0,new kl(t)),a+=1):e.templates.push(new kl(t))})),i>-1?i:e.templates.length-1}}}),Ts=(0,c.Z)(Go.prototype,"addTemplateClass",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;e.initTemplateStatus();var a=i;return i>-1?(e.templates.splice(a,0,...t),i):(e.templates.push(...t),e.templates.length-1)}}}),Zs=(0,c.Z)(Go.prototype,"removeTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{e>-1&&this.templates.splice(e,1)}}}),Cs=(0,c.Z)(Go.prototype,"replaceTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{e>-1&&this.templates.splice(e,1,new kl(t))}}}),Ns=(0,c.Z)(Go.prototype,"replaceAllTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>(this.clearAllActive(),this.templates.clear(),this.addTemplate(e),0)}}),Ss=(0,c.Z)(Go.prototype,"restoreAllTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=[];e.forEach((e=>{var i=this.templates.find((t=>t.id===e.id));if(i)i.restore(e),t.push(i);else{var a=A(e);t.push(new kl(a))}})),t.length&&this.templates.replace(t)}}}),Is=(0,c.Z)(Go.prototype,"updateEditActiveMask",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{e&&(this.moveActiveMask=e)}}}),As=(0,c.Z)(Go.prototype,"setLogoAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.logoAsset[t]=e?new Pn(e):void 0}}}),Ps=(0,c.Z)(Go.prototype,"setLllegelAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.lllegelAssets=e}}}),Go),Nl=new Cl,Sl=(Ms=Reflect.metadata("design:type","undefined"===typeof IObservableArray?Object:IObservableArray),Es=Reflect.metadata("design:type",Function),Ls=Reflect.metadata("design:paramtypes",[]),Ds=Reflect.metadata("design:type",Function),Rs=Reflect.metadata("design:paramtypes",[]),zs=Reflect.metadata("design:type",Function),Fs=Reflect.metadata("design:paramtypes",[]),Os=Reflect.metadata("design:type",Function),Bs=Reflect.metadata("design:paramtypes",[]),Ws=Reflect.metadata("design:type",Function),Vs=Reflect.metadata("design:paramtypes",[]),Us=class{constructor(){(0,l.Z)(this,"multiAudios",Gs,this),(0,l.Z)(this,"audioActive",Xs,this),(0,l.Z)(this,"endTime",qs,this),(0,l.Z)(this,"replaced",Hs,this),(0,l.Z)(this,"setReplaced",Ys,this),(0,l.Z)(this,"initAudioStatus",Ks,this),(0,l.Z)(this,"setAudios",Qs,this),(0,l.Z)(this,"setCurrentAudio",Js,this),(0,l.Z)(this,"setEndTime",$s,this),(0,l.Z)(this,"addAudio",el,this),(0,l.Z)(this,"replaceAudio",tl,this),(0,l.Z)(this,"removeAudio",il,this),(0,l.Z)(this,"updateAudio",al,this),(0,l.Z)(this,"audioIsUserControl",nl,this),(0,l.Z)(this,"updateAudioStatus",rl,this),(0,s.rC)(this)}get currentAudio(){if(this.audioActive>-1)return this.multiAudios[this.audioActive]}get BGMList(){return this.multiAudios?this.multiAudios.filter((e=>1===e.type)):[]}get audioList(){return this.multiAudios?this.multiAudios.filter((e=>2===e.type&&e.startTime<=this.endTime)):[]}get audiosLoaded(){return!this.multiAudios||this.multiAudios.every((e=>e.rt_loadInfo.rt_assetLoadComplete))}get bgmLoaded(){return!this.multiAudios||this.BGMList.every((e=>e.rt_loadInfo.rt_assetLoadComplete))}},Gs=(0,c.Z)(Us.prototype,"multiAudios",[s.LO,Ms],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return s.LO.array([])}}),Xs=(0,c.Z)(Us.prototype,"audioActive",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),qs=(0,c.Z)(Us.prototype,"endTime",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Hs=(0,c.Z)(Us.prototype,"replaced",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,c.Z)(Us.prototype,"currentAudio",[s.Fl,Es,Ls],Object.getOwnPropertyDescriptor(Us.prototype,"currentAudio"),Us.prototype),(0,c.Z)(Us.prototype,"BGMList",[s.Fl,Ds,Rs],Object.getOwnPropertyDescriptor(Us.prototype,"BGMList"),Us.prototype),(0,c.Z)(Us.prototype,"audioList",[s.Fl,zs,Fs],Object.getOwnPropertyDescriptor(Us.prototype,"audioList"),Us.prototype),(0,c.Z)(Us.prototype,"audiosLoaded",[s.Fl,Os,Bs],Object.getOwnPropertyDescriptor(Us.prototype,"audiosLoaded"),Us.prototype),(0,c.Z)(Us.prototype,"bgmLoaded",[s.Fl,Ws,Vs],Object.getOwnPropertyDescriptor(Us.prototype,"bgmLoaded"),Us.prototype),Ys=(0,c.Z)(Us.prototype,"setReplaced",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.replaced!==e&&(this.replaced=e)}}}),Ks=(0,c.Z)(Us.prototype,"initAudioStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.multiAudios.clear(),this.audioActive=-1}}}),Qs=(0,c.Z)(Us.prototype,"setAudios",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.multiAudios.replace(e)}}}),Js=(0,c.Z)(Us.prototype,"setCurrentAudio",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.multiAudios&&(this.audioActive=e)}}}),$s=(0,c.Z)(Us.prototype,"setEndTime",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.endTime=e}}}),el=(0,c.Z)(Us.prototype,"addAudio",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.multiAudios&&(this.multiAudios.push(e),this.setReplaced(!0),We("addAudio"))}}}),tl=(0,c.Z)(Us.prototype,"replaceAudio",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.multiAudios&&(this.multiAudios.splice(t,1,e),this.setReplaced(!0),We("replaceAudio"))}}}),il=(0,c.Z)(Us.prototype,"removeAudio",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.multiAudios.findIndex((t=>t.rt_id===e));t>-1&&(this.multiAudios.splice(t,1),this.setReplaced(!0),We("removeAudio"))}}}),al=(0,c.Z)(Us.prototype,"updateAudio",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var i=this.multiAudios[t];i&&(Object.assign(i,e),e.rt_endTime&&(e.rt_endTime=void 0),this.setReplaced(!0),We("updateAudio"))}}}),nl=(0,c.Z)(Us.prototype,"audioIsUserControl",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.multiAudios[e];t&&!t.rt_isUserControl&&Object.assign(t,{rt_isUserControl:!0})}}}),rl=(0,c.Z)(Us.prototype,"updateAudioStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var i=this.multiAudios[t];i&&Object.assign(i,{rt_loadInfo:e})}}}),Us),Il=new Sl,Al=i(65426),Pl=i(22446),Ml=(ol=s.LO.shallow,sl=Reflect.metadata("design:type",Array),ll=Reflect.metadata("design:type",Function),cl=Reflect.metadata("design:paramtypes",[]),dl=Reflect.metadata("design:type",Function),ul=Reflect.metadata("design:paramtypes",[]),pl=class{constructor(){(0,l.Z)(this,"record",vl,this),this.maxRecord=50,(0,l.Z)(this,"recordPoint",ml,this),(0,l.Z)(this,"recordLength",hl,this),(0,l.Z)(this,"addRecord",fl,this),(0,l.Z)(this,"updateRecord",gl,this),(0,l.Z)(this,"goNext",xl,this),(0,l.Z)(this,"goPrev",yl,this),(0,l.Z)(this,"setRecordPoint",bl,this),(0,l.Z)(this,"getCurrentAssetWork",_l,this),(0,l.Z)(this,"initRecord",jl,this),(0,s.rC)(this)}get hasNext(){return this.recordLength>0&&this.recordPoint!==this.record.length-1}get hasPrev(){return this.recordLength>0&&this.recordPoint>0}},vl=(0,c.Z)(pl.prototype,"record",[ol,sl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ml=(0,c.Z)(pl.prototype,"recordPoint",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),hl=(0,c.Z)(pl.prototype,"recordLength",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),(0,c.Z)(pl.prototype,"hasNext",[s.Fl,ll,cl],Object.getOwnPropertyDescriptor(pl.prototype,"hasNext"),pl.prototype),(0,c.Z)(pl.prototype,"hasPrev",[s.Fl,dl,ul],Object.getOwnPropertyDescriptor(pl.prototype,"hasPrev"),pl.prototype),fl=(0,c.Z)(pl.prototype,"addRecord",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.record.length,i=t-1,a=A(e);t>1&&(this.recordPoint!==i&&(this.record=(0,Al.Z)(this.record,i-this.recordPoint)),t>=this.maxRecord&&(this.record=(0,Pl.Z)(this.record))),this.record.push(a),this.recordLength=this.record.length,this.recordPoint=this.recordLength-1}}}),gl=(0,c.Z)(pl.prototype,"updateRecord",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=A(e);this.record.splice(this.recordPoint,1,t)}}}),xl=(0,c.Z)(pl.prototype,"goNext",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{if(this.hasNext){var e=this.recordPoint+1;return this.setRecordPoint(e),this.record[e]}}}}),yl=(0,c.Z)(pl.prototype,"goPrev",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{if(this.hasPrev){var e=this.recordPoint-1;return this.setRecordPoint(e),this.record[e]}}}}),bl=(0,c.Z)(pl.prototype,"setRecordPoint",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.recordPoint=e}}}),_l=(0,c.Z)(pl.prototype,"getCurrentAssetWork",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>this.record[e]}}),jl=(0,c.Z)(pl.prototype,"initRecord",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.record=[],this.recordPoint=-1,this.recordLength=-1}}}),pl),El=new Ml;function Ll(e){return new Promise(((t,i)=>{var a=new Image;a.crossOrigin="anonymous",a.onerror=()=>{i(new Error("\u52a0\u8f7d\u5f02\u5e38"))},a.onload=()=>{delete a.onload,delete a.onerror,t(a)},a.src=e}))}var Dl,Rl,zl,Fl,Ol,Bl,Wl,Vl,Ul,Gl,Xl,ql,Hl,Yl,Kl,Ql,Jl,$l,ec,tc,ic,ac,nc,rc,oc,sc,lc,cc,dc,uc,pc,vc,mc,hc,fc,gc,xc,yc,bc,_c,jc,wc,kc,Tc,Zc,Cc,Nc,Sc,Ic,Ac,Pc,Mc=new Map;class Ec{constructor(e){var t=this;this.classResources=new Map,this.cacheId=void 0,this.getImageDom=function(){var e=(0,p.Z)(m().mark((function e(i){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!t.classResources.has(i)){e.next=2;break}return e.abrupt("return",t.classResources.get(i));case 2:return e.next=4,Ll(i);case 4:return a=e.sent,t.classResources.set(i,a),Mc.set(t.cacheId,t.classResources),e.abrupt("return",a);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mc.get(e)?this.classResources=Mc.get(e):Mc.set(e,new Map),this.cacheId=e}}var Lc=(Dl=Reflect.metadata("design:type","undefined"===typeof BaseCached?Object:BaseCached),Rl=Reflect.metadata("design:type","undefined"===typeof BaseCached?Object:BaseCached),zl=Reflect.metadata("design:type","undefined"===typeof BaseCached?Object:BaseCached),Fl=Reflect.metadata("design:type","undefined"===typeof BaseCached?Object:BaseCached),Ol=Reflect.metadata("design:type","undefined"===typeof SvgCached?Object:SvgCached),Bl=Reflect.metadata("design:type","undefined"===typeof AeACached?Object:AeACached),Wl=Reflect.metadata("design:type","undefined"===typeof LottieCachedCached?Object:LottieCachedCached),Vl=Reflect.metadata("design:type","undefined"===typeof FontEffectCached?Object:FontEffectCached),Ul=Reflect.metadata("design:type","undefined"===typeof FontEffecttColorfulCached?Object:FontEffecttColorfulCached),Gl=Reflect.metadata("design:type",Function),Xl=Reflect.metadata("design:paramtypes",[]),ql=Reflect.metadata("design:type",Function),Hl=Reflect.metadata("design:paramtypes",[]),Yl=Reflect.metadata("design:type",Function),Kl=Reflect.metadata("design:paramtypes",[]),Ql=Reflect.metadata("design:type",Function),Jl=Reflect.metadata("design:paramtypes",[]),$l=Reflect.metadata("design:type",Function),ec=Reflect.metadata("design:paramtypes",[]),tc=Reflect.metadata("design:type",Function),ic=Reflect.metadata("design:paramtypes",[]),ac=Reflect.metadata("design:type",Function),nc=Reflect.metadata("design:paramtypes",[]),rc=Reflect.metadata("design:type",Function),oc=Reflect.metadata("design:paramtypes",[]),sc=Reflect.metadata("design:type",Function),lc=Reflect.metadata("design:paramtypes",[]),cc=Reflect.metadata("design:type",Function),dc=Reflect.metadata("design:paramtypes",[]),uc=class{get videoLoaded(){return this.loadTest(this.videoCached)}get imageLoaded(){return this.loadTest(this.imageCached)}get audioLoaded(){return this.loadTest(this.audioCached)}get fontFamilyLoaded(){return this.loadTest(this.fontFamilyCached)}get svgLoaded(){return this.loadTest(this.svgCached)}get aeALoaded(){return this.loadTest(this.aeACached)}get lottieLoaded(){return this.loadTest(this.lottieCached)}get fontEffectLoaded(){return this.loadTest(this.fontEffectCached)}get fontEffectColorfulLoaded(){return this.loadTest(this.fontEffectColorfulCached)}get allLoaded(){return!(!this.templateInitOver||!this.audioInitOver)&&this.loadedKeys.every((e=>this[e]))}constructor(){(0,l.Z)(this,"templateInitOver",pc,this),this.videoStores={},(0,l.Z)(this,"audioInitOver",vc,this),(0,l.Z)(this,"videoCached",mc,this),(0,l.Z)(this,"imageCached",hc,this),(0,l.Z)(this,"audioCached",fc,this),(0,l.Z)(this,"fontFamilyCached",gc,this),(0,l.Z)(this,"svgCached",xc,this),(0,l.Z)(this,"aeACached",yc,this),(0,l.Z)(this,"lottieCached",bc,this),(0,l.Z)(this,"fontEffectCached",_c,this),(0,l.Z)(this,"fontEffectColorfulCached",jc,this),this.loadedKeys=["videoLoaded","imageLoaded","audioLoaded","fontFamilyLoaded","lottieLoaded","svgLoaded","aeALoaded","fontEffectLoaded","fontEffectColorfulLoaded"],this.loadCachedStateMap={videoCached:"videoLoaded",imageCached:"imageLoaded",audioCached:"audioLoaded",fontFamilyCached:"fontFamilyLoaded",lottieCached:"lottieLoaded",svgCached:"svgLoaded",aeACached:"aeALoaded",fontEffectCached:"fontEffectLoaded",fontEffectColorfulCached:"fontEffectColorfulLoaded"},this.loadTest=e=>Object.keys(e).every((t=>e[t].loaded)),this.getStatus=e=>"boolean"!==typeof e?{loaded:!1,failed:!1}:{loaded:!0,failed:!e},(0,l.Z)(this,"setFontFamilyCached",wc,this),(0,l.Z)(this,"setDomCached",kc,this),(0,l.Z)(this,"setCached",Tc,this),(0,l.Z)(this,"setSVGCached",Zc,this),(0,l.Z)(this,"setAEACached",Cc,this),(0,l.Z)(this,"setFontEffectCached",Nc,this),(0,l.Z)(this,"setFontEffectColorfulCached",Sc,this),(0,l.Z)(this,"setLottieCached",Ic,this),(0,l.Z)(this,"setTemplateInitOver",Ac,this),(0,l.Z)(this,"setAudioInitOver",Pc,this),(0,s.rC)(this)}},pc=(0,c.Z)(uc.prototype,"templateInitOver",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),vc=(0,c.Z)(uc.prototype,"audioInitOver",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),mc=(0,c.Z)(uc.prototype,"videoCached",[s.LO,Dl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),hc=(0,c.Z)(uc.prototype,"imageCached",[s.LO,Rl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),fc=(0,c.Z)(uc.prototype,"audioCached",[s.LO,zl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),gc=(0,c.Z)(uc.prototype,"fontFamilyCached",[s.LO,Fl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),xc=(0,c.Z)(uc.prototype,"svgCached",[s.LO,Ol],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),yc=(0,c.Z)(uc.prototype,"aeACached",[s.LO,Bl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),bc=(0,c.Z)(uc.prototype,"lottieCached",[s.LO,Wl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_c=(0,c.Z)(uc.prototype,"fontEffectCached",[s.LO,Vl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),jc=(0,c.Z)(uc.prototype,"fontEffectColorfulCached",[s.LO,Ul],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),(0,c.Z)(uc.prototype,"videoLoaded",[s.Fl,Gl,Xl],Object.getOwnPropertyDescriptor(uc.prototype,"videoLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"imageLoaded",[s.Fl,ql,Hl],Object.getOwnPropertyDescriptor(uc.prototype,"imageLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"audioLoaded",[s.Fl,Yl,Kl],Object.getOwnPropertyDescriptor(uc.prototype,"audioLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"fontFamilyLoaded",[s.Fl,Ql,Jl],Object.getOwnPropertyDescriptor(uc.prototype,"fontFamilyLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"svgLoaded",[s.Fl,$l,ec],Object.getOwnPropertyDescriptor(uc.prototype,"svgLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"aeALoaded",[s.Fl,tc,ic],Object.getOwnPropertyDescriptor(uc.prototype,"aeALoaded"),uc.prototype),(0,c.Z)(uc.prototype,"lottieLoaded",[s.Fl,ac,nc],Object.getOwnPropertyDescriptor(uc.prototype,"lottieLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"fontEffectLoaded",[s.Fl,rc,oc],Object.getOwnPropertyDescriptor(uc.prototype,"fontEffectLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"fontEffectColorfulLoaded",[s.Fl,sc,lc],Object.getOwnPropertyDescriptor(uc.prototype,"fontEffectColorfulLoaded"),uc.prototype),(0,c.Z)(uc.prototype,"allLoaded",[s.Fl,cc,dc],Object.getOwnPropertyDescriptor(uc.prototype,"allLoaded"),uc.prototype),wc=(0,c.Z)(uc.prototype,"setFontFamilyCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var i=this.fontFamilyCached[e];null!==i&&void 0!==i&&i.loaded||(this.fontFamilyCached[e]=this.getStatus(t))}}}),kc=(0,c.Z)(uc.prototype,"setDomCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t,i)=>{var a,n=this["".concat(e,"Cached")];null!==(a=n[t])&&void 0!==a&&a.loaded||(n[t]=this.getStatus(i))}}}),Tc=(0,c.Z)(uc.prototype,"setCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,i){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t[i]||(t[i]={});var n=t[i];if(null===n||void 0===n||!n.loaded){var r=e.getStatus(a.status);Object.assign(n,r),a.action&&(n.action=a.action),a.data&&(n.data=a.data),r.failed&&(n.data=void 0)}}}}),Zc=(0,c.Z)(uc.prototype,"setSVGCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.setCached(this.svgCached,e,t)}}}),Cc=(0,c.Z)(uc.prototype,"setAEACached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.setCached(this.aeACached,e,t)}}}),Nc=(0,c.Z)(uc.prototype,"setFontEffectCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.setCached(this.fontEffectCached,e,t)}}}),Sc=(0,c.Z)(uc.prototype,"setFontEffectColorfulCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.setCached(this.fontEffectColorfulCached,e,t)}}}),Ic=(0,c.Z)(uc.prototype,"setLottieCached",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{this.setCached(this.lottieCached,e,t)}}}),Ac=(0,c.Z)(uc.prototype,"setTemplateInitOver",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.templateInitOver=e}}}),Pc=(0,c.Z)(uc.prototype,"setAudioInitOver",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.audioInitOver=e}}}),uc),Dc=new Lc;function Rc(e){return e.loaded&&!e.failed}function zc(e){return new Promise((t=>{fetch(e).then((e=>{try{var i=e.body.getReader();new ReadableStream({start(){function e(){i.read().then((i=>{var a=i.done;a?t(!0):e()}))}e()}})}catch(a){t(!1)}}))}))}function Fc(e){return Oc.apply(this,arguments)}function Oc(){return Oc=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Dc.videoCached[t]){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,Dc.setDomCached("video",t),e.next=6,zc(t);case 6:return i=e.sent,Dc.setDomCached("video",t,i),e.abrupt("return",i);case 11:return e.prev=11,e.t0=e["catch"](2),console.error(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),Oc.apply(this,arguments)}function Bc(e){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!Dc.imageCached[t]){e.next=2;break}return e.abrupt("return",!0);case 2:return e.prev=2,Dc.setDomCached("image",t),e.next=6,zc(t);case 6:return i=e.sent,Dc.setDomCached("image",t,i),e.abrupt("return",i);case 11:return e.prev=11,e.t0=e["catch"](2),console.error(e.t0),e.abrupt("return",!1);case 15:case"end":return e.stop()}}),e,null,[[2,11]])}))),Wc.apply(this,arguments)}function Vc(e,t,i,a,n){var r=new Promise((r=>{i.then((i=>{n(i)?(Rc(e[t])||Dc.setCached(e,t,{status:!0,data:a(i)}),r(a(i))):(Dc.setCached(e,t,{status:!1}),r(""))})).catch((()=>{Dc.setCached(e,t,{status:!1}),r("")}))}));Dc.setCached(e,t,{action:r})}function Uc(e){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Fe.getApi("getAeAnimationDetail"),"?id=").concat(t),{credentials:"include"});case 2:return i=e.sent,e.abrupt("return",i.json());case 4:case"end":return e.stop()}}),e)}))),Gc.apply(this,arguments)}function Xc(e){return qc.apply(this,arguments)}function qc(){return qc=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Dc.aeACached[t]||{},a=i.action,!a){e.next=3;break}return e.abrupt("return",a);case 3:return Vc(Dc.aeACached,t,Uc(t),(e=>{var t=e.data;return(0,u.Z)((0,u.Z)({},t),{},{kw:JSON.parse(t.json_react),sort:Number(t.sort)})}),(e=>!0)),e.abrupt("return",Xc(t));case 5:case"end":return e.stop()}}),e)}))),qc.apply(this,arguments)}function Hc(e){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(Fe.getApi("getSpecificWord"),"?id=").concat(t),{credentials:"include"});case 2:return i=e.sent,e.abrupt("return",i.json());case 4:case"end":return e.stop()}}),e)}))),Yc.apply(this,arguments)}function Kc(e){return Qc.apply(this,arguments)}function Qc(){return Qc=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("//js.xiudodo.com/colorful/presets/v2/".concat(t,".json")).then((e=>e.json())).then((e=>e));case 2:return i=e.sent,e.abrupt("return",i);case 4:case"end":return e.stop()}}),e)}))),Qc.apply(this,arguments)}function Jc(e){var t=Dc.fontEffectCached[e]||{},i=t.action;return i||(Vc(Dc.fontEffectCached,e,Hc(e),(e=>e.msg),(e=>1===e.stat&&e.msg)),Jc(e))}function $c(e){var t=Dc.fontEffectColorfulCached[e]||{},i=t.action;return i||(Vc(Dc.fontEffectColorfulCached,e,Kc(e),(e=>e),(e=>!!e)),$c(e))}function ed(e){return td.apply(this,arguments)}function td(){return td=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=3,fetch(t,{credentials:"include"});case 3:return i=e.sent,e.abrupt("return",i.json());case 5:case"end":return e.stop()}}),e)}))),td.apply(this,arguments)}function id(e){return ad.apply(this,arguments)}function ad(){return ad=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Dc.svgCached[t]||{},a=i.action,!a){e.next=3;break}return e.abrupt("return",a);case 3:return Vc(Dc.svgCached,t,ed(t),(e=>F(e.msg)),(e=>1===e.stat&&e.msg)),e.abrupt("return",id(t));case 5:case"end":return e.stop()}}),e)}))),ad.apply(this,arguments)}function nd(e){return rd.apply(this,arguments)}function rd(){return rd=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:return i=e.sent,e.abrupt("return",i.json());case 4:case"end":return e.stop()}}),e)}))),rd.apply(this,arguments)}function od(e){return sd.apply(this,arguments)}function sd(){return sd=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Dc.lottieCached[t]||{},a=i.action,!a){e.next=3;break}return e.abrupt("return",a);case 3:return Vc(Dc.lottieCached,t,nd(t),(e=>e),(e=>!!e)),e.abrupt("return",od(t));case 5:case"end":return e.stop()}}),e)}))),sd.apply(this,arguments)}function ld(e){return new Promise((t=>{q().load({custom:{families:[e]},timeout:6e4,active:()=>{t(!0)},inactive:()=>{t(!1)}})}))}function cd(e){return dd.apply(this,arguments)}function dd(){return dd=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Dc.fontFamilyCached[t],null===i||void 0===i||!i.loaded){e.next=3;break}return e.abrupt("return",i.loaded);case 3:return Dc.setFontFamilyCached(t),e.next=6,ld($(t));case 6:return a=e.sent,Dc.setFontFamilyCached(t,a),e.abrupt("return",a);case 9:case"end":return e.stop()}}),e)}))),dd.apply(this,arguments)}var ud=()=>Dc.allLoaded,pd=e=>{Dc.setAudioInitOver(e)};function vd(e){var t=Dc.lottieCached[e].data;return A(t)}function md(e,t){if(!e||Dc.imageCached[e]&&"boolean"!==typeof t)return!1;Dc.setDomCached("image",e,t)}function hd(e,t){if(!e||Dc.videoCached[e]&&"boolean"!==typeof t)return!1;Dc.setDomCached("video",e,t)}function fd(e,t){if(!e||Dc.audioCached[e]&&"boolean"!==typeof t)return!1;Dc.setDomCached("audio",e,t)}function gd(){var e=Dc.loadCachedStateMap,t=Dc.videoLoaded,i=Dc.imageLoaded,a=Dc.audioLoaded,n=Dc.fontFamilyLoaded,r=Dc.svgLoaded,o=Dc.aeALoaded,l=Dc.fontEffectLoaded,c=Dc.lottieLoaded;console.log("load status",{videoLoaded:t,imageLoaded:i,audioLoaded:a,fontFamilyLoaded:n,svgLoaded:r,aeALoaded:o,fontEffectLoaded:l,lottieLoaded:c});var d=!0;Object.keys(e).forEach((t=>{var i=e[t];if(!Dc[i])for(var a in console.warn("%c ".concat(t),"color:origin;font-size:14px"),Dc[t]){var n=Dc[t][a];null!==n&&void 0!==n&&n.loaded||(d&&(d=!1),console.log(t,(0,u.Z)({key:a},(0,s.ZN)(n))))}})),d&&console.log("%c All assets loaded","color:green;font-size:20px")}function xd(e){return yd.apply(this,arguments)}function yd(){return yd=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,l,c,d,v,h,f=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=f.length>1&&void 0!==f[1]&&f[1],n=t.meta,r=t.attribute,e.t0=n.type,e.next="SVG"===e.t0?5:"video"===e.t0||"videoE"===e.t0?12:"lottie"===e.t0?16:"text"===e.t0?21:"pic"===e.t0||"background"===e.t0||"image"===e.t0?46:"mask"===e.t0?50:56;break;case 5:if(!r.source_key){e.next=11;break}if(a&&r.rt_svgString){e.next=11;break}return e.next=9,id(r.source_key);case 9:o=e.sent,(0,s.z)((()=>{r.rt_svgString=F(o)}));case 11:return e.abrupt("break",56);case 12:if(!r.rt_url){e.next=15;break}return e.next=15,Fc(r.rt_url);case 15:return e.abrupt("break",56);case 16:if(!r.rt_url){e.next=20;break}return e.next=19,od(r.rt_url);case 19:(0,s.z)((()=>{r.rt_lottieLoaded=!0}));case 20:return e.abrupt("break",56);case 21:if(!r.fontFamily){e.next=24;break}return e.next=24,cd(r.fontFamily);case 24:if(!r.effect){e.next=35;break}return l=jt(r.effect),e.next=28,Jc(l);case 28:if(c=e.sent,r.effectVariant||(0,s.z)((()=>{var e;r.effectVariant=(0,u.Z)((0,u.Z)({},c),{},{variableColorPara:null!==(e=Vt.filterFontEffectColor(c))&&void 0!==e?e:[]})})),r.effectVariant&&c&&(0,s.z)((()=>{r.effectVariant=(0,u.Z)((0,u.Z)({},r.effectVariant),{},{rt_name:c.rt_name,rt_variantColors:c.rt_variantColors,rt_variantList:c.rt_variantList,rt_variantNames:c.rt_variantNames})})),!c.rt_defaultFontFamily||r.fontFamily){e.next=35;break}return(0,s.z)((()=>{r.fontFamily=c.rt_defaultFontFamily})),e.next=35,cd(c.rt_defaultFontFamily);case 35:if(r.fontFamily){e.next=39;break}return e.next=38,cd("fnsyhtRegular");case 38:(0,s.z)((()=>{r.fontFamily="fnsyhtRegular"}));case 39:if(null===r||void 0===r||!r.effectColorful||null!==r&&void 0!==r&&null!==(i=r.effectColorful)&&void 0!==i&&i.effect){e.next=45;break}return e.next=42,$c(null===r||void 0===r?void 0:r.effectColorful.resId);case 42:d=e.sent,null!==d&&void 0!==d&&d.sourceList&&(null===d||void 0===d||d.sourceList.forEach(function(){var e=(0,p.Z)(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Ec("effectColorfulImage").getImageDom(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),r.effectColorful.effect=d;case 45:return e.abrupt("break",56);case 46:if(!r.picUrl){e.next=49;break}return e.next=49,Bc(r.picUrl);case 49:return e.abrupt("break",56);case 50:if(!r.source_key||r.rt_svgString){e.next=55;break}return e.next=53,id(r.source_key);case 53:v=e.sent,(0,s.z)((()=>{r.rt_svgString=F(v)}));case 55:return e.abrupt("break",56);case 56:if(!r.aeA){e.next=61;break}return h=[],Et.forEach((e=>{var t=r.aeA[e];t&&(a?t.resId&&h.push(Xc(t.resId).then((e=>{var i=e.kw;(0,s.z)((()=>{t.kw=A(i)}))}))):(t.resId&&!t.kw&&h.push(Xc(t.resId).then((e=>{var i=e.kw;(0,s.z)((()=>{t.kw=A(i)}))}))),t.kw&&"string"===typeof t.kw&&(0,s.z)((()=>{t.kw=JSON.parse(t.kw)}))))})),e.next=61,Promise.all(h);case 61:case"end":return e.stop()}}),e)}))),yd.apply(this,arguments)}var bd=1e3,_d=300,jd=18e4,wd=500,kd=5e3,Td=10,Zd=1e3,Cd=1e3,Nd=3e3,Sd=500,Id=2e3,Ad=1e3,Pd="\u4ec5\u652f\u6301\u5236\u4f5c".concat(jd/1e3/60,"\u5206\u949f\u4ee5\u5185\u7684\u89c6\u9891"),Md=navigator.appVersion.indexOf("Win")>-1,Ed=Md?"Windows":"Mac",Ld={Windows:{undo:"Ctrl + Z",redo:"Ctrl + Y",group:"Ctrl G",unGroup:"Shift Ctrl G",delete:"Delete",copy:"Ctrl + C",noCopyPaste:"Ctrl + D",save:"Ctrl + S",clone:"Ctrl + D",paste:"Ctrl + V",cut:"Ctrl + X",moveUp:"Ctrl + Shift + \u2191",moveDown:"Ctrl + Shift + \u2193",moveToTop:"Ctrl + \u2191",moveToBottom:"Ctrl + \u2193",enlarge:"Ctrl ++",narrow:"Ctrl + -",move:"\u2190 \u2191 \u2192 \u2193",multipleChoice:"Ctrl + \u9f20\u6807\u5de6\u952e\u70b9\u51fb",moveLayerUp:"Ctrl + ]",moveToTopLevel:"Ctrl + Shift + ]",moveLayerDown:"Ctrl + [",moveToBottomLevel:"Ctrl + Shift + [",splitFragment:"S",referenceLine:"Ctrl + ;"},Mac:{undo:"\u2318 + Z",redo:"\u2318 + Y",group:"\u2318 + G",unGroup:"\u21e7 + \u2318 + G",delete:"Delete",copy:"\u2318 + C",noCopyPaste:"\u2318 + D",save:"\u2318 + S",clone:"\u2318 + D",paste:"\u2318 + V",cut:"\u2318 + X",moveUp:"\u2318 + \u21e7 + \u2191",moveDown:"\u2318 + \u21e7 + \u2193",moveToTop:"\u2318 + \u2191",moveToBottom:"\u2318 + \u2193",enlarge:"\u2318 ++",narrow:"\u2318 + -",move:"\u2190 \u2191 \u2192 \u2193",multipleChoice:"\u2318 + \u9f20\u6807\u5de6\u952e\u70b9\u51fb",moveLayerUp:"\u2318 + ]",moveToTopLevel:"\u2318 + Shift + ]",moveLayerDown:"\u2318 + [",moveToBottomLevel:"\u2318 + Shift + [",splitFragment:"S",referenceLine:"\u2318 + ;"}}[Ed],Dd=[12,14,16,18,22,36,40,50,80,120,140,160,180,200,250,300,350,400,500,600],Rd=[{type:"easeOut",desc:"\u51cf\u901f",p1x:0,p1y:0,p2x:.58,p2y:1},{type:"linear",desc:"\u5300\u901f",p1x:0,p1y:0,p2x:1,p2y:1},{type:"easeIn",desc:"\u52a0\u901f",p1x:.42,p1y:0,p2x:1,p2y:1}];function zd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=A(e);if(0===i.length)return"";var a="";return i.forEach(((e,i)=>{if(1!==t&&e.forEach(((i,a)=>{e[a]=i*t})),6!=e.length)return"";a+=0===i?"M".concat(e.slice(2,4).join(" ")):"L".concat(e.slice(2,4).join(" "))})),a}function Fd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=A(e);if(0===i.length)return"";var a="";return i.length>1&&i.forEach(((e,n)=>{1!==t&&e.forEach(((i,a)=>{e[a]=i*t})),0===n?a+="M".concat(e.slice(2,4).join(" ")," C").concat(e.slice(0,2).join(" ")," "):n===i.length-1?a+="".concat(e.slice(0,2).join(" ")," ").concat(e.slice(2,4).join(" ")):a+="".concat(e.slice(0,2).join(" ")," ").concat(e.slice(2,4).join(" ")," C").concat(e.slice(4,6).join(" ")," ")})),a}function Od(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=A(e);if(0===i.length)return"";1!==t&&i.forEach(((e,a)=>{i[a]=e*t}));var a="M".concat(i.slice(0,2).join(" "),"L").concat(i.slice(4,6).join(" "));return a}function Bd(e,t,i){var a=A(e);if(!(a.length<2))return a.forEach(((e,i)=>{e.forEach(((i,a)=>{e[a]=a%2===1?i-t.y:i-t.x}))})),console.log("\u9884\u8bbe\u4fe1\u606f=======",{width:i.width,height:i.height,x:i.left,y:i.top,points:a}),{width:i.width,height:i.height,x:i.left,y:i.top,points:a}}function Wd(e,t,i){var a=A(e);return a.forEach(((e,a)=>{e.forEach(((a,n)=>{e[n]=n%2===1?a+i:a+t}))})),a}function Vd(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Rd,n=a[t],r=n.p1x,o=n.p1y,s=n.p2x,l=n.p2y,c=3*r,d=3*(s-r)-c,u=1-c-d,p=3*o,v=3*(l-o)-p,m=1-p-v;function h(e){return((u*e+d)*e+c)*e}function f(e,t){var i,a,n,r,o,s;for(n=e,s=0;s<8;s++){if(r=h(n)-e,Math.abs(r)<t)return n;if(o=(3*u*n+2*d)*n+c,Math.abs(o)<1e-6)break;n-=r/o}if(i=0,a=1,n=e,n<i)return i;if(n>a)return a;while(i<a){if(r=h(n),Math.abs(r-e)<t)return n;e>r?i=n:a=n,n=(a-i)/2+i}return n}function g(e,t){var i=f(e,t);return((m*i+v)*i+p)*i}return g(e,1/(200*i))}function Ud(e,t){null===e||void 0===e||e.update(t)}function Gd(e,t){null===e||void 0===e||e.setTempData(t)}function Xd(e,t){null===e||void 0===e||e.autoRemoveAsset(t.id)}function qd(e,t,i){e.replaceAsset(t,i)}function Hd(e,t){e.updateBackgroundColor(t)}function Yd(e,t){null===e||void 0===e||e.update(t)}function Kd(e,t){var i={rt_inTransforming:t};t||(i.rt_itemScale=1),e.setTempData(i)}function Qd(e,t){e.setTempData({rt_inMoving:t})}function Jd(e){Nl.setAuxiliaryTargetIndex(e)}function $d(e,t){if(Nl.assets){var i=Nl.assets.findIndex((e=>e.meta.id===t));i>-1&&(Nl.currentTemplate.replaceAsset(e,i),We("replaceWholeAssetByAssetId",!0))}}function eu(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=(Nl.currentAsset,Nl.currentTemplate);Nl.setStatus({inClipping:!1,inReplacing:!1,inMask:!1,inMoving:!1,inWhirl:!1,inAniPath:-1}),e||Nl.setEditActive(void 0),Nl.moveActive&&Qd(Nl.moveActive,!1),Nl.setHoverActive(void 0),Nl.setTextEditActive(void 0),Nl.setMoveActive(void 0),Nl.setModuleItemActive(void 0),Nl.seteditCamera(void 0),null===t||void 0===t||t.clearMultiSelect()}function tu(e){Nl.setCurrentTemplate(e)}var iu={setEditActive:e=>{if(e){if(Nl.moveActive&&Nl.moveActive.tempData.rt_inMoving&&ii(Nl.moveActive))Nl.setEditActive(Nl.moveActive);else if(eu(),!ii(e))if(e.parent){var t=e.parent;ii(t)?ai(t)?Nl.setEditActive(t):Nl.setEditActive(e):(Nl.setTextEditActive(void 0),Nl.setModuleItemActive(e),Nl.setEditActive(t))}else ti(e)&&(Nl.setModuleItemActive(void 0),Nl.setTextEditActive(void 0)),Nl.setEditActive(e);Nl.moveActive&&Qd(Nl.moveActive,!1),iu.clearMoveActive()}},clearEditActive:()=>{Nl.setEditActive(void 0),Nl.setModuleItemActive(void 0)},setHoverActive:e=>{e&&Nl.hoverActive!==e&&Nl.setHoverActive(e)},clearHoverActive:()=>{Nl.setHoverActive(void 0)},setMoveActive:e=>{if(e){var t=It(e);Nl.setEditActive(t),Nl.setMoveActive(t)}},toggleSelect:e=>{e&&Gu.toggleSelect(e)},clearMoveActive:()=>{Nl.setMoveActive(void 0)},setTextEditActive:e=>{e&&Nl.textEditActive!==e&&Nl.setTextEditActive(e)},clearTextEditActive:()=>{Nl.setTextEditActive(void 0)},clearActive:()=>{iu.clearTextEditActive(),iu.clearEditActive(),iu.clearActive(),iu.clearHoverActive(),iu.clearMoveActive()},setEditCamera:e=>{Nl.seteditCamera(e)},clearEditCamera:()=>{Nl.seteditCamera(void 0)}};function au(e){Nl.active&&Nl.setStatus({inReplacing:e})}function nu(e){Nl.active&&Nl.setStatus({inRotating:e})}function ru(e){Nl.active&&Nl.setStatus({inMoving:e})}function ou(e){Nl.active&&Nl.setStatus({inMask:e})}var su={updateAssetContainerSize(e,t){var i=e.attribute.container,a=t.size,n=t.position,r=t.originAsset,o=r.attribute.container;if(i&&o){var s=(0,u.Z)((0,u.Z)({},i),{},{width:a.width,height:a.height,viewBoxWidth:a.width,viewBoxHeight:a.height,posX:o.posX*(a.width/o.width),posY:o.posY*(a.height/o.height)}),l=Hn(r.attribute,o),c=Yn(l,(0,u.Z)((0,u.Z)({},i),a)),d=c.width,p=c.height;Ud(e,{attribute:{container:s}}),Ud(e,{attribute:{width:d,height:p},transform:{posX:n.left,posY:n.top}})}},updateSizeScale(e,t){if(e){var i=e.meta.type,a=t.size,n=t.position,r=t.originAsset,o=a.width,s=a.height,l=r.attribute,c={width:Math.max(o,12),height:Math.max(s,12)},d=gt(l,{width:o,height:s});if("text"===i){var u,p=(null!==(u=l.fontSize)&&void 0!==u?u:1)*d;if(p<=12)return;c.fontSize=p}Gd(e,{rt_itemScale:d});var v={attribute:c};n&&(v.transform={posX:n.left,posY:n.top}),e.update(v,!ti(e))}},updateSize(e,t){if(e){var i=e.meta.type,a=e.attribute,n=a.writingMode,r=a.fontSize,o=t.size,s=t.position,l=o.width,c=o.height,d={width:l,height:c},u=null!==r&&void 0!==r?r:12;if("text"===i)if("vertical-rl"===n){if(c<12)return;d={height:Math.max(u,c)}}else{if(l<12)return;d={width:Math.max(u,l)}}var p={attribute:d};s&&s&&(p.transform={posX:s.left,posY:s.top}),Ud(e,p)}},fixContainerPosition(e,t){if(e){var i=t.size,a=t.position,n=e.transform,r=e.attribute,o=(n.rotate,n.posY),s=void 0===o?0:o,l=n.posX,c=void 0===l?0:l,d=r.container,p=null!==d&&void 0!==d?d:{},v=p.posY,m=void 0===v?0:v,h=p.posX,f=void 0===h?0:h,g={left:c+f,top:s+m},x={posX:g.left-a.left,posY:g.top-a.top},y=(0,u.Z)((0,u.Z)({},r.container),{},{width:i.width,height:i.height,viewBoxWidth:i.width,viewBoxHeight:i.height},x);Ud(e,{attribute:{container:y},transform:{posY:a.top,posX:a.left}})}},updateRotate(e,t){(null===e||void 0===e?void 0:e.transform.rotate)!==t&&Ud(e,Bt({rotate:t}))}};function lu(e){var t=null!==e&&void 0!==e?e:Nl.active;if(t){var i=t.meta.locked;t.update(Ot({locked:!i})),ti(e)&&(null===e||void 0===e||e.assets.map((e=>{e.update(Ot({locked:!i}))}))),We("toggleAssetEditStatus",!0)}}function cu(e){e&&((0,s.z)((()=>{var t=e.meta.hidden;e.update(Ot({hidden:!t}))})),We("setAssetVisible",!0))}function du(){var e,t,i=Nl.status,a=null!==(e=Nl.currentAsset)&&void 0!==e?e:{},n=a.meta,r=i.inMask,o=null!==(t=null===n||void 0===n?void 0:n.id)&&void 0!==t?t:"";function s(e){if(e){var t=e.transform,i=e.assets,a=e.attribute;e.setTempData({rt_attribute:{source_key:a.source_key,rt_svgString:a.rt_svgString,width:a.width,height:a.height,posX:t.posX,posY:t.posY},rt_asset:void 0}),i&&i.length>0&&i[0].setTempData({rt_attribute:{width:i[0].attribute.width,height:i[0].attribute.height,posX:i[0].transform.posX,posY:i[0].transform.posY},rt_asset:void 0})}}function l(){return c.apply(this,arguments)}function c(){return c=(0,p.Z)(m().mark((function e(){var t,i,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Nl.active,"mask"===(null===t||void 0===t?void 0:t.meta.type)?s(t):null!==t&&void 0!==t&&t.meta.type&&["pic","image","video","videoE"].includes(null===t||void 0===t?void 0:t.meta.type)&&(i=Dn(t.getAssetCloned()),a=new Pn((0,u.Z)((0,u.Z)({},i),{},{assets:[]})),Nl.currentTemplate.removeAsset(t.meta.id),n=t.getAssetCloned(),t.update({attribute:{aeA:void 0,animation:void 0,container:void 0,stayEffect:void 0},transform:{posX:0,posY:0,rotate:0},meta:{isAlwaysVisible:!0}}),t.setTempData({rt_asset:n}),a.update({meta:{isClip:!0}}),a.setChildren([t]),t.setRtRelativeByParent(),Nl.currentTemplate.addAssets([a]),Nl.setEditActive(a)),Nl.setStatus({inMask:!0,inAniPath:-1});case 3:case"end":return e.stop()}}),e)}))),c.apply(this,arguments)}function d(){Nl.setStatus({inMask:!1}),We("endMask",!0)}function v(){return h.apply(this,arguments)}function h(){return h=(0,p.Z)(m().mark((function e(){var t,i,a,n,r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=Nl.currentAsset,t&&(i=t.assets,a=t.tempData,t.attribute,n=a.rt_attribute,i&&n&&(r=i[0].tempData.rt_attribute,t.update((0,u.Z)((0,u.Z)({},Ft({width:null===n||void 0===n?void 0:n.width,height:null===n||void 0===n?void 0:n.height,source_key:null===n||void 0===n?void 0:n.source_key,rt_svgString:null===n||void 0===n?void 0:n.rt_svgString})),Bt({posX:null===n||void 0===n?void 0:n.posX,posY:null===n||void 0===n?void 0:n.posY}))),i[0].update((0,u.Z)((0,u.Z)({},Ft({width:null===r||void 0===r?void 0:r.width,height:null===r||void 0===r?void 0:r.height})),Bt({posX:null===r||void 0===r?void 0:r.posX,posY:null===r||void 0===r?void 0:r.posY})))),i.length>0&&i[0].tempData.rt_asset&&$d(i[0].tempData.rt_asset,t.meta.id)),Nl.setStatus({inMask:!1});case 3:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function f(){var e=Nl.currentAsset;if(e&&e.assets&&e.assets.length>0){var t=e.assets[0].getAssetCloned();t.meta.isQuickEditor=e.meta.isQuickEditor,t.transform=e.transform,t.attribute.aeA=e.attribute.aeA,t.attribute.animation=e.attribute.animation,t.attribute.kw=e.attribute.kw,t.attribute.startTime=e.attribute.startTime,t.attribute.endTime=e.attribute.endTime,t.attribute.stayEffect=e.attribute.stayEffect,t.attribute.dropShadow=e.attribute.dropShadow,t.meta.isAlwaysVisible=!1,e.replaceAssetSelf(t),We("resetMask",!0)}}return{inMask:r,clipId:o,startMask:l,endMask:d,resetMask:f,cancelMask:v}}function uu(){var e=Nl.status,t=Nl.currentAsset,i=e.inAniPath,a=()=>{Nl.setStatus({inAniPath:0})},n=e=>{t&&t.setTempData({rt_style:void 0}),Nl.setStatus({inAniPath:e})};return{inAniPath:i,start:a,changStatue:n}}function pu(){var e=Nl.currentAsset,t=()=>{if(e){var t=e.attribute,i=e.transform,a=t.width,n=t.height,r=t.startTime,o=t.endTime,s=t.stayEffect,l=t.opacity,c=void 0===l?100:l,d=i.rotate;if(null===s||void 0===s||!s.graph){var p,v=o-r;e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===(p=e.attribute)||void 0===p?void 0:p.stayEffect),{},{duration:v,attach:void 0,graph:{easing:1,loop:!1,freePathType:"line",toBounds:[{width:a,height:n,rotate:d,opacity:c}]}})}))}}},i=(i,a,n)=>{if(e){var r,o=e.attribute;e.transform;t();var s=Ke(e);e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===o||void 0===o?void 0:o.stayEffect),{},{attach:void 0,graph:(0,u.Z)((0,u.Z)((0,u.Z)({},null===o||void 0===o||null===(r=o.stayEffect)||void 0===r?void 0:r.graph),Bd(i,s,n)),{},{freePathType:a})})}))}We("updatePoints",!0)},a=t=>{var i,a,n;e&&(e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===(i=e.attribute)||void 0===i?void 0:i.stayEffect),{},{graph:(0,u.Z)((0,u.Z)({},null===(a=e.attribute)||void 0===a||null===(n=a.stayEffect)||void 0===n?void 0:n.graph),{},{freePathType:t})})})),We("updatePathType",!0))},n=(t,i,a)=>{if(e&&a){var n=null===a||void 0===a?void 0:a.transform,r=n.posX,o=n.posY,s=e.attribute;s.stayEffect;e.update((0,u.Z)({},Bt({posX:r+t,posY:o+i})))}},r=(t,i,a)=>{e&&a&&(n(t,i,a),We("updateAnimationPosition",!0))},o=t=>{if(e){var i,a=e.attribute,n=a.stayEffect;e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},n),{},{attach:(0,u.Z)((0,u.Z)({},null===n||void 0===n?void 0:n.attach),{},{data:(0,u.Z)((0,u.Z)({},null===n||void 0===n||null===(i=n.attach)||void 0===i?void 0:i.data),{},{position:t})})})})),We("updateWhirlPosition",!0)}},s=(t,i,a,r,o)=>{if(e&&a){var s,l,c,d=a.attribute,p=d.stayEffect,v=p.graph,m=v.points,h=A(m);if(0===r){n(t,i,a);var f=Ke(e);o.x-=f.x,o.y-=f.y,h.forEach(((e,a)=>{0!==a&&(e.forEach(((a,n)=>{a-=n%2===0?t:i,e[n]=a})),h[a]=e)}))}else{var g=[...h[r]],x=g[2]-g[0],y=g[3]-g[1];g[0]=g[2]-x+t,g[1]=g[3]-y+i;var b=g[2]-g[4],_=g[3]-g[5];g[4]=g[2]-b+t,g[5]=g[3]-_+i,g[2]+=t,g[3]+=i,h[r]=g}e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===e||void 0===e||null===(s=e.attribute)||void 0===s?void 0:s.stayEffect),{},{graph:(0,u.Z)((0,u.Z)({},null===e||void 0===e||null===(l=e.attribute)||void 0===l||null===(c=l.stayEffect)||void 0===c?void 0:c.graph),{},{points:h},o)})})),We("updatePointByIndex",!0)}};return{updatePoints:i,updatePathType:a,buildPathAnimationInit:t,updateAnimationPosition:r,updateWhirlPosition:o,updatePointByIndex:s}}function vu(){return(null===Nl||void 0===Nl?void 0:Nl.assets)||[]}var mu=()=>null===Nl||void 0===Nl?void 0:Nl.status,hu=()=>null===Nl||void 0===Nl?void 0:Nl.hoverActive,fu=()=>null===Nl||void 0===Nl?void 0:Nl.moveActive,gu=()=>null===Nl||void 0===Nl?void 0:Nl.active,xu=()=>null===Nl||void 0===Nl?void 0:Nl.currentAsset,yu=()=>null===Nl||void 0===Nl?void 0:Nl.editCamera,bu=()=>null===Nl||void 0===Nl?void 0:Nl.textEditActive,_u=()=>Nl.status;var ju=()=>Nl.auxiliaryTargetIndex,wu=()=>Nl.highlightAssets;function ku(){return Nl.currentTemplateVideoInfo}function Tu(){return Nl.currentTemplate}function Zu(){return Nl.currentTemplateIndex}function Cu(e){if(e){var t=Nl.templates.findIndex((t=>t.id===e));return{template:Nl.templates[t],index:t}}return{template:Nl.currentTemplate,index:Nl.currentTemplateIndex}}function Nu(){return Nl.assets}function Su(){return[...Nl.templates]}function Iu(){return Nl.timeScale}var Au=()=>{var e;return(null===Nl||void 0===Nl||null===(e=Nl.currentTemplate)||void 0===e?void 0:e.tempModule.assets)||[]},Pu=()=>Nl.moduleItemActive;function Mu(e){var t=Nl.assets,i=Nl.currentTemplate;if(i&&null!==i&&void 0!==i&&i.videoInfo){var a=i.videoInfo,n=a.speed,r=void 0===n?1:n,o=a.offsetTime,s=void 0===o?[0,0]:o,l=Ge.videoStatus,c=Ge.currentTimeRange,d="number"===typeof e?e:l.currentTime;return Fe.wholeTemplate&&(d-=c),d/=1/r,t.filter((e=>!e.meta.locked&&!e.meta.isBackground&&ci(e,d+s[0])))}return[]}var Eu=e=>{var t=[];return e.forEach((e=>{var i=e.meta.type;"module"===i&&e.assets.length&&t.push(...Eu(e.assets)),["image","pic","video","videoE","SVG","svgPath","mask","lottie"].includes(i)&&t.push(e)})),t};function Lu(e){var t=Nl.assets,i=Nl.currentTemplate;if(i&&null!==i&&void 0!==i&&i.videoInfo){var a=i.videoInfo,n=a.speed,r=void 0===n?1:n,o=a.offsetTime,s=void 0===o?[0,0]:o,l=Ge.videoStatus,c=Ge.currentTimeRange,d="number"===typeof e?e:l.currentTime;Fe.wholeTemplate&&(d-=c),d/=1/r;var u=Eu(t);return u.filter((e=>ci(e,d+s[0])))}return[]}function Du(e){return Nl.templates.findIndex((t=>t.id===e))}function Ru(){return Nl.lllegelAssets}function zu(){var e=Mu();return e.filter((e=>{var t;return ai(e)&&(null===(t=e.tempData.rt_hover)||void 0===t?void 0:t.isHover)}))}function Fu(e){return Nl.currentTemplate.removeAsset(e)}function Ou(e){var t=e.left,i=e.top,a=e.width,n=e.height,r=t+a,o=i+n;return{xMin:t,xMax:r,yMin:i,yMax:o}}function Bu(e){var t=e.containerSizeScale,i=e.assetPositionScale,a=(0,u.Z)((0,u.Z)({},t),i);return Ou(a)}function Wu(e,t){return!(e.xMax<t.xMin||e.xMin>t.xMax||e.yMax<t.yMin||e.yMin>t.yMax)}function Vu(e,t){return e.xMax>t.left&&e.xMin<t.left&&e.yMax>t.top&&e.yMin<t.top}var Uu=e=>{e.assets.forEach((e=>{e.setRtRelativeByParent()}))},Gu={toggleSelect:e=>{var t=Nl.currentTemplate,i=Nl.active,a=Nl.setEditActive;0===t.multiSelect.size?i?i!==t.tempModule&&(t.addMultiSelect(i),t.addMultiSelect(e),a(t.tempModule),Uu(t.tempModule)):a(e):(t.multiSelect.has(e)?t.removeMultiSelect(e):t.addMultiSelect(e),a(t.tempModule),Uu(t.tempModule))},clear:()=>{var e=Nl.currentTemplate;null===e||void 0===e||e.clearMultiSelect()},deleteMultiSelect:()=>{var e=Nl.currentTemplate;e&&(e.multiSelect.forEach((t=>{e.removeAsset(t.id)})),e.clearMultiSelect())},addAsset:e=>{var t=Nl.currentTemplate;null===t||void 0===t||t.addMultiSelect(e)},removeAsset:e=>{var t=Nl.currentTemplate;null===t||void 0===t||t.removeMultiSelect(e)}},Xu=(e,t)=>{var i=t.assetPosition,a=i.left,n=i.top,r=e.assetPosition,o=r.left,s=r.top;t.update({transform:{posX:a-o,posY:n-s}})},qu=(e,t)=>{var i,a=e.transform,n=a.posX,r=a.posY,o=a.rotate,s=void 0===o?0:o,l=s%360>0;l&&(i=fn((0,u.Z)((0,u.Z)({},e.assetSize),e.assetPosition)));var c=t.transform,d=c.posX,p=c.posY,v=c.rotate,m=void 0===v?0:v,h={transform:{posX:d+n,posY:p+r,rotate:m+s}};if(i){var f=Nn(t,e,i);Object.assign(h.transform,f)}t.update(h)},Hu=()=>{var e=Nl.currentTemplate,t=Nl.setEditActive;if(e){var i=e.removeAsset,a=e.multiSelect,n=e.tempModule,r=Array.from(a),o=new Pn(Qn(n)),s={startTime:-1,endTime:-1};r.forEach((e=>{(s.startTime<0||e.assetDuration.startTime>s.startTime)&&(s.startTime=e.assetDuration.startTime),(s.endTime<0||e.assetDuration.endTime<s.endTime)&&(s.startTime=e.assetDuration.startTime),e.setParent(o),e.autoUpdateAuxiliary()})),o.update({attribute:s}),o.setChildren([...r],!1),o.setModuleStyleByChildren(),r.forEach((e=>{Xu(o,e),e.setRtRelativeByParent(),i(e.id)})),e.clearMultiSelect(!1),e.addAssets([o]),t(o)}},Yu=e=>{if(ti(e)){var t=Nl.setEditActive,i=e.template;if(i){var a=i.tempModule,n=i.setMultiSelect,r=i.addAssets,o=i.removeAsset,s=[...e.assets];s.forEach((t=>{t.setParent(a),qu(e,t),t.autoUpdateAuxiliary(),t.transform.zindex=i.zIndex.max+1,delete t.meta.trackId})),r(s),n(s),setTimeout((()=>{s.forEach((e=>{e.setRtRelativeByParent()}))}),10),o(e.id),t(a)}}},Ku=e=>{var t=un(),i=(t.scale,Ou(e)),a=Mu();a.forEach((e=>{if(!ii(e)){var t=Bu(e);Wu(t,i)?Gu.addAsset(e):Gu.removeAsset(e)}}))},Qu=()=>{var e=Nl||{},t=e.currentTemplate,i=e.setEditActive;if(t){var a=t.multiSelect,n=t.tempModule;0===a.size?eu():1===a.size?(a.forEach((e=>{i(e)})),Gu.clear()):(Uu(n),i(n))}},Ju=i(11411);class $u{constructor(e){this.index=void 0,this.loadSuccess=()=>{var e={rt_assetLoadComplete:!0,rt_assetLoadFailed:!1};Il.updateAudioStatus(e,this.index)},this.loadError=()=>{var e={rt_assetLoadComplete:!0,rt_assetLoadFailed:!0};Il.updateAudioStatus(e,this.index)},this.index=e}}function ep(e){return(0,Ju.Z)((()=>new $u(e)),[e])}function tp(){var e=Il.multiAudios,t=void 0===e?[]:e,i=Il.setEndTime,a=Il.endTime,r=Nl.allTemplateVideoTime;a&&(0,s.z)((()=>{t.forEach((e=>{var t=e.endTime,i=e.startTime,o=e.cut,s=void 0===o?[0,0]:o,l=e.rt_duration;if(t>=a||t>=r){var c=(0,n.Z)(s,2),d=c[0],u=(c[1],Math.max(r,i+1)),p=l-d+i;u=Math.ceil(Math.min(u,p));var v=u-i;e.cut=[d,d+v],e.endTime=u}}))})),i(r)}function ip(){return Il.multiAudios}(0,s.jQ)({enforceActions:"always"});var ap=.17,np=1,rp=np+ap,op=100*ap/2;function sp(e){var t=np+ap*e;return"scale(".concat(t,",").concat(t,")")}function lp(e){var t=rp-ap*e;return"scale(".concat(t,",").concat(t,")")}function cp(e){var t=-op*e;return"translateX(".concat(t,"%) scale(").concat(rp,")")}function dp(e){var t=op*e;return"translateX(".concat(t,"%) scale(").concat(rp,")")}function up(e){var t=-op*e;return"translateY(".concat(t,"%) scale(").concat(rp,")")}function pp(e){var t=op*e;return"translateY(".concat(t,"%) scale(").concat(rp,")")}var vp={1:{action:lp,name:"\u7f29\u5c0f"},2:{action:sp,name:"\u653e\u5927"},3:{action:cp,name:"\u5411\u5de6\u79fb\u52a8"},4:{action:dp,name:"\u5411\u53f3\u79fb\u52a8"},5:{action:up,name:"\u5411\u4e0a\u79fb\u52a8"},6:{action:pp,name:"\u5411\u4e0b\u79fb\u52a8"}},mp=Object.keys(vp).map(Number),hp=i(36952);function fp(e){if(e){var t={backgroundColor:e.backgroundColor,backgroundImage:e.backgroundImage};return t}}function gp(e,t){var i=ip(),a=Su(),n=Iu(),o=t.videoStatus,s=t.setVideoStatus,l=t.resetVideoStatus,c=t.setCurrentTimeRange,d=(0,r.useMemo)((()=>{var e=0,t=[];return a.forEach((i=>{e+=i.videoInfo.allAnimationTimeBySpeed,t.push(e)})),{startTime:0,endTime:e,allAnimationTime:e,timeRange:t}}),[n]),p=(0,r.useMemo)((()=>{var t=d.timeRange.findIndex((t=>t>e.currentTime));return-1===t||t>a.length-1?0:t}),[e.currentTime,d]),v=(0,r.useMemo)((()=>{var e;return c(null!==(e=d.timeRange[p-1])&&void 0!==e?e:0),a[p]}),[p]);return s((0,u.Z)({},e)),{videoStatus:o,resetVideoStatus:l,template:v,templateList:a,audioList:i,timerVideoInfo:d,currentTemplateIndex:p}}i(14643);var xp=i(92909),yp=i(3911),bp=i(10641),_p=i(83438),jp=i(92090),wp=i(13038),kp=i(50257);function Tp(){var e=(0,kp.CG)((e=>({templateInfo:e.templateInfo}))),t=e.templateInfo;return t}function Zp(e){var t=(0,kp.TL)(),i=Tp(),a=(0,Ju.Z)((()=>{var t=e.slice(0,1).toUpperCase(),i=e.slice(1);return"update".concat(t).concat(i)}),[e]);function n(e){t(kp.uj[a](e))}function r(e){n(e)}return{update:r,value:i[e]}}function Cp(){var e,t=[...Rw()],i=(null===(e=t[0])||void 0===e?void 0:e.canvas)||{width:100,height:100},a=i.width/i.height,n=a>1?"w":1===a?"c":"h";return{ratioNumber:a,ratioType:n,templates:t}}function Np(){var e=(0,kp.TL)(),t=(0,kp.CG)((e=>{var t,i=(e.templateInfo.canvasInfo.width||0)/(e.templateInfo.canvasInfo.height||0);return{templateInfo:e.templateInfo,templateScale:i||1,previewUrl:null===(t=e.templateInfo)||void 0===t?void 0:t.small_url}})),i=t.templateInfo,a=t.templateScale,n=t.previewUrl;function r(t){var a=t.info,n=t.assets,r=void 0===n?[]:n,o=t.doc,s=t.picId;a.doc_md5||delete a.doc_md5;var l=r.filter((e=>1===e.use_level)),c=(0,u.Z)((0,u.Z)({picId:s},a),{},{assets:(0,wp.Z)(i.assets.concat(l),"resId"),canvasInfo:o.canvas});e(kp.uj.setTemplateInfo(c))}function o(t){e(kp.uj.setTemplateInfo((0,u.Z)((0,u.Z)({},i),{},{approval_url:t})))}return{templateInfo:i,templateScale:a,updateTemplateInfo:r,previewUrl:n,updateApprovalUrl:o}}function Sp(){return kp.h.getState().templateInfo.assets}function Ip(e){kp.h.dispatch(kp.uj.updateReplaceWarn(e))}function Ap(){return Zp("assets")}function Pp(){return Zp("title")}function Mp(e){kp.h.dispatch(kp.uj.updateCanvasInfo(e))}function Ep(){var e=(0,kp.CG)((e=>e.templateInfo)),t=e.canvasInfo;return{update:Mp,value:t}}function Lp(){return kp.h.getState().templateInfo.canvasInfo}function Dp(e){kp.h.dispatch(kp.uj.updateDocMd5(e))}function Rp(e){kp.h.dispatch(kp.uj.updateDataInfo(e))}function zp(e){kp.h.dispatch(kp.uj.updatePicId(e))}function Fp(e){kp.h.dispatch(kp.uj.updateCoverPath(e))}function Op(e){kp.h.dispatch(kp.uj.updateCoverTime(e))}function Bp(){return kp.h.getState().templateInfo}function Wp(e){kp.h.dispatch(kp.uj.updateCanvasScale(e))}function Vp(){return Zp("canvasScale")}function Up(){kp.h.dispatch(kp.uj.setLoadFinish(!0))}function Gp(){var e=(0,kp.CG)((e=>e.templateInfo)),t=e.loadFinish;return t}var Xp,qp,Hp,Yp,Kp,Qp,Jp,$p,ev=e=>{var t=e.template_type,i=void 0===t?4:t,a=(0,yp.Z)(e,["template_type"]);return bp.g.get("/api/user-get-templ?".concat((0,jp.stringify)(a),"&template_type=").concat(i))},tv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return bp.g.get("/api/get-template-filter?params=".concat(e))},iv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{p:1};return bp.g.get("/api/get-template-list-v2?".concat((0,jp.stringify)(e)))},av=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{p:1};return bp.g.get("/api/get-template-single-list?".concat((0,jp.stringify)(Lp()),"&").concat((0,jp.stringify)(e)))},nv=e=>{var t=e.ratio,i=void 0===t?"":t,a=e.page,n=void 0===a?1:a;return bp.g.get("/template/fav-list?ratio=".concat(i,"&page=").concat(n,"&pageSize=",40))},rv=e=>{var t=e.ratio,i=void 0===t?"":t,a=e.page,n=void 0===a?1:a;return bp.g.get("/template/draft-list?ratio=".concat(i,"&page=").concat(n,"&pageSize=",40))},ov=()=>bp.g.get("/apiv2/get-fav-template?template_type=4&prep=1"),sv=e=>bp.g.get("/apiv2/add-fav-template?tid=".concat(e)),lv=e=>bp.g.get("/apiv2/del-fav-template?tid=".concat(e));function cv(e){return bp.g.post("/creator-api/template",{body:JSON.stringify(e)})}function dv(e){return bp.g.post("/creator-api/template/".concat(e.id),{body:JSON.stringify(e)})}function uv(e,t){return bp.g.get("/creator-api/template/".concat(e,"?renovate_type=").concat(null!==t&&void 0!==t?t:"","&time=").concat(Date.now()))}function pv(){return bp.g.get("/template/label-list")}function vv(e){return bp.g.post("/workspace/copy-draft",{data:e})}var mv,hv,fv,gv,xv,yv,bv,_v,jv,wv=(Xp=Reflect.metadata("design:type",Array),qp=class{constructor(){(0,l.Z)(this,"activeIndex",Hp,this),(0,l.Z)(this,"resAssets",Yp,this),(0,l.Z)(this,"loading",Kp,this),(0,l.Z)(this,"setTemplateIndex",Qp,this),(0,l.Z)(this,"initResAssets",Jp,this),(0,l.Z)(this,"setLoading",$p,this),(0,s.rC)(this)}},Hp=(0,c.Z)(qp.prototype,"activeIndex",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Yp=(0,c.Z)(qp.prototype,"resAssets",[s.LO,Xp],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Kp=(0,c.Z)(qp.prototype,"loading",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Qp=(0,c.Z)(qp.prototype,"setTemplateIndex",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.activeIndex=e}}}),Jp=(0,c.Z)(qp.prototype,"initResAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.resAssets=e}}}),$p=(0,c.Z)(qp.prototype,"setLoading",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.loading=e}}}),qp),kv=new wv,Tv=kv,Zv=()=>{var e=Tv.resAssets;return e};function Cv(e){kp.h.dispatch(kp.uO.setVolumeController(e))}function Nv(e){kp.h.dispatch(kp.uO.setSpeedController(e))}function Sv(){var e=(0,kp.CG)((e=>e.audios)),t=e.volumeController;return{visible:t,setVolumeController:Cv}}function Iv(){var e=(0,kp.CG)((e=>e.audios)),t=e.speedController;return{visible:t,setSpeedController:Nv}}function Av(){return kp.h.getState().audios}function Pv(e){Av().inCliping!==e&&kp.h.dispatch(kp.uO.setInCliping(e))}function Mv(e){var t;(null===(t=Av().activeAudio)||void 0===t?void 0:t.rt_id)!==(null===e||void 0===e?void 0:e.rt_id)&&kp.h.dispatch(kp.uO.setActiveAudio(e))}function Ev(e){kp.h.dispatch(kp.uO.setAudioInfo(e))}function Lv(e){kp.h.dispatch(kp.uO.setAudioInfo({volume:e}))}function Dv(e){kp.h.dispatch(kp.uO.setAudioInfo({speed:e}))}function Rv(e){kp.h.dispatch(kp.uO.setAudioInfo(e))}function zv(){var e=(0,kp.CG)((e=>e.audios)),t=e.activeAudio,i=e.inCliping;return{activeAudio:t,updateActiveAudio:Mv,inCliping:i,setActiveAudioInCliping:Pv}}function Fv(){return kp.h.getState().audios.activeAudio}function Ov(){kp.h.dispatch(kp.uO.clear())}var Bv=(mv=Reflect.metadata("design:type",Array),hv=Reflect.metadata("design:type","undefined"===typeof Array?Object:Array),fv=class{constructor(){(0,l.Z)(this,"resAssets",gv,this),(0,l.Z)(this,"quickAssets",xv,this),(0,l.Z)(this,"loading",yv,this),(0,l.Z)(this,"initResAssets",bv,this),(0,l.Z)(this,"initQuickAssets",_v,this),(0,l.Z)(this,"setLoading",jv,this),(0,s.rC)(this)}},gv=(0,c.Z)(fv.prototype,"resAssets",[s.LO,mv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),xv=(0,c.Z)(fv.prototype,"quickAssets",[s.LO,hv],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yv=(0,c.Z)(fv.prototype,"loading",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),bv=(0,c.Z)(fv.prototype,"initResAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.resAssets=e}}}),_v=(0,c.Z)(fv.prototype,"initQuickAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.quickAssets=e}}}),jv=(0,c.Z)(fv.prototype,"setLoading",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.loading=e}}}),fv),Wv=new Bv,Vv=Wv,Uv=()=>{var e=Vv.resAssets;return e},Gv={title:{fontSize:90,fontWeight:"bold",scale:.8,fontFamily:"fnsyhtRegular",color:{r:0,g:0,b:0,a:1}},text:{fontSize:60,fontWeight:"normal",scale:.6,fontFamily:"fnsyhtRegular",color:{r:0,g:0,b:0,a:1}},textBackground:{fontSize:60,fontWeight:"normal",scale:.6,fontFamily:"fnsyhtRegular",color:{r:255,g:255,b:255,a:1},textBackground:{enabled:!0,color:{r:0,g:0,b:0,a:1},opacity:50,borderRadius:0}},effect:{fontSize:60,fontWeight:"normal",scale:.6,fontFamily:"fnsyhtRegular",color:{r:0,g:0,b:0,a:1}},animation:{fontSize:60,fontWeight:"normal",scale:.6}};function Xv(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"\u53cc\u51fb\u7f16\u8f91\u6587\u5b57",i=Gv[e],a=i.fontSize,n=(i.scale,(0,yp.Z)(i,["fontSize","scale"])),r=a*t.length,o=1.5*a;return(0,u.Z)({width:r,height:o,fontSize:a,text:[t]},n)}function qv(e){var t=e.width,i=e.height,a=Kb(),n=a.width,r=a.height,o=n,s=i*n/t;return s<r&&(s=r,o=t*r/i),{width:o,height:s,assetWidth:t,assetHeight:i}}function Hv(e,t){var i=.8*t.height,a=e.width/e.height;return i*a>t.width?Yv(e,t):{width:i*a,height:i}}function Yv(e,t){var i=.8*t.width,a=e.height/e.width;return i*a>t.height?Hv(e,t):{width:i,height:i*a}}function Kv(e){var t,i=e.width,a=e.height,n=e.assetWidth,r=e.assetHeight,o=Kb(),s=o.width,l=o.height;return t=s>=l?Hv(e,o):Yv(e,o),t.width>n&&t.height>r&&(t={width:i,height:a}),(0,u.Z)((0,u.Z)({},t),{},{assetWidth:n,assetHeight:r})}function Qv(e,t,i,a){var n,r=e.height,o=e.width,s=0,l=0,c=i.width,d=i.height;if(a&&ai(a)&&a.assets.length>0){a.attribute;var p=a.transform,v=a.assets[0],m=(null===v||void 0===v?void 0:v.transform.posX)+p.posX+v.attribute.width,h=(null===v||void 0===v?void 0:v.transform.posY)+p.posY+v.attribute.height;s=m-p.posX,l=h-p.posY,n=Bn(t,{height:v.attribute.height,width:v.attribute.width},c,d,s,l)}else n=Bn(t,{height:r,width:o},c,d,s,l);return(0,u.Z)((0,u.Z)({},n),{},{assetWidth:t.width,assetHeight:t.height})}var Jv=e=>{var t=O(e)||e,i=t.meta.type,a=t.attribute,n=a.picUrl,r=a.SVGUrl,o=a.rt_svgString,s=a.rt_preview_url;switch(i){case"image":case"pic":case"background":return n;case"SVG":case"mask":return r||o;case"lottie":case"video":case"videoE":return s;default:return""}},$v=i(20511),em=()=>(0,$v.Z)({length:6}),tm=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={locked:!1,index:0,name:"",group:"",isQuickEditor:"text"===e.type,trackId:em()};return Object.assign(t,e)},im=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0};return Object.assign(t,e)},am=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1};return Object.assign(t,e)};tm({type:"SVG"}),tm({type:"image"}),tm({type:"background",locked:!0,isQuickEditor:!1}),tm({type:"pic"}),tm({type:"container",isQuickEditor:!1}),tm({type:"text"}),tm({type:"group"}),tm({type:"chart",isEqualTransform:!1,isQuickEditor:!1}),tm({type:"table",id:"",isQuickEditor:!1}),tm({type:"lottie",groupWordID:"",isQuickEditor:!1}),tm({type:"video",isBackground:!0,groupWordID:"",isQuickEditor:!1}),tm({type:"videoE",groupWordID:"",isQuickEditor:!1});function nm(){return{meta:tm({type:"lottie",groupWordID:""}),attribute:{resId:0,width:0,height:0,startTime:0,endTime:1e3,isLoop:!0,opacity:100,rt_url:"",rt_total_frame:100,rt_preview_url:"",rt_frame_url:""},transform:{posX:0,posY:0,rotate:0,horizontalFlip:!1,verticalFlip:!1}}}function rm(){return{meta:tm({type:"text",addOrigin:"specificWord"}),attribute:{text:["\u53cc\u51fb\u7f16\u8f91\u6587\u5b57"],fontSize:24,fontWeight:"normal",textAlign:"center",width:200,height:50,opacity:100,lineHeight:13,letterSpacing:0,color:{r:0,g:0,b:0,a:1},animation:{enter:{baseId:0,duration:500,details:{direction:2}},stay:{},exit:{baseId:0,duration:500,details:{direction:2}}}},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function om(){return{meta:tm({type:"image"}),attribute:{resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function sm(){return{meta:tm({type:"SVG"}),attribute:{resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function lm(){return{meta:tm({type:"svgPath"}),attribute:am(),transform:im()}}function cm(){var e=Kb(),t=e.width,i=e.height;return{meta:tm({type:"effect"}),attribute:am({width:t,height:i}),transform:im()}}function dm(){return{meta:tm({type:"qrcode"}),attribute:{resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function um(){return{meta:tm({type:"mask",isClip:!1}),attribute:{resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function pm(){return{meta:tm({type:"videoE",groupWordID:""}),attribute:{resId:0,width:0,height:0,startTime:0,endTime:1e3,isLoop:!1,opacity:100,rt_url:"",rt_total_frame:100,rt_preview_url:"",rt_frame_url:""},transform:{posX:0,posY:0,rotate:0,horizontalFlip:!1,verticalFlip:!1}}}function vm(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{meta:tm({type:e?"__module":"module",groupWordID:""}),attribute:{width:0,height:0},transform:{posX:0,posY:0,rotate:0},assets:[]}}function mm(e){var t=Bw().videoInfo,i=t.allAnimationTime,a=t.offsetTime;a=void 0===a?[0,0]:a;var r=(0,n.Z)(a,2),o=r[0],s=(r[1],t.speed),l=void 0===s?1:s,c=Ab()/(1/l),d=Math.max(bd,i-c);d=Math.min(d,e);var u=Math.min(c+d,i),p=Math.max(u-d,0);return{startTime:p+o,endTime:u+o}}function hm(e){var t=Bw().videoInfo,i=t.allAnimationTime,a=t.offsetTime;a=void 0===a?[0,0]:a;var r=(0,n.Z)(a,2),o=r[0],s=(r[1],t.speed),l=void 0===s?1:s,c=Ab()/(1/l),d=null!==e&&void 0!==e?e:Math.max(bd,i-c),u=Math.min(c+d,i),p=Math.max(u-d,0);return{startTime:p+o,endTime:u+o}}function fm(e){var t=Lp(),i=t.width,a=t.height;return{posX:(i-e.width)/2,posY:(a-e.height)/2}}var gm=500;function xm(e,t){var i=e.width,a=e.height,n=gm/i,r=Lp();if(t.isBackground||t.isOverlay)n=r.width>r.height?r.width/i:r.height/a;else{if("effect"===t.type)return r;i<a&&(n=gm/a)}var o={width:i*n,height:a*n,assetWidth:i,assetHeight:a};return t.isBackground||t.isOverlay||"effect"===t.type||!["video","videoE","image","pic"].includes(t.type)||(o=Kv(o)),o}function ym(e){switch(e){case"text":return rm();case"videoE":case"video":return pm();case"image":case"pic":return om();case"SVG":return sm();case"mask":return um();case"module":return vm();case"lottie":return nm();case"svgPath":return lm();case"effect":return cm();case"qrcode":return dm();default:return{meta:{},attribute:{},transform:{}}}}var bm={visible:!0,title:"\u4fdd\u5b58\u6570\u636e",type:4,buttonType:2,buttonText:"\u77e5\u9053\u4e86",desc:"\u4e3a\u4e86\u907f\u514d\u60a8\u4fee\u6539\u6570\u636e\u4e22\u5931\uff0c\u8bf7\u53ca\u65f6\u4fdd\u5b58\u60a8\u4fee\u6539\u7684\u6570\u636e\u6587\u6863",popupContainer:"#userSave",position:"bottom",offset:[0,0,20,0],arrowStyle:{transform:"rotate(111deg)",right:100,top:-40}},_m=[[{key:"NoviceGuide00",index:0,visible:!0,title:"\u9009\u4e2d\u6a21\u677f\u5167\u6587\u5b57/\u56fe\u7247/\u89c6\u9891\u53cc\u51fb\u4fee\u6539",type:1,buttonType:2,currentStep:1,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"",popupContainer:".xiudodo-canvas",position:"left",offset:[0,0,0,300],arrowStyle:{transform:"rotate(202deg)",right:-30},webLog:{action_type:"openTempl",step:1}},{index:0,visible:!0,title:"\u9009\u4e2d\u7684\u5143\u7d20\u53ef\u8bbe\u7f6e\u64cd\u4f5c\u90fd\u5728\u8fd9\u91cc\u54e6\uff01",type:1,buttonType:2,currentStep:2,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u8fd9\u91cc\u662f\u9488\u5bf9\u4e0d\u540c\u5143\u7d20\u53ef\u8bbe\u7f6e\u6216\u6dfb\u52a0\u7684\u5177\u4f53\u64cd\u4f5c\uff0c\u5feb\u6765\u8bd5\u8bd5\u770b\u5427\u3002",popupContainer:".xiudodo-topBar-content",offset:[0,0,0,0],position:"bottom-left",arrowStyle:{transform:"rotate(140deg)",top:-45},webLog:{action_type:"openTempl",step:2}},{index:0,visible:!0,title:"\u7247\u6bb5\u65f6\u957f\u8c03\u6574\u3001\u7247\u6bb5\u5206\u5272\u3001\u97f3\u4e50\u8c03\u6574\u770b\u8fd9\u91cc",type:1,buttonType:2,currentStep:3,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u62d6\u62fd\u7247\u6bb5\u3001\u97f3\u8f682\u7aef\u53ef\u4ee5\u8c03\u6574\u65f6\u957f\uff0c\u53f3\u952e\u53ef\u67e5\u770b\u66f4\u591a\u64cd\u4f5c\uff0c\u5feb\u6765\u70b9\u70b9\u5427\u3002",popupContainer:"#xiudodo-bottom",position:"top",offset:[50,0,0,0],arrowStyle:{transform:"rotate(316deg)",bottom:-45,left:"35%"},webLog:{action_type:"openTempl",step:3}},{index:0,visible:!0,title:"\u6a21\u677f\u3001\u6587\u4ef6\u4e0a\u4f20\u3001\u5b57\u4f53 \u3001\u97f3\u4e50\u7b49\u8d44\u6e90\u5e93",type:1,buttonType:2,currentStep:4,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u4fa7\u8fb9\u4e3a\u4e30\u5bcc\u7684\u8d44\u6e90\u5bfc\u822a\u5e93\uff0c\u53ef\u6839\u636e\u9700\u6c42\u6765\u6dfb\u52a0\uff0c\u6dfb\u52a0\u52a8\u4f5c\u53ef\u70b9\u51fb\u3001\u53ef\u62d6\u62fd\u3002\u5feb\u6765\u4f53\u9a8c\u4e00\u4e0b\u5427\u3002",popupContainer:".xiudodo-aside-menu",position:"right-top",offset:[20,0,0,0],arrowStyle:{transform:"rotate(73deg)",left:-35},webLog:{action_type:"openTempl",step:4}},{index:0,visible:!0,title:"\u5bfc\u51fa\u89c6\u9891\u770b\u770b\u6548\u679c\u5427\uff01",type:1,buttonType:2,currentStep:5,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u6700\u540e\u4e00\u6b65\uff0c\u5408\u6210\u5bfc\u51fa\u89c6\u9891 \uff0c\u6bcf\u4e00\u6b21\u5bfc\u51fa\u90fd\u4f1a\u6d88\u8017\u4e00\u6b21\u5408\u6210\u6b21\u6570\u54e6\u3002",popupContainer:"#down-load",position:"bottom-right",offset:[0,0,20,0],arrowStyle:{transform:"rotate(144deg)",top:-45,right:59},webLog:{action_type:"openTempl",step:5}}],[{index:1,visible:!0,title:"\u4ece\u6a21\u677f/\u7247\u6bb5\u4e2d\u76f4\u63a5\u6dfb\u52a0\u5230\u753b\u5e03",type:1,buttonType:2,currentStep:1,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u6a21\u677f\u662f\u5b8c\u5168\u53ef\u4ee5\u81ea\u7531\u7f16\u8f91\u4fee\u6539\u7684\uff0c\u4f60\u53ef\u4ee5\u641c\u7d22\u6a21\u7248\u76f4\u63a5\u62d6\u62fd\u6216\u70b9\u51fb\u6dfb\u52a0\u5230\u753b\u5e03\u4e2d\u95f4\u3002",popupContainer:".side-panel-wrap",position:"right-top",offset:[50,0,0,180],arrowStyle:{transform:"rotate(69deg)",left:-30},webLog:{action_type:"newBlank",step:1}},{index:1,visible:!0,title:"\u4e0a\u4f20\u4f60\u7684\u56fe\u7247\u3001\u89c6\u9891\u3001\u97f3\u9891",type:1,buttonType:2,currentStep:2,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u60f3\u8981\u4e0a\u4f20\u81ea\u5df1\u7684\u56fe\u7247\uff0c\u4ece\u8fd9\u91cc\u5f00\u59cb\u3002\u6216\u8005\u4f60\u53ef\u4ee5\u76f4\u63a5\u62d6\u62fd\u8fdb\u6765\u3002",popupContainer:"#left-menu-user-space",position:"right-top",arrowStyle:{transform:"rotate(69deg)",left:-30},webLog:{action_type:"newBlank",step:2}},{index:1,visible:!0,title:"\u6dfb\u52a0\u6587\u5b57\u4ece\u8fd9\u91cc\u5f00\u59cb",type:1,buttonType:2,currentStep:3,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u6253\u5f00\u6587\u5b57\u6807\u7b7e\uff0c\u53ef\u4ee5\u9009\u62e9\u6dfb\u52a0\u57fa\u7840\u6587\u5b57\u6216\u662f\u5e26\u989c\u8272\u6837\u5f0f\u7684\u7efc\u827a\u82b1\u5b57\u3002",popupContainer:"#left-menu-text",position:"right-top",arrowStyle:{transform:"rotate(69deg)",left:-30},webLog:{action_type:"newBlank",step:3}},{index:1,visible:!0,title:"\u4e91\u7aef\u97f3\u4e50\u3001\u81ea\u5b9a\u4e49\u5f55\u97f3\u4ece\u8fd9\u91cc\u5f00\u59cb",type:1,buttonType:2,currentStep:4,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u6253\u5f00\u97f3\u4e50\u6807\u7b7e\uff0c\u627e\u5230\u81ea\u5df1\u559c\u6b22\u7684\u6216\u8005\u4e0a\u4f20\u81ea\u5df1\u7684\u97f3\u4e50\uff0c\u76f4\u63a5\u62d6\u62fd\u6216\u8005\u70b9\u51fb\u6dfb\u52a0\u5230\u97f3\u4e50\u8f68\u9053\u3002",popupContainer:"#left-menu-music",position:"right-top",arrowStyle:{transform:"rotate(69deg)",left:-30},webLog:{action_type:"newBlank",step:4}},{index:1,visible:!0,title:"\u5bfc\u51fa\u89c6\u9891\u770b\u770b\u6548\u679c\u5427\uff01",type:1,buttonType:2,currentStep:5,totalStep:5,buttonText:"\u5b66\u5230\u4e86",desc:"\u6700\u540e\u4e00\u6b65\uff0c\u5408\u6210\u5bfc\u51fa\u89c6\u9891 \uff0c\u6bcf\u4e00\u6b21\u5bfc\u51fa\u90fd\u4f1a\u6d88\u8017\u4e00\u6b21\u5408\u6210\u6b21\u6570\u54e6\u3002",popupContainer:"#down-load",position:"bottom-right",offset:[0,0,20,0],arrowStyle:{transform:"rotate(144deg)",top:-45,right:59},webLog:{action_type:"newBlank",step:5}}]],jm={type:2,visible:!0,title:"\u5355\u4e2a\u5143\u7d20\u65f6\u957f\u8c03\u6574\uff0c\u8c03\u6574\u8bd5\u8bd5",buttonType:0,buttonText:"\u5b66\u5230\u4e86",desc:"\u62d6\u62fd\u5143\u7d20\u4e24\u7aef\uff0c\u53ef\u8c03\u6574\u5143\u7d20\u5728\u672c\u7247\u6bb5\u51fa\u73b0\u7684\u4f4d\u7f6e\u548c\u65f6\u957f\u5feb\u6765\u8bd5\u8bd5\u3002",popupContainer:"#bottom_selected_asset",position:"top",ignoreBtn:!1,offset:[-50,0,0,0],arrowStyle:{transform:"rotate(312deg)",bottom:-45},webLog:{action_type:"fucShow",trigger:"trimDurationGuide"}},wm={type:2,visible:!0,title:"\u5c1d\u8bd5\u62d6\u62fd\u56fe\u7247/\u89c6\u9891\u5230\u753b\u5e03\u8499\u677f",buttonType:0,buttonText:"\u5b66\u5230\u4e86",desc:"\u4f60\u53ef\u4ee5\u76f4\u63a5\u62d6\u62fd\u56fe\u7247/\u89c6\u9891\u5230\u6dfb\u52a0\u5230\u8499\u677f\u4e0a\u53bb\uff0c\u770b\u770b\u6548\u679c",popupContainer:".upload-content",position:"right",ignoreBtn:!1,arrowStyle:{transform:"rotate(35deg)",left:-35,top:"30%"},webLog:{action_type:"fucShow",trigger:"dragInMaskGuide"}},km={type:2,visible:!0,title:"\u4e0a\u4f20\u4f60\u7684\u56fe\u7247\u3001\u89c6\u9891\u3001\u97f3\u9891",buttonType:0,buttonText:"\u5b66\u5230\u4e86",desc:"\u60f3\u8981\u4e0a\u4f20\u81ea\u5df1\u7684\u56fe\u7247\uff0c\u4ece\u8fd9\u91cc\u5f00\u59cb\u3002\u6216\u8005\u4f60\u53ef\u4ee5\u76f4\u63a5\u62d6\u62fd\u8fdb\u6765\uff0c\u7136\u540e\u8fdb\u884c\u66ff\u6362\u548c\u6dfb\u52a0\u3002",popupContainer:"#left-menu-user-space",position:"right-top",ignoreBtn:!1,offset:[120,120,120,120],arrowStyle:{transform:"rotate(35deg)",left:-35,top:"30%"},webLog:{action_type:"fucShow",trigger:"uploadkGuide"}},Tm={visible:!0,title:"\u7247\u6bb5\u65f6\u957f\u8c03\u6574\u3001\u7247\u6bb5\u5206\u5272\u3001\u97f3\u4e50\u8c03\u6574\u770b\u8fd9\u91cc",type:2,buttonType:0,buttonText:"\u5b66\u5230\u4e86",desc:"\u62d6\u62fd\u7247\u6bb5\u3001\u97f3\u8f682\u7aef\u53ef\u4ee5\u8c03\u6574\u65f6\u957f\uff0c\u53f3\u952e\u53ef\u67e5\u770b\u66f4\u591a\u64cd\u4f5c\uff0c\u5feb\u6765\u70b9\u70b9\u5427\u3002",popupContainer:"#xiudodo-bottom",position:"top",offset:[50,0,0,0],arrowStyle:{transform:"rotate(316deg)",bottom:-45,left:"35%"},webLog:{action_type:"fucShow",trigger:"assetClip"}},Zm=i(48974),Cm=i(72179);function Nm(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.9,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:60,n=t.height-a,r=n/e.height,o=e.width*r,s=t.width*i;return o>s&&(r=s/e.width),Number(r<.1?r.toFixed(2):r.toFixed(1))}var Sm=.2;function Im(e){var t=Lp();if(e){var i=e.getBoundingClientRect(),a=i.width,n=i.height,r=Nm(t,{width:a,height:n});Wp(Math.max(r,Sm))}}function Am(e){var t=e.container,i=Ep(),a=i.value,n=Vp(),o=n.value,s=(0,Cm.Z)(t),l=(0,r.useMemo)((()=>({scale:o,width:a.width*o,height:a.height*o})),[o,a.height,a.width]),c=(0,r.useMemo)((()=>{var e=!1,t=!1;return l.height>Number(s.height)&&(t=!0),l.width>Number(s.width)&&(e=!0),{isScrollX:e,isScrollY:t}}),[l,s]);function d(e){"fit"===e?Im(t):(e<Sm?e=Sm:e>3&&(e=3),Wp(e),ng(!0))}return{update:d,canvasInfo:l,newCanvasInfo:{width:a.width,height:a.height,scale:o},isScroll:c,value:a,scale:o,templateSize:a}}class Pm{constructor(){this.actionType=void 0,this.assetId=void 0,this.assetType=void 0,this.actionType="",this.assetId=-1,this.assetType=""}set(e){var t=e.actionType,i=e.assetId,a=e.assetType;this.actionType=t,this.assetId=i,this.assetType=a}get(){return{actionType:this.actionType,assetType:this.assetType}}}var Mm,Em=e=>{var t=wf(),i="concise"===t?"_concise":"";return"".concat(e).concat(i)},Lm=new Pm;(function(e){e["sce_add_N"]="sce_add_N",e["sce_add_S"]="sce_add_S ",e["sce_del"]="sce_del",e["sce_copy"]="sce_copy",e["canv_tpl_add"]="canv_tpl_add",e["canv_file_up"]="canv_file_up",e["canv_cli_wm"]="canv_cli_wm"})(Mm||(Mm={}));var Dm=()=>{var e,t,i=Rw(),a=null===(e=i.find((e=>e.template.templateId)))||void 0===e?void 0:e.template.templateId;return{draft_id:null!==(t=(0,_p.Z)().upicId)&&void 0!==t?t:0,template_id:a}};function Rm(e){var t,i,a=(0,u.Z)({action_type:e},Dm());null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("editor_action",{extra:JSON.stringify(a)})}function zm(e){var t,i,a=Em("OpenRecharge"),n=(0,u.Z)((0,u.Z)({action_type:"show_popup"},Dm()),e);null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track(a,{extra:JSON.stringify(n)})}function Fm(e,t){var i,a;null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track(e,{extra:t})}function Om(){var e,t;null===(e=window)||void 0===e||null===(t=e.xa)||void 0===t||t.track("DownloadClick",(0,u.Z)({},Dm()))}function Bm(e,t){var i,a,n=Em("edit");null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track(n,{extra:JSON.stringify((0,u.Z)((0,u.Z)({action_type:t},Dm()),{},{action_label:e}))})}function Wm(e){var t,i,a;if(null!==(t=window.__EDITOR_PERFORMANCE__)&&void 0!==t&&t.completed){window.__EDITOR_PERFORMANCE__.sended=!0;var n=window.__EDITOR_PERFORMANCE__,r=n.recieve_end_time,o=n.dom_parse_end_time,s=n.all_resorce_loaded,l=n.user_template_get_start,c=n.user_template_get_ended,d=n.user_resorce_post_start,u=n.user_resorce_post_end,p={dateRecieve:r-window.performance.timing.navigationStart,domLoaded:o-r,resorceLoaded:s-r,userTemplateLoaded:c-l,userTemplateResorceLoaded:u-d},v={tid:e.picId,did:e.upicId,p1:p.dateRecieve,p2:p.domLoaded,p3:p.resorceLoaded,p4:p.userTemplateLoaded,p5:p.userTemplateResorceLoaded};if(0===v.p4&&(v.p5=0),v.p5>12e4){var m=Rw(),h=!1;m.forEach((e=>{!h&&e.assets.length>0&&(h=!0)})),h||(v.p5=0)}null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track("LoadFeedback",{extra:JSON.stringify(v)})}}var Vm=!1;function Um(e,t){var i,a;Vm||(Vm=!0,null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track("LoadComplete",{extra:JSON.stringify({template_id:e,draft_id:t})}))}var Gm=(0,d.Z)((()=>{var e,t;console.log(Lm.get());var i=(0,u.Z)((0,u.Z)({},Dm()),Lm.get());null===(e=window)||void 0===e||null===(t=e.xa)||void 0===t||t.track("EditorCollapse",{extra:JSON.stringify(i)})}),2e3);function Xm(e){var t,i,a=(0,u.Z)((0,u.Z)({},Dm()),{},{type:e});null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("VideoSplit",{extra:JSON.stringify(a)})}function qm(e){var t,i,a=JSON.stringify((0,u.Z)((0,u.Z)({},e),Dm()));null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("limited",{extra:a})}function Hm(e){var t,i,a=JSON.stringify((0,u.Z)((0,u.Z)({},Dm()),e));null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("limitedClick",{extra:a})}function Ym(e){var t,i,a={action_type:e.action_type,team_id:e.team_id};null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("TeamAciton",{extra:JSON.stringify(a)})}function Km(e,t){var i,a,n=Em("editor_action"),r=xu();Lm.set({actionType:e,assetId:null===r||void 0===r?void 0:r.meta.id,assetType:null===r||void 0===r?void 0:r.meta.type});var o=(0,u.Z)((0,u.Z)({},Dm()),{},{action_type:e},t);null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track(n,{extra:JSON.stringify(o)})}function Qm(){var e,t,i=(0,u.Z)({},Dm());null===(e=window)||void 0===e||null===(t=e.xa)||void 0===t||t.track("LoadListen",{extra:JSON.stringify(i)})}function Jm(e){var t,i,a=e.action,n=e.word,r=e.guideType,o=(0,u.Z)((0,u.Z)({},Dm()),{},{guideType:r,action:a,word:n});null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("ProblemHelp",{extra:JSON.stringify(o)})}function $m(e,t){var i,a,n=Em(e),r={action_type:t};null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track(n,{extra:JSON.stringify(r)})}function eh(){var e,t,i={action_type:"openRechargeTip",tool_type:"watermark"};null===(e=window)||void 0===e||null===(t=e.xa)||void 0===t||t.track("VideoTool",{extra:JSON.stringify(i)})}function th(e,t){var i,a,n=(0,u.Z)({action_type:e},t);null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track("editor_action",{extra:JSON.stringify(n)})}function ih(e){try{var t,i;null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("UserGuidePop",{extra:JSON.stringify(e)})}catch(a){}}var ah=()=>{var e=Am({container:document.querySelector(".xiudodo-main")}),t=e.value,i=void 0===t?{width:0,height:0}:t,a=(0,Zm.Z)(((e,t)=>{var a,n,r,o,s=null===e||void 0===e||null===(a=e.meta)||void 0===a?void 0:a.type;ai(e)&&e.assets.length&&(s=null===(n=e.assets[0])||void 0===n||null===(r=n.meta)||void 0===r?void 0:r.type);switch(Bm(s,t),t){case"stopRotate":o="rotate";break;case"assetMove":o="move",setTimeout((()=>{var e=xu();if(e){var t=e.transform,a=t.posX,n=t.posY,r=e.attribute,o=r.width,l=r.height;(a>Number(i.width)||n>Number(i.height)||n<-l||a<-o)&&Km("mouseout",{action_label:s})}}),100);break;case"stopMove":o="scale";break;case"toggleAssetEditStatus":o="unlock";break;case"updateText":o="dbClick",s="text"}o&&Km("canvas_".concat(o),{action_label:s})}),{wait:1e3}),n=a.run;return n};function nh(e,t){var i,a,n=Em(e);null===(i=window)||void 0===i||null===(a=i.xa)||void 0===a||a.track(n,{extra:JSON.stringify(t)})}function rh(e,t){var i,a=Fw();if((!e||1===e)&&!(Number(t.startTime)>0)&&Ik().length<1)return{startTime:0,endTime:Math.min(a,Number(t.rt_duration))};var n=null!==(i=t.startTime)&&void 0!==i?i:Math.round(Pb());return n=Math.min(a-_d,n),n=Math.max(0,n),{startTime:n,endTime:Math.min(a,Number(n)+Number(t.rt_duration))}}var oh=()=>{var e=qk(),t=e.replaceAudio,i=e.setVolume,a=e.setLoop,n=e.setAudioDuration,r=e.setAudioCut,o=e.addAudio,s=e.removeAudio,l=e.setAudios,c=e.setSpeed,d=e.value,p=Hk(),v=p.value,m=zv(),h=m.updateActiveAudio,f=e=>{var t=Ik(),i=t.filter((e=>2===e.rt_sourceType));l([...i,...e]),xp.default.success("\u66ff\u6362\u6210\u529f\uff01")},g=(e,i)=>{var a=t(e,i);xp.default.success("\u66ff\u6362\u6210\u529f\uff01"),h(a)},x=(e,t)=>{i(e,t)},y=(e,t)=>{c(e,t)},b=(e,t)=>{a(e,t)},_=(e,t)=>{var i={startTime:e.startTime,endTime:e.endTime};n(i,t)},j=(e,t)=>{r(e,t)},w=e=>{var t=o(e);xp.default.success("\u6dfb\u52a0\u6210\u529f\uff01"),h((0,u.Z)({},t))},k=e=>{s(e),h()},T=JSON.parse(JSON.stringify(d));return T.sort(((e,t)=>e.startTime-t.startTime)),{bindReplaceAudio:g,audioList:T,bindSetVolume:x,bindSetSpeed:y,bindSetLoop:b,bindSetAudioDuration:_,bindSetAudioCut:j,bindAddAudio:w,bindRemoveAudio:k,bindSetBgAudios:f,BGMList:v}},sh=i(73848);function lh(e){var t=e.incrementalTime,i=e.callback,a=e.tip,n=void 0===a||a,r=Fw(),o=r+t>jd;return o&&n&&xp.default.info(Pd),i&&i(o),o}function ch(){var e=Pb(),t=Fw();e>t&&Lb(t,!1)}function dh(e){Lb(iw()[e][0],!1)}function uh(e){var t=Rw(),i=null!==e&&void 0!==e?e:Bw();return t.find((e=>e.id!==(null===i||void 0===i?void 0:i.id)&&e.assets.length>0))}function ph(e){var t=Du(e.id)-1;dh(t<0?0:t),setTimeout((()=>{fw(e.id)})),ch()}function vh(e){var t=null!==e&&void 0!==e?e:Bw(),i=Rw();if(1===i.length){var a=lw(5e3);ow(a,t.id),Mk([])}else ph(t);ch()}function mh(e){var t=Lw(),i=t.template,a=null!==e&&void 0!==e?e:i;return{delete:vh,disabled:!uh(a)}}function hh(e){var t=e,i=Rw();if(1===i.length){var a=lw(5e3);ow(a,t.id),Mk([])}else{var n=Du(e.id)-1;Nl.setCurrentTemplate(n<0?0:n),fw(e.id)}}function fh(){return Rw().find((e=>0===e.assets.length))}function gh(e){var t=Sp(),i=(0,sh.Z)(e,t,"resId"),a=[...t,...i];Ip(a),lj(a)}function xh(e){var t,i=e.index,a=void 0===i?Ow()+1:i,n=e.incrementalPageTime,r=e.templates,o=e.warnAssets,s=void 0===o?[]:o,l=null!==n&&void 0!==n?n:5e3;if(!lh({incrementalTime:l})){if(r)t=nw(r,a);else{if(fh())return void xp.default.info("\u5df2\u5b58\u5728\u4e00\u4e2a\u7a7a\u6a21\u677f\uff01\uff01");t=cw(5e3,a)}dh(t),gh(s)}}function yh(){var e=fh();return{addTemplate:xh,disabled:e||lh({incrementalTime:5e3,tip:!1}),hasEmpty:e}}function bh(e){var t,i,a=(null===e||void 0===e||null===(t=e.assets)||void 0===t?void 0:t.length)<=0;function n(){a?xp.default.info("\u5df2\u5b58\u5728\u4e00\u4e2a\u7a7a\u6a21\u677f\uff01\uff01"):e&&(xh({index:Du(e.id)+1,templates:[e.getTemplateCloned()],incrementalPageTime:e.videoInfo.allAnimationTimeBySpeed}),We("copyTemplate",!0))}return{copy:n,isEmptyTemplate:a,disabled:a||lh({incrementalTime:null===e||void 0===e||null===(i=e.videoInfo)||void 0===i?void 0:i.allAnimationTime,tip:!1})}}var _h=()=>{var e=Lp(),t=e.width,i=e.height;return t<i?"h":t===i?"c":"w"};function jh(e){var t=lw(kd),i=new kl(t);ow(i,e.id),ch()}function wh(e){return e?{}:{display:"none"}}function kh(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"".concat(t&&e<10?"0":"").concat(e)}function Th(e){var t=Math.floor(e/60),i=Number((e%60).toFixed(1));return"".concat(kh(t),":").concat(kh(i,!0))}function Zh(e){return Math.ceil(e/30*1e3)}function Ch(e){Wj((t=>(0,u.Z)({},e)))}class Nh{constructor(){this.open=()=>{window.onbeforeunload=e=>"\u4f5c\u54c1\u8fd8\u672a\u4fdd\u5b58\u6216\u4e0b\u8f7d\uff0c\u662f\u5426\u8981\u79bb\u5f00\uff1f"},this.close=()=>{window.onbeforeunload=null}}}var Sh=new Nh;class Ih{constructor(e){this.loading=!0,this.delay=void 0,this.loadingNode=void 0,this.timer=void 0,this.adviseTimer=void 0,this.forceRefreshTimer=void 0,this.weblogTimer=void 0,this.closeWindowsLoading=()=>{clearTimeout(this.timer),clearTimeout(this.adviseTimer),clearTimeout(this.forceRefreshTimer),clearInterval(this.weblogTimer);var e=document.getElementById("editorLoadingNew");e&&(this.loading=!1,e.style.display="none")},this.show=()=>{var e=document.getElementById("editorLoadingNew");e&&(this.loading=!0,e.style.display="block",this.adviseTimer=setTimeout((()=>{var e=document.getElementById("editorLoadingNewDesc");e&&(e.innerHTML="\u52a0\u8f7d\u65f6\u95f4\u592a\u957f\uff1f\u4e0d\u59a8\u624b\u52a8\u5237\u65b0\u8bd5\u8bd5")}),3e4),this.forceRefreshTimer=setTimeout((()=>{Sh.close(),window.location.reload()}),6e4),this.weblogTimer=setInterval((()=>{console.log("loading weblog Timer"),Qm()}),1e4))},this.openWindowsLoading=()=>{clearTimeout(this.timer),this.delay?this.timer=setTimeout((()=>{this.show()}),this.delay):this.show()},this.delay=e}}var Ah=new Ih(150);function Ph(e){e.stopPropagation(),e.nativeEvent.stopPropagation()}function Mh(e,t){var i,a=window.localStorage.getItem(e);i=a?JSON.parse(a):{},i=(0,u.Z)((0,u.Z)({},i),t),window.localStorage.setItem(e,JSON.stringify(i))}function Eh(e,t){window.localStorage.setItem(e,JSON.stringify(t))}function Lh(e){var t=window.localStorage.getItem(e)||"";return t?"{"===t[0]?JSON.parse(t):t:""}function Dh(e){var t=e.attribute;if(t){var i=t.colors;switch(e.meta.type){case"SVG":i&&Object.keys(i).forEach((e=>{var t;null!==(t=i[e])&&void 0!==t&&t.id&&i[e]&&(i[e].id=ki())}));break;default:break}}return e}class Rh{constructor(){var e=this;this.pasteTime=new Map,this.copy=function(){var t=(0,p.Z)(m().mark((function t(i){var a,n,r,o,s,l,c,d;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=Ow(),n="template-".concat(a),e.pasteTime.set(n,1),r=encodeURIComponent(JSON.stringify(i)),o="",s=i.data,null!==s&&void 0!==s&&s.meta&&"text"===s.meta.type&&(o=null===s||void 0===s?void 0:s.attribute.text.join("")),l='<div data-copy="'.concat(r,'"><p>').concat(o,"</p></div>"),c=new Blob([l],{type:"text/html"}),d=new Blob([o],{type:"text/plain"}),navigator.clipboard.writeText(""),t.next=13,navigator.clipboard.write([new ClipboardItem({[c.type]:c,[d.type]:d})]);case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this.paste=function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s,l;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return",{});case 2:return e.prev=2,e.next=5,navigator.clipboard.read();case 5:if(i=e.sent,!(i.length>0)){e.next=26;break}if(a=i[0],n=a.types.filter((e=>["text/html"].includes(e))),r=a.types.filter((e=>["text/plain"].includes(e))),!(n.length>0)){e.next=19;break}return r=[],e.next=14,a.getType(n[0]);case 14:if(o=e.sent,!o){e.next=19;break}return s=new FileReader,s.readAsText(o,"utf8"),e.abrupt("return",new Promise((e=>{s.onload=t=>{var i=t.currentTarget.result,a=i.match(/(?<=data-copy=")(.*)(?=")/g);if(a&&a.length>0){var n=decodeURIComponent(a[0]);e(JSON.parse(n))}}})));case 19:if(!(r.length>0)){e.next=26;break}return e.next=22,navigator.clipboard.readText();case 22:if(l=e.sent,!l){e.next=26;break}return Tg({meta:{type:"text",addOrigin:"text"},attribute:(0,u.Z)((0,u.Z)({},Xv("text","\u81ea\u5b9a\u4e49\u7c98\u8d34\u6587\u5b57\uff0c\u53cc\u51fb\u7f16\u8f91\u8fdb\u884c\u4fee\u6539\uff01")),{},{text:[l]})}),e.abrupt("return",{});case 26:e.next=31;break;case 28:e.prev=28,e.t0=e["catch"](2),e.t0.message.indexOf("Read permission denied")>-1&&console.log("error=",e.t0);case 31:case"end":return e.stop()}}),e,null,[[2,28]])})));return function(t){return e.apply(this,arguments)}}(),this.counter=e=>{var t="template-".concat(e),i=this.pasteTime.get(t);this.pasteTime&&i?this.pasteTime.set(t,i+1):this.pasteTime.set(t,1)},this.getCount=e=>{var t="template-".concat(e),i=this.pasteTime.get(t);return this.pasteTime&&i?i:0}}}var zh=new Rh;function Fh(e,t,i){var a=e.clientX,n=e.clientY,r=e=>{var i=e.clientX,r=e.clientY;t&&t(i-a,r-n)},o=e=>{var t=e.clientX,s=e.clientY;i&&i(t-a,s-n),window.removeEventListener("mouseup",o),window.removeEventListener("mousemove",r)};window.addEventListener("mouseup",o),window.addEventListener("mousemove",r)}function Oh(e){var t=e.r,i=e.g,a=e.b,n=e.a;return void 0!==n?"rgba(".concat(t,",").concat(i,",").concat(a,",").concat(n,")"):"rgba(".concat(t,",").concat(i,",").concat(a,")")}function Bh(e){var t=JSON.parse(JSON.stringify(e));t.colorStops.sort(((e,t)=>e.offset-t.offset)),t.angle=90-t.angle;var i="linear-gradient(".concat(t.angle,"deg,");return t.colorStops.forEach(((e,a)=>{var n=e.color;n&&("string"!==typeof n&&(n=Oh(n)),i=a===t.colorStops.length-1?"".concat(i+n," ").concat(100*e.offset,"%"):"".concat(i+n," ").concat(100*e.offset,"%,"))})),i+=")",i}function Wh(e){var t=rh(e.rt_sourceType,(0,u.Z)((0,u.Z)({},e),{},{startTime:void 0,endTime:void 0})),i=Uk((0,u.Z)((0,u.Z)({},e),t));Mv(i)}function Vh(e){return!e||!e.meta.type||void 0===e.attribute.width||void 0===e.attribute.height||void 0===e.attribute.startTime||void 0===e.attribute.endTime||void 0===e.transform.posX||void 0===e.transform.posY}function Uh(e){if(!Vh(e)){var t=xk(e);t=Dh(t);var i=30,a=Ow();t.meta.isUserAdd=!0;var n=t,r=n.attribute,o=r.endTime,s=r.startTime,l=(r.cst,r.cet,(0,yp.Z)(r,["endTime","startTime","cst","cet"]),n.transform),c=l.posX,d=l.posY,u=hm(o-s);t.updateAssetDuration(u);var p=zh.getCount(a);return p?(t.transform.posX=c+p*i,t.transform.posY=d+p*i):(t.transform.posX=c+i,t.transform.posY=d+i),t}}function Gh(){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,p.Z)(m().mark((function e(){var t,i,a,n,r,o,s,l,c,d,p,v,h,f,g,x=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=x.length>0&&void 0!==x[0]?x[0]:{},i=t.asset,e.next=3,zh.paste(!i);case 3:if(a=e.sent,null!==a&&void 0!==a&&a.data||i){e.next=6;break}return e.abrupt("return");case 6:if(n=a.type,r=a.data,o=a.canvasInfo,s=Kb(),!o||s.width===o.width&&s.height===o.height){e.next=13;break}if("template"!==n){e.next=12;break}return xp.default.info("\u6a21\u677f\u5c3a\u5bf8\u4e0d\u4e00\u81f4\uff0c\u65e0\u6cd5\u5e94\u7528\uff01"),e.abrupt("return");case 12:"asset"===n&&(l=fm(r.attribute),Object.assign(r.transform,l));case 13:if("audio"!==n){e.next=16;break}return Wh(r),e.abrupt("return");case 16:if("template"!==n){e.next=19;break}return xh({templates:[r],incrementalPageTime:r.videoInfo.allAnimationTime}),e.abrupt("return");case 19:c=(null===i||void 0===i?void 0:i.getAssetCloned())||r,d=Ow(),ii(c)?(v=[],null===(p=c.assets)||void 0===p||p.forEach((e=>{var t=Uh(e);t&&v.push(t)})),h=Bw(),h.addAssets(v),We("addCopyTempModule",!0)):(f=Uh(c),f&&(null!==f&&void 0!==f&&f.meta.isBackground?(g=dw({assets:[(0,u.Z)({isBackground:!0,type:f.meta.type},f.attribute)],pageTime:f.attribute.endTime-f.attribute.startTime,index:d+1}),Lb(iw()[g][0],!1)):Tg(f,{},!!n)),i||zh.counter(d));case 22:case"end":return e.stop()}}),e)}))),Xh.apply(this,arguments)}var qh=()=>(0,$v.Z)({length:6});function Hh(e){return"0".concat(e.toString(16)).slice(-2)}var Yh=e=>{var t=e.r,i=e.g,a=e.b,n=e.a;return t=Math.floor(t*n),i=Math.floor(i*n),a=Math.floor(a*n),"#".concat(Hh(t)).concat(Hh(i)).concat(Hh(a))},Kh=e=>{var t,i,a="mask"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)&&null!==e&&void 0!==e&&null!==(i=e.assets)&&void 0!==i&&i.length?e.assets[0]:e;return a};function Qh(){var e=Math.floor(16777216*Math.random()).toString(16);while(e.length<6)e="0".concat(e);return"#".concat(e)}function Jh(){var e=(0,kp.CG)((e=>({globalStatus:e.globalStatus}))),t=e.globalStatus;return t}function $h(e){var t=(0,kp.TL)(),i=Jh(),a=(0,Ju.Z)((()=>{var t=e.slice(0,1).toUpperCase(),i=e.slice(1);return"set".concat(t).concat(i)}),[e]);function n(e){t(kp.QP[a](e))}function r(){n(!0)}function o(){n(!1)}return{open:r,close:o,value:i[e]}}function ef(e){kp.h.dispatch(kp.QP.setTimeAxisScale(e))}function tf(){var e=Jh(),t=e.timeAxisScale;return{value:t,update:ef}}function af(){return $h("layersVisit")}function nf(){return $h("videoVolumeController")}function rf(){return $h("aiDubbingModal")}function of(){return $h("videoPreviewModal")}function sf(){return $h("rechargeModal")}function lf(){return $h("downloadPopover")}function cf(){return $h("upgradeVipGuidance")}function df(){return $h("capacityToRemindModal")}function uf(){return $h("inviteMembersModal")}function pf(){var e=(0,kp.TL)(),t=Jh(),i=t.teamCountModal,a=t.teamCountType,n=t.teamId;function r(t){e(kp.QP.setTeamCountType(t))}function o(t){e(kp.QP.setTeamId(t))}function s(t,i){r(t),o(i),e(kp.QP.setTeamCountModal(!0))}function l(){e(kp.QP.setTeamCountModal(!1))}return{teamId:n,type:a,visible:i,open:s,close:l}}function vf(){return $h("downloadTheTransfiniteModal")}var mf={download:1,openVipRecharge:2,openVipUpgrade:3,openMyDownload:4};function hf(){var e=(0,kp.TL)(),t=Jh(),i=t.downloadInfo;function a(t){var i=t.message,a=t.description,n=t.buttonType,r=t.buttonText,o=t.pixelType,s=t.remainingTimes,l=void 0===s?-1:s;if([i,a,n,r,o].some((e=>""===e||void 0===e||null===e)))throw new Error("useDownloadInfo.open is missing required fields");e(kp.QP.setDownloadInfo({visible:!0,message:i,description:a,buttonType:n,buttonText:r,remainingTimes:l,pixelType:o}))}function n(){e(kp.QP.setDownloadInfo({visible:!1,message:"",description:"",buttonType:-1,buttonText:"",vipType:-1,remainingTimes:-1}))}function r(t){e(kp.QP.setDownloadInfo({pixelType:t}))}return{buttonType:mf,visible:i.visible,downloadInfo:i,close:n,open:a,pixelType:i.pixelType,setPixelType:r,exportType:i.exportType,setExportType:t=>e(kp.QP.setDownloadInfo({exportType:t}))}}function ff(){var e=(0,kp.TL)(),t=Jh(),i=t.downloadProgress;function a(t){if(!t)return!1;e(kp.QP.setDownloadProgress({jobId:t,visible:!0}))}function n(){e(kp.QP.setDownloadProgress({jobId:null,visible:!1}))}return{value:i.visible,jobId:i.jobId,close:n,open:a}}function gf(){return $h("paySuccessModal")}function xf(){return $h("loginModal")}function yf(){var e=(0,kp.TL)(),t=Jh(),i=t.userCheckerStatus;function a(t){i.loginAlert!==t.loginAlert&&e(kp.QP.setUserCheckerStatus(t))}function n(){a({reLoginTips:!0})}function r(){a({reLoginTips:!1})}function o(){a({loginAlert:!0})}function s(){a({loginAlert:!1})}function l(){a({loginAlert:!0})}function c(){a({loopRun:!0})}function d(){a({loopRun:!1})}return{reLoginTips:i.reLoginTips,loginAlert:i.loginAlert,loopRun:i.loopRun,showLoginAlert:o,closeLoginAlert:s,openLoginAlert:l,startLoop:c,stopLoop:d,showReLogin:n,closeReLoginTips:r}}function bf(){var e=(0,kp.TL)(),t=Jh(),i=t.loginModal;function a(){e(kp.QP.setLoginModal(!0))}function n(){e(kp.QP.setLoginModal(!1))}return{loginModal:i,showLoginModal:a,closeLoginModal:n}}function _f(){var e=(0,kp.TL)(),t=Jh(),i=t.partModal,a=t=>{e(kp.QP.setPartModal(t))};return{partModal:i,changePartModal:a}}function jf(){var e=(0,kp.TL)(),t=Jh(),i=t.timeLinePartKey,a=t=>{e(kp.QP.setTimeLinePartKey(t))};return{timeLinePartKey:i,setTimeLinePartKey:a}}function wf(){return kp.h.getState().globalStatus.editMode}function kf(){var e=(0,kp.TL)(),t=Jh(),i=t.editMode,a=t=>{e(kp.QP.setEditMode(t))},n="concise"===i;return{editMode:i,setEditMode:a,isConcise:n}}function Tf(){var e=(0,kp.TL)(),t=Jh(),i=t.addSvgType,a=i,n=t=>{e(kp.QP.setAddSvgType(t))};return{addSvgType:a,setAddSvgType:n}}function Zf(){var e=(0,kp.TL)(),t=Jh(),i=t.dropdownVisible,a=t=>{e(kp.QP.setDropdownVisible(t))};return{dropdownVisible:i,setDropdownVisible:a}}function Cf(){var e=(0,kp.TL)(),t=Jh(),i=t.leftSideInfo;function a(t){var a=null!==t&&void 0!==t?t:{},n=a.menu,r=a.submenu,o=void 0===r?"":r,s=a.modal,l=void 0===s?"":s,c=a.params,d=void 0===c?void 0:c;e(kp.QP.setLeftSideInfo({sidePanelVisible:!0,menu:n||i.menu||"template",submenu:o,params:d,modal:l}))}function n(){e(kp.QP.setLeftSideInfo((0,u.Z)((0,u.Z)({},i),{},{sidePanelVisible:!1})))}function r(t){e(kp.QP.setLeftSideInfoParams(t))}return{leftSideInfo:i,openSidePanel:a,closeSidePanel:n,setParams:r}}function Nf(e){var t=null!==e&&void 0!==e?e:{},i=t.menu,a=t.submenu,n=void 0===a?"":a,r=t.modal,o=void 0===r?"":r,s=t.params,l=void 0===s?void 0:s;kp.h.dispatch(kp.QP.setLeftSideInfo({sidePanelVisible:!0,menu:i||kp.h.getState().globalStatus.leftSideInfo.menu||"template",submenu:n,params:l,modal:o}))}function Sf(){return kp.h.getState().globalStatus.leftSideInfo}function If(){kp.h.dispatch(kp.QP.setLeftSubmenu(""))}function Af(){var e=Jh(),t=e.userSaveTime;return t}function Pf(){var e=(0,kp.TL)(),t=(0,kp.CG)((e=>e.globalStatus)),i=t.userSaveStat,a=(t,i)=>{i?setTimeout((()=>{e(kp.QP.setUserSaveStat(t))}),i):e(kp.QP.setUserSaveStat(t))};return{stat:i,updateStat:a}}function Mf(){return kp.h.getState().globalStatus.guideInfo}function Ef(e){kp.h.dispatch(kp.QP.setGuidePopover((0,u.Z)({visible:!0},e)))}function Lf(){var e=(0,kp.TL)(),t=Jh(),i=t.guideInfo;function a(){e(kp.QP.setGuidePopover({currentStep:i.currentStep+1}))}function n(t){e(kp.QP.setGuidePopover((0,u.Z)({visible:!0},t)))}function r(){e(kp.QP.setGuidePopover({visible:!1,desc:"",buttonType:-1,buttonText:"",popupContainer:""}))}return{guideInfo:i,close:r,open:n,next:a}}function Df(){var e=(0,kp.TL)(),t=Jh(),i=t.audioSetModal;function a(){e(kp.QP.setAudioSetModal(!0))}function n(){e(kp.QP.setAudioSetModal(!1))}return{visible:i,open:a,close:n}}function Rf(){var e=Lh("guide")||{},t=(0,kp.TL)(),i=Jh();i.textWatermarkPopover;function a(){Mh("guide",(0,u.Z)((0,u.Z)({},e),{},{visible:!1})),t(kp.QP.setTextWatermarkPopover(!1))}var n=!1!==e.visible;return{visible:n,close:a}}function zf(){var e=(0,kp.TL)(),t=Jh(),i=t.shareModal,a=t.isAllowShare;function n(){e(kp.QP.setShareModal(!0))}function r(t){e(kp.QP.setIsAllowShare(t))}function o(){e(kp.QP.setShareModal(!1)),r(!0)}return{visible:i,open:n,close:o,isAllowShare:a,setIsAllowShare:r}}function Ff(){var e=(0,kp.TL)(),t=Jh(),i=t.moreMenu;function a(t){e(kp.QP.setMoreMenu({activeMoreMenu:t}))}return{moreMenu:i,updateMoreMenu:a}}function Of(){var e=(0,kp.TL)(),t=Jh(),i=t.referenceLineX,a=t.referenceLineY,n=t.referenceLineShow;function r(t,i){if("x"===i){var a,n,r,o,s,l;if(null!==(a=Cp())&&void 0!==a&&null!==(n=a.templates[0])&&void 0!==n&&null!==(r=n.template)&&void 0!==r&&r.templateId)window.localStorage.setItem("referenceLineX".concat(null===(o=Cp())||void 0===o||null===(s=o.templates[0])||void 0===s||null===(l=s.template)||void 0===l?void 0:l.templateId),JSON.stringify(t));e(kp.QP.setReferenceLineX(t))}else{var c,d,u,p,v,m;if(null!==(c=Cp())&&void 0!==c&&null!==(d=c.templates[0])&&void 0!==d&&null!==(u=d.template)&&void 0!==u&&u.templateId)window.localStorage.setItem("referenceLineY".concat(null===(p=Cp())||void 0===p||null===(v=p.templates[0])||void 0===v||null===(m=v.template)||void 0===m?void 0:m.templateId),JSON.stringify(t));e(kp.QP.setReferenceLineY(t))}}function o(t){var i,a,n,r,o,s;null!==(i=Cp())&&void 0!==i&&null!==(a=i.templates[0])&&void 0!==a&&null!==(n=a.template)&&void 0!==n&&n.templateId&&window.localStorage.setItem("referenceLineShow".concat(null===(r=Cp())||void 0===r||null===(o=r.templates[0])||void 0===o||null===(s=o.template)||void 0===s?void 0:s.templateId),JSON.stringify(t));e(kp.QP.setReferenceLineShow(t))}return{referenceLineX:i,referenceLineY:a,referenceLineShow:n,updateReferenceLine:r,updateReferenceLineShow:o}}function Bf(){var e=(0,kp.TL)(),t=(0,_p.Z)(),i=t.upicId,a=Jh(),n=a.show,r=a.XLine,o=a.YLine;function s(t,a){"x"===a?(i&&window.localStorage.setItem("xLine".concat(i),JSON.stringify(t)),e(kp.QP.setXLine(t))):(i&&window.localStorage.setItem("yLine".concat(i),JSON.stringify(t)),e(kp.QP.setYLine(t)))}function l(t){i&&window.localStorage.setItem("show".concat(i),JSON.stringify(t)),e(kp.QP.setShow(t))}return{XLine:r,YLine:o,show:n,updateLine:s,_show:l}}function Wf(e){kp.h.dispatch(kp.QP.setBottomMode(e))}function Vf(){var e=Jh(),t=e.bottomMode;return{value:t,setBottomMode:Wf}}function Uf(){var e=Jh(),t=e.backgroundInClipping,i=(0,kp.TL)();function a(){i(kp.QP.setBackgroundControl(!1))}function n(){i(kp.QP.setBackgroundControl(!0))}return{backgroundControl:{inClipping:t},startCliping:n,endCliping:a}}function Gf(){var e=(0,kp.TL)(),t=Jh(),i=t.settingPanel;function a(t,i){e(kp.QP.setSettingPanelInfo({visible:!0,panelKey:t,params:i}))}function n(){e(kp.QP.setSettingPanelInfo({visible:!1,panelKey:"",params:{}}))}function r(t){e(kp.QP.setSettingPanelInfo({visible:!0,panelKey:i.panelKey,params:t}))}return{open:a,close:n,value:i,setParams:r}}function Xf(){var e=(0,kp.TL)(),t=Jh(),i=t.assetReplaceModal,a=Lf(),n=a.open,r=Cf(),o=r.openSidePanel;function s(t){var i={visible:!0,type:t};e(kp.QP.setAssetReplaceModal(i))}function l(){e(kp.QP.setAssetReplaceModal({visible:!1,type:"",selectedList:[],replaceIngAsset:void 0}));var t=Lh("guide"),i=t.uploadkGuide;i||(o({menu:"user-space"}),setTimeout((()=>{n(km),Mh("guide",{uploadkGuide:!0})}),300))}function c(t){e(kp.QP.setAssetReplaceModal({selectedList:t}))}function d(t){e(kp.QP.setAssetReplaceModal({playId:t}))}function u(t){e(kp.QP.setAssetReplaceModal({replaceIngAsset:t}))}return{value:i,updateSelectedList:c,open:s,setPlayId:d,close:l,updateReplaceIngAsset:u}}function qf(){return kp.h.getState().globalStatus.settingPanel}function Hf(){kp.h.dispatch(kp.QP.setBindPhoneModal(!0))}function Yf(){var e=(0,kp.TL)(),t=Jh(),i=t.bindPhoneModal;function a(){e(kp.QP.setBindPhoneModal(!1))}return{bindPhoneModal:i,showBindPhoneModal:Hf,closeBindPhoneModal:a}}function Kf(){var e=(0,kp.TL)(),t=Jh(),i=t.qrCodeEditModal;function a(t){e(kp.QP.setQrCodeEditModal(t))}return[i,a]}function Qf(){var e=(0,kp.TL)(),t=Jh(),i=t.pasteStatus;function a(t){e(kp.QP.setPasteStatus(t))}return{pasteStatus:i,setPasteStatus:a}}function Jf(){var e=(0,kp.TL)(),t=Jh(),i=t.pasteModal;function a(){e(kp.QP.setPasteModal(!0))}function n(){e(kp.QP.setPasteModal(!1))}return{visible:i,open:a,close:n}}function $f(){return $h("iconfontLoaded")}function eg(){return $h("iconparkLoaded")}function tg(e){return kp.h.dispatch(kp.QP.setIconparkLoaded(e))}function ig(e){return kp.h.dispatch(kp.QP.setIconfontLoaded(e))}function ag(){var e=(0,kp.TL)(),t=Jh(),i=t.activeBrand;function a(t){e(kp.QP.setActiveBrand(t))}return{activeBrand:i,updateActiveBrand:a}}function ng(e){return kp.h.dispatch(kp.QP.setManualScale(e))}function rg(){return kp.h.getState().globalStatus.manualScale}function og(){var e=e=>kp.h.dispatch(kp.QP.setOneKeyReplace(e));return{openCloseOneKeyReplace:e,isOneKeyReplace:kp.h.getState().globalStatus.oneKeyReplace}}function sg(){var e=Mf();if(null!==e&&void 0!==e&&e.currentStep&&1===e.type){var t,i=(0,_p.Z)();if(null!==i&&void 0!==i&&i.upicId)return;t=null!==i&&void 0!==i&&i.picId?0:1,Mh("guide",{process:""}),Mh("guide",{process:{dataIndex:t,current:null===e||void 0===e?void 0:e.currentStep}})}}function lg(){var e=Lh("guide"),t=e.process;if(t){var i=t.dataIndex,a=t.current;return _m[i][a]}}function cg(e){var t=Lh("guide"),i=t.dragInMaskGuide,a=t.assetGuide,n=t.novice;ai(e)?i||(n&&sg(),Nf({menu:"user-space"}),Ef(wm),Mh("guide",{dragInMaskGuide:!0})):a||(n&&sg(),Ef(jm),Mh("guide",{assetGuide:!0}))}var dg=i(51207),ug=i(88588);class pg{constructor(){var e=this;this.canvas=void 0,this.ctx=void 0,this.devicePixelRatio=window.devicePixelRatio||1,this._getAsset=e=>{var t=(0,dg.Z)(Lu(),(e=>-e.transform.zindex)),i=[];return e.forEach((e=>{var a=(0,n.Z)(e,2),r=a[0],o=a[1],s=t.find((e=>{var t=e.attribute,i=t.width,a=t.height,n=e.transform,s=n.posX,l=n.posY;return r>=s&&r<=s+i&&o>=l&&o<=l+a}));s&&i.push(s)})),i},this._initCanvas=()=>{var e;this.canvas||(this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d")||void 0);var t=Kb(),i=t.width,a=t.height;this.canvas.style.width="".concat(i,"px"),this.canvas.style.height="".concat(a,"px"),this.canvas.width=i*this.devicePixelRatio,this.canvas.height=a*this.devicePixelRatio,null===(e=this.ctx)||void 0===e||e.scale(this.devicePixelRatio,this.devicePixelRatio)},this._getPoints=e=>{var t=e.fontWidth,i=e.fontHeight,a=e.posX,n=e.posY,r=n+i/2;return[[a+.2*t,r],[a+.5*t,r],[a+.8*t,r]]},this._getSvgEle=function(){var e=(0,p.Z)(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(((e,i)=>{try{var a=(new XMLSerializer).serializeToString(t),n=new Blob([a],{type:"image/svg+xml;charset=utf-8"}),r=URL.createObjectURL(n),o=document.createElement("img");o.src=r,o.onload=()=>{URL.revokeObjectURL(r),e(o)},o.onerror=e=>{i(e)}}catch(s){i(s)}})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this._drawAssets=function(){var t=(0,p.Z)(m().mark((function t(i){var a,n,r,o,s,l,c,d,u,p,v,h,f,g,x,y,_,j,w,k,T,Z,C,N,S,I;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=document.querySelector("#HC-CORE-EDITOR-CANVAS"),a){t.next=3;break}return t.abrupt("return");case 3:n=(0,dg.Z)(i,(e=>e.transform.zindex)),r=0;case 5:if(!(r<n.length)){t.next=47;break}if(o=n[r],s=o.attribute,l=s.width,c=s.height,d=o.transform,u=d.posX,p=d.posY,v=o.meta.type,h=a.querySelector("[data-asset-id=".concat(b).concat(o.id,"]")),!h){t.next=44;break}g=h,x=0,y=0,_=u,j=p,w=l,k=c,T=1,Z=1,t.t0=h.tagName,t.next="svg"===t.t0?22:"DIV"===t.t0?26:"VIDEO"===t.t0?33:"IMG"===t.t0?36:39;break;case 22:return t.next=24,e._getSvgEle(h);case 24:return g=t.sent,t.abrupt("break",40);case 26:if("lottie"!==v){t.next=32;break}if(C=h.firstChild,!C){t.next=32;break}return t.next=31,e._getSvgEle(C);case 31:g=t.sent;case 32:return t.abrupt("break",40);case 33:return T=h.videoWidth/l,Z=h.videoHeight/c,t.abrupt("break",40);case 36:return T=h.naturalWidth/l,Z=h.naturalHeight/c,t.abrupt("break",40);case 39:return t.abrupt("break",40);case 40:N=l*T,S=c*Z,"mask"===v&&i[0]&&(I=i[0],x=-I.transform.posX*T,y=-I.transform.posY*T),null===(f=e.ctx)||void 0===f||f.drawImage(g,x,y,N,S,_,j,w,k);case 44:r++,t.next=5;break;case 47:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),this._getPixelColor=(e,t)=>{if(!this.ctx)return 0;var i=this.ctx.getImageData(e,t,1,1),a=i.data,n=a[0],r=a[1],o=a[2],s=.299*n+.587*r+.114*o;return s>=192?1:0},this._drawBg=()=>{var e,t,i,a=Bw();if(a&&this.ctx&&!a.pageAttr.backgroundImage){var n=a.pageAttr.backgroundColor;if(n){var r=(null===(e=this.canvas)||void 0===e?void 0:e.width)||0,o=(null===(t=this.canvas)||void 0===t?void 0:t.height)||0;if(null===(i=this.ctx)||void 0===i||i.clearRect(0,0,r,o),this.ctx.fillStyle="#fff",this.ctx.fillRect(0,0,r,o),n.colorStops){var s=[r/2,o/2],l=[r/2,o],c=[r/2,0],d=_(n.angle);ug.U1(l,l,s,d*(Math.PI/180)),ug.U1(c,c,s,d*(Math.PI/180));var u=this.ctx.createLinearGradient(l[0],l[1],c[0],c[1]);n.colorStops.forEach((e=>{var t=e.offset,i=e.color;u.addColorStop(t,j(i))})),this.ctx.fillStyle=u}else this.ctx.fillStyle=j(n);this.ctx.fillRect(0,0,r,o)}}},this.checkLightColor=function(){var t=(0,p.Z)(m().mark((function t(i){var a,r,o;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e._initCanvas(),a=e._getPoints(i),r=e._getAsset(a),e._drawBg(),t.next=6,e._drawAssets(r);case 6:return o=a.reduce(((t,i)=>{var a=(0,n.Z)(i,2),r=a[0],o=a[1],s=e._getPixelColor(r,o);return t+s}),0),t.abrupt("return",o>a.length/2);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}}var vg=new pg,mg=vg,hg=(0,_p.Z)(),fg=hg.redirect;function gg(e){var t=e.asset,i=e.template,a=e.withAbsoluteTime,r=void 0===a||a,o=t.meta.id,s=null!==i&&void 0!==i?i:Bw(),l=Du(s.id),c=r?iw()[l][0]:0,d=t.assetDuration.startTime;Pj(o,t.parent);var u=s.videoInfo,p=u.offsetTime;p=void 0===p?[0,0]:p;var v=(0,n.Z)(p,2),m=v[0],h=(v[1],u.speed),f=void 0===h?1:h,g=Math.max(d-m,0)*(1/f);Lb(g+c,!1)}function xg(e){if(e){var t=e.meta,i=t.locked,a=t.id;lu(e),"designer"===fg&&(i?Pj(a):eu())}}function yg(e){if(e){var t=e.meta,i=(t.type,t.id),a=t.isBackground;"designer"===fg||a||Pj(i),a&&J_({direction:"bottom",asset:e}),cg(e)}}function bg(e){return Number.isInteger(e)}function _g(e){var t=e.startTime,i=e.endTime;return!(bg(t)&&bg(i))}function jg(e,t){var i=t.attribute,a=(t.meta,t.transform),n=zn(e,{width:i.width,height:i.height});t.attribute=(0,u.Z)((0,u.Z)({},i),{},{width:n.width,height:n.height});var r={posX:(e.attribute.width-n.width)/2,posY:(e.attribute.height-n.height)/2};t.transform=(0,u.Z)((0,u.Z)({},a),r),oj(e,t)}function wg(e,t,i){var a=Mu();a=a.filter((e=>"mask"===e.meta.type));var n=e.meta;if(g.includes(null===n||void 0===n?void 0:n.type)){var r,o=a.filter((e=>{var t,i;return null===e||void 0===e||!e.tempData.rt_hover||null!==e&&void 0!==e&&null!==(t=e.tempData.rt_hover)&&void 0!==t&&t.isMaskCenter||Gd(e,{rt_hover:void 0}),null===e||void 0===e||null===(i=e.tempData.rt_hover)||void 0===i?void 0:i.isMaskCenter}));if(o.length>0&&(r=o[0]),r){var s,l;if(null!==(s=r)&&void 0!==s&&null!==(l=s.tempData.rt_hover)&&void 0!==l&&l.isMaskCenter)return jg(r,e),!0;Gd(r,{rt_hover:void 0})}}return!1}var kg=function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s,l,c,d,u,p,v,h;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.attribute){e.next=2;break}return e.abrupt("return",{r:0,g:0,b:0,a:1});case 2:return i=t.attribute,a=i.height,n=void 0===a?0:a,r=i.width,o=void 0===r?0:r,s=t.transform||{},l=s.posY,c=void 0===l?0:l,d=s.posX,u=void 0===d?0:d,p=t.attribute.fontSize||90,e.next=7,mg.checkLightColor({fontWidth:6*p,fontHeight:n,posX:u+o/2-3*p,posY:c});case 7:return v=e.sent,h=v?0:255,e.abrupt("return",{r:h,g:h,b:h,a:1});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Tg(e,t){return Zg.apply(this,arguments)}function Zg(){return Zg=(0,p.Z)(m().mark((function e(t,i){var a,n,r,o,s,l,c,d,p,v,h,f,g,x,y,b=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=b.length>2&&void 0!==b[2]&&b[2],r=Kb(),o=r.scale,s=t.attribute,l=t.meta,c=t.transform,d=t.assets,p=l.type,v=ym(p),d&&(v.assets=d),Object.assign(v.attribute,s),Object.assign(v.meta,(0,u.Z)((0,u.Z)({},l),{},{isUserAdd:!fg,trackId:v.meta.trackId})),Object.assign(v.transform,c),_g(s)&&(h=hm(),Object.assign(v.attribute,h)),i||["text","svgPath"].includes(p)||(f=xm(s,l),Object.assign(v.attribute,f)),c||(g=fm(v.attribute),Object.assign(v.transform,g)),null!==(a=v.meta)&&void 0!==a&&a.isOverlay&&(x=fm(v.attribute),Object.assign(v.transform,x),v.attribute.startTime=0),!i||!wg(v,i,o)){e.next=15;break}return e.abrupt("return");case 15:if(n||"text"!==p||v.attribute.textBackground){e.next=19;break}return e.next=18,kg(v);case 18:v.attribute.color=e.sent;case 19:return e.next=21,Tj(v);case 21:return y=e.sent,yg(y),e.abrupt("return",y);case 24:case"end":return e.stop()}}),e)}))),Zg.apply(this,arguments)}var Cg=e=>{var t=e.attribute,i=(t.resId,t.ufsId,t.SVGUrl,t.rt_url,t.cst,t.cet,t.source_key,t.rt_svgString,t.isUser,(0,yp.Z)(t,["resId","ufsId","SVGUrl","rt_url","cst","cet","source_key","rt_svgString","isUser"]));return(0,u.Z)((0,u.Z)({},i),{},{colors:{}})};function Ng(e){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,p.Z)(m().mark((function e(t){var i,a,r,o,s,l,c,d,p,v,h,f,x,y,b,_,j,w,k,T,Z,C,N,S,I,A,P;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(l=t.params,c=t.asset,d=t.save,p=void 0===d||d,v=xu(),h=Kb(),f=null!==c&&void 0!==c?c:v,!f||!g.includes(null===(i=f)||void 0===i?void 0:i.meta.type)||null!==(a=f)&&void 0!==a&&a.meta.isBackground||null!==(r=f)&&void 0!==r&&r.parent||(f=Wn(f),v=f),l.meta.replaced=!0,l.attribute.originResId=(null===(o=f)||void 0===o?void 0:o.attribute.originResId)||(null===(s=f)||void 0===s?void 0:s.attribute.resId),!f){e.next=36;break}if("mask"!==f.meta.type){e.next=22;break}if(null===(x=f.assets)||void 0===x||!x.length){e.next=14;break}y=(0,n.Z)(f.assets,1),f=y[0],e.next=22;break;case 14:return b=ym(l.meta.type),Object.assign(b.attribute,(0,u.Z)((0,u.Z)({},l.attribute),{},{assetWidth:l.attribute.width,assetHeight:l.attribute.height})),_=xm(b.attribute,b.meta),Object.assign(b.attribute,_),Object.assign(b.meta,l.meta),Object.assign(b.transform,l.attribute),jg(f,b),e.abrupt("return");case 22:return j=f,w=j.meta,k=j.attribute,T=j.transform,Z=k.container,C=Cg(f),N={},S={},v&&(N=Qv(null!==(I=null===k||void 0===k?void 0:k.container)&&void 0!==I?I:k,l.attribute,h,v),ai(v)&&(S.posX=(v.attribute.width-N.width)/2,S.posY=(v.attribute.height-N.height)/2)),f.parent&&ai(f.parent)&&(N=Qv(k,l.attribute,h,f.parent),S.posX=(f.parent.attribute.width-N.width)/2,S.posY=(f.parent.attribute.height-N.height)/2),Z&&(Z=(0,u.Z)((0,u.Z)({},Z),{},{posX:0,posY:0})),w.isBackground&&(N=qv(l.attribute),S=fm(N),["video","videoE"].includes(l.meta.type)&&(C.bgAnimation=void 0)),A={meta:(0,u.Z)((0,u.Z)((0,u.Z)({},w),l.meta),{},{isUserAdd:!0}),attribute:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},C),l.attribute),N),{},{mattingInfo:void 0,container:Z,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1}),transform:(0,u.Z)((0,u.Z)((0,u.Z)({},T),l.transform),S)},e.next=34,Uj({data:A,asset:f,save:p});case 34:return P=e.sent,e.abrupt("return",P);case 36:case"end":return e.stop()}}),e)}))),Sg.apply(this,arguments)}var Ig=function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Tv.setLoading,a=Zv(),n=a.filter((e=>!e.replaced)),i(!0),(0,s.z)((0,p.Z)(m().mark((function e(){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],t.forEach(((e,t)=>{var i,r=null===(i=n[t])||void 0===i?void 0:i.assets;r&&r.forEach((t=>{a.push(Ng({params:e,asset:t,save:!1}))}))})),e.next=4,Promise.all(a);case 4:i(!1),We("replaceWholeAsset",!0);case 6:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ag=function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Vv.setLoading,a=Uv(),n=a.filter((e=>!e.replaced)),i(!0),(0,s.z)((0,p.Z)(m().mark((function e(){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=[],t.forEach(((e,t)=>{var i,r=null===(i=n[t])||void 0===i?void 0:i.assets;r&&r.forEach((t=>{a.push(Ng({params:e,asset:t,save:!1}))}))})),e.next=4,Promise.all(a);case 4:i(!1),xp.default.info("\u4e00\u952e\u66ff\u6362\u6210\u529f"),We("replaceWholeAsset",!0);case 7:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Pg(e,t){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,p.Z)(m().mark((function e(t,i){var a,r,o,s,l,c,d;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ev({picId:t,template_type:41});case 2:if(a=e.sent,r=a.doc,!r){e.next=13;break}return o=Bw().videoInfo,o.allAnimationTime,s=o.offsetTime,s=void 0===s?[0,0]:s,l=(0,n.Z)(s,2),l[0],l[1],c=hm(),e.next=11,fk((0,u.Z)((0,u.Z)({resId:r.pageAttr.pageInfo[0].tid,assets:r.work[0],moduleDuration:r.pageAttr.pageInfo[0].pageTime},c),i));case 11:d=e.sent,yg(d);case 13:case"end":return e.stop()}}),e)}))),Mg.apply(this,arguments)}function Eg(){var e=["designer","module"].includes((0,_p.Z)().redirect||""),t=xu(),i=Fv(),a=Kb();if(i){var n={type:"audio",data:i,canvasInfo:a};return n}if(t&&!t.meta.locked){var r=Ew(),o={type:"asset",data:r,canvasInfo:a};return o}if(!e){var s=Bw().getTemplateClonedWithRender();return{type:"template",data:s,canvasInfo:a}}}function Lg(e,t){var i=e.width,a=e.scale,n=e.height,o=(0,r.useMemo)((()=>fp(t)),[null===t||void 0===t?void 0:t.backgroundImage,null===t||void 0===t?void 0:t.backgroundColor]);return(0,r.useMemo)((()=>{var e,t,a={width:i,height:n};if(o)if(null!==o&&void 0!==o&&null!==(e=o.backgroundImage)&&void 0!==e&&e.resId&&null!==o&&void 0!==o&&null!==(t=o.backgroundImage)&&void 0!==t&&t.rt_imageUrl){var r,s,l,c=null!==(r=null===o||void 0===o||null===(s=o.backgroundImage)||void 0===s?void 0:s.backgroundSize)&&void 0!==r?r:{},d=c.width,u=void 0===d?0:d,p=c.height,v=void 0===p?0:p;Object.assign(a,{background:"url(".concat(null===o||void 0===o||null===(l=o.backgroundImage)||void 0===l?void 0:l.rt_imageUrl,") center center / ").concat(u,"px ").concat(v,"px no-repeat")})}else if(o.backgroundColor){var m;null!==(m=o.backgroundColor)&&void 0!==m&&m.type?Object.assign(a,{background:U(o.backgroundColor)}):Object.assign(a,{background:j(o.backgroundColor)})}return a}),[o,i,a,n])}var Dg=e=>{var t=[],i=t;return(0,dg.Z)(e,(e=>-e.transform.zindex)).forEach((e=>{var t=e.meta.type;if("effect"===t){var a={asset:e,isEffect:!0,assetList:[]};return i.push(a),void(i=a.assetList)}i.push(e)})),t},Rg=function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n,r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.info,a=t.rt_url,n=t.picUrl,r=t.overlayType,e.next=3,Tg({attribute:{effectInfo:i,rt_url:a,picUrl:n},meta:{type:"effect",overlayType:r}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();window._addEffect=Rg;class zg{constructor(){this.key=null,document.addEventListener("keydown",(e=>{e.key!==this.key&&(this.key=e.key)})),document.addEventListener("keyup",(()=>{this.key=null})),document.addEventListener("visibilitychange",(()=>{this.key=null}))}}var Fg=new zg;function Og(e){e.preventDefault()}function Bg(){return Fg.key&&["Meta","Ctrl","Control","Shift"].includes(Fg.key)}function Wg(e){var t=(0,r.useRef)({});function i(){return(null===e||void 0===e||!e.tempData.rt_previewStayEffect)&&(!!e&&$t(e))}function a(){return!!e&&li(e)}function n(i){a()&&(W(i),0===i.button&&(Bg()||(iu.setEditActive(e),clearTimeout(t.current.timer),t.current.fn&&window.removeEventListener("mouseup",t.current.fn))))}function o(a){if(i()&&(W(a),0===a.button)){if(Bg()){if(ii(e)||Jt(e))return;var n=Kt(e)||e;ii(n)&&(n=e),iu.toggleSelect(n)}else iu.setMoveActive(e);t.current.fn=()=>{t.current.timer=setTimeout((()=>{null===e||void 0===e||e.setTempData({rt_inMoving:!1}),iu.clearMoveActive(),t.current.fn&&window.removeEventListener("mouseup",t.current.fn)}))},window.addEventListener("mouseup",t.current.fn)}}function s(t){i()&&(W(t),iu.setHoverActive(e))}function l(){iu.clearHoverActive()}function c(t){var a,n;if(i()&&!Bg()){var r=null!==(a=null===e||void 0===e||null===(n=e.meta)||void 0===n?void 0:n.type)&&void 0!==a?a:"";Fe.canUseTextEditor.includes(r)&&(W(t),iu.setTextEditActive(e),We("setTextEditActive",!1)),Fe.replaceable.includes(r)&&(W(t),iu.setEditActive(e),We("setEditActive",!1),au(!0))}}function d(t){if(!i())return W(t),t.preventDefault(),void t.nativeEvent.preventDefault();var a=It(e);"__module"!==(null===a||void 0===a?void 0:a.meta.type)&&iu.setEditActive(e)}return(0,r.useEffect)((()=>()=>{clearTimeout(t.current.timer),t.current.fn&&window.removeEventListener("mouseup",t.current.fn)}),[]),{onMouseDown:o,onMouseEnter:s,onMouseLeave:l,onDoubleClick:c,onClick:n,onContextMenu:d,onDragStart:Og,onDragEnd:Og,onDrag:Og}}var Vg=i(69701);function Ug(e){if(e){var t=e.getAttribute("viewBox");if(!t){var i,a=(0,Xe.Z)(e.childNodes);try{for(a.s();!(i=a.n()).done;){i.value;var r=e.getAttribute("viewBox");if(r){t=r;break}}}catch(p){a.e(p)}finally{a.f()}}if(t){var o=t.split(" "),s=(0,n.Z)(o,4),l=s[0],c=s[1],d=s[2],u=s[3];return{x:l,y:c,width:d,height:u}}}}function Gg(e){try{var t=document.createElement("div");t.innerHTML=e;var i,a=(0,Xe.Z)(t.childNodes);try{for(a.s();!(i=a.n()).done;){var n=i.value;if("svg"===n.nodeName)return n}}catch(r){a.e(r)}finally{a.f()}}catch(o){throw console.error("".concat(e,"\u8f6c\u6362\u5931\u8d25\uff0c\u8bf7\u786e\u5b9e\u662f\u5426\u662f\u7b26\u5408\u89c4\u8303\u7684dom")),new Error(o)}}class Xg{constructor(e,t){this.svgString=void 0,this.svgNode=void 0,this.fabricSvg=void 0,this.viewBox=void 0,this.toolsElement=void 0,this.error=()=>{throw new Error("\u672a\u4f20\u5165\u6b63\u786e\u7684svg\u6570\u636e\uff0c\u5b9e\u9645\u4f20\u5165\uff1a".concat(this.svgString))},this.init=()=>{this.svgNode=Gg(this.svgString),this.svgNode?(this.setToolsElement(),this.viewBox=Ug(this.svgNode),this.formatSvg(),this.batchSetAttributes(this.svgNode,{preserveAspectRatio:"none",style:"opacity:0;position:absolute;"})):this.error()},this.setToolsElement=()=>{var e,t=null!==(e=this.svgNode)&&void 0!==e?e:{},i=t.firstElementChild,a=null!==i&&void 0!==i?i:{},n=a.children;if(!n||!i)throw new Error("\u672a\u4f20\u5165\u6b63\u786e\u7684svg\u6570\u636e\uff0c\u5b9e\u9645\u4f20\u5165\uff1a".concat(this.svgString));this.toolsElement={lastElementChild:i,children:n}},this.getToolsElement=()=>{if(!this.toolsElement)throw new Error("\u672a\u4f20\u5165\u6b63\u786e\u7684svg\u6570\u636e\uff0c\u5b9e\u9645\u4f20\u5165\uff1a".concat(this.svgString));return this.toolsElement},this.getImgAndClipPathNode=()=>{for(var e=this.getToolsElement(),t=e.children,i=[],a=[],n=0;n<t.length;n++){var r=t[n];"clipPath"===r.nodeName&&a.push(r),"g"===r.nodeName&&i.push(r.childNodes[1])}return{imageNodes:i,clipPathNodes:a}},this.removeImgTag=()=>{var e=this.getToolsElement(),t=e.lastElementChild,i=e.children;i[2]&&"g"===i[2].nodeName?t.removeChild(i[2]):console.error("\u5220\u9664\u5931\u8d25\uff1a\u672a\u627e\u5230\u76ee\u6807\u8282\u70b9")},this.formatSvg=()=>{if(this.svgNode){var e=this.getToolsElement(),t=e.children,i=t[0].innerHTML,a=this.svgNode.cloneNode(!1);a.innerHTML="<defs></defs>".concat(i),this.fabricSvg=a}},this.getClipPathId=()=>{var e=this.getToolsElement(),t=e.children;if(t[1]&&"clipPath"===t[1].nodeName)return t[1].id;throw new Error("\u672a\u4f20\u5165\u6b63\u786e\u7684svg\u6570\u636e\uff0c\u5b9e\u9645\u4f20\u5165\uff1a".concat(this.svgString))},this.getClipPathIdMask=()=>{var e=this.svgNode||{},t=e.children,i=void 0===t?[]:t;if(i[0]&&"g"===i[0].nodeName){var a=i[0].children;if(a[1]&&"clipPath"===a[1].nodeName)return a[1].id;throw new Error("\u672a\u4f20\u5165\u6b63\u786e\u7684svg\u6570\u636e\uff0c\u5b9e\u9645\u4f20\u5165\uff1a".concat(this.svgString))}},this.getClipPathIdNew=()=>{var e=this.getToolsElement(),t=e.children;if(t[0]&&"clipPath"===t[0].nodeName)return t[0].id;throw new Error("\u672a\u4f20\u5165\u6b63\u786e\u7684svg\u6570\u636e\uff0c\u5b9e\u9645\u4f20\u5165\uff1a".concat(this.svgString))},this.getSvgStr=()=>{var e;return null===this||void 0===this||null===(e=this.svgNode)||void 0===e?void 0:e.outerHTML},this.getFabricSvg=()=>this.fabricSvg?this.fabricSvg.cloneNode(!0):null,this.getViewBoxSize=()=>{if(this.viewBox)return{viewBoxWidth:parseInt(this.viewBox.width,10),viewBoxHeight:parseInt(this.viewBox.height,10)}},this.getSvgType=()=>{if(this.fabricSvg&&this.fabricSvg.lastElementChild){var e=this.fabricSvg.lastElementChild.nodeName,t=RegExp(/^./),i=e[0].toUpperCase();return e.replace(t,i)}return null},this.batchSetAttributes=(e,t)=>{Object.keys(t).forEach((i=>{void 0!==t[i]&&e.setAttribute(i,t[i])}))},this.updateAttr=e=>{var t=e.svgAttrs,i=e.clipPathAttrs,a=this.getToolsElement(),r=a.children,o=(0,n.Z)(r,2),s=(o[0],o[1]);this.svgNode&&this.fabricSvg&&s&&(this.batchSetAttributes(this.svgNode,t),this.batchSetAttributes(s,i),this.batchSetAttributes(this.fabricSvg,i))},this.update=e=>{var t=e.container,i=e.transform,a={style:"transform: scaleX(".concat(i.horizontalFlip?-1:1,") scaleY(").concat(i.verticalFlip?-1:1,")")},n=t.viewBoxWidth/t.viewBoxWidthBack,r=t.viewBoxHeight/t.viewBoxHeightBack,o={style:"transform: scaleX(".concat(n,") scaleY(").concat(r,")")};this.updateAttr({svgAttrs:a,clipPathAttrs:o})},this.svgString=t?e.replaceAll("SVGID_","SVGID_".concat(t)):e,this.init()}}function qg(e,t){var i=t,a={width:e.containerSize.width,height:e.containerSize.height},n={width:"100%",height:"100%",transform:"scaleX(".concat(e.transform.horizontalFlip?-1:1,") scaleY(").concat(e.transform.verticalFlip?-1:1,")")},r=36/i,o={fontSize:"".concat(36/i,"px"),width:"".concat(r,"px"),height:"".concat(r+2,"px")};return{assetImgLoadStyle:o,FlipStyle:n,assetElementStyle:a}}class Hg{constructor(e){var t=this;this.SVGDom=void 0,this.SVGWrapperDom=void 0,this.rectNode=void 0,this.colors=void 0,this.svgColorsDom=void 0,this.viewBox=void 0,this.svgStrokes=void 0,this.strokeNode=void 0,this.svgStretch=void 0,this.svgStretchCore=void 0,this.getSVGViewBox=()=>this.viewBox,this.getSVGStretch=()=>this.svgStretch,this.getSVGColors=()=>this.colors,this.getSVGStrokes=()=>this.svgStrokes,this.updateColorNode=function(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.SVGDom,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(e=t.SVGDom)||void 0===e?void 0:e.childNodes;if(a){for(var n="",r="",o=[],s=[],l=0;l<a.length;l++)if(n=a[l],"#text"!==n.nodeName&&"linearGradient"!==n.nodeName&&"radialGradient"!==n.nodeName&&"stop"!==n.nodeName){var c=function(){var e=ki();r=n.getAttribute("fill");var a=n.getAttribute("yfill");if(a||(a=r),null!==r&&"none"!==r){var l=r;r.includes("url(#")&&(l=r.replaceAll("url(#","").replaceAll(")",""));var c="";if(s.forEach((e=>{e===l&&(c=t.colors[e].id)})),s.push(l),r.includes("url(#")){if("circle"===n.nodeName)return{v:void 0};if(""===c){o.push(l);var d=null===i||void 0===i?void 0:i.getElementById(l),u=parseFloat((null===d||void 0===d?void 0:d.getAttribute("x1"))||"0"),p=parseFloat((null===d||void 0===d?void 0:d.getAttribute("y1"))||"0"),v=parseFloat((null===d||void 0===d?void 0:d.getAttribute("x2"))||"0"),m=parseFloat((null===d||void 0===d?void 0:d.getAttribute("y2"))||"0"),h=G(v-u,m-p),f=D(h),g=null===d||void 0===d?void 0:d.childNodes,x=[];g&&(null===g||void 0===g||g.forEach(((i,n)=>{if("stop"===i.nodeName){var r=null===i||void 0===i?void 0:i.getAttribute("style"),o=/stop-color: ?(#\w+|rgb(a?)\(.*\))/gi,s=/stop-opacity: ?([\d.]+)/gi,l=r.match(s),c=1;l&&l[0]&&(c=parseFloat(l[0].replaceAll("stop-opacity:","")));var d=r.match(o);x.push({offset:Math.floor(100*(null===i||void 0===i?void 0:i.getAttribute("offset")))/100||0,color:P(d[0].replaceAll("stop-color:",""),c)})}if(n===g.length-1){var u={coords:f,colorStops:x,angle:h};Object.assign(t.colors,{[a]:{id:e,color:u}})}}))),t.svgColorsDom[a]||Object.assign(t.svgColorsDom,{[a]:[]}),t.svgColorsDom[a].push(n),n.setAttribute("fill","url(#".concat(e,")"))}else t.svgColorsDom[c].push(n),n.setAttribute("fill","url(#".concat(c,")"))}else""===c?(Object.assign(t.colors,{[a]:{id:e,color:l}}),n.setAttribute("fill",l),t.svgColorsDom[a]||Object.assign(t.svgColorsDom,{[a]:[]}),t.svgColorsDom[a].push(n)):(t.svgColorsDom[a].push(n),n.setAttribute("fill",l))}n.childNodes.length>0&&t.updateColorNode(i,n.childNodes)}();if("object"===typeof c)return c.v}o.forEach((e=>{var t=null===i||void 0===i?void 0:i.getElementById(e);t&&(null===t||void 0===t||t.parentNode.removeChild(t))}))}},this.analySvgStroke=()=>{if(this.SVGDom){var e,t=null===(e=this.SVGDom)||void 0===e?void 0:e.childNodes,i=[];if(t.forEach((e=>{"text"!==e.nodeName&&"#text"!==e.nodeName&&"title"!==e.nodeName&&i.push(e)})),i&&1===i.length){var a=i[0];if(a){var n;this.strokeNode=a;var r=a.getAttribute("stroke"),o=(0,f.Z)(a.getAttribute("stroke-width")),s=null!==(n=a.getAttribute("stroke-dasharray"))&&void 0!==n?n:"0,0";r&&(this.svgStrokes=[{stroke:L(r),strokeWidth:o,strokeDash:s,strokeDashType:R(s,o),strokeLinecap:a.getAttribute("stroke-linecap")||"round"}])}}}},this.gradientFormatElement=(e,t)=>{if(this.SVGDom){var i=this.SVGDom.getAttribute("xmlns"),a=(this.SVGDom.getAttribute("xmlns:xlink"),e.colorStops),n=void 0===a?[]:a,r=e.coords,o=(e.type,this.SVGDom.getElementById(t));if(n.length>0){o?o.innerHTML="":o=document.createElementNS(i,"linearGradient");var s=document.createElement("g");o.setAttributeNS(null,"id",t),o.setAttributeNS(null,"x1",r.x1),o.setAttributeNS(null,"y1",r.y1),o.setAttributeNS(null,"x2",r.x2),o.setAttributeNS(null,"y2",r.y2),n.forEach((e=>{var t=e.color;"string"!==typeof t&&(t=j(t));var a=document.createElementNS(i,"stop");a.setAttributeNS(null,"offset",e.offset),a.setAttributeNS(null,"style","stop-color:".concat(t)),o.appendChild(a)})),s.appendChild(o),this.SVGDom.prepend(o)}else o&&o.parentNode.removeChild(o)}},this.xmlToString=e=>(new XMLSerializer).serializeToString(e),this.getRectNode=(e,t,i,a)=>{if(e&&this.viewBox){for(var n=null,r=this.viewBox.width,o=void 0===r?1:r,s=i/Number(o),l=e.childNodes,c=0;c<l.length;c++){var d=l[c];if("rect"===d.nodeName){if(this.svgStretchCore=t?(0,u.Z)((0,u.Z)({},t),{},{assetWidth:i,assetHeight:a}):(0,u.Z)((0,u.Z)({},this.viewBox),{},{rectInfo:{width:d.getAttribute("width")*s,height:d.getAttribute("height")*s,rx:d.getAttribute("rx")*s,ry:(d.getAttribute("ry")||d.getAttribute("rx"))*s,x:d.getAttribute("x"),y:d.getAttribute("y")},assetHeight:a,assetWidth:i}),n){n=null;break}n=d}}this.rectNode=n}},this.replaceSvg=(e,t,i,a,n,r)=>{var o=A(i),s=/(?<=\="url\(#).*(?=\)")/g,l=e.match(s)||[];l.forEach((i=>{e=e.replaceAll(i,"".concat(i,"_").concat(t,"_").concat(r))})),this.SVGWrapperDom.innerHTML=e,this.SVGWrapperDom.setAttribute("svgId",t),this.SVGDom=this.SVGWrapperDom.childNodes[0],this.SVGDom.setAttribute("data-asset-id","".concat(b).concat(r)),this.colors={},this.svgColorsDom={},this.viewBox=Ug(this.SVGDom),this.svgStretchCore=(0,u.Z)((0,u.Z)({},o),{},{assetHeight:n,assetWidth:a}),this.svgStrokes=void 0,this.getRectNode(this.SVGDom,o,a,n)},this.transform=(e,t,i,a)=>{var n;if(this.SVGDom&&(this.SVGDom.setAttribute("preserveAspectRatio","none"),this.SVGDom.setAttribute("width","".concat(e,"px")),this.SVGDom.setAttribute("height","".concat(t,"px")),this.SVGDom.style.position="absolute",this.SVGDom.style.left="0",this.SVGDom.style.top="0",this.rectNode&&null!==(n=this.svgStretchCore)&&void 0!==n&&n.rectInfo)){var r=this.svgStretchCore,o=r.assetWidth,s=r.assetHeight;if(o&&s){var l,c=o-e,d=s-t,p=this.svgStretchCore.rectInfo,v=p.width,m=p.height,h=p.rx,g=p.ry,x=p.x,y=p.y,b=(0,f.Z)(h),_=(0,f.Z)(g),j=Math.abs(v-c),w=Math.abs(m-d);if(j<=2*b&&1!==a&&(b=j/2),w<=2*_&&1!==a&&(_=w/2),a&&1!==a&&null!==(l=this.svgStretch)&&void 0!==l&&l.rectInfo){var k=e/o;b*=k,_*=k,j=v*k,w=m*k}j=Math.floor(j),w=Math.floor(w),this.rectNode.setAttribute("rx","".concat(b)),this.rectNode.setAttribute("ry","".concat(_)),x&&this.rectNode.setAttribute("x",x),y&&this.rectNode.setAttribute("y",y);var T=this.rectNode.getAttribute("stroke-width");T&&(j=e-T,w=t-T),this.rectNode.setAttribute("width","".concat(j)),this.rectNode.setAttribute("height","".concat(w)),this.SVGDom.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),this.svgStretch=(0,u.Z)((0,u.Z)({},this.svgStretch),{},{width:e,height:t,rectInfo:{width:j,height:w,rx:b,ry:_,x:x,y:y}})}}},this.setColor=(e,t)=>{this.SVGDom&&Object.keys(e).forEach((t=>{if(e[t]&&this.svgColorsDom[t]){var i,a,n=e[t],r=n.color;if(this.colors[t]=n,r)if((null===(i=r)||void 0===i||null===(a=i.colorStops)||void 0===a?void 0:a.length)>0)this.svgColorsDom[t].forEach((e=>{e.setAttribute("fill","url(#".concat(n.id,")")),e.setAttribute("yfill",t)})),this.gradientFormatElement(r,n.id);else{var o=r;"string"!==typeof r&&(r=j(r)),this.colors[t].color=o,this.svgColorsDom[t].forEach((e=>{r&&(e.setAttribute("fill",r),e.setAttribute("yfill",t))})),this.gradientFormatElement({},n.id)}}}))},this.setStroke=(e,t,i,a)=>{if(this.strokeNode&&e){var n,r,o,s,l=e[0],c=l.stroke,d=l.strokeWidth,u=l.strokeDash,p=l.strokeLinecap;if(this.strokeNode.setAttribute("stroke",j(c)),this.strokeNode.setAttribute("stroke-width","".concat(d)),this.strokeNode.setAttribute("stroke-dasharray",u),this.strokeNode.setAttribute("stroke-linecap","".concat(p)),this.rectNode)null!==(n=this.svgStretch)&&void 0!==n&&n.rectInfo.x&&null!==(r=this.svgStretchCore)&&void 0!==r&&r.rectInfo.x&&(this.svgStretch.rectInfo.x=d/2,this.svgStretchCore.rectInfo.x=d/2),null!==(o=this.svgStretch)&&void 0!==o&&o.rectInfo.y&&null!==(s=this.svgStretchCore)&&void 0!==s&&s.rectInfo.y&&(this.svgStretch.rectInfo.y=d/2,this.svgStretchCore.rectInfo.y=d/2),this.transform(t,i,a,1);this.svgStrokes=e}},this.SVGWrapperDom=e}}function Yg(e){var t,i=e.asset,a=(null===i||void 0===i||null===(t=i.parent)||void 0===t?void 0:t.tempData)||{},n=a.rt_itemScale,o=void 0===n?1:n,s=i.attribute,l=s.rt_svgString,c=s.width,d=s.height,u=(0,r.useRef)(null),p=u.current;function v(e){u.current=new Hg(e)}function m(){return l}return(0,r.useEffect)((()=>{var e;null===i||void 0===i||null===(e=i.setSVGRtAttribute)||void 0===e||e.call(i,{width:c,height:d})}),[]),(0,r.useEffect)((()=>{if(p){p.transform(c,d,i,o);var e,t=p.getSVGStretch();if(t)null===i||void 0===i||null===(e=i.setSVGStretch)||void 0===e||e.call(i,t)}}),[c,d]),{setSVGHandler:v,hasSvg:m,svgHandlerInstance:p}}var Kg=i(85893),Qg=(0,hp.Pi)((e=>{var t,i=e.asset,a=e.canvasInfo,n=qg(i,a.scale),o=n.assetElementStyle,s=n.FlipStyle,l=(0,r.useRef)(null),c=Yg({asset:i}),d=c.setSVGHandler,u=c.hasSvg,p=c.svgHandlerInstance,v=i.attribute,m=v.resId,h=v.width,f=v.height,g=v.rt_svgString,x=v.svgStretch,y=v.svgStrokes,b=(v.picUrl,(0,Vg.Z)()),_=(0,r.useMemo)((()=>{var e,t=A(null===(e=i.attribute)||void 0===e?void 0:e.colors);return t&&Object.keys(t).forEach((e=>{var i;null!==(i=t[e])&&void 0!==i&&i.id||!t[e]||(t[e]={id:ki(),color:t[e]})})),{deepColor:t}}),[null===(t=i.attribute)||void 0===t?void 0:t.colors]),j=_.deepColor;return(0,r.useEffect)((()=>{if(p&&g)try{p.replaceSvg(g,"".concat(m),x,h,f,i.id),p.updateColorNode(),p.analySvgStroke(),j&&p.setColor(j,m),y&&p.setStroke(y,h,f,i),p.transform(h,f,i,1);var e,t=p.getSVGViewBox(),a=p.getSVGColors(),n=p.getSVGStrokes();if(t)null===i||void 0===i||null===(e=i.setSVGViewBox)||void 0===e||e.call(i,t);var r,o,s,l=p.getSVGStretch();if(l)null===i||void 0===i||null===(r=i.setSVGStretch)||void 0===r||r.call(i,l);if(a)p.setColor(a,m),null===i||void 0===i||null===(o=i.setSVGColors)||void 0===o||o.call(i,a);if(n)null===i||void 0===i||null===(s=i.setSVGStrokes)||void 0===s||s.call(i,n)}catch(c){console.error(c)}}),[g,p]),(0,r.useEffect)((()=>{if(p&&u()&&j){p.setColor(j,m);var e=p.getSVGColors();if(e){var t,a=p.xmlToString(p.SVGDom);if(g!==a)null===i||void 0===i||null===(t=i.setSVGColors)||void 0===t||t.call(i,e)}}}),[j,p]),(0,r.useEffect)((()=>{if(p&&u()&&y){p.setStroke(y,h,f,i);var e=p.getSVGStrokes();if(e){var t,a=p.xmlToString(p.SVGDom);if(g!==a)null===i||void 0===i||null===(t=i.setSVGStrokes)||void 0===t||t.call(i,e)}var n,r=p.getSVGStretch();if(r)null===i||void 0===i||null===(n=i.setSVGStretch)||void 0===n||n.call(i,r)}}),[y,p]),(0,r.useLayoutEffect)((()=>{l.current&&(d(l.current),b())}),[]),(0,Kg.jsx)("div",{className:"assetElement",style:o,children:(0,Kg.jsx)("div",{style:s,children:(0,Kg.jsx)("div",{ref:l,style:{position:"absolute",width:"100%",height:"100%"}})})})})),Jg=Qg;function $g(e){var t=e.isLoop,i=e.volume,o=e.muted,s=e.videoPlayStatus,l=e.url,c=e.className,d=e.style,u=e.currentTime,p=e.startTime,v=void 0===p?0:p,m=e.endTime,h=void 0===m?0:m,f=e.cst,g=e.cet,x=e.speed,y=void 0===x?1:x,_=e.id,j=(0,r.useState)(""),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=S(v,h,{volume:i,cst:f,cet:g,isLoop:t}),C=Z.targetRef,N=Z.playerHelper,I=Z.loadHandler;function A(){if(k!==l){var e=I();T(l),null===e||void 0===e||e.pause(u),hd(l,!0)}}function P(){l.includes("webm")?hd(l,!0):hd(l,!1)}return(0,r.useEffect)((()=>{if(N){var e=s===a.Playing,t=u>=v&&u<=h,i=N.playStatus===a.Playing;t?(e&&!i&&N.play(u),e||N.pause(u)):N.playStatus!==a.Stopped&&N.stop()}}),[s,u]),(0,r.useEffect)((()=>{N&&"number"===typeof f&&"number"===typeof g&&N.setVideoClip({cst:f,cet:g},u)}),[f,g]),(0,r.useEffect)((()=>{N&&N.setVideoDuration({startTime:v,endTime:h})}),[v,h]),(0,r.useEffect)((()=>{N&&N.setLoop(t)}),[t]),(0,r.useEffect)((()=>{N&&N.setVolume(i)}),[i]),(0,r.useEffect)((()=>{hd(l)}),[]),(0,r.useEffect)((()=>{N&&N.setSpeed(y)}),[y,N]),(0,Kg.jsx)("video",{src:l,disablePictureInPicture:!0,playsInline:!0,preload:"auto",className:c||"",ref:C,style:d||{},crossOrigin:"anonymous",onCanPlayThrough:A,onError:P,muted:o,"data-asset-id":"".concat(b).concat(_)})}var ex=(0,hp.Pi)($g);function tx(e,t){var i=e.attribute,a=i.rt_url,n=void 0===a?"":a,r=i.startTime,o=i.endTime,s=i.isLoop,l=void 0!==s&&s,c=(i.videoVolume,i.cst),d=i.cet,u=i.voiced,p=i.volume,v=void 0===p?0:p,m=e.meta.isBackground,h=t.playStatus,f=t.currentTime,g={isLoop:m||l,volume:Number((v/100).toFixed(2)),muted:!u,url:n,startTime:r,endTime:o,videoPlayStatus:h,currentTime:f,cst:c,cet:d};return{defaultProps:g}}var ix=i(72767),ax={};function nx(e,t,i){return rx.apply(this,arguments)}function rx(){return rx=(0,p.Z)(m().mark((function e(t,i,a){var n,r,o,s,l,c,d,u;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(null===(n=ax[t])||void 0===n||null===(r=n.frameCache)||void 0===r||!r[i]){e.next=3;break}return a(ax[t].frameCache[i]),e.abrupt("return");case 3:return s=Fe.getApi("getWebmFrameImage"),l=encodeURI(t),e.next=7,fetch("".concat(s,"?frame_file=").concat(l,"&img_count=",1,"&img_step=",0,"&start_frame=").concat(Math.round(i)),{credentials:"include"});case 7:return c=e.sent,e.next=10,c.json();case 10:d=e.sent,u=d.data,null!==u&&void 0!==u&&null!==(o=u.urls)&&void 0!==o&&o.length&&(a(u.urls[0]),ax[t]||(ax[t]={frameCache:{}}),ax[t].frameCache[i]=u.urls[0]);case 13:case"end":return e.stop()}}),e)}))),rx.apply(this,arguments)}function ox(e){var t=e.isWebm,i=e.videoUrl,a=e.videoStatus,o=e.cet,s=e.cst,l=e.isLoop,c=e.totalFrame,d=(0,r.useState)(""),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,r.useMemo)((()=>{var e=a.currentTime;if(void 0!==s&&s>=0&&o){e+=s;var t=o-s;e>o&&l&&(e=e%t+s)}else e/30>c&&(e%=30*c);return e}),[a.currentTime,o,s,l]);return(0,ix.Z)((()=>{if(t){var e=Math.min(m/1e3*30,c-1);nx(i,e,(e=>{v(e)}))}else v(wt(i,Math.round(m)))}),[i,m],{wait:50}),p}var sx=(0,hp.Pi)((e=>{var t=ox(e);return(0,Kg.jsx)("img",{alt:"Preview",crossOrigin:"anonymous",src:t,style:{width:"100%",height:"100%"},"data-asset-id":"".concat(b).concat(e.id)})})),lx=sx,cx=(0,hp.Pi)((e=>{var t,i,a=e.asset,n=e.showOnly,o=e.videoStatus,s=tx(a,o),l=s.defaultProps,c=a.transform,d=c.horizontalFlip,p=c.verticalFlip,v=a.attribute,m=v.rt_total_frame,h=v.rt_url,f=void 0===h?"":h,g=v.rt_frame_file,x=void 0===g?"":g,y=(0,u.Z)((0,u.Z)({},l),{},{className:"video-element"}),b=f.indexOf(".webm")>-1;return(0,Kg.jsx)("div",{className:"movie-video-mp4-container",style:{opacity:null!==(t=a.tempData)&&void 0!==t&&null!==(i=t.rt_hover)&&void 0!==i&&i.isHover?"0.3":1,transform:"scaleX(".concat(d?-1:1,") scaleY(").concat(p?-1:1,")")},children:n?(0,Kg.jsx)(lx,{isWebm:b,totalFrame:m,isLoop:y.isLoop,cst:y.cst,cet:y.cet,videoUrl:b?x:y.url,videoStatus:o,id:a.id}):(0,r.createElement)(ex,(0,u.Z)((0,u.Z)({},y),{},{key:y.url,id:a.id}))})})),dx=i(62460),ux=i(38104),px=i.n(ux),vx=5;function mx(e){var t=e.asset,i=e.onPlayOver,a=e.visible,n=t.attribute,o=n.rt_url,s=n.rt_lottieLoaded,l=t.transform,c=l.horizontalFlip,d=l.verticalFlip,p=(0,r.useRef)(null),v=(0,r.useMemo)((()=>({position:"absolute",left:0,top:0,right:0,bottom:0,transform:"scaleX(".concat(c?-1:1,") scaleY(").concat(d?-1:1,")")})),[c,d]);return(0,r.useLayoutEffect)((()=>{try{if(p.current&&s){var e=px().loadAnimation({container:p.current,animationData:vd(o),renderer:"svg",loop:vx,autoplay:!0}),t=1;e.addEventListener("loopComplete",(a=>{if(t>=vx)return i(),void e.destroy();t+=1}))}}catch(a){console.log(a)}}),[o,s]),(0,r.useLayoutEffect)((()=>{a||i()}),[a]),(0,Kg.jsx)("div",{ref:p,className:"canvas-lottie-animation",style:(0,u.Z)((0,u.Z)({},v),{},{opacity:a?1:0})})}var hx=(0,hp.Pi)(mx),fx=i(70231),gx="CL",xx=(e,t)=>{var i=t?document.querySelector("#".concat(t)):document;Object.entries(e).forEach((e=>{var t=(0,n.Z)(e,2),a=t[0],r=t[1];a=a.replace("#","");var o=null===i||void 0===i?void 0:i.querySelectorAll(".".concat(gx).concat(a));o&&o.forEach((e=>{"g"===e.tagName?e.childNodes.forEach((e=>{e.style.fill=j(r),e.style.stroke=j(r)})):(e.style.fill=j(r),e.style.stroke=j(r))}))}))},yx=e=>{if("number"!==typeof e)throw new TypeError("Expecting a number value!");return Math.round(255*e)},bx=e=>{if("number"!==typeof e)throw new TypeError("Expecting a number value!");return Math.round(e/255*1e3)/1e3},_x=(e,t)=>{var i={},a={},r=!0,o=0,s=0,l=0,c=1,d=e.sc.toLocaleUpperCase(),u=e.cl||"fl-".concat(d.replace("#","")),p=Object.values(L(e.sc)),v=(0,n.Z)(p,4);o=v[0],s=v[1],l=v[2],c=v[3];var m=t[u];return m&&(e.sc=j(m)),e.cl&&(i[e.cl]=m||{r:o,g:s,b:l,a:c},r=!1),u&&(e.cl=u,a[u]=m||{r:o,g:s,b:l,a:c}),{newColors:i,allColors:a,autoParse:r}};function jx(e){var t=e.animationData,i=e.colors,a=e.startingPath,r=void 0===a?"layers":a,o=JSON.parse(JSON.stringify(t)),s={},l={},c=!0,d=(0,fx.Z)(o,r);if(!Array.isArray(d))throw new TypeError("Expected an array of layers or shapes");return d.forEach((e=>{if(1!==e.td){var t,a,r=0,o=0,d=0,u=1;if(1===e.ty&&e.sc){var p=_x(e,i);Object.assign(s,p.newColors),Object.assign(l,p.allColors),p.autoParse||(c=!1)}Array.isArray(e.shapes)&&e.shapes.forEach((e=>{var p=e.it||[e];p.forEach((e=>{if("fl"===e.ty||"st"===e.ty){var p;if(null===(p=e.c)||void 0===p||!p.k)return;var v=e.c.k,m=v.slice(0,3),h=(0,n.Z)(m,3);if(r=h[0],o=h[1],d=h[2],[r,o,d].every((e=>e<=1))){var f=[r,o,d].map((e=>yx(e))),g=(0,n.Z)(f,3);r=g[0],o=g[1],d=g[2]}u=v["3"];var x=E({r:r,g:o,b:d,a:u},"").toLocaleUpperCase();a=e.cl||"#".concat(x),t=i[a],t&&(e.c.k=[bx(t.r),bx(t.g),bx(t.b),t.a||1])}if(e.cl&&(s[e.cl]=t||{r:r,g:o,b:d,a:u},c=!1),a){var y=a.replace("#","");e.cl="".concat(gx).concat(y),l[a]=t||{r:r,g:o,b:d,a:u}}}))}))}})),{data:o,colors:c?l:s}}class wx{constructor(e,t){this.updateTextLottieSvg=(e,t,i,a,n)=>{var r=this.lottieDom.childNodes[0];if(r){var o=r&&r.childNodes[1]?r.childNodes[1].childNodes[0]:null,s=o?o.childNodes[0]:null,l=s?s.childNodes[0]:null,c=r&&r.childNodes[0]&&r.childNodes[0].childNodes[1]?r.childNodes[0].childNodes[1].childNodes[0]:null,d=e[0],u=d.text[0],p=d.fontFamily,v=d.fontSize,m=d.color,h=Q(),f=h[p],g=h.fnsyhtRegular,x="".concat(f,",").concat(g),y="rgb(".concat(m.r,",").concat(m.g,",").concat(m.b,")"),b=this.animation.animationData.w,_=this.animation.animationData.h;if(t/i!=b/_&&c&&r.childNodes[1])if(t>i){var j=Math.round(_*(t/i));c.style.width="".concat(j,"px"),r.childNodes[1].style.transform="translateX(".concat(-(j-b)/2,"px)")}else{var w=Math.round(b*(i/t));c.style.height="".concat(w,"px"),r.childNodes[1].style.transform="translateX(".concat(-(w-_)/2,"px)")}c&&(c.style.width="".concat(1e14,"px"),c.style.height="".concat(1e14,"px"),c.style.x="".concat(-1e4,"px"),c.style.y="".concat(-1e4,"px")),o&&(o.style.fill=y),o&&(o.style.fontFamily=x),o&&(o.style.fontSize=v),r.setAttribute("width",n.attribute.width*a),r.setAttribute("height",n.attribute.width*(_/b)*a),l&&(l.innerHTML=u)}},this.lottieDom=e,this.animation=t}}var kx=[...ae,...te];function Tx(e,t,i){var a,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4?arguments[4]:void 0,s=arguments.length>5?arguments[5]:void 0,l=t.scale,c=null!==(a=e.meta)&&void 0!==a?a:{},d=c.isTextEditor,u=void 0!==d&&d,p=c.isImageEditor,v=void 0!==p&&p,m=e.transform,h=m.horizontalFlip,f=m.verticalFlip,g=e.attribute,x=g.textEditor,y=g.width,b=(g.height,(0,r.useMemo)((()=>"".concat(s,"-lottie-").concat(i?"-showOnly":"","-").concat(e.id)),[s,i,e.id])),_=(u||v)&&!i,w={position:"absolute",left:0,top:0,right:0,bottom:0,transform:"scaleX(".concat(h?-1:1,") scaleY(").concat(f?-1:1,")"),visibility:n?"hidden":"visible"},k={},T={},Z={},C="";if(_){var N=x[0],S=N.fontFamily,I=N.fontSize,A=N.color,P=N.text[0],M=Fe.getFontFamily(S),E=Fe.getFontFamily("fnsyhtRegular"),L="".concat(M,",").concat(E),D=j(A);k={height:"100%",position:"relative"};var R=I*l;o&&o>0&&(R*=y*l/o),T={visibility:n?"visible":"hidden",position:"absolute",top:"50%",transform:"translateY(-50%)",width:"100%",height:"auto",cursor:"default",color:D,fontFamily:L,fontSize:"".concat(R,"px"),whiteSpace:"nowrap"},Z={width:"auto",height:"auto",color:D,fontFamily:L,fontSize:"".concat(R,"px"),visibility:"hidden",whiteSpace:"nowrap"},C=P}return{editPanelShowText:C,containerStyle:k,editablePanelStyle:T,lottieStyle:w,editPanelShowStyle:Z,lottieId:b,canEdit:_}}function Zx(e,t){function i(e){var i=e.target.innerText;t(i)}function a(e){var i=e.target.innerText;t(i)}function n(e){e.stopPropagation()}function r(e){var t=e.code;(kx.includes(t)||(e.ctrlKey||e.metaKey)&&re.includes(t))&&(e.stopPropagation(),e.nativeEvent.stopImmediatePropagation())}return{blurEditableLottie:i,keyUpEditLottie:a,mouseDownEditLottie:n,keyDownEditLottie:r}}class Cx{constructor(e,t){var i=this;this.lottieDom=void 0,this.OldLottieHandler=void 0,this.lottieId=void 0,this.lottieW_H_ratio=void 0,this.onDomLoaded=void 0,this.animation=void 0,this.getAnimationData=()=>{var e,t,i,a,n,r=null!==(e=null===(t=this.animation)||void 0===t?void 0:t.animationData)&&void 0!==e?e:{},o=null!==(i=r.w)&&void 0!==i?i:0,s=null!==(a=r.h)&&void 0!==a?a:0,l=null!==(n=r.layers)&&void 0!==n?n:[],c=o/s;return{lottieWidth:o,lottieHeight:s,lottieLayers:l,lt_WtoH_ratio:c}},this.addDOMLoadedListener=()=>{var e;null===(e=this.animation)||void 0===e||e.addEventListener("DOMLoaded",(()=>{var e=this.getAnimationData(),t=e.lottieWidth,i=e.lottieHeight,a=e.lottieLayers,n=e.lt_WtoH_ratio;this.lottieW_H_ratio!=n&&(this.lottieW_H_ratio=n),this.OldLottieHandler=new wx(this.lottieDom,this.animation),this.onDomLoaded({lottieWidth:t,lottieHeight:i,lt_WtoH_ratio:n,lottieLayers:a})}))},this.init=(e,t,i,a,n)=>{var r,o=vd(e);if(a&&o&&n){var s=jx({animationData:o,colors:n.attribute.colors}),l=s.data,c=s.colors;o=l,n.setSVGColors(c)}return this.animation=px().loadAnimation({container:this.lottieDom,animationData:o,renderer:"svg",loop:t,autoplay:!1,name:"".concat(this.lottieId)}),n.meta.isTransfer&&this.animation.setSpeed(n.attribute.rt_total_time/n.attribute.totalTime),this.addDOMLoadedListener(),this.lottieDom.setAttribute("lottie-res-id","".concat(i)),r},this.play=function(e){var t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=i.animation||{},r=n.totalFrames,o=void 0===r?1:r,s=n.frameRate,l=void 0===s?1:s,c=n.playSpeed,d=void 0===c?1:c,u=Cx.getCurrentFrame(e,l,d,o,a);return null===(t=i.animation)||void 0===t||t.goToAndStop(u<0?0:u,!0),{totalFrames:o,lottieFrame:u}},this.destroy=()=>{this.animation&&(this.animation.destroy(),this.lottieDom.innerText="")},this.replace=function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=arguments.length>4?arguments[4]:void 0;i.destroy(),setTimeout((()=>{i.init(e,t,a,n,r)}))},this.updateColor=(e,t)=>{e&&xx(e,t)},this.lottieDom=document.getElementById(e),this.lottieId=e,this.onDomLoaded=t,this.lottieW_H_ratio=1}updateSpeed(e){e.meta.isTransfer&&this.animation&&this.animation.setSpeed(e.attribute.rt_total_time/e.attribute.totalTime)}}Cx.getCurrentFrame=(e,t,i,a,n)=>{var r=Math.floor(e/16.7*(t/60)*i);return!n&&r>a?r:Math.floor(r%(a+1))};var Nx=(0,hp.Pi)((e=>{var t,i,o,s=e.asset,l=e.showOnly,c=(e.isPreviewMovie,e.videoStatus),d=e.canvasInfo,p=e.prefix,v=void 0===p?"":p,m=(0,r.useRef)(null),h=(0,r.useRef)(null),f=(0,dx.Z)({curLottieTime:1,endLoopTimes:0,lottieToEnd:!1,preview:!1}),g=(0,n.Z)(f,2),x=g[0],y=g[1],_=x.preview,j=c.currentTime,w=s.attribute,k=w.startTime,T=void 0===k?0:k,Z=w.endTime,C=void 0===Z?1e3:Z,N=(w.loopTimes,w.isLoop),S=void 0!==N&&N,I=w.textEditor,A=w.rt_url,P=w.rt_lottieLoaded,M=w.resId,E=void 0===M?-1:M,L=w.width,D=w.height,R=(s.meta.isTextEditor,null!==(t=null===(i=h.current)||void 0===i?void 0:i.getAnimationData())&&void 0!==t?t:{}),z=R.lottieWidth,F=void 0===z?-1:z,O=Tx(s,d,l,!1,F,v),B=O.canEdit,W=O.lottieId,V=O.containerStyle,U=O.lottieStyle,G=O.editablePanelStyle;function X(e){var t=(0,u.Z)((0,u.Z)({},I),{},{text:[e]});null===s||void 0===s||s.setTextEditor(t)}var q=Zx(null===m||void 0===m?void 0:m.current,X),H=q.blurEditableLottie,Y=q.keyUpEditLottie,K=q.mouseDownEditLottie,Q=q.keyDownEditLottie;function J(){if(h.current){var e,t,i=j<=C,a=j>=T;if(a&&i){var n=j-T;h.current.play(n,S)}if(I)null===(e=h.current)||void 0===e||null===(t=e.OldLottieHandler)||void 0===t||t.updateTextLottieSvg(I,L,D,1,s)}}function $(){J()}function ee(){B||console.log("editLottie")}(0,r.useLayoutEffect)((()=>{try{h.current=new Cx(W,$),P&&h.current.init(A,S,E,!1,s)}catch(e){console.log(W,e)}}),[]),(0,r.useLayoutEffect)((()=>{h.current&&P&&h.current.replace(A,S,E,!1,s)}),[P,A]);function te(){y({preview:!1}),null===s||void 0===s||s.setTempData({rt_lottiePreview:!1})}(0,r.useEffect)((()=>{var e;null!==s&&void 0!==s&&null!==(e=s.tempData)&&void 0!==e&&e.rt_lottiePreview&&y({preview:!0})}),[A]),(0,r.useEffect)((()=>{J()}),[j,L,D]);var ie=c.playStatus===a.Playing,ae=!ie&&!(null===s||void 0===s||null===(o=s.tempData)||void 0===o||!o.rt_lottiePreview);return(0,Kg.jsxs)("div",{className:"canvas-lottie-container",style:V,children:[_&&(0,Kg.jsx)(hx,{asset:s,visible:ae,onPlayOver:te}),(0,Kg.jsx)("div",{className:"canvas-lottie-animation",id:W,style:(0,u.Z)((0,u.Z)({},U),{},{opacity:ae?0:1}),onDoubleClick:ee,"data-asset-id":"".concat(b).concat(s.id)}),B&&(0,Kg.jsx)("div",{className:"lottie-editable-panel",contentEditable:!0,onBlur:H,onMouseDown:K,onKeyDown:Q,onKeyUp:Y,style:G,ref:m})]})})),Sx=(0,hp.Pi)((e=>{var t,i,o,s=e.asset,l=e.showOnly,c=e.videoStatus,d=e.canvasInfo,p=e.prefix,v=void 0===p?"":p,m=(0,r.useRef)(null),h=(0,dx.Z)({curLottieTime:1,endLoopTimes:0,lottieToEnd:!1,preview:!1}),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=g.preview,b=c.currentTime,_=s.attribute,j=_.startTime,w=void 0===j?0:j,k=_.endTime,T=void 0===k?1e3:k,Z=(_.loopTimes,_.isLoop),C=void 0!==Z&&Z,N=_.textEditor,S=_.rt_url,I=_.rt_lottieLoaded,A=_.resId,P=void 0===A?-1:A,M=_.width,E=_.height,L=_.cst,D=void 0===L?0:L,R=_.colors,z=_.totalTime,F=null!==(t=null===(i=m.current)||void 0===i?void 0:i.getAnimationData())&&void 0!==t?t:{},O=F.lottieWidth,B=void 0===O?-1:O,W=Tx(s,d,l,!1,B,v),V=W.lottieId,U=W.containerStyle,G=W.lottieStyle;function X(){if(m.current){var e,t,i=b<=T,a=b>=w;if(a&&i){var n=b-w+D;m.current.play(n,C)}else m.current.play(0,C);if(N)null===(e=m.current)||void 0===e||null===(t=e.OldLottieHandler)||void 0===t||t.updateTextLottieSvg(N,M,E,1,s)}}function q(){X()}function H(){x({preview:!1}),null===s||void 0===s||s.setTempData({rt_lottiePreview:!1})}(0,r.useLayoutEffect)((()=>{try{m.current=new Cx(V,q),I&&m.current.init(S,C,P,!0,s)}catch(e){console.log(V,e)}}),[]),(0,r.useLayoutEffect)((()=>{m.current&&I&&m.current.replace(S,C,P,!0,s)}),[I,S]),(0,r.useEffect)((()=>{var e;null!==s&&void 0!==s&&null!==(e=s.tempData)&&void 0!==e&&e.rt_lottiePreview&&x({preview:!0})}),[S]),(0,r.useEffect)((()=>{X()}),[b,M,E]),(0,r.useEffect)((()=>{m.current&&I&&m.current.updateSpeed(s)}),[z]),(0,r.useEffect)((()=>{var e;null===(e=m.current)||void 0===e||e.updateColor(R,V)}),[R]),(0,r.useEffect)((()=>()=>{var e;null===(e=m.current)||void 0===e||e.destroy()}),[]);var Y=c.playStatus===a.Playing,K=!Y&&!(null===s||void 0===s||null===(o=s.tempData)||void 0===o||!o.rt_lottiePreview);return(0,Kg.jsxs)("div",{className:"canvas-lottie-container",style:U,children:[y&&(0,Kg.jsx)(hx,{asset:s,visible:K,onPlayOver:H}),(0,Kg.jsx)("div",{className:"canvas-lottie-animation",id:V,style:(0,u.Z)((0,u.Z)({},G),{},{opacity:K?0:1})})]})})),Ix=(0,hp.Pi)((e=>{var t=e.asset,i=t.attribute,a=i.rt_preview_url,n=void 0===a?"":a,r=i.width,o=i.height;return(0,Kg.jsx)("div",{className:"canvas-lottie-container",style:{width:r,height:o},children:(0,Kg.jsx)("img",{src:n,alt:"lottie preview",style:{width:"100%",height:"100%"}})})})),Ax=(0,hp.Pi)((e=>{var t,i=e.asset,a=e.showOnly;return a?(0,Kg.jsx)(Ix,(0,u.Z)({},e)):null!==i&&void 0!==i&&null!==(t=i.meta)&&void 0!==t&&t.isTransfer?(0,Kg.jsx)(Sx,(0,u.Z)({},e)):(0,Kg.jsx)(Nx,(0,u.Z)({},e))})),Px=(0,hp.Pi)((e=>{var t,i,a=e.asset,n=e.showOnly,o=e.videoStatus,s=(e.assetStyle,e.videoInfo),l=a.transform,c=l.horizontalFlip,d=l.verticalFlip,p=a.attribute,v=p.rt_frame_file,m=void 0===v?"":v,h=p.rt_total_frame,f=p.rt_url,g=void 0===f?"":f,x=tx(a,o),y=x.defaultProps,b=(0,u.Z)((0,u.Z)({},y),{},{className:"video-element",style:{width:"100%",height:"100%"}}),_=(0,r.useMemo)((()=>g.indexOf(".webm")>-1),[g]);return(0,Kg.jsx)("div",{className:"videoEContainer",style:{opacity:null!==(t=a.tempData)&&void 0!==t&&null!==(i=t.rt_hover)&&void 0!==i&&i.isHover?"0.3":1,transform:"scaleX(".concat(c?-1:1,") scaleY(").concat(d?-1:1,")")},children:n?(0,Kg.jsx)(lx,{isWebm:_,totalFrame:h,isLoop:b.isLoop,cst:b.cst,cet:b.cet,videoUrl:_?m:g,videoStatus:o,id:a.id}):(0,r.createElement)(ex,(0,u.Z)((0,u.Z)({},b),{},{key:b.url,speed:s.speed,id:a.id}))})})),Mx=(0,hp.Pi)((e=>{var t=e.asset,i=e.canvasInfo,a=t.attribute,n=a.width,r=a.height,o=i.scale,s={width:n*o,height:r*o};return(0,Kg.jsx)("div",{className:"assetGrounp",style:s})})),Ex=i(94009);function Lx(e){if(!e)return{};var t,i=e.attribute,a=e.fontFamily,n=void 0===a?"":a,r=i.color&&j(i.color),o=i.letterSpacing,s=void 0===o?0:o,l=i.lineHeight,c=void 0===l?0:l,d=i.fontSize,u=void 0===d?1:d,p=i.textAlign,v=void 0===p?"center":p,m=i.textDecoration,h=i.fontStyle,f=i.writingMode,g=void 0===f?"horizontal-tb":f,x=i.fontWeight,y={fontSize:Lt,fontStyle:h,textDecoration:m,fontFamily:"".concat(n,", ").concat(J),lineHeight:c/10,letterSpacing:s/u*Lt,color:r,wordBreak:"break-all",textAlign:v,writingMode:g};"bold"===x&&(i.effectVariant&&i.effectVariant.rt_name&&(null===(t=i.effectVariant.layers)||void 0===t?void 0:t.length)>0||i.effectColorful?Object.assign(y,{fontWeight:"bold"}):Object.assign(y,{WebkitTextStroke:"1px ".concat(r)}));return i.effectVariant&&i.effectVariant.rt_defaultFontColor&&Object.assign(y,{color:j(i.effectVariant.rt_defaultFontColor)}),y}function Dx(e){var t=e.containerSize,i=e.fontSizeScale;return{transformOrigin:"0 0 0",transform:"scale(".concat(i,") translateZ(0px)"),width:t.width/i,height:t.height/i}}function Rx(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e?e.join("\n"):""}function zx(e){var t=e.getCurrentContent(),i=t.getPlainText();return i.replace(/(&nbsp;)/g," ").replace(/[\r\n]+$/g,"").split("\n")}function Fx(e){for(var t=0,i=0;i<e.length;i++)t+=e[i].length;return t}function Ox(e,t){return"".concat(e,"-").concat(t)}function Bx(e,t){for(var i=t.parentCb,a=t.itemCb,n=t.endCb,r=e.length,o=0;o<r;o++){var s=e[o],l=s.length,c={value:s,index:o,valueLength:l,textArrayLength:r};if(i&&i(c),a)for(var d=0;d<l;d++){var p=Ox(o,d),v=s[d];a((0,u.Z)({key:p,itemIndex:d,itemValue:v},c))}n&&n(c)}}function Wx(e,t){var i={zIndex:1e3+e.zindex,top:"".concat(t*e.top,"px"),left:"".concat(t*e.left,"px"),transform:""};if(e.strokeColor){var a=j(e.strokeColor);0===e.strokeColor.a&&(a="transparent"),Object.assign(i,{WebkitTextStroke:"".concat(t*e.strokeWidth,"px  ").concat(a)})}if(e.shadowColor){var n=j(e.shadowColor);Object.assign(i,{textShadow:"".concat(t*e.shadowH,"px ").concat(t*e.shadowV,"px ").concat(t*e.shadowBlur,"px ").concat(n)})}if(e.backgroundClip&&Object.assign(i,{WebkitBackgroundClip:e.backgroundClip}),e.color&&(0===e.color.a?Object.assign(i,{WebkitTextFillColor:"transparent"}):Object.assign(i,{WebkitTextFillColor:j(e.color)})),e.linearGradient){var r="";e.linearGradient.colors.forEach(((e,t)=>{0!==t&&(r+=","),r+=" ".concat(j(e.color)," ").concat(100*e.position,"%")})),Object.assign(i,{backgroundImage:"linear-gradient(".concat(e.linearGradient.angle,"deg, ").concat(r,")")})}if((null!==e&&void 0!==e&&e.skewX||null!==e&&void 0!==e&&e.skewY)&&Object.assign(i,{transform:"skew(".concat(e.skewX,"deg, ").concat(e.skewY,"deg)"),transformOrigin:"0px 0px 0px"}),e.backgroundURL){var o=e.backgroundURL.includes("https")?e.backgroundURL:Fe.cdnHost+e.backgroundURL;Object.assign(i,{backgroundImage:"url(".concat(o,")"),backgroundRepeat:"repeat"})}return e.backgroundSize&&Object.assign(i,{backgroundSize:"".concat(t*e.backgroundSize.width,"px ").concat(t*e.backgroundSize.height,"px")}),i.transform+=" translateZ(0px)",i}function Vx(e,t,i){var a=i.asset,n=i.textStrLength,r=i.currentTxtNum,o=i.currentTime,s=i.startTime,l=(i.endTime,i.allAnimationTime,i.assetAnimationTime),c=i.aHeadAnimationTime,d=i.assetAniEndTime,u=(i.aeA,i.animationTextPos),p=i.canvas,v=i.writeHandImgRef,m={},h=o-(s-c),f=h/l,g=f*n,x=parseInt(g,10),y=g-x,b=a.transform,_=(a.attribute,10),j=540,w=1080,k=a.fontSizeScale,T=c,Z=v,C=1;p.scale;if(!Z)return m;if(o<s-c){var N=T-(s-T-o),S=N/T;if(Z){var I=u[Ox(0,0)]||{},A=p.height/C-b.posY,P=I.left*k,M=I.height*k;Z.style.left="".concat((P+b.posX)*C-_-(Z.offsetWidth||j)*(1-C)/2,"px"),Z.style.top="".concat((A*(1-S)+M/2+b.posY)*C-_-5-(Z.offsetHeight||w)*(1-C)/2,"px"),Z.style.transform="scale(".concat(C,")")}return m}if(o>=d&&o<d+c){var E=o-d,L=E/T;if(Z){var D=p.height/C-b.posY,R=(parseInt(Z.style.top,10),a.attribute.text),z=Ox(R.length-1,R[R.length-1].length-1),F=u[z]||{},O=F.left*k,B=F.height*k,W=F.width*k,V=F.top*k;Z.style.left="".concat((O+W+b.posX)*C-_-(Z.offsetWidth||j)*(1-C)/2,"px"),Z.style.top="".concat((V+B/2+b.posY)*C-_-5-(Z.offsetHeight||w)*(1-C)/2,"px"),Z.style.transform="translateY(".concat(D*L,"px) scale(").concat(C,")")}return m}if(r<=x)m={opacity:1};else if(r>x+1)m={opacity:0};else if(m={opacity:y},v){var U=Ox(e-1,t-1),G=u[U]||{},X=G.left*k,q=G.height*k,H=G.width*k,Y=G.top*k,K=1;y>=0&&y<.25?K=y/.25*-K:y>=.25&&y<.5?K=K*((y-.25)/.25)-K:y>=.5&&y<.75?K*=(y-.5)/.25:K-=K*((y-.75)/.25),v.style.left="".concat((b.posX+X+y*H)*C-_-(v.offsetWidth||j)*(1-C)/2,"px"),v.style.top="".concat((b.posY+Y+q/2)*C-_-5-(v.offsetHeight||w)*(1-C)/2,"px"),v.style.transform="rotate(".concat(K,"deg) scale(").concat(C,")")}return m}function Ux(e,t,i){var a=i.animationTextPos,n=i.currentTime,r=i.startTime,o=i.assetAnimationTime,s=i.aHeadAnimationTime,l={},c=1,d=0,u={};Object.keys(a).forEach((e=>{var t=a[e];t.top>d&&(c++,d=t.top),u[t.top]=c}));var p,v=n-(r-s),m=v/o,h=c,f=m*h,g=parseInt(f,10),x=f-g,y=Ox(e-1,t-1);null!==a&&void 0!==a&&a[y]&&null!==u&&void 0!==u&&u[a[y].top]&&(e=null===u||void 0===u?void 0:u[null===a||void 0===a||null===(p=a[y])||void 0===p?void 0:p.top]);return l=e<=g?{opacity:1}:e>g+1?{opacity:0}:{opacity:x},l}function Gx(e,t,i){var a=i.textStrLength,n=i.currentTxtNum,r=i.currentTime,o=i.startTime,s=i.assetAnimationTime,l=i.aHeadAnimationTime,c={},d=r-(o-l),u=d/s,p=u*a,v=parseInt(p,10),m=p-v;return c=n<=v?{opacity:1}:n>v+1?{opacity:0}:{opacity:m},c}function Xx(e,t,i){var a=i.textStrLength,n=i.currentTxtNum,r=i.currentTime,o=i.startTime,s=i.assetAnimationTime,l=i.aHeadAnimationTime,c={},d=r-(o-l),u=d/s,p=u*a,v=parseInt(p,10),m=p-v,h=200,f=20;if(n<=v)c={opacity:1};else if(n>v+1)c={opacity:0,transform:"translateX(".concat(h,"px)")};else{var g=Math.round(m*(360+2*f));if(g>=0&&g<=360+f)g%=360,g=360-g;else if(g>360+f&&g<=360+2*f){var x=g-(360+f);g=360-f+x}c={opacity:m,transform:"translateX(".concat(h*(1-m),"px) rotate(").concat(g,"deg)")}}return c}function qx(e,t,i){var a=i.textStrLength,n=i.currentTxtNum,r=i.currentTime,o=i.startTime,s=i.assetAnimationTime,l=i.aHeadAnimationTime,c={},d=r-(o-l),u=d/s,p=u*a,v=parseInt(p,10),m=p-v,h=80,f=20;if(n<=v)c={opacity:1};else if(n>v+1)c={opacity:0,transform:"translateY(".concat(h,"px)")};else{var g=m*(h+2*f);g>=h&&g<h+f||g>=h+f&&g<=h+2*f&&(g-=f),c={opacity:m,transform:"translateY(".concat(h-g,"px)")}}return c}var Hx={i:"i",s:"s",o:"o"},Yx=Object.keys(Hx),Kx=30,Qx=1/Kx,Jx={opacity:1,transformOriginX:0,transformOriginY:0,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1},$x=["opacity","rotate","scaleX","scaleY","scaleZ"],ey=["translateX","translateY","translateZ"],ty=function(){var e={};e.getBezierEasing=i;var t={};function i(e,i,a,n,r){var o=r||("bez_"+e+"_"+i+"_"+a+"_"+n).replace(/\./g,"p");if(t[o])return t[o];var s=new g([e,i,a,n]);return t[o]=s,s}var a=4,n=.001,r=1e-7,o=10,s=11,l=1/(s-1),c="function"===typeof Float32Array;function d(e,t){return 1-3*t+3*e}function u(e,t){return 3*t-6*e}function p(e){return 3*e}function v(e,t,i){return((d(t,i)*e+u(t,i))*e+p(t))*e}function m(e,t,i){return 3*d(t,i)*e*e+2*u(t,i)*e+p(t)}function h(e,t,i,a,n){var s,l,c=0;do{l=t+(i-t)/2,s=v(l,a,n)-e,s>0?i=l:t=l}while(Math.abs(s)>r&&++c<o);return l}function f(e,t,i,n){for(var r=0;r<a;++r){var o=m(t,i,n);if(0===o)return t;var s=v(t,i,n)-e;t-=s/o}return t}function g(e){this._p=e,this._mSampleValues=c?new Float32Array(s):new Array(s),this._precomputed=!1,this.get=this.get.bind(this)}return g.prototype={get:function(e){var t=this._p[0],i=this._p[1],a=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),t===i&&a===n?e:0===e?0:1===e?1:v(this._getTForX(e),i,n)},_precompute:function(){var e=this._p[0],t=this._p[1],i=this._p[2],a=this._p[3];this._precomputed=!0,e===t&&i===a||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],i=0;i<s;++i)this._mSampleValues[i]=v(i*l,e,t)},_getTForX:function(e){for(var t=this._p[0],i=this._p[2],a=this._mSampleValues,r=0,o=1,c=s-1;o!==c&&a[o]<=e;++o)r+=l;--o;var d=(e-a[o])/(a[o+1]-a[o]),u=r+d*l,p=m(u,t,i);return p>=n?f(e,u,t,i):0===p?u:h(e,r,r+l,t,i)}},e}();function iy(e){var t,i,a;if(Array.isArray(e)){i=Array(t=e.length);while(t--)i[t]=(a=e[t])&&"object"===typeof a?iy(a):a;return i}if("[object Object]"===Object.prototype.toString.call(e)){for(t in i={},e)"__proto__"===t?Object.defineProperty(i,t,{value:iy(e[t]),configurable:!0,enumerable:!0,writable:!0}):i[t]=(a=e[t])&&"object"===typeof a?iy(a):a;return i}return e}function ay(e){return"string"===typeof e?JSON.parse(e):iy(e)}var ny=(e,t)=>e.i?ty.getBezierEasing(e.o.x[t],e.o.y[t],e.i.x[t],e.i.y[t]).get:e=>e,ry=(e,t,i,a)=>{i.k[0]&&"number"===typeof i.k[0].t&&i.k.forEach((i=>{i.t=Math.round(i.t/a),i.t=Math.max(e,Math.min(i.t,t))}))},oy=(e,t)=>{var i=ay(t);i.ip=Math.round(i.ip/e),i.op=Math.round(i.op/e);var a=i.op,n=i.ip;return ry(n,a,i.ks.o,e),ry(n,a,i.ks.r,e),ry(n,a,i.ks.p.x,e),ry(n,a,i.ks.p.y,e),ry(n,a,i.ks.a,e),ry(n,a,i.ks.s,e),i};function sy(e){return Math.round((e.op-e.ip)*Qx*1e3)}var ly=(e,t,i,a,n,r)=>{var o=ey,s=[0,0,0];if(0===i.a){o.includes(a[0])&&(s=i.k);for(var l=0;l<=t;l++)e[l][a[0]]=(i.k[0]-s[0])*r,a[1]&&(e[l][a[1]]=(i.k[1]-s[1])*r),a[2]&&(e[l][a[2]]=(i.k[2]-s[2])*r)}1===i.a&&i.k.length>0&&function(){var l=i.k,c=l.length;if(o.includes(a[0])&&(s=l[0].s),1===c)for(var d=l[0].t;d<=t;d++)e[d][a[0]]=(l[0].s[0]-s[0])*r,a[1]&&(e[d][a[1]]=(l[0].s[1]-s[1])*r),a[2]&&(e[d][a[2]]=(l[0].s[2]-s[2])*r);else for(var u=function(t){var i=l[t],o=l[t+1],d=o.t-i.t,u=[0,0,0];u[0]=o.s[0]-i.s[0],a[1]&&(u[1]=o.s[1]-i.s[1]),a[2]&&(u[2]=o.s[2]-i.s[2]);var p=[];p[0]=ny(i,0),a[1]&&(p[1]=ny(i,1)),a[2]&&(p[2]=ny(i,2)),e.forEach(((e,l)=>{if(0===t&&l<i.t&&$x.includes(a[0])&&(e[a[0]]=(i.s[0]-s[0])*r,a[1]&&(e[a[1]]=(i.s[1]-s[1])*r),a[2]&&(e[a[2]]=(i.s[2]-s[2])*r)),l>=i.t&&l<=o.t){var v=(l-i.t)/d;e[a[0]]=(i.s[0]*n+p[0](v)*u[0]-s[0])*r,a[1]&&(e[a[1]]=(i.s[1]*n+p[1](v)*u[1]-s[1])*r),a[2]&&(e[a[2]]=(i.s[2]*n+p[2](v)*u[2]-s[2])*r)}else t+1===c-1&&l>o.t&&(e[a[0]]=(o.s[0]-s[0])*r,a[1]&&(e[a[1]]=(o.s[1]-s[1])*r),a[2]&&(e[a[2]]=(o.s[2]-s[2])*r))}))},p=0;p<c-1;p++)u(p)}()},cy=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=e.translateX,a=void 0===i?0:i,n=e.translateY,r=void 0===n?0:n,o=e.transformOriginX,s=void 0===o?0:o,l=e.transformOriginY,c=void 0===l?0:l,d=e.scaleX,u=void 0===d?1:d,p=e.scaleY,v=void 0===p?1:p,m=(a-s*u)*t,h=(r-c*v)*t,f=e.rotate/180*Math.PI,g=Math.sin(f),x=Math.cos(f);return"matrix(".concat(u*x,", ").concat(v*g,", ").concat(u*-g,", ").concat(v*x,", ").concat(m,", ").concat(h,")")};function dy(e,t,i){var a=i.scale,n=i.stay;if(null!==t&&void 0!==t&&t[e].length){var r;if("i"===e){var o=t[e].length,s=t[e][o-1];if(!s)return;r=(0,vn.SO)((0,vn.mL)(cy(s,a)))}if("o"===e&&t.s.length){var l=Math.round(n/(1e3*Qx)),c=t.s.length,d=t.s[Math.min(c-1,l)];if(!d)return;r=(0,vn.SO)((0,vn.mL)(cy(d,a)))}return t[e].map((e=>{var t=cy(e,a);if(r){var i=(0,vn.mL)(t),n=(0,vn.qC)(r,i);t=(0,vn.hG)(n)}return{opacity:e.opacity,transform:t}}))}}function uy(e){for(var t=[],i=0;i<=e.op;i++)t[i]=(0,u.Z)({},Jx);return ly(t,e.op,e.ks.o,["opacity"],1,.01),ly(t,e.op,e.ks.r,["rotate"],1,1),ly(t,e.op,e.ks.p.x,["translateX"],1,1),ly(t,e.op,e.ks.p.y,["translateY"],1,1),ly(t,e.op,e.ks.a,["transformOriginX","transformOriginY"],0,1),ly(t,e.op,e.ks.s,["scaleX","scaleY"],1,.01),t}class py{constructor(e,t){this.styles=[],this.frameStyles=[],this.rateKw=void 0,this.kw=void 0,this.duration=0,this.basePbr=1,this.pbr=1,this.calcBasePbrByFPS=e=>{var t=this.kw.op-this.kw.ip;this.basePbr=t/e},this.buildNewKwByPbr=()=>{this.rateKw=oy(this.basePbr*this.pbr,this.kw),this.duration=sy(this.rateKw),this.frameStyles=uy(this.rateKw)},this.updatePbr=e=>{this.pbr!==e&&(this.pbr=e)},this.kw=e.kw,this.calcBasePbrByFPS(t),this.updatePbr(e.pbr),this.buildNewKwByPbr()}}class vy{constructor(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;this._handlers=void 0,this.FPS=void 0,this.styles={i:[],s:[],o:[]},this.animationInfo=void 0,this._handlerCreator=(e,t)=>{if(null!==t&&void 0!==t&&t.kw)return new py(t,this.FPS)},this.updateItemPbr=(e,t)=>{var i=this._handlers[e];i&&(i.updatePbr(t),i.buildNewKwByPbr(),this.buildFreshStyle(e))},this.updateItem=(e,t)=>{this._handlers[e]=this._handlerCreator(e,t)},this.updateIAnimationInfo=e=>{this.animationInfo=e,Yx.forEach((e=>{this.buildFreshStyle(e)}))},this.buildFreshStyle=e=>{var t,i,a,n={i:(null===(t=this._handlers.i)||void 0===t?void 0:t.frameStyles)||[],s:(null===(i=this._handlers.s)||void 0===i?void 0:i.frameStyles)||[],o:(null===(a=this._handlers.o)||void 0===a?void 0:a.frameStyles)||[]};this.styles[e]=dy(e,n,this.animationInfo)||[]},this.animationInfo=e,this.FPS=i,this._handlers={i:this._handlerCreator(Hx.i,t.i),s:this._handlerCreator(Hx.s,t.s),o:this._handlerCreator(Hx.o,t.o)},Yx.forEach((e=>{this.buildFreshStyle(e)}))}}function my(e,t){var i,a,n=e.attribute,r=e.assetDuration,o=e.animationItemDuration,s=o.i,l=o.o;if(t){var c=t.key,d=t.textDelay;d&&"i"===c&&(s=n.endTime-100-r.startTime),"o"===c&&(l=Math.max(r.endTime-n.endTime,ct))}else null!==(i=n.aeA)&&void 0!==i&&null!==(a=i.i.kw)&&void 0!==a&&a.textDelay&&(s=n.endTime-100-r.startTime);return{inDuration:s,outDuration:l}}class hy{constructor(){this.renderText=[],this.textRefs={},this.textPosition={},this.textRefKeys=[],this.textInstance=[],this.textHtml="",this.originText=[],this.textNumber=0,this.updateText=e=>{var t=[],i=[],a=[],n=(e,t)=>{this.textRefs[e]=t};Bx(e,{parentCb:e=>{var i=e.value;t.push(i.replace(/&/g,"&#38;").replace(/</g,"&#60;").replace(/>/g,"&#62;"))},itemCb:e=>{var t=e.key,r=e.itemValue,o=r.replace(/(\s)/g,"&nbsp;");i.push(t),a.push((0,Kg.jsx)("span",{className:"__renderText",ref:e=>{n(t,e)},dangerouslySetInnerHTML:{__html:o}},t))},endCb:e=>{var t=e.index,i=e.textArrayLength;t!==i-1&&a.push((0,Kg.jsx)("br",{},"br-".concat(t)))}}),this.textHtml=t.join("<br/>").replace(/(\s)/g,"&nbsp;").replace(/(&nbsp;&nbsp;)/g,"&nbsp; "),this.renderText=a,this.textInstance=t,this.textRefKeys=i,this.textNumber=Fx(e),this.originText=e},this.updateTextPosition=()=>{var e={};this.textRefKeys.forEach((t=>{var i=this.textRefs[t];i&&(e[t]={left:i.offsetLeft,top:i.offsetTop,width:i.offsetWidth,height:i.offsetHeight})})),this.textPosition=e}}}class fy{constructor(e,t){this.writeHandImgRef=void 0,this.animation=void 0,this.getAnimationParams=void 0,this.animationInEndTime=void 0,this.updateAnimationParams=()=>{this.animationInEndTime=this.calcTextAnimationInEndTime()},this.calcTextAnimationInEndTime=()=>{var e=this.getAnimationParams(),t=e.speed,i=e.aHeadAnimationTime,a=e.startTime,n=e.endTime,r=e.textLength,o=e.assetShowTime,s=e.enterTypeId,l=e.textPosition,c=(e.allAnimationTime,e.currentTime,e.exitTypeId,a),d=0,u=o;if(s>0&&(u-=i),[5,9,7,8].includes(s)){var p=r*t>u?u:r*t,v=p+a-i;d=v,c=v<=n?v:n}if(6===s){var m=1,h=0;Object.keys(l).forEach((e=>{var t=l[e];t.top>h&&(m+=1,h=t.top)}));var f=333,g=m*f>u?u:m*f,x=g+a-i;d=x,c=x<=n?x:n}return{aniInEndTime:c,allAniTime:d}},this.textAnimationCtrl=(e,t,i,a,n,r)=>{r.speed;var o=r.aHeadAnimationTime,s=r.startTime,l=r.endTime,c=(r.textLength,r.assetShowTime,r.enterTypeId),d=r.allAnimationTime,p=r.currentTime,v=r.canvas,m=r.asset,h=r.textPosition,f=(r.exitTypeId,n.aniInEndTime),g=n.allAniTime-(s-o),x={},y={};if(p>f&&5!==c)return x;if(p>=s-(5===c?2*o:o)&&p<f+(5===c?o:0)){var b={asset:m,textStrLength:i,currentTxtNum:a,currentTime:p,startTime:s,endTime:l,allAnimationTime:d,assetAnimationTime:g,aHeadAnimationTime:o,assetAniEndTime:f,animationTextPos:h,canvas:v,writeHandImgRef:this.writeHandImgRef.current};switch(c){case 5:y=Vx(e,t,b);break;case 6:y=Ux(e,t,b);break;case 7:y=Gx(e,t,b);break;case 8:y=Xx(e,t,b);break;case 9:y=qx(e,t,b);break}}return x=(0,u.Z)((0,u.Z)({},x),y),x},this.renderTextByPosition=(e,t)=>{var i=this.getAnimationParams(),a=this.calcTextAnimationInEndTime(),n=i.textPosition,r=i.text,o=i.textLength,s=[],l=1;return Bx(r,{itemCb:r=>{var c=r.key,d=r.index,p=r.itemIndex,v=r.itemValue,m=n[c],h=this.textAnimationCtrl(d+1,p+1,o,l,a,i),f={position:"absolute"};m&&(f.left=m.left,f.top=m.top),(e||t)&&(f=(0,u.Z)((0,u.Z)({},f),h)),s.push((0,Kg.jsx)("span",{style:f,children:v},c+l)),l+=1}}),s},this.writeHandImgRef=e,this.getAnimationParams=t}}class gy{constructor(e,t){this.asset=void 0,this.handler=void 0,this.previewStyles=void 0,this.getAnimationParams=void 0,this.setPreviewHandler=()=>{var e=this.asset.attribute,t=e.startTime,i=e.endTime,a=e.rt_previewAeA;if(a){var n=Yx.find((e=>{var t=a[e],i=t.pbr,n=t.kw;return i&&n}));if(!n)return;var r=(0,u.Z)({},a[n]),o=new vy({scale:1,stay:i-t},{[n]:r});Yx.forEach((e=>{var t=o.styles[e],i=a[e],n=i.pbr,r=i.kw;t.length>0&&r&&(this.previewStyles={key:e,styles:t,kw:r,duration:1e3/n})}))}else this.previewStyles=void 0},this.getCurrentFrame=e=>Math.round(e/1e3*60),this.getAnimation=(e,t,i,a)=>{if(a&&!this.previewStyles)return{};var n=this.asset,r=n.assetDuration,o=n.attribute,s=n.animationItemDuration,l=n.animationItemPbr;if(a?"i"===this.previewStyles.key:e>=r.startTime&&e<o.endTime-100){var c,d=a?this.previewStyles.kw:null===(c=o.aeA)||void 0===c?void 0:c.i.kw,u=s.i/2,p=a?e:e-r.startTime,v=a?this.previewStyles.styles:this.handler.styles.i,m=0,h=0;null!==d&&void 0!==d&&d.textDelay?(u=o.endTime-100-r.startTime,m=d.textDelay/l.i,h=u-s.i/2):(m=u/i,h=s.i/2),m*i>h&&(m=Math.floor(h/i)),p-=t*m;var f={};if(p>u)return f;if(p>0){var g=Math.min(this.getCurrentFrame(p),v.length);f=v[g]||{}}else f=v[0]||{};return null!==d&&void 0!==d&&d.ofh&&(f.overflow="hidden"),f}if(a?"o"===this.previewStyles.key:e>=o.endTime&&e<=r.endTime){var x,y=a?e:e-o.endTime,b=a?this.previewStyles.styles:this.handler.styles.o,_=15*b.length,j=s.o-_,w=a?this.previewStyles.kw:null===(x=o.aeA)||void 0===x?void 0:x.o.kw,k=t*j/i;if(y-=k,y>_)return{opacity:0};var T={};if(y>0){var Z=Math.min(this.getCurrentFrame(y),b.length);T=b[Z]||{}}else T={};return null!==w&&void 0!==w&&w.ofh&&(T.overflow="hidden"),T}return{}},this.renderTextByPosition=(e,t)=>{var i=this.getAnimationParams(),a=i.text,n=i.textLength,r=i.currentTime,o=i.textRefs,s=i.showOnly,l=i.aeaPreview,c=i.asset;if(s)return null;var d=[],p=0;return Bx(a,{itemCb:e=>{var t=e.key,i=(e.index,e.itemIndex,e.itemValue),a=(0,u.Z)({display:"inline-block"},this.getAnimation(r,p,n,l&&!!c.attribute.rt_previewAeA)),s=o[t],v=s?{position:"absolute",left:s.offsetLeft,top:s.offsetTop,width:s.offsetWidth,height:s.offsetHeight}:{};delete a.overflow,a.overflow?d.push((0,Kg.jsx)("div",{style:(0,u.Z)({overflow:"hidden"},v),children:(0,Kg.jsx)("span",{style:a,children:i})},t+p)):d.push((0,Kg.jsx)("span",{style:(0,u.Z)((0,u.Z)({},a),v),children:i},t+p)),p+=1},endCb:e=>{var t=e.index,i=e.textArrayLength;t!==i-1&&d.push((0,Kg.jsx)("br",{},"br-".concat(t)))}}),d},this.asset=e,this.getAnimationParams=t;var i=e.attribute,a=i.startTime,n=i.endTime;this.handler=new vy({scale:1,stay:n-a},{})}}class xy{constructor(e){this.playStatus=a.Stopped,this.onCurrentTimeChange=void 0,this.loopReportTimer=void 0,this.currentTime=0,this.timeMarker=0,this.clearRAF=()=>{this.loopReportTimer&&cancelAnimationFrame(this.loopReportTimer)},this.loopReport=e=>{this.playStatus===a.Playing&&(0===this.timeMarker&&(this.timeMarker=e),this.currentTime=this.currentTime+e-this.timeMarker,this.onCurrentTimeChange(this.currentTime),this.timeMarker=e,this.clearRAF(),this.loopReportTimer=requestAnimationFrame(this.loopReport))},this.play=e=>{this.playStatus=a.Playing,this.currentTime=e,this.timeMarker=0,this.loopReport(performance.now())},this.stop=()=>{this.playStatus=a.Stopped,this.pause(0)},this.pause=e=>{this.clearRAF(),this.currentTime=e,this.playStatus=a.Paused},this.onCurrentTimeChange=(0,h.Z)(e,1e3/30)}}function yy(e){var t=bu();function i(i){return i||t===e?{opacity:0}:{}}return{fontStyle:Lx(e),needHidden:i}}function by(e,t){var i=(0,Ju.Z)((()=>new hy),[]),a=(0,r.useState)({}),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=e.attribute,d=c.text,p=void 0===d?[]:d,v=c.writingMode,m=c.fontSize,h=c.letterSpacing,f=c.textAlign,g=c.width,x=c.height,y=(0,r.useMemo)((()=>(i.updateText(p),{textInstance:i.textInstance,textHtml:i.textHtml,renderText:i.renderText,textLength:i.textNumber,textRefs:i.textRefs})),[p]);return(0,r.useLayoutEffect)((()=>{l&&setTimeout((()=>{i.updateTextPosition(),l(i.textPosition)}),50)}),[p,v,m,h,f,g,x]),(0,u.Z)((0,u.Z)({},y),{},{textPosition:s,textHandler:i})}function _y(e,t){var i=e.videoInfo,o=e.videoStatus,s=e.asset,l=e.canvasInfo,c=e.isAssetActive,d=e.isPreviewMovie,u=e.showOnly,p=s.attribute.rt_previewAeA,v=(0,r.useState)(0),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=(0,Ju.Z)((()=>new xy((e=>{f(Math.max(e,0))}))),[]),x=(0,r.useRef)(),y=(0,r.useMemo)((()=>{if(p&&!u)for(var e=0;e<Yx.length;e++){var t=p[Yx[e]];if(t.resId&&t.kw&&t.kw.isText){var i={resId:t.resId,pbr:t.pbr,isText:t.kw.isText,textDelay:t.kw.textDelay,key:Yx[e]};return x.current=i,i}}else x.current=void 0}),[p]);function b(){var e,a,n,r,p=s.attribute,v=s.animationItemPbr,m=p.text,h=void 0===m?[]:m,f=o.currentTime,y=i.allAnimationTime,b=p.startTime,_=void 0===b?null!==(e=i.startTime)&&void 0!==e?e:0:b,j=p.endTime,w=void 0===j?null!==(a=i.endTime)&&void 0!==a?a:1e4:j,k=p.animation,T=200/v.i,Z=500/v.i;return{animationItemPbr:v,text:h,isAssetActive:c,isPreviewMovie:d,canvas:l,allAnimationTime:y,currentTime:x.current?g.currentTime:f,aeaPreview:!!x.current,speed:T,aHeadAnimationTime:Z,startTime:_,endTime:w,showOnly:u,asset:s,textLength:t.textNumber,textPosition:t.textPosition,textRefs:t.textRefs,assetShowTime:w-_+Z,enterTypeId:Number(null!==(n=null===k||void 0===k?void 0:k.enter.baseId)&&void 0!==n?n:0),exitTypeId:Number(null!==(r=null===k||void 0===k?void 0:k.exit.baseId)&&void 0!==r?r:0)}}return(0,r.useEffect)((()=>{if(!u)if(y&&y.isText&&o.playStatus!==a.Playing){var e=y.key,t=my(s,y),i=t.inDuration,n=t.outDuration,r="i"===e?i:2*n;g.playStatus!==a.Playing&&g.play(0),h>r&&(g.stop(),s.deletePreviewAEAKw&&s.deletePreviewAEAKw(),f(0))}else g.stop(),null!==y&&void 0!==y&&y.isText&&s.deletePreviewAEAKw&&s.deletePreviewAEAKw(),f(0),x.current=void 0}),[p,h,o]),{getAnimationParams:b,aeaPreview:y,mockTime:h}}function jy(e,t,i){var a=e.attribute,n=mt(a),o=n.i,s=n.o,l=n.s,c=(0,Ju.Z)((()=>e.isAea?new gy(e,t):new fy(i,t)),[e.isAea]);function d(e,t){var i=(0,u.Z)({},t);c.handler.updateItem(e,i),c.handler.buildFreshStyle(e)}function p(){var i=t(),a=i.aHeadAnimationTime,n=i.enterTypeId,r=i.startTime,d=i.currentTime,u=i.showOnly,p=i.aeaPreview;if(e.isAea){var v,m,h,f,g,x,y,b,_={isTextAnimationIng:!1,showWriteTextImg:!1,isWriteTextImgOut:!1,enterTypeId:-1,aeaPreview:p,isTextAnimation:!1,isOverHiddenAnimaiton:!1},j=e.assetDuration,w=e.attribute;return null!==o&&void 0!==o&&null!==(v=o.kw)&&void 0!==v&&v.isText&&d>=j.startTime&&d<w.endTime-100&&(_.isTextAnimationIng=!0),null!==s&&void 0!==s&&null!==(m=s.kw)&&void 0!==m&&m.isText&&d>=w.endTime&&d<=j.endTime&&(_.isTextAnimationIng=!0),(p||null!==s&&void 0!==s&&null!==(h=s.kw)&&void 0!==h&&h.isText||null!==o&&void 0!==o&&null!==(f=o.kw)&&void 0!==f&&f.isText||null!==l&&void 0!==l&&null!==(g=l.kw)&&void 0!==g&&g.isText)&&(_.isTextAnimation=!0),(null!==(x=s.kw)&&void 0!==x&&x.ofh||null!==(y=o.kw)&&void 0!==y&&y.ofh||null!==(b=l.kw)&&void 0!==b&&b.ofh)&&(_.isOverHiddenAnimaiton=!0),_}var k=c.calcTextAnimationInEndTime(),T=!1,Z=!1,C=!1,N=!1,S=n,I=null===k||void 0===k?void 0:k.aniInEndTime,A=a;return S>=5&&d>=r-A&&d<I&&!u&&(T=!0,Z=!0),5===S&&d>=r-2*A&&d<I+A&&!u&&(C=!0,d>=I&&(N=!0)),{isTextAnimationIng:T,showWriteTextImg:C,isWriteTextImgOut:N,enterTypeId:n,aeaPreview:p,isTextAnimation:Z,isOverHiddenAnimaiton:!1}}return(0,r.useEffect)((()=>{var t,i;e.isAea&&c&&(null===(t=(i=c).setPreviewHandler)||void 0===t||t.call(i))}),[a.rt_previewAeA]),(0,r.useEffect)((()=>{var t;e.isAea&&null!==o&&void 0!==o&&null!==(t=o.kw)&&void 0!==t&&t.isText&&d("i",o)}),[null===o||void 0===o?void 0:o.kw,null===o||void 0===o?void 0:o.pbr]),(0,r.useEffect)((()=>{var t;e.isAea&&null!==l&&void 0!==l&&null!==(t=l.kw)&&void 0!==t&&t.isText&&d("s",l)}),[null===l||void 0===l?void 0:l.kw,null===l||void 0===l?void 0:l.pbr]),(0,r.useEffect)((()=>{var t;e.isAea&&null!==s&&void 0!==s&&null!==(t=s.kw)&&void 0!==t&&t.isText&&d("o",s)}),[null===s||void 0===s?void 0:s.kw,null===s||void 0===s?void 0:s.pbr]),{renderTextByPosition:c.renderTextByPosition,getAnimationStatus:p}}function wy(e,t){var i=(0,r.useRef)(null),a=(0,r.useRef)(null),n=e.attribute,o=n.writingMode,s=n.fontFamily,l=n.lineHeight,c=n.text,d=n.letterSpacing,u=n.fontSize,p=n.effect,v=n.width,m=n.height,h=bu();function f(){if(!e.parent&&a.current){var t=e.attribute,i=t.writingMode,n=t.width,r=t.height,o=e.fontSizeScale,s=a.current,l=s.offsetHeight,c=s.offsetWidth;l*=o,c*=o,l=Math.ceil(l),c=Math.ceil(c),"vertical-rl"===i?n!==c&&e.update({attribute:{width:Math.max(c,12)}}):r!==l&&e.update({attribute:{height:Math.max(l,12)}})}}return(0,r.useLayoutEffect)((()=>{var i;t||h===e||null!==e&&void 0!==e&&null!==(i=e.tempData)&&void 0!==i&&i.rt_stopAutoCalc||f()}),[o,s,l,d,p]),(0,r.useLayoutEffect)((()=>{t||h===e||!a.current||null!==n&&void 0!==n&&n.rt_stopAutoCalc||f()}),[v,m,u,c,h]),{effectFont:i,normalFont:a}}var ky=i(11092),Ty=i.n(ky),Zy=(0,r.forwardRef)(((e,t)=>{var i=e.src,a=void 0===i?"":i,n=e.alt,o=void 0===n?"image":n;function s(t){var i;md(a,!0),null===e||void 0===e||null===(i=e.onLoad)||void 0===i||i.call(e,t)}function l(t){var i;md(a,!1),null===e||void 0===e||null===(i=e.onError)||void 0===i||i.call(e,t)}return(0,r.useEffect)((()=>{md(a)}),[]),(0,Kg.jsx)("img",(0,u.Z)((0,u.Z)({alt:o},e),{},{ref:t,onLoad:s,onError:l}))})),Cy=(0,hp.Pi)(Zy);function Ny(e,t){var i=e.videoStatus,a=e.attribute,n=e.AssetRootRef,r=i.currentTime<a.startTime-1e3||i.currentTime>a.endTime;return Ty().createPortal((0,Kg.jsx)(Cy,{src:Fe.handImgSrc,alt:"hand",style:{position:"absolute",pointerEvents:"none",visibility:r?"hidden":"visible",zIndex:r?Fe.minZIndex:Fe.maxZIndex},ref:t}),n)}var Sy=(0,r.forwardRef)(Ny),Iy={backgroundClip:"text",color:{r:255,g:255,b:255,a:0},left:0,linearGradient:void 0,strokeColor:void 0,top:0,zindex:0,backgroundURL:void 0};function Ay(e){return e+=360,e>0&&e<90?e:(e>=360&&(e-=360),e>0&&e<90?90-e:0===e?(e=90,e):90===e?(e=0,e):180===e?(e=-90,e):270===e?(e=-180,e):e>90&&e<270||e>270&&e<360?(e-=180,e):void 0)}var Py=(e,t)=>{var i=e.attribute,a=i.effectVariant,n=i.effectColorful,o=(e,t,i,a,n,r)=>{var o=[],s=A(Iy);if(s.zindex=t,e.left_diff){var l=e.left_diff/e.fontSize;s.left=l}if(e.top_diff){var c=e.top_diff/e.fontSize;s.top=c}return e.fills.length>0&&(delete s.backgroundClip,delete s.linearGradient,delete s.strokeColor,e.fills.forEach(((e,t)=>{var a,n=i[e];if("linear"===(null===(a=n.value)||void 0===a?void 0:a.type)){var o=[];n.value.colorStops.forEach((e=>{o.push({position:e.offset,color:k(e.color)})})),s.linearGradient={angle:Ay(n.angle),colors:o},s.backgroundClip="text"}else if("pattern"===n.value.type){var l=r[n.value.sourceIndex];s.backgroundClip="text",s.backgroundURL=l,s.backgroundSize={width:.35,height:.35}}else s.color=k(n.value)})),s.strokeColor={r:0,g:0,b:0,a:0}),e.strokes.length>0?e.strokes.forEach(((i,n)=>{var r,l=a[i];if("linear"===(null===(r=l.value)||void 0===r?void 0:r.type)){var c=[];l.value.colorStops.forEach((e=>{c.push({position:e.offset,color:k(e.color)})})),"outsetFrame"===l.position?(o.push(s),o.push((0,u.Z)((0,u.Z)({},s),{},{type:"out",backgroundClip:"text",linearGradient:{angle:Ay(l.angle),colors:c},strokeWidth:l.width/e.fontSize,color:{r:255,g:255,b:255,a:0},strokeColor:{r:0,g:0,b:0,a:0},zindex:t-9}))):(s.linearGradient={angle:Ay(l.angle),colors:c},s.strokeWidth=l.width/e.fontSize,s.strokeColor={r:0,g:0,b:0,a:0},o.push(s))}else"outsetFrame"===l.position?(o.push(s),o.push((0,u.Z)((0,u.Z)({},s),{},{color:{r:255,g:255,b:255,a:0},type:"out",backgroundClip:"text",strokeWidth:l.width/e.fontSize,strokeColor:k(l.value),zindex:t-9}))):(s.backgroundClip="text",s.color={r:255,g:255,b:255,a:0},s.strokeWidth=l.width/e.fontSize,s.strokeColor=k(l.value),o.push(s))})):o.push(s),e.shadow.forEach(((i,a)=>{var r=n[i];o.push((0,u.Z)((0,u.Z)({},Iy),{},{shadowColor:k(r.color),shadowBlur:r.blur/e.fontSize,shadowH:r.offsetX/e.fontSize,shadowV:r.offsetY/e.fontSize,zindex:t-10}))})),o};function s(e){var t=[],i=A(e.effect);if(i){var a=i.supportTexts,n=void 0===a?[]:a,r=i.fillList,s=i.strokeList,l=i.shadowList,c=i.sourceList,d=n.length;t=o(i,100*(n.length+1),r,s,l,c);for(var p=n.length-1;p>=0;p--)t=o((0,u.Z)((0,u.Z)({},n[p]),{},{fontSize:i.fontSize}),100*d,r,s,l,c).concat(t),d-=1}return t}var l=(0,r.useMemo)((()=>a&&a.layers?a.layers:n?s(n):[]),[a,null===n||void 0===n?void 0:n.effect]),c=i.effect||(null===n||void 0===n?void 0:n.resId);return{layers:l,assetkey:c}},My=Py,Ey={position:"absolute",width:"100%",height:"100%",left:0,top:0,transformOrigin:"0 0 0"},Ly=(0,hp.Pi)((e=>{var t=e.asset,i=e.showOnly,n=e.videoInfo,o=e.videoStatus,s=e.isPreviewMovie,l=void 0!==s&&s,c=e.manualPreview,d=void 0!==c&&c,p=e.AssetRootRef,v=e.canvasInfo,m=(0,r.useRef)(null),h=(0,r.useRef)(null),f=t.attribute,g=t.fontSizeScale,x=f.textBackground,y=f.width,b=f.height,_=My(t,l),j=_.layers,k=_.assetkey,T=yy(t),Z=T.fontStyle,C=T.needHidden,N=wy(t,l),S=N.normalFont,I=by(t,v),A=I.textHtml,P=I.renderText,M=I.textHandler,E=_y(e,M),L=E.getAnimationParams,D=E.mockTime,R=jy(t,L,m),z=R.renderTextByPosition,F=R.getAnimationStatus,O=(0,r.useMemo)((()=>o.playStatus===a.Playing),[o.playStatus]),B=F(),W=B.isTextAnimationIng,V=B.showWriteTextImg,U=B.isWriteTextImgOut,G=B.enterTypeId,X=B.isTextAnimation,q=B.isOverHiddenAnimaiton,H=5===G&&!i,Y=!1;Y=!i&&D>0||(W||V&&!U)&&(O||d||l)&&!i&&xi(t);var K=(0,r.useMemo)((()=>null!==t&&void 0!==t&&t.parent?{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:null===f||void 0===f?void 0:f.textAlign}:{}),[null===t||void 0===t?void 0:t.parent,null===f||void 0===f?void 0:f.textAlign]);return(0,Kg.jsxs)("div",{className:"assetTextEditor",style:{width:"100%",height:"100%"},children:[(0,Kg.jsxs)("div",{className:"specificWordArea",ref:h,style:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},Z),C()),Dx(t)),{},{background:null!==x&&void 0!==x&&x.enabled?w(null===x||void 0===x?void 0:x.color,(null===x||void 0===x?void 0:x.opacity)/100):"",borderRadius:null!==x&&void 0!==x&&x.enabled?"".concat(null===x||void 0===x?void 0:x.borderRadius,"px"):"",overflowY:Y&&q?"hidden":"unset"}),children:[(0,Kg.jsx)("div",{ref:S,style:{position:"absolute",left:0,top:0},className:"hc-unVisibility",dangerouslySetInnerHTML:{__html:A}}),j.length>0?j.map(((e,t)=>{var i=Wx(e,Lt),a=(0,u.Z)((0,u.Z)({},i),Ey);return(0,Kg.jsx)("div",{className:"specificLayer",style:(0,u.Z)((0,u.Z)({},i),{},{transformOrigin:"0 0 0"}),children:(0,Kg.jsxs)("div",{className:"specificLayerContent",children:[(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},i),Ey),K),{},{visibility:X?"hidden":"visible"}),dangerouslySetInnerHTML:{__html:A}}),(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},a),Ey),K),{},{visibility:X&&!Y?"visible":"hidden",width:y/g,height:b/g}),children:P}),Y&&(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)({},a),Ey),{},{visibility:Y?"visible":"hidden"}),className:"additional_text_animation",children:(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},i),Ey),K),{},{visibility:Y?"visible":"hidden"}),children:z(O,l)})})]})},"specificLayer-".concat(t,"-").concat(k))})):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{style:(0,u.Z)({visibility:X?"hidden":"visible"},K),dangerouslySetInnerHTML:{__html:A}}),(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)({},Ey),{},{display:"inline-block",visibility:X&&!Y?"visible":"hidden",width:y/g,height:b/g}),children:P}),X&&(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)({},Ey),K),{},{visibility:Y?"visible":"hidden"}),className:"additional_text_animation",children:!i&&X&&z(O,l)})]})]}),H&&p.current&&(0,Kg.jsx)(Sy,{ref:m,videoInfo:n,videoStatus:o,attribute:f,AssetRootRef:p.current})]})}));function Dy(e){var t=e.assetTransform,i=t.rotate,a=t.opacity,n=t.zIndex;return(0,u.Z)((0,u.Z)((0,u.Z)({},e.containerSize),e.assetPosition),{},{opacity:a,zIndex:n,transform:"rotate(".concat(i,"deg)")})}function Ry(e){var t=e.assetTransform,i=t.opacity,a=t.zIndex,n=e.containerSizeScale,r=n.width,o=n.height,s=e.assetAbsolutePositionScale,l=s.left,c=s.top,d=s.rotate;return{width:r,height:o,top:c,left:l,opacity:i,zIndex:a,transform:"rotate(".concat(d,"deg)")}}function zy(e){var t=e.asset,i=e.showOnly,a=e.canvasInfo,o=e.videoInfo,l=e.videoStatus,c=e.isPreviewMovie,d=e.index,p=(e.parentAsset,e.previewAll),v=e.manualPreview,m=a.scale,h=i||c?[]:ju(),f=o.allAnimationTime,g=t.meta,x=t.assetDuration,y=t.containerSize,b=t.assetTransform,_=(t.animationItemDuration,t.assetPosition),j=(t.isAea,t.attribute),w=(0,r.useState)(!0),k=(0,n.Z)(w,2),T=k[0],Z=k[1];(0,r.useEffect)((()=>(0,s.EH)((()=>{Z((()=>{var e,i,a,n,r,o;if(di(t)||p||!c&&t.attribute.rt_previewAeA)return null===(o=t.setTempData)||void 0===o||o.call(t,{rt_hideInCanvas:!1}),!1;var s=l.currentTime;if(s===f&&j.endTime===f)return!1;var d=j.animation,u=(e=null===d||void 0===d||null===(i=d.enter)||void 0===i?void 0:i.baseId,a=null===d||void 0===d||null===(n=d.exit)||void 0===n?void 0:n.baseId,!0);return s>=x.startTime&&s<=x.endTime&&(u=!1),null===(r=t.setTempData)||void 0===r||r.call(t,{rt_hideInCanvas:u}),u})())}))));var C=(0,r.useMemo)((()=>{var e=(0,u.Z)({position:"absolute"},Dy(t));return T&&(e.opacity=0,e.zIndex=Fe.minZIndex,e.pointerEvents="none"),e.display=g.hidden?"none":"block",ii(t)&&(e.zIndex=e.zIndex-1,e.outline="".concat(1/m,"px dashed rgba(255, 255, 255, 0.7)")),li(t)&&!c?e.cursor="move":e.pointerEvents="none",g.transferLocation&&(e.zIndex=Fe.maxZIndex-100,e.pointerEvents="none",v||1===l.playStatus||(e.opacity=0)),g.isLogo&&(e.zIndex=Fe.maxZIndex-99,e.pointerEvents="none"),e}),[T,y,b,y,_,m,g.hidden,v,l.playStatus]),N=(0,r.useMemo)((()=>Nt(t,i||!1)),[g.className,i]),S=(0,r.useMemo)((()=>null!==h&&void 0!==h&&h.includes(d)?{outline:"".concat(1/m,"px dashed rgba(255, 255, 255, 0.7)")}:{}),[h,m]);return(0,r.useMemo)((()=>({style:C,assetClassName:N,AniAssetHidden:T,auxiliaryBolder:S,showCustomAnimation:t.isAea,isHasAnimation:t.isAllAnimation})),[C,N,T,S,t.isAea,t.isAllAnimation])}function Fy(e){var t="left",i="top";switch(e){case"nw":t="left",i="top";break;case"north":t="center",i="top";break;case"ne":t="right",i="top";break;case"west":t="left",i="center";break;case"center":t="center",i="center";break;case"east":t="right",i="center";break;case"sw":t="left",i="bottom";break;case"south":t="center",i="bottom";break;case"se":t="right",i="bottom";break}return[t,i]}var Oy=(e,t)=>{if(!e)return"";var i=e.x,a=void 0===i?0:i,n=e.y,r=void 0===n?0:n,o=e.blur,s=void 0===o?0:o,l=e.color,c=void 0===l?"#000":l,d=e.spread,u=void 0===d?0:d;return t?"box-shadow(".concat(c," ").concat(a,"px ").concat(r,"px ").concat(s,"px ").concat(u,"px)"):"drop-shadow(".concat(c," ").concat(a,"px ").concat(r,"px ").concat(s,"px)")};function By(e,t){var i=e.text,a=e.fontSize,n=void 0===a?16:a,r=e.color,o=void 0===r?{r:0,g:0,b:0,a:1}:r,s=e.fontFamily,l=j(o),c=document.createElement("canvas");c.height=t.height;var d=c.getContext("2d");if(d){d.clearRect(0,0,c.width,c.height),d.fillStyle=l,d.font="".concat(n,"px ").concat(s),c.width=t.width;var u=0,p=100,v=0;d.fillStyle=l,d.font="".concat(n,"px ").concat(s),d.textAlign="left",d.textBaseline="middle",i.forEach((e=>{for(var t=0;t<e.length;t++)u+=d.measureText(e[t]).width,"\n"===e[t]&&(u=0,p+=n,v=t),u>c.width&&(d.fillText(e.substring(v,t),10,p),p+=n,u=0,v=t),t==e.length-1&&d.fillText(e.substring(v,t+1),10,p);u=0,p+=n,v=0}))}var m=c.toDataURL("image/png");return m}function Wy(e){var t=e.asset,i=e.canvasInfo,a=t.attribute,o=a.isFill,s=void 0!==o&&o,l=a.gravity,c=void 0===l?"nw":l,d=a.fontSize,u=a.color,p=a.fontFamily,v=a.text,m=void 0===v?[]:v,h=a.width,f=a.height,g=a.scale,x=void 0===g?100:g,y=i.scale,b=Fy(c),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=(0,r.useMemo)((()=>By({text:m,fontSize:250,color:u,fontFamily:t.fontFamily},{width:h,height:f/2})),[m,d,u,p]);return(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",background:"url(".concat(k,") ").concat(s?"repeat":"no-repeat"," ").concat(w," ").concat(j," / ").concat(.8*h*(x/100)*y,"px")}})}var Vy=(0,hp.Pi)(Wy),Uy=e=>{var t=e.asset,i=e.canvasInfo,a=e.isPreviewMovie;return t.meta.isLogo?(0,Kg.jsx)(Vy,{asset:t,canvasInfo:i,isPreviewMovie:a}):(0,Kg.jsx)(Ly,(0,u.Z)({},e))},Gy=(0,hp.Pi)(Uy),Xy=e=>{var t=e.angle,i=e.colorStops,a=e.coords,n=a.x1,r=a.y1,o=a.x2,s=a.y2,l=i.reduce(((e,t)=>{var i=t.color,a=i.r,n=i.g,r=i.b,o=i.a,s=t.offset;return e+="".concat(a).concat(n).concat(r).concat(o).concat(s),e}),"");return"".concat(t).concat(n).concat(r).concat(o).concat(s).concat(l)},qy=e=>{var t=e.width,i=e.height,a=e.path,n=e.attr,r=e.fill,o=e.id,s=r,l=s.coords||{},c=l.x1,d=l.y1,p=l.x2,v=l.y2,m=!!s.colorStops,h=m?Xy(s):"",f=m?"url(#".concat(h,")"):j(r),g=1-(Number(n.strokeWidth)||0)/t,x=1-(Number(n.strokeWidth)||0)/i;return(0,Kg.jsx)("div",{style:{width:t,height:i},children:(0,Kg.jsxs)("svg",{"data-asset-id":"".concat(b).concat(o),style:{overflow:"inherit",verticalAlign:"top"},width:t,height:i,preserveAspectRatio:"none",children:[m&&(0,Kg.jsx)("linearGradient",{id:h,x1:c,y1:d,x2:p,y2:v,children:s.colorStops.map((e=>(0,Kg.jsx)("stop",{offset:e.offset,style:{stopColor:j(e.color)}},e.offset)))}),(0,Kg.jsx)("g",{children:(0,Kg.jsx)("path",(0,u.Z)((0,u.Z)({style:{vectorEffect:"non-scaling-stroke",transformOrigin:"center"},transform:"scale(".concat(g," ").concat(x,")"),d:a},n),{},{fill:f}))})]})})};qy.defaultProps={id:void 0};var Hy=qy,Yy=.552284749831,Ky=(e,t)=>{var i=e/2*Yy,a=t/2*Yy;return[{start:[e/2,0],startControl:[e/2+i,0],endControl:[e,t/2-a],end:[e,t/2]},{start:[e,t/2],startControl:[e,t/2+a],endControl:[e/2+i,t],end:[e/2,t]},{start:[e/2,t],startControl:[e/2-i,t],endControl:[0,t/2+a],end:[0,t/2]},{start:[0,t/2],startControl:[0,t/2-a],endControl:[e/2-i,0],end:[e/2,0]}]},Qy=(e,t,i)=>{if(!i)return[{start:[0,0],end:[e,0],cornerType:"rightAngle"},{start:[e,0],end:[e,t],cornerType:"rightAngle"},{start:[e,t],end:[0,t],cornerType:"rightAngle"},{start:[0,t],end:[0,0],cornerType:"rightAngle"}];var a=Math.min(e/2,t/2,i),n=a*Yy;return[{start:[a,0],end:[e-a,0]},{start:[e-a,0],startControl:[e-a+n,0],endControl:[e,a-n],end:[e,a]},{start:[e,a],end:[e,t-a]},{start:[e,t-a],startControl:[e,t-a+n],endControl:[e-a+n,t],end:[e-a,t]},{start:[e-a,t],end:[a,t]},{start:[a,t],startControl:[a-n,t],endControl:[0,t-a+n],end:[0,t-a]},{start:[0,t-a],end:[0,a]},{start:[0,a],startControl:[0,a-n],endControl:[a-n,0],end:[a,0]}]},Jy=(e,t)=>[{start:[e/2,0],end:[e,t]},{start:[e,t],end:[0,t]},{start:[0,t],end:[e/2,0]}],$y=(e,t)=>[{start:[0,0],end:[e,t]}],eb=e=>{var t=e.width,i=e.height,a=e.radius,n=void 0===a?0:a,r=e.type;switch(r){case"rect":return Qy(t,i,n);case"ellipse":return Ky(t,i);case"triangle":return Jy(t,i);case"line":return $y(t,i);default:return[{start:[0,0],end:[t,i]}]}},tb=(e,t)=>e.reduce(((i,a,n)=>{var r=a.start,o=a.end,s=a.startControl,l=void 0===s?r:s,c=a.endControl,d=void 0===c?o:c,u=n?"":"M ".concat(r[0]," ").concat(r[1]," "),p=e.length-1===n&&t;return i+="".concat(u,"C ").concat(l[0]," ").concat(l[1],"\n    ").concat(d[0]," ").concat(d[1],"\n    ").concat(o[0]," ").concat(o[1]," ").concat(p?"Z":""),i}),""),ib=()=>({fill:{r:133,g:133,b:133,a:1},strokeDashType:0,strokeDash:"0, 0",strokeLinecap:void 0,stroke:{r:133,g:133,b:133,a:1},strokeWidth:0,closed:!0}),ab=e=>{var t=e.asset,i=t.meta.shapeType,a=t.attribute,n=a.width,o=a.height,s=a.svgInfo,l=void 0===s?ib():s,c=t.id,d=l,u=d.stroke,p=d.strokeDash,v=d.strokeWidth,m=d.fill,h=d.strokeLinecap,f=d.closed,g=d.radius,x=d.pathItems,y=(0,r.useMemo)((()=>n&&o&&i?x||eb({width:n,height:o,type:i,radius:g}):[]),[n,o,i,g,x]),b=tb(y,f),_={stroke:j(u),strokeDasharray:p,strokeWidth:v,strokeLinecap:h};return(0,Kg.jsx)("div",{style:{transform:"scaleX(".concat(t.transform.horizontalFlip?-1:1,") scaleY(").concat(t.transform.verticalFlip?-1:1,")")},children:(0,Kg.jsx)(Hy,{path:b,width:n,height:o,fill:m,attr:_,id:c})})},nb=(0,hp.Pi)(ab),rb=i(73874),ob=i.n(rb),sb=i(41995),lb=i.n(sb),cb=function(e){var t=e.options;return!(!t.pdGround||!(e.row>1&&e.row<5&&e.col>1&&e.col<5||e.row>e.count-6&&e.row<e.count-2&&e.col>1&&e.col<5||e.row>1&&e.row<5&&e.col>e.count-6&&e.col<e.count-2))},db=e=>new Promise((t=>{var i=new Image;i.src=e,i.onload=()=>{t(i),i.onload=null}})),ub=new(ob())({max:50});class pb{constructor(e){var t=this;this.options={text:"",size:300,padding:20,correctLevel:3,background:{r:255,g:255,b:255},foreground:{r:0,g:0,b:0},image:"",imageSize:50},this.canvas=void 0,this.ctx=void 0,this.imgCanvas=void 0,this.imgCtx=void 0,this.bGImgCanvas=void 0,this.bGImgCtx=void 0,this.devicePixelRatio=void 0,this.setCanvasSize=()=>{var e,t=this.options.size,i=this.devicePixelRatio;this.canvas.width=t*i,this.canvas.height=t*i,null===(e=this.ctx)||void 0===e||e.scale(i,i)},this._InitImageSize=()=>{var e=this.options,t=e.imageSize,i=e.image;!this.imgCanvas&&i&&(this.imgCanvas=document.createElement("canvas"),this.imgCtx=this.imgCanvas.getContext("2d"),this.imgCanvas.width=t,this.imgCanvas.height=t,this.imgCanvas.style.width="".concat(t,"px"),this.imgCanvas.style.height="".concat(t,"px"))},this._createImage=(0,p.Z)(m().mark((function e(){var i,a,n,r,o;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.options,n=a.image,r=a.imageSize,t._InitImageSize(),n){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,db(n);case 6:o=e.sent,null===(i=t.imgCtx)||void 0===i||i.drawImage(o,0,0,r,r);case 8:case"end":return e.stop()}}),e)}))),this._drawImage=()=>{var e,t=this.options,i=t.imageSize,a=t.size,n=t.image,r=((a-i)/2).toFixed(2),o=((a-i)/2).toFixed(2);this.imgCanvas&&n&&(null===(e=this.ctx)||void 0===e||e.drawImage(this.imgCanvas,Number(r),Number(o),i,i))},this._getQrCodeAlg=()=>{var e="".concat(this.options.text).concat(this.options.correctLevel),t=ub.get(e);return t||(t=new(lb())(this.options.text,this.options.correctLevel),ub.set(e,t)),t},this._drawBG=()=>{var e=this.options,t=this.ctx,i=e.size,a=e.background;if(t){var n=j(a);t.save(),t.fillStyle=n,t.fillRect(0,0,i,i),t.restore()}},this._getLineargradient=(e,t,i)=>{var a=[t/2,t/2],n=[t/2,t],r=[t/2,0],o=90-i.angle;ug.U1(n,n,a,o*(Math.PI/180)),ug.U1(r,r,a,o*(Math.PI/180));var s=e.createLinearGradient(n[0],n[1],r[0],r[1]);return i.colorStops.forEach((e=>{var t=e.offset,i=e.color;s.addColorStop(t,j(i))})),s},this._drawQrCode=()=>{var e=this.options,t=this.ctx;if(t){var i=e.size,a=e.pdGround,n=e.foreground,r=e.padding;t.clearRect(0,0,i,i),this._drawBG();var o,s=this._getQrCodeAlg(),l=s.getModuleCount(),c=i-2*r;o=n.colorStops?this._getLineargradient(t,c,n):j(n);for(var d=a&&j(a),u=Number((c/l).toPrecision(4)),p=Number((c/l).toPrecision(4)),v=0;v<l;v++)for(var m=0;m<l;m++){var h=Math.ceil((m+1)*u)-Math.floor(m*u),f=Math.ceil((v+1)*u)-Math.floor(v*u);if(s.modules[v][m]){var g=cb({row:v,col:m,count:l,options:e});t.fillStyle=g&&d?d:o,t.fillRect(Math.round(m*u+r),Math.round(v*p+r),h,f)}}}},this.upDateImage=function(){var e=(0,p.Z)(m().mark((function e(i){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.options.image=i,e.next=3,t._createImage();case 3:t._drawImage();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.updateText=function(){var e=(0,p.Z)(m().mark((function e(i){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.options.text=i,t._drawQrCode(),t._drawImage();case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.upDateOptions=function(){var e=(0,p.Z)(m().mark((function e(i){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.options.image,Object.assign(t.options,i),a===t.options.image){e.next=5;break}return e.next=5,t._createImage();case 5:t._drawQrCode(),t._drawImage();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),this.create=(0,p.Z)(m().mark((function e(){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t._createImage();case 2:return t._drawQrCode(),t._drawImage(),e.abrupt("return",t.canvas);case 5:case"end":return e.stop()}}),e)}))),this.options=Object.assign(this.options,e),this.devicePixelRatio=window.devicePixelRatio||1,this.canvas=this.options.canvas||document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.imgCanvas=null,this.imgCtx=null,this.bGImgCanvas=null,this.bGImgCtx=null,this.setCanvasSize()}}var vb=pb,mb=i(35510),hb=i.n(mb),fb=i(6935),gb=["wx","wx2","alipay","qq","wb","tb","finger","home","contact","link"];function xb(e){return e?"".concat(fb.BT,"/third-icon/").concat(e,".png"):""}var yb=gb.map((e=>({iconType:e,url:xb(e)}))),bb=e=>{var t=e.options,i=e.className,a=(0,yp.Z)(e,["options","className"]),o=(0,r.useRef)(),s=t.background,l=t.foreground,c=t.text,d=t.iconType,p=(0,r.useState)(),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=JSON.stringify(s),g=JSON.stringify(l),x="custom"===d?t.rt_url:xb(d);return(0,r.useEffect)((()=>{if(m){var e={text:c,background:s,foreground:l,image:x};o.current?o.current.upDateOptions((0,u.Z)({},e)):(o.current=new vb((0,u.Z)((0,u.Z)({},e),{},{canvas:m})),o.current.create())}}),[f,g,c,m,x,d]),(0,Kg.jsx)("canvas",(0,u.Z)({className:hb()("qrcode-canvas",i),ref:e=>h(e)},a))},_b=bb,jb=e=>{var t=e.asset,i=t.attribute.qrcodeInfo,a=t.id,r=Kf(),o=(0,n.Z)(r,2),s=o[1],l=()=>{s(!0)};return i?(0,Kg.jsx)(_b,{options:i,onDoubleClick:l,"data-asset-id":"".concat(b).concat(a)}):null},wb=(0,hp.Pi)(jb);function kb(e){var t=e.attribute,i=e.transform,a=t.cropXTo,n=void 0===a?0:a,r=t.cropYTo,o=void 0===r?0:r,s=t.cropXFrom,l=void 0===s?0:s,c=t.cropYFrom,d=void 0===c?0:c,u=t.assetWidth,p=void 0===u?0:u,v=t.assetHeight,m=void 0===v?0:v,h=t.width,f=void 0===h?0:h,g=t.height,x=void 0===g?0:g,y=t.container,b="scaleX(".concat(i.horizontalFlip?-1:1,") scaleY(").concat(i.verticalFlip?-1:1,")"),_={width:Number(null!==y&&void 0!==y&&y.id?y.width:f),height:Number(null!==y&&void 0!==y&&y.id?y.height:x)};function j(){var e=n*p,a=o*m,r=l*p,s=d*m,c=t.width/(e-r),u=t.height/(a-s),v=s*u,h=e*c,f=a*u,g=r*c,x="rect(".concat(v,"px ").concat(h,"px ").concat(f,"px ").concat(g,"px)"),y={position:"absolute",top:"".concat(-v,"px"),left:"".concat(-g,"px"),width:"".concat(p*c,"px"),height:"".concat(m*u,"px"),clip:x};return(i.horizontalFlip||i.verticalFlip)&&Object.assign(y,{transform:b}),y}function w(){return{width:_.width,height:_.height,overflow:"hidden",transformOrigin:"0 0 0"}}function k(){var e={width:_.width,height:_.height};return i&&(i.horizontalFlip||i.verticalFlip)&&(e.transform=b),e}return{getImgStyle:j,getCanvasStyle:k,getImgContainer:w}}function Tb(e){var t=e.asset,i=e.setSvgViewBox,a=(0,r.useRef)(null),n=(0,r.useRef)(null),o=t.attribute,s=t.transform,l=o.container,c=o.picUrl;function d(e){a.current&&(a.current.innerHTML="",a.current.appendChild(e))}function u(){var e=n.current;if(null!==e&&void 0!==e&&e.svgNode&&l&&c&&"loading"!==c){var t=l.width,i=l.height,a=l.viewBoxWidth,r=l.viewBoxHeight,s=l.viewBoxWidthBack,d=l.viewBoxHeightBack,u=l.posX,p=l.posY,v=e.getImgAndClipPathNode(),m=v.imageNodes,h=v.clipPathNodes;e.batchSetAttributes(e.svgNode,{width:t,height:i,preserveAspectRatio:"none",viewBox:"0 0 ".concat(a," ").concat(r)}),m[0]&&e.batchSetAttributes(m[0],{"xlink:href":c,preserveAspectRatio:"none",width:o.width,height:o.height,x:u,y:p,transform:"matrix(1 0 0 1 0 0)"}),h[0]&&e.batchSetAttributes(h[0],{transform:"scale(".concat(a/s,", ").concat(r/d,")")})}}function p(){null!==l&&void 0!==l&&l.width&&null!==l&&void 0!==l&&l.height&&null!==l&&void 0!==l&&l.viewBoxWidth&&null!==l&&void 0!==l&&l.viewBoxHeight&&u()}function v(e){var t,i,a="asset-image-container-".concat((new Date).getTime()+Math.random()),n=e,r=(null===(t=n.match(/clip-path="url\(#(.+?)\)/))||void 0===t?void 0:t[1])||"",o=(null===(i=n.match(/xlink:href="#(.+?)"/))||void 0===i?void 0:i[1])||"";return n=n.replace(new RegExp(r),a),n=n.replace(new RegExp(r),a),n=n.replace(new RegExp(o),"content-".concat(a)),n=n.replace(new RegExp(o),"content-".concat(a)),n}return(0,r.useLayoutEffect)((()=>{if(null!==l&&void 0!==l&&l.rt_svgString){var e=v(l.rt_svgString),t=new Xg(e);t.viewBox&&i(t.viewBox),t.svgNode&&d(t.svgNode),n.current=t,p()}}),[null===l||void 0===l?void 0:l.rt_svgString]),(0,r.useEffect)((()=>{p()}),[l,o.width,o.height,s.posX,s.posY]),{SvgContainer:a}}var Zb=(0,hp.Pi)((e=>{var t=e.asset,i=e.style,a=t.attribute.container;function n(e){setTimeout((()=>{t.setContainerViewBox(e)}))}function r(e){e!==(null===a||void 0===a?void 0:a.rt_svgString)&&t.replaceContainerSVG(e)}var o=Tb({asset:t,setSvgViewBox:n,setSvgString:r}),s=o.SvgContainer;return(0,Kg.jsx)("div",{style:i,children:(0,Kg.jsx)("div",{ref:s})})})),Cb=Zb,Nb=i(74772),Sb=i(17739),Ib=Iu,Ab=()=>Fe.wholeTemplate?Ge.videoStatusOfPart.currentTime:Ge.videoStatus.currentTime,Pb=()=>Ge.videoStatus.currentTime,Mb=()=>Ge.currentTimeRange;function Eb(){return Ci}function Lb(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=Eb();i.setCurrentTime(e,t)}var Db=(0,h.Z)(Lb,50);function Rb(){var e=Eb();e.pauseVideo()}function zb(){var e=Eb();e.playVideo()}function Fb(){var e=Eb();e.stopVideo()}function Ob(){var e=Ii().playStatus===a.Playing;return{isPlaying:e,playVideo:zb,pauseVideo:Rb}}function Bb(){var e=Ii(),t=e.currentTime;function i(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Rb(),Lb(e,t)}return{setCurrentTime:i,currentTime:t}}function Wb(){return Ii().currentTime}function Vb(){Ge.setPreviewVideo({playStatus:a.Stopped,currentTime:0})}function Ub(){var e=Ge.previewVideoStatus.currentTime;function t(e){Rb(),Ge.setPreviewVideo({currentTime:e})}return{setCurrentTime:t,currentTime:e}}function Gb(){Ge.setPreviewVideo({playStatus:a.Playing})}function Xb(){Ge.setPreviewVideo({playStatus:a.Paused})}function qb(e){console.log("setPreviewCurrentTime",e),Ge.setPreviewVideo({currentTime:Math.round(e)})}function Hb(e){Ge.setPreviewVideo({volume:e})}function Yb(){var e,t=Ge.previewVideoStatus.playStatus===a.Playing,i=(null===(e=Ge.previewVideoStatus)||void 0===e?void 0:e.volume)||100;return{volume:i,isPlaying:t,playVideo:Gb,pauseVideo:Xb,setVolume:Hb}}function Kb(){return(0,s.ZN)(null===Ge||void 0===Ge?void 0:Ge.canvasInfo)}function Qb(){var e=ud();return{loadComplete:e}}function Jb(){Ge.previewVideoStatus.playStatus===a.Playing?Xb():Gb()}function $b(e){if(e){var t=e.templateIndex,i=e.currentTime;if(i<0)return;var a=Su();if(!a[t])return Ge.setManualCurrent(void 0),void Ge.setManualPreview(!1);var n=a[t].videoInfo.pageTime;Ge.setManualCurrent({templateIndex:t,currentTime:Math.min(Math.max(0,i),n-10)}),Ge.setManualPreview(!0)}else Ge.setManualCurrent(void 0),Ge.setManualPreview(!1)}var e_=Ge.setManualPreview;function t_(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;e=Number(e);var t={poster:"",pageAttr:{backgroundColor:{r:255,g:255,b:255,a:1},pageInfo:{gifInfo:void 0,pageTime:e,baseTime:e,rt_preview_image:"",rt_preview_video:"",tid:""},sound:{list:[]}},assets:[],cameras:[]};return t}function i_(){return{meta:{locked:!1,type:"lottie",name:"",group:"",groupWordID:"",isQuickEditor:!1},attribute:{resId:0,width:0,height:0,startTime:0,endTime:1e3,isLoop:!0,opacity:100,rt_url:"",rt_total_frame:100,rt_preview_url:"",rt_frame_url:""},transform:{posX:0,posY:0,rotate:0,horizontalFlip:!1,verticalFlip:!1}}}function a_(){return{meta:{locked:!1,type:"plain",name:"",group:"",groupWordID:"",isQuickEditor:!1},attribute:{resId:0,width:0,height:0,startTime:0,endTime:1e3,isLoop:!0,opacity:100},transform:{posX:0,posY:0,rotate:0,horizontalFlip:!1,verticalFlip:!1}}}function n_(){return{meta:{locked:!1,index:0,name:"",group:"",type:"text",addOrigin:"specificWord",isQuickEditor:!0},attribute:{text:["\u53cc\u51fb\u7f16\u8f91\u6587\u5b57"],fontSize:24,fontWeight:"normal",textAlign:"center",width:200,height:50,opacity:100,lineHeight:13,letterSpacing:0,color:{r:0,g:0,b:0,a:1},animation:{enter:{baseId:0,duration:500,details:{direction:2}},stay:{},exit:{baseId:0,duration:500,details:{direction:2}}}},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function r_(){return{meta:{locked:!1,index:0,name:"",group:"",type:"image",isQuickEditor:!1},attribute:{resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function o_(){return{meta:{locked:!1,index:0,name:"",group:"",type:"SVG",isQuickEditor:!1},attribute:{resId:"",picUrl:"",width:0,height:0,assetHeight:0,assetWidth:0,opacity:100,cropXFrom:0,cropXTo:1,cropYFrom:0,cropYTo:1},transform:{posX:0,posY:0,horizontalFlip:!1,verticalFlip:!1,rotate:0}}}function s_(){return{meta:{locked:!1,type:"videoE",name:"",group:"",groupWordID:"",isQuickEditor:!1},attribute:{resId:0,width:0,height:0,startTime:0,endTime:1e3,isLoop:!1,opacity:100,rt_url:"",rt_total_frame:100,rt_preview_url:"",rt_frame_url:""},transform:{posX:0,posY:0,rotate:0,horizontalFlip:!1,verticalFlip:!1}}}function l_(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{meta:{locked:!1,index:0,type:e?"__module":"module",isQuickEditor:!1},attribute:{width:0,height:0},transform:{posX:0,posY:0,rotate:0},assets:[]}}function c_(e){var t=e.width,i=e.height,a={width:t,height:i,startTime:0,endTime:Id,posX:0,posY:0,easing:"linear",scale:1};return a}class d_{constructor(){var e=this;this.timer=void 0,this.delay=0,this.set=function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2e3;e.delay=i,clearTimeout(e.timer),Nl.setHighlightAssets(t),e.timer=setTimeout((()=>{e.clear()}),i)},this.clear=()=>{Nl.setHighlightAssets([])}}}var u_,p_,v_=new d_;function m_(e,t){var i,a,n,r,o,s,l=Nl.currentAsset;ai(l)&&null!==(i=l)&&void 0!==i&&i.assets&&(null===(a=l)||void 0===a?void 0:a.assets.length)>0&&(l=null===(s=l)||void 0===s?void 0:s.assets[0]);var c=null!==(n=null===(r=l)||void 0===r||null===(o=r.attribute)||void 0===o?void 0:o[e])&&void 0!==n?n:t;function d(t){Ud(l,Ft({[e]:t})),We(e,!0)}return[c,d]}function h_(e,t){var i,a,n=Nl.currentAsset,r=null!==(i=null===n||void 0===n||null===(a=n.transform)||void 0===a?void 0:a[e])&&void 0!==i?i:t;function o(t){var i,a;n&&ai(n)&&(null===n||void 0===n||null===(i=n.assets)||void 0===i?void 0:i.length)>0&&(null===n||void 0===n||null===(a=n.assets[0])||void 0===a||a.update(Bt({[e]:t})));null===n||void 0===n||n.update(Bt({[e]:t})),We(e,!0)}return[r,o]}function f_(e,t){var i,a,n,r=null!==(i=null===(a=Nl.watermark)||void 0===a||null===(n=a.attribute)||void 0===n?void 0:n[e])&&void 0!==i?i:t;function o(t){var i;null!==(i=Nl.watermark)&&void 0!==i&&i.meta.id&&(Ud(Nl.watermark,Ft({[e]:t})),We("watermark",!0))}return[r,o]}function g_(e,t){var i,a,n,r=null!==(i=null===(a=Nl.watermark)||void 0===a||null===(n=a.transform)||void 0===n?void 0:n[e])&&void 0!==i?i:t;function o(t){var i;null!==(i=Nl.watermark)&&void 0!==i&&i.meta.id&&(Ud(Nl.watermark,Bt({[e]:t})),We("watermark",!0))}return[r,o]}function x_(e,t){var i=null!==t&&void 0!==t?t:Ge.canvasInfo,a=i.width,n=void 0===a?0:a,r=i.height,o=void 0===r?0:r;return{posX:(n-e.width)/2,posY:(o-e.height)/2}}function y_(e,t){var i={startTime:0,endTime:0};return e.forEach((e=>{var t=e.assetDuration,a=t.startTime,n=t.endTime;a<i.startTime&&(i.startTime=a),n>i.endTime&&(i.endTime=n)})),i.startTime=Math.max(i.startTime,0),i.endTime=Math.min(i.endTime,t),i}(function(e){function t(e,t,i){var a=0,n=e;return e+i<=t?i<0&&(a=-i,n=e+i):i>=0?n=t-i:(a=-i,n=t),{skew:a,size:n}}function i(e,t){var i=e.attribute,a=Number(t.source_width),n=Number(t.source_height),r=i.width,o=i.height,s=(i.container,r),l=o;return a>n?l=s/(a/n):s=l/(n/a),{width:s,height:l,posX:0,posY:0}}e.calcSizePosition=t,e.replaceSvgSize=i})(u_||(u_={})),function(e){function t(e){var t=[];e.forEach(((e,i)=>{for(var a in e)["top","left","strokeWidth","shadowH","shadowV","shadowBlur"].includes(a)&&0!=e[a]&&t.push({sizes:[{index:i,key:a}],range:{min:e[a]/10,max:2*e[a]}})}))}function i(e){var t=[];for(var i in e){var a=i.split(",");t.push(Object.assign(e[i],{colorBlock:{r:a[0],g:a[1],b:a[2],a:a[3]}}))}return t}function a(e){var t={};return null===e||void 0===e||e.layers.forEach(((e,i)=>{for(var a in e){var n=e[a];if(("color"===a||"strokeColor"===a||"shadowColor"===a)&&n.a&&n.a>0){var r="".concat(n.r,",").concat(n.g,",").concat(n.b,",").concat(n.a);t[r]||(t[r]={},t[r].colors=[]),t[r].colors.push({index:i,key:a})}}})),i(t)}e.filterVariableSize=t,e.resetColorBlock=i,e.filterFontEffectColor=a}(p_||(p_={}));var b_=Vt.filterFontEffectColor;function __(e){if(e){var t=e.meta,i=t.type;Fe.canUseTextEditor.includes(i)&&iu.setTextEditActive(e),Fe.replaceable.includes(i)&&(iu.setEditActive(e),au(!0))}}function j_(e){e&&iu.setEditCamera(e)}function w_(){We("saveCamera",!0)}function k_(){return m_("fontWeight")}function T_(){return m_("fontStyle")}function Z_(){var e=m_("fontFamily"),t=(0,n.Z)(e,1),i=t[0];function a(e){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=Nl.currentAsset,e.next=3,cd(t);case 3:a=e.sent,a&&(null===i||void 0===i||i.update(Ft({fontFamily:t})),We("updateFontFamily",!0));case 5:case"end":return e.stop()}}),e)}))),r.apply(this,arguments)}return[i,a]}function C_(){var e=Nl.currentAsset,t={fontFamily:null===e||void 0===e?void 0:e.attribute.fontFamily,resId:null===e||void 0===e?void 0:e.attribute.resId,ufsId:null===e||void 0===e?void 0:e.attribute.ufsId};function i(e){return a.apply(this,arguments)}function a(){return a=(0,p.Z)(m().mark((function t(i){var a;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,cd(i.fontFamily);case 2:return a=t.sent,a&&(null===e||void 0===e||e.update(Ft(i)),We("updateUserFontFamily",!0)),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)}))),a.apply(this,arguments)}return{value:t,update:i}}function N_(){return m_("fontSize")}function S_(){return m_("textAlign")}function I_(){return m_("lineHeight")}function A_(){return m_("letterSpacing")}function P_(){return h_("alpha",100)}function M_(){return m_("textDecoration")}function E_(){return m_("text")}function L_(){var e,t,i=(null===(e=Nl.currentAsset)||void 0===e||null===(t=e.attribute)||void 0===t?void 0:t.writingMode)||"horizontal-tb";function a(e){if(Nl.currentAsset){var t,i=Nl.currentAsset.attribute,a=null!==(t=i.writingMode)&&void 0!==t?t:"horizontal-tb";if(a!==e){var n=i.height,r=i.width;Nl.currentAsset.update(Ft({width:n,height:r,writingMode:e}))}We("writingMode",!0)}}return[i,a]}function D_(){return m_("color")}function R_(){return h_("horizontalFlip")}function z_(){return h_("verticalFlip")}function F_(){return m_("colors")}var O_=()=>{var e,t=Nl.currentAsset,i=(null===t||void 0===t||null===(e=t.attribute.svgInfo)||void 0===e?void 0:e.fill)||{},a=e=>{t&&(Ud(t,Ft({svgInfo:(0,u.Z)((0,u.Z)({},t.attribute.svgInfo),{},{fill:e})})),We("svgInfoFill",!0))};return{fill:i,updateFill:a}};function B_(){var e=Nl.currentAsset,t={effect:null===e||void 0===e?void 0:e.attribute.effect,effectVariant:null===e||void 0===e?void 0:e.attribute.effectVariant,effectColorful:null===e||void 0===e?void 0:e.attribute.effectColorful};function i(e,t,i,a){var n=a[e];n&&(n.colors.forEach((e=>{var a,n=e.index,r=e.key;null!==i&&void 0!==i&&null!==(a=i[n])&&void 0!==a&&a[r]&&(i[n][r]=t)})),n.colorBlock&&(n.colorBlock=t),We("layerColorUpdater",!0))}function a(t,a){if(e){var n=e.attribute.effectVariant;if(n){var r=A(null===n||void 0===n?void 0:n.layers),o=A(null===n||void 0===n?void 0:n.variableColorPara);i(t,a,r,o),e.update(Ft({effectVariant:(0,u.Z)((0,u.Z)({},n),{},{variableColorPara:o,layers:r})})),We("updateLayerColor",!0)}}}function n(e){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(m().mark((function t(i){var a,n,r,o,s;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=14;break}return a=e,n=jt(i),t.next=5,Jc(n);case 5:if(r=t.sent,!r){t.next=13;break}if(s={effect:i,effectColorful:void 0,effectVariant:(0,u.Z)((0,u.Z)({},r),{},{variableColorPara:null!==(o=Vt.filterFontEffectColor(r))&&void 0!==o?o:[]})},a.attribute.fontFamily||!r.rt_defaultFontFamily){t.next=12;break}return s.fontFamily=r.rt_defaultFontFamily,t.next=12,cd(r.rt_defaultFontFamily);case 12:a.update(Ft(s));case 13:We("updateFontEffect",!0);case 14:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}function o(e,t,i){return s.apply(this,arguments)}function s(){return s=(0,p.Z)(m().mark((function t(i,a,n){var r,o,s,l,c,d,p,v;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=29;break}if(r=e.attribute.effectColorful,o=r.resId,s=r.effect,!s){t.next=29;break}l=A(null===s||void 0===s?void 0:s.shadowList),c=A(null===s||void 0===s?void 0:s.sourceList),d=A(null===s||void 0===s?void 0:s.fillList),p=A(null===s||void 0===s?void 0:s.strokeList),t.t0=n,t.next="fill"===t.t0?11:"stroke"===t.t0?13:"shadow"===t.t0?15:"source"===t.t0?17:19;break;case 11:return d[i]=a,t.abrupt("break",19);case 13:return p[i]=a,t.abrupt("break",19);case 15:return l[i]=a,t.abrupt("break",19);case 17:return c[i]=a,t.abrupt("break",19);case 19:if("source"!==n){t.next=27;break}return v=new Ec("effectImage"),t.next=23,v.getImageDom(a);case 23:t.sent,e.update(Ft({effectColorful:{resId:o,effect:(0,u.Z)((0,u.Z)({},s),{},{sourceList:c})}})),t.next=28;break;case 27:e.update(Ft({effectColorful:{resId:o,effect:(0,u.Z)((0,u.Z)({},s),{},{shadowList:l,sourceList:c,fillList:d,strokeList:p})}}));case 28:We("updateFontEffectColor",!0);case 29:case"end":return t.stop()}}),t)}))),s.apply(this,arguments)}function l(t,i){if(e){var a=e.attribute.effectColorful,n=a.resId,r=a.effect;if(r){var o=A(null===r||void 0===r?void 0:r.shadowList),s=A(null===r||void 0===r?void 0:r.fillList),l=A(null===r||void 0===r?void 0:r.strokeList),c=A(null===r||void 0===r?void 0:r.colorList),d=c[t],p=d.fillIndexList,v=d.strokeIndexList,m=d.shadowIndexList;p.forEach((e=>{s[e]=(0,u.Z)((0,u.Z)({},s[e]),{},{value:i})})),v.forEach((e=>{l[e]=(0,u.Z)((0,u.Z)({},l[e]),{},{value:i})})),m.forEach((e=>{o[e]=(0,u.Z)((0,u.Z)({},o[e]),{},{color:i})})),c[t].value=i,e.update(Ft({effectColorful:{resId:n,effect:(0,u.Z)((0,u.Z)({},r),{},{shadowList:o,fillList:s,strokeList:l,colorList:c})}})),We("updateBatchFontEffectSolidColor",!0)}}}function c(t){if(e){var a=e.attribute.effectVariant;if(a){var n=A(null===a||void 0===a?void 0:a.layers),r=A(null===a||void 0===a?void 0:a.variableColorPara);t.forEach(((e,t)=>{i(t,e,n,r)})),e.update(Ft({effectVariant:(0,u.Z)((0,u.Z)({},a),{},{variableColorPara:r,layers:n})})),We("batchUpdateLayerColor",!0)}}}function d(t){if(e){var i=e.attribute,a=i.effectVariant,n=i.effect;if(a&&n){var r="".concat(n.split("@")[0],"@").concat(t),o=A(null===a||void 0===a?void 0:a.layers);a.rt_variantList[t].layers.forEach(((e,t)=>{for(var i in e)o[t][i]=A(e[i])}));var s=(0,u.Z)((0,u.Z)({},a),{},{layers:o}),l=b_(s);l&&(s.variableColorPara=l),e.update(Ft({effect:r,effectVariant:s})),We("updateColorMatch",!0)}}}function v(t){null===e||void 0===e||e.update(Ft({effect:void 0,effectVariant:void 0,effectColorful:t})),We("updateEffectColorful",!0)}function h(){e&&(v(void 0),We("clearFontEffect",!0))}function f(e){return g.apply(this,arguments)}function g(){return g=(0,p.Z)(m().mark((function t(i){var a,n,r;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e){t.next=11;break}if(i.effect){t.next=6;break}return t.next=4,$c(i.resId);case 4:a=t.sent,i.effect=a;case 6:n=i.effect,r=Zk(n),v((0,u.Z)((0,u.Z)({},i),{},{effect:r})),null!==r&&void 0!==r&&r.sourceList&&(null===n||void 0===n||n.sourceList.forEach(function(){var e=(0,p.Z)(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,new Ec("effectColorfulImage").getImageDom(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),We("updateSignatureFontEffect",!0);case 11:case"end":return t.stop()}}),t)}))),g.apply(this,arguments)}return{updateColorMatch:d,clearFontEffect:h,updateFontEffect:n,updateLayerColor:a,batchUpdateLayerColor:c,updateSignatureFontEffect:f,updateFontEffectColor:o,updateBatchFontEffectSolidColor:l,value:t}}function W_(){var e,t,i,a,n,r,o=null===(e=Nl.active)||void 0===e||null===(t=e.attribute)||void 0===t?void 0:t.aeA,s=null===(i=Nl.active)||void 0===i||null===(a=i.attribute)||void 0===a?void 0:a.kw,l="string"===typeof s?JSON.parse(s):s,c=Nl.active||{},d=c.assetDuration,v=void 0===d?{startTime:0,endTime:0}:d,h=c.attribute,f=void 0===h?{startTime:0,endTime:0}:h,g={i:100*Math.round((f.endTime-v.startTime-100)/100),o:100*Math.round((v.endTime-f.startTime-100)/100)},x=(0,Zm.Z)(function(){var e=(0,p.Z)(m().mark((function e(t,i){var a,n,r,o,s;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=Nl.active,!a){e.next=11;break}return n=mt(a.attribute),r=n[t].pbr,o={pbr:r,resId:i,kw:void 0},e.next=7,Xc(i);case 7:s=e.sent,s&&(o.kw=s.kw),a.updateAeaItem([{key:t,data:o}]),We("updateAeA",!0);case 11:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),{wait:300}),y=x.run;function b(e,t){var i,a=null===o||void 0===o?void 0:o[e];null!==a&&void 0!==a&&a.kw&&(null===(i=Nl.active)||void 0===i||i.updateAeaItem([{key:e,data:(0,u.Z)((0,u.Z)({},a),{},{pbr:t})}]),We("updateAeADuration",!0))}function _(e,t){var i=Nl.active;null===i||void 0===i||i.update(Ft({rt_previewAeA:(0,u.Z)((0,u.Z)({},mt()),{},{[e]:t})}))}function j(){var e;null===(e=Nl.active)||void 0===e||e.update(Ft({rt_previewAeA:void 0}))}function w(e){var t=Nl.active;t&&(t.updateAeaItem([{key:e,data:{pbr:1}}]),We("clearAeA",!0))}var k=(0,Zm.Z)(function(){var e=(0,p.Z)(m().mark((function e(t,i){var a,n,r,o,s,l,c=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(r=c.length>2&&void 0!==c[2]?c[2]:1,j(),o=Nl.active,null===o||void 0===o||null===(a=o.attribute)||void 0===a||null===(n=a.stayEffect)||void 0===n||!n.graph){e.next=5;break}return e.abrupt("return");case 5:return s={pbr:r,resId:i,kw:void 0},Nl.textEditActive&&Nl.setTextEditActive(void 0),e.next=9,Xc(i);case 9:l=e.sent,l&&(s.kw=l.kw),null===o||void 0===o||o.update(Ft({rt_previewAeA:(0,u.Z)((0,u.Z)({},mt()),{},{[t]:s})}));case 12:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}(),{wait:300}),T=k.run;return{kw:(0,u.Z)((0,u.Z)({},l),{},{pbr:null===o||void 0===o?void 0:o.s.pbr}),value:o,assetAeaDuration:null===(n=Nl.active)||void 0===n?void 0:n.animationItemDuration,update:y,inPreview:null===(r=Nl.active)||void 0===r?void 0:r.attribute.rt_previewAeA,preview:T,directPreview:_,previewEnd:j,updatePbr:b,clear:w,max:g}}function V_(){var e=Nl.active,t=(0,Zm.Z)(function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Nl.active,!i){e.next=9;break}return e.next=4,Xc(t);case 4:a=e.sent,n=Fe.getDefaultPlaybackRate(),i.updateAeaItem([{key:"i",data:n.i},{key:"o",data:n.o}]),i.update(Ft({kw:(0,u.Z)((0,u.Z)({},a.kw),{},{resId:t}),aeA:Fe.getDefaultPlaybackRate(),stayEffect:void 0})),We("updateAeA",!0);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{wait:300}),i=t.run,a=()=>{e&&e.update(Ft({kw:void 0,aeA:Fe.getDefaultPlaybackRate()}))};return{update:i,clear:a}}function U_(e,t){e.template&&(e.updateAssetDuration(t,e.template.videoInfo.offsetTime),We("updateAssetDuration",!0))}function G_(e,t){e.setAssetDuration(t),We("setAssetDuration",!0)}function X_(e){var t=e.videoInfo.speed,i=void 0===t?1:t,a=Nl.active||{},n=a.assetDurationWithOffset,r=void 0===n?{startTime:-1,endTime:-1}:n,o=a.minAssetDuration,s=void 0===o?0:o,l=r.startTime,c=r.endTime;function d(t){var a=Nl.active;a&&(t.startTime*=i,t.endTime*=i,a.updateAssetDuration(t,e.videoInfo.offsetTime),We("updateAssetDuration",!0))}return{update:d,min:s,value:{startTime:l*(1/i),endTime:c*(1/i)}}}function q_(e){return H_.apply(this,arguments)}function H_(){return H_=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=Nl.currentAsset,!i){e.next=10;break}if((null===(a=i.attribute)||void 0===a||null===(n=a.container)||void 0===n?void 0:n.id)===t.id){e.next=10;break}return r=u_.replaceSvgSize(i,t),e.next=6,id(t.source_key);case 6:o=e.sent,s=(0,u.Z)((0,u.Z)((0,u.Z)({},r),t),{},{rt_svgString:o}),i.updateContainer(s),We("replaceClip",!0);case 10:case"end":return e.stop()}}),e)}))),H_.apply(this,arguments)}function Y_(){Nl.currentAsset&&(Nl.currentAsset.update(Ft({container:void 0})),We("removeClip",!0))}function K_(){var e,t,i,a=null!==(e=Nl.currentAsset)&&void 0!==e?e:{},n=a.attribute,r=Nl.status.inClipping,o=null!==(t=null===n||void 0===n||null===(i=n.container)||void 0===i?void 0:i.id)&&void 0!==t?t:"";function s(){Nl.currentAsset&&(Nl.setStatus({inClipping:!0}),We("startClip",!0))}function l(){Nl.setStatus({inClipping:!1}),We("endClip",!0)}return{inClipping:r,clipId:o,replaceClip:q_,removeClip:Y_,startClip:s,endClip:l}}function Q_(e){return{maxZIndex:Math.max.apply(Math,e.map((e=>e.transform.zindex))),minZIndex:Math.min.apply(Math,e.map((e=>e.meta.isBackground?e.transform.zindex+1:e.transform.zindex)))}}function J_(e){var t=e.direction,i=e.zindex,a=e.asset,n=Nl.currentTemplate,r=Nl.currentAsset,o=null!==a&&void 0!==a?a:r,s=null===n||void 0===n?void 0:n.assets;if(o){var l,c=o.parent;if(c&&null!==n&&void 0!==n&&n.assets.length&&(s=c.assets),null!==(l=s)&&void 0!==l&&l.length){var d=Q_(s),u=d.maxZIndex,p=d.minZIndex,v=o.transform.zindex,m=void 0===v?0:v,h=0,f=0;if("up"===t?(h=i||m+1,f=-1):"down"===t?(h=i||m-1,f=1):"top"===t?(h=u,f=-1):"bottom"===t&&(h=p,f=1),h>u||h<p)return;[...s].forEach((e=>{var i=e.transform.zindex;(["up","top"].includes(t)&&i>(null===o||void 0===o?void 0:o.transform.zindex)&&i<=h||["down","bottom"].includes(t)&&i<(null===o||void 0===o?void 0:o.transform.zindex)&&i>=h)&&e.update({transform:{zindex:i+f}})})),o.update({transform:{zindex:h}}),We("updateAssetZIndex",!0)}}}function $_(){var e,t,i=Nl.active,a=Nl.currentTemplate||{},n=a.maxZIndex,r=void 0===n?0:n,o=a.minZIndex,s=void 0===o?0:o,l=null!==(e=null===(t=Nl.currentAsset)||void 0===t?void 0:t.transform.zindex)&&void 0!==e?e:-1;if("module"===(null===i||void 0===i?void 0:i.meta.type)&&i.assets){var c=Q_(i.assets),d=c.maxZIndex,u=c.minZIndex;r=d,s=u}function p(){J_({direction:"up",zindex:r})}function v(){J_({direction:"bottom"})}function m(){J_({direction:"up",zindex:l+1})}function h(){J_({direction:"down",zindex:l-1})}return{zIndex:l,maxZIndex:r,minZIndex:s,moveTop:p,moveBottom:v,moveUp:m,moveDown:h}}function ej(){return m_("voiced")}function tj(){return m_("volume")}function ij(){var e,t=Nl.currentAsset,i=null!==(e=null===t||void 0===t?void 0:t.attribute)&&void 0!==e?e:{},a=i.textBackground;function n(e){null===t||void 0===t||t.update(Ft({textBackground:(0,u.Z)((0,u.Z)({},a),{},{enabled:e})})),We("textBackgroundStatusChange",!0)}function r(){a?n(!0):(null===t||void 0===t||t.update(Ft({lineHeight:13,textBackground:{enabled:!0,opacity:50,color:{r:0,g:0,b:0,a:1},borderRadius:0}})),We("textBackgroundStatusChange",!0))}function o(){n(!1)}function s(e){null===t||void 0===t||t.update(Ft({textBackground:(0,u.Z)((0,u.Z)({},a),{},{opacity:e})})),We("textBackgroundOpacityChange",!0)}function l(e){null===t||void 0===t||t.update(Ft({textBackground:(0,u.Z)((0,u.Z)({},a),{},{color:e})})),We("textBackgroundColorChange",!0)}function c(e){null===t||void 0===t||t.update(Ft({textBackground:(0,u.Z)((0,u.Z)({},a),{},{borderRadius:e})})),We("textBackgroundBorderRadiusChange",!0)}return{textBackground:a,open:r,close:o,changeColor:l,changeOpacity:s,changeBorderRadius:c}}function aj(){var e,t=Nl.currentAsset,i=null!==(e=null===t||void 0===t?void 0:t.attribute)&&void 0!==e?e:{},a=i.svgStrokes,n=i.svgInfo,r="svgPath"===(null===t||void 0===t?void 0:t.meta.type),o=a&&a[0];r&&(o=n);var s=e=>{var i;i=Ft(r?{svgInfo:(0,u.Z)((0,u.Z)({},o),e)}:{svgStrokes:[(0,u.Z)((0,u.Z)({},o),e)]}),null===t||void 0===t||t.update(i),We("svgStrokesChange",!0)};function l(e){o&&s({stroke:e})}function c(e){if(o){var t=z(e,o.strokeWidth);s({strokeDashType:e,strokeDash:t,strokeLinecap:[1,2].includes(e)?"round":""})}}function d(e){if(o){var t=-1!==o.strokeDashType?z(o.strokeDashType,e):o.strokeDash;s({strokeWidth:e,strokeDash:t})}}var p=e=>{o&&(null===t||void 0===t||t.update({attribute:{svgInfo:(0,u.Z)((0,u.Z)({},o),{},{radius:e})}}))};return{svgStroke:o,changeColor:l,changeDashStyle:c,changeStrokeWidth:d,changeRadius:p}}function nj(e){var t=Nl.active;if(t){Nl.moduleItemActive&&Nl.setModuleItemActive(void 0);var i=t.transform,a=e(i);a&&t.update(Bt(a)),We("updateCurrentAssetPositionWhenKeyPress",!0)}}function rj(e,t){var i,a=e.startTime,n=e.endTime,r=Nl.active;r&&ai(r)&&null!==(i=r.assets)&&void 0!==i&&i.length?r.assets[0].update(Ft({cst:a,cet:n,isLoop:t})):null===r||void 0===r||r.update(Ft({cst:a,cet:n,isLoop:t})),We("setVideoClipTime",!0)}function oj(e,t){var i=null!==e&&void 0!==e?e:Nl.currentAsset;i&&(t.attribute.startTime&&t.attribute.endTime?i.update((0,u.Z)((0,u.Z)({},Ft({startTime:t.attribute.startTime,endTime:t.attribute.endTime})),Ot({isClip:!1}))):(t.attribute.startTime=i.attribute.startTime,t.attribute.endTime=i.attribute.endTime),i.setTempData({rt_hover:void 0,rt_asset:void 0}),i.buildAssets([t],!0),We("setMaskAssetChildren",!0))}function sj(){var e=Nl.assets,t=void 0===e?[]:e,i=t.find((e=>e.meta.isBackground));function a(e){i&&i.update({attribute:e})}function n(e){i&&(Ud(i,{transform:{horizontalFlip:e}}),We("setBackgroundHorizontalFlip",!0))}function r(e){i&&(Ud(i,{transform:{verticalFlip:e}}),We("setBackgroundVerticalFlip",!0))}function o(e){if(i){var t=x_(e);Ud(i,{attribute:e,transform:t}),We("setBackgroundSize",!0)}}function s(e){Ud(i,{transform:e}),We("setBackgroundPosition",!0)}function l(e){Ud(i,{transform:{alpha:e}}),We("setBackgroundOpacity",!0)}function c(e){Ud(i,{attribute:{volume:e,voiced:e>0}}),We("setBackgroundVolume",!0)}function d(e){Ud(i,{attribute:{voiced:e}}),We("setBackgroundVoiced",!0)}return{setVerticalFlip:r,setHorizontalFlip:n,setSize:o,replace:a,value:i,setPosition:s,setOpacity:l,setVolume:c,setVoiced:d}}function lj(e){Nl.setLllegelAssets(e)}function cj(e){var t=e.params,i=e.target,a=e.save,n=e.replace,r=Nl.currentAsset,o=i||r;if(o){var s=n?(0,u.Z)({},t):(0,u.Z)((0,u.Z)({},o.attribute.filters),t);o.update({attribute:{filters:s}}),a&&We("updateFilters",!0)}}function dj(e){var t=e.params,i=e.target,a=e.save,n=e.replace,r=Nl.currentAsset,o=i||r;if(o){var s=n?(0,u.Z)({},t):(0,u.Z)((0,u.Z)({},o.attribute.effectInfo),t);o.update({attribute:{effectInfo:s}}),a&&We("updateEffect",!0)}}var uj=e=>{var t=e.params,i=e.target,a=e.save,n=e.replace,r=Nl.currentAsset,o=i||r;if(o){var s=n?(0,u.Z)({},t):(0,u.Z)((0,u.Z)({},o.attribute.dropShadow),t);o.update({attribute:{dropShadow:s}}),a&&We("updateShadow",!0)}};function pj(e,t){var i;e&&(null===(i=e.setTempData)||void 0===i||i.call(e,{rt_loading:t}))}function vj(e){var t=!(null===e||void 0===e||!e.tempData.rt_loading);function i(t){e&&pj(e,t)}return[t,i]}function mj(e){var t;return e&&ai(e)?null===(t=e.assets)||void 0===t?void 0:t[0]:e}function hj(e,t){var i=t.output_url,a=t.file_id,n=t.source_id,r=mj(e);if(r){var o=r.attribute.picUrl;r.update({attribute:{resId:a,picUrl:i,mattingInfo:{resId:n,rt_url:o}}}),We("setMattingPic",!0)}}function fj(e){var t=mj(e);if(t){var i=t.attribute.mattingInfo;i&&t.update({attribute:{resId:i.resId,mattingInfo:void 0,picUrl:i.rt_url}})}}function gj(){var e=Nl.currentAsset,t=mj(e),i=!(null===t||void 0===t||!t.attribute.mattingInfo);return{value:i,setMattingPic:hj,clearMattingPic:fj}}function xj(){var e=Nl.currentAsset,t=()=>{e&&(Ud(e,Ft({stayEffect:void 0})),e.setTempData({rt_style:void 0}))},i=()=>{e&&e.update({tempData:{rt_previewStayEffect:!e.tempData.rt_previewStayEffect}})};return{clear:t,setPreview:i}}function yj(){var e=Nl.currentAsset,t=()=>{if(e){var t=e.attribute,i=t.startTime,a=t.endTime,n=a-i;return n}return 0},i=i=>{if(e){var a,n=e.attribute,r=e.transform,o=n.width,s=n.height,l=n.opacity,c=void 0===l?100:l,d=n.stayEffect,p=r.rotate,v=null!==(a=null===d||void 0===d?void 0:d.duration)&&void 0!==a?a:t(),m={width:i.width,height:i.height,x:i.x,y:i.y,points:i.points,freePathType:i.freePathType,key:i.key};e.setTempData({rt_style:void 0,rt_previewStayEffect:!1});var h=Fe.getDefaultPlaybackRate();e.updateAeaItem([{key:"i",data:h.i},{key:"o",data:h.o}]),Ud(e,Ft({stayEffect:{attach:void 0,duration:v,graph:(0,u.Z)((0,u.Z)({},m),{},{easing:1,loop:!1,toBounds:[{width:o,height:s,rotate:p,opacity:c}]})}})),We("updatePoints",!0)}},a=i=>{if(e){var a=e.attribute,n=a.stayEffect,r=t();i=Math.min(r,i),e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},n),{},{duration:i})}))}},n=t=>{if(e){var i=e.attribute,a=i.stayEffect;if(a){var n=a.graph;e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{graph:(0,u.Z)((0,u.Z)({},n),{},{loop:t})})}))}}},r=t=>{if(e){var i=e.attribute,a=i.stayEffect;if(a){var n=a.graph;e.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{graph:(0,u.Z)((0,u.Z)({},n),{},{easing:t})})}))}}},o=()=>{if(e){var t=e.attribute,i=t.stayEffect;i&&(e.update(Ft({stayEffect:void 0})),e.setTempData({rt_style:void 0,rt_previewStayEffect:!1}))}};return{maxDuration:t(),updatePoints:i,updateDuration:a,updateAnimationLoop:n,updateAnimationEase:r,clearPath:o}}function bj(){var e,t,i=Nl.currentAsset,a=Nl.status,n=a.inWhirl,r=()=>{if(i){var e=i.attribute;i.update(Ft({stayEffect:{graph:void 0,duration:e.endTime-e.startTime,attach:{type:"Whirl",data:{position:{left:.5,top:.5},ccw:!0,speed:1.3}}}})),We("initWhirlData",!0)}},o=()=>{var e,t,a;i&&(i.setTempData({rt_style:void 0,rt_previewStayEffect:!1}),"Whirl"!==(null===i||void 0===i||null===(e=i.attribute)||void 0===e||null===(t=e.stayEffect)||void 0===t||null===(a=t.attach)||void 0===a?void 0:a.type)&&r(),Nl.setStatus({inWhirl:!0}))},s=e=>{if(i){var t=i.attribute,a=t.stayEffect,n=a.attach,r=(0,u.Z)({},n);r.data.ccw=e,i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{attach:r})}))}},l=e=>{if(i){var t=i.attribute,a=t.stayEffect,n=a.attach,r=(0,u.Z)({},n);r.data.speed=e,i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{attach:r})}))}},c=()=>{Nl.setStatus({inWhirl:!1})},d=()=>{if(i){var e=i.attribute,t=e.stayEffect;i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},t),{},{attach:void 0})}))}},p=e=>{Nl.setStatus({inWhirl:e})};return{attach:null===i||void 0===i||null===(e=i.attribute)||void 0===e||null===(t=e.stayEffect)||void 0===t?void 0:t.attach,inWhirl:n,start:o,end:c,updateDirection:s,updateSpeed:l,clearWhirl:d,startSetCenter:p}}function _j(){var e,t,i=Nl.currentAsset,a=()=>{if(i){var e=i.attribute;i.update(Ft({stayEffect:{graph:void 0,duration:e.endTime-e.startTime,attach:{type:"shake",data:{direction:45,speed:1.1,amplitude:.3}}}})),We("initShakeData",!0)}},n=()=>{var e,t,n,r;i&&(i.setTempData({rt_style:void 0,rt_previewStayEffect:!1}),null!==i&&void 0!==i&&null!==(e=i.attribute)&&void 0!==e&&null!==(t=e.stayEffect)&&void 0!==t&&null!==(n=t.attach)&&void 0!==n&&null!==(r=n.data)&&void 0!==r&&r.amplitude||a())},r=e=>{if(i){var t=i.attribute,a=t.stayEffect,n=a.attach,r=(0,u.Z)({},n);r.data.direction=e,i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{attach:r})}))}},o=e=>{if(i){var t=i.attribute,a=t.stayEffect,n=a.attach,r=(0,u.Z)({},n);r.data.speed=e,i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{attach:r})}))}},s=e=>{if(i){var t=i.attribute,a=t.stayEffect,n=a.attach,r=(0,u.Z)({},n);r.data.amplitude=e,i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},a),{},{attach:r})}))}},l=()=>{if(i){var e=i.attribute,t=e.stayEffect;i.update(Ft({stayEffect:(0,u.Z)((0,u.Z)({},t),{},{attach:void 0})}))}};return{attach:null===i||void 0===i||null===(e=i.attribute)||void 0===e||null===(t=e.stayEffect)||void 0===t?void 0:t.attach,start:n,initShakeData:a,updateAmplitude:s,updateDirection:r,updateSpeed:o,clearShake:l}}var jj=(e,t)=>{var i=Nl.currentAsset,a=t||i;null===a||void 0===a||a.update({attribute:{qrcodeInfo:e}}),We("updateQrCode",!0)};function wj(){var e,t=Nl.currentTemplate,i=Nl.currentTemplateIndex,a=Nl.templates,n=null===t||void 0===t?void 0:t.endTransfer,r=(e,t)=>{if(n){var r,o=n.attribute.colors;n.update(Ft({colors:(0,u.Z)((0,u.Z)({},o),{},{[t]:e})}));var s=a[i+1];null===s||void 0===s||null===(r=s.startTransfer)||void 0===r||r.update(Ft({colors:(0,u.Z)((0,u.Z)({},o),{},{[t]:e})})),We("updateTranstionColor",!0)}},o=e=>{if(n){var t=Math.min(e,Nd);t=Math.max(e,Cd),n.update(Ft({totalTime:t})),Hj(),We("updateTranstionDuration",!0)}};return{colors:null===n||void 0===n||null===(e=n.attribute)||void 0===e?void 0:e.colors,updateColor:r,changeDuration:o}}function kj(e,t){var i=Nl.currentTemplate,a=null!==t&&void 0!==t?t:i;a&&a.addAssets([e])}function Tj(e,t){return Zj.apply(this,arguments)}function Zj(){return Zj=(0,p.Z)(m().mark((function e(t,i){var a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=i||Nl.currentTemplate,!t.meta.isBackground){e.next=7;break}a=i.assets.find((e=>e.meta.isBackground)),a&&Xd(i,a),xd(t),e.next=15;break;case 7:if(!t.meta.isOverlay){e.next=13;break}n=i.assets.find((e=>e.meta.isOverlay)),n&&Xd(i,n),xd(t),e.next=15;break;case 13:return e.next=15,xd(t);case 15:return t.attribute.effectColorful&&(t.attribute.effectColorful.effect=Zk(t.attribute.effectColorful.effect)),We("addAssetInTemplate",!0),e.abrupt("return",i.addAsset(t,(e=>("lottie"===e.meta.type&&e.setTempData({rt_lottiePreview:!0}),e))));case 18:case"end":return e.stop()}}),e)}))),Zj.apply(this,arguments)}function Cj(e,t){var i=new Pn(e),a=t.transform,n=t.attribute,r=t.meta;return i.update({meta:(0,u.Z)((0,u.Z)({},r),{},{trackId:void 0}),transform:(0,u.Z)((0,u.Z)({},a),{},{zindex:Nl.currentTemplate.zIndex.max+1})}),i.updateAssetDuration(n),kj(i,Nl.currentTemplate),We("addCopiedAsset",!0),i}function Nj(e){var t,i,a,r,o,s,l,c,d=e||(null===Nl||void 0===Nl?void 0:Nl.active);if(d){var u=d,p=u.meta,v=u.assets;if("mask"===p.type&&null!==v&&void 0!==v&&v.length){var m=(0,n.Z)(v,1);d=m[0]}}var h={startTime:null!==(t=null===(i=d)||void 0===i||null===(a=i.attribute)||void 0===a?void 0:a.cst)&&void 0!==t?t:-1,endTime:null!==(r=null===(o=d)||void 0===o||null===(s=o.attribute)||void 0===s?void 0:s.cet)&&void 0!==r?r:-1,isLoop:!(null===(l=d)||void 0===l||null===(c=l.attribute)||void 0===c||!c.isLoop)};return{update:rj,value:h}}function Sj(e){e&&(e.assets.length>0?e.setChildren([]):Xd(Nl.currentTemplate,e),We("removeMaskAsset",!0))}function Ij(e){if(ii(e)){var t=e.assets;t.forEach((t=>{Xd(t.template,e)})),We("removeTempModule",!0)}else!ai(e)||null!==e&&void 0!==e&&e.meta.isClip?(Xd(e.template,e),We("removeAsset",!0)):Sj(e)}function Aj(e){var t=Nl.setEditActive,i=Nl.setModuleItemActive,a=e.parent;a?(t(a),i(e)):t(e)}function Pj(e,t){var i=Nl.currentTemplate.assets,a=void 0===i?[]:i,n=t?t.assets:a,r=n.find((t=>t.meta.id===e));r&&Aj(r)}function Mj(){return{inRotating:Nl.status.inRotating}}function Ej(){return Nl.status.inMoving}function Lj(){var e=Nl.status.inReplacing;function t(e){var t=null!==e&&void 0!==e?e:Nl.currentAsset;t&&Nl.setStatus({inReplacing:!0})}function i(e){var t=null!==e&&void 0!==e?e:Nl.currentAsset;t&&Nl.setStatus({inReplacing:!1})}return{inReplacing:e,startReplace:t,replaceAsset:qd,endReplace:i}}function Dj(e){Nl.setStatus({hideTransformerBox:e})}function Rj(){var e=Nl.status.inReplacing,t=e?Nl.currentAsset:void 0;function i(){Nl.setStatus({inReplacing:!0})}function a(){Nl.setStatus({inReplacing:!1})}return{startClip:i,endClip:a,inReplacing:e,asset:t}}function zj(e){Yu(e),We("ungroupModule",!0)}function Fj(){Hu(),We("groupModule",!0)}function Oj(){var e=Nl.currentAsset,t=Nl.currentTemplate;if(e&&ai(e)&&!e.meta.isClip&&e.assets&&e.assets.length>0){var i=e.assets[0].getAssetCloned(),a=new Pn(i);ou(!1),e.setChildren([]),Ud(a,Bt({posX:a.transform.posX+50,posY:a.transform.posY+50})),kj(a,t),We("splitMaskAsset",!0)}}function Bj(e){v_.set(e.filter((e=>"effect"!==e.meta.type)),3e3)}function Wj(e){return Vj.apply(this,arguments)}function Vj(){return Vj=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s,l,c,d,p,v,h,f;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Nl.currentAsset,i&&(a=i.attribute,n=i.assets,r=void 0===n?[]:n,o=a.width,s=a.height,l=t(a),null!==l&&void 0!==l&&l.width&&null!==l&&void 0!==l&&l.height&&r.length>0&&(c={x:r[0].attribute.width+r[0].transform.posX,y:r[0].attribute.height+r[0].transform.posY},d=Bn({width:l.width,height:l.height},{width:o,height:s},c.x,c.y),p=d.width,v=void 0===p?0:p,h=d.height,f=void 0===h?0:h,o=v,s=f,l.rt_svgString=F(l.rt_svgString),i.update({attribute:(0,u.Z)((0,u.Z)({},l),{},{width:o,height:s})},!1),We("replaceAsset",!0)));case 2:case"end":return e.stop()}}),e)}))),Vj.apply(this,arguments)}function Uj(e){return Gj.apply(this,arguments)}function Gj(){return Gj=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i=t.data,a=t.asset,n=t.save,r=Nl.active,o=null!==a&&void 0!==a?a:r,!o){e.next=9;break}return e.next=6,xd(i);case 6:return o.replaceAssetSelf(i),n&&We("replaceWholeAsset",!0),e.abrupt("return",o);case 9:case"end":return e.stop()}}),e)}))),Gj.apply(this,arguments)}function Xj(e){iu.toggleSelect(e)}var qj={getTransferIndex(e,t){return e.findIndex((e=>e.meta.transferLocation===t))},clearTransfer(e,t){var i=qj.getTransferIndex(e,t);i>-1&&(0,s.z)((()=>{e.splice(i,1)}))},hasAfterTransfer(e){var t=Nl.templates[e];return t.assets.some((e=>"after"===e.meta.transferLocation))},buildTransferData(e){var t,i,a=e.assetInfo,n=e.animation,r=(e.key,e.type),o=un(),s=o.width,l=o.height;if(i="videoE"===r?s_():"lottie"===r?i_():a_(),i.meta.isUserAdd=!0,i.meta.isTransfer=!0,i.meta.transferLocation="after",i.attribute.colors={},i.attribute.isLoop=!1,Object.assign(i.attribute,{width:s,height:l}),a&&(Object.assign(i.attribute,null===a||void 0===a?void 0:a.attribute),Object.assign(i.attribute,null===a||void 0===a?void 0:a.transform),Object.assign(i.meta,null===a||void 0===a?void 0:a.meta)),s<=l){var c=s/l;a.attribute.width&&a.attribute.height&&(c=a.attribute.width/a.attribute.height);var d=l*c;Object.assign(i.attribute,{width:d,height:l}),Object.assign(i.transform,{posX:(s-i.attribute.width)/2})}return n&&Object.assign(i.attribute,{animation:n}),i.transform.zindex=Number(null===(t=Nl.currentTemplate)||void 0===t?void 0:t.maxZIndex)+1,new Pn(i)},buildTransferDataByTemplate(e,t){return e.transform.zindex=Number((null===t||void 0===t?void 0:t.maxZIndex)+1),new Pn(e)}};function Hj(){(0,s.z)((()=>{for(var e=Nl.templates,t=e.length,i=0;i<t;i++){var a=e[i],n=a.assets,r=a.videoInfo,o=e[i+1];if(0===i&&qj.clearTransfer(n,"before"),o||qj.clearTransfer(n,"after"),a.endTransfer){var s=yt(a.endTransfer.attribute.rt_total_frame);["plain","lottie"].includes(a.endTransfer.meta.type)&&(s=a.endTransfer.attribute.totalTime);var l,c,d,p,v=Math.floor(s/2),m=r.pageTime-r.offsetTime[1],h=m-v,f={startTime:h,endTime:m,cst:0,cet:v};if(h<0&&(f.startTime=0,f.cst=-h),Object.assign(a.endTransfer.attribute,f),a.endTransfer.attribute.animation)Object.assign(a.endTransfer.attribute,{animation:(0,u.Z)((0,u.Z)({},a.endTransfer.attribute.animation),{},{exit:(0,u.Z)((0,u.Z)({},null===(l=a.endTransfer.attribute.animation)||void 0===l?void 0:l.exit),{},{duration:-1===(null===(c=a.endTransfer.attribute.animation)||void 0===c?void 0:c.exit.duration)?-1:f.endTime-f.startTime}),enter:(0,u.Z)((0,u.Z)({},null===(d=a.endTransfer.attribute.animation)||void 0===d?void 0:d.enter),{},{duration:-1===(null===(p=a.endTransfer.attribute.animation)||void 0===p?void 0:p.enter.duration)?-1:f.endTime-f.startTime})})});if(o){var g,x,y,b,_=a.endTransfer.getAssetCloned(),j=_.meta,w=_.attribute,k=o.videoInfo;if(j.transferLocation="before",j.isTransfer=!0,w.cst=v,w.cet=s,w.startTime=k.offsetTime[0]||0,w.endTime=w.startTime+v,w.animation)w.animation={exit:(0,u.Z)((0,u.Z)({},null===(g=w.animation)||void 0===g?void 0:g.exit),{},{duration:-1===(null===(x=w.animation)||void 0===x?void 0:x.exit.duration)?-1:s/2}),enter:(0,u.Z)((0,u.Z)({},null===(y=w.animation)||void 0===y?void 0:y.enter),{},{duration:-1===(null===(b=w.animation)||void 0===b?void 0:b.enter.duration)?-1:s/2})};o.startTransfer?o.startTransfer.replaceAssetSelf(_):o.addAsset(_)}}else if(o){var T=qj.getTransferIndex(o.assets,"before");T>-1&&o.assets.splice(T,1)}}}))}function Yj(e,t){var i=qj.buildTransferData({assetInfo:t,key:"",type:"videoE"}),a=Nl.templates[e];if(null!==a&&void 0!==a&&a.endTransfer){var n=a.assets.findIndex((e=>{var t;return e.meta.id===(null===(t=a.endTransfer)||void 0===t?void 0:t.meta.id)}));n>-1&&(a.replaceAssetClass(i,n),setTimeout((()=>{Hj(),We("replaceMGTransfer",!0)}),10))}}function Kj(e){var t,i=Nl.templates,a=null===(t=i[e])||void 0===t?void 0:t.endTransfer;a&&(i.forEach((e=>{var t=qj.buildTransferDataByTemplate(a.getAssetCloned(),e);if(null!==e&&void 0!==e&&e.endTransfer){var i=e.assets.findIndex((t=>{var i;return t.meta.id===(null===(i=e.endTransfer)||void 0===i?void 0:i.meta.id)}));e.replaceAssetClass(t,i)}else e.addAssets([t])})),setTimeout((()=>{Hj(),We("batchSetMGTransfer",!0)}),10))}function Qj(e,t){if(qj.hasAfterTransfer(e))Yj(e,t);else{var i=qj.buildTransferData({assetInfo:t,key:"",type:"videoE"}),a=Nl.templates[e];if(a&&Nl.templates[e+1]){var n=Nl.templates[e];n.addAssets([i]),setTimeout((()=>{Hj(),We("addMGTransfer",!0)}),10)}}}function Jj(e,t){var i=Nl.templates[e];i.removeAsset(t),setTimeout((()=>{Hj(),We("removeMGTransfer",!0)}),10)}function $j(e,t,i){var a,n=e.logo;if(n[i]){if(t.id!==(null===(a=n[i])||void 0===a?void 0:a.id)){var r,o=e.getAssetIndexById(null===(r=n[i])||void 0===r?void 0:r.id);e.replaceAssetClass(t,o)}}else e.addAssets([t])}function ew(){var e=Nl.templates,t=Nl.logoAsset;e.forEach((e=>{t.text&&$j(e,t.text,"text"),t.image&&$j(e,t.image,"image")}))}function tw(){tp(),Hj(),ew()}function iw(){return Nl.timeScale}function aw(){return(null===Nl||void 0===Nl?void 0:Nl.currentTemplate.validAssets)||[]}function nw(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=Nl.addTemplate(e,t);return setTimeout((()=>{tw(),We("addTemplate",!0)}),10),i}function rw(e){var t=Nl.addTemplate(e);return setTimeout((()=>{var e=Nl.assets;e.forEach((e=>{e.meta.isLogo&&Nl.setLogoAsset(e,e.meta.type)}))}),10),tp(),t}function ow(e,t){var i=Ln(e),a=Nl.currentTemplateIndex;if(t){var n=Nl.templates.findIndex((e=>e.id===t));n>-1&&(a=n)}Nl.replaceTemplate(a,i),setTimeout((()=>{tw(),We("replaceTemplate",!0)}),10)}function sw(e){var t=Nl.replaceAllTemplate(e);return setTimeout((()=>{tw(),We("replaceAllTemplate",!0)}),10),t}function lw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4;return t_(e)}function cw(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e4,t=arguments.length>1?arguments[1]:void 0,i=[t_(e)],a=Nl.addTemplate(i,t);return setTimeout((()=>{tw(),t&&ew(),We("addEmptyTemplate",!1)}),10),a}function dw(e){var t=e.assets,i=e.pageTime,a=e.index,n=e.canvasSize,r=new kl(t_(i)),o=[];t.forEach((e=>{var t,a=e.type,s=e.isBackground,l=(0,yp.Z)(e,["type","isBackground"]);switch(a){case"video":case"videoE":t=s_();break;case"pic":case"image":t=r_();break;case"SVG":t=o_();break;case"lottie":t=i_();break;case"module":t=l_();break;case"text":t=n_();break}t=new Pn(t);var c=x_(l,n);t.update({meta:{isBackground:s,type:a},attribute:(0,u.Z)((0,u.Z)({},l),{},{startTime:0,endTime:i}),transform:(0,u.Z)((0,u.Z)({},c),{},{zindex:r.zIndex.max+1})}),o.push(t)})),r.addAssets(o);var s=Nl.addTemplateClass([r],a);return s}function uw(e,t){return Nl.addTemplateClass([e],t)}function pw(e,t){if(e!==t){var i=Nl.templates[e];(0,s.z)((()=>{[...Nl.templates].forEach(((i,a)=>{e<t?a>e&&a<=t&&(Nl.templates[a-1]=i):a>=t&&a<e&&(Nl.templates[a+1]=i)})),Nl.templates[t]=i})),Hj(),We("templateRearrange",!0)}}function vw(){var e=Nl.templates;return{templates:e,rearrange:pw}}function mw(e){e>-1&&!Fe.wholeTemplate&&(Ge.setVideoInfo({playStatus:Fe.PlayStatus.Stopped,currentTime:0}),Nl.setCurrentTemplate(e))}function hw(e){var t=Nl.templates.findIndex((t=>t.id===e));mw(t)}function fw(e){var t,i,a=Nl.templates.findIndex((t=>t.id===e));return Nl.removeTemplate(a),setTimeout((()=>{tw(),We("removeTemplate",!0)}),10),0===a?null===(i=Nl.templates[0])||void 0===i?void 0:i.id:null===(t=Nl.templates[a-1])||void 0===t?void 0:t.id}var gw=(e,t,i)=>{var a=i||e.videoInfo.offsetTime||[0,0];e.updatePageInfo({pageTime:t,offsetTime:a}),tw(),We("resetTemplateEndTime",!0)};function xw(e,t){var i=Nl.currentTemplate;"number"===typeof t&&(i=Nl.templates[t]),i&&(i.updatePageInfo({pageTime:e}),setTimeout((()=>{tw(),We("setTemplateEndTime",!0)}),10))}function yw(e){Hd(Tu(),e),We("SetTemplateBackgroundColor",!0)}function bw(){var e,t=null===(e=Nl.currentTemplate)||void 0===e?void 0:e.pageAttr.backgroundColor;return{backgroundColor:t,update:yw}}function _w(e){var t,i=Nl.templates[e],a=(null===i||void 0===i||null===(t=i.videoInfo)||void 0===t?void 0:t.offsetTime)||[0,0];function r(e){if(e){var t=i.videoInfo,a=i.assets,r=t.pageTime,o=(0,n.Z)(e,2),l=o[0],c=o[1];(0,s.z)((()=>{var t=[...e],n=y_(a,r),o=r;n.startTime>=l?t[0]=0:t[0]=l-n.startTime,c<0&&(t[1]=0,o-=c),a.forEach((e=>{var i=e.meta,a=e.attribute,n=e.assetDuration;if(null!==a&&void 0!==a&&a.stayEffect&&Ud(e,Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===a||void 0===a?void 0:a.stayEffect),{},{duration:Math.min(n.endTime-n.startTime,null===a||void 0===a?void 0:a.stayEffect.duration)})})),e.meta.isBackground){var r=(0,u.Z)({},n);["video","videoE"].includes(i.type)&&(a.isLoop||(a.isLoop=!0)),r.endTime=o,Ud(e,Ft((0,u.Z)({},r)))}if(e.meta.isLogo){var s=(0,u.Z)({},n);s.endTime=o,Ud(e,Ft((0,u.Z)({},s)))}if(i.isTransfer){var l=(0,u.Z)({},n);"before"===i.transferLocation&&(l=Zt(l,o,t)),"after"===i.transferLocation&&(l=Tt(l,o,t)),Ud(e,Ft((0,u.Z)({},l)))}})),gw(i,o,t)})),We("useTemplateClip",!0)}}return[a,r]}function jw(){var e=Nl.currentTemplate;function t(e){return i.apply(this,arguments)}function i(){return i=(0,p.Z)(m().mark((function t(i){return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Bc(i.rt_imageUrl);case 2:e.updateBackgroundImage(i),We("setModuleBackgtound",!0);case 4:case"end":return t.stop()}}),t)}))),i.apply(this,arguments)}return{value:null===e||void 0===e?void 0:e.pageAttr.backgroundImage,update:t}}function ww(e){var t=Nl.currentTemplate.backgroundAsset;Ud(t,Ft(e>0?{bgAnimation:{id:e}}:{bgAnimation:void 0})),We("setBgAnimation",!0)}function kw(e,t){var i=null!==t&&void 0!==t?t:Nl.currentTemplate;i.updatePageInfo({speed:e}),setTimeout((()=>{tw(),We("setTemplateSpeed",!0)}),10)}function Tw(e,t){return Zw.apply(this,arguments)}function Zw(){return Zw=(0,p.Z)(m().mark((function e(t,i){var a,n,r,o;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!qj.hasAfterTransfer(t)){e.next=4;break}Yj(t,i),e.next=9;break;case 4:return n=qj.buildTransferData((0,u.Z)((0,u.Z)({},i),{},{key:"",type:null===(a=i.assetInfo.meta)||void 0===a?void 0:a.type})),e.next=7,xd(n);case 7:r=Nl.templates[t],r&&Nl.templates[t+1]&&(o=Nl.templates[t],o.addAssets([n]),setTimeout((()=>{Hj(),We("addMGTransfer",!0)}),10));case 9:case"end":return e.stop()}}),e)}))),Zw.apply(this,arguments)}function Cw(e,t){return Nw.apply(this,arguments)}function Nw(){return Nw=(0,p.Z)(m().mark((function e(t,i){var a,n,r,o;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=qj.buildTransferData((0,u.Z)((0,u.Z)({},i),{},{key:"",type:null===(a=i.assetInfo.meta)||void 0===a?void 0:a.type})),e.next=3,xd(n);case 3:r=Nl.templates[t],null!==r&&void 0!==r&&r.endTransfer&&(o=r.assets.findIndex((e=>{var t;return e.meta.id===(null===(t=r.endTransfer)||void 0===t?void 0:t.meta.id)})),o>-1&&(r.replaceAssetClass(n,o),setTimeout((()=>{Hj(),We("replaceMGTransfer",!0)}),10)));case 5:case"end":return e.stop()}}),e)}))),Nw.apply(this,arguments)}function Sw(e){return new kl(e)}function Iw(e){var t=Nl.status,i=Nl.templates,a=un(),n=a.width,r=e?i.filter((t=>t.id===e.id))[0]:Nl.currentTemplate,o=(e,t)=>{var i=r.pageAttr,a=i.pageInfo,n=a.offsetTime,o=void 0===n?[0,0]:n,s=a.pageTime,l=s-o[1],c=r.cameras,d=un(),u=c_(d);if(-1!==e&&c[e]){if(u.width*=.5,u.height*=.5,u.scale/=.5,"before"===t)u.endTime=c[e].camera.startTime,u.startTime=u.endTime-Ad;else{var p=c[e].camera.endTime,v={endTime:l};e!==c.length-1&&(v.endTime=c[e+1].camera.startTime),u.startTime=p+Ad,u.endTime=u.startTime+Id,u.endTime>v.endTime&&(v.endTime-Ad>p+Sd?u.startTime=p+Ad:u.startTime=p,u.endTime=v.endTime)}if(Object.assign(u,x_(u)),u.startTime===u.endTime)return}return u},s=(e,t)=>{var i,a=o(e,t);a&&(a.scale=n/a.width,"before"===t?(a.startTime=Math.max(0,a.startTime),i=r.addCameraPre(a)):i=r.addCamera(a,e),Nl.seteditCamera(i),We("addCamera",!0))},l=()=>{0===r.cameras.length&&s(-1,"after"),Nl.setStatus({inCamera:!t.inCamera}),Nl.seteditCamera(void 0)},c=(e,t)=>{var i=r.cameras;if(-1!==e&&r.removeCamera(e),t){var a=i.findIndex((e=>e.id===t.id));r.removeCamera(a)}Nl.seteditCamera(void 0),We("removeCamera",!0)},d=()=>{Nl.setStatus({inCamera:!1}),Nl.seteditCamera(void 0)},u=()=>{r.removeAllCamera(),We("removeCamera",!0)};return{addCamera:s,removeCamera:c,start:l,clearStatus:d,removeAll:u,inCamera:t.inCamera}}function Aw(){return Nl.status.inCamera}var Pw=xu;function Mw(){var e=Nl.allTemplateVideoTime;return[e]}function Ew(){var e=Nl.active;if(e)return e.getAssetCloned()}function Lw(){var e=Nl.currentTemplate;return{template:e,setTemplate:hw,removeTemplate:Nl.removeTemplate}}function Dw(e){var t=e||Nl.currentTemplate||{},i=t.assets,a=void 0===i?[]:i,r=t.videoInfo,o=void 0===r?{offsetTime:[0,0],pageTime:0}:r,s=o.offsetTime,l=void 0===s?[0,0]:s,c=o.pageTime,d=void 0===c?0:c,u=(0,n.Z)(l,2),p=u[0],v=u[1];return a.filter((e=>{var t=e.meta,i=e.assetDuration;if("effect"!==t.type){var a=i.startTime,n=i.endTime,r=!ii(e)&&!t.isTransfer&&!t.isLogo,o=a<=p&&n>=p||a>=p&&a<d-v;return r&&o}}))}function Rw(){return Nl.templates}function zw(){return Mn(Nl.templates)}function Fw(){return Nl.allTemplateVideoTime}function Ow(){return Nl.currentTemplateIndex}function Bw(){return Nl.currentTemplate}function Ww(){var e;return null===(e=Nl.currentTemplate)||void 0===e?void 0:e.tempModule.assets}function Vw(){var e;return{currentAsset:Nl.active,moduleItemActive:Nl.moduleItemActive,tempModule:null===(e=Nl.currentTemplate)||void 0===e?void 0:e.tempModule,multiSelect:Ww()}}var Uw=e=>e.meta.isLogo&&!e.meta.hidden;function Gw(e,t){var i,a,n,r=null!==(i=null===(a=Nl.logo)||void 0===a||null===(n=a.attribute)||void 0===n?void 0:n[e])&&void 0!==i?i:t;function o(t){(0,s.z)((()=>{Nl.templates.forEach((i=>{var a=i.assets.find(Uw);a&&Object.assign(a.attribute,{[e]:t})}))})),We("updateLogo",!0)}return[r,o]}function Xw(){var e,t=(null===(e=Nl.logo)||void 0===e?void 0:e.transform.alpha)||50;function i(e){Nl.templates.forEach((t=>{var i=t.assets.find(Uw);i&&Object.assign(i.transform,{alpha:e})})),We("updateLogoAlpha",!0)}return[t,i]}function qw(){return Gw("text")}function Hw(){var e,t=null===(e=Nl.logo)||void 0===e?void 0:e.attribute.fontFamily;function i(e){return a.apply(this,arguments)}function a(){return a=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,cd(t);case 2:i=e.sent,i&&(0,s.z)((()=>{Nl.templates.forEach((e=>{var i=e.assets.find(Uw);i&&Object.assign(i.attribute,{fontFamily:t})}))}));case 4:case"end":return e.stop()}}),e)}))),a.apply(this,arguments)}return[t,i]}function Yw(){return Gw("color")}function Kw(){return Gw("isFill")}function Qw(e){(0,s.z)((()=>{Nl.templates.forEach((t=>{var i=t.assets.find(Uw);i&&Object.assign(i.attribute,e)}))})),We("updateLogoImage",!0)}function Jw(){return Gw("scale",50)}function $w(){return Gw("gravity")}function ek(e,t){var i;return i="image"===e?r_():n_(),i.meta.isUserAdd=!0,i.meta.locked=!0,i.meta.isLogo=!0,i.meta.isAlwaysVisible=!0,Object.assign(i.attribute,{isFill:!1,gravity:"nw",fontSize:50,scale:100,startTime:0,color:{r:255,g:255,b:255,a:1},endTime:100,fontFamily:"fnsyhtHeavy"}),Object.assign(i.attribute,t),Object.assign(i.transform,{posX:0,posY:0,alpha:50,zindex:Fe.maxAssetIndex}),i}function tk(e){var t=ek("image",e);Nl.setLogoAsset(t,"image"),setTimeout((()=>{ew()}),50),We("addImageLogo",!0)}function ik(e){var t=ek("text",e);Nl.setLogoAsset(t,"image"),setTimeout((()=>{ew()}),50),We("addTextLogo",!0)}function ak(e){Nl.templates.forEach((t=>{t.assets.forEach((t=>{t.meta.isLogo&&(t.meta.hidden=t.meta.type!==e)}))})),We("changeLogoType",!0)}function nk(){return Nl.logo}function rk(e){(0,s.z)((()=>{Nl.setLogoAsset(void 0,e),Nl.templates.forEach((t=>{var i=t.assets.findIndex((t=>t.meta.isLogo&&t.meta.type===e));i>-1&&t.assets.splice(i,1)}))})),We("deleteLogo",!0)}function ok(){return f_("text")}function sk(){return f_("color")}function lk(){return f_("fontFamily")}function ck(){return f_("fontSize")}function dk(){return f_("picUrl")}function uk(){return g_("alpha")}function pk(){var e,t=(null===(e=Nl.watermark)||void 0===e?void 0:e.attribute)||{},i=t.width,a=t.height,n={width:i,height:a};function r(e){var t=e.height,i=e.width;Nl.watermark&&Ud(Nl.watermark,Ft({height:t,width:i}))}return[n,r]}function vk(){var e,t,i,a={textAlign:null===(e=Nl.watermark)||void 0===e?void 0:e.attribute.textAlign,posX:null===(t=Nl.watermark)||void 0===t?void 0:t.transform.posX,posY:null===(i=Nl.watermark)||void 0===i?void 0:i.transform.posY};function n(e){var t=e.posX,i=e.posY,a=e.textAlign;Nl.watermark&&Ud(Nl.watermark,{attribute:{textAlign:a},transform:{posX:t,posY:i}})}return[a,n]}function mk(){return Nl.watermark}function hk(e){var t=un(),i=t.width,a=void 0===i?0:i,n=t.height,r=void 0===n?0:n;return{posX:(a-e.width)/2,posY:(r-e.height)/2}}function fk(e){return gk.apply(this,arguments)}function gk(){return gk=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s,l,c,d,p,v,h,f,g,x,y;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.assets,a=t.resId,n=t.moduleDuration,r=t.startTime,o=t.endTime,s=Nl.currentTemplate,l=[],e.next=5,Promise.all(i.map(((e,t)=>xd(e,!0).then((i=>{l[t]=new Pn(e)})))));case 5:return c=new Pn(Qn()),c.setChildren(l,!1),c.setModuleStyleByChildren(),c.assets.forEach((e=>{e.setParent(c),Xu(c,e),e.setRtRelativeByParent()})),d=un(),p=d.width,v=void 0===p?0:p,h=v-60,f={width:c.attribute.width,height:c.attribute.height},g=h<c.attribute.width,g&&(x=h/c.attribute.width,f={width:h,height:c.attribute.height*x}),console.log(s.maxZIndex),c.update({transform:{zindex:s.maxZIndex+1}}),y=hk(f),c.update({attribute:(0,u.Z)({resId:a,originDuration:n},f),transform:y}),c.updateAssetDuration({startTime:r,endTime:o}),kj(c,Tu()),We("addModule",!0),e.abrupt("return",c);case 22:case"end":return e.stop()}}),e)}))),gk.apply(this,arguments)}function xk(e){return new Pn(e)}function yk(e,t){var i=-1;return e.forEach(((e,a)=>{"string"===typeof e.value&&e.value===t&&(i=a)})),i}function bk(e){var t=e.fillList,i=e.strokeList,a=e.shadowList,n=[];return t.forEach(((e,t)=>{"string"===typeof e.value&&n.push({value:e.value,fillIndexList:[t],strokeIndexList:[],shadowIndexList:[]})})),i.forEach(((e,t)=>{if("string"===typeof e.value){var i=yk(n,e.value);i>-1?n[i].strokeIndexList.push(t):n.push({value:e.value,fillIndexList:[],strokeIndexList:[t],shadowIndexList:[]})}})),a.forEach(((e,t)=>{if("string"===typeof e.color){var i=yk(n,e.color);i>-1?n[i].shadowIndexList.push(t):n.push({value:e.color,fillIndexList:[],strokeIndexList:[],shadowIndexList:[t]})}})),(0,u.Z)((0,u.Z)({},e),{},{colorList:n})}function _k(e){var t=JSON.parse(JSON.stringify(e)),i=[],a=t.supportTexts,n=void 0===a?[]:a,r=t.text,o=t.fills,s=t.fillList,l=t.color,c=(0,yp.Z)(t,["supportTexts","text","fills","fillList","color"]);if(0===o.length){t.opacity=1;var d=s.filter((e=>e.value===l)).length>0;d||s.push({value:l}),t.fills=[s.length-1]}return o.length>1&&o.forEach(((e,a)=>{a===o.length-1?(t.fills=[e],t.shadow=[]):i.push((0,u.Z)((0,u.Z)({},c),{},{text:r,strokes:[],fills:[e],left_diff:0,top_diff:0}))})),n.forEach((e=>{var t=e.fills,a=e.color,o=(0,yp.Z)(e,["fills","color"]);if(0===t.length){var l=s.filter((e=>e.value===a)).length>0;l||s.push({value:a}),e.fills=[s.length-1],e.opacity=1,i.push(e)}1===t.length&&(i=n),t.length>1&&t.forEach(((e,a)=>{a===t.length-1?i.push((0,u.Z)((0,u.Z)({},c),{},{text:r,strokes:[],fills:[e],shadow:[],left_diff:0,top_diff:0})):i.push((0,u.Z)((0,u.Z)({},o),{},{text:r,opacity:1,fills:[e],left_diff:0,top_diff:0}))}))})),t.fillList=s,t.supportTexts=i,t.text=r,t}function jk(e){var t=e.meta,i=e.attribute,a=e.transform;"text"===t.type&&void 0===i.textAlign&&(i.textAlign="center"),void 0===i.width&&(i.width=0),void 0===i.height&&(i.height=0),void 0===i.startTime&&(i.startTime=0),(void 0===i.endTime||i.endTime<=i.startTime)&&(i.endTime=i.startTime+100),void 0===a.posX&&(a.posX=0),void 0===a.posY&&(a.posY=0),i.aeA&&Object.keys(i.aeA).forEach((e=>{var t=i.aeA[e];(t.pbr<0||null===t.pbr)&&(t.pbr=1)}))}function wk(e,t){var i=t,a=i.meta,n=i.attribute;i.transform;jk(t),n.container&&(t=Rn(t)),"text"===a.type&&""===n.effect&&(delete n.effect,delete n.effectVariant),ai(t)&&(t=Fn(t)),n.resId&&(n.originResId=n.resId);var r=t.attribute.aeA;return r&&(dt.forEach((e=>{var t=r[e];t.kw&&"string"===typeof t.kw&&(t.kw=JSON.parse(t.kw))})),t=Fn(t)),t.assets&&(t.assets=t.assets.map((t=>wk(e,t)))),t}function kk(e){void 0===e.startTime&&(e.startTime=0),void 0===e.endTime&&(e.endTime=1)}function Tk(e){return kk(e),(0,u.Z)((0,u.Z)({},e),{},{rt_id:ji(),rt_loadInfo:{rt_assetLoadComplete:!1,rt_assetLoadFailed:!1}})}function Zk(e){if(e){var t=e.sourceList,i=A(e);if(i=bk(i),i=_k(i),t.length>0){var a=[],n=new Ec("effectImage");t.forEach((e=>{var t=n.getImageDom(e);a.push(t)}))}return i}}function Ck(e){return(0,u.Z)((0,u.Z)({},e),{},{scale:Math.ceil(100*e.scale)/100})}function Nk(){var e=Nl.assetLoaded;return{loading:e}}function Sk(e){return Il.multiAudios.findIndex((t=>t.rt_id===e))}function Ik(){return Il.multiAudios}function Ak(){return Il.audioList}function Pk(){return Il.BGMList}function Mk(e){pd(!1);var t=[];e.forEach((e=>{if(e.isLoop){var i=e.startTime,a=e.endTime,n=a-i;e.isLoop=!1;var r=e.rt_duration;if(e.cut&&(r=e.cut[1]-e.cut[0]),n>r)for(var o=Math.ceil(n/r),s=0,l=0;l<o;l++){var c=s+r,d=(0,u.Z)((0,u.Z)({},e),{},{startTime:s,endTime:Math.min(c,n)});t.push(d),s=d.endTime}else t.push(e)}else t.push(e)}));var i=t.map(Tk);return Il.setAudios(i),pd(!0),i}function Ek(e,t){var i=Sk(t),a=Tk(e);return Il.replaceAudio(a,i),We("replaceAudio",!0),a}function Lk(e){Il.setAudios(e),We("setAudios",!0)}function Dk(e,t){var i=Sk(t);Il.updateAudio({volume:e},i),We("setVolume",!0)}function Rk(e,t){var i=Sk(t);Il.updateAudio({speed:e},i),We("setSpeed",!0)}function zk(e,t){var i=Sk(t);Il.updateAudio({fadeIn:e},i),We("setFadeIn",!0)}function Fk(e,t){var i=Sk(t);Il.updateAudio({fadeOut:e},i),We("setFadeOut",!0)}function Ok(e,t){var i=Sk(t);Il.updateAudio({isLoop:e},i),We("setLoop",!0)}function Bk(e,t){var i=Sk(t);Il.updateAudio(e,i),Il.audioIsUserControl(i),We("setAudioDuration",!0)}function Wk(e,t){var i=Sk(t);Il.updateAudio({cut:[e.startTime,e.endTime]},i),We("setAudioCut",!0)}function Vk(e){Il.removeAudio(e),We("removeAudio",!0)}function Uk(e){var t=Tk(e);return Il.addAudio(t),We("addAudio",!0),t}function Gk(){return Il.replaced}function Xk(e){Il.setReplaced(e)}function qk(){return{replaceAudio:Ek,setVolume:Dk,setLoop:Ok,setAudios:Lk,setAudioDuration:Bk,setAudioCut:Wk,addAudio:Uk,removeAudio:Vk,setFadeIn:zk,setFadeOut:Fk,setSpeed:Rk,value:Ak()}}function Hk(){return{replaceAudio:Ek,setVolume:Dk,setLoop:Ok,setAudioDuration:Bk,setAudioCut:Wk,addAudio:Uk,removeAudio:Vk,value:Pk()}}function Yk(e){var t=e.templates,i=e.audios;eu(),Nl.restoreAllTemplate(t),Il.setAudios(i)}function Kk(){var e=El.goNext();e&&Yk(e)}function Qk(){var e=El.goPrev();e&&Yk(e)}function Jk(){var e=El.hasNext,t=El.hasPrev;return{value:{hasNext:e,hasPrev:t},goNext:Kk,goPrev:Qk}}var $k=(0,d.Z)((()=>{El.addRecord({templates:En(Nl.templates),audios:Il.multiAudios})}),300),eT=()=>{El.updateRecord({templates:En(Nl.templates),audios:Il.multiAudios})},tT=i(26063),iT=i.n(tT);class aT{constructor(e){var t=this;this.canvas=void 0,this.context=void 0,this.width=void 0,this.height=void 0,this.src=void 0,this.filters=void 0,this.image=void 0,this._formatFilters=()=>{var e,t=[],i={};Object.entries(this.filters||{}).forEach((e=>{var t=(0,n.Z)(e,2),a=t[0],r=t[1];i[a]=window.parseFloat("".concat(r))}));var a=null!==(e=null===i||void 0===i?void 0:i.strong)&&void 0!==e?e:1;["brightness","saturate","hue","contrast","blur"].forEach((e=>{var n=e,r=x[n],o=i[n];void 0!==o&&o!==r&&t.push({key:n,value:o*a})}));var r=[void 0===(null===i||void 0===i?void 0:i["gamma-r"])?1:(i["gamma-r"]-1)*a+1,void 0===(null===i||void 0===i?void 0:i["gamma-g"])?1:(i["gamma-g"]-1)*a+1,void 0===(null===i||void 0===i?void 0:i["gamma-b"])?1:(i["gamma-b"]-1)*a+1];if(r.some((e=>1!==e))&&t.push({key:"gamma",value:r}),null!==i&&void 0!==i&&i.sharpen){var o=(null===i||void 0===i?void 0:i.sharpen)*a,s=1+o,l=-(0+o/8);t.push({key:"sharpen",value:[l,l,l,l,s,l,l,l,l]})}return t},this._putFilters=(e,t)=>{var i,a,n,r,o,s,l,c,d,u,p,v,m,h;switch(e){case"brightness":null===(i=this.image)||void 0===i||null===(a=i.filters)||void 0===a||a.push(new(iT().Image.filters.Brightness)({brightness:t}));break;case"gamma":null===(n=this.image)||void 0===n||null===(r=n.filters)||void 0===r||r.push(new(iT().Image.filters.Gamma)({gamma:t}));break;case"saturate":null===(o=this.image)||void 0===o||null===(s=o.filters)||void 0===s||s.push(new(iT().Image.filters.Saturation)({saturation:t}));break;case"contrast":null===(l=this.image)||void 0===l||null===(c=l.filters)||void 0===c||c.push(new(iT().Image.filters.Contrast)({contrast:t}));break;case"hue":null===(d=this.image)||void 0===d||null===(u=d.filters)||void 0===u||u.push(new(iT().Image.filters.HueRotation)({rotation:t}));break;case"blur":null===(p=this.image)||void 0===p||null===(v=p.filters)||void 0===v||v.push(new(iT().Image.filters.Blur)({blur:t}));break;case"sharpen":null===(m=this.image)||void 0===m||null===(h=m.filters)||void 0===h||h.push(new(iT().Image.filters.Convolute)({matrix:[...t]}));break;default:break}},this._setFilters=e=>{if(e&&(this.filters=e),this.filters&&this.image){var t=this._formatFilters();this.image.filters=[],t.forEach((e=>{var t=e.key,i=e.value;return this._putFilters(t,i)})),this.image.applyFilters()}},this.updateFilters=e=>{this._setFilters(e),this.render()},this.setSize=()=>{var e,t,i;null===(e=this.image)||void 0===e||e.set({scaleX:this.width/(null!==(t=this.image.width)&&void 0!==t?t:1),scaleY:this.height/(null!==(i=this.image.height)&&void 0!==i?i:1),selectable:!1}),this.canvas.setDimensions({width:this.width,height:this.height})},this._initImage=e=>{iT().Image.fromURL(e||this.src,(e=>{var t=this.canvas.getElement();t&&(this.image=e,this.image.set({shadow:"rgba(0,0,0,0.2) 2px 2px 10px"}),this._setFilters(),this.setSize(),this.canvas.add(e),this.render())}),{crossOrigin:"anonymous",left:0,top:0})},this._asyncSetSrc=e=>new Promise(((t,i)=>{var a;if(!this.image)return console.error("this.image is undefined"),i(new Error("this.image is undefined"));null===(a=this.image)||void 0===a||a.setSrc(e,(()=>{t(!0)}),{crossOrigin:"anonymous",left:0,top:0})})),this.updateImage=function(){var e=(0,p.Z)(m().mark((function e(i,a,n){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.width=i,t.height=a,t.image){e.next=6;break}return t.src=n,t._initImage(n),e.abrupt("return");case 6:if(t.width=i,t.height=a,n===t.src){e.next=13;break}return t.src=n,e.next=12,t._asyncSetSrc(n);case 12:t._setFilters();case 13:t.setSize(),t.render();case 15:case"end":return e.stop()}}),e)})));return function(t,i,a){return e.apply(this,arguments)}}(),this.render=()=>{var e;null===(e=this.canvas)||void 0===e||e.requestRenderAll()},this.dispose=()=>{var e;null===(e=this.canvas)||void 0===e||e.dispose()};var i=e.node,a=e.width,r=e.height,o=e.src,s=e.filters;this.width=a,this.height=r,this.height=r,this.src=o,this.filters=s,this.canvas=new(iT().StaticCanvas)(i,{selection:!1,enableRetinaScaling:!1}),this.context=this.canvas.getContext(),iT().filterBackend=iT().initFilterBackend(),iT().Object.prototype.transparentCorners=!1,this._initImage()}}var nT=e=>{var t=e.src,i=void 0===t?"":t,a=e.style,o=e.filters,s=e.asset,l=(0,r.useRef)(null),c=(0,r.useRef)(!0),d=(0,r.useState)(!1),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=window.parseInt(a.width),f=window.parseInt(a.height),g=(0,Zm.Z)((()=>{var t;null===(t=l.current)||void 0===t||t.toBlob((t=>{if(t&&c.current){var i=URL.createObjectURL(t);e.asset.update({attribute:{rt_blob_url:i}}),eT(),c.current=!1}}))}),{wait:50}),x=g.run,y=(0,Ju.Z)((()=>{if(v&&l.current){var e=new aT({node:l.current,src:i,width:h,height:f,filters:o});return e.canvas.on("after:render",x),e}null===y||void 0===y||y.dispose()}),[v]);(0,r.useLayoutEffect)((()=>(m(!0),()=>{null===y||void 0===y||y.dispose()})),[]);var _=(0,Nb.Z)((e=>{null===y||void 0===y||y.updateFilters(e)}),{wait:50}),j=_.run;return(0,Sb.Z)((()=>{null===y||void 0===y||y.updateImage(h,f,i)}),[h,f,i]),(0,r.useEffect)((()=>{c.current=!0}),[i]),(0,Sb.Z)((()=>{j((0,u.Z)({},o)),c.current=!0}),[Object.values(o||{}).join()]),(0,Kg.jsx)("div",{style:a,children:(0,Kg.jsx)("canvas",{"data-asset-id":"".concat(b).concat(s.id),ref:l})})};nT.defaultProps={filters:void 0};var rT=(0,hp.Pi)(nT);var oT=e=>{var t;return Object.entries(e).forEach((e=>{var i=(0,n.Z)(e,2),a=i[0],r=i[1],o=a,s=x[o];void 0!==r&&r!==s&&(t=(0,u.Z)({[o]:r},t))})),t},sT=e=>{var t,i,a=e.asset,r=e.canvasInfo,o=e.whole,s=a.attribute,l=a.id,c=s.picUrl,d=s.filters,p=s.container,v=s.imageEffects,m=s.isFill,h=s.gravity,f=void 0===h?"nw":h,g=s.width,x=s.scale,y=void 0===x?100:x,_=s.rt_blob_url,j="loading"===c?"":c,w=!!(null!==p&&void 0!==p&&p.source_key||v),k=kb(a),T=k.getImgStyle,Z=k.getImgContainer,C=k.getCanvasStyle,N=Fy(f),S=(0,n.Z)(N,2),I=S[0],A=S[1];if(a.meta.isLogo)return(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",background:"url(".concat(c,") ").concat(m?"repeat":"no-repeat"," ").concat(I," ").concat(A," / ").concat(.3*g*(y/100),"px")}});var P=()=>{var e=o&&d&&oT(d);return console.log("checkImage",{availableFilters:e,rt_blob_url:_}),e?(0,Kg.jsx)(rT,{src:j||"",style:T(),filters:e,asset:a}):_?(0,Kg.jsx)("img",{style:T(),alt:"img",src:_}):(0,Kg.jsx)(Cy,{alt:"img",src:j,crossOrigin:"anonymous","data-asset-id":"".concat(b).concat(l),style:T(),draggable:"false"})};return(0,Kg.jsx)("div",{className:"assetWrapper",style:(0,u.Z)((0,u.Z)({},Z()),{},{opacity:null!==(t=a.tempData)&&void 0!==t&&null!==(i=t.rt_hover)&&void 0!==i&&i.isHover?"0.3":1}),children:w?(0,Kg.jsx)(Cb,{style:C(),asset:a,canvasInfo:r}):P()})},lT=(0,hp.Pi)(sT);function cT(e){var t=e.asset,i=Dy(t),a=(null===t||void 0===t?void 0:t.tempData)||{},n=a.rt_itemScale,r=void 0===n?1:n;return t.assets.length||(i={display:"none"}),i.transform="scale(".concat(r,") translateZ(0px)"),i.transformOrigin="0 0 0",i}function dT(e,t){return"number"===typeof e?[e,t]:[...e,t]}var uT=(0,hp.Pi)((e=>{var t=e.asset,i=e.index,a=e.showOnly,n=t.assets,o=cT(e);return(0,Kg.jsx)("div",{className:"asset-module",children:(0,Kg.jsx)("div",{style:o,children:null===n||void 0===n?void 0:n.map(((n,o)=>(0,r.createElement)(AZ,(0,u.Z)((0,u.Z)({},e),{},{asset:n,parentAsset:t,index:dT(i,o),key:"module-".concat(n.meta.id),previewAll:a}))))})})})),pT=uT,vT=(0,hp.Pi)((e=>{var t=cT(e);return(0,Kg.jsx)("div",{className:"asset-module",style:t})})),mT=vT,hT=(0,hp.Pi)((e=>{var t=e.asset,i=t.meta.type;return"__module"===i?(0,Kg.jsx)(mT,(0,u.Z)({},e)):(0,Kg.jsx)(pT,(0,u.Z)({},e),i)})),fT=hT;function gT(e){var t=e.attribute,i=t.width,a=t.height,n={width:i,height:a};return{assetElementStyle:n}}var xT=i(46368);function yT(e,t,i,a){var o,s,l,c=(0,r.useRef)(null),d=(0,r.useRef)(null),u=null===(o=e.tempData)||void 0===o?void 0:o.rt_asset,p=e.attribute,v=e.assets,m=e.meta,h=(0,r.useState)(!0),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)({viewBoxWidth:0,viewBoxHeight:0}),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=p.width,k=p.height,T=p.rt_svgString,Z=p.source_key;function C(e){c.current&&(c.current.innerHTML="",c.current.appendChild(e))}function N(e){var t=d.current;null===t||void 0===t||t.batchSetAttributes(t.svgNode,{preserveAspectRatio:"none",style:"opacity:".concat(e?1:0,";position:absolute;left:0;top:0")})}function S(e,t){var i=d.current;if(null!==i&&void 0!==i&&i.svgNode&&0!==_.viewBoxWidth){var a=null===i||void 0===i?void 0:i.getImgAndClipPathNode(),n=a.clipPathNodes;n&&(null===i||void 0===i||i.batchSetAttributes(n[0],{transform:"scale(".concat(e,",").concat(t,")"),transformOrigin:"left top"}))}x(!1)}function I(e){var t=new Xg(e,"".concat(m.id).concat(p.resId).concat(a));d.current=t,v&&v.length>0?N(!1):N(!0),j(null===t||void 0===t?void 0:t.getViewBoxSize()),t.svgNode&&C(t.svgNode)}return(0,r.useEffect)((()=>{T&&I(T)}),[T,Z]),(0,r.useEffect)((()=>{if(d.current&&(v&&v.length>0||!(0,xT.Z)(u))){N(!1);var e=w/_.viewBoxWidth,t=k/_.viewBoxHeight;S(e,t)}else N(!0),S(1,1)}),[null===e||void 0===e||null===(s=e.assets)||void 0===s?void 0:s.length,v,w,k,_,u]),{vSize:_,MaskContainer:c,clipPath:null===(l=d.current)||void 0===l?void 0:l.getClipPathId(),loading:g}}var bT=i(46179),_T=i.n(bT),jT=e=>{var t,i,a,n=e.asset,r=e.canvasInfo,o=e.isPreviewMovie,s=void 0!==o&&o;if(s)return null;var l=n.assetPosition,c=n.tempData,d=Qt(n);return(0,Kg.jsx)(Kg.Fragment,{children:(null===c||void 0===c||null===(t=c.rt_hover)||void 0===t?void 0:t.isHover)&&(0,Kg.jsx)("div",{className:_T().dragView,style:{transform:"scale(".concat(1/r.scale,")"),position:"absolute",left:(null===d||void 0===d?void 0:d.left)/r.scale-l.left,top:(null===d||void 0===d?void 0:d.top)/r.scale-l.top},children:(0,Kg.jsxs)("div",{className:hb()(_T().dragViewWrap,{[_T().dragViewWrapCenter]:null===c||void 0===c||null===(i=c.rt_hover)||void 0===i?void 0:i.isMaskCenter}),style:{width:null===d||void 0===d?void 0:d.width,height:null===d||void 0===d?void 0:d.height},children:[(0,Kg.jsx)("div",{className:_T().dragIconWrap,children:(0,Kg.jsx)("img",{className:_T().dragIcon,src:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iNTVweCIgaGVpZ2h0PSI1NXB4IiB2aWV3Qm94PSIwIDAgNTUgNTUiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8dGl0bGU+57yW57uEPC90aXRsZT4KICAgIDxkZWZzPgogICAgICAgIDxmaWx0ZXIgaWQ9ImZpbHRlci0xIj4KICAgICAgICAgICAgPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUdyYXBoaWMiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDEuMDAwMDAwIDAgMCAwIDAgMS4wMDAwMDAgMCAwIDAgMCAxLjAwMDAwMCAwIDAgMCAxLjAwMDAwMCAwIj48L2ZlQ29sb3JNYXRyaXg+CiAgICAgICAgPC9maWx0ZXI+CiAgICA8L2RlZnM+CiAgICA8ZyBpZD0i6JKZ54mI5ouW5ou95LyY5YyWIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0i5Lqk5LqS6K+05piOIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtNTIuMDAwMDAwLCAtMjQ0LjAwMDAwMCkiPgogICAgICAgICAgICA8ZyBpZD0i57yW57uEIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSg1NC4wMDAwMDAsIDI0Ni4wMDAwMDApIj4KICAgICAgICAgICAgICAgIDxwb2x5bGluZSBpZD0i6Lev5b6EIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iMyIgc3Ryb2tlLWxpbmVjYXA9InJvdW5kIiBwb2ludHM9IjUxIDM1LjMyMjE4MjYgNTEgNTEgMCA1MSAwIDAgMzguMTQ5ODAyNiAwIj48L3BvbHlsaW5lPgogICAgICAgICAgICAgICAgPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlci0xKSIgaWQ9Iui/lOWbniI+CiAgICAgICAgICAgICAgICAgICAgPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMjcuNTAwMDAwLCAyNS45ODkwODYpIHNjYWxlKDEsIC0xKSB0cmFuc2xhdGUoLTI3LjUwMDAwMCwgLTI1Ljk4OTA4NikgdHJhbnNsYXRlKDcuMDAwMDAwLCAxMC4wMDAwMDApIj4KICAgICAgICAgICAgICAgICAgICAgICAgPHBhdGggZD0iTTQwLjQxMDAyOSwzMS45NzgxNzE1IEMzNy45MzE4Mzk4LDI0LjQyMzM3MzEgMzAuNzUzMzIxNCwxOS4wMjY0Mzk1IDIyLjI4NTQxMzEsMTguODcxOTgxOCBDMjEuMjI5MjEwNywxOC44NTM4MTAzIDIwLjIzMjQ0ODMsMTguODc2NTI0NyAxOS4yODU5ODEyLDE4Ljk0MDEyNDkgTDE5LjI4NTk4MTIsMjYuNDA0MDY1OSBDMTkuMjkwNTUzNSwyNi40MjY3ODAyIDE5LjI5NTEyNTgsMjYuNDQ5NDk0NiAxOS4yOTUxMjU4LDI2LjQ3MjIwOSBDMTkuMjk1MTI1OCwyNi42NTM5MjM5IDE5LjE0NDIzOTgsMjYuODAzODM4NyAxOC45NjEzNDc2LDI2LjgwMzgzODcgQzE4LjgzNzg5NTQsMjYuODAzODM4NyAxOC43MzI3MzI0LDI2Ljc0MDIzODUgMTguNjc3ODY0NywyNi42NDQ4MzgyIEwxOC42Nzc4NjQ3LDI2LjY3NjYzODMgTDAuMjM3NzU5ODQ1LDEzLjg3MDI3ODMgTDAuMzMzNzc4MjQzLDEzLjg3MDI3ODMgQzAuMTUwODg2MDU1LDEzLjg3MDI3ODMgMCwxMy43MjAzNjM0IDAsMTMuNTM4NjQ4NSBDMCwxMy40MDY5MDUyIDAuMDc3NzI5MTc5OSwxMy4yOTMzMzMzIDAuMTg3NDY0NDkzLDEzLjIzODgxODkgTDE4LjY3MzI5MjQsMC40MDUyMDE1OSBMMTguNjczMjkyNCwwLjQzNzAwMTcwNCBDMTguNzMyNzMyNCwwLjM0MTYwMTM2MyAxOC44Mzc4OTU0LDAuMjc4MDAxMTM2IDE4Ljk1Njc3NTMsMC4yNzgwMDExMzYgQzE5LjEzOTY2NzUsMC4yNzgwMDExMzYgMTkuMjkwNTUzNSwwLjQyNzkxNTk1NyAxOS4yOTA1NTM1LDAuNjA5NjMwODkyIEMxOS4yOTA1NTM1LDAuNjMyMzQ1MjU4IDE5LjI4NTk4MTIsMC42NTUwNTk2MjUgMTkuMjgxNDA4OSwwLjY3Nzc3Mzk5MiBMMTkuMjgxNDA4OSw3LjkxOTExNDE0IEMyMC4xMjcyODUzLDcuODc4MjI4MjggMjEuMDE0MzEyNCw3Ljg2NDU5OTY2IDIxLjk0NzA2MjYsNy44ODI3NzExNSBDMzIuNDY3OTM1Nyw4LjA1OTk0MzIxIDQwLjk5OTkyOTMsMTYuODI3Njg4OCA0MC45OTk5MjkzLDI3LjI4NTM4MzMgQzQxLjAwNDQyODYsMjguODk4MTAzNCA0MC43OTQxMDI2LDMwLjQ3NDQ4MDQgNDAuNDEwMDI5LDMxLjk3ODE3MTUgWiBNMTkuMzIzOTc1MSw4LjUyNzkwMDYxZS0xNSBMMTkuMzIzOTc1MSwwLjAyIEwxOS4yODM5NzUxLDAuMDIgTDE5LjMyMzk3NTEsOC41Mjc5MDA2MWUtMTUgWiBNMTkuMzIxMjYxMywyNy4xMjczMjU0IEwxOS4yOTEyNjEzLDI3LjEwNzMyNTQgTDE5LjMyMTI2MTMsMjcuMTA3MzI1NCBMMTkuMzIxMjYxMywyNy4xMjczMjU0IFoiIGlkPSLlvaLnirYiIGZpbGw9IiMwMDAwMDAiIGZpbGwtcnVsZT0ibm9uemVybyI+PC9wYXRoPgogICAgICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgICAgIDwvZz4KICAgICAgICAgICAgPC9nPgogICAgICAgIDwvZz4KICAgIDwvZz4KPC9zdmc+"})}),(null===d||void 0===d?void 0:d.width)>60&&(0,Kg.jsx)("span",{className:_T().text,children:null!==c&&void 0!==c&&null!==(a=c.rt_hover)&&void 0!==a&&a.isMaskCenter?"\u91ca\u653e":"\u62d6\u5165"})]})})})},wT=(0,hp.Pi)(jT);function kT(e,t){return"number"===typeof e?[e,t]:[...e,t]}var TT=e=>{var t,i=e.asset,a=e.canvasInfo,n=e.index,o=e.isPreviewMovie,s=void 0!==o&&o,l=e.prefix,c=void 0===l?"":l,d=gT(i),p=d.assetElementStyle,v=i.assets,m=i.tempData,h=i.attribute,f=null===m||void 0===m?void 0:m.rt_asset,g=yT(i,a,s,c),x=g.MaskContainer,y=g.clipPath,b=g.loading,_=()=>{if(f){var e=f.attribute;return{width:e.width,height:e.height,left:(h.width-e.width)/2,top:(h.height-e.height)/2,position:"absolute"}}return{width:"100%",height:"100%"}};return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(wT,(0,u.Z)({},e)),(0,Kg.jsxs)("div",{className:"assetElement",style:(0,u.Z)((0,u.Z)({overflow:"hidden"},p),{},{position:"relative"}),children:[(0,Kg.jsx)("div",{ref:x}),(0,Kg.jsxs)("div",{style:{transformOrigin:"0 0",position:"relative",touchAction:"manipulation",width:"100%",height:"100%",clipPath:"url(#".concat(y),overflow:"hidden"},children:[!b&&y&&f&&(0,Kg.jsx)("div",{style:_(),className:"assetElementMaskRtAsset",children:(0,Kg.jsx)("img",{src:null!==(t=f.attribute.picUrl||f.attribute.rt_preview_url)&&void 0!==t?t:""})}),!b&&y&&!f&&(null===v||void 0===v?void 0:v.map(((t,a)=>(0,r.createElement)(AZ,(0,u.Z)((0,u.Z)({},e),{},{asset:t,parentAsset:i,previewAll:!0,index:kT(n,a),key:"mask-".concat(t.meta.id)})))))]}),b&&(0,Kg.jsx)("i",{className:"iconfont icon-xuanzhuan assetImgLoad"})]})]})},ZT=(0,hp.Pi)(TT),CT=i(35350),NT=function(){var e={};e.getBezierEasing=i;var t={};function i(e,i,a,n,r){var o=r||("bez_"+e+"_"+i+"_"+a+"_"+n).replace(/\./g,"p");if(t[o])return t[o];var s=new g([e,i,a,n]);return t[o]=s,s}var a=4,n=.001,r=1e-7,o=10,s=11,l=1/(s-1),c="function"===typeof Float32Array;function d(e,t){return 1-3*t+3*e}function u(e,t){return 3*t-6*e}function p(e){return 3*e}function v(e,t,i){return((d(t,i)*e+u(t,i))*e+p(t))*e}function m(e,t,i){return 3*d(t,i)*e*e+2*u(t,i)*e+p(t)}function h(e,t,i,a,n){var s,l,c=0;do{l=t+(i-t)/2,s=v(l,a,n)-e,s>0?i=l:t=l}while(Math.abs(s)>r&&++c<o);return l}function f(e,t,i,n){for(var r=0;r<a;++r){var o=m(t,i,n);if(0===o)return t;var s=v(t,i,n)-e;t-=s/o}return t}function g(e){this._p=e,this._mSampleValues=c?new Float32Array(s):new Array(s),this._precomputed=!1,this.get=this.get.bind(this)}return g.prototype={get:function(e){var t=this._p[0],i=this._p[1],a=this._p[2],n=this._p[3];return this._precomputed||this._precompute(),t===i&&a===n?e:0===e?0:1===e?1:v(this._getTForX(e),i,n)},_precompute:function(){var e=this._p[0],t=this._p[1],i=this._p[2],a=this._p[3];this._precomputed=!0,e===t&&i===a||this._calcSampleValues()},_calcSampleValues:function(){for(var e=this._p[0],t=this._p[2],i=0;i<s;++i)this._mSampleValues[i]=v(i*l,e,t)},_getTForX:function(e){for(var t=this._p[0],i=this._p[2],a=this._mSampleValues,r=0,o=1,c=s-1;o!==c&&a[o]<=e;++o)r+=l;--o;var d=(e-a[o])/(a[o+1]-a[o]),u=r+d*l,p=m(u,t,i);return p>=n?f(e,u,t,i):0===p?u:h(e,r,r+l,t,i)}},e}(),ST={i:"i",s:"s",o:"o"};Object.keys(ST);function IT(e){return"string"===typeof e?JSON.parse(e):(0,CT.Z)(e)}var AT={opacity:1,transformOriginX:0,transformOriginY:0,rotate:0,translateX:0,translateY:0,scaleX:1,scaleY:1},PT=["opacity","rotate","scaleX","scaleY","scaleZ"],MT=["translateX","translateY","translateZ"],ET=["translateX","translateY","translateZ","transformOriginX","transformOriginY","transformOriginZ"],LT=(e,t)=>e.i?NT.getBezierEasing(e.o.x[t],e.o.y[t],e.i.x[t],e.i.y[t]).get:e=>e,DT=(e,t,i,a)=>{i.k[0]&&"number"===typeof i.k[0].t&&i.k.forEach((i=>{i.t=Math.round(i.t/a),i.t=Math.max(e,Math.min(i.t,t))}))};function RT(e,t){var i=e.k.length;if(!(i<1))for(var a=i,n=Math.abs(t)/300,r=0;r<a;r++)e.k[r].s[0]*=n}var zT=(e,t,i)=>{var a=IT(t);a.ip=Math.round(a.ip/e),a.op=Math.round(a.op/e);var n=a.op,r=a.ip;return null!==i&&void 0!==i&&i.x&&RT(a.ks.p.x,i.x),null!==i&&void 0!==i&&i.y&&RT(a.ks.p.y,i.y),DT(r,n,a.ks.o,e),DT(r,n,a.ks.r,e),DT(r,n,a.ks.p.x,e),DT(r,n,a.ks.p.y,e),DT(r,n,a.ks.a,e),DT(r,n,a.ks.s,e),a};function FT(e){return Math.round((e.op-e.ip)*Fe.frameInterval*1e3)}var OT=(e,t,i,a,n,r,o)=>{var s=t?ET:MT,l=[0,0,0];if(0===a.a){s.includes(n[0])&&(l=a.k);for(var c=0;c<=i;c++)e[c][n[0]]=(a.k[0]-l[0])*o,n[1]&&(e[c][n[1]]=(a.k[1]-l[1])*o),n[2]&&(e[c][n[2]]=(a.k[2]-l[2])*o)}1===a.a&&a.k.length>0&&function(){var t=a.k,c=t.length;if(s.includes(n[0])&&(l=t[0].s),1===c)for(var d=t[0].t;d<=i;d++)e[d][n[0]]=(t[0].s[0]-l[0])*o,n[1]&&(e[d][n[1]]=(t[0].s[1]-l[1])*o),n[2]&&(e[d][n[2]]=(t[0].s[2]-l[2])*o);else for(var u=function(i){var a=t[i],s=t[i+1],d=s.t-a.t,u=[0,0,0];u[0]=s.s[0]-a.s[0],n[1]&&(u[1]=s.s[1]-a.s[1]),n[2]&&(u[2]=s.s[2]-a.s[2]);var p=[];p[0]=LT(a,0),n[1]&&(p[1]=LT(a,1)),n[2]&&(p[2]=LT(a,2)),e.forEach(((e,t)=>{if(0===i&&t<a.t&&PT.includes(n[0])&&(e[n[0]]=(a.s[0]-l[0])*o,n[1]&&(e[n[1]]=(a.s[1]-l[1])*o),n[2]&&(e[n[2]]=(a.s[2]-l[2])*o)),t>=a.t&&t<=s.t){var v=(t-a.t)/d;e[n[0]]=(a.s[0]*r+p[0](v)*u[0]-l[0])*o,n[1]&&(e[n[1]]=(a.s[1]*r+p[1](v)*u[1]-l[1])*o),n[2]&&(e[n[2]]=(a.s[2]*r+p[2](v)*u[2]-l[2])*o)}else i+1===c-1&&t>s.t&&(e[n[0]]=(s.s[0]-l[0])*o,n[1]&&(e[n[1]]=(s.s[1]-l[1])*o),n[2]&&(e[n[2]]=(s.s[2]-l[2])*o))}))},p=0;p<c-1;p++)u(p)}()},BT=(e,t)=>{var i=e.translateX,a=void 0===i?0:i,n=e.translateY,r=void 0===n?0:n,o=e.transformOriginX,s=void 0===o?0:o,l=e.transformOriginY,c=void 0===l?0:l,d=e.scaleX,u=void 0===d?1:d,p=e.scaleY,v=void 0===p?1:p,m=(a-s*u)*t,h=(r-c*v)*t,f=e.rotate/180*Math.PI,g=Math.sin(f),x=Math.cos(f);return"matrix(".concat(u*x,", ").concat(v*g,", ").concat(u*-g,", ").concat(v*x,", ").concat(m||0,", ").concat(h||0,")")};function WT(e,t,i){var a,n=i.scale,r=i.aeA,o=i.startTime,s=i.endTime;if("i"===e){var l=t[e].length,c=t[e][l-1];if(!c)return;a=(0,vn.SO)((0,vn.mL)(BT(c,n)))}if("o"===e&&r.s.kw){var d=Math.round((s-o)/(1e3*Fe.frameInterval)),u=t.s.length,p=t.s[Math.min(u-1,d)];if(!p)return;a=(0,vn.SO)((0,vn.mL)(BT(p,n)))}return t[e].map((e=>{var t=BT(e,n);if(a){var i=(0,vn.mL)(t),r=(0,vn.qC)(a,i);t=(0,vn.hG)(r)}return{opacity:e.opacity,transform:t}}))}var VT=ST;function UT(e){return Math.round(e/1e3/Fe.frameInterval)}function GT(e,t){var i=e.width,a=e.height,n={};return"l"===t&&(n.x=-i),"r"===t&&(n.x=i),"t"===t&&(n.y=-a),"b"===t&&(n.y=a),"lt"===t&&(n.x=-i,n.y=-a),"lb"===t&&(n.x=-i,n.y=a),"rt"===t&&(n.x=i,n.y=-a),"rb"===t&&(n.x=i,n.y=a),n}function XT(e){var t="center center";return"l"===e&&(t="left center"),"r"===e&&(t="right center"),"t"===e&&(t="center top"),"b"===e&&(t="center bottom"),"lt"===e&&(t="left top"),"lb"===e&&(t="left bottom"),"rt"===e&&(t="right top"),"rb"===e&&(t="right bottom"),t}function qT(){var e=(0,r.useState)(0),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,dx.Z)({i:[],s:[],o:[]}),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,Ju.Z)((()=>({i:null,s:null,o:null})),[i]),u=(0,Ju.Z)((()=>({i:0,s:0,o:0})),[i]),p=(0,Ju.Z)((()=>({i:[],s:[],o:[]})),[i]);function v(){a((e=>e+1)),c({i:[],s:[],o:[]})}return{frameStyles:p,duration:u,rateKw:d,styles:l,setStyles:c,resetStore:v}}function HT(e,t){var i=e.attribute,a=qT(),n=a.frameStyles,o=a.duration,s=a.rateKw,l=a.styles,c=a.setStyles,d=a.resetStore,p=(0,r.useMemo)((()=>!i.kw),[i.kw,i.aeA]),v=i.aeA,m=void 0===v?Fe.getDefaultPlaybackRate():v,h=i.startTime,f=i.endTime;i.kw;function g(e){return WT(e,n,{aeA:m,scale:1,startTime:h,endTime:f})}function x(e){var t=[];t.length=e.op+1;for(var i=0;i<=e.op;i++)t[i]=(0,u.Z)({},AT);return OT(t,p,e.op,e.ks.o,["opacity"],1,.01),OT(t,p,e.op,e.ks.r,["rotate"],1,1),OT(t,p,e.op,e.ks.p.x,["translateX"],1,1),OT(t,p,e.op,e.ks.p.y,["translateY"],1,1),OT(t,p,e.op,e.ks.a,["transformOriginX","transformOriginY"],0,1),OT(t,p,e.op,e.ks.s,["scaleX","scaleY"],1,.01),t}function y(e){var t=g(e);t&&c({[e]:t})}function b(e,t){var a=e.pbr,r=e.kw;r&&(s[t]=zT(a,r,GT(i,r.direction)),o[t]=FT(s[t]),n[t]=x(s[t]),y(t))}return{onKwChange:b,resetStore:d,duration:o,rateKw:s,styles:l}}function YT(e){var t=e.asset,i=e.canvasInfo,a=HT(t,i),o=a.onKwChange,s=a.styles,l=a.resetStore,c=t.attribute.rt_previewAeA,d=(0,r.useState)(0),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=(0,Ju.Z)((()=>({timer:0,currentFrame:0})),[]),f=(0,r.useMemo)((()=>{for(var e in c){var t=c[e];if(t.resId)return{resId:t.resId,pbr:t.pbr,key:e}}}),[c]);function g(e){h.currentFrame=e,m(e)}function x(){if(clearTimeout(h.timer),f){var e=s[f.key].length,i=()=>{h.timer=setTimeout((()=>{if(h.currentFrame>e)return clearTimeout(h.timer),g(0),t.deletePreviewAEAKw&&t.deletePreviewAEAKw(),l(),!1;g(h.currentFrame+1),i()}),32)};i()}}function y(){if(f&&c){var e,t=c[f.key];if(null!==(e=t.kw)&&void 0!==e&&e.isText)return{}}var i={};if(s&&f&&s[f.key].length){i=(0,u.Z)({},s[f.key][v]);var a=(null===c||void 0===c?void 0:c[f.key].kw)||{},n=a.ofh,r=a.tfo;n&&(i.overflow="hidden"),r&&(i.transformOrigin=XT(r))}return i}return(0,r.useEffect)((()=>{s&&f&&s[f.key].length&&x()}),[s]),(0,r.useEffect)((()=>{if(f&&c){var e,t=c[f.key];if(null!==(e=t.kw)&&void 0!==e&&e.isText)return;t.kw&&t.pbr&&o(t,f.key)}}),[c]),{getStyle:y}}function KT(e){var t=e.asset,i=e.canvasInfo,a=e.showOnly,n=t.attribute,o=n.kw,s=n.startTime,l=n.endTime,c=mt(n),d=c.i,p=c.o,v=c.s,m=HT(t,i),h=m.onKwChange,f=m.styles,g=m.duration,x=m.rateKw;function y(e){var t,i=c[e];null!==(t=i.kw)&&void 0!==t&&t.isText||i.kw&&i.pbr&&h(i,e)}function b(){"string"!==typeof d.kw&&y(VT.i)}function _(){"string"!==typeof p.kw&&y(VT.o)}function j(){"string"!==typeof v.kw&&(y(VT.s),_())}function w(e){var i={};if(!a){var n,r;if(t.attribute.kw&&(n="s",r=UT(e-s)),d.resId&&s-g.i<=e&&e<s){var o;if(null!==(o=d.kw)&&void 0!==o&&o.isText)return{};n="i",r=UT(e-(s-g.i))}else if(v.resId&&s<=e&&e<l){var c;if(null!==(c=v.kw)&&void 0!==c&&c.isText)return{};n="s",r=UT(e-s)}else if(p.resId&&l<=e){var m;if(null!==(m=p.kw)&&void 0!==m&&m.isText)return{};n="o",r=UT(e-l)}if(n&&void 0!==r){var h=null===x||void 0===x?void 0:x[n];h&&h.op>=0&&h.ip>=0&&f[n].length>0&&(r>=h.op?i=(0,u.Z)({},f[n][h.op]):r>=h.ip&&(i=(0,u.Z)({},f[n][r])),null!==h&&void 0!==h&&h.ofh&&(i.overflow="hidden"),null!==h&&void 0!==h&&h.tfo&&(i.transformOrigin=XT(h.tfo)))}}return i}return(0,r.useEffect)((()=>{if(o){var e=(0,u.Z)((0,u.Z)({},v),{},{kw:o});h(e,VT.s)}}),[o,v.pbr]),(0,r.useEffect)((()=>{b()}),[null===d||void 0===d?void 0:d.kw,null===d||void 0===d?void 0:d.pbr]),(0,r.useEffect)((()=>{j()}),[o,null===v||void 0===v?void 0:v.kw,null===v||void 0===v?void 0:v.pbr]),(0,r.useEffect)((()=>{_()}),[null===p||void 0===p?void 0:p.kw,null===p||void 0===p?void 0:p.pbr]),(0,r.useEffect)((()=>{p.resId&&!v.resId&&_()}),[null===p||void 0===p?void 0:p.resId,null===v||void 0===v?void 0:v.resId]),{getStyle:w}}function QT(e){var t=e.asset,i=e.videoStatus,o=e.isPreviewMovie,l=e.previewAll,c=e.manualPreview,d=t.attribute.rt_previewAeA,u=i.playStatus,p=(0,r.useMemo)((()=>u===a.Playing),[u]),v=KT(e),m=v.getStyle,h=YT(e),f=h.getStyle,g=(0,r.useState)({}),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=(0,r.useRef)({});return(0,r.useEffect)((()=>(0,s.EH)((()=>{var e;c||(d?e=f():p||o&&!l||(e={})),e||(e=m(i.currentTime)),(0,qe.Z)(e,_.current)||(_.current=e,b(e))})))),{style:y}}function JT(e){var t=e.asset,i=e.children,a=e.assetStyle,n=t.meta,o=t.id,s=QT(e),l=s.style,c=(0,r.useMemo)((()=>"custom-animation-".concat(n.type,"-").concat(o)),[o,n.type]),d=(0,r.useMemo)((()=>l.overflow?(0,u.Z)((0,u.Z)({},a),{},{overflow:l.overflow}):(0,u.Z)({},a)),[l.overflow,a]);return(0,Kg.jsx)("div",{style:d,children:(0,Kg.jsx)("div",{className:c,style:l,children:i})})}var $T=(0,hp.Pi)(JT);function eZ(e){var t=e.currentTime,i=e.duration,a=t/i;return 0===t&&(a=0),a}function tZ(e){var t=e.animation;return{opacity:eZ(t)}}function iZ(e){var t=e.animation,i=eZ(t);return{opacity:1-i}}function aZ(e){var t,i=e.canvasInfo,a=e.animation,n=e.style,r=e.asset,o=i.scale,s=r.transform.posX*o,l=r.transform.posY*o,c=r.attribute.width*o,d=r.attribute.height*o,u=i.width,p=i.height,v=eZ(a),m=0,h=0,f=s+c,g=l+d;switch(null!==(t=a.direction)&&void 0!==t?t:1){case 1:h=g*v-g;break;case 2:m=u-s-(u-s)*v;break;case 3:h=p-l-(p-l)*v;break;default:m=f*v-f}return{left:m+n.left,top:h+n.top}}function nZ(e){var t,i=e.canvasInfo,a=e.animation,n=e.style,r=e.asset,o=i.scale,s=r.transform.posX*o,l=r.transform.posY*o,c=r.attribute.width*o,d=r.attribute.height*o,u=i.width,p=i.height,v=eZ(a),m=0,h=0,f=s+c,g=l+d;switch(null!==(t=a.direction)&&void 0!==t?t:1){case 1:h=-g*v;break;case 2:m=(u-s)*v;break;case 3:h=(p-l)*v;break;default:m=-f*v}return{left:m+n.left,top:h+n.top}}function rZ(e){var t,i=e.animation,a=e.style,n=a.width,r=a.height,o=eZ(i),s=null!==(t=i.direction)&&void 0!==t?t:1,l=0,c=0,d="",u="",p=.1;if(2==s){var v=n*(2+p);l=v/2*o-v/2,u="".concat(v,"px ").concat(r,"px"),p=n*p/v,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0, 0)),\n            to(rgba(0, 0, 0, 0))")}else if(4==s){var m=n*(2+p);l=-m/2*o,u="".concat(m,"px ").concat(r,"px"),p=n*p/m,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}else if(1==s){var h=r*(2+p);c=h/2*o-h/2,u="".concat(n,"px ").concat(h,"px"),p=r*p/h,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 )),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0 ,0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0 ,0)),\n            to(rgba(0, 0, 0 , 0))")}else{var f=r*(2+p);c=-f/2*o,u="".concat(n,"px ").concat(f,"px"),p=r*p/f,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}return{WebkitMaskPosition:"".concat(l,"px ").concat(c,"px"),WebkitMaskSize:"".concat(u),WebkitMaskImage:"-webkit-gradient(".concat(d,")")}}function oZ(e){var t,i=e.animation,a=e.style,n=a.width,r=a.height,o=eZ(i),s=null!==(t=i.direction)&&void 0!==t?t:1,l=0,c=0,d="",u="",p=.1;if(2==s){var v=n*(2+p);l=-v/2*o,u="".concat(v,"px ").concat(r,"px"),p=n*p/v,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0, 0)),\n            to(rgba(0, 0, 0, 0))")}else if(4==s){var m=n*(2+p);l=m/2*o-m/2,u="".concat(m,"px ").concat(r,"px"),p=n*p/m,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}else if(1==s){var h=r*(2+p);c=-h/2*o,u="".concat(n,"px ").concat(h,"px"),p=r*p/h,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 )),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0 ,0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0 ,0)),\n            to(rgba(0, 0, 0 , 0))")}else{var f=r*(2+p);c=f/2*o-f/2,u="".concat(n,"px ").concat(f,"px"),p=r*p/f,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}return{WebkitMaskPosition:"".concat(l,"px ").concat(c,"px"),WebkitMaskSize:"".concat(u),WebkitMaskImage:"-webkit-gradient(".concat(d,")")}}function sZ(e){var t=e.animation,i=eZ(t),a=1.1,n=a+a-1,r=n*i;return r>a&&(r=a-(r-a)),{transform:"scale(".concat(r,")")}}function lZ(e){var t=e.animation,i=eZ(t),a=.25,n=1-i,r=1;return n<a&&(n=a,r=(1-i)/a),{transform:"scale(".concat(n,")"),opacity:r}}var cZ={1:nZ,2:lZ,3:iZ,4:oZ},dZ={1:aZ,2:sZ,3:tZ,4:rZ};function uZ(e,t,i){var a=e?dZ[t]:cZ[t];return a?a(i):{}}function pZ(e,t,i){var a=vp[e]||{},n=a.action;return n?{transform:n(t/i)}:{}}function vZ(e){var t=e.videoInfo,i=e.asset,n=e.videoStatus,o=i.attribute,s=i.animationItemDuration,l=t.allAnimationTime,c=n.currentTime,d=n.playStatus,u=o.startTime,p=void 0===u?0:u,v=o.endTime,m=void 0===v?l:v,h=o.animation,f=(0,r.useMemo)((()=>{var e;if(!h)return{noAnimation:!0,isAniIn:!1,animatedTime:0,animationId:0};var t=!1,i=!0,a=0;return c>=p-s.i&&c<=p&&(null===h||void 0===h||null===(e=h.enter)||void 0===e?void 0:e.baseId)>0?(i=!0,a=s.i-(p-c)):m&&c>=m-s.o&&c<=m&&h.exit.baseId>0?(i=!1,a=s.o-(m-c)):t=!0,i&&c>=p&&(a=s.i),!i&&c>=m&&(a=s.o),{noAnimation:t,isAniIn:i,animatedTime:a,animationId:Number(i?null===h||void 0===h?void 0:h.enter.baseId:null===h||void 0===h?void 0:h.exit.baseId)}}),[o,c,null===h||void 0===h?void 0:h.enter.baseId,null===h||void 0===h?void 0:h.exit.baseId,s.i,s.o,m,p]),g=f.noAnimation,x=f.isAniIn,y=f.animatedTime,b=f.animationId,_=(0,r.useMemo)((()=>d===a.Playing),[d]);return{noAnimation:g,animationId:b,isAniIn:x,animatedTime:y,isPlaying:_,duration:s}}function mZ(e){var t=e.asset,i=e.assetStyle,a=e.isPreviewMovie,n=e.videoStatus,r=e.videoInfo,o=e.previewAll,s=e.manualPreview,l=t.attribute,c=l.animation,d=l.bgAnimation,p=vZ(e),v=p.noAnimation,m=p.isAniIn,h=p.animatedTime,f=p.isPlaying,g=p.duration,x=p.animationId,y={},b=i;if(null!==d&&void 0!==d&&d.id)y=pZ(d.id,n.currentTime,r.pageTime),b=(0,u.Z)((0,u.Z)({},b),y);else{y={};var _,j,w=v||!f&&(!a||o);if(s||!w)y=uZ(m,x,{style:e.assetStyle,canvasInfo:(0,u.Z)((0,u.Z)({},e.canvasInfo),{},{scale:1}),asset:t,animation:{id:x,currentTime:h,duration:m?g.i:g.o,direction:null===c||void 0===c||null===(_=c[m?"enter":"exit"])||void 0===_||null===(j=_.details)||void 0===j?void 0:j.direction}});if(1===x)if(null!=y.left)b=(0,u.Z)((0,u.Z)({},b),y);else if(b.transform&&y.transform){var k=b.transform;b=(0,u.Z)((0,u.Z)({},b),y),b.transform="".concat(k," ").concat(y.transform)}else b=(0,u.Z)((0,u.Z)({},b),y)}return{animationStyle:y,containerStyle:b}}var hZ=i(24545),fZ=i.n(hZ);function gZ(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=arguments.length>2?arguments[2]:void 0,a=Rd[t],n=a.p1x,r=a.p1y,o=a.p2x,s=a.p2y,l=3*n,c=3*(o-n)-l,d=1-l-c,u=3*r,p=3*(s-r)-u,v=1-u-p;function m(e){return((d*e+c)*e+l)*e}function h(e,t){var i,a,n,r,o,s;for(n=e,s=0;s<8;s++){if(r=m(n)-e,Math.abs(r)<t)return n;if(o=(3*d*n+2*c)*n+l,Math.abs(o)<1e-6)break;n-=r/o}if(i=0,a=1,n=e,n<i)return i;if(n>a)return a;while(i<a){if(r=m(n),Math.abs(r-e)<t)return n;e>r?i=n:a=n,n=(a-i)/2+i}return n}function f(e,t){var i=h(e,t);return((v*i+p)*i+u)*i}return f(e,1/(200*i))}function xZ(e,t,i,a){var n={left:e,top:t};return 0===a?(n.left=e+i,n.top=t):90===a?(n.left=e,n.top=t+i):180===a?(n.left=e-i,n.top=t):270===a?(n.left=e,n.top=t-i):a>0&&a<90?(n.left=e+i*Math.cos(a*Math.PI/180),n.top=t+i*Math.sin(a*Math.PI/180)):a>90&&a<180?(a=180-a,n.left=e-i*Math.cos(a*Math.PI/180),n.top=t+i*Math.sin(a*Math.PI/180)):a>180&&a<270?(a-=180,n.left=e-i*Math.cos(a*Math.PI/180),n.top=t-i*Math.sin(a*Math.PI/180)):a>270&&a<360&&(a=360-a,n.left=e+i*Math.cos(a*Math.PI/180),n.top=t-i*Math.sin(a*Math.PI/180)),n}var yZ=e=>{var t=e.asset,i=e.isPreviewMovie,a=t.transform,o=t.attribute,s=o.width,l=o.height,c=o.opacity,d=void 0===c?100:c,u=a.posX,p=a.posY,v=a.rotate,m=Ke(t),h=(0,r.useState)({}),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(e,a)=>{if(a){var n={x:u+s*a.left,y:p+l*a.top},r=tt(m,n,e);x({width:s,height:l,opacity:d,posX:r.x-s/2,posY:r.y-l/2,rotate:e}),i||t.setTempData({rt_style:{width:s,height:l,opacity:d,posX:r.x-s/2,posY:r.y-l/2,rotate:e}})}},b=(e,a,n,r)=>{var o={left:u,top:p};if(0!==r){var c=Math.min(s,l)*n,m=4*e*c/1e3,h=m*r,f=Math.ceil((h+1)/c),g=Math.ceil(h/c),y=h%c;f>g&&0!==g&&(y=c),g%2===0&&(y=c-y);var b=g%4;o=xZ(u,p,y,a),0!==b&&3!==b||(o.left=2*u-o.left,o.top=2*p-o.top)}x({width:s,height:l,opacity:d,posX:o.left,posY:o.top,rotate:v}),i||t.setTempData({rt_style:{width:s,height:l,opacity:d,posX:o.left,posY:o.top,rotate:v}})},_=(e,t,i)=>{var a=0;return a=360*e*t/1e3%360,i||(a=360-a),a};return{calcRotate:_,calcStyle:y,getPosition:b,style:g}},bZ=e=>{var t=e.asset,i=e.isPreviewMovie,a=t.transform,o=t.attribute,s=o.width,l=o.height,c=o.stayEffect,d=o.opacity,u=Ke(t),p=((0,r.useRef)(),(0,r.useRef)(null)),v=(0,r.useState)({}),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=e=>{if(e.current&&c&&null!==c&&void 0!==c&&c.graph){var t=null===c||void 0===c?void 0:c.graph,i=t.points,a=t.freePathType;e.current.clear();var n,r=Wd(i,u.x,u.y);n="bessel"===a?Fd(r,1):zd(r,1);var o=e.current.path(n);p.current=o,e.current.customAttributes.progress=x}},x=e=>{if(p.current){var t=p.current.getTotalLength(),i=p.current.getPointAtLength(e*t),a="t".concat([i.x,i.y],"r").concat(i.alpha);return y(i,e),{transformStyle:a}}},y=(e,n)=>{var r=null===c||void 0===c?void 0:c.graph,o={x:e.x,y:e.y},u={width:s,height:l,posX:o.x-s/2,posY:o.y-l/2,rotate:a.rotate,opacity:d};if(null!==r&&void 0!==r&&r.toBounds&&1===(null===r||void 0===r?void 0:r.toBounds.length)){var p=null===r||void 0===r?void 0:r.toBounds[0],v=p.width-s,m=p.height-l,h=p.rotate-a.rotate;if(d&&u.opacity){var g=p.opacity-d;u.opacity+=g*n}u.width+=v*n,u.height+=m*n,u.rotate+=h*n,u.posX=o.x-u.width/2,u.posY=o.y-u.height/2}f(u),i||t.setTempData({rt_style:u})},b=e=>{if(p.current&&e){var t,i=e.points,a=e.freePathType,n=Wd(i,u.x,u.y);t="bessel"===a?Fd(n,1):zd(n,1),p.current.attr({path:t})}};return{aniPath:p,updatePath:b,buildPath:g,styleUpdate:x,style:h}},_Z=e=>{var t,i=e.asset,a=e.videoStatus,n=e.manualPreview,o=e.isPreviewMovie,s=i.tempData,l=s.rt_previewStayEffect,c=s.rt_style,d=i.transform,u=i.attribute,p=u.width,v=u.height,m=u.stayEffect,h=u.startTime,f=u.endTime,g=d.posX,x=d.posY,y=a.currentTime,b=a.playStatus,_=(0,r.useRef)(),j=(0,r.useRef)(),w=(0,r.useRef)(0),k=n||1===b||o||l,T=yZ(e),Z=T.calcRotate,C=T.calcStyle,N=T.getPosition,S=T.style,I=bZ(e),A=I.aniPath,P=I.buildPath,M=I.updatePath,E=I.styleUpdate,L=I.style,D=e=>{if(m){var t=m.duration,i=void 0===t?0:t,a=m.attach,n=m.graph;if(e<=f&&e>=h||l){if(a){var r=null===a||void 0===a?void 0:a.data,o=r.position,s=r.speed,c=r.ccw,d=r.direction,u=r.amplitude;if("Whirl"===(null===a||void 0===a?void 0:a.type)){var p=Z(e-h,s,c);C(p,o)}else N(s,d,u,e-h)}if(n&&A.current){var v=n.easing,g=n.loop;if(!g&&e>h+i)return;var x=(e-h)%i/i;e-h>=i&&0===x&&(x=1);var y=gZ(x,v,i);E((e-h)%(2*i)>=i&&g?1-y:y)}}}},R=()=>{i.setTempData({rt_style:void 0,rt_previewStayEffect:!1}),clearInterval(j.current),w.current=0},z=()=>{w.current<=f?(D(w.current+h),w.current+=5):R()},F=(0,Ju.Z)((()=>{var e,t=L;if(o||c||(t=c),null!==m&&void 0!==m&&m.attach&&(t=k?S:void 0),null!==(e=t)&&void 0!==e&&e.width){var i,a={position:"absolute",width:t.width,height:t.height,left:t.posX,top:t.posY,opacity:(null!==(i=t.opacity)&&void 0!==i?i:100)/100};t.rotate>0&&(a.transform="rotate(".concat(t.rotate,"deg)"));var n={transform:"scale(".concat(t.width/p,",").concat(t.height/v,") translateZ(0px)"),transformOrigin:"0 0 0"};return{calcStyle:a,styleScale:n}}return{calcStyle:void 0,styleScale:void 0}}),[JSON.stringify(S),JSON.stringify(L),c]);return(0,r.useEffect)((()=>{var e=document.getElementById("hc-path-container");!_.current&&null!==m&&void 0!==m&&m.graph&&e&&!A.current&&(_.current||(_.current=fZ()("hc-path-container",0,0)),A.current||P(_))}),[m]),(0,r.useEffect)((()=>{_.current&&A.current&&m&&null!==m&&void 0!==m&&m.graph&&M(null===m||void 0===m?void 0:m.graph)}),[null===m||void 0===m||null===(t=m.graph)||void 0===t?void 0:t.points,p,v,g,x]),(0,r.useEffect)((()=>{m&&D(y),!(y<h||y>f)&&k||null!==m&&void 0!==m&&m.graph||i.setTempData({rt_style:void 0})}),[y]),(0,r.useEffect)((()=>(l?(w.current=0,j.current=setInterval((()=>{z()}),1)):clearInterval(j.current),()=>{clearInterval(j.current)})),[l]),(0,r.useEffect)((()=>{1!==b&&clearInterval(j.current)}),[b]),{style:F}},jZ=_Z,wZ=(0,hp.Pi)((e=>{var t=e.children,i=mZ((0,u.Z)({},e)),a=i.animationStyle,n=i.containerStyle,r=jZ(e),o=r.style;return(0,Kg.jsx)("div",{className:"movie-assets-animation-container",style:(0,u.Z)((0,u.Z)({},n),o.calcStyle),children:(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)({},null===o||void 0===o?void 0:o.styleScale),a),children:t})})})),kZ=i(12416),TZ=i.n(kZ),ZZ=e=>{var t=Ru(),i=e.asset,a=i.attribute,n=t.filter((e=>ai(i)&&i.assets.length>0?(e.resId===a.resId||i.assets[0].attribute.resId===e.resId)&&3===e.scan_flag:e.resId===a.resId&&3===e.scan_flag)),r=n.length>0?"https://js.xiudodo.com/xiudodo-editor/image/error/lllegelIcon.png":"https://js.xiudodo.com/xiudodo-editor/image/error/sourceLoss.png";return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:TZ().lllegal,style:{background:"url(".concat(r,")"),backgroundRepeat:"no-repeat",backgroundSize:"auto 100%",backgroundPositionX:"50%"}})})},CZ=(0,hp.Pi)(ZZ),NZ=(0,hp.Pi)((e=>{var t=e.asset,i=e.index,a=t.meta,n=a.type;return o().useEffect((()=>{console.log("EmptyDom",i,n,i)}),[]),(0,Kg.jsx)("div",{})}));function SZ(e,t){return(0,r.useMemo)((()=>{var i=NZ;switch(t){case"video":if(""===e.attribute.rt_url&&e.meta.isTransfer)break;if(""===e.attribute.rt_url){i=CZ;break}i=cx;break;case"videoE":if(""===e.attribute.rt_url&&e.meta.isTransfer)break;if(""===e.attribute.rt_url){i=CZ;break}i=Px;break;case"SVG":if(""===e.attribute.SVGUrl){i=CZ;break}i=Jg;break;case"image":if(""===e.attribute.picUrl){i=CZ;break}case"pic":if(""===e.attribute.picUrl){i=CZ;break}case"background":if(""===e.attribute.picUrl||""===e.attribute.rt_url){i=CZ;break}i=lT;break;case"text":i=Gy;break;case"svgPath":i=nb;break;case"qrcode":i=wb;break;case"group":i=Mx;break;case"lottie":if(""===e.attribute.rt_url&&e.meta.isTransfer)break;if(""===e.attribute.rt_url){i=CZ;break}i=Ax;break;case"module":case"__module":i=fT;break;case"mask":if(""===e.attribute.source_key){i=CZ;break}if(e.assets&&e.assets.length>0){if(["image","pic"].includes(e.assets[0].meta.type)&&""===e.assets[0].attribute.picUrl){i=CZ;break}if(["videoE","video"].includes(e.assets[0].meta.type)&&""===e.assets[0].attribute.rt_url){i=CZ;break}}i=ZT;break}return i}),[t])}var IZ=e=>{var t=e.asset,i=e.index,a=e.assetActive,n=e.isPreviewMovie,r=e.parentAsset,o=e.showOnly,s=t.meta,l=t.attribute.dropShadow,c=s.type,d=zy(e),p=d.style,v=d.showCustomAnimation,m=d.assetClassName,h=d.auxiliaryBolder,f=d.AniAssetHidden,g=(d.isHasAnimation,Oy(l)),x=Wg(ai(r)?r:t),y=SZ(t,c),b=_u(),_=b.inMask,j=gu();if((o||Fe.hpMode)&&f)return null;if(_&&(null===j||void 0===j?void 0:j.meta.id)===s.id)return null;var w=(0,u.Z)({assetClassName:m,assetStyle:p,isAssetActive:a===i},e),k=(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({style:(0,u.Z)((0,u.Z)({},p),{},{position:"static",transform:"translateZ(0px)",opacity:1})},n||o?{}:x),{},{children:(0,Kg.jsx)(y,(0,u.Z)({},w))}));return o?(0,Kg.jsx)("div",{style:p,children:k}):(0,Kg.jsxs)(Kg.Fragment,{children:[!t.isAllAnimation&&(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)({},p),h),{},{filter:"".concat(g)}),children:k}),v&&t.isAllAnimation&&(0,Kg.jsx)($T,(0,u.Z)((0,u.Z)({},w),{},{assetStyle:(0,u.Z)((0,u.Z)((0,u.Z)({},p),h),{},{filter:"".concat(g),transform:"".concat(null===p||void 0===p?void 0:p.transform," translateZ(0px)")}),children:k})),!v&&t.isAllAnimation&&(0,Kg.jsx)(wZ,(0,u.Z)((0,u.Z)({},w),{},{assetStyle:(0,u.Z)((0,u.Z)((0,u.Z)({},p),h),{},{filter:"".concat(g),border:"none"}),children:k}))]})},AZ=(0,hp.Pi)(IZ),PZ={sepia:0,brightness:100,contrast:100,saturate:100,grayscale:0,invert:0,hue:0,blur:0},MZ=i(47409),EZ=i.n(MZ),LZ=(e,t)=>{var i=e.effectInfo,a=void 0===i?{}:i,n=e.showEffect,r=e.autoPlay,o=e.children,s=e.maskUrl,l=e.resType,c=e.maskNode,d=(0,u.Z)((0,u.Z)({},PZ),a),p=d.sepia,v=d.brightness,m=d.contrast,h=d.blur,f=d.saturate,g=d.grayscale,x=d.invert,y=d.hue,b=d.background,_=d.mixBlendMode,w=void 0===_?"normal":_,k=()=>{if(!n)return null;if(c)return c;if(s)switch(l){case"video":return(0,Kg.jsx)("video",{loop:!0,ref:t,className:EZ().video,src:s,crossOrigin:"anonymous",autoPlay:r});default:return(0,Kg.jsx)("img",{crossOrigin:"anonymous",alt:"",className:EZ().img,src:s})}return null};return(0,Kg.jsxs)("div",{className:EZ().EffectWrapper,children:[k(),(0,Kg.jsxs)("div",{className:EZ().EffectItem,style:{filter:n?"sepia(".concat(p,"%)\n            brightness(").concat(v,"%)\n            contrast(").concat(m,"%)\n            saturate(").concat(f,"%)\n            grayscale(").concat(g,"%)\n            invert(").concat(x,"%)\n            hue-rotate(").concat(y,"deg)\n            blur(").concat(h,"px)"):"none"},children:[n&&b&&(0,Kg.jsx)("div",{className:EZ().background,style:{background:j(b),mixBlendMode:w}}),o]})]})},DZ=(0,r.forwardRef)(LZ),RZ=i(40203),zZ=i.n(RZ),FZ=e=>{var t=e.asset,i=e.showOnly,a=e.videoStatus,n=e.videoInfo,o=e.children,s=t.assetDuration,l=s.startTime,c=s.endTime,d=t.attribute,p=d.effectInfo,v=void 0===p?{}:p,m=d.picUrl,h=d.rt_url,f=t.meta.overlayType,g=t.attribute.rt_total_frame,x=a.currentTime,y=a.playStatus,b=m||h,_=x>=l&&x<=c,j=()=>b&&"video"===f?i?(0,Kg.jsx)(lx,{isWebm:!0,totalFrame:g,isLoop:!0,videoUrl:b,videoStatus:a,id:t.id}):(0,r.createElement)(ex,(0,u.Z)((0,u.Z)({},e),{},{isLoop:!0,muted:!0,volume:0,currentTime:x,startTime:l,endTime:c,key:b,url:b,videoPlayStatus:y,speed:n.speed,id:t.id,className:zZ().video})):null;return(0,Kg.jsx)(DZ,{showEffect:_,effectInfo:v,maskUrl:b,resType:f,maskNode:j(),children:o})},OZ=(0,hp.Pi)(FZ);function BZ(e){var t=(0,vn.hG)((0,vn.qC)((0,vn.tm)((0,vn.fk)(e))));return t}function WZ(){var e=un(),t=e.width,i=e.height;return new wl({width:t,height:i,scale:1,startTime:0,endTime:0,easing:"linear",posX:0,posY:0})}function VZ(e,t,i){var a=Vd(e/i,t,i);return a}function UZ(e,t){for(var i={last:{camera:WZ(),index:-1},current:{camera:WZ(),index:-1},next:{camera:WZ(),index:-1}},a=A(i),n=0;n<e.length;n++){var r=e[n],o=r.camera,s=o.startTime,l=o.endTime;if(s<=t&&l>=t){a.current={camera:r,index:n},a.last=0===n?i.last:{camera:e[n-1],index:n-1},a.next=i.next;break}s>t&&0===n||t>l&&(0===n&&n!==e.length-1?(a.last={camera:r,index:n},a.current=i.current,a.next={camera:e[n+1],index:n+1}):n===e.length-1?(a.last={camera:e[n-1],index:n-1},a.current={camera:r,index:n},a.next={camera:r,index:n}):(a.current=i.current,a.last={camera:r,index:n},a.next={camera:e[n+1],index:n+1}))}return a}function GZ(e){return{x:e.posX*e.scale,y:e.posY*e.scale}}function XZ(e,t){var i=GZ(e.camera),a=GZ(t.camera);return{before:i,after:a,dis:{x:a.x-i.x,y:a.y-i.y}}}var qZ,HZ,YZ,KZ,QZ,JZ=e=>{var t=e.templateIndex,i=e.manualPreview,a=e.videoStatus,o=e.showOnly,s=e.isTranstionRender,l=void 0!==s&&s,c=a.currentTime,d=a.playStatus,u=Su(),p=u[t],v=p.cameras,m=void 0===v?[]:v,h=(0,r.useState)({}),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=1===d||i||l,b=e=>{var t=UZ(m,e);if(-1===t.current.index)if(-1===t.last.index||-1===t.next.index)x({});else{var i=t.last.camera,a=i.camera,n=a.endTime,r=a.scale,o=t.next.camera,s=o.camera,l=s.startTime,c=s.scale,d=XZ(i,o),u=d.before,p=d.dis,v=c-r,h=l-n,f=e-n,g=VZ(f,1,h),y=r+v*g,b={x:u.x+p.x*g,y:u.y+p.y*g},_=("scale(".concat(y,") translateZ(0px)"),b.x,b.y,"scale(".concat(y,") translate(").concat(-b.x/y,",").concat(-b.y/y,")"));x({transform:"".concat(BZ(_)," translateZ(0px)")})}else{var j=t.current.camera,w=j.camera.scale,k=GZ(j.camera),T=("scale(".concat(w,") translateZ(0px)"),k.x,k.y,"scale(".concat(w,") translate(").concat(-k.x/w,",").concat(-k.y/w,")"));x({transform:"".concat(BZ(T)," translateZ(0px)")})}};return(0,r.useEffect)((()=>{y&&!o?b(c):x({})}),[c,y]),{style:g}},$Z=(qZ=Reflect.metadata("design:type","undefined"===typeof He.VideoStatus?Object:He.VideoStatus),HZ=class{constructor(){this.offsetTime=[0,0],(0,l.Z)(this,"videoStatus",YZ,this),(0,l.Z)(this,"updatePageCut",KZ,this),(0,l.Z)(this,"updateVideoStatus",QZ,this),(0,s.rC)(this)}},YZ=(0,c.Z)(HZ.prototype,"videoStatus",[s.LO,qZ],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{playStatus:a.Stopped,currentTime:0}}}),KZ=(0,c.Z)(HZ.prototype,"updatePageCut",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.offsetTime=e}}}),QZ=(0,c.Z)(HZ.prototype,"updateVideoStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{var i=e.playStatus,a=e.currentTime,r=e.speed,o=void 0===r?1:r,s=(0,n.Z)(this.offsetTime,1),l=s[0];if(t){var c=t.currentTime/(1/o);Object.assign(this.videoStatus,{playStatus:i,currentTime:l+c})}else{var d=a/(1/o);Object.assign(this.videoStatus,{playStatus:i,currentTime:l+d})}}}}),HZ),eC=(0,hp.Pi)((e=>{var t,i=e.isPreview,a=e.videoInfo,o=e.pageAttr,s=e.prefix,l=e.canvasInfo,c=e.videoStatus,d=e.assets,p=e.style,v=e.showOnly,m=e.whole,h=e.manualPreview,f=(0,r.useRef)(null),g=gu(),x=Dg(d),y=Lg(l,o),b={showOnly:!!v,canvasInfo:l,videoInfo:a,manualPreview:h,videoStatus:c,isPreviewMovie:i,assetActive:null===g||void 0===g?void 0:g.id,AssetRootRef:f,prefix:s},_=(0,u.Z)((0,u.Z)((0,u.Z)({width:"100%",height:"100%",position:"absolute"},y),p),{},{transformOrigin:"0 0 0",transform:"".concat(null!==(t=null===p||void 0===p?void 0:p.transform)&&void 0!==t?t:""," translateZ(0px)")}),j=e=>{var t=e;if(t.isEffect){var i=t;return(0,Kg.jsx)(OZ,(0,u.Z)((0,u.Z)({asset:i.asset,index:i.asset.id},b),{},{children:i.assetList.map((e=>j(e)))}))}var o=t;if("plain"!==(null===o||void 0===o?void 0:o.meta.type)){var l=o.assetDuration,c=l.startTime,d=l.endTime,p=a.offsetTime,v=void 0===p?[0,0]:p,h=a.pageTime,f=void 0===h?0:h,g=(0,n.Z)(v,2),x=g[0],y=g[1],_=c<=x&&d>=x||c>=x&&c<f-y;return _?(0,r.createElement)(AZ,(0,u.Z)((0,u.Z)({},b),{},{asset:o,index:o.id,key:"".concat(s,"-").concat(o.id),whole:m})):null}};return(0,Kg.jsx)("div",{className:"hc-core-assets",style:_,ref:f,children:null===x||void 0===x?void 0:x.map((e=>j(e)))})})),tC=(0,hp.Pi)((e=>{var t,i=e.videoStatus,a=e.style,n=e.manualCurrentTime,r=e.videoInfo,o=r.offsetTime,s=void 0===o?[0,0]:o,l=r.speed,c=e.canvasInfo,d=e.assets,p=e.manualPreview,v=1===i.playStatus||p,m=(0,Ju.Z)((()=>new $Z),[]),h=JZ(e),f=h.style;(0,qe.Z)(m.offsetTime,s)||m.updatePageCut(s),m.updateVideoStatus((0,u.Z)((0,u.Z)({},i),{},{speed:l}),n);var g=d.filter((e=>e.meta.isTransfer)),x=d.filter((e=>!e.meta.isTransfer));return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},a),{},{width:c.width,height:c.height,position:"absolute",overflow:"hidden",transform:"".concat(null!==(t=null===a||void 0===a?void 0:a.transform)&&void 0!==t?t:""," translateZ(0px)")}),children:[(0,Kg.jsx)("div",{style:(0,u.Z)({width:c.width,height:c.height,transformOrigin:"left top",position:"absolute",overflow:"hidden",zIndex:1,left:0,top:0},f),children:(0,Kg.jsx)(eC,(0,u.Z)((0,u.Z)({},e),{},{style:void 0,videoStatus:m.videoStatus,assets:x}))}),(0,Kg.jsx)("div",{style:{width:c.width,height:c.height,transformOrigin:"left top",position:"absolute",zIndex:v&&g.length>0?2:-1,pointerEvents:"none",transform:"translateZ(0px)"},children:(0,Kg.jsx)(eC,(0,u.Z)((0,u.Z)({},e),{},{style:{background:"transparent"},videoStatus:m.videoStatus,assets:g}))})]})})})),iC=tC,aC=i(79676);(()=>{window.requestAnimationFrame&&window.requestAnimationFrame})();var nC=()=>{(0,aC.Z)("ArrowUp",(e=>{e.stopPropagation(),nj((t=>{var i=t.posY;return e.shiftKey?{posY:i-50}:{posY:i-2}}))})),(0,aC.Z)("ArrowDown",(e=>{e.stopPropagation(),nj((t=>{var i=t.posY;return e.shiftKey?{posY:i+50}:{posY:i+2}}))})),(0,aC.Z)("ArrowLeft",(e=>{e.stopPropagation(),nj((t=>{var i=t.posX;return e.shiftKey?{posX:i-50}:{posX:i-2}}))})),(0,aC.Z)("ArrowRight",(e=>{e.stopPropagation(),nj((t=>{var i=t.posX;return e.shiftKey?{posX:i+50}:{posX:i+2}}))}))},rC=e=>{var t=e.offsetLeft,i=e.offsetTop;if(null!=e.offsetParent){var a=rC(e.offsetParent);t+=a.offsetLeft,i+=a.offsetTop}return{offsetLeft:t,offsetTop:i}},oC=()=>{var e=(0,r.useRef)({left:0,top:0});function t(){var e=document.getElementById("HC-CORE-EDITOR-CANVAS"),t=rC(e);t.offsetLeft,t.offsetTop}(0,r.useEffect)((()=>{document.addEventListener("dragend",(e=>{t()})),document.addEventListener("drag",(i=>{e.current={left:i.clientX,top:i.clientY},t()}))}),[])};function sC(e){var t=e.width,i=e.height,a=e.scale;return(0,r.useMemo)((()=>{var e={width:t*a,height:i*a},n={width:t,height:i,transform:"translateZ(0) scale(".concat(a,")"),transformOrigin:"0 0"};return{canvasStyle:e,renderStyle:n}}),[t,i,a])}var lC=(0,hp.Pi)((e=>{var t=e.videoStatus,i=e.videoHandler,n=e.endTime;e.startTime;function o(e){i.setCurrentTime(e,!1)}var s=(0,Ju.Z)((()=>new xy(o)),[]);return(0,r.useEffect)((()=>{t.currentTime>=n&&(t.playStatus===a.Playing?(i.stopVideo(),s.stop()):i.setCurrentTime(n-1,!1)),t.playStatus!==a.Playing&&s.pause(Fe.calculateVideoTime(t.currentTime))}),[t.currentTime]),(0,r.useEffect)((()=>{Fe.handleVideoStatus(t.playStatus,{onPlay:()=>{s.play(t.currentTime)},onPause:()=>{s.pause(t.currentTime)},onStop:()=>{s.stop()}})}),[t.playStatus]),(0,r.useEffect)((()=>()=>{i.stopVideo(),s.stop()}),[]),(0,Kg.jsx)(Kg.Fragment,{})})),cC=(0,hp.Pi)((e=>(0,Kg.jsx)(lC,(0,u.Z)({},e)))),dC=cC;Fe.handleVideoStatus;function uC(e,t){var i=t.in,a=i.s,n=i.e,r=t.out,o=r.s,s=r.e,l=1;if(e<a||e>s)return 0;if(e>n&&e<o)return 1;if(e>=a&&e<n&&(l=(e-a)/(n-a)),e>=o&&e<s){var c=s-o;l=(c-(e-o))/c}return l}var pC,vC,mC,hC,fC,gC,xC,yC=(0,hp.Pi)((e=>{var t=e.src,i=e.isLoop,o=e.startTime,s=e.endTime,l=e.videoStatus,c=e.volume,d=e.onLoadOver,u=e.fadeIn,p=void 0===u?0:u,v=e.fadeOut,m=void 0===v?0:v,h=e.audioCut,f=e.speed,g=void 0===f?1:f,x=(0,r.useMemo)((()=>c/100),[c]),y=S(o,s,{volume:x,isLoop:i,cst:null===h||void 0===h?void 0:h.startTime,cet:null===h||void 0===h?void 0:h.endTime}),b=y.targetRef,_=y.playerHelper,j=y.loadHandler,w=l.currentTime,k=l.playStatus,T=w,Z=(0,r.useState)(!1),C=(0,n.Z)(Z,2),N=C[0],I=C[1];function A(){null===_||void 0===_||_.setVolume(x)}function P(){N||(fd(t,!0),d(!0),I(!0),j())}function M(){d(!1),fd(t,!1)}(0,r.useEffect)((()=>{fd(t)}),[]),(0,r.useEffect)((()=>{_&&h&&_.setVideoClip({cet:h.endTime,cst:h.startTime},w)}),[null===h||void 0===h?void 0:h.startTime,null===h||void 0===h?void 0:h.endTime]),(0,r.useEffect)((()=>{if(_){var e=k===a.Playing,t=w>=o&&w<=o+(s-o)/g,i=_.playStatus===a.Playing;t?(e&&!i&&_.play(o+(T-o)*g),e||_.pause(T)):_.playStatus!==a.Stopped&&_.stop()}}),[k,w,o,s,g]);var E=(0,r.useMemo)((()=>{if(p||m){var e=s-o;return{in:{s:0,e:p},out:{s:e-m,e:e}}}}),[p,o,m,s]);return(0,r.useEffect)((()=>{if(E){var e=x*uC(T-o,E);b.current&&b.current.volume!==e&&(b.current.volume=e)}}),[w,o,s,E,c]),(0,r.useEffect)((()=>{_&&_.setVideoDuration({startTime:o,endTime:s})}),[o,s]),(0,r.useEffect)((()=>{_&&A()}),[c]),(0,r.useEffect)((()=>{null===_||void 0===_||_.setSpeed(g)}),[g,_]),(0,r.useEffect)((()=>{_&&_.setVideoDuration({startTime:o,endTime:s})}),[o,s]),(0,Kg.jsx)("audio",{src:t,controls:!1,loop:i,preload:"auto",ref:b,onCanPlayThrough:P,onError:M,className:"hc-hidden"})})),bC=yC,_C=(0,hp.Pi)((e=>{var t,i=e.videoStatus,a=e.audio,n=e.index,r=ep(n),o=Ai(),s=o.volume,l=void 0===s?100:s;function c(e){n>-1&&(e?r.loadSuccess():r.loadError())}return a.cut&&a.cut.length&&(t={startTime:a.cut[0],endTime:a.cut[1]}),(0,Kg.jsx)(bC,{src:a.rt_url,loadInfo:a.rt_loadInfo,index:n,isLoop:a.isLoop,volume:a.volume*l/100,fadeIn:a.fadeIn,fadeOut:a.fadeOut,startTime:a.startTime,endTime:a.endTime,videoStatus:i,onLoadOver:c,duration:a.rt_duration,audioCut:t,speed:a.speed})})),jC=(0,hp.Pi)((e=>{var t=e.videoStatus,i=e.audioList;return(0,Kg.jsx)("div",{className:"hc-audio-list",children:null!==i&&void 0!==i&&i.length?i.map(((e,i)=>(0,Kg.jsx)(_C,{videoStatus:t,index:i,audio:e},e.rt_id))):(0,Kg.jsx)(Kg.Fragment,{})})})),wC=(0,hp.Pi)((e=>{var t,i=e.videoStatus,a=e.templateIndex,r=e.audioList,o=Iu(),s=null!==(t=null===o||void 0===o?void 0:o[a])&&void 0!==t?t:[],l=(0,n.Z)(s,1),c=l[0];if("number"!==typeof c)return(0,Kg.jsx)(Kg.Fragment,{});var d=(0,u.Z)((0,u.Z)({},i),{},{currentTime:c+i.currentTime});return(0,Kg.jsx)(jC,{audioList:r,templateIndex:a,videoStatus:d})})),kC=jC,TC=(pC=class{constructor(){(0,l.Z)(this,"videoStatus",vC,this),(0,l.Z)(this,"videoStatusClip",mC,this),(0,l.Z)(this,"currentTimeRange",hC,this),(0,l.Z)(this,"setVideoStatus",fC,this),(0,l.Z)(this,"setCurrentTimeRange",gC,this),(0,l.Z)(this,"resetVideoStatus",xC,this),(0,s.rC)(this)}},vC=(0,c.Z)(pC.prototype,"videoStatus",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{playStatus:a.Stopped,currentTime:0}}}),mC=(0,c.Z)(pC.prototype,"videoStatusClip",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{playStatus:a.Stopped,currentTime:0}}}),hC=(0,c.Z)(pC.prototype,"currentTimeRange",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fC=(0,c.Z)(pC.prototype,"setVideoStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.playStatus,i=e.currentTime,a=void 0===i?this.videoStatus.currentTime:i;void 0!==t&&t!==this.videoStatus.playStatus&&(this.videoStatus.playStatus=t),this.videoStatus.currentTime=Math.max(0,a-this.currentTimeRange)}}}),gC=(0,c.Z)(pC.prototype,"setCurrentTimeRange",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{e!==this.currentTimeRange&&(this.currentTimeRange=e)}}}),xC=(0,c.Z)(pC.prototype,"resetVideoStatus",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{Object.assign(this.videoStatus,{playStatus:a.Stopped,currentTime:0}),this.currentTimeRange=0}}}),pC),ZC=new TC,CC={videoStatus:ZC.videoStatus,setVideoStatus:ZC.setVideoStatus,resetVideoStatus:ZC.resetVideoStatus,setCurrentTimeRange:ZC.setCurrentTimeRange};function NC(e){var t=e.currentTime,i=e.duration,a=t/i;return 0===t&&(a=0),a}function SC(e){var t=e.animation;return t.duration*=2,{opacity:NC(t)}}function IC(e){var t=e.animation,i=NC(t);return{opacity:1-i}}function AC(e){var t,i=e.canvasInfo,a=e.animation,n=e.style,r=e.asset,o=i.scale,s=r.transform.posX*o,l=r.transform.posY*o,c=r.attribute.width*o,d=r.attribute.height*o,u=i.width,p=i.height,v=NC(a),m=0,h=0,f=s+c,g=l+d;switch(null!==(t=a.direction)&&void 0!==t?t:1){case 1:h=g*v-g;break;case 2:m=u-s-(u-s)*v;break;case 3:h=p-l-(p-l)*v;break;default:m=f*v-f}return{left:m+n.left,top:h+n.top}}function PC(e){var t,i=e.canvasInfo,a=e.animation,n=e.style,r=e.asset,o=r.transform,s=o.posX,l=o.posY,c=r.attribute,d=c.width,u=c.height,p=i.width,v=i.height;a.duration*=2;var m=NC(a),h=0,f=0,g=s+d,x=l+u;switch(null!==(t=a.direction)&&void 0!==t?t:1){case 1:f=-x*m;break;case 2:h=(p-s)*m;break;case 3:f=(v-l)*m;break;default:h=-g*m}return{left:h+n.left,top:f+n.top}}function MC(e){var t,i=e.animation,a=e.style,n=a.width,r=a.height,o=NC(i),s=null!==(t=i.direction)&&void 0!==t?t:1,l=0,c=0,d="",u="",p=.1;if(2==s){var v=n*(2+p);l=v/2*o-v/2,u="".concat(v,"px ").concat(r,"px"),p=n*p/v,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0, 0)),\n            to(rgba(0, 0, 0, 0))")}else if(4==s){var m=n*(2+p);l=-m/2*o,u="".concat(m,"px ").concat(r,"px"),p=n*p/m,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}else if(1==s){var h=r*(2+p);c=h/2*o-h/2,u="".concat(n,"px ").concat(h,"px"),p=r*p/h,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 )),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0 ,0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0 ,0)),\n            to(rgba(0, 0, 0 , 0))")}else{var f=r*(2+p);c=-f/2*o,u="".concat(n,"px ").concat(f,"px"),p=r*p/f,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}return{WebkitMaskPosition:"".concat(l,"px ").concat(c,"px"),WebkitMaskSize:"".concat(u),WebkitMaskImage:"-webkit-gradient(".concat(d,")")}}function EC(e){var t,i=e.animation,a=e.style,n=a.width,r=a.height,o=NC(i),s=null!==(t=i.direction)&&void 0!==t?t:1,l=0,c=0,d="",u="",p=.1;if(2==s){var v=n*(2+p);l=-v/2*o,u="".concat(v,"px ").concat(r,"px"),p=n*p/v,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0, 0)),\n            to(rgba(0, 0, 0, 0))")}else if(4==s){var m=n*(2+p);l=m/2*o-m/2,u="".concat(m,"px ").concat(r,"px"),p=n*p/m,d="linear,\n            0% 100%, 100% 100%,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}else if(1==s){var h=r*(2+p);c=-h/2*o,u="".concat(n,"px ").concat(h,"px"),p=r*p/h,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 )),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0 ,0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0 ,0)),\n            to(rgba(0, 0, 0 , 0))")}else{var f=r*(2+p);c=f/2*o-f/2,u="".concat(n,"px ").concat(f,"px"),p=r*p/f,d="linear,\n            left top, left bottom,\n            from(rgb(0, 0, 0 , 0)),\n            color-stop(".concat(.5-p/2,", rgb(0, 0, 0, 0)),\n            color-stop(",.5,", rgba(0, 0, 0)),\n            color-stop(").concat(.5+p/2,", rgba(0, 0, 0)),\n            to(rgba(0, 0, 0))")}return{WebkitMaskPosition:"".concat(l,"px ").concat(c,"px"),WebkitMaskSize:"".concat(u),WebkitMaskImage:"-webkit-gradient(".concat(d,")")}}function LC(e){var t=e.animation;t.duration*=2;var i=NC(t),a=1,n=a+a-1,r=n*i;return r>a&&(r=a-(r-a)),{transform:"perspective(".concat(r,"px) scale3d(").concat(r,",").concat(r,",").concat(r,")")}}function DC(e){var t=e.animation;t.duration*=2;var i=NC(t),a=0,n=1-i,r=1;return n<a&&(n=a,r=(1-i)/a),{transform:"perspective(".concat(n,"px) scale3d(").concat(n,",").concat(n,",").concat(n,")"),opacity:r}}var RC={1:PC,2:DC,3:IC,4:EC},zC={1:AC,2:LC,3:SC,4:MC};function FC(e,t,i){var a=e?zC[t]:RC[t];return a?a(i):{}}function OC(e,t,i){var n,o=e.asset,s=t.currentTime,l=(null===i||void 0===i||null===(n=i.videoInfo)||void 0===n?void 0:n.offsetTime)||[0,0],c=l[0]+s,d=Ii(),u=d.playStatus,p=(0,r.useMemo)((()=>{var e;if(null===o||void 0===o||null===(e=o.attribute)||void 0===e||!e.animation)return{noAnimation:!0,isAniIn:!1,animatedTime:0,animationId:0,duration:0,animationDirection:-1};var t=o.attribute,i=o.animationItemDuration,a=(o.meta,t.startTime),n=void 0===a?0:a,r=t.endTime,s=t.animation,l=!1,d=i.i>0,u=0,p=d?i.i:i.o;return"after"===o.meta.transferLocation&&(p=0),c>=n&&c<=r?u=c-n+p:l=!0,c>=r&&(u=2*p),{noAnimation:l,isAniIn:d,animatedTime:u,animationId:Number(null===s||void 0===s?void 0:s.exit.baseId),animationDirection:Number(null===s||void 0===s?void 0:s.exit.details.direction),duration:i}}),[o,c]),v=p.noAnimation,m=p.isAniIn,h=p.animatedTime,f=p.animationId,g=p.duration,x=p.animationDirection,y=(0,r.useMemo)((()=>u===a.Playing),[u]);return{noAnimation:v,animationId:f,isAniIn:m,animatedTime:h,isPlaying:y,duration:g,animationDirection:x}}function BC(e,t,i){var a,n,o,s,l=e.asset,c=e.assetStyle,d=(t.playStatus,un()),p=OC(e,t,i),v=p.noAnimation,m=p.isAniIn,h=p.animatedTime,f=p.duration,g=p.animationId,x=p.animationDirection,y={},b=c;y=!v||null!==e&&void 0!==e&&e.asset?FC(m,g,{style:e.assetStyle,canvasInfo:d,asset:l,animation:{id:g,currentTime:h,duration:m?f.i:f.o,direction:null===l||void 0===l||null===(a=l.attribute)||void 0===a||null===(n=a.animation)||void 0===n||null===(o=n[m?"enter":"exit"])||void 0===o||null===(s=o.details)||void 0===s?void 0:s.direction}}):{};var _=(0,r.useMemo)((()=>{var e,t,i,a,n,r,o,s,c,p,h,f,b,_,j,w,k,T,Z,C,N,S={},I={};if(l&&!v)if("after"===l.meta.transferLocation){if(I=(0,u.Z)((0,u.Z)({},y),{},{position:"absolute"}),2===g&&(m?(S=(0,u.Z)((0,u.Z)({},y),{},{position:"absolute",zIndex:103}),I={}):S={}),3===g&&(S=(0,u.Z)((0,u.Z)({},y),{},{position:"absolute",zIndex:103}),I={}),1===g||4===g)switch(null===(_=I)||void 0===_||delete _.left,null===(j=I)||void 0===j||delete j.top,I.transform="translate(".concat(null===(w=y)||void 0===w?void 0:w.left,"px,").concat(null===(k=y)||void 0===k?void 0:k.top,"px)"),x){case 1:S=(0,u.Z)((0,u.Z)({},I),{},{transform:"translate(".concat(0,"px,",Number(null===(e=y)||void 0===e?void 0:e.top)+Number(null!==(t=d.height)&&void 0!==t?t:0),"px)")});break;case 2:S=(0,u.Z)((0,u.Z)({},I),{},{transform:"translate(".concat(Number(null===(i=y)||void 0===i?void 0:i.left)-d.width,"px,",0,"px)")});break;case 3:S=(0,u.Z)((0,u.Z)({},I),{},{transform:"translate(".concat(0,"px,",Number(null===(a=y)||void 0===a?void 0:a.top)-d.height,"px)")});break;case 4:S=(0,u.Z)((0,u.Z)({},I),{},{transform:"translate(".concat(Number(null===(n=y)||void 0===n?void 0:n.left)+d.width,"px,",0,"px)")});break}}else if(S=(0,u.Z)((0,u.Z)({},y),{},{position:"absolute"}),2===g&&(m?(I=(0,u.Z)((0,u.Z)({},y),{},{position:"absolute",zIndex:103}),S={}):(S.zIndex=103,I={})),3===g&&(I=(0,u.Z)((0,u.Z)({},y),{},{position:"absolute",zIndex:103}),S={}),1===g||4===g)switch(null===(T=S)||void 0===T||delete T.left,null===(Z=S)||void 0===Z||delete Z.top,S.transform="translate(".concat(null===(C=y)||void 0===C?void 0:C.left,"px,").concat(null===(N=y)||void 0===N?void 0:N.top,"px)"),x){case 1:I=(0,u.Z)((0,u.Z)({},S),{},{transform:"translate(".concat(0,"px,",Number(null===(r=y)||void 0===r?void 0:r.top)+(null!==(o=d.height)&&void 0!==o?o:0),"px)")});break;case 2:I=(0,u.Z)((0,u.Z)({},S),{},{transform:"translate(".concat(Number(null===(s=y)||void 0===s?void 0:s.left)-(null!==(c=d.width)&&void 0!==c?c:0),"px,",0,"px)")});break;case 3:I=(0,u.Z)((0,u.Z)({},S),{},{transform:"translate(".concat(0,"px,",Number(null===(p=y)||void 0===p?void 0:p.top)-(null!==(h=d.height)&&void 0!==h?h:0),"px)")});break;case 4:I=(0,u.Z)((0,u.Z)({},S),{},{transform:"translate(".concat(Number(null===(f=y)||void 0===f?void 0:f.left)+(null!==(b=d.width)&&void 0!==b?b:0),"px,",0,"px)")});break}return{style:I,lastStyle:S}}),[y]);return{isAniIn:m,animationStyle:_,containerStyle:b}}function WC(e,t){var i,a,n,o=e.currentTime,s=(null===t||void 0===t||null===(i=t.videoInfo)||void 0===i?void 0:i.offsetTime)||[0,0],l=s[0]+o,c=(0,r.useMemo)((()=>{var e;if(t){var i=t.endTransfer,a=t.startTransfer;if(i){var n=null===i||void 0===i?void 0:i.attribute,r=n.startTime,o=n.endTime;l>=r&&l<=o&&(e=i)}if(a){var s=null===a||void 0===a?void 0:a.attribute,c=s.startTime,d=s.endTime;l>=c&&l<=d&&(e=a)}}return{asset:e,assetStyle:{left:0,top:0},isPreviewMovie:!0,previewAll:!1}}),[t,l]),d=BC(c,e,t),p=d.animationStyle;return{animationType:null===c||void 0===c||null===(a=c.asset)||void 0===a||null===(n=a.meta)||void 0===n?void 0:n.transferLocation,style:{style:(0,u.Z)({},p.style),lastStyle:(0,u.Z)({},p.lastStyle)}}}var VC={playStatus:a.Stopped,currentTime:0},UC=(0,hp.Pi)((e=>{var t=e.canvasInfo,i=sC(t),n=i.canvasStyle,o=i.renderStyle,s=Ai(),l=(0,r.useMemo)((()=>"WholeTemplate-".concat(wi())),[]),c=gp(s,CC),d=c.audioList,p=c.timerVideoInfo,v=c.currentTemplateIndex,m=c.videoStatus,h=c.resetVideoStatus,f=c.templateList,g=c.template;(0,r.useEffect)((()=>()=>{Vb(),h()}),[]);var x=WC(m,g),y=x.animationType,b=x.style;function _(e){var t={zIndex:100-e,pointerEvents:"none",opacity:0,left:0,top:0};return e===v&&(t=(0,u.Z)({zIndex:101},b.style)),"after"===y&&e===v+1&&(t=(0,u.Z)((0,u.Z)({zIndex:100-e},b.lastStyle),{},{pointerEvents:"none"})),"before"===y&&e===v-1&&(t=(0,u.Z)((0,u.Z)({zIndex:100-e},b.lastStyle),{},{pointerEvents:"none"})),t}return(0,Kg.jsxs)("div",{className:"hc-core-wrapper",children:[(0,Kg.jsx)("div",{className:"hc-core-canvas",style:n,children:(0,Kg.jsx)("div",{className:"hc-core-canvas-render",style:o,children:f.map(((e,i)=>{var n=i===v,r=!0;f.length>15&&(r=n,m.playStatus===a.Playing&&(r=n||v===i+1||v===i-1));var o=A(VC);return n||i!==v-1||(null!==e&&void 0!==e&&e.endTransfer?(o.currentTime=e.videoInfo.allAnimationTime,o.playStatus=0):o=VC),r?(0,Kg.jsx)(iC,{assets:e.assets,isPreview:!0,style:_(i),templateIndex:i,prefix:"".concat(l,"-").concat(i,"-").concat(e.id),canvasInfo:t,videoStatus:n?m:o,videoInfo:e.videoInfo,pageAttr:e.pageAttr},"wholeTemplate-".concat(e.id)):(0,Kg.jsx)(Kg.Fragment,{})}))})}),(0,Kg.jsx)(kC,{videoStatus:s,audioList:d,templateIndex:v}),(0,Kg.jsx)(dC,{endTime:p.allAnimationTime,videoStatus:s,videoHandler:Ni})]})})),GC=UC;function XC(){var e=hu(),t=fu(),i=gu(),a=un(),n=a.scale;function o(){if(e&&!e.meta.locked){var a=e.tempData.rt_style,r={},o={};if(a){var s=a.width,l=a.height,c=a.posX,d=a.posY;r.width=s*n,r.height=l*n,o.left=c*n,o.top=d*n}var p=(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},Ry(e)),r),o),{},{opacity:1});return(t||i)&&(p.border="none"),p}return{}}function s(){if(null!==e&&void 0!==e&&e.auxiliary){var t=e.auxiliary;e.parent&&(t=e.parent.auxiliary);var i=t,a=i.horizontal,n=i.vertical,r=a.center,o=(a.start,n.center,n.start),s=n.end,l=r-50,c=o-40;if(Fe.container){var d=document.querySelector(Fe.container);if(d){var u=d.scrollTop,p=d.scrollLeft,v=d.clientHeight,m=d.clientWidth;c-30<u&&(c=s),c+30>u+v&&(c=u),l<p&&(l=p),l+100>p+m&&(l=p+m-100)}}return{left:l,top:c}}return{}}var l=(0,r.useMemo)((()=>"text"===(null===e||void 0===e?void 0:e.meta.type)?"\u53cc\u51fb\u7f16\u8f91\u6587\u5b57":"qrcode"===(null===e||void 0===e?void 0:e.meta.type)?"\u53cc\u51fb\u7f16\u8f91\u4e8c\u7ef4\u7801":"\u53cc\u51fb\u66ff\u6362\u5143\u7d20"),[null===e||void 0===e?void 0:e.meta.type]);return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"hc-asset-edit-hover",style:o()}),(null===e||void 0===e?void 0:e.meta.type)&&l&&(0,Kg.jsx)("div",{className:"hc-asset-tooltip",style:s(),children:(0,Kg.jsx)("span",{children:l})})]})}var qC=(0,hp.Pi)(XC);function HC(e){var t,i,a,n,r,o,s=e.styles;return(0,Kg.jsxs)("div",{className:"hc-asset-auxiliary-line",children:[(0,Kg.jsx)("div",{style:null===s||void 0===s||null===(t=s.vertical)||void 0===t?void 0:t.start,className:"hc-auxiliary-line-item hc-auxiliary-line-left"}),(0,Kg.jsx)("div",{style:null===s||void 0===s||null===(i=s.vertical)||void 0===i?void 0:i.center,className:"hc-auxiliary-line-item hc-auxiliary-line-leftCenter"}),(0,Kg.jsx)("div",{style:null===s||void 0===s||null===(a=s.vertical)||void 0===a?void 0:a.end,className:"hc-auxiliary-line-item hc-auxiliary-line-right"}),(0,Kg.jsx)("div",{style:null===s||void 0===s||null===(n=s.horizontal)||void 0===n?void 0:n.start,className:"hc-auxiliary-line-item hc-auxiliary-line-top"}),(0,Kg.jsx)("div",{style:null===s||void 0===s||null===(r=s.horizontal)||void 0===r?void 0:r.center,className:"hc-auxiliary-line-item hc-auxiliary-line-topCenter"}),(0,Kg.jsx)("div",{style:null===s||void 0===s||null===(o=s.horizontal)||void 0===o?void 0:o.end,className:"hc-auxiliary-line-item hc-auxiliary-line-bottom"})]})}var YC=(0,hp.Pi)(HC);function KC(e,t){var i,a=B(),n=t=>{var n=t.clientX,r=t.clientY;i||(i={x:n,y:r});var o={left:t.pageX-(null===a||void 0===a?void 0:a.left),top:t.pageY-(null===a||void 0===a?void 0:a.top)};e&&e(n-i.x,r-i.y,o)},r=()=>{window.removeEventListener("mouseup",o),window.removeEventListener("mousemove",n)},o=e=>{if(i){var a=e.clientX,n=e.clientY;t&&t(a-i.x,n-i.y)}r()};return window.addEventListener("mouseup",o),window.addEventListener("mousemove",n),r}function QC(e,t){var i=e.assetTransform.rotate;return st(e.containerSizeScale,Ct(t),i)}function JC(){var e=Li(),t=e.width,i=e.height;return(0,r.useMemo)((()=>st({width:t,height:i},{x:0,y:0},0)),[t,i])}function $C(e){var t=mu(),i=t.inClipping,n=JC(),o=Nu(),s=Ii(),l=s.currentTime,c=s.playStatus,d=e||fu();return(0,r.useMemo)((()=>{var e={};return!i&&c!==a.Playing&&d&&(e={canvas:n},null===o||void 0===o||o.forEach(((t,i)=>{var a=t.attribute,n=t.transform,r=t.auxiliary,o=t!==d,s=l>=a.startTime&&l<=a.endTime,c=!n.rotate;o&&s&&c&&r&&(e[i]=r)}))),{points:e,pointKeys:Object.keys(e)}}),[i,c,d])}var eN=["horizontal","vertical"];function tN(e,t,i,a){var n={vertical:void 0,horizontal:void 0},r={vertical:void 0,horizontal:void 0};t.forEach((t=>{var a=e[t];eN.forEach((e=>{var o=lt(e,a,i);o&&(n[e]={[o.currentKey]:o.style},r[e]={position:o.position,index:"canvas"===t?-1:Number(t)})}))}));var o=(0,u.Z)({},a),s=[];if(r.horizontal){var l=r.horizontal,c=l.position,d=l.index;o.left=c.left,s.push(d)}if(r.vertical){var p=r.vertical,v=p.position,m=p.index;o.top=v.top,s.push(m)}return{styles:n,targetIndex:s,position:o}}var iN=i(77050);function aN(e,t,i){var a;if(i.forEach((i=>{var n=Bu(i),r=Vu(n,e);r&&!a?a=i:(t.setTempData({rt_hover:{isHover:!1}}),i.setTempData({rt_asset:void 0,rt_hover:void 0}))})),a){var n=mi(a,e);if(n){var r=t.getAssetCloned(),o=zn(a,{width:r.attribute.width,height:r.attribute.height});r.attribute.width=o.width,r.attribute.height=o.height,a.setTempData({rt_asset:r}),t.setTempData({rt_deleted:!0})}else a.setTempData({rt_asset:void 0}),t.setTempData({rt_deleted:!1});a.setTempData({rt_hover:{isHover:!0,isMaskCenter:n}}),t.setTempData({rt_hover:{isHover:!0}})}else t.setTempData({rt_deleted:!1})}function nN(e){var t=Mu(),i=(0,Ju.Z)((()=>{var e=t.filter((e=>"mask"===e.meta.type&&!e.meta.locked));return(0,iN.Z)(e,(e=>e.transform.zindex),"desc")}),[e]);function a(t){g.includes((null===e||void 0===e?void 0:e.meta.type)||"")&&(null===e||void 0===e||!e.attribute.container)&&i.length>0&&aN(t,e,i)}function n(){var i=t.filter((e=>{var t;return!0===(null===(t=e.tempData)||void 0===t?void 0:t.rt_deleted)})),a=t.filter((e=>!e.meta.locked&&"mask"===e.meta.type));i.forEach((e=>{Fu(e.meta.id)})),a.length>0&&a.forEach((e=>{if(e.tempData.rt_asset){var t,i,a,n;e.update({attribute:{aeA:null===(t=e.tempData)||void 0===t?void 0:t.rt_asset.attribute.aeA,animation:null===(i=e.tempData)||void 0===i?void 0:i.rt_asset.attribute.animation,startTime:null===(a=e.tempData)||void 0===a?void 0:a.rt_asset.attribute.startTime,endTime:null===(n=e.tempData)||void 0===n?void 0:n.rt_asset.attribute.endTime},meta:{isClip:!1}}),e.setTempData({rt_hover:void 0});var r=e.tempData.rt_asset;r.meta.id=ji(),r.attribute.aeA=void 0,r.attribute.animation=void 0,r.transform.posX=(e.attribute.width-r.attribute.width)/2,r.transform.posY=(e.attribute.height-r.attribute.height)/2,e.setChildren([new Pn(r)],!0),e.setTempData({rt_asset:void 0}),iu.setEditActive(e)}else e.setTempData({rt_hover:void 0})})),null===e||void 0===e||e.setTempData({rt_hover:void 0})}return{check:a,moveOverHandMask:n}}function rN(){var e=fu(),t=un(),i=(0,r.useState)({}),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=$C(),c=nN(e),d=c.check,u=c.moveOverHandMask,p=un(),v=p.scale;function m(t,i){if(e){if(ui(e))e.update({transform:{posX:t.left/v,posY:t.top/v}});else{var a=QC(e,t),n=tN(l.points,l.pointKeys,a,t),r=n.styles,o=n.targetIndex,c=n.position;e.update({transform:{posX:c.left/v,posY:c.top/v}}),Jd(o),s(r)}d(i)}}function h(){vi(e,t),Jd([]),s({}),u(),We("assetMove",!0)}return{handleMove:m,moveOver:h,auxiliaryStyle:o}}function oN(){var e=fu(),t=_u(),i=t.inClipping;function a(){if(e&&!e.meta.locked){var t=Ry(e);if(t.zIndex=Number(t.zIndex)-1,i){var a=e.attribute.container,n=void 0===a?{posX:0,posY:0}:a,r=e.transform,o=r.posX,s=r.posY;Object.assign(t,{left:o+n.posX,top:s+n.posY})}return t.border="2px solid #00c4cc",t}return{}}return{style:a}}function sN(){var e=fu(),t=gu(),i=_u(),a=i.inMask,n=rN(),o=n.handleMove,s=n.moveOver,l=n.auxiliaryStyle,c=(0,r.useRef)(),d=oN(),u=d.style;return(0,r.useEffect)((()=>{if(e&&!a){var t=e.assetPositionScale,i=t.left,n=t.top;c.current=KC(((t,a,r)=>{(t||a)&&(e.tempData.rt_asset||e.setTempData({rt_inMoving:!0}),o({left:i+t,top:n+a},r),ru(!0))}),(()=>{s(),ru(!1)}))}else{var r;null===(r=c.current)||void 0===r||r.call(c)}}),[null===e||void 0===e?void 0:e.meta]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"hc-asset-edit-move",style:t?{}:u()}),(0,Kg.jsx)(YC,{styles:l})]})}var lN,cN=(0,hp.Pi)(sN),dN=(i(58210),i(87240)),uN=i(7085);function pN(e,t){if(e)return[];var i=lN.resizePointMap,a=lN.pointNodeType,n=i.whole;return Array.isArray(t)&&(n=t),"string"===typeof t&&(i[t]?n=i[t]:console.error(new Error("'".concat(t,"' is an invalid value for the 'resizePoint'.")))),a.filter((e=>n.includes(e.pointType)))}(function(e){e.circleCursorType=["ns-resize","nesw-resize","ew-resize","nwse-resize","pointer"];var t=e.pointCursorMap={left:{cursor:"ew-resize",key:2},right:{cursor:"ew-resize",key:2},top:{cursor:"ns-resize",key:0},bottom:{cursor:"ns-resize",key:0},left_top:{cursor:"nwse-resize",key:3},right_top:{cursor:"nesw-resize",key:1},right_bottom:{cursor:"nwse-resize",key:3},left_bottom:{cursor:"nesw-resize",key:1},lock:{cursor:"pointer",key:4}},i=e.LR=["left","right"],a=e.TB=["top","bottom"],n=e.LOCK=["lock"],r=e.LRTB=[...i,...a],o=e.unLRTB=["left_top","right_top","right_bottom","left_bottom"],s=e.whole=[...r,...o];e.pointNodeType=[...r,...o,...n].map((e=>{var n=t[e].key,r={nodeType:"unLRTB",pointType:e,cursorKey:n,className:"et_".concat(e)};return i.includes(e)?(r.nodeType="LR",r):a.includes(e)?(r.nodeType="TB",r):r})),e.resizePointMap={LRTB:r,unLRTB:o,whole:s}})(lN||(lN={}));var vN=[{start:338,end:23,cursor:0},{start:23,end:68,cursor:1},{start:68,end:113,cursor:2},{start:113,end:158,cursor:3},{start:158,end:203,cursor:4},{start:203,end:248,cursor:5},{start:248,end:293,cursor:6},{start:293,end:338,cursor:7}];function mN(e){for(var t=0;t<vN.length;t++){var i=vN[t];if(e<23||e>=338)return 0;if(e>=i.start&&e<i.end)return i.cursor}return 0}var hN=lN.circleCursorType;lN.unLRTB,lN.whole,lN.TB,lN.LR;function fN(e){return(0,r.useMemo)((()=>mN(e)),[e])}function gN(e){var t=e.rotate,i=e.showRotator,a=e.onMouseDown,n=fN(t);return(0,Kg.jsx)("i",{className:"rt_rotate rt_rotate_".concat(n),onMouseDown:a,children:(0,Kg.jsx)("span",{className:"rt_rotate_shower",style:(0,u.Z)((0,u.Z)({},I(i)),{},{transform:"rotate(".concat(-(null!==t&&void 0!==t?t:0),"deg)")}),children:(0,Kg.jsxs)("span",{className:"rt_rotate_count",children:[null!==t&&void 0!==t?t:0,"\xb0"]})})})}function xN(e){var t=e.pointList,i=e.triggerPointType,a=e.rotate,n=e.onMouseDown,r=e.children,o=e.className,s=void 0===o?"":o,l=fN(a);function c(e){var t=e.className,a=e.pointType,n=e.cursorKey;return"".concat(t," ").concat(i===a?"element-item-show":""," ").concat(hN[(n+l)%4]," ").concat("lock"===a?"pointer":"")}return(0,Kg.jsxs)("div",{className:hb()({[s]:!0,"element-transformer":!0,"element-transformer-hidden":""!==i}),children:[t.map((e=>(0,Kg.jsx)("i",{"editor-aria-label":"lock"===e.pointType?"\u70b9\u51fb\u89e3\u9664\u9501\u5b9a":"",className:c(e),onDragStart:W,onMouseDown:t=>{n(t,e.pointType)}},e.pointType))),r]})}xN.RotatePoint=gN;var yN=xN;class bN{constructor(e){var t=e.rotate,i=e.centerPoint,a=e.onChange,n=e.onChangeEnd;this.onChange=void 0,this.onChangeEnd=void 0,this.rotate=void 0,this.centerPoint=void 0,this.mouseUp=()=>{var e;window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),null===(e=this.onChangeEnd)||void 0===e||e.call(this,{rotate:this.rotate})},this.mouseDown=()=>{window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp)},this.mouseMove=e=>{var t=this.centerPoint.x,i=this.centerPoint.y,a=e.clientX,n=e.clientY,r=Math.abs(t-a),o=Math.abs(i-n),s=Math.sqrt(Math.pow(r,2)+Math.pow(o,2)),l=o/s,c=Math.round(180/(Math.PI/Math.acos(l)));a>t&&n>i&&(c=180-c),a==t&&n>i&&(c=180),a>t&&n==i&&(c=90),a<t&&n>i&&(c=180+c),a<t&&n==i&&(c=270),a<t&&n<i&&(c=360-c),this.rotate=(c+180)%360,this.onChange({rotate:this.rotate})},this.rotate=t,this.centerPoint=i,this.onChange=a,this.onChangeEnd=n}}class _N{constructor(e,t,i,a,n){this.rectPoint=void 0,this.centerPoint=void 0,this.scaleInfo=void 0,this.rectLimit=void 0,this.type=void 0,this.rotate=void 0,this.l2r=0,this.t2b=0,this.lt2rb=0,this.lb2rt=0,this.checkLimit=e=>{var t=this.rectLimit,i=t.maxRect,a=t.minRect,n=e.x,r=e.y;return this.type.includes("right")?(i&&(n=Math.min(n,i.xMax)),a&&(n=Math.max(n,a.xMax))):this.type.includes("left")&&(i&&(n=Math.max(n,i.xMin)),a&&(n=Math.min(n,a.xMin))),this.type.includes("top")?(i&&(r=Math.max(r,i.yMin)),a&&(r=Math.min(r,a.yMin))):this.type.includes("bottom")&&(i&&(r=Math.min(r,i.yMax)),a&&(r=Math.max(r,a.yMax))),{x:n,y:r}},this.updateScaleInfo=()=>{var e=this[this.type](),t=e.scalePoint,i=e.originDistance,a=e.targetKey,n=e.startPoint;this.scaleInfo={scalePoint:t,originDistance:i,targetKey:a,startPoint:n},this.rotate>0&&n&&(this.scaleInfo.startPoint=Tn(n,this.centerPoint,this.rotate))},this.updateCenterPoint=e=>{this.centerPoint=e},this.updateRectPoint=e=>{this.rectPoint=Zn(e);var t=this.rectPoint,i=t.lt,a=t.rt,n=t.rb,r=t.lb;this.l2r=jn(i,a),this.t2b=jn(i,r),this.lt2rb=jn(i,n),this.lb2rt=jn(r,a)},this.calcPoint=(e,t,i,a)=>{var n=jn(t,a),r=n/i;return{scalePoint:e,scaleNumber:{x:r,y:r}}},this.calcBorder=(e,t,i,a,n)=>{var r=jn(t,a),o={x:1,y:1};return o[n]=r/i,{scalePoint:e,scaleNumber:o}},this.left=()=>{var e={x:this.rectPoint.rt.x,y:this.centerPoint.y},t=this.rectPoint.rt;return{scalePoint:t,startPoint:e,originDistance:this.l2r,targetKey:"x"}},this.right=()=>{var e={x:this.rectPoint.lt.x,y:this.centerPoint.y},t=this.rectPoint.lt;return{scalePoint:t,startPoint:e,originDistance:this.l2r,targetKey:"x"}},this.top=()=>{var e={x:this.centerPoint.x,y:this.rectPoint.lb.y},t=this.rectPoint.rb;return{scalePoint:t,startPoint:e,originDistance:this.t2b,targetKey:"y"}},this.bottom=()=>{var e={x:this.centerPoint.x,y:this.rectPoint.lt.y},t=this.rectPoint.lt;return{startPoint:e,scalePoint:t,originDistance:this.t2b,targetKey:"y"}},this.left_top=()=>({startPoint:this.rectPoint.rb,scalePoint:this.rectPoint.rb,originDistance:this.lt2rb}),this.left_bottom=()=>({startPoint:this.rectPoint.rt,scalePoint:this.rectPoint.rt,originDistance:this.lb2rt}),this.right_top=()=>({startPoint:this.rectPoint.lb,scalePoint:this.rectPoint.lb,originDistance:this.lb2rt}),this.right_bottom=()=>({startPoint:this.rectPoint.lt,scalePoint:this.rectPoint.lt,originDistance:this.lt2rb}),this.getScaleInfo=e=>{var t=this.scaleInfo,i=t.scalePoint,a=t.originDistance,n=t.targetKey,r=t.startPoint,o=e;return n?this.calcBorder(i,r,a,o,n):this.calcPoint(i,r,a,o)},this.type=i,this.rotate=a,this.rectLimit=n,this.updateCenterPoint(t),this.updateRectPoint(e),this.updateScaleInfo()}}class jN{constructor(e){var t=e.rotate,i=e.style,a=e.onChange,n=e.onChangeEnd,r=e.type,o=e.rectLimit,s=e.getRect,l=e.rotateCenter,c=e.aspectRatio;this.rotate=void 0,this.style=void 0,this.styleResult=void 0,this.onChange=void 0,this.onChangeEnd=void 0,this.canvasRect=void 0,this.type=void 0,this.aspectRatio=void 0,this.rectLimit=void 0,this.rectPoint=void 0,this.centerPoint=void 0,this.rotateCenter=void 0,this.rectHelper=void 0,this.mouseUp=()=>{var e;window.removeEventListener("mousemove",this.mouseMove),window.removeEventListener("mouseup",this.mouseUp),null===(e=this.onChangeEnd)||void 0===e||e.call(this,this.styleResult)},this.mouseDown=()=>{window.addEventListener("mousemove",this.mouseMove),window.addEventListener("mouseup",this.mouseUp)},this.mouseMove=e=>{var t=this.getMousePositionInCanvas(e),i=this.rectHelper.getScaleInfo(t),a=i.scalePoint,n=i.scaleNumber,r=kn(this.rectPoint,this.rotateCenter,a,n,this.rotate);if(this.rotate>0){var o=_n(r);r=wn(r,o,-this.rotate)}this.styleResult=Cn(r),this.onChange(this.styleResult)},this.rotate=t,this.aspectRatio=c,this.style=(0,u.Z)({},i),this.onChange=a,this.onChangeEnd=n,this.type=r,this.rectLimit=o,this.canvasRect=s();var d=xn(i),p=d.rect,v=d.center;this.rectPoint=p,this.centerPoint=v,this.rotateCenter=l||v,this.rectHelper=new _N(p,this.centerPoint,this.type,this.rotate,o),this.styleResult=(0,u.Z)({},i)}getMousePositionInCanvas(e){var t=this.canvasRect,i=t.left,a=t.top,n=e.clientX,r=e.clientY;return{x:n-i,y:r-a}}}lN.unLRTB;function wN(e,t,i,a){var o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useRef)(null);function u(){if(d.current){var e=d.current.getBoundingClientRect(),t=e.x,i=e.y,a=e.width,n=e.height,r=t+a/2+4,o=i+n/2+4;return{x:r,y:o}}return{x:0,y:0}}function p(t){t.stopPropagation(),c(!0);var n=new bN({rotate:e,centerPoint:u(),onChange:e=>{i("rotate",e),nu(!0)},onChangeEnd:e=>{c(!1),null===a||void 0===a||a("rotate",e),nu(!1)}});n.mouseDown()}return{showRotate:l,onMouseDown:p,transformRef:d}}function kN(e){var t=e.rotate,i=e.style,a=e.getRect,o=e.onChange,s=e.limit,l=e.onChangeEnd,c=e.rotateCenter,d=e.aspectRatio,p=(0,r.useState)(""),v=(0,n.Z)(p,2),m=v[0],h=v[1];function f(e){h(e)}function g(e,n){W(e),f(n);var r=new jN({style:(0,u.Z)({},i),rotate:t,type:n,getRect:a,rectLimit:s,rotateCenter:c,aspectRatio:d,onChange:e=>{o(n,{style:e})},onChangeEnd:e=>{null===l||void 0===l||l(n,{style:e}),h("")}});r.mouseDown(e)}return{onResizePointClick:g,resizePontType:m}}var TN=yN.RotatePoint;function ZN(e){var t=e.className,i=e.style,a=e.rotate,n=void 0===a?0:a,o=e.nodes,s=e.onChange,l=e.onChangeEnd,c=e.onChangeStart,d=e.onClick,p=e.onMouseDown,v=e.getRect,m=e.onDoubleClick,h=e.rotatePoint,f=void 0===h||h,g=e.locked,x=void 0!==g&&g,y=e.minRect,b=e.maxRect,_=e.rotateCenter,j=e.aspectRatio,w=void 0===j||j,k=e.showPoints,T=void 0===k||k,Z=wN(n,i,s,l),C=kN({rotate:n,style:i,getRect:v,onChange:s,limit:{minRect:y,maxRect:b},rotateCenter:_,onChangeEnd:l,aspectRatio:w}),N=C.onResizePointClick,S=C.resizePontType,I=(0,r.useMemo)((()=>pN(!1,o)),[o]),A=(e,t)=>{"lock"!==t?(null===c||void 0===c||c(t),N(e,t)):(e.stopPropagation(),lu())},P=e=>{e.stopPropagation(),null===c||void 0===c||c("rotate"),Z.onMouseDown(e)};return(0,Kg.jsx)("div",{className:hb()("hc-asset-edit-transform",t),style:(0,u.Z)((0,u.Z)({},i),{},{zIndex:void 0,transform:"rotate(".concat(n,"deg)")}),onMouseDown:p,onClick:d,onDoubleClick:m,ref:Z.transformRef,children:(0,Kg.jsx)(yN,{onMouseDown:A,triggerPointType:S,pointList:T?I:[],rotate:n,className:hb()({"element-transformer-locked":x,"element-transformer-hide":Nl.status.hideTransformerBox}),children:T&&f&&!x&&(0,Kg.jsx)(TN,{onMouseDown:P,showRotator:Z.showRotate,rotate:n})})})}var CN=(0,hp.Pi)(ZN);function NN(e){function t(t){su.updateRotate(e,t)}function i(){Kd(e,!1),We("stopRotate",!0)}return{onMoving:t,onStopMove:i}}function SN(e){var t=Mi(),i=t.scale;function a(t,i,a,n){n?su.updateSizeScale(e,{size:t,position:i,originAsset:a}):su.updateSize(e,{size:t,position:i,originAsset:a})}function n(e,t,n){var r=e.width,o=e.height,s=e.left,l=e.top;a({height:o/i,width:r/i},{top:l/i,left:s/i},t,n)}function r(){ti(e)&&e.autoCalcChildrenStyle(),Kd(e,!1),We("stopMove",!0)}function o(){Kd(e,!0)}return{onMoving:n,onStopMove:r,onStartMove:o}}var IN=lN.unLRTB,AN=lN.whole,PN=lN.TB,MN=lN.LR,EN=(0,hp.Pi)((e=>{var t,i,a=e.asset,n=a.attribute,o=a.meta,s=a.assetTransform,l=a.assetPositionScale,c=a.containerSizeScale,d=a.tempData,p=s.rotate,v=void 0===p?0:p,m=fu(),h=NN(a),f=SN(a),g=un(),x=g.scale;function y(){var e=d.rt_style,t={},i={};if(e){var a=e.width,n=e.height,r=e.posX,o=e.posY;t.width=a*x,t.height=n*x,i.left=r*x,i.top=o*x}return(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({},c),l),t),i),{},{opacity:1})}var b=y(),_=(0,r.useRef)(),j=(0,r.useMemo)((()=>{var e=IN;switch(o.type){case"background":case"pic":case"image":case"mask":case"SVG":case"svgPath":e=AN;break;case"text":e="vertical-rl"===(null===n||void 0===n?void 0:n.writingMode)?[...IN,...PN]:[...IN,...MN];break;case"video":case"videoE":case"module":case"__module":e=IN;break}return o.locked&&(e=["lock"]),e}),[o.type,n.writingMode,o.locked]);function w(e,t){var i=t.style,a=t.rotate;if(a){var n=a%90;(n>=87||n<=3)&&(a=90*Math.round(a/90)),h.onMoving(a%360)}if(i&&_.current){var r=lN.unLRTB.includes(e);f.onMoving(i,_.current,r)}}function k(e,t){var i=t.style,n=t.rotate;n&&h.onStopMove(),i&&(f.onStopMove(),a.setTempData({rt_stopAutoCalc:!1}))}function T(e){if("rotate"!==e){var t=lN.unLRTB.includes(e);t&&a.setTempData({rt_stopAutoCalc:!0}),f.onStartMove()}_.current=a.getAssetCloned()}var Z=(0,r.useMemo)((()=>{var e=12;return e=b.width>b.height?.6*b.height:.6*b.width,e>60&&(e=60),e<12&&(e=12),Math.round(e)}),[b.width,b.height]);return a.tempData.rt_loading?(0,Kg.jsx)("div",{className:"hc-asset-edit-loading",style:b,children:(0,Kg.jsx)(dN.Z,{spinning:!0,size:"large",indicator:(0,Kg.jsx)(uN.Z,{style:{fontSize:Z,color:"#fff"},spin:!0}),children:(0,Kg.jsx)("div",{style:{width:b.width,height:b.height}})})}):(0,Kg.jsx)(CN,{nodes:j,style:b,rotate:null!==(t=null===(i=d.rt_style)||void 0===i?void 0:i.rotate)&&void 0!==t?t:v,getRect:B,locked:o.locked,onChange:w,showPoints:!m,onChangeEnd:k,onChangeStart:T})}));function LN(){var e=gu(),t=_u(),i=t.inMask,a=t.inAniPath,n=e&&!e.tempData.rt_hideInCanvas&&!i&&!e.attribute.rt_previewAeA&&-1===a&&!Jt(e);return e&&ii(e)&&(n=!(null===e||void 0===e||!e.assets.length)),(0,Kg.jsx)(Kg.Fragment,{children:n&&(0,Kg.jsx)(EN,{asset:e})})}var DN=(0,hp.Pi)(LN);function RN(e){return e.replace(" ","&nbsp;"),Ex.EditorState.createWithContent(Ex.ContentState.createFromText(e))}function zN(e,t,i){for(var a=0,n=t/e,r=1;r<=n+1;r++)if(e*r+(r-1)*i>t){a=r-1;break}return a}function FN(e,t,i){var a=t/e/i*10;return a}function ON(e){if(e){var t=e.attribute,i=t.height,a=t.lineHeight,n=void 0===a?1:a,r=t.letterSpacing,o=void 0===r?1:r,s=t.width,l=FN(12,i,n),c=zN(12,s,o);return l*c}return 0}var BN=e=>{var t=e.textEditAsset,i=e.currentText,a=e.onChange,o=null===t||void 0===t?void 0:t.attribute,s=o.width,l=o.height,c=o.fontSize,d=o.letterSpacing,p=Lx(t),v=(0,r.useRef)(null),m=(0,r.useState)(c),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=Math.floor(l);function y(){var e;if(v.current)if((null===(e=v.current)||void 0===e?void 0:e.offsetHeight)>x)for(var t=c;t>=12;t--){var i;if(g(Math.ceil(t)),(null===(i=v.current)||void 0===i?void 0:i.offsetHeight)<=x){a(Math.floor(t));break}}else for(var n=c;n<=600;n++){var r,o;if(g(Math.ceil(n)),(null===(r=v.current)||void 0===r?void 0:r.offsetHeight)>x){a(Math.floor(n-1));break}if((null===(o=v.current)||void 0===o?void 0:o.offsetHeight)==x){a(Math.floor(n));break}}}return(0,r.useEffect)((()=>{i&&v.current&&setTimeout((()=>{var e;(null===(e=v.current)||void 0===e?void 0:e.offsetHeight)!==x&&y()}),0)}),[i]),(0,r.useEffect)((()=>{c&&g(c)}),[c]),(0,Kg.jsx)("div",{ref:v,style:(0,u.Z)((0,u.Z)({},p),{},{position:"absolute",left:0,top:500,background:"red",width:s,fontSize:f,letterSpacing:d,wordBreak:"break-all",writingMode:"horizontal-tb"}),className:"hc-unVisibility",dangerouslySetInnerHTML:{__html:i}})},WN=BN,VN=(0,r.forwardRef)(((e,t)=>{var i=e.text,a=e.setText,n=(0,r.useRef)(null);function o(){var e=Ex.EditorState.moveSelectionToEnd(i),t=e.getSelection(),n=i.getSelection(),r=t.getStartKey(),o=t.getStartOffset(),s=n.getAnchorKey(),l=n.getAnchorOffset(),c=t.merge({focusKey:r,focusOffset:o,anchorKey:s,anchorOffset:l});a(Ex.EditorState.forceSelection(e,c))}function s(){var e,t;return n.current?{height:(null===(e=n.current.editorContainer)||void 0===e?void 0:e.offsetHeight)||0,width:(null===(t=n.current.editorContainer)||void 0===t?void 0:t.offsetWidth)||0}:-1}(0,r.useImperativeHandle)(t,(()=>({getEditorSize:s})),[]),(0,r.useLayoutEffect)((()=>{var e;null===n||void 0===n||null===(e=n.current)||void 0===e||e.focus(),o()}),[]);var l={CODE:{lineHeight:1.3}};return(0,Kg.jsx)(Ex.Editor,{ref:n,customStyleMap:l,editorState:i,onChange:a,stripPastedStyles:!0})}));function UN(){var e,t=uu(),i=t.inAniPath,a=t.changStatue,o=bu(),s=(0,r.useRef)(null),l=un(),c=l.scale,d=(0,r.useState)(null),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=(0,r.useState)(),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useRef)(null),b=(0,r.useState)(""),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=(0,r.useState)(""),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=(0,r.useRef)(ON(o)||0);function S(e){Ud(o,{attribute:{fontSize:e}}),null===o||void 0===o||o.setRtRelativeByParent()}function I(){if(y.current&&g){var e,t,i,a,n=g.attribute,r=g.fontSizeScale,o=y.current.getEditorSize(),s=o.width,l=o.height;if(l*=r,s*=r,l=Math.ceil(l),"vertical-rl"===n.writingMode){if(s!==n.width)if(Ud(g,Ft({width:s})),null!==g&&void 0!==g&&null!==(e=g.attribute)&&void 0!==e&&null!==(t=e.stayEffect)&&void 0!==t&&t.graph){var c,d,p,v,m,h=null===g||void 0===g||null===(c=g.attribute)||void 0===c||null===(d=c.stayEffect)||void 0===d?void 0:d.graph.toBounds[0];h.width=s,Ud(g,Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===g||void 0===g||null===(p=g.attribute)||void 0===p?void 0:p.stayEffect),{},{graph:(0,u.Z)((0,u.Z)({},null===g||void 0===g||null===(v=g.attribute)||void 0===v||null===(m=v.stayEffect)||void 0===m?void 0:m.graph),{},{toBounds:[h]})})}))}}else if(l!==n.height)if(Ud(g,Ft({height:l})),null!==g&&void 0!==g&&null!==(i=g.attribute)&&void 0!==i&&null!==(a=i.stayEffect)&&void 0!==a&&a.graph){var f,x,b,_,j,w=null===g||void 0===g||null===(f=g.attribute)||void 0===f||null===(x=f.stayEffect)||void 0===x?void 0:x.graph.toBounds[0];w.height=l,Ud(g,Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===g||void 0===g||null===(b=g.attribute)||void 0===b?void 0:b.stayEffect),{},{graph:(0,u.Z)((0,u.Z)({},null===g||void 0===g||null===(_=g.attribute)||void 0===_||null===(j=_.stayEffect)||void 0===j?void 0:j.graph),{},{toBounds:[w]})})}))}}}function A(e){if(o){m(e);var t=zx(e),i="string"!==typeof t?null===t||void 0===t?void 0:t.join(""):t,a="string"!==typeof t?null===t||void 0===t?void 0:t.join("<br/>"):t;null!==o&&void 0!==o&&o.parent?i.length<N.current&&j!==a&&setTimeout((()=>{w(a),C(a)})):setTimeout((()=>{I()}))}}(0,r.useEffect)((()=>{if(o){x(o);var e=Rx(o.attribute.text)||"";m(RN(e));var t="string"!==typeof e?null===e||void 0===e?void 0:e.join("<br/>"):e;j&&t===j||w(t)}else if(v&&g){var n=zx(v);""!==n.toString()?Ud(g,{attribute:{text:n}}):Fu(g.meta.id),We("updateText",!0),m(null),x(void 0)}if(N.current=ON(o),null!==o&&void 0!==o&&o.parent)return()=>{o.setRtRelativeByParent(),C("")};i&&a(-1)}),[o]),(0,r.useLayoutEffect)((()=>{!o||null!==o&&void 0!==o&&o.parent||I()}),[null===o||void 0===o?void 0:o.attribute.writingMode,null===o||void 0===o?void 0:o.attribute.fontFamily,null===o||void 0===o?void 0:o.attribute.lineHeight,null===o||void 0===o?void 0:o.attribute.letterSpacing,null===o||void 0===o?void 0:o.attribute.fontSize]);var P=Lx(o),M=()=>{if(o){var e=o.fontSizeScale,t=o.containerSize,i=t.width,a=t.height;return{width:i/e,height:a/e,transform:"scale(".concat(e,")"),transformOrigin:"0 0",left:0,top:0,position:"absolute"}}return{}},E=()=>{if(o){var e=o.assetAbsolutePositionScale;return{transform:"rotate(".concat((null===e||void 0===e?void 0:e.rotate)||0,"deg)"),width:"100%",height:"100%"}}},L=(0,r.useMemo)((()=>{var e;if(null!==o&&void 0!==o&&o.parent)return{display:"flex",alignItems:"center",justifyContent:null===o||void 0===o||null===(e=o.attribute)||void 0===e?void 0:e.textAlign}}),[null===o||void 0===o?void 0:o.parent,null===o||void 0===o||null===(e=o.attribute)||void 0===e?void 0:e.textAlign]),D=(0,r.useMemo)((()=>{if(o){var e=o.assetAbsolutePositionScale,t=o.containerSize;return(0,u.Z)((0,u.Z)((0,u.Z)({},e),t),{},{transformOrigin:"0 0 0",transform:"scale(".concat(c,")"),position:"absolute"})}return{}}),[null===o||void 0===o?void 0:o.containerSize,null===o||void 0===o?void 0:o.assetAbsolutePositionScale]);return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:"hc-asset-text-editor",style:D,onMouseDown:W,onClick:W,onKeyDown:W,onKeyUp:W,onKeyPress:W,onPaste:W,children:(0,Kg.jsxs)("div",{style:E(),children:[(0,Kg.jsx)("div",{style:M(),children:(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)({zIndex:void 0},P),L),{},{width:"100%",height:"100%"}),ref:s,children:v&&(0,Kg.jsx)(VN,{ref:y,setText:A,text:v})})}),o&&Z&&(null===o||void 0===o?void 0:o.parent)&&(0,Kg.jsx)(WN,{textEditAsset:o,currentText:j,onChange:S},j)]})})})}var GN=(0,hp.Pi)(UN);function XN(){var e=wu();return(0,r.useMemo)((()=>e.map((e=>(0,u.Z)((0,u.Z)({},Ry(e)),{},{animation:"breathe ".concat(v_.delay,"ms 1 cubic-bezier(0.000, 1.000, 1.000, 0.000)")})))),[e])}function qN(){var e=XN();return(0,Kg.jsx)("div",{className:"hc-asset-highlight hc-maxIndex-box",children:e.map(((e,t)=>(0,Kg.jsx)("div",{style:e},"".concat(t,"-").concat(Date.now()))))})}var HN=(0,hp.Pi)(qN);function YN(){var e=Au(),t=fu(),i=gu();return t||i&&i.tempData.rt_inTransforming?[]:e.map((e=>Ry(e)))}function KN(){var e=YN();return(0,Kg.jsx)("div",{className:"hc-asset-multiSelect hc-maxIndex-box",children:e.map(((e,t)=>(0,Kg.jsx)("div",{style:e},"".concat(t,"-").concat(Date.now()))))})}var QN=(0,hp.Pi)(KN);function JN(){var e=Pu(),t=fu(),i=null===e||void 0===e?void 0:e.parent;return t||!e||null!==i&&void 0!==i&&i.tempData.rt_inTransforming?{display:"none"}:Ry(e)}function $N(){var e=JN();return(0,Kg.jsx)("div",{className:"hc-asset-multiSelect hc-maxIndex-box",children:(0,Kg.jsx)("div",{style:e})})}var eS=(0,hp.Pi)($N);function tS(e,t){return{xMin:e.width-t.width,xMax:0,yMin:e.height-t.height,yMax:0}}function iS(e,t){var i=(0,u.Z)({},e);return i.x>t.xMax&&(i.x=t.xMax),i.y>t.yMax&&(i.y=t.yMax),i.x<t.xMin&&(i.x=t.xMin),i.y<t.yMin&&(i.y=t.yMin),i}function aS(e,t){var i,a=e.transform,n=a.posX,r=a.posY,o=a.rotate,s=void 0===o?0:o,l=s%360>0;l&&(i=fn((0,u.Z)((0,u.Z)({},e.assetSize),e.assetPosition)));var c=t.transform,d=c.posX,p=c.posY,v=c.rotate,m=void 0===v?0:v,h={posX:d+n,posY:p+r,rotate:m+s};if(i){var f=fn((0,u.Z)((0,u.Z)({},t.containerSize),{},{left:h.posX,top:h.posY})),g=Tn(f,i,s),x=mn(t.containerSize,g);Object.assign(h,{posX:x.x,posY:x.y})}return h}function nS(e,t,i){var a=hn(t),n=hn(e),r=t.width/t.height;if("top"===i)return{yMin:n.yMin};if("right"===i)return{xMax:n.xMax};if("bottom"===i)return{yMax:n.yMax};if("left"===i)return{xMin:n.xMin};if("left_top"===i){var o=n.xMin-a.xMin,s=(n.yMin-a.yMin)*r;return o<s?{xMin:n.xMin}:{yMin:n.yMin}}if("right_top"===i){var l=a.xMax-n.xMax,c=(n.yMin-a.yMin)*r;return l<c?{xMax:n.xMax}:{yMin:n.yMin}}if("right_bottom"===i){var d=a.xMax-n.xMax,u=(a.yMax-n.yMax)*r;return d<u?{xMax:n.xMax}:{yMax:n.yMax}}if("left_bottom"===i){var p=n.xMin-a.xMin,v=(a.yMax-n.yMax)*r;return p<v?{xMin:n.xMin}:{yMax:n.yMax}}return{}}function rS(e,t,i){var a=hn(t),n=hn(e),r=t.width/t.height;if("top"===i)return{yMin:n.yMin};if("right"===i)return{xMax:n.xMax};if("bottom"===i)return{yMax:n.yMax};if("left"===i)return{xMin:n.xMin};if("left_top"===i){var o=a.xMin-n.xMin,s=(a.yMin-n.yMin)*r;return o<s?{xMin:n.xMin}:{yMin:n.yMin}}if("right_top"===i){var l=n.xMax-a.xMax,c=(a.yMin-n.yMin)*r;return l<c?{xMax:n.xMax}:{yMin:n.yMin}}if("right_bottom"===i){var d=n.xMax-a.xMax,u=(n.yMax-a.yMax)*r;return d<u?{xMax:n.xMax}:{yMax:n.yMax}}if("left_bottom"===i){var p=a.xMin-n.xMin,v=(n.yMax-a.yMax)*r;return p<v?{xMin:n.xMin}:{yMax:n.yMax}}return{}}function oS(e,t,i,a){var n=lN.unLRTB.includes(i),r=hn(t),o=hn(e);if(void 0!==a.yMax&&r.yMax>a.yMax){var s,l,c=o.yMax-r.yMin;if(n){var d=t.width/t.height;s=c*d}else s=r.xMax-r.xMin;l=i.includes("left")?o.xMax-r.xMax:o.xMax-(r.xMin+s);var p=e.width-l-s,v={left:o.xMin+p,top:r.yMin};return(0,u.Z)((0,u.Z)({},v),{},{width:s,height:c})}if(void 0!==a.yMin&&r.yMin<a.yMin){var m,h,f=r.yMax-o.yMin;if(n){var g=t.width/t.height;m=f*g}else m=r.xMax-r.xMin;h=i.includes("left")?o.xMax-r.xMax:o.xMax-(r.xMin+m);var x=e.width-h-m,y={left:o.xMin+x,top:o.yMin};return(0,u.Z)((0,u.Z)({},y),{},{width:m,height:f})}if(void 0!==a.xMax&&r.xMax>a.xMax){var b,_,j=o.xMax-r.xMin;if(n){var w=t.height/t.width;b=j*w}else b=r.yMax-r.yMin;_=i.includes("top")?o.yMax-r.yMax:o.yMax-(r.yMin+b);var k=e.height-_-b,T={left:r.xMin,top:o.yMin+k};return(0,u.Z)((0,u.Z)({},T),{},{width:j,height:b})}if(void 0!==a.xMin&&r.xMin<a.xMin){var Z,C,N=r.xMax-o.xMin;if(n){var S=t.height/t.width;Z=N*S}else Z=r.yMax-r.yMin;C=i.includes("top")?o.yMax-r.yMax:o.yMax-(r.yMin+Z);var I=e.height-C-Z,A={left:o.xMin,top:o.yMin+I};return(0,u.Z)((0,u.Z)({},A),{},{width:N,height:Z})}return t}function sS(e,t,i,a){var n=lN.unLRTB.includes(i),r=hn(t),o=hn(e);if(a.yMax&&r.yMax<a.yMax){var s,l,c=o.yMax-r.yMin;if(n){var d=t.width/t.height;s=c*d}else s=r.xMax-r.xMin;if(i.includes("left")){var p=r.xMax-o.xMax;l=s-p-e.width}else l=o.xMin-r.xMin;var v={left:o.xMin-l,top:r.yMin};return(0,u.Z)((0,u.Z)({},v),{},{width:s,height:c})}if(a.yMin&&r.yMin>a.yMin){var m,h,f=r.yMax-o.yMin;if(n){var g=t.width/t.height;m=f*g}else m=r.xMax-r.xMin;if(i.includes("left")){var x=r.xMax-o.xMax;h=m-x-e.width}else h=o.xMin-r.xMin;var y={left:o.xMin-h,top:o.yMin};return(0,u.Z)((0,u.Z)({},y),{},{width:m,height:f})}if(a.xMax&&r.xMax<a.xMax){var b,_,j=o.xMax-r.xMin;if(n){var w=t.height/t.width;b=j*w}else b=r.xMax-r.xMin;if(i.includes("top")){var k=r.yMax-o.yMax;_=b-k-e.height}else _=o.yMin-r.yMin;var T={left:r.xMin,top:o.yMin-_};return(0,u.Z)((0,u.Z)({},T),{},{width:j,height:b})}if(a.xMin&&r.xMin>a.xMin){var Z,C,N=r.xMax-o.xMin;if(n){var S=t.height/t.width;Z=N*S}else Z=r.yMax-r.yMin;if(i.includes("top")){var I=r.yMax-o.yMax;C=Z-I-e.height}else C=o.yMin-r.yMin;var A={left:o.xMin,top:o.yMin-C};return(0,u.Z)((0,u.Z)({},A),{},{width:N,height:Z})}return t}function lS(e){var t=un(),i=t.scale,a=(0,r.useRef)(null),o=(0,r.useRef)(null),s=e.attribute,l=e.meta,c=(0,r.useState)({viewBoxWidth:0,viewBoxHeight:0}),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,r.useState)({scaleX:-1,scaleY:-1}),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=s.rt_svgString,x=void 0===g?"":g,y=s.width,b=s.height,_=s.source_key,j=(0,r.useState)(""),w=(0,n.Z)(j,2),k=w[0],T=w[1];function Z(e){a.current&&(a.current.innerHTML="",a.current.appendChild(e))}function N(e,t){var i=o.current;if(null!==i&&void 0!==i&&i.svgNode&&0!==u.viewBoxWidth){var a=null===i||void 0===i?void 0:i.getImgAndClipPathNode(),n=a.clipPathNodes;n&&(null===i||void 0===i||i.batchSetAttributes(n[0],{transform:"scale(".concat(e,",").concat(t,")"),transformOrigin:"left top"}))}}function S(e){var t=o.current;null===t||void 0===t||t.batchSetAttributes(t.svgNode,{preserveAspectRatio:"none",style:"opacity:".concat(e?1:0,";position:absolute;")})}function I(e){var t,i=new Xg(e,"".concat(l.id).concat(s.resId));o.current=i,i.svgNode&&Z(i.svgNode),p(null===i||void 0===i?void 0:i.getViewBoxSize());var a=null===i||void 0===i?void 0:i.getViewBoxSize(),n=a.viewBoxWidth,r=a.viewBoxHeight;f({scaleX:y/n,scaleY:b/r}),S(!1),T(null===(t=o.current)||void 0===t?void 0:t.getClipPathId())}function A(){var e=new C("");e.getData(_,void 0,_).then((e=>{0!==(null===e||void 0===e?void 0:e.stat)&&null!==e&&void 0!==e&&e.msg&&I(null===e||void 0===e?void 0:e.msg),console.error("SVG asset failed to load\uff0cURL:".concat(_))}))}return(0,r.useEffect)((()=>{x&&"loading"!==x?I(x):A()}),[x,_]),(0,r.useEffect)((()=>{if(o.current){S(!1);var e=y/u.viewBoxWidth,t=b/u.viewBoxHeight;N(e*i,t*i)}else S(!0),N(1,1)}),[y,b,u]),{vSize:u,vScale:h,MaskContainer:a,clipPath:k}}function cS(e){var t=e.assets,i=void 0===t?[]:t,a=e.attribute,n=e.transform,o=a.width,s=a.height,l=n.posX,c=n.posY,d=n.rotate,u=void 0===d?0:d,p=un(),v=p.scale,m=lS(e),h=m.vSize,f=m.vScale,g=m.MaskContainer,x=m.clipPath,y=(0,r.useMemo)((()=>{var e,t,a;if(i.length>0){var n="";switch(null===(e=i[0])||void 0===e?void 0:e.meta.type){case"pic":var r;n=(null===(r=i[0])||void 0===r?void 0:r.attribute.picUrl)||"";break;case"image":var o;n=(null===(o=i[0])||void 0===o?void 0:o.attribute.picUrl)||"";break;case"video":n=(null===(t=i[0])||void 0===t?void 0:t.attribute.rt_preview_url)||"";break;case"videoE":n=(null===(a=i[0])||void 0===a?void 0:a.attribute.rt_preview_url)||"";break}return n}}),[i[0].transform.posX,i[0].transform.posY,i[0].attribute.width,i[0].attribute.height]),b=(0,Ju.Z)((()=>({width:o*v,height:s*v,transform:"rotate(".concat(u,"deg)"),position:"absolute",left:"".concat(l*v,"px"),top:"".concat(c*v,"px"),visibility:"visible"})),[o,s,l,c,u,v]),_=(0,Ju.Z)((()=>({width:o*v,height:s*v,position:"absolute",left:0,top:0})),[o,s,v]),j=(0,Ju.Z)((()=>{var e=i[0].attribute;return{width:e.width*v,height:e.height*v,position:"absolute",left:0,top:0}}),[i[0].transform.posX,i[0].transform.posY,i[0].attribute.width,i[0].attribute.height,f,v]),w=(0,Ju.Z)((()=>{var e=i[0],t=e.attribute,a=e.transform;return{left:a.posX*v,top:a.posY*v,width:t.width*v,height:t.height*v,position:"absolute",transform:"rotate(".concat(u,"deg)")}}),[i[0].transform.posX,i[0].transform.posY,i[0].attribute.width,i[0].attribute.height,f,v,u]),k=(0,Ju.Z)((()=>{var e=i[0],t=e.attribute,a=e.transform;return{left:a.posX*v-l*v,top:a.posY*v-c*v,width:t.width*v,height:t.height*v,position:"absolute"}}),[i[0].transform.posX,i[0].transform.posY,i[0].attribute.width,i[0].attribute.height,f,v]);return{ScaleStyleTransform:_,ScaleStyleTransformOrigin:j,maskPanelStyle:b,originStyle:w,originStylePic:k,originImageSrc:y,vSize:h,vScale:f,MaskContainer:g,clipPath:x}}var dS=lN.unLRTB,uS=lN.whole,pS=(lN.TB,lN.LR,e=>{var t=e.scaleStatus,i=e.maskAsset,a=e.childAsset,n=e.maskType,o=e.getRect,s=e.childPosition,l=e.childPositionCache,c=e.onChangeStart,d=e.onChangeEnd,p=e.minRect,v=e.maxRect,m=un(),h=m.scale,f="origin"===n?a:i,g=f.meta,x=(f.transform,i.assetPosition,i.assetSize),y=a.assetPosition,b=a.assetSize,_=i.transform.rotate,j=Ry(f),w=(0,r.useRef)({}),k=(0,r.useRef)({});function T(e,t){var r=t.style;if(r){var o={x:r.left,y:r.top},s={width:r.width/h,height:r.height/h};if("origin"===n){if(ui(i)){var c=fn(r),d=gn(i),p=Tn({x:r.left,y:r.top},c,_);o=Tn(p,d,-_)}var v={top:o.y/h,left:o.x/h},m=sS((0,u.Z)((0,u.Z)({},i.assetSize),i.assetPosition),(0,u.Z)((0,u.Z)({},s),v),e,k.current);a.update({attribute:{width:m.width,height:m.height},transform:{posX:Math.min(0,m.left-i.transform.posX),posY:Math.min(0,m.top-i.transform.posY)}},!1)}else{var f={x:l.left,y:l.top};if(ui(i)){var g=fn((0,u.Z)((0,u.Z)({},a.assetSizeScale),l)),x=fn(r),y=Tn(f,g,_);f=Tn(y,x,-_)}var b={top:f.y/h,left:f.x/h};console.log("\u5bb9\u5668======",(0,u.Z)((0,u.Z)({},a.assetSize),b));var j=oS((0,u.Z)((0,u.Z)({},a.assetSize),b),(0,u.Z)({top:o.y/h,left:o.x/h},s),e,w.current);i.update({attribute:{width:j.width,height:j.height},transform:{posY:j.top,posX:j.left}},!1),a.update({transform:{posY:Math.min(0,b.top-j.top),posX:Math.min(0,b.left-j.left)}})}}}function Z(){We("stopMove",!0),d(),k.current={},w.current={},setTimeout((()=>{a.setRtRelativeByParent()}),5)}function C(e){c();var t={top:s.top/h,left:s.left/h};if("origin"===n)k.current=nS((0,u.Z)((0,u.Z)({},i.assetSize),i.assetPosition),(0,u.Z)((0,u.Z)({},a.assetSize),t),e);else{var r=rS((0,u.Z)((0,u.Z)({},a.assetSize),t),(0,u.Z)((0,u.Z)({},i.assetSize),i.assetPosition),e);console.log("max====",r,(0,u.Z)((0,u.Z)({},a.assetSize),t)),w.current=r}}"origin"===n&&(j.top=s.top,j.left=s.left);var N=(0,r.useMemo)((()=>{if(t.preview)return{left_top:!0,left_bottom:!0,right_top:!0,right_bottom:!0};if(t&&"origin"===n){var e=6,i=Math.ceil(y.left),a=Math.ceil(y.top),r=a+b.height,o=i+b.width;return{left_top:0===i&&0===y.top,left_bottom:0===i&&r<=x.height+e,right_top:0===a&&o<x.width+e,right_bottom:o<x.width+e&&r<=x.height+e}}return{left_top:!1,left_bottom:!1,right_top:!1,right_bottom:!1}}),[y,b,x,t.preview]);return(0,Kg.jsx)(CN,{className:hb()({"corner-point":"preview"===n,"no-left-top-resize-point":null===N||void 0===N?void 0:N.left_top,"no-left-bottom-resize-point":null===N||void 0===N?void 0:N.left_bottom,"no-right-top-resize-point":null===N||void 0===N?void 0:N.right_top,"no-right-bottom-resize-point":null===N||void 0===N?void 0:N.right_bottom}),aspectRatio:!i.meta.isClip,nodes:"preview"===n&&i.meta.isClip?uS:dS,style:j,rotate:_,getRect:o,rotatePoint:!1,locked:g.locked,onChange:T,minRect:p,maxRect:v,onChangeEnd:Z,onChangeStart:C})}),vS=pS,mS=e=>{var t=e.style,i=e.src,a=e.asset,n=a.assets,r="";if(n){var o=n[0].transform;r="scaleX(".concat(o.horizontalFlip?-1:1,") scaleY(").concat(o.verticalFlip?-1:1,")")}return t?(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)({},t),{},{transform:r}),children:(0,Kg.jsx)(Cy,{draggable:!1,src:i,alt:"\u88c1\u526a"})}):(0,Kg.jsx)(Cy,{draggable:!1,src:i,style:{transform:r},alt:"\u88c1\u526a"})};mS.defaultProps={style:void 0};var hS=(0,hp.Pi)((e=>{var t=un(),i=t.scale,a=e.editAsset,o=a.assets[0],s=cS(a),l=s.MaskContainer,c=s.originImageSrc,d=s.clipPath,p=Ry(a),v=Ry(a.assets[0]),m=(0,r.useState)({left:0,top:0}),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=(0,r.useState)({origin:!1,preview:!1}),y=(0,n.Z)(x,2),b=y[0],_=y[1];function j(){var e=aS(a,o),t=e.posY,n=e.posX;return{left:n*i,top:t*i}}function w(){g(j())}var k=j();function T(e){e.stopPropagation();var t=o.assetPositionScale,n=t.left,r=t.top,s=tS(p,v),l={x:n,y:r},c=a.transform.rotate,d=gn(o);ui(a)&&(l=Tn(l,d,c)),KC(((e,t)=>{var n={x:l.x+e,y:l.y+t};ui(a)&&(n=Tn(n,d,-c));var r=iS(n,s);o.update({transform:{posY:r.y/i,posX:r.x/i}})}),(()=>{o.setRtRelativeByParent(),w()}))}function Z(e){w(),_((0,u.Z)((0,u.Z)({},b),{},{[e]:!1}))}function C(e){_((0,u.Z)((0,u.Z)({},b),{},{[e]:!0}))}return(0,r.useEffect)((()=>(w(),o.setRtRelativeByParent(),()=>{o.setRtRelativeByParent()})),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{ref:l,style:{width:"100%",height:"100%",position:"absolute",left:0,top:0,zIndex:-1e9}}),d&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"hc-asset-mask-clipper",children:[(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)({},p),{},{position:"relative",zIndex:3,overflow:"hidden"}),children:(0,Kg.jsx)("div",{className:"hc-AIC-preview-image",style:{clipPath:"url(#".concat(d)},onMouseDown:T,children:(0,Kg.jsx)(mS,{asset:a,src:c,style:(0,u.Z)((0,u.Z)({},v),{},{position:"absolute"})})})}),(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)((0,u.Z)({},v),k),{},{zIndex:2,position:"absolute",transform:p.transform,cursor:"move"}),onMouseDown:T,children:(0,Kg.jsx)("div",{className:"hc-AIC-origin-image",style:{zIndex:1},children:(0,Kg.jsx)(mS,{src:c,asset:a})})})]}),(0,Kg.jsx)(vS,{scaleStatus:b,childAsset:a.assets[0],maskAsset:a,maskType:"origin",onChangeStart:()=>C("origin"),onChangeEnd:()=>Z("origin"),childPositionCache:f,childPosition:k,getRect:B}),(0,Kg.jsx)(vS,{scaleStatus:b,childAsset:a.assets[0],maskAsset:a,maskType:"preview",onChangeStart:()=>C("preview"),onChangeEnd:()=>Z("preview"),childPositionCache:f,childPosition:k,getRect:B})]})]})}));function fS(){var e=gu(),t=_u(),i=t.inMask;return"mask"===(null===e||void 0===e?void 0:e.meta.type)&&i&&e.assets[0]?(0,Kg.jsx)(hS,{editAsset:e}):(0,Kg.jsx)(Kg.Fragment,{})}var gS=(0,hp.Pi)(fS),xS=e=>{var t=un(),i=t.scale,a=e.camera,n=a.width,o=a.height,s=a.posX,l=a.posY,c=a.scale,d=(0,r.useMemo)((()=>({width:n*i,height:o*i,left:s*i,top:l*i})),[n,o,s,l,i]),u=(0,r.useMemo)((()=>({width:n*i*c,height:o*i*c,left:s*i,top:l*i,transform:"scale(".concat(1/c,")"),transformOrigin:"left top"})),[n,o,s,l,i]);return{style:d,styleScale:u}},yS=e=>{var t=Tu(),i=t.cameras,a=Ii(),n=a.currentTime,o=a.playStatus,s=xS(e),l=s.style,c=s.styleScale,d=yu(),u=(0,r.useMemo)((()=>{var t=!1;if(1!==o){var a=i.findIndex((t=>t.id===e.id));if(d){var r=i.findIndex((e=>e.id===d.id));a===r+1&&(t=!0)}else if(-1!==a){var s;(n>=e.camera.startTime&&i[a+1]&&n<=i[a+1].camera.startTime||n<=e.camera.startTime&&n>=(null===(s=i[a-1])||void 0===s?void 0:s.camera.endTime)||n<=e.camera.endTime&&n>=e.camera.startTime)&&(t=!0)}}return t}),[n,o,d]);return{isTimeChoosed:u,style:l,styleScale:c}};function bS(e){var t=Mi(),i=t.scale,a=t.width,n=t.height,o=(0,r.useRef)({});function s(t,i,r,s){if(r){var l=oS({width:a,height:n,left:0,top:0},{width:t.width,height:t.height,left:i.left,top:i.top},s,o.current),c=a/l.width;if(c>11.6)return;e.update((0,u.Z)((0,u.Z)({},e.camera),{},{width:l.width,height:l.height,posX:l.left,posY:l.top,scale:c}))}}function l(e,t,a){var n=e.width,r=e.height,o=e.left,l=e.top;s({height:r/i,width:n/i},{top:l/i,left:o/i},t,a)}function c(e){We("changeCameraTransform",!0),o.current={}}function d(t){var i=rS({width:a,height:n,left:0,top:0},{width:e.camera.width,height:e.camera.height,left:e.camera.posX,top:e.camera.posY},t);o.current=i}return{onUpdater:l,onStop:c,onStart:d}}var _S=e=>{var t=e.data,i=e.index,a=e.template,n=yu(),o=yS(t),s=o.style,l=o.styleScale,c=o.isTimeChoosed,d=un(),p=d.scale,v=d.width,m=d.height,h=Su(),f=(0,r.useRef)(),g=(e,t,i,a)=>(e<0&&(e=0),t<0&&(t=0),e+i>v&&(e=v-i),t+a>m&&(t=m-a),{left:e,top:t}),x=e=>{e.stopPropagation(),iu.setEditCamera(t),f.current=t.getCameraCloned(),V(e,((e,i)=>{if(f.current){var a=f.current,n=a.posX,r=a.posY,o=g(n+e/p,r+i/p,t.camera.width,t.camera.height);t.update((0,u.Z)((0,u.Z)({},t.camera),{},{posX:o.left,posY:o.top}))}}),(()=>{}))},y=()=>{var e=i,n=0,r=h.findIndex((e=>e.id===a.id));h.forEach(((e,t)=>{t<r&&(n+=e.cameras.length)})),e+=n;var o={right:20/t.camera.scale,top:20/t.camera.scale};return 0===e?(0,Kg.jsx)("div",{className:"camera-item-title",style:o,children:"\u9ed8\u8ba4\u955c\u5934"}):(0,Kg.jsxs)("div",{className:"camera-item-title",style:o,children:["\u955c\u5934",e," "]})};return(0,Kg.jsxs)("div",{className:hb()("hc-core-camera-item",{"hc-core-camera-item-current":c,"hc-core-camera-item-choosed":(null===n||void 0===n?void 0:n.id)===t.id}),style:s,onMouseDown:x,children:[(0,Kg.jsx)(y,{}),(0,Kg.jsxs)("div",{style:l,children:[(0,Kg.jsx)("div",{className:"hc-camera-item-r-t"}),(0,Kg.jsx)("div",{className:"hc-camera-item-l-t"}),(0,Kg.jsx)("div",{className:"hc-camera-item-r-b"}),(0,Kg.jsx)("div",{className:"hc-camera-item-l-b"})]})]})},jS=(0,hp.Pi)(_S),wS=lN.unLRTB,kS=(0,hp.Pi)((e=>{var t=e.currentCamera,i=xS(t),a=i.style,n=bS(t),o=n.onUpdater,s=n.onStart,l=n.onStop,c=wS,d=(0,r.useRef)();function u(e,t){var i=t.style;if(i&&d.current){var a=lN.unLRTB.includes(e);o(i,a,e)}}function p(e){l(e),d.current=t.getCameraCloned()}function v(e){t&&(d.current=t.getCameraCloned()),s(e)}return(0,Kg.jsx)(CN,{nodes:c,style:a,rotate:0,getRect:B,locked:!1,onChange:u,showPoints:!0,rotatePoint:!1,onChangeEnd:p,onChangeStart:v,className:"camera-transform"})})),TS=((0,hp.Pi)((()=>{var e=un(),t=e.scale,i=yu(),a=(0,r.useRef)(),n=xS(i),o=n.style,s=(0,r.useRef)();return(0,r.useEffect)((()=>{var e;i?s.current=KC(((e,n)=>{if(a.current){var r=a.current,o=r.posX,s=r.posY;i.update((0,u.Z)((0,u.Z)({},i.camera),{},{posX:o+e/t,posY:s+n/t})),console.log("2==========",{x:e,y:n})}}),(()=>{console.log("1==========")})):null===(e=s.current)||void 0===e||e.call(s)}),[i]),(0,r.useEffect)((()=>{}),[i]),(0,Kg.jsx)("div",{className:"hc-asset-edit-move",style:o})})),()=>{var e,t=_u(),i=t.inCamera,a=null!==(e=Tu())&&void 0!==e?e:{},n=Ii(),r=Pi(),o=a.cameras,s=void 0===o?[]:o,l=yu(),c=1===n.playStatus||r;return a&&!c&&i&&0!==s.length?(0,Kg.jsxs)("div",{className:"hc-core-camera",children:[(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"hc-c-c-r-t"}),(0,Kg.jsx)("div",{className:"hc-c-c-l-t"}),(0,Kg.jsx)("div",{className:"hc-c-c-r-b"}),(0,Kg.jsx)("div",{className:"hc-c-c-l-b"})]}),s.map(((e,t)=>(0,Kg.jsx)(jS,{data:e,index:t,template:a},e.id))),l&&(0,Kg.jsx)(kS,{currentCamera:l})]}):null}),ZS=(0,hp.Pi)(TS),CS=(i(13753),i(48429)),NS=(e,t)=>{var i=()=>{if(e){var t=null===e||void 0===e?void 0:e.attribute,i=t.width,a=t.height,n=null===e||void 0===e?void 0:e.transform,r=n.posX,o=n.posY,s=Ye({left:r,top:o},{width:i,height:a}),l=s.x,c=s.y;return{left:l,top:c}}};return{getCenterPoint:i}},SS=NS,IS=e=>{var t=e||{},i=t.change,a=t.onUp,n=t.limitInfo,r=(0,yp.Z)(t,["change","onUp","limitInfo"]),o=n.dot,s=n.kuang,l=null===o||void 0===o?void 0:o.width,c=(0,Nb.Z)((e=>{e.stopPropagation();var t=e.clientX,a=e.clientY,n=s.left,r=s.top,o=s.width,c=s.height,d=0,u=0,p=o-l,v=c-l;n=t-n,r=a-r,n<d&&(n=d),n>p&&(n=p),r<u&&(r=u),r>v&&(r=v),i&&i({left:n,top:r})}),{wait:100}),d=c.run,p=e=>{e.stopPropagation(),document.onmousemove=d,document.onmouseup=function(e){document.onmouseup=null,document.onmousemove=null,a&&a()}};return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({},r),{},{onMouseDown:p}))},AS=IS,PS=(e,t,i,a)=>{var o={stroke:"#464161","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":3,"stroke-dasharray":"."},s={stroke:"#464161","stroke-width":1},l=(0,r.useRef)(null),c=(0,r.useRef)(),d=(0,r.useState)([]),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i;if(l.current&&c.current){var r=e.concat([a]),o="";return o="bessel"==n?Fd(r,t.scale):zd(r,t.scale),c.current.attr({path:o}),o}},h=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if(l.current){l.current.clear();var n="";"bessel"==a?(f(e,-1),n=Fd(e,t.scale)):n=zd(e,t.scale),c.current=l.current.path(n).attr(o)}},f=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,a=JSON.parse(JSON.stringify(e));if(l.current)if(-1!=i&&p[i]){var n=Od(a[i],t.scale);p[i].attr({path:n})}else{g();var r=[];a.forEach((e=>{var i=l.current.path(Od(e,t.scale)).attr(s);r.push(i)})),v(r)}},g=()=>{l.current&&(p.forEach((e=>{e.remove()})),v([]))};return(0,r.useEffect)((()=>{l.current||(l.current=fZ()(a,t.width,t.height)),l.current&&(l.current.clear(),h(e,i))}),[]),{currentSvgPath:c.current,updatePath:m,updateMovePath:f,clearMovePath:g,initPath:h}};function MS(e,t,i){return{left:e*i,top:t*i}}var ES=(0,hp.Pi)((()=>{var e,t=gu(),i=un(),a=(0,r.useState)("line"),s=(0,n.Z)(a,2),l=s[0],c=s[1],d=SS(t,i),p=d.getCenterPoint,v=p(),m=v.left,h=v.top,f=pu(),g=f.updatePoints,x=(0,r.useState)([[m,h,m,h,m,h]]),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=PS(JSON.parse(JSON.stringify(b)),i,l,"animationPathEdit"),w=j.updatePath,k=j.updateMovePath,T=j.initPath,Z=j.clearMovePath,C=j.currentSvgPath,N=uu(),S=N.inAniPath,I=N.changStatue,A=(0,r.useRef)([]),P=(0,r.useRef)(null),M=(0,r.useRef)({}),E=(0,r.useRef)({left:0,top:0}),L=(0,r.useRef)({}),D=()=>{I(1),w(b,[],l)},R=()=>{if(C&&t){I(-1);var e=C.node.getBoundingClientRect(),a=Ke(t),n={width:e.width/i.scale,height:e.height/i.scale,left:(e.left-E.current.left)/i.scale-a.x,top:(e.top-E.current.top)/i.scale-a.y};g(b,l,n)}},z=e=>{e.stopPropagation();var t=e.clientX,i=e.clientY;M.current={left:t,top:i}},F=e=>{if(0===S&&E.current){var t,a,n=e||window.event,r=n.clientX,o=n.clientY,s=(r-(null===(t=E.current)||void 0===t?void 0:t.left))/i.scale,l=(o-(null===(a=E.current)||void 0===a?void 0:a.top))/i.scale,c=[s,l,s,l,s,l],d=[...b,c];_(d)}},O=(0,Nb.Z)((e=>{if(0==S){var t=e.clientX,a=e.clientY,n=E.current,r=n.left,o=n.top,s=(t-r)/i.scale,c=(a-o)/i.scale,d=[s,c,s,c,s,c];A.current=d,w(b,d,l)}}),{wait:100}),B=O.run,V=(e,t,a)=>{e.left/=i.scale,e.top/=i.scale;var n=[...b],r=[...n[t]];if(0!==t||2!==a){if(2===a){var o=r[a]-r[0],s=r[a+1]-r[1];r[0]=e.left-o,r[1]=e.top-s;var c=r[a]-r[4],d=r[a+1]-r[5];r[4]=e.left-c,r[5]=e.top-d}if(0===a){var u=2*r[2]-e.left,p=2*r[3]-e.top;r[4]=u,r[5]=p}if(4===a){var v=2*r[2]-e.left,m=2*r[3]-e.top;r[0]=v,r[1]=m}r[a]=e.left,r[a+1]=e.top,n[t]=r,_(n),k(n,t),w(n,[],l)}},U=e=>{c(e),w(b,[],e),Z(),"bessel"===e&&k(b,-1)};return(0,r.useEffect)((()=>{var e=document.getElementById("HC-CORE-EDITOR-CANVAS"),t=null===e||void 0===e?void 0:e.getBoundingClientRect(),a=t.left,n=t.top;E.current={left:a,top:n},L.current={dot:{width:10,height:10},kuang:{left:a,top:n,width:i.width,height:i.height}},w(b,[],l),"bessel"===l&&k(b,-1)}),[i.scale]),(0,r.useEffect)((()=>{0===S?document.onmousemove=B:(document.onmouseup=null,document.onmousemove=null)}),[S]),(0,r.useEffect)((()=>{var e,i;if(null!==t&&void 0!==t&&null!==(e=t.attribute)&&void 0!==e&&null!==(i=e.stayEffect)&&void 0!==i&&i.graph){var a,n,r=null===t||void 0===t||null===(a=t.attribute)||void 0===a||null===(n=a.stayEffect)||void 0===n?void 0:n.graph,o=r.points,s=r.freePathType,l=t.attribute,d=t.transform,u=Ye({x:null===d||void 0===d?void 0:d.posX,y:d.posY},{width:l.width,height:l.height},!1);I(1);var p=Wd(o,u.x,u.y);_(p),c(s),T(p,s)}}),[null===t||void 0===t||null===(e=t.attribute)||void 0===e?void 0:e.stayEffect,S]),(0,aC.Z)(["Escape"],(e=>{e.preventDefault(),D()})),(0,Kg.jsxs)("div",{className:"edit-path-animation",onClick:W,onMouseDown:W,children:[(0,Kg.jsxs)("div",{className:"edit-path-buttons",children:[(0,Kg.jsx)(CS.Z,{onClick:R,children:"\u5b8c\u6210"}),(0,Kg.jsx)(CS.Z,{className:"bessel"!==l?"edit-path-buttons-choosed":"",onClick:()=>{U("line")},children:"\u76f4\u7ebf"}),(0,Kg.jsx)(CS.Z,{className:"bessel"===l?"edit-path-buttons-choosed":"",onClick:()=>{U("bessel")},children:"\u66f2\u7ebf"})]}),(0,Kg.jsxs)("div",{className:"edit-path-box",onMouseDown:z,onClick:F,children:[1===S&&b.map(((e,t)=>(0,Kg.jsxs)(o().Fragment,{children:["bessel"===l&&(0,Kg.jsx)(AS,{className:"node-left",style:(0,u.Z)({},MS(e[0]-10,e[1]-10,i.scale)),limitInfo:L.current,change:e=>{V(e,t,0)}}),(0,Kg.jsx)(AS,{className:"node-center",style:(0,u.Z)({},MS(e[2]-15,e[3]-15,i.scale)),limitInfo:L.current,change:e=>{V(e,t,2)}}),"bessel"===l&&(0,Kg.jsx)(AS,{className:"node-right",limitInfo:L.current,style:(0,u.Z)({},MS(e[4]-10,e[5]-10,i.scale)),change:e=>{V(e,t,4)}})]},t))),(0,Kg.jsx)("div",{id:"animationPathEdit",ref:P.current})]})]})})),LS=()=>{var e=gu(),t=uu(),i=t.inAniPath;return e&&-1!==i&&2!==i?(0,Kg.jsx)(ES,{}):null},DS=(0,hp.Pi)(LS),RS=(e,t)=>{var i=t.scale,a=e.attribute,n=e.transform,o=a.stayEffect,s=o.graph,l=Ye({x:null===n||void 0===n?void 0:n.posX,y:n.posY},{width:a.width,height:a.height},!1),c="path-svg",d=(0,r.useRef)(),u=(0,r.useRef)(),p={stroke:"#464161","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":3,"stroke-dasharray":"."},v=()=>d.current,m=(e,t)=>{if(u.current&&e){Wd(e,l.x-s.x,l.y-s.y);var a=Wd(e,-s.x,-s.y),n="";n="bessel"===t?Fd(a,i):zd(a,i),d.current?(d.current.attr({path:n}),u.current.setSize(s.width*i,s.height*i)):d.current=u.current.path(n).attr(p)}};return(0,r.useEffect)((()=>{if(s){var e=s.points,t=s.freePathType,a=s.width,n=s.height;if(!u.current){var r=fZ()(c,a*i,n*i);u.current=r,r.clear()}m(e,t)}}),[e.meta,i,a.width,a.height,n.posX,n.posY,null===s||void 0===s?void 0:s.points]),{getSvgPath:v,buildPathFreePath:m}},zS=(e,t)=>{var i=e.attribute,a=e.transform,n=t.scale,r=i.stayEffect,o=void 0===r?{}:r,s=i.width,l=i.height,c=o.graph,d=Ke(e),u=(0,Ju.Z)((()=>c?{width:(null===c||void 0===c?void 0:c.width)*n,height:(null===c||void 0===c?void 0:c.height)*n,left:((null===c||void 0===c?void 0:c.x)+d.x)*n,top:((null===c||void 0===c?void 0:c.y)+d.y)*n,position:"absolute",zIndex:2}:{}),[null===c||void 0===c?void 0:c.x,null===c||void 0===c?void 0:c.y,null===c||void 0===c?void 0:c.width,null===c||void 0===c?void 0:c.height,s,l,a.posX,a.posY,n]),p=(0,Ju.Z)((()=>({width:s*n,height:l*n,left:a.posX*n,top:a.posY*n,position:"absolute",transform:"rotate(".concat(a.rotate,"deg)"),zIndex:1})),[s,l,a.posX,a.posY,a.rotate,n]),v=e=>{var t=e.width,i=e.height,a=e.rotate,r=c.points,o=void 0===r?[]:r,s=(c.x,c.y,o.length-1);return{width:t*n,height:i*n,left:(d.x+o[s][2]-t/2)*n,top:(d.y+o[s][3]-i/2)*n,position:"absolute",transform:"rotate(".concat(a,"deg)"),zIndex:1}},m=e=>{var t=e.width,i=e.height;return{x:t/s,y:i/l}};return{svgStyle:u,startNodeStyle:p,itemPointAssetStyle:v,itemPointAssetScale:m}},FS=e=>{var t=e.asset,i=e.canvasInfo,a=e.scale,n=e.prefix,r=(0,yp.Z)(e,["asset","canvasInfo","scale","prefix"]),o=t.meta,s=pn(),l=SZ(t,o.type),c={asset:t,index:0,assetActive:!0,isPreviewMovie:!1,parentAsset:void 0,showOnly:!0,assetStyle:{},assetClassName:"",isAssetActive:!1,AssetRootRef:null,canvasInfo:i,prefix:n,videoInfo:{},videoStatus:{playStatus:-1,currentTime:s}};return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({},r),{},{className:"asset-item",children:(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",transformOrigin:"0 0",transform:"scale(".concat(((null===a||void 0===a?void 0:a.x)||1)*i.scale,",").concat(((null===a||void 0===a?void 0:a.y)||1)*i.scale,")"),cursor:"move"},children:(0,Kg.jsx)(l,(0,u.Z)({},c))})}))},OS=(0,hp.Pi)(FS);function BS(e){function t(t){su.updateRotate(e,t)}function i(){Kd(e,!1),We("stopRotate",!0)}return{onMoving:t,onStopMove:i}}function WS(e,t){var i=un(),a=i.scale,n=_u(),r=n.inClipping;function o(i,a,n,o){var s,l;if(r?e&&su.fixContainerPosition(e,{size:i,position:a,originAsset:n}):null!==e&&void 0!==e&&e.attribute.container?su.updateAssetContainerSize(e,{size:i,position:a,originAsset:n}):o?su.updateSizeScale(e,{size:i,position:a,originAsset:n}):su.updateSize(e,{size:i,position:a,originAsset:n}),null!==n&&void 0!==n&&null!==(s=n.attribute)&&void 0!==s&&null!==(l=s.stayEffect)&&void 0!==l&&l.graph){var c,d,p,v,m,h=t(),f=null===n||void 0===n||null===(c=n.attribute)||void 0===c||null===(d=c.stayEffect)||void 0===d?void 0:d.graph,g=f.points,x=A(g),y=Ke(n),b={x:i.width/2+a.left,y:i.height/2+a.top},_={x:y.x-b.x,y:y.y-b.y};x.forEach(((e,t)=>{0!==t&&e.forEach(((t,i)=>{t-=i%2===0?_.x:_.y,e[i]=t})),x[t]=e}));var j=Ke(e);h.x-=j.x,h.y-=j.y,Ud(e,Ft({stayEffect:(0,u.Z)((0,u.Z)({},null===e||void 0===e||null===(p=e.attribute)||void 0===p?void 0:p.stayEffect),{},{graph:(0,u.Z)((0,u.Z)((0,u.Z)({},null===e||void 0===e||null===(v=e.attribute)||void 0===v||null===(m=v.stayEffect)||void 0===m?void 0:m.graph),h),{},{points:x})})}))}}function s(e,t,i){var n=e.width,r=e.height,s=e.left,l=e.top;o({height:r/a,width:n/a},{top:l/a,left:s/a},t,i)}function l(){Kd(e,!1),We("stopMove",!0)}function c(){Kd(e,!0)}return{onMoving:s,onStopMove:l,onStartMove:c}}var VS=lN.unLRTB,US=lN.whole,GS=lN.TB,XS=lN.LR,qS=e=>{var t=e.asset,i=e.calcSvgSize,a=t.attribute,n=t.transform,o=t.meta,s=n.rotate,l=void 0===s?0:s,c=BS(t),d=WS(t,i),p=(0,r.useMemo)((()=>{var e=VS;switch(o.type){case"background":case"pic":case"image":case"mask":case"SVG":e=US;break;case"text":e="vertical-rl"===(null===a||void 0===a?void 0:a.writingMode)?[...VS,...GS]:[...VS,...XS];break;case"video":case"videoE":case"module":case"__module":e=VS;break}return o.locked&&(e=["lock"]),e}),[o.type,a.writingMode,o.locked]),v=(0,u.Z)((0,u.Z)({},t.assetSizeScale),t.assetPositionScale),m=(0,r.useRef)(null);function h(e,t){var i=t.style,a=t.rotate;if(a){var n=a%90;(n>=87||n<=3)&&(a=90*Math.round(a/90)),c.onMoving(a%360)}if(i&&m.current){var r=lN.unLRTB.includes(e);d.onMoving(i,m.current,r)}}function f(e,t){var i=t.style,a=t.rotate;a&&c.onStopMove(),i&&d.onStopMove()}function g(e){"rotate"!==e&&d.onStartMove(),t.setTempData({rt_style:void 0}),m.current=t.getAssetCloned()}return(0,Kg.jsx)(CN,{nodes:p,style:v,rotate:l,getRect:B,locked:o.locked,onChange:h,asset:t,showPoints:!0,onChangeEnd:f,onChangeStart:g})},HS=qS;function YS(e,t){var i=un(),a=(i.scale,e.attribute),n=a.stayEffect,r=n.graph,o=r.toBounds,s=void 0===o?[]:o;function l(i){var a=A(s[t]);a.rotate=i,Ud(e,Ft({stayEffect:(0,u.Z)((0,u.Z)({},n),{},{graph:(0,u.Z)((0,u.Z)({},r),{},{toBounds:[a]})})}))}function c(){We("stopRotate",!0)}return{onMoving:l,onStopMove:c}}function KS(e,t,i){var a=e.attribute,n=a.stayEffect,r=n.graph,o=r.toBounds,s=void 0===o?[]:o,l=r.points,c=r.freePathType,d=un(),p=d.scale,v=Ke(e);function m(a,o,d){var m=A(s[t]);if(m){m.width=a.width/p,m.height=a.height/p;var h=Ye({left:a.left,top:a.top},{width:a.width,height:a.height}),f={x:h.x/p-v.x,y:h.y/p-v.y},g=[...l],x=[...g[l.length-1]],y=x[2]-x[0],b=x[3]-x[1];x[0]=f.x-y,x[1]=f.y-b;var _=x[2]-x[4],j=x[3]-x[5];x[4]=f.x-_,x[5]=f.y-j,x[2]=f.x,x[3]=f.y,g[l.length-1]=x;var w=i(g,c);Ud(e,Ft({stayEffect:(0,u.Z)((0,u.Z)({},n),{},{graph:(0,u.Z)((0,u.Z)({},r),{},{toBounds:[m],points:g},w)})}))}}function h(){We("stopMove",!0)}function f(){e.setTempData({rt_style:void 0})}return{onMoving:m,onStopMove:h,onStartMove:f}}var QS=lN.unLRTB,JS=lN.whole,$S=lN.TB,eI=lN.LR,tI=e=>{var t,i=e.asset,a=e.index,n=e.calcSvgSize,o=i.attribute,s=i.transform,l=i.meta,c=un(),d=s.rotate,u=void 0===d?0:d,p=o.stayEffect,v=p.graph,m=v.toBounds,h=void 0===m?[]:m,f=YS(i,a),g=KS(i,a,n),x=zS(i,c),y=x.itemPointAssetStyle,b=(0,r.useMemo)((()=>{var e=QS;switch(l.type){case"background":case"pic":case"image":case"mask":case"SVG":e=JS;break;case"text":e="vertical-rl"===(null===o||void 0===o?void 0:o.writingMode)?[...QS,...$S]:[...QS,...eI];break;case"video":case"videoE":case"module":case"__module":e=QS;break}return l.locked&&(e=["lock"]),e}),[l.type,o.writingMode,l.locked]),_=(0,r.useMemo)((()=>i.getAssetCloned()),[i]);function j(e,t){var i=t.style,a=t.rotate;if(a){var n=a%90;(n>=87||n<=3)&&(a=90*Math.round(a/90)),f.onMoving(a%360)}if(i){var r=lN.unLRTB.includes(e);g.onMoving(i,_,r)}}function w(e,t){var i=t.style,a=t.rotate;a&&f.onStopMove(),i&&g.onStopMove()}function k(e){"rotate"!==e&&g.onStartMove()}return(0,Kg.jsx)(CN,{nodes:b,style:y(h[a]),rotate:null!==(t=h[a].rotate)&&void 0!==t?t:u,getRect:B,locked:l.locked,onChange:j,asset:i,showPoints:!0,onChangeEnd:w,onChangeStart:k})},iI=tI,aI=e=>{var t=e.asset,i=e.calcSvgSize,a=e.canEdit,n=e.onEdit,r=(e.buildPathFreePath,un()),s=t.attribute,l=s.stayEffect,c=l.graph,d=c.toBounds,u=void 0===d?[]:d,p=c.points,v=void 0===p?[]:p,m=v.length-1,h=pu(),f=h.updatePointByIndex,g=zS(t,r),x=g.itemPointAssetStyle,y=g.itemPointAssetScale,b=e=>{e.stopPropagation(),null===t||void 0===t||t.setTempData({rt_style:void 0})},_=e=>{e.stopPropagation()},j=(e,a)=>{if(b(e),t&&!t.meta.locked){var n=t.getAssetCloned();V(e,((e,t)=>{var a=e/r.scale,o=t/r.scale,s=i();f(a,o,n,m,s)}),(()=>{_(e)}))}};return(0,Kg.jsx)(Kg.Fragment,{children:u.map(((e,s)=>(0,Kg.jsxs)(o().Fragment,{children:[(0,Kg.jsx)(OS,{asset:t,canvasInfo:r,style:x(e),scale:y(e),onMouseDown:e=>{j(e,s),e.stopPropagation()},onClick:n,prefix:"point-end"}),a&&(0,Kg.jsx)(iI,{asset:t,index:s,calcSvgSize:i})]},s)))})},nI=(0,hp.Pi)(aI);function rI(e,t,i,a){return{left:t*a,top:i*a}}var oI=e=>{e.calcSvgSize;var t,i,a,s,l,c=e.editAsset,d=e.canvasInfo,p=Ke(c),v=(0,r.useState)(!1),m=(0,n.Z)(v,2),h=m[0],f=(m[1],(0,r.useState)("line")),g=(0,n.Z)(f,2),x=(g[0],g[1]),y=pu(),b=(y.updatePoints,(0,r.useState)([])),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=(0,r.useRef)({left:0,top:0}),T=(0,r.useRef)({});return(0,r.useEffect)((()=>{var e=document.getElementById("HC-CORE-EDITOR-CANVAS"),t=null===e||void 0===e?void 0:e.getBoundingClientRect(),i=t.left,a=t.top;k.current={left:i,top:a},T.current={dot:{width:10,height:10},kuang:{left:i,top:a,width:d.width,height:d.height}}}),[d.scale]),(0,Sb.Z)((()=>{}),[]),(0,r.useEffect)((()=>{var e,t;if(null!==c&&void 0!==c&&null!==(e=c.attribute)&&void 0!==e&&null!==(t=e.stayEffect)&&void 0!==t&&t.graph&&!h){var i,a,n=null===c||void 0===c||null===(i=c.attribute)||void 0===i||null===(a=i.stayEffect)||void 0===a?void 0:a.graph,r=n.points,o=n.freePathType,s=c.attribute,l=c.transform,d=Ye({x:null===l||void 0===l?void 0:l.posX,y:l.posY},{width:s.width,height:s.height},!1),u=Wd(r,d.x,d.y);w(u),x(o)}}),[null===c||void 0===c||null===(t=c.attribute)||void 0===t||null===(i=t.stayEffect)||void 0===i||null===(a=i.graph)||void 0===a?void 0:a.points,null===c||void 0===c||null===(s=c.transform)||void 0===s?void 0:s.posX,null===c||void 0===c||null===(l=c.transform)||void 0===l?void 0:l.posY]),(0,Kg.jsx)(Kg.Fragment,{children:j.map(((e,t)=>{var i=0;return t===j.length-1&&(i=180-G(e[2]-j[t-1][2],e[3]-j[t-1][3])),(0,Kg.jsx)(o().Fragment,{children:(0,Kg.jsx)("div",{className:t===j.length-1?"node-last":"node",style:(0,u.Z)((0,u.Z)({},rI(p,e[2]-17,e[3]-17,d.scale)),{},{transform:"rotate(".concat(i,"deg)")})})},t)}))})},sI=(0,hp.Pi)(oI),lI=(0,hp.Pi)((()=>{var e,t,i=gu(),a=Ke(i),o=un(),s=o.scale,l=zS(i,o),c=l.svgStyle,d=l.startNodeStyle,u=RS(i,o),p=u.getSvgPath,v=(u.buildPathFreePath,uu()),m=v.changStatue,h=pu(),f=h.updateAnimationPosition,g=h.updatePointByIndex,x=(0,r.useRef)(null),y=(0,r.useState)(!1),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=e=>{i&&!i.meta.locked&&(e.stopPropagation(),m(1))},k=()=>{var e=p();if(e&&x.current){var t,i,n=e.node.getBoundingClientRect(),r={width:n.width/s,height:n.height/s,x:(n.left-(null===x||void 0===x||null===(t=x.current)||void 0===t?void 0:t.left))/s-a.x,y:(n.top-(null===x||void 0===x||null===(i=x.current)||void 0===i?void 0:i.top))/s-a.y};return r}},T=()=>{var e=p();if(e&&x.current){var t,i,a=e.node.getBoundingClientRect(),n={width:a.width/s,height:a.height/s,x:(a.left-(null===x||void 0===x||null===(t=x.current)||void 0===t?void 0:t.left))/s,y:(a.top-(null===x||void 0===x||null===(i=x.current)||void 0===i?void 0:i.top))/s};return n}},Z=e=>{e.stopPropagation(),null===i||void 0===i||i.setTempData({rt_style:void 0})},C=e=>{e.stopPropagation()},N=e=>{if(Z(e),i&&!i.meta.locked){var t=i.getAssetCloned();V(e,((e,i)=>{var a=e/s,n=i/s;f(a,n,t)}),(()=>{C(e)}))}},S=e=>{if(Z(e),i&&!i.meta.locked){var t=i.getAssetCloned();V(e,((e,i)=>{var a=e/s,n=i/s,r=T(t);g(a,n,t,0,r),j(!_)}),(()=>{C(e)}))}},I=()=>{i&&!i.meta.locked&&Fe.canUseTextEditor.includes(null===i||void 0===i?void 0:i.meta.type)&&(iu.setTextEditActive(i),We("setTextEditActive",!1))};(0,r.useEffect)((()=>{var e=document.getElementById("HC-CORE-EDITOR-CANVAS");e&&(x.current=e.getBoundingClientRect())}),[s]);var A=(0,r.useState)(!1),P=(0,n.Z)(A,2),M=P[0],E=P[1],L=(0,r.useState)(!1),D=(0,n.Z)(L,2),R=D[0],z=D[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(OS,{asset:i,canvasInfo:o,style:d,onMouseDown:S,onClick:()=>{E(!0),z(!1)},onDoubleClick:I,prefix:"point-start",index:0}),M&&(0,Kg.jsx)(HS,{asset:i,calcSvgSize:T}),(0,Kg.jsx)("div",{className:hb()("path-svg",{choosed:(null!==(e=null===c||void 0===c?void 0:c.height)&&void 0!==e?e:0)<1}),style:c,id:"path-svg",onMouseDown:N,onDoubleClick:w,onClick:()=>{E(!1),z(!1)}}),(0,Kg.jsx)(sI,{editAsset:i,canvasInfo:o,calcSvgSize:k,flag:_}),(null===i||void 0===i||null===(t=i.attribute)||void 0===t?void 0:t.stayEffect)&&(0,Kg.jsx)(nI,{asset:i,calcSvgSize:k,canEdit:R,onEdit:()=>{E(!1),z(!0)}})]})})),cI=()=>{var e,t,i,a=gu(),n=uu(),r=n.inAniPath;if(null===a||void 0===a||null===(e=a.attribute)||void 0===e||null===(t=e.stayEffect)||void 0===t||!t.graph||2!==r)return null;var o={opacity:!0===(null===a||void 0===a||null===(i=a.tempData)||void 0===i?void 0:i.rt_previewStayEffect)?0:1};return(0,Kg.jsx)("div",{className:"hc-asset-path-mask",style:o,onClick:W,onDoubleClick:W,children:(0,Kg.jsx)(lI,{})})},dI=(0,hp.Pi)(cI),uI=(0,hp.Pi)((()=>{var e,t,i=gu(),a=un(),n=i.attribute,r=i.transform,o=n.width,s=n.height,l=n.stayEffect,c=r.posX,d=r.posY,u={zIndex:Fe.editZIndex+110},p=pu(),v=p.updateWhirlPosition,m=e=>{if(e.stopPropagation(),i){i.setTempData({rt_style:void 0,rt_previewStayEffect:!1});var t=i.getAssetCloned();V(e,((e,i)=>{var n,r,l,c,d=null===t||void 0===t||null===(n=t.attribute)||void 0===n||null===(r=n.stayEffect)||void 0===r||null===(l=r.attach)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.position,u=(null===d||void 0===d?void 0:d.left)*o+e/a.scale,p=(null===d||void 0===d?void 0:d.top)*s+i/a.scale,m={left:u/o,top:p/s};v(m)}),(()=>{}))}},h=(0,Ju.Z)((()=>{var e=l.attach;if(e){var t=e.data,i=t.position;return{left:(c+o*i.left)*a.scale-13,top:(d+s*i.top)*a.scale-13}}return{}}),[a.scale,null===l||void 0===l||null===(e=l.attach)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.position]);return(0,Kg.jsx)("div",{className:"hc-asset-whirl-mask",style:u,onMouseDown:W,onClick:W,onDoubleClick:W,children:(0,Kg.jsx)("div",{onMouseDown:m,className:"whirl-point",style:h})})})),pI=()=>{var e,t,i,a=gu(),n=_u(),r=n.inWhirl;return"Whirl"!==(null===a||void 0===a||null===(e=a.attribute)||void 0===e||null===(t=e.stayEffect)||void 0===t||null===(i=t.attach)||void 0===i?void 0:i.type)||!r||null!==a&&void 0!==a&&a.tempData.rt_previewStayEffect?null:(0,Kg.jsx)(uI,{})},vI=(0,hp.Pi)(pI),mI=(0,hp.Pi)((()=>(0,Kg.jsxs)("div",{className:"hc-core-canvas-handler",children:[(0,Kg.jsx)(qC,{}),(0,Kg.jsx)(cN,{}),(0,Kg.jsx)(DN,{}),(0,Kg.jsx)(GN,{}),(0,Kg.jsx)(gS,{}),(0,Kg.jsx)(HN,{}),(0,Kg.jsx)(QN,{}),(0,Kg.jsx)(eS,{}),(0,Kg.jsx)(ZS,{}),(0,Kg.jsx)(DS,{}),(0,Kg.jsx)(dI,{}),(0,Kg.jsx)(vI,{})]}))),hI=mI;function fI(e){if(e){var t=e.getBoundingClientRect(),i=t.left,a=t.top;return{left:i,top:a}}return{left:0,top:0}}function gI(e,t){var i=e.clientX,a=e.clientY;if(t){var n=t.left,r=t.top;return{left:i-n,top:a-r}}return{left:i,top:a}}function xI(){var e=(0,r.useRef)(null),t=(0,dx.Z)({top:0,left:0,width:0,height:0,opacity:0}),i=(0,n.Z)(t,2),a=i[0],o=i[1];function s(t){var i=fI(e.current),a=B(),n=gI(t,i),r=gI(t,a),s={left:r.left-n.left,top:r.top-n.top};o((0,u.Z)((0,u.Z)({},n),{},{width:0,height:0,opacity:1}));var l=(0,h.Z)((e=>{var t=gI(e,i),a=(0,u.Z)({width:Math.abs(t.left-n.left),height:Math.abs(t.top-n.top)},n);t.left<=n.left&&(a.left=n.left-a.width),t.top<=n.top&&(a.top=n.top-a.height),Ku((0,u.Z)((0,u.Z)({},a),{},{left:a.left+s.left,top:a.top+s.top})),o(a)}),25),c=()=>{o({top:0,left:0,width:0,height:0,opacity:0}),Qu(),window.removeEventListener("mousemove",l),window.removeEventListener("mouseup",c)};window.addEventListener("mousemove",l),window.addEventListener("mouseup",c)}return{onMouseDown:s,style:a,wrapperRef:e}}var yI=(0,r.forwardRef)(((e,t)=>{var i=xI(),a=i.onMouseDown,n=i.style,o=i.wrapperRef;return(0,r.useImperativeHandle)(t,(()=>({onMouseDown:a}))),(0,Kg.jsx)("div",{className:"hc-boxSelection-wrapper",ref:o,children:(0,Kg.jsx)("div",{className:"hc-boxSelection",style:n})})})),bI=(0,hp.Pi)(yI),_I=()=>(0,Kg.jsx)("div",{className:"hc-core-canvas-transtion",id:"hc-core-canvas-transtion"}),jI=_I,wI=(0,hp.Pi)((()=>{var e=Mi(),t=sC(e),i=t.canvasStyle,n=t.renderStyle,o=(0,r.useRef)(null),s=Ii(),l=Pi(),c=Ei(),d=Zu(),p=Si(),v=gp(s,p),m=v.audioList,h=v.timerVideoInfo,f=v.currentTemplateIndex,g=v.videoStatus,x=v.templateList,y=v.template;function b(e){var t;eu(),null===(t=o.current)||void 0===t||t.onMouseDown(e)}d!==f&&tu(f),nC(),oC();var _=WC(g,y),j=_.animationType,w=_.style;function k(e){var t={zIndex:100-e,pointerEvents:"none",opacity:0,left:0,top:0,transform:"translateZ(0px)"};return l||1===g.playStatus?(e===f&&(t=(0,u.Z)({zIndex:101},w.style)),"after"===j&&e===f+1&&(t=(0,u.Z)((0,u.Z)({zIndex:100-e},w.lastStyle),{},{pointerEvents:"none"})),"before"===j&&e===f-1&&(t=(0,u.Z)((0,u.Z)({zIndex:100-e},w.lastStyle),{},{pointerEvents:"none"})),t):(e===f&&(t.opacity=1,t.pointerEvents="auto"),t)}return(0,Kg.jsxs)("div",{className:"hc-core-wrapper",onMouseDown:b,children:[(0,Kg.jsx)(bI,{ref:o}),(0,Kg.jsxs)("div",{className:"hc-core-canvas",id:"HC-CORE-EDITOR-CANVAS",style:i,children:[(0,Kg.jsx)(hI,{}),(0,Kg.jsxs)("div",{className:"hc-core-canvas-render",style:n,children:[(0,Kg.jsx)(jI,{}),x.map(((t,i)=>{var n=i===f,r=!0;x.length>15&&(r=n,g.playStatus===a.Playing&&(r=n||f===i+1||f===i-1)),c&&(n=c.templateIndex===i);var o=A(VC);n||i!==f-1||(null!==t&&void 0!==t&&t.endTransfer?(o.currentTime=t.videoInfo.allAnimationTime,o.playStatus=0):o=VC);var s=l,d=c;return!n&&i===f-1&&d&&(s=!0,d.currentTime=o.currentTime),r?(0,Kg.jsx)(iC,{manualPreview:s,manualCurrentTime:d,assets:t.assetList,whole:!0,isPreview:!1,style:k(i),templateIndex:i,prefix:"wholeCanvas-".concat(i,"-").concat(t.id),canvasInfo:e,videoStatus:n?g:o,videoInfo:t.videoInfo,pageAttr:t.pageAttr,isTranstionRender:!n},"wholeCanvas-".concat(t.id)):(0,Kg.jsx)("div",{})}))]})]}),(0,Kg.jsx)(kC,{videoStatus:s,audioList:m,templateIndex:f}),(0,Kg.jsx)(dC,{endTime:h.allAnimationTime,videoStatus:s,videoHandler:Ci}),(0,Kg.jsx)("div",{className:"hc-asset-path-container",id:"hc-path-container",style:{display:"none"}})]})})),kI=wI,TI=(0,hp.Pi)((()=>{var e=Mi(),t=sC(e),i=t.canvasStyle,a=t.renderStyle,n=(0,r.useRef)(null),o=ip(),s=ku(),l=Tu(),c=Ii(),d=Zu(),u=Pi();function p(e){var t;eu(),null===(t=n.current)||void 0===t||t.onMouseDown(e)}return nC(),(0,Kg.jsxs)("div",{className:"hc-core-wrapper",onMouseDown:p,children:[(0,Kg.jsx)(bI,{ref:n}),(0,Kg.jsxs)("div",{className:"hc-core-canvas",id:"HC-CORE-EDITOR-CANVAS",style:i,children:[(0,Kg.jsx)(hI,{}),(0,Kg.jsx)("div",{className:"hc-core-canvas-render",style:a,children:(0,Kg.jsx)(iC,{manualPreview:u,templateIndex:d,assets:l.assetList,isPreview:!1,prefix:"canvas",videoInfo:s,canvasInfo:e,videoStatus:c,pageAttr:l.pageAttr})})]}),(0,Kg.jsx)(wC,{videoStatus:c,audioList:o,templateIndex:d}),(0,Kg.jsx)(dC,{endTime:s.allAnimationTimeBySpeed,videoStatus:c,videoHandler:Ci})]})})),ZI=TI,CI=(0,hp.Pi)((e=>{var t=e.canvasInfo,i=e.onChange,a=e.onError,n=e.wholeTemplate,o=void 0===n||n;return(0,r.useEffect)((()=>{Ti(t)}),[t.width,t.scale,t]),(0,r.useEffect)((()=>{Be({onChange:i,onError:a})}),[]),o?(0,Kg.jsx)(kI,{}):(0,Kg.jsx)(ZI,{})})),NI=CI,SI=(0,hp.Pi)((e=>{var t=e.canvasInfo,i=e.templateId,a=e.withoutOffset,o=void 0!==a&&a,s=sC(t),l=s.canvasStyle,c=s.renderStyle,d=Cu(i),p=d.template,v=d.index,m=Ai(),h=Ni,f=ip(),g=(0,r.useMemo)((()=>"SingleTemplate-".concat(wi())),[]),x=(0,r.useMemo)((()=>o?(0,u.Z)((0,u.Z)({},p.videoInfo),{},{allAnimationTime:p.videoInfo.pageTime,offsetTime:[0,0]}):p.videoInfo),[o]),y=p.videoInfo.offsetTime||[0,0],b=(0,n.Z)(y,2),_=b[0],j=(b[1],o?(0,u.Z)((0,u.Z)({},m),{},{currentTime:_+m.currentTime}):m);return(0,r.useEffect)((()=>()=>{Vb()}),[]),p?(0,Kg.jsxs)("div",{className:"hc-core-wrapper",children:[(0,Kg.jsx)("div",{className:"hc-core-canvas",style:l,children:(0,Kg.jsx)("div",{className:"hc-core-canvas-render",style:c,children:(0,Kg.jsx)(iC,{assets:p.assets,isPreview:!0,templateIndex:v,prefix:g,canvasInfo:t,videoStatus:j,videoInfo:x,pageAttr:p.pageAttr})})}),(0,Kg.jsx)(wC,{videoStatus:m,audioList:f,templateIndex:v}),(0,Kg.jsx)(dC,{endTime:p.videoInfo.allAnimationTime,videoStatus:m,videoHandler:h})]}):(0,Kg.jsx)("div",{})})),II=SI,AI=(0,hp.Pi)((e=>{var t=e.canvasInfo,i=e.templateId,a=e.previewWhole,n=void 0===a||a;return t=Ck(t),n?(0,Kg.jsx)(GC,{canvasInfo:t}):(0,Kg.jsx)(II,{canvasInfo:t,templateId:i})})),PI=AI;function MI(){var e=El.record,t=El.recordPoint;return e.length&&t>-1?e[t]:{templates:[],audios:[]}}a.Stopped;var EI=(0,hp.Pi)((e=>{var t=e.canvasInfo,i=e.currentTime,o=e.templateIndex,s=sC(t),l=s.canvasStyle,c=s.renderStyle,d=MI(),u=d.templates,p=(0,r.useMemo)((()=>"staticTemplate-".concat(wi(),"-").concat(o)),[]),v=(0,r.useState)(!1),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=u[o],x=ud();return(0,r.useEffect)((()=>{!h&&x&&g&&f(!0)}),[h,g,x]),(0,Kg.jsx)("div",{className:"hc-core-wrapper",children:(0,Kg.jsx)("div",{className:"hc-core-canvas",style:l,children:(0,Kg.jsx)("div",{className:"hc-core-canvas-render",style:c,children:g&&h&&(0,Kg.jsx)(iC,{assets:g.assets,isPreview:!0,showOnly:!0,templateIndex:o,prefix:"".concat(p,"-").concat(g.id),canvasInfo:t,videoStatus:{playStatus:a.Paused,currentTime:i},videoInfo:g.videoInfo,pageAttr:g.pageAttr},g.id)})})})})),LI=EI;window.EDITOR_UTILS={whoIsNotLoaded:gd};var DI=i(59673),RI=i(62939),zI=i(63983),FI=(i(53862),i(22657)),OI=i(96486);function BI(){return kp.h.getState().designer.timeRuleScale}function WI(){var e=(0,kp.CG)((e=>e.designer)),t=e.timeRuleScale,i=(0,kp.TL)();function a(e){i(kp.u7.setTimeRuleScale(e))}return{timeRuleScale:t,update:a}}function VI(){var e=(0,kp.CG)((e=>e.designer)),t=e.roleMoreName,i=(0,kp.TL)();function a(e){i(kp.u7.setRoleMoreName(e))}return{roleMoreName:t,updateRoleMoreName:a}}function UI(e){kp.h.dispatch(kp.u7.setMenu({activeMenu:e,activeSubMenu:"",activeOperationMenu:""}))}function GI(e){kp.h.dispatch(kp.u7.setMenu({activeSubMenu:e,activeOperationMenu:""}))}function XI(e){kp.h.dispatch(kp.u7.setMenu({activeOperationMenu:e}))}function qI(){var e=(0,kp.CG)((e=>e.designer)),t=e.menu;return(0,u.Z)((0,u.Z)({},t),{},{setActiveMenu:UI,setActiveSubMenu:GI,setActiveOperationMenu:XI})}function HI(){return kp.h.getState().designer.alignAsset}function YI(e){(0,OI.isEqual)(HI(),e)||kp.h.dispatch({type:"designerGlobalStatus/setAlignAsset",payload:e})}function KI(){kp.h.dispatch({type:"designerGlobalStatus/setAlignAsset",payload:[]})}function QI(){var e=(0,kp.CG)((e=>e.designer)),t=e.asideWidth,i=(0,kp.TL)();function a(e){i(kp.u7.setAsideWidth(e))}return{width:t,update:a}}var JI=FI.Z.Content,$I=FI.Z.Header,eA=FI.Z.Footer,tA=FI.Z.Sider;function iA(e){var t=e.header,i=e.footer,a=e.sider,n=e.content,r=QI(),o=r.width,s=r.update;function l(e){Ph(e),e.preventDefault(),Fh(e,(e=>{var t=o+e;t=Math.max(t,560),t=Math.min(t,900),s(t)}))}return(0,Kg.jsxs)(FI.Z,{className:"designer-wrap designer-layout",children:[(0,Kg.jsx)($I,{children:t}),(0,Kg.jsxs)(FI.Z,{children:[(0,Kg.jsxs)(tA,{width:o,children:[a,(0,Kg.jsx)("div",{className:"asset-resize",onMouseDown:l})]}),(0,Kg.jsx)(JI,{children:n})]}),(0,Kg.jsx)(eA,{children:i})]})}var aA=iA,nA=(i(26780),i(72640));function rA(){var e=(0,kp.TL)(),t=kp.h.getState(),i=t.userInfo;function a(t){i.id===t.id&&i.vip_type===t.vip_type&&i.bind_phone===t.bind_phone||e(kp.TP.setUserInfo(t))}return a}function oA(){var e=(0,kp.CG)((e=>({userInfo:e.userInfo}))),t=e.userInfo;return t}function sA(){return kp.h.getState().userInfo.id}function lA(){return kp.h.getState().userInfo}function cA(e){kp.h.dispatch({type:"userInfo/setDownloadInfo",payload:e})}function dA(){var e=(0,kp.CG)((e=>({downloadInfo:e.userInfo.downloadInfo}))),t=e.downloadInfo;function i(e){(0,qe.Z)(t,e)||cA(e)}return{downloadInfo:t,update:i}}function uA(e){kp.h.dispatch(kp.TP.setBindPhone(e))}var pA=i(35978),vA=i.n(pA),mA={workbench:1,reload:2,help:3};function hA(e,t,i){var a="\u8fdb\u5165\u5de5\u4f5c\u53f0",n=()=>{var e=(0,_p.Z)(),t=e.redirect;Sh.close(),["module","designer"].includes(t)?window.open("https://movie.xiudodo.com/designer/workbench/#/myworks","_self"):window.open("https://xiudodo.com/myspace/drafts","_self")};switch(i){case mA.reload:a="\u5237\u65b0",n=()=>{Sh.close(),window.location.reload()};break;default:}nA.Z.confirm({title:(0,Kg.jsx)("h3",{children:e}),content:t,okText:a,zIndex:99999999999,centered:!0,mask:!0,okCancel:!1,icon:null,onOk:n})}function fA(){return{open:hA}}var gA=e=>{function t(){Qk(),nA.Z.destroyAll()}nA.Z.warning({title:(0,Kg.jsx)("h3",{style:{marginBottom:0},children:"\u64cd\u4f5c\u5931\u8d25,\u5df2\u4e3a\u4f60\u81ea\u52a8\u64a4\u9500\u5f53\u524d\u64cd\u4f5c!"}),closable:!0,content:(0,Kg.jsxs)("div",{style:{textAlign:"center"},children:[(0,Kg.jsx)("img",{style:{margin:"6px 0px"},alt:"",src:vA(),width:100,height:100}),(0,Kg.jsx)("div",{style:{marginTop:12},children:"\u626b\u7801\u5411\u5ba2\u670d\u53cd\u9988\u5931\u8d25\u7c7b\u578b"}),(0,Kg.jsxs)("div",{style:{color:"#7D5630",marginTop:8},children:["\u5931\u8d25\u7c7b\u578b: ",e]}),(0,Kg.jsx)(CS.Z,{type:"primary",block:!0,style:{width:240,height:40,marginTop:16},onClick:t,children:"\u77e5\u9053\u4e86"})]}),zIndex:99999999999,centered:!0,mask:!0,className:"saveError-modal",onCancel:t})},xA=()=>bp.g.get("/pay/pay-skus");function yA(e){return bp.g.get("/pay/upg-skus",{params:{pkg_id:e}})}var bA=e=>bp.g.get("/pay/check-order/".concat(e)),_A=(e,t,i)=>{var a=new FormData;return a.append("sku_code",e),a.append("source_srm",(null===t||void 0===t?void 0:t.source_srm)||""),a.append("focus_srm",(null===t||void 0===t?void 0:t.focus_srm)||""),(null===i||void 0===i?void 0:i.cid)&&a.append("cid",(null===i||void 0===i?void 0:i.cid)||""),(null===i||void 0===i?void 0:i.rch_type)&&a.append("rch_type",(null===i||void 0===i?void 0:i.rch_type)||""),(null===i||void 0===i?void 0:i.pkg_id)&&a.append("pkg_id",String(null===i||void 0===i?void 0:i.pkg_id)||""),bp.g.post("/pay/create-pay",{data:a})},jA=()=>bp.g.get("/download-api/info"),wA=e=>{var t=e.id,i=e.format,a=e.pixel_type,n=e.type,r=e.data;return bp.g.post("/download-api/apply-export",{body:"id=".concat(t,"&pixel_type=").concat(a,"&format=").concat(i,"&type=").concat(n||"","&nc_sessionId=").concat((null===r||void 0===r?void 0:r.sessionId)||"","&nc_sig=").concat((null===r||void 0===r?void 0:r.sig)||"","&nc_token=").concat((null===r||void 0===r?void 0:r.token)||""),headers:{"Content-Type":"application/x-www-form-urlencoded"}})};function kA(e){return bp.g.post("/api/user-save-templ?startTime=".concat((new Date).getTime()),{body:JSON.stringify(e)})}function TA(){return bp.g.get("/apiv2/get-invite-link")}function ZA(e){var t=e.frame_file,i=e.img_count,a=e.img_step;return bp.g.get("/video/small-frame-previews?frame_file=".concat(t,"&img_count=").concat(i,"&img_step=").concat(a))}function CA(e,t){return bp.g.post("/creator-api/template/".concat(e,"/submit"),{body:JSON.stringify(t)})}function NA(){return bp.g.get("/team/create-invite-link")}function SA(){return bp.g.get("/user/get-invite-link")}var IA=e=>{var t=new FormData;return e.forEach(((e,i)=>{t.append("download_ids[".concat(i,"]"),e)})),bp.g.post("/download-api/check-downloads",{data:t})};function AA(){return bp.g.get("/editor/module-class-list")}function PA(){return bp.g.get("/workspace/editor-menu-info")}var MA=e=>{var t={menu_mark:e};return bp.g.post("/workspace/editor-menu-set",{data:t})};function EA(e){return bp.g.post("/qrcode/wx-qrdecode",{data:e})}function LA(e){var t=e.doc,i=e.info,a=t.work,n=t.pageAttr,r=t.canvas,o=t.widgets,s=[];return a.forEach(((e,t)=>{var l,c,d,p,v=n.pageInfo[t];Array.isArray(n.aqe)&&(p=n.aqe[t]),s.push({canvas:(0,u.Z)((0,u.Z)({},r),{},{title:i.title}),assets:e,templateId:1===a.length?null!==(l=null!==(c=n.pageInfo[t].tid)&&void 0!==c?c:i.last_templ_id)&&void 0!==l?l:i.id:null!==(d=n.pageInfo[t].tid)&&void 0!==d?d:"",poster:v.rt_preview_image,preview:v.rt_preview_video,preview_url:i.preview_url||"",small_url:i.small_url||"",pageAttr:{backgroundColor:n.backgroundColor[t],backgroundImage:n.backgroundImage[t],pageInfo:v,sound:{list:[]},aqe:p},cameras:o&&o[t]&&o[t].cameras||[]})})),s}function DA(e){var t=Ik(),i=Gk(),a=(0,_p.Z)(),n=a.redirect,r={work:[],pageAttr:{backgroundColor:[],backgroundImage:[],pageInfo:[],sound:[{list:[]}],music:{audios:t.map((e=>(0,u.Z)((0,u.Z)({},e),{},{rt_id:void 0,rt_loadInfo:void 0}))),replaced:!!n&&i},aqe:[]},widgets:[]};return e.forEach((e=>{var t,i=e.assets,a=e.pageAttr,n=e.cameras;r.work.push(i),r.pageAttr.backgroundColor.push(a.backgroundColor),r.pageAttr.backgroundImage.push(a.backgroundImage),r.pageAttr.pageInfo.push((0,u.Z)((0,u.Z)({},a.pageInfo),{},{tid:String(null!==(t=e.templateId)&&void 0!==t?t:"")})),Array.isArray(a.aqe)&&r.pageAttr.aqe.push(a.aqe),r.widgets.push({cameras:n})})),{doc:r}}function RA(e){var t={rt_title:e.rt_title,resId:e.resId,type:2,rt_url:e.rt_url,startTime:e.startTime,endTime:e.endTime,volume:e.volume,isLoop:e.isLoop,rt_duration:e.rt_duration};return t}function zA(e){var t,i,a,n,r=e.doc.pageAttr,o=[];if(null!==r&&void 0!==r&&null!==(t=r.music)&&void 0!==t&&t.audios)o=r.music.audios;else if(null!==(i=r.sound)&&void 0!==i&&null!==(a=i[0])&&void 0!==a&&null!==(n=a.list)&&void 0!==n&&n.length){var s,l=0,c=(0,Xe.Z)(r.pageInfo);try{for(c.s();!(s=c.n()).done;){var d=s.value;l+=d.pageTime}}catch(p){c.e(p)}finally{c.f()}var u=RA(r.sound[0].list[0]);u.startTime=0,u.endTime=l,o.push(u)}return o}function FA(e){var t,i=e.doc.pageAttr;return null===i||void 0===i||null===(t=i.music)||void 0===t?void 0:t.replaced}function OA(e){var t=(0,_p.Z)(),i=t.upicId;function a(e){e.key===i&&Eh("-".concat(i),Date.now()),e.key==="-".concat(i)&&nA.Z.confirm({title:(0,Kg.jsx)("h3",{children:"\u60a8\u7684\u8349\u7a3f\u5df2\u5728\u5176\u4ed6\u9875\u9762\u6253\u5f00"}),content:"\u7ee7\u7eed\u7f16\u8f91\u5c06\u4f1a\u8986\u76d6\u539f\u6709\u8349\u7a3f\u6570\u636e\uff0c\u4e3a\u907f\u514d\u6570\u636e\u9519\u4e71\uff0c\u8bf7\u590d\u5236\u65b0\u8349\u7a3f\u540e\u518d\u8fdb\u5165\u7f16\u8f91",okText:"\u786e\u5b9a",zIndex:99999999999,centered:!0,mask:!0,okCancel:!1,icon:null,onOk:()=>{Sh.close(),window.open("https://xiudodo.com/myspace/videos?tag=all","_self")}})}e&&(i=e),i&&(Eh(i,Date.now()),window.removeEventListener("storage",a),window.addEventListener("storage",a,!1))}function BA(e){var t=Bp(),i=null!==e&&void 0!==e?e:{},a=i.upicid,n=(0,yp.Z)(i,["upicid"]),r=DA(zw()),o=(0,_p.Z)(),s=o.picId,l=o.pram,c=o.upicId,d=o.redirect,p=o.resourceId,v=(0,u.Z)({id:null!==a&&void 0!==a?a:c,picId:s,pram:l,title:t.title,lastTemplId:s||t.picId,from_gid:p,templ_id:t.templ_id>0?t.templ_id:t.picId,width:t.canvasInfo.width,height:t.canvasInfo.height,doc_md5:t.doc_md5,template_type:"module"===d?41:4,doc:(0,u.Z)({canvas:t.canvasInfo},r.doc)},n);return v}var WA=e=>{var t=BA(e);return t},VA=null;function UA(e,t){t?VA=setTimeout((()=>{kp.h.dispatch({type:"globalStatus/setUserSaveStat",payload:e}),2===e&&Sh.close()}),t):(VA&&clearTimeout(VA),kp.h.dispatch({type:"globalStatus/setUserSaveStat",payload:e}),2===e&&Sh.close())}function GA(e){kp.h.dispatch({type:"globalStatus/setUserSaveTime",payload:e})}function XA(){kp.h.dispatch({type:"globalStatus/setGuidePopover",payload:bm})}function qA(){kp.h.dispatch({type:"globalStatus/setLoginModal",payload:!0})}function HA(){kp.h.dispatch({type:"globalStatus/setCapacityToRemindModal",payload:!0})}var YA=function(){var e=(0,p.Z)(m().mark((function e(){var t,i,a,n,r,o,s,l,c,d,p,v,h,f,g,x,y,b,_,j,w,k=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=k.length>0&&void 0!==k[0]?k[0]:{},i=t.info,a=t.onSuccess,t.autoSave,n="designer"===(0,_p.Z)().redirect,UA(1),r=Bp(),o=BA(i),s=(0,_p.Z)(),l=s.renovate_type,c={},e.prev=7,!n){e.next=25;break}if(v=JSON.parse(JSON.stringify(o)),v.renovate_type=l,v.action_type=null===r||void 0===r?void 0:r.action_type,!o.id){e.next=18;break}return e.next=15,dv(v);case 15:p=e.sent,e.next=21;break;case 18:return e.next=20,cv(v);case 20:p=e.sent;case 21:Rp(null===(d=p.data)||void 0===d?void 0:d.info),c=(0,u.Z)({code:p.code},p.data),e.next=28;break;case 25:return e.next=27,kA(o);case 27:c=e.sent;case 28:h=c,f=h.stat,g=h.code,x=h.msg,1===f||0===g?(a&&a(c),GA((new Date).valueOf()),y=(0,_p.Z)(),y.picId,b=y.redirect,_=y.srm,UA(3),UA(2,1e3),Dp(c.info.doc_md5),OA(c.info.id),window.history.replaceState("",document.title,"?".concat((0,jp.stringify)({redirect:b,upicId:c.info.id,srm:_})))):-14===f?(hA("\u4fdd\u5b58\u5931\u8d25","\u5f53\u524d\u6a21\u677f\u4e0e\u767b\u5f55\u8d26\u53f7\u4e0d\u7edf\u4e00"),UA(5)):-15===f?(UA(5),hA("\u4fdd\u5b58\u5931\u8d25","\u5f53\u524d\u6a21\u677f\u5df2\u5728\u5176\u4ed6\u9875\u9762\u4fee\u6539\u5e76\u4fdd\u5b58\u8fc7\u5566\uff0c\u8bf7\u5237\u65b0\u540e\u8bfb\u53d6\u6700\u65b0\u8349\u7a3f\u4fdd\u5b58\u8bb0\u5f55\uff01",mA.reload)):-30===f?(null!==(j=kp.h.getState())&&void 0!==j&&null!==(w=j.globalStatus)&&void 0!==w&&w.downloadTheTransfiniteModal||HA(),UA(5)):(gA(x),UA(5)),1===f||n||Km("save_failed",{action_label:f}),e.next=40;break;case 33:e.prev=33,e.t0=e["catch"](7),n||Km("save_failed",{action_label:e.t0.type}),"Timeout"===e.t0.type?xp.default.error("\u4fdd\u5b58\u8d85\u65f6\uff0c\u8bf7\u68c0\u67e5\u60a8\u7684\u7f51\u7edc"):xp.default.error("\u4fdd\u5b58\u5931\u8d25\uff01\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01"),UA(6),console.error(e.t0),console.log(e.t0.type);case 40:case"end":return e.stop()}}),e,null,[[7,33]])})));return function(){return e.apply(this,arguments)}}(),KA=0,QA=function(){var e=(0,p.Z)(m().mark((function e(){var t,i,a,n,r,o,s=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:{},i=t.isChecked,a=t.info,n=t.autoSave,r=t.onSuccess,o=sA(),n||console.log("onSave",kp.h.getState().globalStatus.userSaveStat),1!==kp.h.getState().globalStatus.userSaveStat){e.next=6;break}return Km("save-loading"),e.abrupt("return");case 6:if(i||!(o<=0)){e.next=10;break}return UA(4),qA(),e.abrupt("return");case 10:YA({info:a,onSuccess:r,autoSave:n});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function JA(e){var t,i,a=2e3;return n=>{if(n.autoSave&&sA()<=0&&!n.isChecked){if(Mf().visible)return;if(KA+=1,KA<5)return;return XA(),void(KA=0)}t?(clearTimeout(t),clearTimeout(i),t=setTimeout((()=>{e(n),clearTimeout(i),i=setTimeout((()=>{t=void 0}),a)}),a)):(t=setTimeout((()=>{t=void 0}),a),e(n))}}var $A=JA(QA),eP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.onSuccess,i=e=>{var i=localStorage.getItem("saved");if(!i)return xp.default.success((0,Kg.jsxs)("span",{children:["\u6210\u529f\u4e0a\u4f20\u4e91\u7aef:\u60a8\u53ef\u76f4\u63a5\u8bbf\u95ee"," ",(0,Kg.jsx)("a",{href:"https://xiudodo.com/myspace/videos",children:"\u6211\u7684\u4f5c\u54c1"})," \u67e5"]})),void localStorage.setItem("saved","1");var a=5===kp.h.getState().globalStatus.userSaveStat;a?xp.default.success("\u4fdd\u5b58\u6210\u529f!"):xp.default.success("\u6587\u4ef6\u5df2\u4fdd\u5b58!"),t&&t(e)};e.onSuccess=i,$A(e)};window.EDITOR_DEBUG.handleSave=$A,window.EDITOR_DEBUG.getSaveParams=BA,window.EDITOR_DEBUG.copy=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";$A({info:{upicid:e}})},window.EDITOR_DEBUG.getSaveStatus=()=>{console.log("getSaveStatus",kp.h.getState().globalStatus.userSaveStat)};var tP=i(75431);function iP(e){var t=$f(),i=t.value,a=eg(),n=a.value,r=e.type,o=e.className,s=e.style,l=(0,yp.Z)(e,["type","className","style"]);return i&&n?(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("span",(0,u.Z)((0,u.Z)({role:"img",className:hb()("anticon",o),style:s},l),{},{children:(0,Kg.jsx)("svg",{width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false",children:(0,Kg.jsx)("use",{xlinkHref:"#".concat(r)})})}))}):(0,Kg.jsx)("div",{className:"anticon",style:{width:"1em",height:"1em",borderRadius:"50%",backgroundColor:"#e3e3e3"}})}var aP=()=>bp.g.get("/api/getuserinfo"),nP=e=>bp.g.get("/auth/wxlogin-code?authclient=official".concat(e)),rP=e=>bp.g.post("/auth/wxlogin-check",{body:"number=".concat(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),oP=e=>bp.g.get("/site/wechat-official-login",{params:{authclient:"wechat",isAjax:1,scope:"snsapi_login",number:e.weChatNumber,refer:"",auto_login:"",login_page:e.login_page}}),sP=e=>"//xiudodo.com/auth/auth-login?authclient=qq&isAjax=1".concat(e),lP=e=>bp.g.get("/site-api/send-tel-login-code?num=".concat(e)),cP=e=>bp.g.post("/auth/code-autologin?isAjax=1",{body:"telCode=".concat(e.phoneMsgNum,"&telNum=").concat(e.phoneNum),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),dP=[{type:"qq",id:"qq_refer",className:"qq-login-logo",icon:"iconQQ",text:"QQ\u767b\u5f55"},{type:"phone",id:"tel-login",className:"tel-login-logo",icon:"iconzu22",text:"\u624b\u673a\u767b\u5f55"},{type:"wx",id:"wx-login",className:"wx-login-logo",icon:"iconzu30",text:"\u5fae\u4fe1\u767b\u5f55"}];function uP(e){var t=e.loginCallback,i=e.closeLoginModal,a=(0,r.useRef)(null),o=(0,r.useRef)(null),s=(0,r.useState)({loginType:"wx",weChatLoginQrcodeSrc:"",weChatNumber:"",linkExtraStr:"",isInvalid:!1,loginError:"",phoneSendDisabled:!1}),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=(0,tP.Z)({onEnd:()=>{d((e=>(0,u.Z)((0,u.Z)({},e),{},{phoneSendDisabled:!1})))}}),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,DI.ZP)(aP,{manual:!0,pollingInterval:1e3,onSuccess:e=>{e.id>0&&(f.cancel(),xp.default.success("\u767b\u5f55\u6210\u529f\uff01"),i(),t(!0,e))}}),g=c.loginType,x=c.weChatNumber,y=c.linkExtraStr,b=c.phoneSendDisabled,_=c.weChatLoginQrcodeSrc,j=c.loginError,w=c.isInvalid;function k(){f.run()}var T=(0,DI.ZP)(oP,{manual:!0,onSuccess:()=>{k()}}),Z=(0,DI.ZP)(rP,{manual:!0,pollingInterval:1e3,onSuccess:e=>{"invalid"!==e.msg&&"expired"!==e.msg||(Z.cancel(),d((e=>(0,u.Z)((0,u.Z)({},e),{},{isInvalid:!0})))),1===e.stat&&(Z.cancel(),T.run({weChatNumber:x,login_page:""}))}}),C=(0,DI.ZP)(nP,{manual:!0,onSuccess:e=>{var t=e.stat,i=e.msg;1===t&&(d((e=>(0,u.Z)((0,u.Z)({},e),{},{weChatNumber:i.number,weChatLoginQrcodeSrc:i.Qrcode,isInvalid:!1}))),Z.run(i.number))}}),N=(0,DI.ZP)(lP,{manual:!0,onSuccess:e=>{var t=e.stat,i=e.msg;1===t?(d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"",phoneSendDisabled:!0}))),h(Date.now()+6e4)):d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:i})))}}),S=(0,DI.ZP)(cP,{manual:!0,onSuccess:e=>{var t=e.stat,i=e.msg;1===t?(d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:""}))),k()):d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:i})))}});function I(){window.open(sP(y),"","width=750, height=500, top=50, left=50"),k()}function A(){if(a.current){var e=a.current.value,t=void 0===e?"":e;""!==t&&/^1[3456789]\d{9}$/.test(t)?(d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:""}))),N.run(t)):d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"})))}}function P(){if(a.current&&o.current){var e=a.current.value,t=o.current.value;""!==e&&/^1[3456789]\d{9}$/.test(e)?""!==t?(d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:""}))),S.run({phoneNum:e,phoneMsgNum:t})):d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u9a8c\u8bc1\u7801"}))):d((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"})))}}function M(){d((e=>(0,u.Z)((0,u.Z)({},e),{},{weChatNumber:"",weChatLoginQrcodeSrc:""}))),C.run(y)}function E(e){["wx","qq"].includes(e)?M():Z.cancel(),"qq"===e?I():d((t=>(0,u.Z)((0,u.Z)({},t),{},{loginType:e})))}function L(e){Ph(e),13===e.keyCode&&A()}(0,r.useEffect)((()=>{Km("login"),C.run(y),d((e=>(0,u.Z)((0,u.Z)({},e),{},{linkExtraStr:y})))}),[]);var D=hb()({"res-qrcode-box":!0,"show-mask":w});return(0,Kg.jsxs)("div",{className:"registration modal_dialog",children:[(0,Kg.jsxs)("div",{className:"reg-content-left",children:[(0,Kg.jsxs)("div",{className:"reg-slogan",children:[(0,Kg.jsxs)("h2",{children:["\u79c0\u591a\u591a ",(0,Kg.jsx)("div",{className:"h2Label",children:"\u6b63\u7248\u6388\u6743 \u53ef\u5546\u7528"})]}),(0,Kg.jsx)("p",{children:"\u4eba\u4eba\u90fd\u4f1a\u7528\u7684"}),(0,Kg.jsx)("p",{children:"\u5728\u7ebf\u89c6\u9891\u7f16\u8f91\u795e\u5668"})]}),(0,Kg.jsxs)("div",{className:"reg-tips",children:[(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("i",{className:"i-check-mark"}),(0,Kg.jsx)("span",{children:"\u6d77\u91cf\u89c6\u9891 \u5728\u7ebf\u7f16\u8f91"})]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("i",{className:"i-check-mark"}),(0,Kg.jsx)("span",{children:"\u767e\u4e07\u7d20\u6750 \u52a9\u529b\u521b\u4f5c"})]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("i",{className:"i-check-mark"}),(0,Kg.jsx)("span",{children:"\u4e91\u7aef\u540c\u6b65 \u6211\u7684\u8bbe\u8ba1"})]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("i",{className:"i-check-mark"}),(0,Kg.jsx)("span",{children:"\u5546\u7528\u6388\u6743 \u5b89\u5fc3\u65e0\u5fe7"})]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("i",{className:"i-check-mark"}),(0,Kg.jsx)("span",{children:"\u514d\u8d39\u4e0b\u8f7d \u767b\u5f55\u5373\u4eab"})]})]})]}),(0,Kg.jsxs)("div",{className:"reg-content",children:[(0,Kg.jsxs)("div",{id:"res-wechat-login",style:{display:"wx"===g?"":"none"},children:[(0,Kg.jsx)("div",{className:"tel-login-title",children:(0,Kg.jsx)("span",{children:"\u5fae\u4fe1\u626b\u7801\u7acb\u5373\u767b\u5f55"})}),(0,Kg.jsx)("div",{className:"res-head-tip",children:"\u4ec5\u97001\u6b65 \u8f7b\u677e\u767b\u5f55"}),(0,Kg.jsx)("div",{className:"logo-character"}),(0,Kg.jsxs)("div",{className:D,children:[(0,Kg.jsxs)("div",{className:"res-mask",onClick:M,children:["\u4e8c\u7ef4\u7801\u5931\u6548",(0,Kg.jsx)("br",{}),"\u8bf7\u70b9\u51fb\u5237\u65b0"]}),""===_?(0,Kg.jsx)("img",{alt:"wechat",className:"wx-sys",src:"//js.xiudodo.com/index_img/pay/wx-sys.gif"}):(0,Kg.jsx)("img",{alt:"wechat",id:"wx_refer",src:_,onClick:M,className:"res-qrcode"})]}),(0,Kg.jsx)("p",{id:"login_account_tip",children:(0,Kg.jsx)("span",{children:"\u5fae\u4fe1\u548cQQ\u662f\u4e24\u4e2a\u72ec\u7acb\u8d26\u53f7\uff0c\u8d26\u53f7\u4fe1\u606f\u4e0d\u4e92\u901a"})})]}),(0,Kg.jsxs)("div",{id:"tel-login-box",style:{display:"phone"===g?"":"none"},children:[(0,Kg.jsx)("div",{className:"tel-login-title",children:(0,Kg.jsx)("span",{children:"\u624b\u673a\u9a8c\u8bc1\u7801\u767b\u5f55"})}),(0,Kg.jsxs)("div",{className:"tel-login-input-area",children:[(0,Kg.jsx)("input",{ref:a,onKeyDown:L,type:"tel",className:"tel-login-number",placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7"}),(0,Kg.jsxs)("div",{className:"tel-login-send-code",children:[(0,Kg.jsx)("input",{onKeyDown:Ph,ref:o,type:"tel",className:"tel-login-tel-code",placeholder:"\u77ed\u4fe1\u9a8c\u8bc1\u7801"}),b?(0,Kg.jsx)("span",{className:b?"submit-disabled":"",children:b?"\u91cd\u65b0\u53d1\u9001 (".concat(Math.round(m/1e3),")"):"\u53d1\u9001\u9a8c\u8bc1\u7801"}):(0,Kg.jsx)("span",{id:"send-code-btn",onClick:A,children:"\u53d1\u9001\u9a8c\u8bc1\u7801"})]}),(0,Kg.jsx)("div",{className:"tel-login-error",style:""!==j?{opacity:1}:{},children:j}),(0,Kg.jsx)("span",{className:"tel-login-submit",onClick:P,children:"\u7acb\u5373\u767b\u5f55"})]})]}),(0,Kg.jsx)("div",{className:"reg-pullNew",children:(0,Kg.jsxs)("p",{children:["\u767b\u5f55\u5373\u4eab ",(0,Kg.jsx)("span",{children:"\u6bcf\u65e51\u6b21\u514d\u8d39\u4e0b\u8f7d"})]})}),(0,Kg.jsx)("div",{className:"res-qq-login",children:dP.map((e=>(0,Kg.jsxs)("div",{id:e.id,style:{display:g===e.type?"none":""},onClick:()=>E(e.type),children:[(0,Kg.jsx)("div",{className:e.className,children:(0,Kg.jsx)(iP,{type:e.icon})}),e.text]},e.id)))}),(0,Kg.jsx)("div",{className:"protocol",children:(0,Kg.jsxs)("p",{children:["\u767b\u5f55\u5373\u89c6\u4e3a\u540c\u610f",(0,Kg.jsx)("a",{href:"//xiudodo.com/page/1",target:"_blank",rel:"noreferrer",children:"\u300a\u79c0\u591a\u591a\u7f51\u7edc\u670d\u52a1\u4f7f\u7528\u534f\u8bae\u300b"}),"\u548c",(0,Kg.jsx)("a",{href:"//xiudodo.com/page/17",target:"_blank",rel:"noreferrer",children:"\u300a\u79c0\u591a\u591a\u7528\u6237\u9690\u79c1\u6761\u6b3e\u300b"})]})})]})]})}var pP=(0,r.memo)(uP),vP=()=>{var e=yf(),t=e.startLoop,i=e.closeLoginAlert,a=e.closeReLoginTips,n=bf(),o=n.loginModal,s=n.closeLoginModal,l=rA(),c=(0,r.useRef)(),d=e=>{var t;return null===(t=window.xiuLib)||void 0===t?void 0:t.md5("brhe7HJ943hfjkdsbcKNQYIUV78hjkuyeqwaBH87".concat(e)).substring(0,8)},u=()=>"".concat(d(~~(Date.now()/6e3)),"+").concat(d(1+~~(Date.now()/6e3)));function p(e,n){var r;e&&(l(n),s(),i(),t(),a(),"watermark"!==(0,_p.Z)().redirect&&$A({isChecked:!0}),null===(r=c.current)||void 0===r||r.ipcRenderer.sendToHost("loggedIn"))}return(0,r.useEffect)((()=>{var e,t;c.current=null===(e=(t=window).getXiuInterface)||void 0===e?void 0:e.call(t,u())}),[]),(0,Kg.jsx)(nA.Z,{footer:null,destroyOnClose:!0,className:"no-title-modal",title:null,style:{top:"25%"},visible:o,onCancel:()=>{var e;null===(e=c.current)||void 0===e||e.ipcRenderer.sendToHost("closeNewTab"),s()},width:638,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsx)(pP,{loginCallback:p,closeLoginModal:s})})},mP=vP,hP="TEMPLATE_DRAG",fP="MUSIC_DRAG",gP=["videoE","video","image","pic","SVG","mask","lottie","text","module","TEMPLATE_DRAG","part"],xP=i(52963);function yP(e){var t=e.src;return(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",background:"#e3e7eb url(".concat(t,") center center / contain no-repeat")}})}function bP(e){var t,i,a,n=e.attribute,r=Kb();return(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",background:"pink",textAlign:"center",color:(null===n||void 0===n?void 0:n.color)&&Oh(null===n||void 0===n?void 0:n.color),fontSize:(null===n||void 0===n?void 0:n.fontSize)*r.scale||50,lineHeight:n.lineHeight,fontWeight:n.fontWeight,backgroundColor:(null===n||void 0===n||null===(t=n.textBackground)||void 0===t?void 0:t.color)&&Oh(null===n||void 0===n||null===(i=n.textBackground)||void 0===i?void 0:i.color)},children:null!==(a=n.text)&&void 0!==a?a:"\u53cc\u51fb\u7f16\u8f91\u6587\u5b57"})}var _P={position:"fixed",pointerEvents:"none",zIndex:100,left:0,top:0,width:"100%",height:"100%"},jP="".concat(fb.PP,"/xiudodo-editor/image/logo/logo.png"),wP=(0,hp.Pi)((()=>{var e=Kb(),t=(0,r.useRef)(null),i=(0,r.useRef)(0),a=(0,r.useState)({width:0,height:0}),o=(0,n.Z)(a,2),s=o[0],l=o[1],c={width:152,height:86},d=(0,xP.f)((e=>({item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}))),p=d.itemType,v=d.isDragging,m=d.item,h=d.initialOffset,f=d.currentOffset;function g(){var e;if(m){var t="";switch(p){case"pic":t=null===m||void 0===m?void 0:m.attribute.picUrl;break;case"text":var i,a;if(!(null!==m&&void 0!==m&&null!==(i=m.attribute)&&void 0!==i&&i.effect||null!==m&&void 0!==m&&null!==(a=m.attribute)&&void 0!==a&&a.effectColorful))return(0,Kg.jsx)(bP,{attribute:m.attribute});t=null===m||void 0===m?void 0:m.attribute.rt_preview_url;break;default:t=(null===m||void 0===m||null===(e=m.attribute)||void 0===e?void 0:e.rt_preview_url)||jP;break}return(0,Kg.jsx)(yP,{src:t})}}var x=(0,r.useMemo)((()=>{var t,a,n,r,o=zu();if(!h||!f||!m||!s)return{display:"block"};var l,d,u=f.x,v=f.y;"text"!=p?(n=(u-h.x)/i.current*Number(s.width),r=(u-h.x)/i.current*Number(s.height),n=Math.max(c.width,n),n=Math.min(s.width,n),r=Math.max(c.height,r),r=Math.min(s.height,r)):null!==m&&void 0!==m&&null!==(l=m.attribute)&&void 0!==l&&l.effect||null!==m&&void 0!==m&&null!==(d=m.attribute)&&void 0!==d&&d.effectColorful?(n=c.width,r=c.height):(n=m.attribute.width*e.scale,r=m.attribute.height*e.scale);var g={x:u+m.offset.offsetLeft,y:v+m.offset.offsetTop},x={x:g.x-n*m.offset.offsetLeftPercent,y:g.y-r*m.offset.offsetTopPercent},y="translate(".concat(x.x,"px,").concat(x.y,"px)"),b=(null===(t=m.attribute)||void 0===t||null===(a=t.textBackground)||void 0===a?void 0:a.opacity)/100||.8;return o.length>0&&(b=.3),{width:n,height:r,transform:y,WebkitTransform:y,opacity:b}}),[f]);return(0,r.useEffect)((()=>{if(v&&h){var a=B();t.current=a,i.current=a.left-(null===h||void 0===h?void 0:h.x),l("module"!==p?{width:m.attribute.width*e.scale,height:m.attribute.height*e.scale}:c)}}),[v,h]),(0,Kg.jsx)(Kg.Fragment,{children:v?(0,Kg.jsx)("div",{style:(0,u.Z)({},_P),children:(0,Kg.jsx)("div",{style:x,children:g()})}):null})}));function kP(){var e=(0,xP.f)((e=>({item:e.getItem(),itemType:e.getItemType()}))),t=e.itemType,i=e.item;return gP.includes(t)&&null!==i&&void 0!==i&&i.offset?(0,Kg.jsx)(wP,{}):null}i(67331);var TP=i(32559),ZP=i(24400),CP=i.n(ZP);function NP(){var e=(0,r.useRef)(),t=Ub(),i=t.currentTime,a=t.setCurrentTime,o=Yb(),s=o.isPlaying,l=o.pauseVideo,c=o.playVideo,d=Mw(),u=(0,n.Z)(d,1),p=u[0];return(0,Kg.jsxs)("div",{className:CP().wrap,children:[(0,Kg.jsxs)("div",{className:CP().controls,children:[(0,Kg.jsxs)("div",{className:CP().left,children:[(0,Kg.jsx)("div",{className:CP()["play-icon"],children:(0,Kg.jsx)(iP,{type:s?"iconzanting":"iconbofang",onClick:s?l:c})}),(0,Kg.jsxs)("span",{children:[Th(parseInt("".concat(i/1e3),10))," /"," ",Th(parseInt("".concat(p/1e3),10))]})]}),(0,Kg.jsx)("div",{className:CP().right})]}),(0,Kg.jsx)("div",{children:(0,Kg.jsx)(TP.Z,{ref:e,value:i/p*100,style:{width:"100%"},onChange:e=>{l(),a(Math.floor(p*(e/100)))},onAfterChange:()=>{e.current&&e.current.blur()},tooltipVisible:!1})})]})}var SP=(0,hp.Pi)(NP),IP=0,AP=1;function PP(e,t){var i=t.height-IP,a=i/e.height,n=e.width*a,r=t.width*AP;return n>r?r/e.width:(Math.floor(100*a)/100).toFixed(2)}var MP=e=>{var t=e.className,i=e.previewWhole,a=e.scene,n=e.controls,o=e.spaceControl,s=void 0===o||o,l=e.watermark,c=void 0!==l&&l,d=Ep(),p=d.value,v=(0,r.useRef)(null),m=(0,Cm.Z)(v);(0,aC.Z)(["space"],(e=>{e.stopPropagation(),Km("keyPress_playPreviewVideo"),s&&Jb()}));var h=(0,r.useMemo)((()=>{var e=p,t=e.height,i=e.width,a=1;return m.width&&t&&i&&(a=PP({height:t,width:i},m)),{scale:a}}),[p,m]);return(0,Kg.jsx)("div",{className:hb()("preview-video-wrap",t,a,{"preview-scene":a}),ref:v,onKeyDown:e=>Ph(e),children:(0,Kg.jsxs)("div",{className:"preview-video",children:[(0,Kg.jsx)("div",{hidden:!c,className:"preview-watermark",style:(0,u.Z)((0,u.Z)({},p),{},{transform:"scale(".concat(h.scale,")")})}),(0,Kg.jsx)(PI,{canvasInfo:(0,u.Z)((0,u.Z)({},h),p),previewWhole:i}),n&&(0,Kg.jsx)("div",{style:{position:"absolute",width:"100%",zIndex:9e4,bottom:0,padding:"25px 0 10px",background:"linear-gradient(to top,rgba(0,0,0,0.2),rgba(0,0,0,0))"},children:(0,Kg.jsx)(SP,{})})]})})},EP=(0,r.memo)(MP),LP=i(5493),DP=i.n(LP);function RP(e){var t=e.visible,i=void 0===t||t,a=e.onCancel;return(0,Kg.jsx)(nA.Z,{title:"\u9884\u89c8\u89c6\u9891",visible:i,onCancel:a,width:947,footer:!1,className:DP()["preview-modal"],destroyOnClose:!0,maskClosable:!1,centered:!0,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsx)(EP,{className:DP()["preview-video"],controls:!0})})}function zP(e){var t=e.visible,i=e.onCancel,a=e.title,n=e.Content;return(0,Kg.jsx)(nA.Z,{title:a,centered:!0,visible:t,width:"100%",onCancel:i,footer:!1,destroyOnClose:!0,maskClosable:!1,wrapClassName:"designer-submit-modal-wrap",getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsx)(n,{onClose:i})})}i(90140);var FP=i(69984),OP=(i(5317),i(87555)),BP=(i(52222),i(65507)),WP=(i(44862),i(42091)),VP=(i(68137),i(56239)),UP=(i(67604),i(46906)),GP=(i(14943),i(74356)),XP=i(49101),qP=["lime","green","cyan","blue","geekblue","purple"];function HP(e){var t=e.value,i=void 0===t?[]:t,a=e.onChange,o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(""),u=(0,n.Z)(d,2),p=u[0],v=u[1];function m(){c(!0)}function h(e){var t=e.target.value;t=t.replace(/\s+/g,""),p&&a&&a([...i,t]),v("")}function f(e){i.splice(e,1),a&&a(i)}return(0,Kg.jsxs)(Kg.Fragment,{children:[i.map(((e,t)=>(0,Kg.jsx)(GP.Z,{color:qP[t%6],closable:!0,onClose:()=>f(t),children:e},"tag_".concat(t)))),l?(0,Kg.jsx)(VP.Z,{value:p,onChange:e=>{v(e.target.value)},size:"small",className:"tag-input",onBlur:e=>{h(e),c(!1)},onPressEnter:h,onKeyDown:Ph,onPaste:Ph,style:{width:100},autoFocus:!0}):(0,Kg.jsxs)(GP.Z,{className:"site-tag-plus",onClick:m,children:[(0,Kg.jsx)(XP.Z,{})," \u6dfb\u52a0"]})]})}i(84786);var YP=i(58217),KP=(i(59560),i(2844)),QP=i(66448);function JP(e){var t=e.visible,i=e.children,a=e.keyName,o=e.className,s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1];return(0,r.useEffect)((()=>{t&&!c&&setTimeout((()=>{d(!0)}))}),[t]),(0,Kg.jsx)("div",{style:(0,u.Z)({height:"100%"},wh(t)),className:hb()("xiudodo-lazyLoad",o),children:c&&(0,Kg.jsx)(QP.Z,{forcedReplay:t,type:"left",delay:300,style:{height:"100%"},children:(0,Kg.jsx)("div",{className:"xiudodo-lazyload-content",style:{height:"100%"},children:i},"queueAnim-".concat(a))})})}var $P,eM=(0,r.memo)(JP),tM=(i(55939),i(16326));(function(e){e[e["Stopped"]=-1]="Stopped",e[e["Paused"]=0]="Paused",e[e["Playing"]=1]="Playing"})($P||($P={}));class iM{constructor(e,t,i,a,n){this.node=void 0,this.loopReportTimer=void 0,this.startTime=void 0,this.playStatus=$P.Stopped,this.onCurrentTimeChange=void 0,this.onEnd=void 0,this.endTime=void 0,this.correctCurrentTime=e=>{this.node.currentTime=e},this.getCurrentTime=()=>this.node?this.node.currentTime:-1,this.setCurrentTime=e=>{this.node&&(this.node.currentTime=e)},this.setVolume=e=>{this.node&&(this.node.volume=e)},this.clearRAF=()=>{this.loopReportTimer&&cancelAnimationFrame(this.loopReportTimer)},this.loopReport=()=>{this.playStatus===$P.Playing&&(this.onCurrentTimeChange(this.getCurrentTime()),this.clearRAF(),this.loopReportTimer=setTimeout((()=>{this.loopReport()}),200))},this.play=e=>{this.node.currentTime=e,this.node.play(),this.playStatus=$P.Playing,this.loopReport()},this.pause=()=>{this.clearRAF(),this.playStatus=$P.Paused,this.node&&(this.node.pause(),this.node.ontimeupdate=null)},this.stop=()=>{this.playStatus=$P.Stopped,this.pause(),this.node.currentTime=0},this.setTime=e=>{this.node.currentTime=e},this.node=e,this.startTime=t,this.endTime=i,this.onCurrentTimeChange=a,this.onEnd=n}}var aM=i(43334);function nM(){var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=Ob(),s=o.isPlaying,l=o.playVideo,c=o.pauseVideo,d=Qb(),u=d.loadComplete;function p(){c();var e=Pb();Lb(100*Math.round(e/100),!1)}function v(){l(),Ah.closeWindowsLoading()}function m(){u?v():(a(!0),Ah.openWindowsLoading())}return(0,r.useEffect)((()=>{i&&u&&(a(!1),setTimeout((()=>{v()}),50))}),[i,u]),{isPlaying:s,pauseVideo:p,playVideo:m}}var rM=i(70044),oM=i.n(rM);function sM(e){var t=e.onReplace,i=e.resId,a=e.value,o=e.clickAwayTarget,s=e.volume,l=e.playingId,c=e.setPlayingId,d=(0,r.useRef)(null),u=(0,r.useState)(!1),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=Math.floor(Number(a.total_time)/1e3/60),f=Math.round(Number(a.total_time)/1e3%60),g=(0,r.useState)(!1),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=(0,r.useState)(0),j=(0,n.Z)(_,2),w=j[0],k=j[1],T=(0,r.useRef)(null),Z=(0,r.useRef)(null),C=Number(a.total_time),N=nM(),S=N.isPlaying,I=N.pauseVideo,A=e=>{e.stopPropagation(),Z.current&&(y?Z.current.pause():(Z.current.play(w),I()),c&&l!==a.id&&c(a.id),b(!y))};function P(){var e;null===(e=Z.current)||void 0===e||e.stop(),b(!1),k(0)}(0,aM.Z)((()=>{P()}),null!==o&&void 0!==o?o:d),(0,r.useEffect)((()=>{s&&Z.current&&Z.current.setVolume(s)}),[s]),(0,r.useEffect)((()=>{c&&l!==a.id&&P()}),[l]),(0,r.useEffect)((()=>{1e3*w>=C&&P()}),[w]),(0,r.useEffect)((()=>{S&&y&&P()}),[S]);var M=()=>Math.round(1e3*w/C*100);function E(){T.current&&(Z.current=new iM(T.current,0,C,k))}function L(e){t&&(t(e),xp.default.success("\u66ff\u6362\u6210\u529f\uff01")),P(),Fb()}return(0,Kg.jsxs)("div",{className:oM()["music-list-item"],ref:d,onMouseEnter:()=>{m(!0)},children:[v&&(0,Kg.jsx)("audio",{ref:T,src:a.preview,loop:!1,onCanPlay:E,children:"\u7cdf\u7cd5\u4e86\u8001\u94c1\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301audio,\u8bf7\u5c1d\u8bd5\u5347\u7ea7"}),(0,Kg.jsxs)("div",{children:[a.title,".MP3",t&&(0,Kg.jsx)("div",{className:oM()["action-btn"],onClick:()=>L(a),children:i>-1?"\u66ff\u6362":"\u6dfb\u52a0"})]}),(0,Kg.jsxs)("div",{className:oM()["music-play-area"],children:[(0,Kg.jsx)("div",{className:oM()["play-icon"],onClick:A,children:(0,Kg.jsx)(iP,{type:y?"iconzanting":"iconbofang"})}),(0,Kg.jsx)(tM.Z,{style:{flex:1,margin:"0 10px"},strokeColor:{"0%":"red","100%":"#484E5F"},showInfo:!1,percent:M()}),(0,Kg.jsx)("div",{className:oM()["music-time"],children:"".concat(h<10?"0".concat(h):h,":").concat(f<10?"0".concat(f):f)})]})]},a.id)}(0,hp.Pi)(sM);var lM=i(74833);function cM(e){var t=e.value,i=e.onChange,a=e.max,o=void 0===a?100:a,s=e.className,l=(0,yp.Z)(e,["value","onChange","max","className"]),c=Ub(),d=c.currentTime,p=c.setCurrentTime,v=(0,r.useRef)(null),m=(0,Cm.Z)(v),h=m.width,f=void 0===h?0:h;function g(e,a,r){var o,s=t?[...t]:[];s[null!==r&&void 0!==r?r:s.length]=e;for(var l=[],c=(0,lM.Z)((0,dg.Z)(s,(e=>e[0]))),d=0;d<c.length;){var u=c[d],v=c[d+1],m=c[d+2];v>=m?(l.push([u,c[d+3]]),d+=4):(l.push([u,c[d+1]]),d+=2)}var h=0;l.forEach((e=>{var t=(0,n.Z)(e,2),i=t[0],a=t[1];h+=a-i})),h>3e3||(i&&i(l),p(null!==(o=a[0])&&void 0!==o?o:a))}function x(e,i,a){Ph(e),e.preventDefault(),Fh(e,(e=>{var r,s=[...t[i]],l=Math.ceil(e/f*o),c=s[a];a>=0?(c+=l,s[a]=c):s=[s[0]+l,s[1]+l];var d=s,u=(0,n.Z)(d,2),p=u[0],v=u[1];v-p<100||v>o||p<0||g(s,null!==(r=c)&&void 0!==r?r:s,i)}),(()=>{}))}function y(e){var t=(0,n.Z)(e,2),i=t[0],a=t[1],r=i/o*100,s=a/o*100;return{left:r,right:s,width:s-r}}return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({ref:v,className:"xdd-designer-slider-range ".concat(s),onMouseDown:e=>{var i,a,n=null===(i=v.current)||void 0===i?void 0:i.getBoundingClientRect(),r=n.x,s=e.clientX,l=s-r,c=Math.ceil(l/f*o),d=c+500;d>o&&(d=o,c=d-500),g([c,d],c,null!==(a=null===t||void 0===t?void 0:t.length)&&void 0!==a?a:0)}},l),{},{children:[(0,Kg.jsx)("div",{className:"slider-rail"}),Array.isArray(t)&&t.map(((e,a)=>{var n=y(e),r=n.left,o=n.right,s=n.width;return[(0,Kg.jsx)("div",{className:"slider-handler",style:{left:"".concat(r,"%")},onMouseDown:e=>x(e,a,0)},"handler-left-".concat(a)),(0,Kg.jsx)("div",{className:"slider-track slider-track-".concat(a),style:{left:"".concat(r,"%"),width:"".concat(s,"%"),cursor:"move"},onMouseDown:e=>{x(e,a,-1)}},"slider-track-".concat(a)),(0,Kg.jsxs)("div",{className:"slider-mark",style:{left:"".concat(r+s/2,"%")},onMouseDown:Ph,children:[(0,Kg.jsx)("span",{className:"duation",children:"".concat(Th(Number("".concat(((e[1]-e[0])/1e3).toFixed(2)))),"s")}),(0,Kg.jsx)("span",{className:"action",onClick:()=>{t.splice(a,1),i&&i([...t])},children:"\u53d6\u6d88\u5c01\u9762"})]},"mark-".concat(a)),(0,Kg.jsx)("div",{className:"slider-handler",style:{left:"".concat(o,"%")},onMouseDown:e=>x(e,a,1)},"handler-right-".concat(a))]})),(0,Kg.jsx)("div",{className:"slider-step",onMouseDown:e=>{e.preventDefault(),Fh(e,(e=>{var t=e/f*o;p(Math.max(0,t+d))}))},style:{left:"".concat(d/o*100,"%"),transform:"translate(-50%)"}})]}))}var dM=(0,hp.Pi)(cM),uM=(0,hp.Pi)((e=>{var t=e.value,i=e.max,a=e.onChange,n=Ub(),o=n.currentTime,s=n.setCurrentTime,l=(0,r.useRef)();function c(){var e;l.current&&(null===(e=l.current)||void 0===e||e.blur())}return(0,Kg.jsx)(TP.Z,{handleStyle:{background:"#5A4CDB",width:10,height:16,borderRadius:0,top:-10,borderBottomLeftRadius:"50%",borderBottomRightRadius:"50%"},ref:l,max:i,value:o,className:"designer-slider-wrap",tooltipVisible:!0,onChange:e=>{s(e)},onAfterChange:c,style:{width:"100%"},tipFormatter:e=>e!==t&&(0,Kg.jsx)("div",{style:{top:40,color:"red"},onMouseDown:Ph,onClick:t=>{a(e),c()},children:"\u8bbe\u4e3a\u5c01\u9762"}),getTooltipPopupContainer:e=>e,tooltipPlacement:"bottom",marks:null!==t&&void 0!==t&&t?{[t]:(0,Kg.jsx)("div",{onMouseDown:Ph,onClick:()=>{a(),c()},children:"\u53d6\u6d88\u5c01\u9762"})}:{}})}));function pM(e){var t,i=e.form,a=e.hasDynamic,o=void 0===a||a,s=(0,r.useRef)(null),l=(0,r.useState)(!1),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)(),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)("static"),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,r.useState)([]),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=null===(t=Bp())||void 0===t?void 0:t.dataInfo,T=Yb(),Z=T.isPlaying,C=T.pauseVideo,N=T.playVideo,S=Ub(),I=S.currentTime,A=S.setCurrentTime,P=Mw(),M=(0,n.Z)(P,1),E=M[0],L=e=>{var t=e.disabled;return(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"right",alignItems:"center",margin:"10px 0"},children:["\u5c01\u9762\u9884\u89c8\uff1a",(0,Kg.jsx)(KP.Z,{checked:d,ref:s,onChange:e=>{var t;u(e),C(),null===(t=s.current)||void 0===t||t.blur()},disabled:t})]})},D=(0,Kg.jsx)("div",{className:"designer-submit-play",onClick:Z?C:N,children:(0,Kg.jsx)(iP,{type:Z?"iconzanting":"iconbofang"})});return(0,r.useEffect)((()=>{var e=i.getFieldValue("cover_lives")||[];!Z&&Array.isArray(e[j[0]])&&(A(e[j[0]][0]),N()),Z&&e[j[0]]&&I>=e[j[0]][1]&&(C(),w([j[1],j[1]+1]))}),[j,I]),(0,r.useEffect)((()=>{var e=0,t=i.getFieldsValue(),a=t.cover_time,n=t.cover_lives;switch(x){case"static":h(null!==a&&void 0!==a&&a),a?e=a:u(!1);break;case"dynamic":var r;if(h(null!==n&&void 0!==n&&n),n)e=null!==(r=null===n||void 0===n?void 0:n[0][0])&&void 0!==r?r:0;else u(!1);break}A(e)}),[x,d]),(0,Kg.jsxs)("div",{className:"designer-video-cover-wrap",children:[(0,Kg.jsxs)(YP.Z,{destroyInactiveTabPane:!0,activeKey:x,onChange:e=>y(e),children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u9759\u6001\u5c01\u9762\u8bbe\u7f6e"},"static"),o&&(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u52a8\u6001\u5c01\u9762\u8bbe\u7f6e"},"dynamic")]}),(0,Kg.jsxs)("div",{style:{height:300,position:"relative"},children:[(0,Kg.jsx)(EP,{spaceControl:!d}),"dynamic"===x&&d&&!Z&&(0,Kg.jsx)("div",{className:"designer-video-cover-play",onClick:()=>w([0,1]),children:(0,Kg.jsx)(iP,{type:"iconbofang"})})]}),(0,Kg.jsx)(L,{disabled:!m}),(0,Kg.jsxs)("div",{style:{display:"flex",alignItems:"center",marginBottom:20,marginTop:20},hidden:d,children:[D,(0,Kg.jsx)(UP.Z.Item,{noStyle:!0,hidden:"static"!==x,name:"cover_time",messageVariables:{label:"\u9759\u6001\u5c01\u9762"},rules:[{required:!0}],style:{display:"static"===x?"inline-block":"none",width:"100%",marginBottom:0},getValueFromEvent:e=>(h(null!==e&&void 0!==e&&e),e),children:(0,Kg.jsx)(uM,{max:E})}),o&&(0,Kg.jsx)(UP.Z.Item,{noStyle:!0,hidden:"dynamic"!==x,name:"cover_lives",rules:[{required:4!==(null===k||void 0===k?void 0:k.template_type)}],messageVariables:{label:"\u52a8\u6001\u5c01\u9762"},style:{display:"dynamic"===x?"inline-block":"none",width:"100%",marginBottom:0},getValueFromEvent:e=>(h(null!==e&&void 0!==e&&e),e),children:(0,Kg.jsx)(dM,{max:E})})]})]})}var vM=(0,hp.Pi)(pM),mM=[{id:708,name:"IT\u4e92\u8054\u7f51"},{id:707,name:"\u529e\u516c\u767e\u8d27"},{id:780,name:"\u7535\u5546\u6dd8\u5b9d"},{id:47,name:"\u5e7f\u544a\u4f20\u5a92"},{id:36,name:"\u6559\u80b2\u57f9\u8bad"},{id:260,name:"\u5730\u4ea7\u5bb6\u5c45"},{id:837,name:"\u7f8e\u5986\u7f8e\u5bb9"},{id:128,name:"\u8fd0\u52a8\u5065\u8eab"},{id:106,name:"\u9910\u996e\u7f8e\u98df"},{id:67,name:"\u65c5\u6e38\u51fa\u884c"},{id:711,name:"\u6bcd\u5a74\u4eb2\u5b50"},{id:68,name:"\u91d1\u878d\u7406\u8d22"},{id:788,name:"\u4e2a\u4eba\u751f\u6d3b"}],hM=[{id:790,name:"\u4f01\u4e1a\u5ba3\u4f20"},{id:773,name:"\u8282\u65e5\u8282\u6c14\u795d\u798f"},{id:834,name:"\u5feb\u95ea\u89c6\u9891"},{id:795,name:"\u6559\u80b2\u57f9\u8bad"},{id:793,name:"\u5012\u8ba1\u65f6"},{id:794,name:"\u5546\u52a1\u9080\u8bf7\u51fd"},{id:1047,name:"\u7247\u5934\u7247\u5c3e"},{id:776,name:"\u62db\u8058\u89c6\u9891"},{id:1077,name:"\u4f01\u4e1a\u6587\u5316"},{id:769,name:"\u603b\u7ed3\u62a5\u544a"},{id:1080,name:"\u653e\u5047\u901a\u77e5"}],fM=[{id:75,name:"\u5927\u6c14"},{id:80,name:"\u5feb\u95ea"},{id:78,name:"\u7c92\u5b50"},{id:77,name:"\u79d1\u6280"},{id:79,name:"\u5b9e\u62cd"},{id:72,name:"\u4e2d\u56fd\u98ce"},{id:82,name:"\u63d2\u753b\u98ce"},{id:76,name:"\u6c34\u58a8\u98ce"},{id:81,name:"\u6545\u969c\u98ce"}],gM=i(73345),xM=i.n(gM);function yM(){var e,t,i,a,o=UP.Z.useForm(),s=(0,n.Z)(o,1),l=s[0],c=(0,r.useState)(0),d=(0,n.Z)(c,2),v=d[0],h=d[1],f=(0,r.useState)(!1),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,r.useState)({s:[],i:[],c:[]}),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=null===(e=Bp())||void 0===e?void 0:e.dataInfo,T=(0,DI.ZP)(pv,{manual:!0,onSuccess(e){e&&w(e)}}),Z=T.run,C=(0,DI.ZP)(CA,{manual:!0,onSuccess(e){e&&window.open("https://movie.xiudodo.com/designer/workbench/#/myworks","_self")},onError(){xp.default.error("\u63d0\u4ea4\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5")}}),N=C.loading,S=C.run;function I(e){return A.apply(this,arguments)}function A(){return A=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=(0,_p.Z)(),a=i.upicId,t.description.join(" "),S(Number(a),(0,u.Z)((0,u.Z)({},t),{},{description:t.description.join(" ")}));case 3:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}return(0,r.useEffect)((()=>{4===(null===k||void 0===k?void 0:k.template_type)?(y(!0),Z()):y(!1)}),[]),(0,Kg.jsx)("div",{children:(0,Kg.jsxs)(UP.Z,{form:l,validateMessages:{required:"\u8bf7\u8bbe\u7f6e${label}"},labelCol:{span:7},wrapperCol:{span:10},initialValues:{industry_id:null===k||void 0===k?void 0:k.class_ids,category_id:null===k||void 0===k?void 0:k.class_ids,style_id:null===k||void 0===k?void 0:k.tag_ids,title:null===k||void 0===k?void 0:k.title,description:null!==k&&void 0!==k&&k.description?k.description.split(" "):[]},children:[(0,Kg.jsx)(UP.Z.Item,{label:"\u5c01\u9762\u8bbe\u7f6e",required:!0,children:(0,Kg.jsx)(vM,{form:l})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u4f5c\u54c1\u6807\u9898",name:"title",rules:[{required:!0}],children:(0,Kg.jsx)(VP.Z,{placeholder:"",maxLength:20,suffix:(0,Kg.jsxs)("div",{className:xM()["input-suffix"],children:[v,"/20"]}),onChange:e=>{h(e.target.value.length)},onKeyDown:Ph,onPaste:Ph})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u5173\u952e\u8bcd\u63cf\u8ff0",name:"description",required:!0,rules:[()=>({validator(e,t){return t.length>=7?Promise.resolve():Promise.reject(new Error("\u8bf7\u8f93\u5165\u4e0d\u5c11\u4e8e7\u4e2a\u5173\u952e\u8bcd\uff01"))}})],children:(0,Kg.jsx)(HP,{})}),x?(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(UP.Z.Item,{label:"\u5206\u7c7b",name:"category_id",rules:[{required:!0}],children:(0,Kg.jsx)(WP.Z.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:null===j||void 0===j||null===(t=j.c)||void 0===t?void 0:t.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(WP.Z,{value:e.id,children:e.name})},e.id)))})})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u98ce\u683c",name:"style_id",rules:[{required:!0}],children:(0,Kg.jsx)(WP.Z.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:null===j||void 0===j||null===(i=j.s)||void 0===i?void 0:i.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(WP.Z,{value:e.id,children:e.name})},e.id)))})})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u884c\u4e1a",name:"industry_id",rules:[{required:!0}],children:(0,Kg.jsx)(WP.Z.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:null===j||void 0===j||null===(a=j.i)||void 0===a?void 0:a.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(WP.Z,{value:e.id,children:e.name})},e.id)))})})})]}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(UP.Z.Item,{label:"\u5206\u7c7b",name:"category_id",rules:[{required:!0}],children:(0,Kg.jsx)(FP.ZP.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:hM.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(FP.ZP,{value:e.id,children:e.name})},e.id)))})})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u98ce\u683c",name:"style_id",rules:[{required:!0}],children:(0,Kg.jsx)(FP.ZP.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:fM.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(FP.ZP,{value:e.id,children:e.name})},e.id)))})})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u884c\u4e1a",name:"industry_id",rules:[{required:!0}],children:(0,Kg.jsx)(FP.ZP.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:mM.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(FP.ZP,{value:e.id,children:e.name})},e.id)))})})})]}),(0,Kg.jsx)(UP.Z.Item,{wrapperCol:{span:24},shouldUpdate:!0,children:()=>(0,Kg.jsx)(OP.Z,{justify:"center",children:(0,Kg.jsx)(CS.Z,{loading:N,size:"large",type:"primary",style:{width:237},onClick:()=>{l.validateFields().then((()=>{I(l.getFieldsValue())})).catch((e=>{}))},children:"\u63d0\u4ea4"})})})]})})}function bM(){var e=(0,r.useState)(0),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=UP.Z.useForm(),s=(0,n.Z)(o,1),l=s[0],c=(0,DI.ZP)(CA,{manual:!0,onSuccess(e){e&&window.open("https://movie.xiudodo.com/designer/workbench/#/myworks?tag=3","_self")},onError(){xp.default.error("\u63d0\u4ea4\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5")}}),d=(c.loading,c.run);function u(e){return v.apply(this,arguments)}function v(){return v=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=(0,_p.Z)(),a=i.upicId,d(Number(a),t);case 2:case"end":return e.stop()}}),e)}))),v.apply(this,arguments)}var h=(0,DI.ZP)(AA,{}),f=h.data,g=void 0===f?[]:f;return(0,Kg.jsxs)(UP.Z,{form:l,onFinish:u,validateMessages:{required:"\u8bf7\u8bbe\u7f6e${label}"},labelCol:{span:4},wrapperCol:{span:18},children:[(0,Kg.jsx)(UP.Z.Item,{label:"\u5c01\u9762\u8bbe\u7f6e",required:!0,children:(0,Kg.jsx)(vM,{form:l,hasDynamic:!1})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u6807\u9898",name:"title",rules:[{required:!0}],children:(0,Kg.jsx)(VP.Z,{placeholder:"",maxLength:20,suffix:(0,Kg.jsxs)("div",{style:{color:"#838390",fontSize:12},children:[i,"/20"]}),onChange:e=>{a(e.target.value.length)},onKeyDown:Ph,onPaste:Ph})}),(0,Kg.jsx)(UP.Z.Item,{label:"\u5206\u7c7b",name:"category_id",rules:[{required:!0}],children:(0,Kg.jsx)(FP.ZP.Group,{style:{display:"block"},children:(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:g.map((e=>(0,Kg.jsx)(BP.Z,{span:4,children:(0,Kg.jsx)(FP.ZP,{value:e.id,children:e.class_name})},e.id)))})})}),(0,Kg.jsx)(UP.Z.Item,{wrapperCol:{span:24},shouldUpdate:!0,children:()=>(0,Kg.jsx)(OP.Z,{justify:"center",children:(0,Kg.jsx)(CS.Z,{size:"large",type:"primary",htmlType:"submit",disabled:!l.isFieldsTouched(!0)||!!l.getFieldsError().filter((e=>{var t=e.errors;return t.length})).length,style:{width:237},children:"\u63d0\u4ea4"})})})]})}var _M=i(22979),jM=i.n(_M);function wM(){var e=Jk(),t=e.value,i=e.goNext,a=e.goPrev,o=Pf(),s=o.stat,l=(0,r.useState)(!1),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(!1),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,_p.Z)(),_=b.redirect;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:jM()["designer-header"],onMouseDown:Rb,children:[(0,Kg.jsx)("div",{className:jM()["header-left"],children:(0,Kg.jsx)("div",{className:hb()(jM()["flex-box-item"],jM()["header-home"]),onClick:()=>{window.open("https://movie.xiudodo.com/designer/workbench/#/myworks","_self")},children:(0,Kg.jsx)(iP,{type:"iconshouye"})})}),(0,Kg.jsxs)("div",{className:hb()(jM()["header-right"],jM()["flex-box"]),children:[(0,Kg.jsx)("div",{className:hb()(jM()["flex-box-item"],{[jM()["flex-box-item-disabled"]]:!t.hasPrev}),onClick:()=>{t.hasPrev&&a()},children:(0,Kg.jsx)(iP,{type:"iconchexiao1"})}),(0,Kg.jsx)("div",{className:hb()(jM()["flex-box-item"],{[jM()["flex-box-item-disabled"]]:!t.hasNext}),onClick:()=>{t.hasNext&&i()},children:(0,Kg.jsx)(iP,{type:"iconchexiao1",style:{transform:"rotateY(180deg)"}})}),(0,Kg.jsxs)("div",{className:hb()(jM()["flex-box-item"],jM()["header-save"]),onClick:()=>$A({}),children:[(0,Kg.jsx)(iP,{type:"iconbaocun1",className:jM().icon}),{0:"\u4fdd\u5b58",1:"\u4fdd\u5b58\u4e2d",2:"\u5df2\u4fdd\u5b58"}[s]]}),"designer"===_&&(0,Kg.jsxs)("div",{className:hb()(jM()["flex-box-item"],jM()["header-preview"]),onClick:()=>y(!0),children:[(0,Kg.jsx)(iP,{type:"iconbofang",className:jM().icon})," \u9884\u89c8"]}),(0,Kg.jsx)("div",{className:hb()(jM()["flex-box-item"],jM()["header-submit"]),onClick:()=>"designer"===_?u(!0):h(!0),children:(0,Kg.jsx)(CS.Z,{type:"primary",size:"large",style:{width:"150px",fontSize:14},children:"\u786e\u8ba4\u63d0\u4ea4"})})]})]}),(0,Kg.jsx)(zP,{title:"\u5b8c\u5584\u89c6\u9891\u8be6\u7ec6\u4fe1\u606f",visible:d,onCancel:()=>u(!1),Content:yM}),(0,Kg.jsx)(zP,{title:"\u63d0\u4ea4\u4fe1\u606f\u8bbe\u7f6e",visible:m,onCancel:()=>h(!1),Content:bM}),x&&(0,Kg.jsx)(RP,{visible:x,onCancel:()=>y(!1)})]})}var kM=(0,hp.Pi)(wM);function TM(e,t){var i=(0,r.useRef)(0),a=(0,r.useRef)(t);return(0,qe.Z)(t,a.current)||(i.current+=1),a.current=t,(0,r.useEffect)(e,[i.current])}function ZM(){var e=Vw(),t=e.currentAsset,i=e.multiSelect;function a(){(null===i||void 0===i?void 0:i.length)>1?Fj():ti(t)&&zj(t)}return{action:a,buttonText:(null===i||void 0===i?void 0:i.length)>1?"\u7ec4\u5408":"\u62c6\u5206\u7ec4"}}var CM=(0,hp.Pi)((()=>{var e=ZM(),t=e.action,i=e.buttonText,a=(0,r.useRef)();return(0,Kg.jsx)("div",{style:{padding:"0 18px"},children:(0,Kg.jsx)(CS.Z,{ref:a,type:"primary",block:!0,onClick:()=>{var e;t(),null===(e=a.current)||void 0===e||e.blur()},children:i})})})),NM=CM,SM=i(33381),IM=i.n(SM),AM=YP.Z.TabPane,PM=e=>{var t=e.children,i=(0,yp.Z)(e,["children"]);return(0,Kg.jsx)(AM,(0,u.Z)((0,u.Z)({className:IM().desigerSideTabPanel},i),{},{children:t}))},MM=PM,EM=i(54549),LM=i(64590),DM=i.n(LM);function RM(e){var t=e.onChange,i=e.children,a=e.className,n=e.closeable,r=void 0===n||n,o=(0,yp.Z)(e,["onChange","children","className","closeable"]);return(0,Kg.jsx)(YP.Z,(0,u.Z)((0,u.Z)({onChange:t,tabBarExtraContent:(0,Kg.jsx)("div",{hidden:!r,className:DM().textTabsView,children:(0,Kg.jsx)("div",{className:DM().txtCloseIcon,onMouseDown:()=>{eu(),Ov()},children:(0,Kg.jsx)(EM.Z,{})})}),className:hb()("xdd-designer-sider-tab",a)},o),{},{children:i}))}YP.Z.TabPane,i(11826);var zM=i(36872);function FM(){return bp.g.get("/apiv2/get-specific-word-list")}function OM(){return bp.g.get("/api-video/edit-video-asset-v6")}function BM(){return bp.g.get("/api-video/edit-video-asset-v6")}function WM(){return bp.g.get("/creator-api/config/colorful-presets-v2")}function VM(e){var t=e.src,i=e.poster,a=e.style,o=(e.skeletonImageWidth,e.clip),s=e.playing,l=e.defaultBackground,c=void 0===l||l,d=e.loop,p=void 0!==d&&d,v=e.muted,m=e.className,h=void 0===m?"":m,f=e.styleChild,g=e.styleVideo,x=(0,r.useState)(!1),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useRef)(null),w=(0,r.useMemo)((()=>"boolean"===typeof s),[s]),k=w?s:b;function T(){if(o&&j.current){var e=j.current,t=o||[0,0],i=(0,n.Z)(t,2),a=i[0],r=i[1],s=j.current.currentTime,l=a/1e3,c=r/1e3;s>c&&(p?e.currentTime=l:e.paused||(e.pause(),e.currentTime=c))}}return(0,r.useEffect)((()=>{var e;j.current&&!k&&(null===(e=j.current)||void 0===e||e.pause())}),[k]),(0,r.useLayoutEffect)((()=>{if(k&&j.current){var e=o||[0,0],t=(0,n.Z)(e,1),i=t[0];j.current.currentTime=i/1e3}}),[k,o]),(0,Kg.jsxs)("div",{className:hb()("xiudodo-video-wrapper",h,{"xiudodo-default-background":c}),style:a,onMouseEnter:()=>{w||_(!0)},onMouseLeave:()=>{w||_(!1)},children:[t&&k&&(0,Kg.jsx)("video",{ref:j,src:t,loop:p,style:g,muted:v,onTimeUpdate:T,autoPlay:!0,disablePictureInPicture:!0}),(0,Kg.jsx)("div",{style:(0,u.Z)({width:"100%",height:"100%",background:"url(".concat(i,") center / contain no-repeat ")},f)})]})}var UM=VM,GM={in:"i",out:"o",stay:"s",inout:"o&i"},XM=e=>{var t=e.type,i=e.data,a=e.selected,n=e.onChange,o=e.speed,s=void 0===o?1:o,l=(0,r.useRef)(null),c=Pw(),d=W_(),u=d.update,p=d.preview,v=d.previewEnd;d.clear,d.assetAeaDuration;function m(e){"inout"===t?(p("i",e.in_id,s),l.current=setTimeout((()=>{v(),setTimeout((()=>{p("o",e.out_id,s)}),50)}),1500)):p(GM[t],e["".concat(t,"_id")],s)}function h(e){"inout"===t?(u("i",e.in_id),setTimeout((()=>{u("o",e.out_id)}),400)):u(GM[t],e["".concat(t,"_id")]),xp.default.success("\u52a8\u753b\u8bbe\u7f6e\u6210\u529f\uff01")}function f(e){var t;null!==c&&void 0!==c&&null!==(t=c.attribute)&&void 0!==t&&t.stayEffect?nA.Z.confirm({title:"\u786e\u5b9a\u8981\u6e05\u7a7a\u505c\u7559\u52a8\u753b\u5417\uff1f",content:"\u505c\u7559\u52a8\u6548\u65e0\u6cd5\u4e0e\u5165\u573a\u52a8\u753b/\u51fa\u573a\u52a8\u753b\u540c\u65f6\u5b58\u5728\uff01",okText:"\u786e\u8ba4",cancelText:"\u6211\u518d\u60f3\u60f3",onOk:()=>{h(e)}}):h(e)}var g=(0,r.useMemo)((()=>{var e=i.findIndex((e=>"\u6587\u5b57"===e.name)),t=i[e],a=[...i];return a.splice(e,1),{textAni:t,assetAni:a}}),[i]),x=g.textAni,y=g.assetAni,b=(0,r.useMemo)((()=>xi(c)),[c]),_=e=>(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{className:"animation-classify-name",children:e.name}),e.items.map((e=>(0,Kg.jsxs)("div",{className:hb()("animation-item",{"animation-item-selected":String(a)===String(e["".concat(t,"_id")])}),onMouseEnter:()=>m(e),onMouseLeave:()=>{clearTimeout(l.current),v()},onClick:()=>{n&&n(),f(e),m(e)},children:[(0,Kg.jsx)(UM,{poster:e.icon_url,src:e.small_url}),(0,Kg.jsx)("div",{className:"animation-title",children:e.title})]},"".concat(e.in_id||e.out_id))))]},"kind-".concat(e.name));return(0,Kg.jsxs)("div",{className:"animation-list",children:[b&&_(x),y.map((e=>_(e)))]})},qM=(0,hp.Pi)(XM),HM={in:"i",out:"o",stay:"s",inout:"o&i"},YM=e=>{var t,i=e.type,a=e.data,n=e.active,o=(null===a||void 0===a||null===(t=a.find((e=>e.type===i)))||void 0===t?void 0:t.items)||[],s=(0,r.useRef)(),l=W_(),c=(l.value,l.update,l.preview,l.previewEnd,l.clear);function d(){clearTimeout(s.current),"inout"===i?(c("i"),c("o")):c(HM[i])}return(0,Kg.jsxs)("div",{style:{height:"100%",overflowY:"auto"},children:[(0,Kg.jsxs)("div",{className:"animation-item",onClick:d,children:[(0,Kg.jsx)("div",{className:"default-background",children:(0,Kg.jsx)(iP,{type:"iconIcon-jinyong"})}),(0,Kg.jsx)("div",{className:"animation-title",children:"\u65e0\u52a8\u753b"})]}),(0,Kg.jsx)(qM,{type:i,data:o,selected:n})]})},KM=(0,hp.Pi)(YM),QM=i(58817),JM=i.n(QM);function $M(e){var t=e.type,i=e.active,a=(0,DI.ZP)(OM),n=a.loading,r=a.data;return(0,Kg.jsx)("div",{className:JM().animationListBox,children:(0,Kg.jsx)(dN.Z,{spinning:n,children:r&&(0,Kg.jsx)(KM,{type:t,data:r,active:i})})})}var eE=$M,tE=(i(34276),i(99605)),iE=i(8812),aE=i(87966),nE=e=>{var t=e.header,i=e.search,a=e.children,o=e.onCancel,s=e.bottom,l=e.headerStyle,c=e.refresh,d=e.wrapClassName,u=(0,r.useState)(0),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=oA();return(0,r.useEffect)((()=>{m(v+1)}),[h.id]),(0,Kg.jsxs)("div",{className:hb()("side-panel-wrap",d),children:[t&&(0,Kg.jsxs)("div",{style:l,className:hb()("side-panel-header"),children:[(0,Kg.jsxs)("div",{className:"side-panel-header-left",children:[(0,Kg.jsx)(iP,{type:"iconshezhi",className:"side-panel-wrap-setting-icon"}),t]}),o&&(0,Kg.jsx)("div",{className:"side-panel-close",onClick:o,children:(0,Kg.jsx)(iP,{type:"iconchahao"})})]}),i,(0,Kg.jsx)("div",{className:"side-panel-content",children:a}),s&&(0,Kg.jsx)("div",{className:"side-panel-bottom",children:s})]},c?"sidePanel-".concat(v):"sidePanel")},rE=nE,oE={in:"i",out:"o",stay:"s",inout:"o&i"};function sE(e){var t=e.onChange,i=e.aeaKey,a=e.asset,n=e.max,o=a.assetDuration,s=o.startTime,l=o.endTime,c=a.animationItemDuration[i],d=l-s,u=(0,r.useRef)(null),p=(0,Cm.Z)(u),v=p.width,m=void 0===v?0:v;function h(e){Fh(e,(e=>{var i=e/m*d;console.log("mouseMoveDistance",c+i),t(c+i)}))}return(0,Kg.jsxs)("div",{ref:u,className:"animation-time-slider",children:[(0,Kg.jsx)("div",{className:"animation-time-slider-rail",style:{width:"".concat(n/d*100,"%")}}),(0,Kg.jsx)("div",{className:"animation-time-slider-track",style:{width:"".concat(c/d*100,"%")}}),(0,Kg.jsx)("div",{className:"animation-time-slider-handle",onMouseDown:h,style:{left:"".concat(c/d*100,"%")}})]})}var lE=(0,hp.Pi)((e=>{var t=e.type,i=e.title,a=e.options,o=e.value,s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=Pw(),v=(0,r.useState)(!1),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=oE[t],x=W_(),y=(x.update,x.preview),b=x.previewEnd,_=x.clear,j=x.updatePbr,w=x.inPreview,k=x.assetAeaDuration,T=x.max,Z=(0,r.useRef)(null);(0,r.useEffect)((()=>{w||f(!1)}),[w]);var C=(0,r.useMemo)((()=>{var e;return null!==o&&void 0!==o&&o.resId&&(null===a||void 0===a||a.forEach((i=>{i.items.forEach((a=>{String(a["".concat(t,"_id")])===String(o.resId)&&(e=(0,u.Z)((0,u.Z)({},a),{},{title:a.title+i.name}))}))}))),e}),[null===o||void 0===o?void 0:o.resId,a]);function N(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;null!==o&&void 0!==o&&o.resId&&y(g,o.resId,e)}var S=(0,aE.Z)(Z);(0,r.useEffect)((()=>{S||d(!1)}),[S]);var I=null===k||void 0===k?void 0:k[g];return(0,Kg.jsxs)("div",{className:"animation-selected",ref:Z,children:[(0,Kg.jsxs)("div",{className:"animation-type",children:[(0,Kg.jsx)("span",{children:i}),(0,Kg.jsx)("span",{hidden:!(null!==o&&void 0!==o&&o.resId),className:"animation-preview",onClick:()=>{w?b():(f(!0),N())},children:h?"\u505c\u6b62":"\u9884\u89c8"})]}),(0,Kg.jsxs)("div",{style:{backgroundColor:"#fff",padding:8,borderRadius:4},children:[(0,Kg.jsx)(tE.Z,{visible:c,onVisibleChange:e=>{e||d(e)},trigger:"click",placement:"bottom",overlayClassName:hb()("animation-options-popover",{"animation-options-out":"out"===t}),getPopupContainer:()=>document.getElementById("xiudodo"),content:(0,Kg.jsxs)(Kg.Fragment,{children:[a&&(0,Kg.jsx)(qM,{type:t,data:a,selected:Number(null===o||void 0===o?void 0:o.resId),speed:null===o||void 0===o?void 0:o.pbr,onChange:()=>{d(!1)}}),(0,Kg.jsx)("div",{className:"asset-clear-animation",hidden:!(null!==o&&void 0!==o&&o.resId),children:(0,Kg.jsx)(CS.Z,{onClick:()=>{_(g),d(!1)},children:"\u79fb\u9664\u52a8\u753b"})})]}),children:C?(0,Kg.jsxs)("div",{className:"animation-detail",onClick:()=>d(!0),style:{position:"relative"},children:[(0,Kg.jsx)("img",{width:60,src:C.icon_url,alt:C.title,style:{borderRadius:4}}),(0,Kg.jsx)("div",{style:{flex:1,marginLeft:16},children:C.title}),(0,Kg.jsx)(iE.Z,{className:hb()({"open-animation-popover":c})})]}):(0,Kg.jsxs)("div",{className:"animation-add",onClick:()=>{var e=Bw().videoInfo.allAnimationTime;e<=1e3?nA.Z.info({content:(0,Kg.jsx)("span",{children:"\u5f53\u524d\u7247\u6bb5\u65f6\u957f\u8fc7\u77ed\uff0c\u65e0\u6cd5\u8bbe\u7f6e\u52a8\u753b\u3002 \u82e5\u8981\u8bbe\u7f6e\u52a8\u753b\uff0c\u9700\u5c06\u5f53\u524d\u7247\u6bb5\u65f6\u957f\u8c03\u81f3\u5927\u4e8e1\u79d2\u3002"}),okText:"\u77e5\u9053\u4e86"}):d(!0)},children:[(0,Kg.jsx)("div",{className:"animation-add-icon",children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),"\u6dfb\u52a0\u52a8\u753b"]})}),C&&(0,Kg.jsxs)("div",{className:"animation-speed",children:[(0,Kg.jsx)("div",{className:"animation-speed-label",children:"\u6301\u7eed"}),p&&T&&o&&(0,Kg.jsx)(sE,{onChange:e=>{var t=T[g];e<100&&(e=100),e>t&&(e=t);var i=_t(e,o.kw);j(g,i)},aeaKey:g,asset:p,max:T[g]}),(0,Kg.jsxs)("div",{className:"animation-time",children:[(I/1e3).toFixed(2),"s"]})]})]})]})}));function cE(){var e=Gf(),t=e.close,i=W_(),a=i.value,n=(0,DI.ZP)(BM,{formatResult:e=>{var t={inout:[],in:[],out:[]};return e.data.forEach((e=>{t[e.type]=e.items})),t}}),r=n.data;return(0,Kg.jsxs)(rE,{header:"\u52a8\u753b\u8bbe\u7f6e",onCancel:t,wrapClassName:"side-setting-panel animation-control-panel",children:[(0,Kg.jsx)(lE,{title:"\u5165\u573a\u52a8\u753b",type:"in",value:null===a||void 0===a?void 0:a.i,options:null===r||void 0===r?void 0:r.in}),(0,Kg.jsx)(lE,{title:"\u51fa\u573a\u52a8\u753b",type:"out",value:null===a||void 0===a?void 0:a.o,options:null===r||void 0===r?void 0:r.out}),(0,Kg.jsx)("div",{style:{color:"#9398aa"},children:"\u51fa\u5165\u573a\u603b\u65f6\u95f4\u4e0d\u8d85\u8fc7\u5143\u7d20\u51fa\u73b0\u65f6\u95f4"})]})}var dE=(0,hp.Pi)(cE);function uE(e){return bp.g.post("/creator-api/my/save-animation",{data:e,headers:{"Content-Type":"application/json"}})}function pE(e){var t=e.page,i=e.type;return bp.g.get("/creator-api/my/animations?page=".concat(t,"&type=").concat(i))}function vE(e){return bp.g.post("/creator-api/my/delete-animation",{data:{id:e},headers:{"Content-Type":"application/json"}})}i(93806);var mE=i(3418);function hE(e,t,i,a){var n;i=i||6;var r=Array.prototype.forEach,o=document.querySelector(e);if(o){var s=document.querySelectorAll(t),l=334;o&&(o.style.width="",l=o.getBoundingClientRect().width);var c=(null===(n=s[0])||void 0===n?void 0:n.getBoundingClientRect().width)+i||156,d=Math.max(Math.floor(l/c),1);console.log("cols",c,l,d),l="".concat(c*d+i,"px"),o.style.width=l;for(var u=[],p=[],v=0;v<d;v++)v%d!==0?p.push(v*c+i):p.push(0),u.push(i);r.call(s,(e=>{var t=u.slice(0).sort(((e,t)=>e-t)).shift()||-1;t=u.indexOf(t);var a=p[t],n=u[t],o=["webkitTransform","MozTransform","msTransform","OTransform","transform"];r.call(o,(t=>{e.style.top="".concat(n,"px"),e.style.left="".concat(a,"px")})),u[t]+=e.getBoundingClientRect().height+i}));var m=u.slice(0).sort(((e,t)=>e-t)).pop();o.style.height="".concat(m,"px"),"function"===typeof a&&a()}}function fE(e){var t=e.className,i=e.style;return(0,Kg.jsx)("div",{className:hb()("xiudd-skeleton",t),style:i})}function gE(e){var t=e.title,i=e.more,a=e.loading,n=e.children,r=e.columns,o=void 0===r?2:r,s=e.rows,l=void 0===s?1:s,c=e.className,d=(0,yp.Z)(e,["title","more","loading","children","columns","rows","className"]);return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:hb()("xiudd-skeleton-wrap",c)},d),{},{children:a?(0,Kg.jsx)(OP.Z,{gutter:[0,16],children:[...new Array(l)].map(((e,a)=>(0,Kg.jsx)(BP.Z,{span:"24",children:(0,Kg.jsxs)(OP.Z,{justify:"space-between",gutter:[16,16],children:[(0,Kg.jsx)(BP.Z,{span:"18",children:t&&(0,Kg.jsx)(fE,{className:"xiudd-skeleton-title"})}),(0,Kg.jsx)(BP.Z,{span:"4",children:i&&(0,Kg.jsx)(fE,{className:"xiudd-skeleton-more"})}),[...new Array(o)].map(((e,t)=>(0,Kg.jsx)(BP.Z,{span:24/o,children:(0,Kg.jsx)(fE,{className:"xiudd-skeleton-block"})},"xiudd-skeleton-column-".concat(t))))]})},"XiuddSkeleton-row-".concat(a))))}):n}))}var xE=(e,t)=>{var i=e.request,a=e.children,o=e.masonry,s=void 0!==o&&o,l=e.beforeLoadData,c=e.ready,d=void 0===c||c,p=e.defaultParams,v=e.manualRequest,m=e.formatResult,h=e.emptyDesc,f=e.params,g=e.className,x=e.wrapStyle,y=e.isEmpty,b=void 0===y||y,_=e.skeleton,j=e.isSkeleton,w=void 0===j||j,k=e.onChange,T=(0,yp.Z)(e,["request","children","masonry","beforeLoadData","ready","defaultParams","manualRequest","formatResult","emptyDesc","params","className","wrapStyle","isEmpty","skeleton","isSkeleton","onChange"]),Z=(0,r.useRef)(null),C=(0,r.useState)(0),N=(0,n.Z)(C,2),S=N[0],I=N[1],A=(0,DI.ZP)((e=>{var t=(0,u.Z)((0,u.Z)({},f),{},{page:e?null!==e&&void 0!==e&&e.page?e.page+1:S+1:1});return I(t.page),l&&(t=l(t)),i(t)}),{ready:d,manual:v,defaultParams:[p],onSuccess:e=>{},formatResult:e=>m?m(e):{list:e.data.items,pageTotal:e.data.pageTotal,page:e.data.page},loadMore:!0,ref:Z,isNoMore:e=>!!e&&(e.page||S)>=e.pageTotal,refreshDeps:[(0,jp.stringify)(f)]}),P=A.data,M=A.loading,E=A.loadingMore,L=A.reload,D=(A.loadMore,A.noMore,A.run);function R(){s&&hE(s.containerSelector,s.itemSelector)}(0,r.useImperativeHandle)(t,(()=>({reload:L,refresh:D,masonryUpdate:R,getData(){return null===P||void 0===P?void 0:P.list}})));var z=P||{},F=z.list,O=void 0===F?[]:F;return TM((()=>{O.length>0&&R(),k&&k(O)}),[O,O.length]),(0,r.useEffect)((()=>{}),[M,E]),(0,Kg.jsx)("div",{className:"infinite-loader-wrap",style:x,children:(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({ref:Z,className:hb()("infinite-loader",g)},T),{},{children:[w?(0,Kg.jsx)(gE,(0,u.Z)((0,u.Z)({},_),{},{loading:M,children:a({list:O})})):a({list:O}),(0,Kg.jsx)("div",{style:{position:"absolute",top:0,width:"100%"},hidden:M||E,children:b&&O.length<1&&!M&&!E&&(0,Kg.jsx)(mE.Z,{className:"empty-wrap",image:(0,fb.gP)("/image/Icon/1662431803098.png"),description:(0,Kg.jsx)("div",{className:"empty-desc",children:h||"\u6682\u65e0\u6570\u636e"})})})]}))})},yE=(0,r.forwardRef)(xE),bE=i(88043),_E=e=>{e.i&&"number"===typeof e.i.x&&(e.i.x=[e.i.x],e.i.y=[e.i.y],e.o.x=[e.o.x],e.o.y=[e.o.y])},jE=(e,t)=>{var i,a=1;return 0===e.a&&(i={x:{a:0,k:[e.k[0]*t]},y:{a:0,k:[e.k[1]*t]},z:{a:0,k:[e.k[2]*t]}}),1===e.a&&(i={x:{a:1,k:[]},y:{a:1,k:[]},z:{a:1,k:[]}},e.k.forEach((e=>{e.t=Math.round(e.t),a=Math.max(e.t,a),e.s.forEach((e=>e*t)),_E(e),i.x.k.push((0,u.Z)({t:e.t,s:[e.s[0]]},e.i?{i:e.i,o:e.o}:{})),i.y.k.push((0,u.Z)({t:e.t,s:[e.s[1]]},e.i?{i:e.i,o:e.o}:{})),i.z.k.push((0,u.Z)({t:e.t,s:[e.s[2]]},e.i?{i:e.i,o:e.o}:{}))}))),(!0===e.s||e.x&&e.y&&e.z)&&(i={x:{a:e.x.a,k:0===e.x.a?[e.x.k*t]:e.x.k.map((e=>(e.t=Math.round(e.t),a=Math.max(e.t,a),_E(e),(0,u.Z)({t:e.t,s:[e.s[0]*t]},e.i?{i:e.i,o:e.o}:{}))))},y:{a:e.y.a,k:0===e.y.a?[e.y.k*t]:e.y.k.map((e=>(e.t=Math.round(e.t),a=Math.max(e.t,a),_E(e),(0,u.Z)({t:e.t,s:[e.s[0]*t]},e.i?{i:e.i,o:e.o}:{}))))},z:{a:e.z?e.z.a:0,k:e.z?0===e.z.a?[e.z.k*t]:e.z.k.map((e=>(e.t=Math.round(e.t),a=Math.max(e.t,a),_E(e),(0,u.Z)({t:e.t,s:[e.s[0]*t]},e.i?{i:e.i,o:e.o}:{})))):[]}}),{maxFrames:a,p:i}},wE=(e,t)=>{var i=1,a={o:{a:e.ks.o.a,k:0===e.ks.o.a?[e.ks.o.k]:e.ks.o.k.map((e=>(e.t=Math.round(e.t),i=Math.max(e.t,i),_E(e),(0,u.Z)({t:e.t,s:e.s},e.i?{i:e.i,o:e.o}:{}))))},r:{a:e.ks.r.a,k:0===e.ks.r.a?[e.ks.r.k]:e.ks.r.k.map((e=>(e.t=Math.round(e.t),i=Math.max(e.t,i),_E(e),(0,u.Z)({t:e.t,s:e.s},e.i?{i:e.i,o:e.o}:{}))))},p:(()=>{var a=jE(e.ks.p,t),n=a.maxFrames,r=a.p;return i=Math.max(n,i),r})(),a:{a:e.ks.a.a,k:0===e.ks.a.a?e.ks.a.k.map((e=>0)):e.ks.a.k.map((e=>(e.t=Math.round(e.t),i=Math.max(e.t,i),e.s.forEach((e=>e*t)),_E(e),(0,u.Z)({t:e.t,s:e.s},e.i?{i:e.i,o:e.o}:{}))))},s:{a:e.ks.s.a,k:0===e.ks.s.a?e.ks.s.k:e.ks.s.k.map((e=>(e.t=Math.round(e.t),i=Math.max(e.t,i),_E(e),(0,u.Z)({t:e.t,s:e.s},e.i?{i:e.i,o:e.o}:{}))))}};return{totalFrames:i,ks:a}},kE={in:"i",out:"o",stay:"s",free:"s"},TE=()=>{var e=e=>{if(30===e.fr&&1===e.layers.length){if(e.layers&&e.layers[0]){var t=e.layers[0].ks;if(!t.o||!t.r||!t.p||!t.a||!t.s)return void xp.default.warn("\u5bfc\u5165\u6570\u636e\u4e0d\u7b26\u5408\u8981\u6c42\uff01");if(!(0===t.p.a||1===t.p.a||t.p.s||t.p.x&&t.p.y&&t.p.z))return void xp.default.warn("\u5bfc\u5165\u6570\u636e\u52a8\u753b\u4f4d\u7f6e\u4e0d\u7b26\u5408\u8981\u6c42\uff01")}try{var i=wE(e.layers[0],1),a=i.totalFrames,n=i.ks;if(n.o&&n.r&&n.p&&n.a&&n.s){var r={kw:{ip:e.ip,op:a,ks:n},pbr:1,resId:"-1"};return r}xp.default.warn("\u5bfc\u5165\u6570\u636e\u52a8\u753b\u4f4d\u7f6e\u4e0d\u7b26\u5408\u8981\u6c42\uff01")}catch(o){xp.default.warn("\u5bfc\u5165\u6570\u636e\u52a8\u753b\u4f4d\u7f6e\u4e0d\u7b26\u5408\u8981\u6c42\uff01")}}else xp.default.warn("\u5bfc\u5165\u6570\u636e\u4e0d\u7b26\u5408\u8981\u6c42\uff01")};return{checkAE:e}},ZE=()=>{var e=W_(),t=e.value,i=e.kw,a=e.update,n=e.preview,r=e.previewEnd,o=e.clear,s=e.updatePbr,l=e.assetAeaDuration,c=e.max,d=V_(),u=d.update,p=d.clear,v=e=>{r(),n("in"===e.type?"i":"o",e.id,1)},m=e=>{v(e),["in","out","stay"].includes(e.type)?a(kE[e.type],e.id):u(e.id),xp.default.success("\u52a8\u753b\u8bbe\u7f6e\u6210\u529f\uff01")};function h(e,i){var a,o=kE[e];s(o,i),r(),n("in"===e?"i":"o",null===(a=t[o])||void 0===a?void 0:a.resId,i)}var f=e=>{"free"===e?p():o("in"===e?"i":"o")};return{value:t,kw:i,assetAeaDuration:l,max:c,setAnimationPreview:v,setAnimation:m,setAnimationSpeed:h,clearAnimation:f}};function CE(e){var t=e.onChange,i=W_(),a=i.directPreview,o=i.previewEnd,s=TE(),l=s.checkAE,c=(0,r.useRef)(null),d=(0,r.useRef)(null),v=(0,r.useState)(!1),h=(0,n.Z)(v,2),f=h[0],g=h[1],x=(0,r.useState)(!1),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=(0,r.useState)(),C=(0,n.Z)(Z,2),N=C[0],S=C[1],I=(0,r.useState)(),A=(0,n.Z)(I,2),P=A[0],M=A[1],E=UP.Z.useForm(),L=(0,n.Z)(E,1),D=L[0],R=()=>{d.current&&d.current.click()},z=()=>{c.current&&c.current.reset()},F=e=>{var t=e.currentTarget.files[0];if("application/json"===t.type){var i=new FileReader;i.onload=()=>{var e=JSON.parse(i.result);z();var t=l(e);if(t){var n,r="in";(null===t||void 0===t||null===(n=t.kw)||void 0===n?void 0:n.op)>30&&(r="free"),S(r),o(),a("in"===r?"i":"o",t),t.kw&&(T(e),M(t.kw),D.setFieldsValue({type:r,title:null===e||void 0===e?void 0:e.nm}),setTimeout((()=>{g(!0)}),1100))}},i.readAsText(t)}else xp.default.warn("\u6587\u4ef6\u7c7b\u578b\u9519\u8bef\uff01")},O=function(){var e=(0,p.Z)(m().mark((function e(i){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:_(!0),D.validateFields().then((0,p.Z)(m().mark((function e(){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,uE((0,u.Z)((0,u.Z)({},i),{},{json_ae:JSON.stringify(k),json_kw:JSON.stringify(P)}));case 2:a=e.sent,0===a.code&&(g(!1),D.resetFields(),xp.default.success("\u52a8\u753b\u4e0a\u4f20\u6210\u529f\uff01"),t(i.type));case 4:case"end":return e.stop()}}),e)})))).catch((e=>{console.log("Failed:",e)})),_(!1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("form",{ref:c,style:{display:"none"},children:(0,Kg.jsx)("input",{title:"\u4e0a\u4f20\u81ea\u5b9a\u4e49\u52a8\u753b",type:"file",accept:".json",onChange:F,ref:d})}),(0,Kg.jsx)(CS.Z,{className:"import-button",icon:(0,Kg.jsx)(iP,{type:"iconshangchuan"}),onClick:R,children:"\u4e0a\u4f20\u81ea\u5b9a\u4e49\u52a8\u753b"}),(0,Kg.jsx)(nA.Z,{visible:f,title:"\u4e0a\u4f20\u81ea\u5b9a\u4e49\u52a8\u753b",className:"aniImp-upload-modal",width:520,footer:null,onCancel:()=>{g(!1),null===D||void 0===D||D.resetFields()},destroyOnClose:!0,children:(0,Kg.jsxs)(UP.Z,{preserve:!0,form:D,name:"control-ref",onFinish:O,className:"aniImp-upload-form",onKeyPress:Ph,onKeyDown:Ph,children:[(0,Kg.jsx)(UP.Z.Item,{name:"type",label:"\u52a8\u753b\u7c7b\u578b\uff1a",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u52a8\u753b\u7c7b\u578b"}],children:(0,Kg.jsxs)(FP.ZP.Group,{children:[(0,Kg.jsx)(FP.ZP,{value:"in",disabled:"free"===N,children:"\u5165\u573a\u52a8\u753b"}),(0,Kg.jsx)(FP.ZP,{value:"out",disabled:"free"===N,children:"\u51fa\u573a\u52a8\u753b"}),(0,Kg.jsx)(FP.ZP,{value:"free",disabled:"in"===N,children:"\u81ea\u7531\u52a8\u753b"})]})}),(0,Kg.jsx)(UP.Z.Item,{name:"title",label:"\u52a8\u753b\u6807\u9898\uff1a",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u52a8\u753b\u6807\u9898"}],children:(0,Kg.jsx)(VP.Z,{placeholder:"\u8bf7\u8f93\u5165\u52a8\u753b\u6807\u9898",maxLength:30})}),(0,Kg.jsx)(UP.Z.Item,{wrapperCol:{span:24},children:(0,Kg.jsx)(OP.Z,{justify:"center",children:(0,Kg.jsx)(CS.Z,{loading:b,size:"large",type:"primary",htmlType:"submit",disabled:!1,className:"submit",children:"\u63d0\u4ea4"})})})]})})]})}var NE=(0,hp.Pi)(CE),SE=e=>{var t=e.title,i=e.choosed,a=(0,yp.Z)(e,["title","choosed"]);return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({},a),{},{className:hb()("type-item",{choosed:i}),children:t}))},IE=e=>{var t=e.item,i=e.value,a=e.onAdd,n=e.onDelete,o=(0,r.useRef)(null),s=(0,bE.Z)(o);return(0,Kg.jsxs)("div",{className:hb()("aniImp-upload-item",{"aniImp-upload-item-choosed":(null===i||void 0===i?void 0:i.resId)===t.id}),ref:o,onClick:a,children:[(0,Kg.jsx)("div",{className:"aniImp-item-title",children:t.title}),(0,Kg.jsx)("div",{className:"aniImp-item-right",children:s&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(iP,{type:"iconicons8_trash",className:"icon",style:{fontSize:22},onClick:e=>{Ph(e),n()}}),(0,Kg.jsx)(iP,{type:"icona-2",className:"icon",onClick:a})]})})]},t.id)};function AE(){var e=ZE(),t=e.value,i=e.kw,a=e.assetAeaDuration,o=e.max,s=e.setAnimationSpeed,l=e.setAnimation,c=e.clearAnimation,d=(0,r.useRef)(),u=(0,r.useState)(!1),v=(0,n.Z)(u,2),h=v[0],f=v[1],g=(0,r.useState)("in"),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=(0,r.useMemo)((()=>i&&"free"===y?i:t&&t[kE[y]]?t[kE[y]]:void 0),[y,i,null===t||void 0===t?void 0:t.i,null===t||void 0===t?void 0:t.o]);(0,r.useEffect)((()=>{var e;h&&(null===(e=d.current)||void 0===e||e.reload(),f(!1))}),[h]);var j=function(){var e=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,vE(t.id);case 2:i=e.sent,0===i.code&&(f(!0),xp.default.success("\u5220\u9664\u6210\u529f\uff01"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Kg.jsxs)("div",{className:"aniImp-upload",children:[(0,Kg.jsxs)("div",{className:"aniImp-upload-type",children:[(0,Kg.jsx)("div",{className:"aniImp-upload-typeImp",children:(0,Kg.jsx)(NE,{onChange:e=>{f(!0),b(e)}})}),(0,Kg.jsx)(SE,{title:"\u5165\u573a",choosed:"in"===y,onClick:()=>{b("in")}}),(0,Kg.jsx)(SE,{title:"\u51fa\u573a",choosed:"out"===y,onClick:()=>{b("out")}}),(0,Kg.jsx)(SE,{title:"\u81ea\u7531\u52a8\u753b",choosed:"free"===y,onClick:()=>{b("free")}})]}),(0,Kg.jsx)(yE,{ref:d,request:pE,params:{type:y},wrapStyle:{flex:1},formatResult:e=>{var t,i;return{pageTotal:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.pageTotal,list:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.items}},isSkeleton:!1,className:"aniImp-upload-list",children:e=>{var t=e.list;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"aniImp-upload-item",onClick:()=>{c(y)},children:(0,Kg.jsx)("div",{className:"aniImp-item-title",children:"\u65e0\u52a8\u753b"})}),t.map((e=>(0,Kg.jsx)(IE,{item:e,value:_,onDelete:()=>{j(e)},onAdd:()=>{l(e)}},e.id)))]})}}),"free"!==y&&(null===_||void 0===_?void 0:_.resId)&&(0,Kg.jsxs)("div",{className:"aniImp-upload-down",children:[(0,Kg.jsx)("span",{className:"timeLabel",children:"\u52a8\u753b\u65f6\u957f\uff1a"}),(0,Kg.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"100%"},children:[(0,Kg.jsx)(zM.Z,{size:"small",value:"".concat(a&&((null===a||void 0===a?void 0:a[kE[y]])/1e3).toFixed(1),"s"),style:{height:22,width:50,fontSize:12}}),(0,Kg.jsx)(TP.Z,{tooltipVisible:!1,step:100,min:100,max:o[kE[y]],value:null===a||void 0===a?void 0:a[kE[y]],onChange:e=>{var t=_t(e,_.kw);s(y,t)}})]})]})]})}var PE=(0,hp.Pi)(AE),ME={background:"url(//js.xiudodo.com/xiudodo-editor/image/logo/logo.png) center center / 50% no-repeat"},EE=e=>{var t=e.poster,i=(0,r.useState)(!1),a=(0,n.Z)(i,2),o=a[0],s=a[1];return(0,Kg.jsx)("div",{style:(0,u.Z)({width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},o?{}:ME),children:(0,Kg.jsx)("img",{src:t,alt:"img",style:{maxWidth:"100%",maxHeight:"100%"},onLoad:e=>s(!0)})})},LE=EE,DE=e=>{var t=e||{},i=t.caption,a=void 0===i?["\u4f4e","\u9ad8"]:i,n=(0,yp.Z)(t,["caption"]);return(0,Kg.jsxs)("div",{className:"sw-action-slider-box",children:[(0,Kg.jsx)("div",{className:"sw-action-slider-tab",children:a[0]}),(0,Kg.jsx)(TP.Z,(0,u.Z)({},n)),(0,Kg.jsx)("div",{className:"sw-action-slider-tab",children:a[1]})]})},RE=DE,zE=[{key:"InvertedU",desc:"\u5012U",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/InvertedU.png"),poster:"".concat(fb.BT,"/stay-effect/InvertedU.json"),width:402.3869332550578,height:431.38953412888367,x:-1.84248758128615,y:-432.43723463466404,points:[[0,0,0,0,0,0],[.508967136150261,-314.98971830985914,.508967136150261,-314.98971830985914,.508967136150261,-314.98971830985914],[80.78387283236992,-435.884450867052,203.32722543352605,-431.2601734104046,325.8705780346822,-426.6358959537572],[400.50896713615026,-314.98971830985914,400.50896713615026,-314.98971830985914,400.50896713615026,-314.98971830985914],[402.3869014084507,-1.3746948356807707,402.3869014084507,-1.3746948356807707,402.3869014084507,-1.3746948356807707]]},{key:"TurnDown1",desc:"Turn Down 1",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnDown1.png"),poster:"".concat(fb.BT,"/stay-effect/TurnDown1.json"),width:472.0555265184859,height:484.15756583773475,x:-1.4964528315727534,y:-9.42564095510562,points:[[0,0,0,0,0,0],[302.833661971831,-18.31384976525817,364.80549295774654,-1.4124413145539734,426.77732394366205,15.488967136150222],[447.43460093896726,53.04765258215963,454.94633802816907,115.01948356807515,462.45807511737087,176.99131455399066],[473.72568075117374,475.58286384976526,471.8477464788733,475.58286384976526,469.9698122065729,475.58286384976526]]},{key:"TurnDown2",desc:"Turn Down 2",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnDown2.png"),poster:"".concat(fb.BT,"/stay-effect/TurnDown2.json"),width:578.1857551029015,height:474.4495139591768,x:-579.0593657219974,y:-1.956829664305019,points:[[0,0,0,0,0,0],[.4952901484480208,379.5321052631579,-10.3009311740891,416.23925775978404,-21.097152496626222,452.94641025641016],[-31.893373819163344,465.9018758434548,-107.4669230769232,472.379608636977,-183.04047233468305,478.8573414304993],[-578.1821727395412,468.06112010796215,-578.1821727395412,468.06112010796215,-578.1821727395412,468.06112010796215]]},{key:"TurnDown3",desc:"Turn Down 3",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnDown3.png"),poster:"".concat(fb.BT,"/stay-effect/TurnDown3.json"),width:537.8663756747638,height:524.8711095647773,x:-.8771718960863382,y:-1.9568281882591236,points:[[0,0,0,0,0,0],[8.851551956815115,407.10582995951415,13.170040485829986,441.6537381916329,17.488529014844858,476.20164642375164],[8.851551956815115,497.7940890688259,45.55870445344124,517.2272874493927,82.26585695006736,536.6604858299596],[537.8663967611335,512.9087989203779,537.8663967611335,512.9087989203779,537.8663967611335,512.9087989203779]]},{key:"TurnDown4",desc:"Turn Down 4",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnDown4.png"),poster:"".concat(fb.BT,"/stay-effect/TurnDown4.json"),width:492.4326949434885,height:476.20324097503374,x:-493.309861146255,y:-1.9568442139001263,points:[[0,0,0,0,0,0],[-340.939028340081,1.1694736842105158,-399.23862348178136,7.647206477732766,-457.5382186234817,14.124939271255016],[-489.9268825910931,44.354358974358945,-492.0861268556006,98.3354655870445,-494.2453711201081,152.31657219973005],[-485.6083940620782,476.2032118758434,-485.6083940620782,476.2032118758434,-485.6083940620782,476.2032118758434]]},{key:"TurnUp1",desc:"Turn Up 1",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnUp1.png"),poster:"".concat(fb.BT,"/stay-effect/TurnUp1.json"),width:417.39862727732793,height:457.2036310728745,x:-415.2350067476383,y:-459.16041571778,points:[[0,0,0,0,0,0],[6.694817813765212,-320.5666261808367,.21708502024296195,-372.3884885290148,-6.260647773279288,-424.2103508771929],[-4.101403508771909,-454.43977058029685,-96.94890688259102,-456.5990148448043,-189.79641025641013,-458.7582591093117],[-414.3578137651822,-454.43977058029685,-414.3578137651822,-454.43977058029685,-414.3578137651822,-454.43977058029685]]},{key:"TurnUp2",desc:"Turn Up 2",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnUp2.png"),poster:"".concat(fb.BT,"/stay-effect/TurnUp2.json"),width:524.1929191970311,height:459.13435180499323,x:-.8772220816464369,y:-460.7080431848853,points:[[0,0,0,0,0,0],[339.2177192982456,3.3270445344129485,391.0395816464237,-9.628421052631552,442.8614439946018,-22.583886639676052],[505.47952766531716,-39.85784075573554,518.4349932523617,-91.67970310391365,531.3904588394062,-143.50156545209177],[518.4349932523617,-458.75122807017544,518.4349932523617,-458.75122807017544,518.4349932523617,-458.75122807017544]]},{key:"TurnUp3",desc:"Turn Up 3",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnUp3.png"),poster:"".concat(fb.BT,"/stay-effect/TurnUp3.json"),width:470.02750453356947,height:543.7473642037787,x:-470.90467853829284,y:-529.5825775978408,points:[[0,0,0,0,0,0],[-351.50897435897434,33.777746288798994,-394.6938596491228,3.5483265856950084,-437.87874493927126,-26.681093117408977],[-463.7896761133603,-59.06975708502034,-468.10816464237513,-154.07650472334683,-472.42665317138994,-249.08325236167332],[-468.10816464237513,-527.625762483131,-468.10816464237513,-527.625762483131,-468.10816464237513,-527.625762483131]]},{key:"TurnUp4",desc:"Turn Up 4",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnUp4.png"),poster:"".concat(fb.BT,"/stay-effect/TurnUp4.json"),width:548.9151062753036,height:525.2199571946694,x:-5.212825573549253,y:-527.1767838014508,points:[[0,0,0,0,0,0],[-6.027813765182259,-328.9686639676114,-3.8685695006747665,-404.54221322537114,-1.709325236167274,-480.11576248313094],[-8.187058029689638,-518.9821592442645,67.3864912280701,-523.3006477732794,142.96004048582984,-527.6191363022942],[544.5794736842104,-523.3006477732794,544.5794736842104,-523.3006477732794,544.5794736842104,-523.3006477732794]]},{key:"TurnU",desc:"TurnU",freePathType:"bessel",url:"".concat(fb.BT,"/stay-effect/TurnU.png"),poster:"".concat(fb.BT,"/stay-effect/TurnU.json"),width:416.11104082321185,height:494.21363655533065,x:-410.2190688259109,y:-1.9567750506072912,points:[[0,0,0,0,0,0],[16.029244264507497,297.66815114709857,-1.244709851551761,362.4454790823212,-18.51866396761102,427.2228070175438],[-87.6144804318485,492.00013495276653,-184.7804723346827,494.1593792172739,-281.9464642375168,496.3186234817813],[-372.63472334682854,433.70053981106616,-389.9086774628879,360.2862348178138,-407.1826315789473,286.87192982456145],[-400.70489878542503,12.647908232118823,-409.34187584345466,23.444129554655888,-417.9788529014843,34.24035087719295]]},{key:"Launch",desc:"Launch",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/Launch.png"),poster:"".concat(fb.BT,"/stay-effect/Launch.json"),width:.6817486926450742,height:404.62898532388664,x:-.8772142796896105,y:-406.58588394062076,points:[[0,0,0,0,0,0],[.681727395411599,-404.6290688259109,.681727395411599,-404.6290688259109,.681727395411599,-404.6290688259109]]},{key:"GraphConnector1",desc:"GraphConnector1",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/GraphConnector1.png"),poster:"".concat(fb.BT,"/stay-effect/GraphConnector1.json"),width:275.70955634278005,height:477.7209324392712,x:-276.58680161943323,y:-479.67774628879886,points:[[0,0,0,0,0,0],[-3.6448313090418196,-220.77086369770575,-3.6448313090418196,-220.77086369770575,-3.6448313090418196,-220.77086369770575],[-271.39112010796225,-220.77086369770575,-271.39112010796225,-220.77086369770575,-271.39112010796225,-220.77086369770575],[-275.709608636977,-477.720931174089,-275.709608636977,-477.720931174089,-275.709608636977,-477.720931174089]]},{key:"GraphConnector2",desc:"GraphConnector2",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/GraphConnector2.png"),poster:"".concat(fb.BT,"/stay-effect/GraphConnector2.json"),width:318.0827481865722,height:565.1891710948044,x:-.8771611420378349,y:-1.9568364119433568,points:[[0,0,0,0,0,0],[9.310850202429151,278.00966261808367,9.310850202429151,278.00966261808367,9.310850202429151,278.00966261808367],[313.7642914979757,273.6911740890688,313.7642914979757,273.6911740890688,313.7642914979757,273.6911740890688],[318.0827800269906,565.1891497975708,318.0827800269906,565.1891497975708,318.0827800269906,565.1891497975708]]},{key:"GraphConnector3",desc:"GraphConnector3",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/GraphConnector3.png"),poster:"".concat(fb.BT,"/stay-effect/GraphConnector3.json"),width:578.2295093201755,height:379.2671563976046,x:-579.1067476383265,y:-1.9568055204115922,points:[[0,0,0,0,0,0],[-278.0946018893386,3.5586639676113236,-278.0946018893386,3.5586639676113236,-278.0946018893386,3.5586639676113236],[-280.2538461538461,379.2671659919028,-280.2538461538461,379.2671659919028,-280.2538461538461,379.2671659919028],[-578.2295546558704,377.1079217273954,-578.2295546558704,377.1079217273954,-578.2295546558704,377.1079217273954]]},{key:"GraphConnector4",desc:"GraphConnector4",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/GraphConnector4.png"),poster:"".concat(fb.BT,"/stay-effect/GraphConnector4.json"),width:650.1512947031039,height:349.7975708502024,x:-.8772056342779706,y:-350.59006747638324,points:[[0,0,0,0,0,0],[350.0163292847503,1.1643184885290339,350.0163292847503,1.1643184885290339,350.0163292847503,1.1643184885290339],[343.5385964912281,-348.6332523616734,343.5385964912281,-348.6332523616734,343.5385964912281,-348.6332523616734],[650.151282051282,-348.6332523616734,650.151282051282,-348.6332523616734,650.151282051282,-348.6332523616734]]},{key:"stairClimb",desc:"stairClimb",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/stairClimb.png"),poster:"".concat(fb.BT,"/stay-effect/stairClimb.json"),width:761.9941907051282,height:814.0350877192982,x:-762.8714035087719,y:-814.8268825910931,points:[[0,0,0,0,0,0],[-181.15750337381905,1.165020242915034,-181.15750337381905,1.165020242915034,-181.15750337381905,1.165020242915034],[-181.15750337381905,-206.12242914979754,-181.15750337381905,-206.12242914979754,-181.15750337381905,-206.12242914979754],[-379.807975708502,-210.4409176788124,-379.807975708502,-210.4409176788124,-379.807975708502,-210.4409176788124],[-373.33024291497975,-424.2060998650472,-373.33024291497975,-424.2060998650472,-373.33024291497975,-424.2060998650472],[-569.8214709851552,-428.52458839406205,-569.8214709851552,-428.52458839406205,-569.8214709851552,-428.52458839406205],[-571.9807152496626,-631.4935492577597,-571.9807152496626,-631.4935492577597,-571.9807152496626,-631.4935492577597],[-757.6757219973009,-633.6527935222672,-757.6757219973009,-633.6527935222672,-757.6757219973009,-633.6527935222672],[-761.9942105263158,-812.8700674763833,-761.9942105263158,-812.8700674763833,-761.9942105263158,-812.8700674763833]]},{key:"DownTheStairs",desc:"DownTheStairs",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/DownTheStairs.png"),poster:"".concat(fb.BT,"/stay-effect/DownTheStairs.json"),width:883.3519815915992,height:828.1572226088057,x:-.8771907683873224,y:-1.9568042552294003,points:[[0,0,0,0,0,0],[222.62323886639672,3.32592442645074,222.62323886639672,3.32592442645074,222.62323886639672,3.32592442645074],[216.14550607287447,199.8171524966262,216.14550607287447,199.8171524966262,216.14550607287447,199.8171524966262],[451.50313090418354,195.49866396761132,451.50313090418354,195.49866396761132,451.50313090418354,195.49866396761132],[447.18464237516866,413.58233468286096,447.18464237516866,413.58233468286096,447.18464237516866,413.58233468286096],[671.7460458839405,415.74157894736845,671.7460458839405,415.74157894736845,671.7460458839405,415.74157894736845],[676.0645344129555,616.5512955465587,676.0645344129555,616.5512955465587,676.0645344129555,616.5512955465587],[883.3519838056679,618.7105398110662,883.3519838056679,618.7105398110662,883.3519838056679,618.7105398110662],[883.3519838056679,828.1572334682861,883.3519838056679,828.1572334682861,883.3519838056679,828.1572334682861]]},{key:"EcgWave",desc:"EcgWave",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/EcgWave.png"),poster:"".concat(fb.BT,"/stay-effect/EcgWave.json"),width:766.7473220310392,height:380.02699055330635,x:-.8771870782725841,y:-208.0775708502024,points:[[0,0,0,0,0,0],[283.0766126855601,-.9925506072873986,283.0766126855601,-.9925506072873986,283.0766126855601,-.9925506072873986],[358.65016194331986,-206.12075573549254,358.65016194331986,-206.12075573549254,358.65016194331986,-206.12075573549254],[406.1535357624831,173.9062348178138,406.1535357624831,173.9062348178138,406.1535357624831,173.9062348178138],[481.72708502024295,-13.948016194332013,481.72708502024295,-13.948016194332013,481.72708502024295,-13.948016194332013],[766.7473279352228,-18.26650472334677,766.7473279352228,-18.26650472334677,766.7473279352228,-18.26650472334677]]},{key:"RightToLeft",desc:"RightToLeft",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/RightToLeft.png"),poster:"".concat(fb.BT,"/stay-effect/RightToLeft.json"),width:382.13720900809716,height:1.1655490890688258,x:-383.0144129554657,y:-1.9567771592442682,points:[[0,0,0,0,0,0],[-382.13721997300945,1.1655870445343908,-382.13721997300945,1.1655870445343908,-382.13721997300945,1.1655870445343908]]},{key:"SlideDownLTR",desc:"SlideDownLTR",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/SlideDownLTR.png"),poster:"".concat(fb.BT,"/stay-effect/SlideDownLTR.json"),width:326.13115194838053,height:407.09971480684885,x:-327.00831309041837,y:-1.9567998270917997,points:[[0,0,0,0,0,0],[-326.13112010796226,407.09973009446685,-326.13112010796226,407.09973009446685,-326.13112010796226,407.09973009446685]]},{key:"SlideUpRTL",desc:"SlideUpRTL",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/SlideUpRTL.png"),poster:"".concat(fb.BT,"/stay-effect/SlideUpRTL.json"),width:246.23911416160593,height:396.1391515899123,x:-247.11627530364376,y:-398.0959514170041,points:[[0,0,0,0,0,0],[-246.23908232118754,-396.1391363022942,-246.23908232118754,-396.1391363022942,-246.23908232118754,-396.1391363022942]]},{key:"ZigZagFall",desc:"ZigZagFall",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/ZigZagFall.png"),poster:"".concat(fb.BT,"/stay-effect/ZigZagFall.json"),width:177.05802968960865,height:672.6858368125843,x:-136.85133603238864,y:-1.9568219677800442,points:[[0,0,0,0,0,0],[-133.81489878542516,102.64534412955464,-133.81489878542516,102.64534412955464,-133.81489878542516,102.64534412955464],[25.969176788124173,176.059649122807,25.969176788124173,176.059649122807,25.969176788124173,176.059649122807],[-135.97414304993254,268.90715249662617,-135.97414304993254,268.90715249662617,-135.97414304993254,268.90715249662617],[36.765398110661295,353.11767881241565,36.765398110661295,353.11767881241565,36.765398110661295,353.11767881241565],[-129.4964102564103,437.32820512820507,-129.4964102564103,437.32820512820507,-129.4964102564103,437.32820512820507],[41.08388663967605,510.7425101214574,41.08388663967605,510.7425101214574,41.08388663967605,510.7425101214574],[-129.4964102564103,592.7937921727396,-129.4964102564103,592.7937921727396,-129.4964102564103,592.7937921727396],[34.6061538461538,672.6858299595142,34.6061538461538,672.6858299595142,34.6061538461538,672.6858299595142]]},{key:"LeftToRight",desc:"LeftToRight",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/LeftToRight.png"),poster:"".concat(fb.BT,"/stay-effect/LeftToRight.json"),width:455.65602332152497,height:1.1647583502024292,x:-.8772244011471457,y:-1.9567961369770046,points:[[0,0,0,0,0,0],[455.6559919028341,1.1647773279352123,455.6559919028341,1.1647773279352123,455.6559919028341,1.1647773279352123]]},{key:"SlideDownRTL",desc:"SlideDownRTL",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/SlideDownRTL.png"),poster:"".concat(fb.BT,"/stay-effect/SlideDownRTL.json"),width:390.87645495951415,height:316.4105990637652,x:-.8771971997300625,y:-1.9568203863022973,points:[[0,0,0,0,0,0],[390.8764507422402,316.4105937921727,390.8764507422402,316.4105937921727,390.8764507422402,316.4105937921727]]},{key:"SlideUpLTR",desc:"SlideUpLTR",freePathType:"line",url:"".concat(fb.BT,"/stay-effect/SlideUpLTR.png"),poster:"".concat(fb.BT,"/stay-effect/SlideUpLTR.json"),width:371.4419386808367,height:352.9522235576923,x:-.877161352901453,y:-354.909028340081,points:[[0,0,0,0,0,0],[371.4419703103913,-352.9522132253711,371.4419703103913,-352.9522132253711,371.4419703103913,-352.9522132253711]]}],FE=e=>{var t=e.title,i=e.children;return(0,Kg.jsxs)("div",{className:"snake-action-item",children:[t&&(0,Kg.jsx)("div",{className:"snake-action-item-title",children:t}),i]})},OE=()=>{var e,t=xu(),i=null===t||void 0===t||null===(e=t.attribute)||void 0===e?void 0:e.stayEffect,a=i.graph,n=i.duration,r=zE.filter((e=>e.key===(null===a||void 0===a?void 0:a.key)))[0],o=yj(),s=o.maxDuration,l=o.updateDuration,c=o.updateAnimationLoop,d=o.updateAnimationEase,u=o.clearPath,p=xj(),v=p.setPreview;function m(e){Ph(e)}function h(e){l(e)}function f(e){c(e)}function g(e){d(e.target.value)}function x(){t&&v()}return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"action-path-type",onClick:m,children:[(0,Kg.jsxs)("div",{className:"action-path-type-info",children:[(0,Kg.jsx)("div",{className:"action-path-type-pic",children:(0,Kg.jsx)(LE,{poster:null===r||void 0===r?void 0:r.url})}),(0,Kg.jsx)("div",{className:"action-path-type-name",children:"line"===(null===a||void 0===a?void 0:a.freePathType)?"\u76f4\u7ebf":"\u66f2\u7ebf"})]}),(0,Kg.jsx)("div",{className:"action-path-type-button",children:(0,Kg.jsx)(CS.Z,{className:"button-item",onClick:u,children:"\u5220\u9664"})})]}),(0,Kg.jsxs)("div",{className:"snake-action-box",children:[(0,Kg.jsx)(FE,{title:"\u5355\u6b21\u8fd0\u52a8\u65f6\u95f4",children:(0,Kg.jsxs)("div",{className:"snake-action-slider",children:[(0,Kg.jsx)(RE,{tipFormatter:e=>"".concat(Number(e/1e3).toFixed(1),"\u79d2"),caption:["",""],value:n,step:100,min:100,max:s,onChange:h}),(0,Kg.jsxs)("span",{style:{marginLeft:5,whiteSpace:"nowrap"},children:[Number(n/1e3).toFixed(1),"\u79d2"]})]})}),(0,Kg.jsx)(FE,{title:"\u5355\u6b21\u8fd0\u52a8\u901f\u5ea6",children:(0,Kg.jsx)("div",{className:"snake-action-item-radio",children:(0,Kg.jsx)(FP.ZP.Group,{onChange:g,defaultValue:null===a||void 0===a?void 0:a.easing,children:Rd.map(((e,t)=>(0,Kg.jsx)(FP.ZP,{value:t,children:e.desc})))})})}),(0,Kg.jsx)(FE,{title:"\u5faa\u73af\u8fd0\u52a8",children:(0,Kg.jsx)(KP.Z,{defaultChecked:null===a||void 0===a?void 0:a.loop,className:"action-switch",onChange:f})}),(0,Kg.jsx)("div",{className:"snake-action-button",children:(0,Kg.jsx)(CS.Z,{className:"snake-action-button-item",onClick:x,children:"\u9884\u89c8"})})]})]})},BE=(0,hp.Pi)(OE),WE=()=>{var e=Pw(),t=yj(),i=t.updatePoints,a=t.clearPath,n=xj(),r=(n.setPreview,t=>{var a;null!==e&&void 0!==e&&null!==(a=e.attribute)&&void 0!==a&&a.aeA?nA.Z.confirm({title:"\u786e\u5b9a\u8981\u6e05\u7a7a\u5165\u573a\u52a8\u753b/\u51fa\u573a\u52a8\u753b\u5417\uff1f",content:"\u505c\u7559\u52a8\u753b\u65e0\u6cd5\u4e0e\u5165\u573a\u52a8\u753b/\u51fa\u573a\u52a8\u753b\u540c\u65f6\u5b58\u5728\uff01",okText:"\u786e\u8ba4",cancelText:"\u6211\u518d\u60f3\u60f3",onOk:()=>{i(t)}}):i(t)}),o=()=>{a()};return{setAnimation:r,clearPathAnimation:o}},VE=WE,UE=e=>{var t=e.path,i=e.preview,a=e.autoPlay,o=void 0!==a&&a,s=e.alwaysPlay,l=void 0!==s&&s,c=(0,r.useRef)(null),d=(0,r.useRef)(),u=(0,r.useState)(!1),p=(0,n.Z)(u,2),v=p[0],m=p[1];return(0,r.useEffect)((()=>{var e,i;null!==c&&void 0!==c&&c.current&&v?(d.current||(d.current=px().loadAnimation({container:null===c||void 0===c?void 0:c.current,renderer:"svg",loop:!0,path:t})),null===(e=d.current)||void 0===e||e.play()):null===(i=d.current)||void 0===i||i.pause()}),[v]),(0,r.useEffect)((()=>{o&&m(!0)}),[o]),(0,r.useEffect)((()=>{var e;return null===(e=d.current)||void 0===e?void 0:e.destroy()}),[]),(0,Kg.jsxs)("div",{className:"xiudd-lottie",onMouseEnter:()=>{m(!0)},onMouseLeave:()=>{v&&!l&&m(!1)},children:[!v&&(0,Kg.jsx)("img",{src:i,alt:"lottie preview",style:{position:"absolute",left:0,top:0}}),(0,Kg.jsx)("div",{ref:c,className:"xiudd-lottie-box",style:{opacity:v?1:0,position:"absolute",left:0,top:0}})]})},GE=UE,XE=e=>{var t=e.visible,i=VE(),a=i.setAnimation,n=e=>{a(e)};return(0,Kg.jsx)("div",{className:"path-animation-list",style:{opacity:t?1:0},children:zE.map(((e,t)=>(0,Kg.jsx)("div",{className:"path-animation-item",onClick:()=>{n(e)},children:(0,Kg.jsx)("div",{className:"preview",children:(0,Kg.jsx)(GE,{path:e.poster,preview:e.url})})},t)))})},qE=XE,HE=(e,t,i,a)=>{var n={x:i-e,y:a-t},r={x:0,y:1},o=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.y,2)),s=Math.sqrt(Math.pow(r.x,2)+Math.pow(r.y,2)),l=n.x*r.x+n.y*r.y,c=l/(o*s),d=Math.acos(c)*(180/Math.PI);return e<i&&t<a&&(d=90-d),e>i&&(d=90+d),e<i&&t>a&&(d=450-d),e<i&&t===a&&(d=0),e===i&&t<a&&(d=90),e>i&&t===a&&(d=180),e===i&&t>a&&(d=270),parseInt(d)},YE=e=>{var t=e||{},i=t.value,a=t.onChange,o=(0,yp.Z)(t,["value","onChange"]),s=(0,r.useRef)(),l=(0,r.useRef)(),c=(0,r.useState)(0),d=(0,n.Z)(c,2),p=d[0],v=d[1];(0,r.useEffect)((()=>{v(i)}),i);var m=(0,Nb.Z)((e=>{e.stopPropagation();var t=e.clientX,i=e.clientY,n=l.current,r=n.width,o=n.height,s=n.left,c=n.top,d=HE(s+r/2,c+o/2,t,i);console.log("angle--",d),v(d),a&&a(d)}),{wait:100}),h=m.run,f=(0,Nb.Z)((e=>{e.stopPropagation(),document.onmouseup=null,document.onmousemove=null}),{wait:100}),g=f.run,x=e=>{e.stopPropagation(),l.current=s.current.getBoundingClientRect(),document.onmousemove=h,document.onmouseup=g};return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:"snake-action-circular"},o),{},{children:(0,Kg.jsxs)("div",{className:"snake-action-circular-vessel",children:[(0,Kg.jsx)("div",{className:"snake-action-circular-sign"}),(0,Kg.jsx)("div",{className:"snake-action-circular-sign"}),(0,Kg.jsx)("div",{className:"snake-action-circular-sign"}),(0,Kg.jsx)("div",{className:"snake-action-circular-sign"}),(0,Kg.jsx)("div",{className:"snake-action-circular-center",ref:s}),(0,Kg.jsx)("div",{className:"snake-action-circular-pointer",style:{transform:"rotate(".concat(p,"deg)")},children:(0,Kg.jsx)("div",{className:"snake-action-circular-pointer-fill",children:(0,Kg.jsxs)("div",{className:"snake-action-circular-clocksecond",onMouseDown:x,children:[(0,Kg.jsx)("div",{className:"snake-action-circular-clockarrow"}),(0,Kg.jsx)("div",{className:"snake-action-circular-clockhandle"})]})})})]})}))},KE=e=>{var t=e.title,i=(e.extra,e.children);return(0,Kg.jsxs)("div",{className:"snake-action-item",children:[(0,Kg.jsx)("div",{className:"snake-action-item-title",children:t}),i]})},QE=()=>{var e,t,i,a,n=_j(),r=n.attach,o=n.updateAmplitude,s=n.updateDirection,l=n.updateSpeed,c=xj(),d=c.setPreview,u=e=>{s(e)},p=e=>{o(e)},v=e=>{l(e)},m=()=>{d()};return(0,Kg.jsxs)("div",{className:"snake-action-box",children:[(0,Kg.jsx)(KE,{title:"\u6296\u52a8\u65b9\u5411",children:(0,Kg.jsxs)("div",{className:"snake-action-circular-box",children:[(0,Kg.jsx)(YE,{onChange:u,value:null===r||void 0===r||null===(e=r.data)||void 0===e?void 0:e.direction}),null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.direction,"\xb0"]})}),(0,Kg.jsx)(KE,{title:"\u6296\u52a8\u632f\u5e45",children:(0,Kg.jsx)("div",{className:"snake-action-slider",children:(0,Kg.jsx)(RE,{tipFormatter:null,defaultValue:null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.amplitude,step:.05,min:.05,max:.5,onChange:p})})}),(0,Kg.jsx)(KE,{title:"\u6296\u52a8\u901f\u5ea6",children:(0,Kg.jsx)("div",{className:"snake-action-slider",children:(0,Kg.jsx)(RE,{tipFormatter:null,defaultValue:null===r||void 0===r||null===(a=r.data)||void 0===a?void 0:a.speed,caption:["\u6162","\u5feb"],step:.2,min:.4,max:4,onChange:v})})}),(0,Kg.jsx)("div",{className:"snake-action-button",children:(0,Kg.jsx)(CS.Z,{className:"snake-action-button-item",onClick:m,children:"\u9884\u89c8"})})]})},JE=(0,hp.Pi)(QE),$E=()=>{var e,t,i=bj(),a=i.attach,n=i.inWhirl,r=i.updateDirection,o=i.updateSpeed,s=i.startSetCenter,l=xj(),c=l.setPreview,d=e=>{r(e.target.value)},u=e=>{o(e)},p=e=>{s(e)};function v(){c()}return(0,Kg.jsxs)("div",{className:"snake-action-box",children:[(0,Kg.jsx)(KE,{title:"\u65cb\u8f6c\u65b9\u5411",children:(0,Kg.jsx)("div",{className:"snake-action-item-radio",children:(0,Kg.jsxs)(FP.ZP.Group,{defaultValue:null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.ccw,onChange:d,children:[(0,Kg.jsx)(FP.ZP,{value:!0,children:"\u987a\u65f6\u9488"}),(0,Kg.jsx)(FP.ZP,{value:!1,children:"\u9006\u65f6\u9488"})]})})}),(0,Kg.jsx)(KE,{title:"\u65cb\u8f6c\u901f\u5ea6",children:(0,Kg.jsx)("div",{className:"snake-action-slider",children:(0,Kg.jsx)(RE,{tipFormatter:null,caption:["\u6162","\u5feb"],defaultValue:null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.speed,step:.2,min:.05,max:2.5,onChange:u})})}),(0,Kg.jsx)(KE,{title:"\u5f00\u542f\u8bbe\u7f6e\u65cb\u8f6c\u4e2d\u5fc3",children:(0,Kg.jsx)(KP.Z,{defaultChecked:n,className:"action-switch",onChange:p})}),(0,Kg.jsx)("div",{className:"snake-action-button",children:(0,Kg.jsx)(CS.Z,{className:"snake-action-button-item",onClick:v,children:"\u9884\u89c8"})})]})},eL=(0,hp.Pi)($E),tL=e=>{var t=e.title,i=e.icon,a=e.choosed,n=e.visible,r=void 0===n||n,o=e.onClick;return(0,Kg.jsxs)("div",{className:hb()("animation-stay-up-item",{"animation-stay-item-choosed":a,visible:!r}),onClick:o,children:[(0,Kg.jsx)("div",{className:"left",children:(0,Kg.jsx)(iP,{type:i})}),(0,Kg.jsx)("span",{children:t})]})},iL=()=>{var e,t,i,a,o,s,l,c,d,u,p,v,m,h,f=xu(),g=uu(),x=(g.changStatue,g.start,xj()),y=x.clear,b=bj(),_=b.start,j=_j(),w=j.start,k=(0,r.useState)(!0),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=(0,r.useMemo)((()=>{var e,t=!1,i=!1,a=!1;if(null!==f&&void 0!==f&&null!==(e=f.attribute)&&void 0!==e&&e.stayEffect){var n,r=null===f||void 0===f||null===(n=f.attribute)||void 0===n?void 0:n.stayEffect,o=r.graph,s=r.attach;o&&(t=!0),"shake"===(null===s||void 0===s?void 0:s.type)&&(i=!0),"Whirl"===(null===s||void 0===s?void 0:s.type)&&(a=!0)}return{isPath:t,isShake:i,isWhirl:a}}),[null===f||void 0===f||null===(e=f.attribute)||void 0===e||null===(t=e.stayEffect)||void 0===t?void 0:t.attach,null===f||void 0===f||null===(i=f.attribute)||void 0===i||null===(a=i.stayEffect)||void 0===a?void 0:a.graph]);return(0,r.useEffect)((()=>{var e,t,i,a;null!==f&&void 0!==f&&null!==(e=f.attribute)&&void 0!==e&&null!==(t=e.stayEffect)&&void 0!==t&&t.graph&&C(!0),null!==f&&void 0!==f&&null!==(i=f.attribute)&&void 0!==i&&null!==(a=i.stayEffect)&&void 0!==a&&a.attach&&C(!1)}),[null===f||void 0===f||null===(o=f.attribute)||void 0===o?void 0:o.stayEffect]),(0,Kg.jsxs)("div",{className:"animation-stay",children:[(0,Kg.jsxs)("div",{className:"animation-stay-up",children:[(0,Kg.jsx)(tL,{choosed:!1,title:"\u65e0\u52a8\u753b",icon:"iconwushuju",visible:!(null===f||void 0===f||null===(s=f.attribute)||void 0===s||!s.stayEffect),onClick:()=>{var e,t,i,a;null!==f&&void 0!==f&&null!==(e=f.attribute)&&void 0!==e&&null!==(t=e.stayEffect)&&void 0!==t&&t.attach||null!==f&&void 0!==f&&null!==(i=f.attribute)&&void 0!==i&&null!==(a=i.stayEffect)&&void 0!==a&&a.graph?(y(),C(!1)):xp.default.info("\u8bf7\u5148\u8bbe\u7f6e\u505c\u7559\u7279\u6548\uff01")}}),(0,Kg.jsx)(tL,{title:"\u8def\u5f84\u52a8\u753b",choosed:N.isPath,icon:"iconluji",onClick:()=>{y(),C(!0)}}),(0,Kg.jsx)(tL,{title:"\u65cb\u8f6c\u52a8\u753b",choosed:N.isWhirl,icon:"iconchuangkoudoudong",onClick:()=>{_(),C(!1)}}),(0,Kg.jsx)(tL,{title:"\u6296\u52a8\u52a8\u753b",choosed:N.isShake,icon:"iconutil-rotate-init",onClick:()=>{w(),C(!1)}})]}),(0,Kg.jsxs)("div",{className:"animation-stay-down",children:[Z&&(null===f||void 0===f||null===(l=f.attribute)||void 0===l||null===(c=l.stayEffect)||void 0===c?void 0:c.graph)&&(0,Kg.jsx)(BE,{}),!Z&&"shake"===(null===f||void 0===f||null===(d=f.attribute)||void 0===d||null===(u=d.stayEffect)||void 0===u||null===(p=u.attach)||void 0===p?void 0:p.type)&&(0,Kg.jsx)(JE,{}),!Z&&"Whirl"===(null===f||void 0===f||null===(v=f.attribute)||void 0===v||null===(m=v.stayEffect)||void 0===m||null===(h=m.attach)||void 0===h?void 0:h.type)&&(0,Kg.jsx)(eL,{}),Z&&(0,Kg.jsx)(qE,{visible:!0})]})]})},aL=(0,hp.Pi)(iL),nL=YP.Z.TabPane,rL=[{key:"in",type:"i",title:"\u5165\u573a\u52a8\u753b"},{key:"out",type:"o",title:"\u51fa\u573a\u52a8\u753b"}];function oL(){var e,t=Pw(),i=uu(),a=i.changStatue,o=(0,r.useState)("in"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=W_(),u=d.value,p=d.assetAeaDuration,v=d.preview,m=d.previewEnd,h=d.updatePbr,f=d.max;function g(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=null===u||void 0===u||null===(e=u[oE[l]])||void 0===e?void 0:e.resId;i&&v(oE[l],i,t)}function x(e){h(oE[l],e),m(),g(e)}return(0,r.useEffect)((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.attribute)&&void 0!==e&&e.stayEffect&&c("s")}),[null===t||void 0===t||null===(e=t.attribute)||void 0===e?void 0:e.stayEffect]),(0,Kg.jsx)("div",{className:JM().animationPanel,children:(0,Kg.jsxs)(YP.Z,{destroyInactiveTabPane:!0,activeKey:l,className:"xdd-designer-sider-tab",onChange:e=>{var i,n;c(e),"stay"===e&&null!==t&&void 0!==t&&null!==(i=t.attribute)&&void 0!==i&&null!==(n=i.stayEffect)&&void 0!==n&&n.graph?a(2):a(-1)},children:[rL.map((e=>{var t,i;return(0,Kg.jsx)(nL,{tab:e.title,children:(0,Kg.jsxs)("div",{className:hb()(JM().animationTabItem,JM().animationListWhiteFont),children:[(0,Kg.jsx)(eE,{type:e.key,active:null===u||void 0===u||null===(t=u[oE[l]])||void 0===t?void 0:t.resId}),(0,Kg.jsxs)("div",{hidden:!(null!==u&&void 0!==u&&null!==(i=u[oE[l]])&&void 0!==i&&i.resId),className:JM().animationTimeBox,children:[(0,Kg.jsx)("span",{className:JM().timeLabel,children:"\u52a8\u753b\u65f6\u957f\uff1a"}),(0,Kg.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,Kg.jsx)(zM.Z,{size:"small",value:"".concat(p&&((null===p||void 0===p?void 0:p[e.type])/1e3).toFixed(1),"s"),style:{height:22,width:50,fontSize:12}}),(0,Kg.jsx)(TP.Z,{tooltipVisible:!1,step:100,min:100,max:f[e.type],value:null===p||void 0===p?void 0:p[e.type],onChange:t=>{var i=_t(t,null===u||void 0===u?void 0:u[e.type].kw);x(i)}})]})]})]})},e.key)})),(0,Kg.jsx)(nL,{tab:"\u505c\u7559\u52a8\u753b",children:(0,Kg.jsx)(aL,{})},"s"),(0,Kg.jsx)(nL,{tab:"\u4e0a\u4f20\u52a8\u753b",children:(0,Kg.jsx)(PE,{})},"import")]})})}var sL=(0,hp.Pi)(oL),lL=()=>{var e=Vw(),t=e.currentAsset;return(0,Kg.jsxs)(RM,{children:[(0,Kg.jsx)(MM,{tab:"\u7ec4\u5408",children:(0,Kg.jsx)(NM,{})},"1"),ti(t)&&(0,Kg.jsx)(MM,{tab:"\u52a8\u753b",children:(0,Kg.jsx)(sL,{})},"2")]})},cL=(0,hp.Pi)(lL);function dL(e){var t=e.title,i=e.extraContent,a=e.children,n=e.style,r=e.contentStyle;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"mold-header",style:n,children:[(0,Kg.jsx)("div",{children:t}),(0,Kg.jsx)("div",{className:"mold-extra",children:i})]}),(0,Kg.jsx)("div",{className:"mold-list",style:r,children:a})]})}var uL=i(9690),pL=i(89628),vL=i(62981);function mL(e){var t=e.data,i=e.style,a=e.children,o=e.onDrop,s=e.type,l=e.canDrag,c=void 0===l||l,d=e.onDrag,p=e.onDragEnd,v=(0,yp.Z)(e,["data","style","children","onDrop","type","canDrag","onDrag","onDragEnd"]),m=(0,uL.c)({type:null!==s&&void 0!==s?s:"pic",item:t,canDrag:c,collect:e=>({opacity:e.isDragging()?0:1,monitor:e}),end:(e,i)=>{i.getDropResult()&&o&&o(t)}},[t]),h=(0,n.Z)(m,3),f=h[0],g=f.opacity,x=f.monitor,y=h[1],b=h[2],_=(0,pL.L)((()=>({accept:gP,collect:e=>{var t=e.isOver({shallow:!0});return{type:s,isOverCurrent:t}}})),[t]),j=(0,n.Z)(_,2),w=(j[0].isOverCurrent,j[1]);(0,r.useEffect)((()=>{b((0,vL.r)(),{captureDraggingState:!0})}),[]),(0,r.useEffect)((()=>{x&&(!g&&x.isDragging()?d&&d():p&&p())}),[g]);var k=(0,r.useRef)(null);return y(w(k)),(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({ref:k,style:(0,u.Z)((0,u.Z)({},i),{},{opacity:g})},v),{},{onMouseDown:e=>{var i,a=e.clientX,n=e.clientY,r=null===(i=k.current)||void 0===i?void 0:i.getBoundingClientRect(),o=a-r.left,l=n-r.top;if(t.offset={offsetLeft:o,offsetTop:l,offsetLeftPercent:o/r.width,offsetTopPercent:l/r.height},"text"!==s){var c,d=xm(null===t||void 0===t?void 0:t.attribute,{isBackground:null!==(c=t.meta.isBackground||t.meta.isOverlay)&&void 0!==c&&c,type:s});Object.assign(t.attribute,d)}},children:a}))}var hL=i(1522),fL=i.n(hL);function gL(e){var t=e.type,i=e.style,a=e.src,n=e.name,r=e.active,o=void 0!==r&&r,s=e.onClick,l=e.attribute,c=e.actionType,d=void 0===c?"add":c;return(0,Kg.jsx)(mL,{canDrag:"add"===d,style:i,className:hb()(fL().item,{[fL()["item-active"]]:o}),type:"text",data:{meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)((0,u.Z)({},l),Xv(t))},children:(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},onClick:s,children:n||(0,Kg.jsx)("img",{src:a,alt:"text-effect",width:"100%"})})})}var xL=e=>{var t,i,a=e.type,n=Pw(),r=null===n||void 0===n?void 0:n.attribute,o=(0,DI.ZP)(WM),s=(o.loading,o.data),l=(0,DI.ZP)(FM),c=(l.loading,l.data),d=(null===s||void 0===s?void 0:s.items)||[],p=(null===c||void 0===c?void 0:c.msg)||[],v=B_(),m=v.updateFontEffect,h=v.updateSignatureFontEffect,f=v.clearFontEffect,g=e=>{"update"===a?m("".concat(e,"@0")):Tg({meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)({effect:"".concat(e,"@0")},Xv("effect"))})},x=e=>{"update"===a?h({resId:e,effect:void 0}):Tg({meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)((0,u.Z)({},Xv("effect")),{},{effectColorful:{resId:e,effect:void 0}})})};return(0,Kg.jsxs)(Kg.Fragment,{children:["update"===a&&(0,Kg.jsx)(gL,{type:"effect",name:(0,Kg.jsx)(iP,{type:"iconwushuju",style:{fontSize:36,color:"#fff"}}),onClick:f,attribute:{}}),(!(null!==n&&void 0!==n&&null!==(t=n.attribute)&&void 0!==t&&t.textBackground)||!(null!==n&&void 0!==n&&null!==(i=n.attribute)&&void 0!==i&&i.textBackground.enabled))&&d.map((e=>{var t;return(0,Kg.jsx)(gL,{type:"effect",active:(null===r||void 0===r||null===(t=r.effectColorful)||void 0===t?void 0:t.resId)===e.id,src:e.preview_url,onClick:()=>x(e.id),attribute:{rt_preview_url:e.preview_url,effectColorful:{resId:e.id,effect:""}}},e.id)})),p.map((e=>{var t,i,a="".concat(fb.PP).concat(null===(t=e.preview)||void 0===t?void 0:t.split(".")[0],"-big.png");return(0,Kg.jsx)(gL,{type:"effect",active:(null===r||void 0===r||null===(i=r.effectColorful)||void 0===i?void 0:i.resId)===e.id,src:a,onClick:()=>g(e.id),attribute:{effect:e.id,rt_preview_url:a}},e.id)}))]})},yL=(0,hp.Pi)(xL);function bL(){var e=Pw(),t=null===e||void 0===e?void 0:e.attribute;function i(e,i){"effect"===e?Tg({meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)((0,u.Z)({},Xv("effect")),{},{rt_preview_url:data.preview_url,effectColorful:{resId:i,effect:""}})}):("text"!==e&&i&&(t.effect="".concat(i,"@0")),Tg({meta:{type:"text",addOrigin:"text"===e?"text":"specificWord"},attribute:(0,u.Z)((0,u.Z)({},t),Xv(e))}))}return(0,Kg.jsxs)("div",{style:{height:"100%",paddingLeft:18,overflowY:"auto"},children:[(0,Kg.jsxs)(dL,{title:"\u57fa\u7840\u6587\u5b57",children:[(0,Kg.jsx)(gL,{type:"title",name:(0,Kg.jsx)("div",{style:{fontSize:18,fontWeight:"bold",color:"#fff"},children:"\u6807\u9898"}),onClick:()=>i("title"),attribute:{}}),(0,Kg.jsx)(gL,{type:"text",name:(0,Kg.jsx)("div",{style:{fontSize:14,color:"#fff"},children:"\u6587\u672c"}),onClick:()=>i("text"),attribute:{}}),(0,Kg.jsx)(gL,{type:"textBackground",style:{width:148},name:(0,Kg.jsx)("div",{style:{fontSize:14,color:"#fff",width:"120px",height:"26px",backgroundColor:"#1C1C26",display:"flex",justifyContent:"center",alignItems:"center"},children:"\u5e26\u80cc\u666f\u6587\u5b57"}),onClick:()=>i("textBackground"),attribute:{}})]}),(0,Kg.jsx)(dL,{title:"\u7279\u6548\u5b57",contentStyle:{gridTemplateColumns:"repeat(auto-fill,minmax(88px,1fr))",paddingRight:4},children:(0,Kg.jsx)(yL,{onHandleClick:i,type:"add"})})]})}var _L=(0,hp.Pi)(bL);function jL(){return(0,Kg.jsx)(_L,{})}var wL=i(96185),kL=i.n(wL),TL=YP.Z.TabPane,ZL=e=>{console.log(e)},CL=["linear-gradient(90deg, rgba(34, 84, 244,1) 25.39%, rgba(10, 207, 254,1) 100%)","linear-gradient(90deg, rgba(2, 179, 244,1) 16.53%, rgba(0, 242, 254,1) 100%)","linear-gradient(90deg, rgba(211, 255, 254,1) 0%, rgba(1, 237, 253,1) 100%)","linear-gradient(90deg, rgba(102, 22, 206,1) 0%, rgba(34, 84, 244,1) 100%)","linear-gradient(90deg, rgba(248, 54, 0,1) 0%, rgba(250, 204, 34,1) 100%)","linear-gradient(90deg, rgba(255, 226, 89,1) 0%, rgba(255, 167, 81,1) 100%)","linear-gradient(90deg, rgba(255, 225, 6,1) 0%, rgba(179, 255, 218,1) 100%)","linear-gradient(90deg, rgba(247, 121, 125,1) 0%, rgba(249, 212, 35,1) 95%, rgba(255, 246, 41,1) 100%)","linear-gradient(90deg, rgba(255, 11, 13,1) 0%, rgba(255, 121, 121,1) 100%)","linear-gradient(90deg, rgba(255, 15, 147,1) 0%, rgba(254, 84, 85,1) 82.16%, rgba(245, 68, 68,1) 100%)","linear-gradient(90deg, rgba(252, 92, 125,1) 0%, rgba(255, 251, 213,1) 100%)","linear-gradient(90deg, rgba(255, 15, 147,1) 0%, rgba(196, 113, 237,1) 1%, rgba(246, 79, 89,1) 100%)","linear-gradient(90deg, rgba(17, 153, 142,1) 0%, rgba(56, 239, 125,1) 100%)","linear-gradient(90deg, rgba(171, 255, 203,1) 0%, rgba(0, 226, 104,1) 100%)","linear-gradient(90deg, rgba(97, 255, 156,1) 0%, rgba(95, 175, 250,1) 100%)","linear-gradient(90deg, rgba(140, 244, 190,1) 0%, rgba(250, 255, 209,1) 100%)","linear-gradient(90deg, rgba(44, 241, 253,1) 0%, rgba(154, 192, 129,1) 50%, rgba(249, 149, 22,1) 94%)","linear-gradient(90deg, rgba(48, 34, 238,1) 0%, rgba(143, 20, 128,1) 54%, rgba(236, 7, 19,1) 100%)","linear-gradient(90deg, rgba(18, 214, 223,1) 0%, rgba(134, 113, 239,1) 48%, rgba(247, 15, 255,1) 94%)","linear-gradient(90deg, rgba(30, 150, 0,1) 0%, rgba(255, 242, 0,1) 51%, rgba(243, 41, 53,1) 100%)","linear-gradient(90deg, rgba(217, 255, 255,1) 0%, rgba(255, 232, 180,1) 100%)","linear-gradient(90deg, rgba(217, 255, 255,1) 0%, rgba(255, 232, 179,1) 100%)","linear-gradient(90deg, rgba(255,154,158,1) 0%,  rgba(250,208,196,1) 100%)","linear-gradient(90deg, rgba(161,140,209) 0%,  rgba(251,194,235,1) 100%)","linear-gradient(90deg, rgba(250,208,196,1) 0%,  rgba(255,209,255,1) 100%)","linear-gradient(90deg, rgba(255,154,158,1) 0%,  rgba(254,207,239,1) 100%)","linear-gradient(90deg, rgba(251,194,235,1) 0%,  rgba(166,193,238,1) 100%)","linear-gradient(90deg, rgba(212,252,121,1) 0%,  rgba(150,230,161,1) 100%)","linear-gradient(90deg, rgba(161,196,253,1) 0%,  rgba(194,233,251,1) 100%)","linear-gradient(90deg, rgba(132,250,176,1) 0%,  rgba(143,211,244,1) 100%)","linear-gradient(90deg, rgba(166,192,254,1) 0%,  rgba(246,128,132,1) 100%)","linear-gradient(90deg, rgba(252,203,144,1) 0%,  rgba(213,126,235,1) 100%)","linear-gradient(90deg, rgba(207,217,223,1) 0%,  rgba(226,235,240,1) 100%)","linear-gradient(90deg, rgba(224,195,252,1) 0%,  rgba(142,197,252,1) 100%)","linear-gradient(90deg, rgba(79,172,254,1) 0%,  rgba(0,242,254,1) 100%)","linear-gradient(90deg, rgba(250,112,154,1) 0%,  rgba(254,225,64,1) 100%)","linear-gradient(90deg, rgba(168,237,234,1) 0%,  rgba(254,214,227,1) 100%)","linear-gradient(90deg, rgba(94,231,223,1) 0%,  rgba(180,144,202,1) 100%)","linear-gradient(90deg, rgba(185, 252, 249,1) 0%, rgba(255, 231, 239,1) 100%)","linear-gradient(90deg, rgba(255, 250, 224,1) 0%, rgba(255, 209, 241,1) 100%)","linear-gradient(90deg, rgba(214, 255, 205,1) 0%, rgba(181, 253, 238,1) 100%)","linear-gradient(90deg, rgba(0, 0, 0,1) 26.5%, rgba(255, 255, 255, 0.22) 100%)","linear-gradient(90deg, rgba(0, 0, 0,1) 17.6%, rgba(196, 196, 196, 0) 100%)","linear-gradient(90deg, rgba(190, 190, 190,1) 0%, rgba(0, 0, 0,1) 100%)","linear-gradient(90deg, rgba(48, 67, 82,1) 0%, rgba(215, 210, 204,1) 100%)","linear-gradient(90deg, rgba(203, 166, 77,1) 0%, rgba(237, 205, 91,1) 26.5%, rgba(255, 251, 187,1) 50%, rgba(237, 205, 91,1) 72.3%, rgba(206, 171, 74,1) 100%)","linear-gradient(90deg, rgba(185, 147, 13,1) 0%, rgba(254, 246, 149,1) 50%, rgba(183, 144, 9,1) 100%)","linear-gradient(90deg, rgba(168, 182, 196,1) 0%, rgba(250, 246, 242,1) 53.5%, rgba(168, 182, 196,1) 100%)","linear-gradient(90deg, rgba(104, 116, 125,1) 0%, rgba(240, 240, 240,1) 53.5%, rgba(104, 116, 125,1) 100%)"],NL=e=>{var t,i,a=e.monochrome,n=e.value,r=e.updateColor,o=e.changeMockGradient,s="object"===typeof n&&"linear"===(null===(t=n[Object.keys(n)[0]])||void 0===t||null===(i=t.color)||void 0===i?void 0:i.type)?"2":"1";return(0,Kg.jsx)("div",{className:kL().svgColorSelector,children:(0,Kg.jsxs)(YP.Z,{defaultActiveKey:s,onChange:ZL,children:[(0,Kg.jsx)(TL,{tab:"\u9884\u8bbe\u7eaf\u8272",children:(0,Kg.jsx)("div",{className:hb()({"grid-box":!0,"gap-10":!0,"grid-columns-7":!0}),style:{flex:1,padding:"1px"},children:a.map((e=>(0,Kg.jsx)("div",{className:"gap-item box-border",style:{background:e},onClick:t=>{var i=e.replace(/[^\d,]/g,"").split(","),a={r:Number(i[0]),g:Number(i[1]),b:Number(i[2]),a:1};r(a)}},e)))})},"1"),(0,Kg.jsx)(TL,{tab:"\u9884\u8bbe\u6e10\u53d8",children:(0,Kg.jsx)("div",{className:hb()({"grid-box":!0,"gap-10":!0,"grid-columns-7":!0}),style:{flex:1,padding:"1px"},children:CL.map((e=>(0,Kg.jsx)("div",{style:{backgroundImage:e},onClick:t=>{t.stopPropagation(),o(e)},className:"gap-item box-border"},e)))})},"2")]})})},SL=NL;function IL(e){if(e*=1,e<0&&(e+=360),0==e)return{x1:0,y1:0,x2:1,y2:0};if(180==e)return{x1:1,y1:0,x2:0,y2:0};if(90==e)return{x1:0,y1:1,x2:0,y2:0};if(270==e)return{x1:0,y1:0,x2:0,y2:1};var t=Math.abs(Math.cos(Math.PI/180*e)),i=Math.abs(Math.sin(Math.PI/180*e));return e>0&&e<90?{x1:0,y1:i,x2:t,y2:0}:e>90&&e<180?{x1:t,y1:i,x2:0,y2:0}:e>180&&e<270?{x1:t,y1:0,x2:0,y2:i}:e>270&&e<360?{x1:0,y1:0,x2:t,y2:i}:void 0}function AL(e){var t=JSON.parse(JSON.stringify(e));if(t.length<2)return"";var i="linear-gradient(".concat(90,"deg,");return t.sort(((e,t)=>e.percent-t.percent)),t.forEach(((e,a)=>{if(e.color){var n=e.color;"string"!==typeof n&&(n=Oh(n)),i=a===t.length-1?"".concat(i+n," ").concat(e.percent,"%"):"".concat(i+n," ").concat(e.percent,"%,")}})),i+=")",i}function PL(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:205,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18;if(!e||!t||!i)throw new Error("\u53c2\u6570\u9519\u8bef!");var a=0,n=[],r=/-?\d+(\.\d+)?deg/gi,o=/(rgb(a?)\()(\d+),( *)(\d+), *(\d+)(, *(\d+(\.\d+)?))?\)/g,s=/(rgb(a?)\()(\d+),( ?)(\d+), ?(\d+)(, ?(\d+(\.\d+)?))?\)(( ?)(\d+(\.\d+)?)%)?/gi,l=e.match(r);null===l||void 0===l||l.forEach((e=>{a=1*e.replace(/deg/g,"")}));var c=e.match(s);return null===c||void 0===c||c.forEach((e=>{var a=0;a=1*e.match(/\d+(\.\d+)?%/g)[0].replace("%"," ");var r=t*a/100,s=r+i;s>t&&(r=t-i,s=t);var l=k(e.match(o)[0]);n.push({percent:a,left:r,right:s,color:l})})),{angle:a,list:n}}function ML(e){var t=JSON.parse(JSON.stringify(e));t.colorStops.sort(((e,t)=>e.offset-t.offset)),t.angle=_(t.angle);var i="linear-gradient(".concat(t.angle,"deg,");return t.colorStops.forEach(((e,a)=>{var n=e.color;n&&("string"!==typeof n&&(n=Oh(n)),i=a===t.colorStops.length-1?"".concat(i+n," ").concat(100*e.offset,"%"):"".concat(i+n," ").concat(100*e.offset,"%,"))})),i+=")",i}function EL(e){var t=e.angle,i=e.colorStops,a=void 0===i?[]:i,n=[];return a.forEach((e=>{var t=205*e.offset-20;t=t>0?t:0;var i={left:t,right:t+20,top:0,color:e.color,percent:100*e.offset};n.push(i)})),{angle:t,list:n}}function LL(e,t){var i=IL(t),a=[];return e.forEach((e=>{if(e.color){var t=e.color,i={color:t,offset:e.percent/100};a.push(i)}})),{coords:i,colorStops:a,angle:1*t,type:"linear"}}var DL=()=>{var e=(0,r.useState)(""),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)([]),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,r.useState)(0),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=(0,r.useState)(0),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(!1),w=(0,n.Z)(j,2),k=w[0],T=w[1];function Z(e){v(e),a(AL(e)),e.length>1&&T(!k)}function C(e){c(e)}function N(e){if(p.length>0){var t=JSON.parse(JSON.stringify(p));t[l]&&(t[l].color=e,v(t)),a(AL(t))}}function S(e){_(e),a(AL(p)),p.length>1&&T(!k)}function I(){if(p.length>0){var e=JSON.parse(JSON.stringify(p));return e.sort(((e,t)=>e.percent-t.percent)),LL(e,b)}}function A(){if(p.length>2){var e=JSON.parse(JSON.stringify(p));e.splice(l,1),v(e),c(e.length)}}function P(e){var t=EL(e);_(t.angle),v(t.list),a(AL(t.list,e.angle)),g(t.list[0].color)}function M(e){var t=PL(e);S(t.angle),v(t.list),a(e),g(t.list[0].color)}return{editFlag:k,current:l,list:p,color:f,angle:b,background:i,setEditFlag:T,deleteCurrent:A,initGradientDataByEffect:P,initGradientDataByBackground:M,getEffectColor:I,changeList:Z,changeCurrent:C,changeColor:N,changeAngle:S}},RL=e=>{var t=e.monochrome,i=DL(),a=i.editFlag,o=i.list,s=i.changeList,l=i.getEffectColor,c=i.changeAngle,d=F_(),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=e=>{var t=PL(e);c(t.angle),s(t.list)};return(0,r.useEffect)((()=>{if(o.length>0){var e=l();e&&m((0,u.Z)((0,u.Z)({},v),{},{[Object.keys(v)[0]]:{id:Object.keys(v)[0],color:{type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle}}}))}}),[a]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(SL,{monochrome:t,value:v,updateColor:e=>m((0,u.Z)((0,u.Z)({},v),{},{[Object.keys(v)[0]]:{id:Object.keys(v)[0],color:e}})),changeMockGradient:h})})},zL=RL,FL=e=>{var t=e.monochrome,i=DL(),a=i.editFlag,n=i.list,o=i.changeList,s=i.getEffectColor,l=i.changeAngle,c=bw(),d=c.backgroundColor,u=c.update,p=e=>{var t=PL(e);l(t.angle),o(t.list)};return(0,r.useEffect)((()=>{if(n.length>0){var e=s();e&&u({type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle})}}),[a]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(SL,{monochrome:t,value:d,updateColor:e=>{u(e)},changeMockGradient:p})})},OL=FL,BL=e=>{var t=e.monochrome,i=DL(),a=i.editFlag,n=i.list,o=i.changeList,s=i.getEffectColor,l=i.changeAngle,c=O_(),d=c.fill,u=c.updateFill,p=e=>{var t=PL(e);l(t.angle),o(t.list)};return(0,r.useEffect)((()=>{if(n.length>0){var e=s();e&&u({type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle})}}),[a]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(SL,{monochrome:t,value:d,updateColor:e=>u(e),changeMockGradient:p})})},WL=BL,VL=[[{r:0,g:0,b:0,a:1},{r:68,g:68,b:68,a:1}],[{r:0,g:0,b:0,a:1},{r:255,g:255,b:255,a:1}],[{r:191,g:191,b:191,a:1},{r:255,g:255,b:255,a:1}],[{r:255,g:0,b:60,a:1},{r:255,g:92,b:151,a:1}],[{r:255,g:0,b:60,a:1},{r:255,g:204,b:198,a:1}],[{r:255,g:0,b:60,a:1},{r:20,g:40,b:196,a:1}],[{r:251,g:152,b:23,a:1},{r:255,g:204,b:128,a:1}],[{r:251,g:152,b:23,a:1},{r:255,g:248,b:225,a:1}],[{r:251,g:152,b:23,a:1},{r:70,g:34,b:221,a:1}],[{r:255,g:224,b:0,a:1},{r:251,g:191,b:46,a:1}],[{r:255,g:224,b:0,a:1},{r:255,g:253,b:231,a:1}],[{r:255,g:224,b:0,a:1},{r:0,g:0,b:0,a:1}],[{r:109,g:196,b:20,a:1},{r:242,g:245,b:185,a:1}],[{r:109,g:196,b:20,a:1},{r:219,g:255,b:189,a:1}],[{r:109,g:196,b:20,a:1},{r:73,g:34,b:196,a:1}],[{r:0,g:121,b:107,a:1},{r:165,g:214,b:167,a:1}],[{r:0,g:121,b:107,a:1},{r:225,g:242,b:241,a:1}],[{r:0,g:121,b:107,a:1},{r:3,g:36,b:38,a:1}],[{r:54,g:200,b:248,a:1},{r:25,g:118,b:210,a:1}],[{r:54,g:200,b:248,a:1},{r:227,g:242,b:253,a:1}],[{r:54,g:200,b:248,a:1},{r:255,g:182,b:206,a:1}],[{r:60,g:94,b:243,a:1},{r:27,g:2,b:104,a:1}],[{r:60,g:94,b:243,a:1},{r:255,g:255,b:255,a:1}],[{r:60,g:94,b:243,a:1},{r:31,g:19,b:71,a:1}],[{r:140,g:32,b:186,a:1},{r:255,g:149,b:202,a:1}],[{r:140,g:32,b:186,a:1},{r:214,g:189,b:255,a:1}],[{r:140,g:32,b:186,a:1},{r:255,g:224,b:0,a:1}],[{r:21,g:46,b:163,a:1},{r:54,g:200,b:248,a:1}],[{r:21,g:46,b:163,a:1},{r:227,g:242,b:253,a:1}],[{r:21,g:46,b:163,a:1},{r:255,g:221,b:125,a:1}],[{r:247,g:225,b:186,a:1},{r:199,g:50,b:41,a:1}],[{r:247,g:225,b:186,a:1},{r:255,g:211,b:159,a:1}],[{r:247,g:225,b:186,a:1},{r:0,g:0,b:0,a:1}],[{r:62,g:39,b:35,a:1},{r:121,g:85,b:72,a:1}],[{r:62,g:39,b:35,a:1},{r:239,g:235,b:233,a:1}],[{r:62,g:39,b:35,a:1},{r:255,g:197,b:93,a:1}],[{r:79,g:84,b:65,a:1},{r:226,g:232,b:221,a:1}],[{r:129,g:60,b:243,a:1},{r:255,g:92,b:151,a:1}],[{r:255,g:0,b:60,a:1},{r:0,g:0,b:0,a:1}],[{r:255,g:179,b:197,a:1},{r:255,g:126,b:169,a:1}],[{r:255,g:179,b:197,a:1},{r:255,g:231,b:192,a:1}],[{r:255,g:179,b:197,a:1},{r:205,g:170,b:242,a:1}]],UL=["rgb(255, 255, 255)","rgba(204, 204, 204)","rgb(153, 153, 153)","rgb(92, 91, 91)","rgb(68, 68, 68)","rgb(44, 44, 44)","rgb(0, 0, 0)","rgb(255, 217, 198)","rgb(255, 177, 140)","rgb(249, 133, 76)","rgb(221, 151, 117)","rgb(187, 125, 85)","rgb(170, 75, 55)","rgb(183, 27, 28)","rgba(183, 220, 246)","rgba(69, 157, 243)","rgba(1, 123, 255)","rgba(18, 112, 214)","rgba(0, 69, 144)","rgba(27, 88, 254)","rgba(2, 48, 176)","rgba(105, 240, 174)","rgba(0, 230, 118)","rgba(52, 204, 130)","rgba(115, 181, 134)","rgba(90, 133, 30)","rgba(57, 131, 46)","rgba(60, 92, 55)","rgba(197, 195, 255)","rgba(142, 127, 229)","rgba(136, 99, 255)","rgba(121, 63, 234)","rgba(120, 52, 255)","rgba(96, 81, 202)","rgba(71, 56, 179)","rgba(249, 243, 196)","rgba(255, 245, 137)","rgba(254, 222, 0)","rgba(237, 189, 53)","rgba(230, 163, 36)","rgba(255, 184, 0)","rgba(157, 90, 20)","rgba(149, 231, 237)","rgba(97, 219, 228)","rgba(0, 205, 228)","rgba(0, 169, 205)","rgba(22, 157, 186)","rgba(11, 140, 154)","rgba(1, 111, 135)"],GL=e=>{var t=e.grid,i=void 0===t?7:t,a=e.divide,n=void 0===a?1:a,r=e.onSelect,o=()=>{switch(n){case 1:return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"box-title",children:"\u9884\u8bbe\u989c\u8272"}),(0,Kg.jsx)("div",{className:hb()({"grid-box":!0,"gap-10":!0,"grid-columns-4":4===i,"grid-columns-6":6===i,"grid-columns-7":7===i}),style:{flex:1,padding:"1px"},children:UL.map(((e,t)=>(0,Kg.jsx)("div",{className:"gap-item box-border",style:{background:e},onClick:()=>{var t=e.replace(/[^\d,]/g,"").split(","),i={r:t[0],g:t[1],b:t[2],a:1};r&&r([i])}},"color-wrap-".concat(t))))})]});case 3:return(0,Kg.jsx)(zL,{monochrome:UL});case 4:return(0,Kg.jsx)(OL,{monochrome:UL});case 5:return(0,Kg.jsx)(WL,{monochrome:UL});default:return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"box-title",children:"\u9884\u8bbe\u989c\u8272"}),(0,Kg.jsx)("div",{className:hb()({"grid-box":!0,"gap-10":!0,"grid-columns-4":4===i,"grid-columns-6":6===i}),style:{flex:1,padding:"1px"},children:VL.map(((e,t)=>(0,Kg.jsx)("div",{className:"grid-box grid-columns-2 box-border",children:e.map(((t,i)=>(0,Kg.jsx)("div",{className:"gap-item",style:{height:30,background:"rgba(".concat(t.r,",").concat(t.g,",").concat(t.b,",").concat(t.a,")")},onClick:()=>{r&&r(e)}},"color-select-".concat(i))))},"color-wrap-".concat(t))))})]})}};return(0,Kg.jsx)(Kg.Fragment,{children:o()})},XL=GL,qL=i(44450),HL=i(49815),YL=i.n(HL),KL=e=>{var t=e.color,i=e.onChange,a=e.notOpc,o=void 0!==a&&a,s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)("#000000"),v=(0,n.Z)(u,2),h=v[0],f=v[1],g=(0,r.useState)(100),x=(0,n.Z)(g,2),y=x[0],b=x[1];(0,r.useEffect)((()=>{"EyeDropper"in window?d(!0):d(!1)}),[]);var _=function(){var e=(0,p.Z)(m().mark((function e(){var t,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,t=new EyeDropper,e.next=4,t.open();case 4:a=e.sent,n=a.sRGBHex,i({rgb:L(n)}),e.next=11;break;case 9:e.prev=9,e.t0=e["catch"](0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),j=e=>void 0!=e.r&&void 0!=e.g&&void 0!=e.b&&void 0!=e.a,w=e=>{j(L(e))?(i({rgb:L(e)}),f(Yh(L(e)))):(i({rgb:t}),f(Yh(t)))},k=(e,a)=>{var n=a?"".concat(e).replace("%",""):e,r=j(t)?t:{r:0,g:0,b:0,a:0},o=JSON.parse(JSON.stringify(r));o.a=(Number(n)/100).toFixed(2),i({rgb:o})};return(0,r.useEffect)((()=>{var e="string"===typeof t&&(null===t||void 0===t?void 0:t.length)>0?L(t):t;j(e)&&(b(Math.round(e.a>1?100:100*e.a)),f(Yh(e)))}),[t]),(0,Kg.jsxs)("div",{className:YL().colorPickup,onKeyDown:e=>{Ph(e)},onPaste:e=>{e.stopPropagation()},children:[(0,Kg.jsx)(qL.AI,{disableAlpha:!0,width:"100%",color:t,onChange:e=>{i(e)}}),(0,Kg.jsx)("div",{className:YL().huePicker,children:(0,Kg.jsx)(qL.nd,{color:t,onChange:e=>{i(e)},pointer:()=>(0,Kg.jsx)("div",{className:YL().pointer})})}),!o&&(0,Kg.jsx)("div",{className:YL().alphaPicker,children:(0,Kg.jsx)(qL.wA,{color:t,height:"10px",onChange:e=>{i(e)},pointer:()=>(0,Kg.jsx)("div",{className:YL().pointer})})}),(0,Kg.jsxs)("div",{className:YL().colorPickupFooter,children:[c&&(0,Kg.jsx)("div",{className:YL().left,onClick:_,children:(0,Kg.jsx)(iP,{type:"xisepan"})}),(0,Kg.jsx)(VP.Z,{onBlur:e=>w(e.target.value),onChange:e=>{f(e.target.value)},onPressEnter:e=>{e.target.blur()},className:YL().content,value:h}),!o&&(0,Kg.jsx)(zM.Z,{className:YL().right,min:0,max:100,formatter:e=>"".concat(e,"%"),onBlur:e=>k(e.target.value,!0),onChange:e=>{b(e)},onPressEnter:e=>{e.target.blur()},onStep:e=>{k(e,!1)},value:y})]})]})},QL=KL,JL=i(34255),$L=e=>{var t=(0,r.useRef)(null);function i(e){var i=t.current.createLinearGradient(0,0,205,0);e.forEach((e=>{var t=e.percent/100;"string"===typeof e.color?i.addColorStop(t,e.color):i.addColorStop(t,Oh(e.color))})),t.current.fillStyle=i,t.current.fillRect(10,10,205,30)}function a(e,i){var a=t.current.getImageData(e,i,1,1);return{r:a.data[0],g:a.data[1],b:a.data[2],a:a.data[3]}}return(0,r.useEffect)((()=>{var i=document.getElementById(e);t.current=i.getContext("2d")}),[e]),{paintGradient:i,getCanvasGradientColor:a}},eD=$L,tD=e=>{var t=e.current,i=e.list,a=e.background,o=e.changeList,s=e.changeCurrent,l=e.deleteCurrent,c=eD("gradientCanvas"),d=c.paintGradient,p=c.getCanvasGradientColor,v=(0,r.useRef)(null),m=(0,r.useRef)({width:20}),h=(0,r.useState)(i),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useRef)(null),b=(0,r.useRef)(null),_=(0,Nb.Z)((e=>{o(e)}),{wait:60}),j=_.run,w=()=>{var e=v.current,t=e.clientWidth,i=e.clientHeight,a=v.current.getBoundingClientRect(),n=a.left,r=a.top;return{min:m.current.width,max:m.current.width,minX:n,maxX:n+t,minY:r,maxY:r+i,clientWidth:t,clientHeight:i}},k=(0,Nb.Z)((e=>{e.stopPropagation();var t=e.offsetX,i=e.offsetY,a=e.target;if(a.className===v.current.className){var n=w(),r=n.clientWidth,o=(0,u.Z)((0,u.Z)({},g[y.current]),{},{left:t,right:t+m.current.width,top:i});o.percent=Math.floor(o.left/r*100),r-m.current.width<o.left&&(o.left=r-m.current.width,o.right=r);var s=g.filter((e=>e.percent===o.percent)).length>0;if(!s){var l=[...g];y.current?l.splice(1*y.current,1,o):(o.color=p(o.left,o.top),l.push(o)),b.current=o.percent,x(l)}}}),{wait:60}),T=k.run,Z=e=>{for(var t=e.clientX,i=w(),a=i.minX,n=-1,r=0;r<g.length;r++)if(a+g[r].left<=t&&a+g[r].right>=t){n=r,b.current=g[r].percent,s(r);break}return n},C=(0,Nb.Z)((e=>{e.stopPropagation(),window.removeEventListener("mouseup",N),T(e)}),{wait:60}),N=C.run,S=(0,Nb.Z)((e=>{y.current||N(e),e.stopPropagation(),window.removeEventListener("mousemove",T),window.removeEventListener("mouseup",I),y.current=null}),{wait:60}),I=S.run,A=(0,Nb.Z)((e=>{e.stopPropagation();var t=Z(e);t>=0?(y.current="".concat(t),window.addEventListener("mousemove",T),window.addEventListener("mouseup",I)):window.addEventListener("mouseup",I)}),{wait:160}),P=A.run;return(0,Sb.Z)((()=>{j(g),d(g)}),[g]),(0,Sb.Z)((()=>{if(x(i),b.current>=0)for(var e=0;e<i.length;e++)if(i[e].percent===b.current){s(e);break}}),[i]),(0,Kg.jsx)("div",{className:"gradient-picker-container",children:(0,Kg.jsxs)("div",{className:"gradient-picker-container-done-view",children:[(0,Kg.jsx)("div",{className:"gradient-picker-container-done",style:{background:a}}),(0,Kg.jsx)("canvas",{id:"gradientCanvas",className:"gradient-picker-container-canvas"}),(0,Kg.jsx)("div",{className:"gradient-picker-container-focus",ref:v,tabIndex:t,onKeyDown:e=>{Ph(e),l()},onMouseDown:P}),(g||[]).map(((e,i)=>(0,Kg.jsx)("div",{style:{left:e.left,zIndex:y.current===i?4:3},className:hb()("bar-position",{"bar-choosed":t===i}),children:(0,Kg.jsx)("div",{className:"gradient-picker-container-bar"})},e.percent)))]})})},iD=tD,aD=e=>{var t=e.onChange,i=e.angle,a=(0,r.useRef)(null),o=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useState)({angle:i,rotate:-i}),c=(0,n.Z)(l,2),d=c[0],p=c[1];(0,r.useEffect)((()=>{t&&t(d)}),[d]),(0,Sb.Z)((()=>{p({angle:i,rotate:-i})}),[i]);var v=()=>{var e=a.current,t=e.clientWidth,i=e.clientHeight,n=a.current.getBoundingClientRect(),r=n.left,o=n.top,s=r+t/2,l=o+i/2,c=t/2,d=Math.sqrt(2*c*c);return{originX:s,originY:l,R:c,hypot:d}},m=(0,Nb.Z)((e=>{var t=e.clientX,i=e.clientY,a=v(),n=a.originX,r=a.originY,o=t-n,s=i-r,l=G(o,s);p((0,u.Z)((0,u.Z)({},d),{},{angle:l,rotate:-l}))}),{wait:160}),h=m.run,f=(0,Nb.Z)((e=>{h(e),window.removeEventListener("mousemove",h),window.removeEventListener("mouseup",g)}),{wait:160}),g=f.run,x=(0,Nb.Z)((()=>{window.addEventListener("mousemove",h),window.addEventListener("mouseup",g)}),{wait:160}),y=x.run;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:"deg-picker",ref:a,children:(0,Kg.jsx)("div",{className:"deg-picker-main",ref:o,onMouseDown:y,style:{transform:"rotate(".concat(d.rotate,"deg)")},children:(0,Kg.jsx)("div",{ref:s,className:"deg-picker-main-chose"})})})})},nD=aD,rD=["linear-gradient(90deg, rgba(34, 84, 244,1) 25.39%, rgba(10, 207, 254,1) 100%)","linear-gradient(90deg, rgba(2, 179, 244,1) 16.53%, rgba(0, 242, 254,1) 100%)","linear-gradient(90deg, rgba(211, 255, 254,1) 0%, rgba(1, 237, 253,1) 100%)","linear-gradient(90deg, rgba(102, 22, 206,1) 0%, rgba(34, 84, 244,1) 100%)","linear-gradient(90deg, rgba(248, 54, 0,1) 0%, rgba(250, 204, 34,1) 100%)","linear-gradient(90deg, rgba(255, 226, 89,1) 0%, rgba(255, 167, 81,1) 100%)","linear-gradient(90deg, rgba(255, 225, 6,1) 0%, rgba(179, 255, 218,1) 100%)","linear-gradient(90deg, rgba(247, 121, 125,1) 0%, rgba(249, 212, 35,1) 95%, rgba(255, 246, 41,1) 100%)","linear-gradient(90deg, rgba(255, 11, 13,1) 0%, rgba(255, 121, 121,1) 100%)","linear-gradient(90deg, rgba(255, 15, 147,1) 0%, rgba(254, 84, 85,1) 82.16%, rgba(245, 68, 68,1) 100%)","linear-gradient(90deg, rgba(252, 92, 125,1) 0%, rgba(255, 251, 213,1) 100%)","linear-gradient(90deg, rgba(255, 15, 147,1) 0%, rgba(196, 113, 237,1) 1%, rgba(246, 79, 89,1) 100%)","linear-gradient(90deg, rgba(17, 153, 142,1) 0%, rgba(56, 239, 125,1) 100%)","linear-gradient(90deg, rgba(171, 255, 203,1) 0%, rgba(0, 226, 104,1) 100%)","linear-gradient(90deg, rgba(97, 255, 156,1) 0%, rgba(95, 175, 250,1) 100%)","linear-gradient(90deg, rgba(140, 244, 190,1) 0%, rgba(250, 255, 209,1) 100%)","linear-gradient(90deg, rgba(44, 241, 253,1) 0%, rgba(154, 192, 129,1) 50%, rgba(249, 149, 22,1) 94%)","linear-gradient(90deg, rgba(48, 34, 238,1) 0%, rgba(143, 20, 128,1) 54%, rgba(236, 7, 19,1) 100%)","linear-gradient(90deg, rgba(18, 214, 223,1) 0%, rgba(134, 113, 239,1) 48%, rgba(247, 15, 255,1) 94%)","linear-gradient(90deg, rgba(30, 150, 0,1) 0%, rgba(255, 242, 0,1) 51%, rgba(243, 41, 53,1) 100%)","linear-gradient(90deg, rgba(217, 255, 255,1) 0%, rgba(255, 232, 179,1) 100%)","linear-gradient(90deg, rgba(185, 252, 249,1) 0%, rgba(255, 231, 239,1) 100%)","linear-gradient(90deg, rgba(255, 250, 224,1) 0%, rgba(255, 209, 241,1) 100%)","linear-gradient(90deg, rgba(214, 255, 205,1) 0%, rgba(181, 253, 238,1) 100%)","linear-gradient(90deg, rgba(0, 0, 0,1) 26.5%, rgba(255, 255, 255, 0.22) 100%)","linear-gradient(90deg, rgba(0, 0, 0,1) 17.6%, rgba(196, 196, 196, 0) 100%)","linear-gradient(90deg, rgba(190, 190, 190,1) 0%, rgba(0, 0, 0,1) 100%)","linear-gradient(90deg, rgba(48, 67, 82,1) 0%, rgba(215, 210, 204,1) 100%);","linear-gradient(90deg, rgba(203, 166, 77,1) 0%, rgba(237, 205, 91,1) 26.5%, rgba(255, 251, 187,1) 50%, rgba(237, 205, 91,1) 72.3%, rgba(206, 171, 74,1) 100%)","linear-gradient(90deg, rgba(185, 147, 13,1) 0%, rgba(254, 246, 149,1) 50%, rgba(183, 144, 9,1) 100%)","linear-gradient(90deg, rgba(168, 182, 196,1) 0%, rgba(250, 246, 242,1) 53.5%, rgba(168, 182, 196,1) 100%)","linear-gradient(90deg, rgba(104, 116, 125,1) 0%, rgba(240, 240, 240,1) 53.5%, rgba(104, 116, 125,1) 100%)"],oD=e=>{var t,i=e.type,a=e.value,n=e.onChange,o=(0,r.useRef)(null),s=DL(),l=s.editFlag,c=s.current,d=s.list,u=s.angle,p=s.background,v=s.initGradientDataByEffect,m=s.initGradientDataByBackground,h=s.deleteCurrent,f=s.getEffectColor,g=s.changeList,x=s.changeCurrent,y=s.changeColor,b=s.changeAngle,_=e=>{b(e.angle)};return(0,JL.Z)((()=>{a&&("effect"===i&&v(a),"background"===i&&m(a),"svgEffect"===i&&(null!==a&&void 0!==a&&a.colorStops?v(a):m(rD[0])))})),(0,r.useEffect)((()=>{if(("effect"===i||"svgEffect"===i)&&d.length>0){var e=f();n&&e&&n(e)}}),[l]),(0,Kg.jsxs)("div",{className:"gradient-color",children:[(0,Kg.jsxs)("div",{className:"gradient-picker-panel",children:[(0,Kg.jsx)("div",{className:"gradient-picker-panel-picker",ref:o,children:(0,Kg.jsx)(iD,{background:p,current:c,list:d,changeList:g,changeCurrent:x,deleteCurrent:h})}),(0,Kg.jsx)(tE.Z,{trigger:"click",overlayClassName:"gradient-picker-panel-deg",getPopupContainer:()=>o.current,content:(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(nD,{onChange:_,angle:u})}),title:"",placement:"bottom",className:"gradient-picker-panel-input",children:(0,Kg.jsxs)("div",{children:[u,"\xb0"]})})]}),(0,Kg.jsx)(QL,{color:(null===(t=d[c])||void 0===t?void 0:t.color)||"",onChange:e=>{y(e.rgb)}})]})},sD=oD,lD=i(81490),cD=i.n(lD),dD=e=>{var t=e.gradientColorChange,i=e.colorPickupChange,a=e.color,n=e.type,r=e.setType;return(0,Kg.jsxs)("div",{className:cD().colorPopover,onClick:Ph,children:[(0,Kg.jsx)("div",{className:cD().colorTab,children:[{key:"color",name:"\u7eaf\u8272"},{key:"gradient",name:"\u6e10\u53d8"}].map((e=>(0,Kg.jsx)("div",{onClick:t=>{r(e.key)},className:hb()(cD().colorTabItem,{[cD().colorTabItemActive]:e.key===n}),children:e.name},e.key)))}),"color"===n?(0,Kg.jsx)("div",{style:{padding:"10px"},children:(0,Kg.jsx)(QL,{color:a||"",onChange:e=>{i(e)}})}):(0,Kg.jsx)("div",{onClick:e=>{e.stopPropagation()},children:(0,Kg.jsx)(sD,{type:"svgEffect",value:a,onChange:e=>{t(e)}})})]})},uD=dD,pD=i(80245),vD=i.n(pD),mD=YP.Z.TabPane;function hD(e){var t=e.children,i=e.color,a=e.gradientColorChange,o=e.colorPickupChange,s=e.changeMockGradient,l=e.isDesigner,c=e.placement,d=void 0===c?"bottomRight":c,u=(0,r.useState)(!1),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,r.useState)("color"),f=(0,n.Z)(h,2),g=f[0],x=f[1];return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(tE.Z,{visible:v,trigger:"click",overlayClassName:"colorPopover",onVisibleChange:e=>{m(e)},placement:d,destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{className:hb()(vD().colorPopover,{[vD().designerColorPopover]:l}),children:(0,Kg.jsxs)(YP.Z,{tabBarExtraContent:(0,Kg.jsx)(tE.Z,{trigger:"click",placement:"bottomRight",destroyTooltipOnHide:!0,overlayClassName:vD()["color-picker"],content:a?(0,Kg.jsx)(uD,{color:i||"",gradientColorChange:e=>{a(e)},colorPickupChange:e=>{o(null===e||void 0===e?void 0:e.rgb)},type:g,setType:x}):(0,Kg.jsx)("div",{style:{padding:"10px"},children:(0,Kg.jsx)(QL,{color:i||"",onChange:e=>{o(e.rgb)}})}),children:(0,Kg.jsx)("div",{className:vD().colorPopoverRight,children:"\u81ea\u5b9a\u4e49\u989c\u8272"})}),children:[(0,Kg.jsx)(mD,{tab:"\u9884\u8bbe\u7eaf\u8272",children:(0,Kg.jsx)("div",{className:vD().colorWarp,children:UL.map((e=>(0,Kg.jsx)("div",{className:vD().colorWarpItem,style:{background:e},onClick:t=>{var i=e.replace(/[^\d,]/g,"").split(","),a={r:Number(i[0]),g:Number(i[1]),b:Number(i[2]),a:1};o(a)}},e)))})},"1"),s&&(0,Kg.jsx)(mD,{tab:"\u9884\u8bbe\u6e10\u53d8",children:(0,Kg.jsx)("div",{className:vD().colorWarp,children:CL.map((e=>(0,Kg.jsx)("div",{className:vD().colorWarpItem,style:{backgroundImage:e},onClick:t=>{s(e)}},e)))})},"2")]})}),children:(0,Kg.jsx)("div",{onClick:()=>{m(!0)},children:t})})})}var fD=hD,gD=(0,hp.Pi)((e=>{var t,i=e.asset,a=null===i||void 0===i?void 0:i.attribute,n=a.effectVariant,r=B_(),o=(r.batchUpdateLayerColor,r.updateLayerColor,r.updateColorMatch);r.value;return(0,Kg.jsx)("div",{style:{width:270,padding:16},children:null===n||void 0===n||null===(t=n.rt_variantList)||void 0===t?void 0:t.map(((e,t)=>{var i=new Set,a=e.layers.length;e.layers.forEach((e=>{Object.keys(e).forEach((t=>{if(["color","strokeColor","shadowColor"].indexOf(t)>-1&&e[t].a>0){var n="rgba(".concat(e[t].r,",").concat(e[t].g,",").concat(e[t].b,",").concat(e[t].a,")");i.add(n)}if("backgroundURL"===t&&1===a){var r="url(".concat(fb.PP+e[t],")");i.add(r)}}))}));var r=[];if(0===i.size&&e.layers.forEach((e=>{Object.keys(e).forEach((t=>{if("backgroundURL"===t){var a="url(".concat(fb.PP+e[t],")");i.add(a)}}))})),0===i.size){var s=null===n||void 0===n?void 0:n.rt_variantColors[t];r.push((0,Kg.jsx)("div",{className:"color-block",style:{background:"rgba(".concat(s.r,",").concat(s.g,",").concat(s.b,",").concat(s.a,")")}}))}else i.forEach((e=>{r.push((0,Kg.jsx)("div",{className:"color-block",style:{background:e}},"tempSet"))}));return(0,Kg.jsx)("div",{className:"color-block-wrap margin-bottom-8",onClick:()=>{o(t)},children:r},"variantColor-".concat(t))}))})}));function xD(e){var t=e.asset,i=(0,dx.Z)({colorPopover:!1,popover:!1,colorPickerSelected:{r:0,g:0,b:0,a:1},activeIndex:-1}),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=D_(),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=B_(),m=(v.batchUpdateLayerColor,v.updateLayerColor),h=(v.updateColorMatch,v.value,t.attribute),f=h.effect,g=h.effectVariant,x=(h.effectColorful,(e,t)=>{s({colorPickerSelected:e,colorPopover:!0,activeIndex:t})}),y=e=>{s({colorPickerSelected:e}),o.activeIndex||0===o.activeIndex?o.activeIndex>-1&&m(o.activeIndex,e):p(e)},b=(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:"rgba(".concat(null===d||void 0===d?void 0:d.r,",").concat(null===d||void 0===d?void 0:d.g,",").concat(null===d||void 0===d?void 0:d.b,",").concat(null===d||void 0===d?void 0:d.a,")")},onClick:e=>{x((0,u.Z)({},d))}}),_=()=>g.variableColorPara.map(((e,t)=>{var i=e.colorBlock;return(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:"rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(i.a,")"),border:"1px solid #ededed",borderRadius:2,flex:"0 0 63px"},onClick:e=>{x(i,t)}},"colorBlock-".concat(t))})),j=()=>{var e="";return null===g||void 0===g||g.layers.forEach((t=>{t.backgroundURL&&(e=t.backgroundURL)})),(0,Kg.jsx)("div",{onClick:e=>{s({colorPopover:!0})},className:"color-block",style:{background:"url(".concat(fb.PP).concat(e,")")}})},w=(0,r.useMemo)((()=>{var e;return!f&&!g||null!==g&&void 0!==g&&null!==(e=g.variableColorPara)&&void 0!==e&&e.length?"colorPickup":""}),[]),k=()=>{var e,t;if(!f&&!g)return b;if(null!==g&&void 0!==g&&null!==(e=g.variableColorPara)&&void 0!==e&&e.length)return _();if(null!==g&&void 0!==g&&null!==(t=g.layers)&&void 0!==t&&t.some((e=>e.backgroundURL)))return j();var i=(0,Kg.jsx)("div",{});return null!==g&&void 0!==g&&g.rt_variantColors&&(null===g||void 0===g||g.rt_variantColors.forEach(((e,t)=>{f.split("@")[1]==t&&(i=(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:"rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"),border:"1px solid #ededed",borderRadius:2,flex:"0 0 63px"}},"colorBlock-".concat(t)))}))),i};return(0,Kg.jsx)("div",{className:"textColor",children:"colorPickup"===w?(0,Kg.jsx)(fD,{color:o.colorPickerSelected,isDesigner:!0,placement:"topRight",colorPickupChange:e=>{y(e)},children:(0,Kg.jsx)("div",{className:"text-color",children:k()})}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(tE.Z,{visible:o.colorPopover,onVisibleChange:e=>{s({colorPopover:e})},trigger:"click",overlayClassName:"color-picker",destroyTooltipOnHide:!0,content:(0,Kg.jsx)(gD,{asset:t})}),(0,Kg.jsx)("div",{className:"text-color",children:k()})]})})}var yD=(0,hp.Pi)(xD);function bD(){return bp.g.get("/file/memory-info")}function _D(e){var t=e||{page:1,pageSize:20},i=t.folderId,a=void 0===i?0:i,n=(0,yp.Z)(t,["folderId"]);return bp.g.get("/file/".concat(a,"/lists?").concat((0,jp.stringify)(n),"&type=editor"))}function jD(e){return bp.g.get("/file/media-list?".concat((0,jp.stringify)(e)))}function wD(e){return bp.g.get("/file/get-system-folder?title=".concat(e))}function kD(e){return bp.g.get("/file/exits?".concat((0,jp.stringify)(e)))}function TD(e){var t=e.folder_id,i=void 0===t?0:t,a=(0,yp.Z)(e,["folder_id"]),n=new FormData;return Object.keys(a).forEach((e=>{n.append(e,a[e])})),bp.g.post("/file/".concat(i,"/add"),{data:n})}function ZD(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",i=new FormData;return e.forEach(((e,t)=>{i.append("ids[".concat(t,"]"),e)})),bp.g.post("/file/".concat(t,"/del"),{data:i})}function CD(e){var t=new FormData;return e.forEach(((e,i)=>{t.append("ids[".concat(i,"]"),e)})),bp.g.post("/file/multi-del",{data:t})}function ND(e){return bp.g.get("/file/bread-nav?id=".concat(e))}function SD(e){var t=new FormData;return e.forEach(((e,i)=>{t.append("file_ids[".concat(i,"]"),e)})),bp.g.post("/file/check-transcode-state",{data:t})}function ID(e){return bp.g.get("/font/lists?page=".concat(e.page,"&pageSize=").concat(e.pageSize))}function AD(e){return bp.g.get("/file/info?file_id=".concat(e))}function PD(){return bp.g.get("/file/get-system-folder?title=\u6211\u7684\u5f55\u97f3")}function MD(e){return bp.g.post("/creator-api/resource/video-submit",{data:e})}function ED(e){return bp.g.post("/creator-api/resource/image-submit",{data:e})}function LD(e){return bp.g.post("/creator-api/my/video-status",{data:{ids:e}})}var DD="//js.xiudodo.com/fonts/",RD={font9:"syht",font0:"yahei",font1:"fzfsjt",font2:"fzhtjt",font3:"fzktjt",font4:"pmzdbtt",font5:"qsgcfxt",font6:"qscmxxjt",font7:"qsyrt",font8:"qsyh",font11:"wqydkwmh",font12:"wqydkzh",font13:"zkgdh",font14:"zkklt",font15:"ztgjbs",font16:"ztgjfm",font18:"ztgjpxe",font19:"ztgjrx",font20:"2Dumb",font21:"3Dumb",font22:"AaShouXieHB",font23:"AaWanWan",font24:"AbrilFatface",font25:"AleoLight",font26:"AleoRegular",font27:"AlexBrush",font28:"Aliquam",font29:"AmaticSC",font30:"Amble",font31:"ArialRegular",font32:"Aspire",font33:"BebasNeueBook",font34:"BebasNeue",font35:"BukhariScript",font36:"DancingScript",font37:"DroidSerif",font38:"Edo",font39:"GrandHotel",font40:"GreatVibes",font41:"KoolBeans",font42:"Langdon",font43:"NeutonRegular",font44:"NeutonSCLight",font45:"OswaldStencil",font46:"Parisish",font47:"PlayfairDisplaySC",font48:"Quango",font49:"Rochester",font50:"ScriptinaPro",font51:"SixCaps",font52:"Trocchi",font54:"systjixi",font55:"systx",font56:"systcg",font57:"systct",font58:"fn851sxzzt",font59:"fnlhzt",font60:"fnyrdzst",font61:"fnzkkh",font62:"fnzkxwlogot",font63:"fnzqkhyt",font101:"fnAmaranthBold",font102:"fnAmaranthItalic",font103:"fnAsapCondensedBold",font104:"fnBadScriptRegular",font105:"fnBahianaRegular",font106:"fnBarrioRegular",font107:"fnblowbrush",font108:"fnDancingScriptBold",font109:"fnDancingScriptRegular",font110:"fnDolceVitaLight",font111:"fnDroidSansBold",font112:"fnFinelinerScript",font113:"fnFirstShineregular",font114:"fnLeagueScript",font115:"fnMarckScriptRegular",font116:"fnNISCRIPTRegular",font117:"fnParalinesRegular",font118:"fnPlaylistScript",font119:"fnPoiretOneRegular",font120:"fnPostNoBillsColomboExtraBold",font121:"fnsoulhandwritingfreeversion",font122:"fnTypoPRODancingScriptRegular",font123:"fnfzfsft",font124:"fnfzhtft",font125:"fnfzktGBK",font126:"fnfzktft",font127:"fnhymztHanaMinA",font128:"fnhymctHanaMinB",font129:"fnsyhtLight",font130:"fnsyhtRegular",font131:"fnsyhtSourceHanSansKHeavy",font132:"fnsyhtjzxExtraLight",font133:"fnsyhtjzxLight",font134:"fnsyhtjzxRegular",font135:"fntwjybbzks",font136:"fntwjybbzst",font137:"fntwqzksmjs",font138:"fnwhzbktkx",font139:"fnwhzbktky",font140:"fnwhzchtqpdw",font141:"fnwhzcgtbz",font142:"fnwhzchtsy",font143:"fnwhzcktj",font144:"fnwhzcytsk",font145:"fnwhzhbtbts",font146:"fnwhzktyf",font147:"fnwhzklhb",font148:"fnwhzkzhb",font149:"fnwhzyktf",font150:"fnwhzzlsf",font151:"fnwhzzytf",font152:"fnwhzzytsky",font153:"fnyrdzstBold",font154:"fnyrdzstExtralight",font155:"fnyrdzstHeavy",font156:"fnyrdzstMedium",font157:"fnyrdzstRegular",font158:"fnyrdzstSemibold",font159:"fnyjmc",font160:"fnzkwyt",font161:"fnzkydlt01",font162:"fnzkydlt02",font163:"fnsystSCBold",font164:"fnsystSCExtraLight",font165:"fnsystSCHeavy",font166:"fnsystSCLight",font167:"fnfystSCRegular",font168:"fnsystSCSemiBold",font169:"fnsyhtHeavy",font200:"zh2hllcht",font201:"zh3hyxht",font202:"zh4hcjxkt",font203:"zh5hwwrht",font204:"zh6hrjcht",font205:"zh7hwntzt",font206:"zh8hzznct",font207:"zh10hgyxsjxkt",font208:"zh17hmqgdt",font209:"zh19hxyfbt",font210:"zh20hstt",font211:"zh21hbqsyt",font212:"zh24hzhss",font213:"zh27hbdt",font214:"zh32hwzyxzt",font215:"zh34hsnhft",font216:"zh35hsxheht",font217:"zh36hsxhskt",font218:"zh37hsxhggt",font219:"zh38hyxxkt",font220:"zh39fzklt",font221:"zh40hxcfft",font222:"zh41hcxt",font223:"zh42kxsk",font224:"zh43hgcss",font225:"zh44hkxyh",font226:"zh46hmmt",font227:"zh47hsfxk",font228:"zh49hxyxs",font229:"zh51qqzjt",font230:"zh52hakmht",font231:"zh53hyxt",font232:"zh54hxh",font233:"zh55hlyss",font234:"zh56hhlmblsjt",font235:"zh57hcxh",font236:"zh58hczh",font237:"zh59hcch",font238:"zh60hmxszt",font239:"zh62hsjt",font240:"zh63hppt",font241:"zh64hmqrtt",font242:"zh66hzzt",font243:"zh70hlyht",font244:"zh71hysjs",font245:"zh73hjnss",font246:"zh74hfmss",font247:"zh75hlyzmt",font248:"zh79hmqnyt",font249:"zh80hmqxyt",font250:"zh81hqft",font251:"zh92hxchbt",font252:"zh95hsks",font253:"zh96hhxss",font254:"zh100hffxft",font255:"zh101hxqx",font256:"zh103hhtss",font257:"zh104hsxt",font258:"zh105hjyh",font259:"zh107hmqhlt",font260:"zh109hfgxzt",font261:"zh110hwljht",font262:"zh111hjbzpt",font263:"zh113hdmsnt",font264:"zh119htzeft",font265:"zh120hpbsht",font266:"zh122hqsb",font267:"zh126hyzt",font268:"zh127hyyt",font269:"zh128hwxpmt",font270:"zh129hbhxft",font271:"zh130hklqht",font272:"zh131hklcwt",font273:"zh133hmkkb",font274:"zh137hcyls",font275:"zh138hbrss",font276:"zh139hmqyyt",font277:"zh141hhlydt",font280:"zh116hfmss",font281:"zh142hxhx",font282:"zh151hlmzyt",font283:"zh152hjjcjh",font284:"zh155hfqt",font286:"zh162hyqllt",font287:"zh164hfyh",font288:"zh173hqxt",font289:"zh179hzkbbt",font290:"zh184hyycyh",font291:"zh194hmqfxt",font292:"zh199hmqcct",font293:"zh201hmqyht",font294:"zh208hxcqwt",font295:"zh160ts",font296:"zh176ccy",font297:"zh181fcbtt",font298:"zh143zkcjh",font299:"zh167yrh",font300:"zh144lyt",font301:"zh31ns",font302:"zh45byys",font303:"zh23xws",font304:"zh193wsfgt",font305:"zh197dms",font306:"zh237ylss",font307:"zh210gfsnt"};function zD(e){var t,i=null!==(t=RD[e])&&void 0!==t?t:"";return i}function FD(e,t){return"@font-face {font-family: '".concat(e,"';src:url('").concat(t,"') format('truetype');}")}function OD(){return BD.apply(this,arguments)}function BD(){return BD=(0,p.Z)(m().mark((function e(){var t,i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!document.getElementById("fontFamilyScope")){e.next=2;break}return e.abrupt("return");case 2:t=document.createElement("style"),t.id="fontFamilyScope",document.head.appendChild(t),i="",Object.keys(RD).forEach((e=>{var t=RD[e],a="".concat(DD).concat(t,".woff");i+=FD(e,a)})),t.appendChild(document.createTextNode(i));case 8:case"end":return e.stop()}}),e)}))),BD.apply(this,arguments)}function WD(e){var t=document.getElementById("userFontFamilyScope"),i="";t||(t=document.createElement("style"),t.id="userFontFamilyScope",document.head.appendChild(t)),e.forEach((e=>{var t=e.file_id,a=e.fileInfo.file_path;i+=FD("webfont-".concat(t),a)})),t.innerHTML=i}function VD(){return UD.apply(this,arguments)}function UD(){return UD=(0,p.Z)(m().mark((function e(){var t,i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ID({page:1,pageSize:100});case 2:i=e.sent,WD((null===(t=i.data)||void 0===t?void 0:t.items)||[]);case 4:case"end":return e.stop()}}),e)}))),UD.apply(this,arguments)}var GD=[{cateName:"\u70ed\u95e8",fontList:["font255","font256","font257","font169","font207","font4","font165","font58","font202","font206","font205","font212"]},{cateName:"\u5b57\u9b42\u53ef\u5546\u7528\u5b57\u4f53",fontList:["font202","font204","font205","font206","font208","font207","font209","font210","font211","font212","font213","font214","font215","font216","font217","font218","font219","font220","font222","font224","font225","font226","font229","font230","font231","font232","font233","font234","font235","font236","font237","font238","font239","font240","font242","font243","font245","font246","font247","font248","font249","font250","font251","font252","font254","font255","font256","font257","font258","font259","font260","font261","font262","font263","font264","font266","font267","font268","font270","font271","font272","font274","font276","font281","font282","font283","font284","font286","font287","font288","font289","font290","font291","font292","font293","font294"]},{cateName:"\u624b\u5199\u4f53",fontList:["font58","font154","font156","font157","font155","font158","font153"]},{cateName:"\u9ed1\u4f53",fontList:["font4","font11","font129","font130","font169","font298","font299"]},{cateName:"\u5b8b\u4f53",fontList:["font164","font166","font167","font165","font295","font301","font302","font303","font304","font305"]},{cateName:"\u5706\u4f53",fontList:["font296","font300"]},{cateName:"\u6bdb\u7b14\u4e66\u6cd5",fontList:["font307"]},{cateName:"\u786c\u7b14\u4e66\u6cd5",fontList:["font306"]}],XD=[{cateName:"\u82f1\u6587\u5b57\u4f53",fontList:["font101","font102","font103","font104","font105","font106","font108","font109","font111","font113","font114","font115","font116","font117","font119","font120","font122"]}],qD=i(5236),HD=i.n(qD),YD=(0,hp.Pi)((e=>{var t=e.language,i=void 0===t?"zh":t,a=e.onChange,r=Z_(),o=(0,n.Z)(r,2),s=o[0],l=o[1];return(0,Kg.jsx)("div",{className:HD()["font-family-list"],children:("zh"===i?GD:XD).map((e=>(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{className:HD().cateName,children:e.cateName}),(0,Kg.jsx)("div",{children:e.fontList.map(((e,t)=>{var i=zD(e),n="".concat(fb.PP,"/index_img/fonts/white/").concat(i,".svg");return(0,Kg.jsx)("div",{className:hb()(HD()["font-family-item"],{[HD()["font-family-active"]]:s===i}),onClick:()=>a?a(i):l(i),children:(0,Kg.jsx)("img",{src:n,alt:e,height:22})},"fontFamily-".concat(e,"-").concat(t))}))})]},"fontFamily-".concat(e.cateName))))})})),KD=e=>{var t=e.onChange,i=(0,dx.Z)({activeLanguage:"zh"}),a=(0,n.Z)(i,2),r=a[0],o=a[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:HD()["language-tabs"],children:[(0,Kg.jsx)("div",{className:hb()(HD()["language-tabs-item"],{[HD()["language-item-active"]]:"zh"===r.activeLanguage}),onClick:()=>o({activeLanguage:"zh"}),children:"\u4e2d\u6587"}),(0,Kg.jsx)("div",{className:hb()(HD()["language-tabs-item"],{[HD()["language-item-active"]]:"en"===r.activeLanguage}),onClick:()=>o({activeLanguage:"en"}),children:"\u82f1\u6587"})]}),(0,Kg.jsx)(eM,{visible:"en"===r.activeLanguage,children:(0,Kg.jsx)(YD,{language:"en",onChange:t})}),(0,Kg.jsx)(eM,{visible:"zh"===r.activeLanguage,children:(0,Kg.jsx)(YD,{language:"zh",onChange:t})})]})},QD=e=>{var t=e.fontFamily,i=e.onChange,a=Z_(),r=(0,n.Z)(a,2),o=r[0],s=r[1];return(0,Kg.jsx)("div",{className:HD()["designer-font-family"],children:(0,Kg.jsx)(tE.Z,{color:"#17171F",placement:"bottom",trigger:"click",overlayClassName:HD()["popover-styles"],content:(0,Kg.jsx)("div",{style:{padding:18},children:(0,Kg.jsx)(KD,{onChange:i||s})}),children:(0,Kg.jsxs)("div",{className:HD()["font-family-wrap-desiger"],children:[(0,Kg.jsx)("div",{children:(t||o)&&(0,Kg.jsx)("img",{src:"".concat(fb.PP,"/index_img/fonts/white/").concat(t||o,".svg"),alt:"text",height:22})}),(0,Kg.jsx)(iP,{type:"iconbofang",className:HD()["wrap-icon"]})]})})})},JD=(0,hp.Pi)(QD),$D=i(66979),eR=i.n($D);function tR(e){var t=e.selected,i=e.onSelect;return(0,Kg.jsx)("div",{className:hb()(eR()["size-list"]),children:Dd.map((e=>(0,Kg.jsx)("div",{className:hb()(eR().size,t===e?eR().active:""),onClick:t=>{t.preventDefault(),i(e)},children:e},"fontSize-".concat(e))))})}var iR=()=>{var e=N_(),t=(0,n.Z)(e,2),i=t[0],a=t[1],r=e=>{var t=600,i=12;a(e>t?t:e<i?i:e)};return(0,Kg.jsx)("div",{style:{width:149},children:(0,Kg.jsx)(tE.Z,{placement:"bottom",overlayClassName:eR()["popover-styles"],content:(0,Kg.jsx)(tR,{selected:i,onSelect:e=>{r(e)}}),children:(0,Kg.jsxs)(VP.Z.Group,{compact:!0,className:eR().inputDesiger,children:[(0,Kg.jsx)("span",{className:eR().action2,onClick:()=>{r(Number(null!==i&&void 0!==i?i:0)-1)},children:"-"}),(0,Kg.jsx)(zM.Z,{value:Math.floor(Number(null!==i&&void 0!==i?i:0)),max:600,min:12,className:eR()["input-number-desiger"],onChange:e=>r(e),onKeyDown:Ph,onPaste:Ph}),(0,Kg.jsx)("span",{className:eR().action2,onClick:()=>{r(Number(null!==i&&void 0!==i?i:0)+1)},children:"+"})]})})})},aR=(0,hp.Pi)(iR),nR=i(41834),rR=i.n(nR),oR=e=>{var t=e.icon,i=e.isActive,a=void 0!==i&&i,n=e.onCall,o=(0,r.useRef)(null),s=(0,bE.Z)(o),l=()=>{n&&n()};return(0,Kg.jsx)("div",{ref:o,onClick:l,className:hb()(rR().styleItem,{[rR().active]:a||s}),children:(0,Kg.jsx)(iP,{type:t})})},sR=oR,lR=i(23891),cR=i.n(lR),dR=()=>{var e=L_(),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=k_(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=T_(),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=M_(),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(Pw(),[{key:"fontWeight",icon:"iconjiacu",name:"\u5b57\u4f53\u52a0\u7c97",isShow:!0,isActive:"bold"===l,onCall:()=>{c("bold"===l?"normal":"bold")}},{key:"fontStyle",icon:"iconxieti",name:"\u5b57\u4f53\u503e\u659c",isShow:!0,isActive:"italic"===v,onCall:()=>m("italic"===v?"normal":"italic")},{key:"underline",icon:"iconziyuan1",name:"\u4e0b\u5212\u7ebf",isShow:!0,isActive:"underline"===g,onCall:()=>{x("underline"===g?"none":"underline")}},{key:"writingMode",icon:"iconzijianju1",name:"\u6a2a\u7ad6\u6392\u7248",isShow:!0,isActive:"vertical-rl"===i,onCall:()=>a("horizontal-tb"===i?"vertical-rl":"horizontal-tb")},{key:"linethrough",icon:"iconshanchuzi",name:"\u5220\u9664\u7ebf",isShow:!0,isActive:"line-through"===g,onCall:()=>{x("line-through"===g?"none":"line-through")}}]);return(0,Kg.jsx)("div",{className:cR().list,children:y.map((e=>{if(e.isShow)return(0,r.createElement)(sR,(0,u.Z)((0,u.Z)({},e),{},{isActive:e.isActive,key:e.key}))}))})},uR=(0,hp.Pi)(dR),pR=i(7183),vR=i.n(pR),mR=[{key:"left",icon:"icona-bianzu2",name:"\u5de6\u5bf9\u9f50"},{key:"center",icon:"icona-bianzu3",name:"\u5c45\u4e2d"},{key:"right",icon:"icona-bianzu4",name:"\u53f3\u5bf9\u9f50"}],hR=()=>{var e=S_(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)("div",{className:vR().list,children:mR.map((e=>(0,r.createElement)(sR,(0,u.Z)((0,u.Z)({},e),{},{isActive:e.key===i,key:e.key,onCall:()=>{a(e.key)}}))))})},fR=(0,hp.Pi)(hR),gR=i(91745),xR=i.n(gR),yR=e=>{var t=e.defaultValue,i=e.onChange,a=e.inputNumber,o=void 0===a||a,s=(0,yp.Z)(e,["defaultValue","onChange","inputNumber"]),l=(0,r.useState)(t),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=e=>{p(e),i&&i(e)};return(0,r.useEffect)((()=>{p(t)}),[t]),(0,Kg.jsxs)("div",{className:xR().sliderText,children:[(0,Kg.jsx)(TP.Z,(0,u.Z)({tipFormatter:null,className:xR().slider,min:1,max:100,onChange:v,value:"number"===typeof d?d:0},s)),o&&(0,Kg.jsx)(zM.Z,{className:xR().input,controls:!1,min:1,max:100,style:{margin:"0 16px"},value:d,onChange:v})]})},bR=yR,_R=i(58067),jR=i.n(_R),wR=["https://js.xiudodo.com/colorful/materials/pattern1.png","https://js.xiudodo.com/colorful/materials/pattern2.png","https://js.xiudodo.com/colorful/materials/pattern3.png","https://js.xiudodo.com/colorful/materials/pattern4.png","https://js.xiudodo.com/colorful/materials/pattern5.png","https://js.xiudodo.com/colorful/materials/pattern6.png","https://js.xiudodo.com/colorful/materials/pattern81.jpg","https://js.xiudodo.com/colorful/materials/pattern82.jpg","https://js.xiudodo.com/colorful/materials/pattern83.jpg","https://js.xiudodo.com/colorful/materials/pattern84.jpg"],kR=e=>{var t=e.defaultUrl,i=e.onChange;return(0,Kg.jsx)("div",{className:"effect-image",children:wR.map(((e,a)=>(0,Kg.jsx)("div",{onClick:()=>{i(e)},className:hb()("effect-image-item",{"item-choosed":t===e}),children:(0,Kg.jsx)("div",{style:{background:"url(".concat(e,") no-repeat left center")}})},e)))})},TR=kR,ZR=e=>{var t=e.type,i=e.background,a=e.color,o=e.onChange,s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=document.querySelector(".xiudodo-main"),p=(0,r.useRef)(null),v=()=>{switch(t){case"color":return(0,Kg.jsx)("div",{style:{width:"250px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:a,onChange:e=>{o(e.rgb)}})});case"gradient":return(0,Kg.jsx)(sD,{type:"effect",value:a,onChange:e=>{o(e)}});case"image":return(0,Kg.jsx)(TR,{defaultUrl:i,onChange:e=>{o(e)}})}};return(0,r.useEffect)((()=>{if(u)return u.addEventListener("mouseup",(()=>{d(!1)})),()=>{u.removeEventListener("mouseup",(()=>{d(!1)}))}}),[u]),(0,Kg.jsx)("div",{ref:p,className:"machine-item-container",children:(0,Kg.jsxs)(tE.Z,{trigger:"click",visible:c,onVisibleChange:e=>{d(e)},destroyTooltipOnHide:!0,content:v(),title:"",overlayClassName:"container-no-arrow",placement:"bottom",children:["image"===t&&(0,Kg.jsx)("div",{className:"machine-item",onClick:()=>{d(!c)},children:(0,Kg.jsx)("div",{style:{background:"url(".concat(i,") center center no-repeat")}})}),"gradient"===t&&(0,Kg.jsx)("div",{className:"machine-item",onClick:()=>{d(!c)},children:(0,Kg.jsx)("div",{style:{backgroundImage:i,width:"auto",height:"100%"}})}),"color"===t&&(0,Kg.jsx)("div",{className:"machine-item",onClick:()=>{d(!c)},style:{background:i}})]})})},CR=ZR,NR=()=>{var e=B_(),t=e.updateFontEffectColor,i=e.updateBatchFontEffectSolidColor,a=e.value,n=a.effectColorful,r=n.effect,o=r.colorList,s=void 0===o?[]:o,l=r.fillList,c=void 0===l?[]:l,d=r.strokeList,p=void 0===d?[]:d,v=r.sourceList,m=void 0===v?[]:v,h=()=>{var e=[];return s.forEach(((t,i)=>{var a={index:i,type:"color",background:t.value,color:t.value};e.push(a)})),{data:e}},f=()=>{var e=[];return c.forEach(((t,i)=>{var a;if("pattern"!==(null===(a=t.value)||void 0===a?void 0:a.type)&&"string"!==typeof t.value){var n=JSON.parse(JSON.stringify(t.value));n.angle=t.angle;var r={index:i,type:"gradient",background:ML(n),color:n};e.push(r)}})),{data:e}},g=()=>{var e=[];return p.forEach(((t,i)=>{if("string"!==typeof t.value){var a=JSON.parse(JSON.stringify(t.value));a.angle=t.angle;var n={index:i,type:"gradient",background:ML(a),color:a};e.push(n)}})),{data:e}},x=()=>{var e=[];return m.forEach((t=>{var i={type:"image",background:t};e.push(i)})),{data:e}},y=(e,i)=>{t(i,(0,u.Z)((0,u.Z)({},c[i]),{},{angle:e.angle,value:(0,u.Z)((0,u.Z)({},c[i].value),{},{colorStops:e.colorStops,coords:e.coords})}),"fill")},b=(e,i)=>{t(i,(0,u.Z)((0,u.Z)({},p[i]),{},{angle:e.angle,value:(0,u.Z)((0,u.Z)({},p[i].value),{},{colorStops:e.colorStops,coords:e.coords})}),"stroke")},_=(e,i)=>{t(i,e,"source")},j=(e,t,a)=>{i(e,Oh(a))};return(0,Kg.jsxs)("div",{className:"effect-machine-container",children:[h().data.map(((e,t)=>(0,Kg.jsx)(CR,(0,u.Z)((0,u.Z)({},e),{},{onChange:i=>{j(t,e.color,i)}}),t))),f().data.map((e=>(0,Kg.jsx)(CR,(0,u.Z)((0,u.Z)({},e),{},{onChange:t=>{y(t,e.index)}}),e.index))),g().data.map(((e,t)=>(0,Kg.jsx)(CR,(0,u.Z)((0,u.Z)({},e),{},{onChange:t=>{b(t,e.index)}}),t))),x().data.map(((e,t)=>(0,Kg.jsx)(CR,(0,u.Z)((0,u.Z)({},e),{},{onChange:e=>{_(e,t)}}),e)))]})},SR=(0,hp.Pi)(NR),IR=(i(77111),i(49194)),AR=i(88355),PR=i.n(AR);function MR(e){var t=e.content,i=e.children,a=(0,yp.Z)(e,["content","children"]);return(0,Kg.jsx)(tE.Z,(0,u.Z)((0,u.Z)({overlayClassName:hb()(PR()["overwrite-popover"],PR()["no-popover-arrow"]),getPopupContainer:e=>e,content:t},a),{},{children:i}))}var ER=i(54655),LR=i.n(ER);function DR(e){var t,i,a=e.BasicItem,n=ij(),o=n.textBackground,s=n.open,l=n.close,c=n.changeColor,d=n.changeOpacity,p=n.changeBorderRadius,v=(null===o||void 0===o?void 0:o.color)&&j(null===o||void 0===o?void 0:o.color),m=e=>{e?s():l()};return(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(IR.Z,{style:{background:"#353540"}}),[{name:"\u5b57\u4f53\u80cc\u666f",key:"letterSpacing",isShow:!0,component:(0,Kg.jsx)(KP.Z,{checked:null===o||void 0===o?void 0:o.enabled,onChange:m})},{name:"\u80cc\u666f\u989c\u8272",key:"color",isShow:!0,component:(0,Kg.jsx)(MR,{placement:"top",trigger:"click",className:LR().color,overlayInnerStyle:{marginTop:30,marginLeft:10,position:"fixed"},content:(0,Kg.jsx)(qL.xS,{width:270,color:null===o||void 0===o?void 0:o.color,onChange:e=>{c(e.rgb)}}),children:(0,Kg.jsx)("div",{className:LR().chooseColor,style:{background:v}})})},{name:"\u80cc\u666f\u4e0d\u900f\u660e\u5ea6",key:"opacity",isShow:!0,component:(0,Kg.jsx)(bR,{step:1,min:0,max:100,onChange:e=>{d(e)},defaultValue:null!==(t=null===o||void 0===o?void 0:o.opacity)&&void 0!==t?t:50,value:null!==(i=null===o||void 0===o?void 0:o.opacity)&&void 0!==i?i:50})},{name:"\u5706\u89d2",key:"lineHeight",isShow:!0,component:(0,Kg.jsx)(bR,{min:0,max:50,defaultValue:(null===o||void 0===o?void 0:o.borderRadius)||0,value:(null===o||void 0===o?void 0:o.borderRadius)||0,onChange:e=>{p(e)}})}].map((e=>"letterSpacing"===e.key||null!==o&&void 0!==o&&o.enabled?(0,r.createElement)(a,(0,u.Z)((0,u.Z)({},e),{},{key:e.key})):void 0))]})}var RR=(0,hp.Pi)(DR),zR=e=>{var t=e.name,i=e.component;return(0,Kg.jsxs)("div",{className:jR().basicItem,children:[(0,Kg.jsx)("div",{className:jR().basicItemTitle,children:t}),(0,Kg.jsx)("div",{className:jR().basicItemView,children:i})]})};function FR(){var e,t,i,a=P_(),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=I_(),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=A_(),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=Pw(),y=[{name:"\u5b57\u4f53",key:"fontFamaily",isShow:!0,component:(0,Kg.jsx)(JD,{})},{name:"\u5927\u5c0f",key:"fontSize",isShow:!0,component:(0,Kg.jsx)(aR,{})},{name:"\u6837\u5f0f",key:"fontStyle",isShow:!0,component:(0,Kg.jsx)(uR,{})},{name:"\u6392\u5217",key:"textAlign",isShow:!0,component:(0,Kg.jsx)(fR,{})},{name:"\u95f4\u8ddd",key:"letterSpacing",isShow:!0,component:(0,Kg.jsx)(bR,{min:0,defaultValue:f,onChange:e=>{g(e)}})},{name:"\u884c\u9ad8",key:"lineHeight",isShow:!0,component:(0,Kg.jsx)(bR,{defaultValue:p,onChange:e=>{v(e)}})},{name:"\u4e0d\u900f\u660e\u5ea6",key:"opacity",isShow:!0,component:(0,Kg.jsx)(bR,{defaultValue:s,onChange:e=>{l(e)}})},{name:"\u989c\u8272",key:"color",isShow:!(null!==x&&void 0!==x&&null!==(e=x.attribute)&&void 0!==e&&e.effectColorful),component:x&&(0,Kg.jsx)(yD,{asset:x})},{name:"\u6e10\u53d8\u53d6\u8272",key:"gradient",isShow:!1,component:(0,Kg.jsx)(sD,{type:"background",value:"linear-gradient(90deg, rgb(255, 255, 255) 0%, rgb(248, 202, 107) 0%, rgb(252, 174, 125) 59.2593%, rgb(252, 174, 125) 60.4938%)",onChange:e=>{}})},{name:"\u989c\u8272",key:"color",isShow:null===x||void 0===x||null===(t=x.attribute)||void 0===t?void 0:t.effectColorful,component:(0,Kg.jsx)(SR,{})},{name:"",key:"backgroundFont",isShow:"text"===(null===x||void 0===x?void 0:x.meta.type)&&!(null!==x&&void 0!==x&&null!==(i=x.attribute)&&void 0!==i&&i.effectColorful)}];return(0,Kg.jsx)("div",{className:"xdd-designer-sider-panel-padding",children:y.map((e=>"backgroundFont"===e.key&&e.isShow?(0,Kg.jsx)(RR,{BasicItem:zR},e.key):e.isShow?(0,r.createElement)(zR,(0,u.Z)((0,u.Z)({},e),{},{key:e.key})):void 0))})}var OR=(0,hp.Pi)(FR),BR=()=>{var e=B_(),t=e.updateSignatureFontEffect;function i(e,i){i?fetch("//js.xiudodo.com/colorful/presets/v2/".concat(i,".json")).then((e=>e.json())).then((e=>{t({resId:i,effect:e})})):t(void 0)}return(0,Kg.jsx)("div",{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill,minmax(80px ,1fr))",padding:"4px 16px 0"},children:(0,Kg.jsx)(yL,{onHandleClick:i,type:"update",icon:(0,Kg.jsx)(iP,{type:"icontihuan1"})})})},WR=(0,hp.Pi)(BR),VR={blur:0,x:0,y:0,spread:0,color:"#000"},UR=[{key:"x",range:[-100,100],label:"\u6a2a\u5411\u504f\u79fb"},{key:"y",range:[-100,100],label:"\u7eb5\u5411\u504f\u79fb"},{key:"blur",range:[0,50],label:"\u6a21\u7cca\u5ea6"}],GR=i(45417),XR=i.n(GR),qR=e=>{var t=e.value,i=e.onChange,a=void 0===i?()=>{}:i,n=e.label,r=e.min,o=e.max,s=e.className,l=e.wrapperClassName,c=e.onAfterChange,d=void 0===c?()=>{}:c;return(0,Kg.jsxs)("div",{className:hb()("filter-slider",l),children:[(0,Kg.jsx)("div",{className:"img-filter-label",children:n}),(0,Kg.jsx)(TP.Z,{tipFormatter:null,className:s,min:r,max:o,onAfterChange:d,value:t,onChange:a}),(0,Kg.jsx)(zM.Z,{size:"small",style:{width:60,marginLeft:18},min:r,max:o,value:t,onChange:e=>{a(e),d(e)}})]})},HR=(0,r.memo)(qR),YR=()=>{var e=xu(),t=(0,r.useRef)(!1);if(!e)return null;var i=e.attribute.dropShadow,a=(0,u.Z)((0,u.Z)({},VR),i);return(0,Kg.jsxs)("div",{className:XR().FiltersAdjust,children:[(0,Kg.jsxs)("div",{className:XR().list,children:[(0,Kg.jsxs)("div",{className:XR().color,children:[(0,Kg.jsx)("div",{className:XR().colorTitle,children:"\u6295\u5f71\u989c\u8272"}),(0,Kg.jsx)("div",{className:XR().textColor,children:(0,Kg.jsx)(tE.Z,{trigger:"click",overlayClassName:"color-picker",placement:"rightBottom",destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{style:{width:"318px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:a.color,onChange:t=>{uj({params:{color:Oh(t.rgb)},target:e}),Km("Shadow4")}})}),children:(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:a.color},onClick:()=>{Km("Shadow3")}})})})]}),UR.map((i=>{var n=a[i.key],r=i.range[0],o=i.range[1];return(0,Kg.jsx)(HR,{value:n,label:i.label,className:i.key,onChange:a=>{var n={[i.key]:a};uj({params:n,target:e}),t.current=!0},min:r,max:o,onAfterChange:()=>{t.current&&(We("updateShadow",!0),Km("Shadow1"),t.current=!1)}},i.key)}))]}),(0,Kg.jsx)("div",{className:"image-controller-bottom",children:(0,Kg.jsx)("div",{className:"image-controller-reset",onClick:()=>{uj({params:{},target:e,save:!0,replace:!0}),Km("Shadow2")},children:"\u91cd\u7f6e"})})]})},KR=(0,hp.Pi)(YR);function QR(){var e=Vw(),t=e.currentAsset,i=uu(),a=i.changStatue;return(0,Kg.jsxs)(RM,{destroyInactiveTabPane:!0,onChange:e=>{"animation"!==e&&a(-1)},children:[(0,Kg.jsx)(MM,{tab:"\u57fa\u7840",children:(0,Kg.jsx)(OR,{})},"1"),(0,Kg.jsx)(MM,{tab:"\u7279\u6548",children:(0,Kg.jsx)(WR,{})},"2"),!ti(t)&&(0,Kg.jsx)(MM,{tab:"\u52a8\u753b",children:(0,Kg.jsx)(sL,{})},"animation"),(0,Kg.jsx)(MM,{tab:"\u6295\u5f71",children:(0,Kg.jsx)(KR,{})},"3")]})}var JR=(0,hp.Pi)(QR),$R=i(76570),ez=i(7507);function tz(){return bp.g.get("/creator-api/resource/mix-background")}function iz(e){return bp.g.get("/creator-api/resource/background-video?".concat((0,jp.stringify)(e)))}function az(e){var t=e.page,i=void 0===t?1:t,a=e.pageSize,n=void 0===a?8:a,r=(0,yp.Z)(e,["page","pageSize"]);return bp.g.get("/creator-api/resource/background-image?page=".concat(i,"&pageSize=").concat(n,"&").concat((0,jp.stringify)(r)))}function nz(){return bp.g.get("/label-api/bg-image")}function rz(){return bp.g.get("/label-api/bg-video")}function oz(e){var t=e.resource_flag,i=e.keyword,a=void 0===i?"":i,n=e.filter_id,r=void 0===n?"":n,o=e.page,s=void 0===o?"1":o,l=e.pageSize,c=void 0===l?30:l,d=e.shape,u=void 0===d?"w":d;return bp.g.get("/resource-api/search?resource_flag=".concat(t,"&keyword=").concat(a,"&filter_id=").concat(r,"&page_num=").concat(s,"&page_size=").concat(c,"&shape=").concat(u))}function sz(e){return bp.g.get("/resource-api/sub-fronts?filter_id=".concat(e))}function lz(e){return bp.g.get("/resource-api/sub-filters?filter_id=".concat(e))}var cz=i(80510),dz=i.n(cz),uz=()=>{var e=bw(),t=e.backgroundColor,i=e.update,a=DL(),n=a.list,o=a.editFlag,s=a.getEffectColor,l=a.changeList,c=a.changeAngle,d=e=>{var t=PL(e);c(t.angle),l(t.list)};return(0,r.useEffect)((()=>{if(n.length>0){var e=s();e&&i({type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle})}}),[o]),(0,Kg.jsxs)("div",{className:dz().colorBackground,children:[(0,Kg.jsx)("div",{className:dz().title,children:"\u989c\u8272\u80cc\u666f"}),(0,Kg.jsxs)("div",{className:dz().content,children:[(0,Kg.jsxs)("div",{className:dz().top,children:[(0,Kg.jsx)(fD,{isDesigner:!0,color:t,colorPickupChange:i,gradientColorChange:i,changeMockGradient:d,children:(0,Kg.jsx)("div",{className:dz().colorFirstItem})}),UL.map((e=>(0,Kg.jsx)("div",{onClick:t=>{var a=e.replace(/[^\d,]/g,"").split(","),n={r:Number(a[0]),g:Number(a[1]),b:Number(a[2]),a:1};i(n)},className:dz().colorItem,style:{background:e}},e)))]}),(0,Kg.jsx)("div",{className:dz().top,children:CL.map(((e,t)=>(0,Kg.jsx)("div",{onClick:()=>d(e),className:dz().colorItem,style:{background:e}},e)))})]})]})},pz=(0,hp.Pi)(uz),vz=e=>{var t=e.src,i=(e.className,(0,r.useState)({width:"100%",height:"auto"})),a=(0,n.Z)(i,2);a[0],a[1];return(0,Kg.jsx)("div",{className:"back",style:{width:"100%",height:"100%"},children:(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",background:"url(".concat(t,") center center / contain no-repeat")}})})},mz=vz;function hz(e){var t=e.children,i=e.src,a=e.type,o=e.poster,s=e.previewNode,l=(0,r.useState)(["lottie","effect"].includes(a)||!1),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useMemo)((()=>{if(s)return s;switch(a){case"image":case"pic":case"SVG":return(0,Kg.jsx)("img",{src:i,alt:"img",onLoad:()=>u(!0)});case"video":case"videoE":return(0,Kg.jsx)("video",{autoPlay:!0,src:i,onCanPlayCapture:()=>u(!0)});case"lottie":return(0,Kg.jsx)(GE,{autoPlay:!0,alwaysPlay:!0,path:i,preview:o});default:return(0,Kg.jsx)(Kg.Fragment,{})}}),[a]);return(0,Kg.jsx)(tE.Z,{placement:"rightBottom",overlayClassName:"materialItemPopover",destroyTooltipOnHide:!0,content:(0,Kg.jsx)(dN.Z,{spinning:!d,children:p}),children:t})}var fz=i(79042),gz=i.n(fz),xz=e=>{var t=e.item,i=e.type,a=jw(),n=a.value,r=a.update,o={picUrl:t.big_preview,width:t.width,height:t.height,assetWidth:t.width,assetHeight:t.height,resId:t.id,startTime:0,endTime:kd},s={width:t.width,height:t.height,resId:t.id,rt_url:t.sample,rt_preview_url:t.preview,rt_frame_url:t.frame_file,rt_total_frame:t.total_frame,rt_total_time:t.duration,endTime:t.duration,startTime:0},l="video"===i?s:o;function c(){r({resId:t.id,rt_imageUrl:t.big_preview,backgroundSize:{width:1920,height:1080}})}var d=function(){var e=(0,p.Z)(m().mark((function e(a){var n,r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ph(a),n=Bw(),"background"!==i){e.next=6;break}c(),e.next=17;break;case 6:if(!n.backgroundAsset){e.next=10;break}dw({assets:[(0,u.Z)((0,u.Z)({type:i,isBackground:!0},l),qv(l))],pageTime:t.duration||kd,index:Du(Bw().id)+1}),e.next=17;break;case 10:if(r=n.videoInfo.allAnimationTime,!("video"===i&&t.duration<r)){e.next=14;break}return xp.default.info("\u89c6\u9891\u65f6\u957f\u8fc7\u77ed\uff0c\u65e0\u6cd5\u6dfb\u52a0\u5230\u5f53\u524d\u7247\u6bb5"),e.abrupt("return");case 14:return l.endTime=r,e.next=17,Tg({meta:{type:i,isBackground:!0},attribute:l});case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=vu().find((e=>e.meta.isBackground));function h(e){return f.apply(this,arguments)}function f(){return f=(0,p.Z)(m().mark((function e(a){var n,r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(Ph(a),n=Bw(),"background"!==i){e.next=6;break}c(),e.next=17;break;case 6:if(!v){e.next=17;break}if(r=n.videoInfo.allAnimationTime,!("video"===i&&t.duration<r)){e.next=11;break}return xp.default.info("\u89c6\u9891\u65f6\u957f\u8fc7\u77ed\uff0c\u65e0\u6cd5\u66ff\u6362\u5f53\u524d\u80cc\u666f"),e.abrupt("return");case 11:Object.assign(null===v||void 0===v?void 0:v.attribute,l),Object.assign(null===v||void 0===v?void 0:v.attribute,qv(l)),v.meta.type=i,Number(v.attribute.cst)>-1&&(delete v.attribute.cst,delete v.attribute.cet),l.endTime=r,Ng({params:{meta:{type:i},attribute:l},asset:v});case 17:case"end":return e.stop()}}),e)}))),f.apply(this,arguments)}return(0,Kg.jsx)(hz,{type:"video"===i?"video":"image",src:"video"===i?t.preview_video:t.preview,children:(0,Kg.jsxs)("div",{className:gz().item,children:[(0,Kg.jsx)(mz,{src:t.preview}),"video"===i&&(0,Kg.jsx)("div",{className:gz().time,children:Th(parseInt("".concat(t.duration/1e3),10))}),(0,Kg.jsx)("div",{className:hb()(gz().itemButton,"background"===i&&null!==n&&void 0!==n&&n.resId?gz().itemButtonAdd:gz().itemButtonReplace),onClick:h,hidden:"background"===i?!(null!==n&&void 0!==n&&n.resId):!v,children:(0,Kg.jsx)("div",{className:gz().itemButtonAdd,children:(0,Kg.jsx)(iP,{type:"iconexchange"})})}),(0,Kg.jsx)("div",{className:hb()(gz().itemButton,gz().itemButtonAdd),onClick:d,hidden:"background"===i&&!(null===n||void 0===n||!n.resId),children:(0,Kg.jsx)(XP.Z,{})})]})})},yz=(0,hp.Pi)(xz),bz=e=>{var t=e.title,i=e.bindClickMore,a=e.data,n=e.type,r=a;return(0,Kg.jsx)(dL,{title:t,extraContent:(0,Kg.jsx)("div",{className:dz().more,onClick:i,children:"\u67e5\u770b\u66f4\u591a>"}),contentStyle:{gridTemplateColumns:"repeat(auto-fill,minmax(130px,1fr))"},children:r.map((e=>(0,Kg.jsx)(yz,{item:e,type:n},e.id)))})},_z=bz,jz="module"===(0,_p.Z)().redirect,wz=e=>{var t=e.bindClickMore,i=e.videoArr,a=e.imageArr,n=(0,DI.ZP)(az,{manual:!0}),o=n.data,s=void 0===o?{items:[]}:o,l=n.run;return(0,r.useEffect)((()=>{jz&&l({type:"module"})}),[]),(0,Kg.jsxs)("div",{className:dz().initialPageWarp,children:[(0,Kg.jsx)(pz,{}),jz&&(0,Kg.jsx)(_z,{title:"\u7ec4\u4ef6\u80cc\u666f",bindClickMore:()=>t("\u7ec4\u4ef6\u80cc\u666f","background"),data:s.items,type:"background"}),(0,Kg.jsx)(_z,{title:"\u89c6\u9891\u80cc\u666f",bindClickMore:()=>t("\u89c6\u9891\u80cc\u666f","video"),data:i,type:"video"}),(0,Kg.jsx)(_z,{title:"\u56fe\u7247\u80cc\u666f",bindClickMore:()=>t("\u56fe\u7247\u80cc\u666f","pic"),data:a,type:"pic"})]})},kz=wz,Tz=e=>{var t=e.param,i=e.req,a=e.style,n=e.type;return(0,Kg.jsx)(yE,{request:i,params:(0,u.Z)({pageSize:40},t),skeleton:{columns:4},wrapStyle:a,children:e=>{var t=e.list;return(0,Kg.jsx)("div",{style:{display:"grid",gap:12,gridTemplateColumns:"repeat(auto-fill,minmax(130px,1fr))",overflowY:"auto",alignContent:"flex-start"},children:t.map((e=>(0,Kg.jsx)(yz,{item:e,type:n},e.id)))})}})},Zz=(0,r.memo)(Tz),Cz=e=>{var t=e.title,i=e.bindClickTag,a=e.data,r=(0,dx.Z)({isShow:!1,class_id:-1}),o=(0,n.Z)(r,2),s=o[0],l=o[1],c=a||[{id:1,name:"\u6a2a"},{id:2,name:"\u7ad6"},{id:0,name:"\u65b9"}],d=!s.isShow&&c.length>6?c.slice(0,5):c;return(0,Kg.jsxs)("div",{className:dz().detailPageTitle,children:[(0,Kg.jsx)("div",{className:hb()(dz().itemName),children:t}),(0,Kg.jsx)("div",{className:hb()({[dz().active]:-1===s.class_id},dz().item),onClick:()=>{l({class_id:-1}),i("")},children:"\u5168\u90e8"}),d.map(((e,t)=>(0,Kg.jsx)("div",{className:hb()({[dz().active]:e.id===s.class_id},dz().item),onClick:()=>{l({class_id:e.id}),i(e.id)},children:(0,Kg.jsx)("div",{className:dz().itemText,children:e.name})},e.id))),c.length>6&&(0,Kg.jsx)("div",{className:dz().item,onClick:()=>{l({isShow:!s.isShow})},children:s.isShow?"\u6536\u8d77":"\u67e5\u770b\u5168\u90e8"})]})},Nz=Cz,Sz=e=>{var t=e.title,i=e.bindClickTag,a=(0,dx.Z)({tagArr:[],classifyArr:[],sceneArr:[]}),o=(0,n.Z)(a,2),s=o[0],l=o[1];return(0,r.useEffect)((()=>{"\u89c6\u9891\u80cc\u666f"===t?rz().then((e=>{if(0===e.code){var t=e.data.map((e=>{var t={};return t.name=e.class_name,t.id=e.class_id,t}));l({tagArr:t})}})):"\u56fe\u7247\u80cc\u666f"===t&&nz().then((e=>{if(0===e.code){var t=e.data,i=t.scene,a=t.tag,n=i.map((e=>{var t={};return t.name=e.class_name,t.id=e.id,t})),r=a.map((e=>{var t={};return t.name=e.tagname,t.id=e.id,t}));l({classifyArr:r,sceneArr:n})}}))}),[]),(0,Kg.jsxs)("div",{className:dz().tagWarp,children:["\u89c6\u9891\u80cc\u666f"===t&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(Nz,{title:"\u5206\u7c7b",bindClickTag:e=>i("class_id",e),data:s.tagArr}),(0,Kg.jsx)(Nz,{title:"\u7248\u5f0f",bindClickTag:e=>i("ratio",e)})]}),"\u56fe\u7247\u80cc\u666f"===t&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(Nz,{title:"\u5206\u7c7b",bindClickTag:e=>i("class_id",e),data:s.sceneArr}),(0,Kg.jsx)(Nz,{title:"\u98ce\u683c",bindClickTag:e=>i("tag_id",e),data:s.classifyArr}),(0,Kg.jsx)(Nz,{title:"\u7248\u5f0f",bindClickTag:e=>i("ratio",e)})]})]})},Iz=Sz,Az=e=>{var t=e.title,i=e.bindClickback,a=e.value,o=e.type,s=(0,dx.Z)({class_id:"",tag_id:"",ratio:""}),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=(e,t)=>{d({[e]:t})},p=(0,r.useMemo)((()=>({keyword:a,page:1,pageSize:40,class_id:c.class_id,tag_id:c.tag_id,ratio:c.ratio,type:"\u7ec4\u4ef6\u80cc\u666f"===t?"module":""})),[c.class_id,c.tag_id,c.ratio,a]);return(0,Kg.jsxs)("div",{className:dz().detailPage,children:[(0,Kg.jsxs)("div",{className:dz().detailPageT,children:[(0,Kg.jsxs)("div",{className:dz().detailPageTop,children:[(0,Kg.jsx)("div",{className:dz().detailPageTopLeft,children:t}),(0,Kg.jsx)("div",{className:dz().detailPageTopRight,onClick:i,children:"<\u8fd4\u56de"})]}),(0,Kg.jsx)(Iz,{title:t,bindClickTag:u})]}),(0,Kg.jsx)(Zz,{param:p,req:"\u89c6\u9891\u80cc\u666f"===t?iz:az,style:{height:0,flex:1},type:o})]})},Pz=Az,Mz=i(28612),Ez=i(19675),Lz=e=>{var t=e.value,i=YP.Z.TabPane,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,dx.Z)({classifyId:"",class_id:"",tag_id:"",ratio:"",screenShow:!1}),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,r.useMemo)((()=>({keyword:t,page:1,pageSize:40,class_id:u.class_id,tag_id:u.tag_id,ratio:u.ratio})),[u.class_id,u.tag_id,u.ratio,t]),m=(0,r.useMemo)((()=>({keyword:t,page:1,pageSize:40,class_id:u.classifyId})),[u.classifyId,t]),h=(e,t)=>{p({[e]:t})},f=(e,t)=>{p({classifyId:t})},g=()=>{l(!s)};return(0,Kg.jsx)("div",{className:dz().searchPage,children:(0,Kg.jsxs)(YP.Z,{defaultActiveKey:"1",tabBarExtraContent:(0,Kg.jsxs)("div",{className:dz().searchPageScreen,onClick:g,children:["\u5206\u7c7b\u7b5b\u9009",s?(0,Kg.jsx)(Mz.Z,{}):(0,Kg.jsx)(Ez.Z,{})]}),children:[(0,Kg.jsx)(i,{tab:"\u89c6\u9891\u80cc\u666f",children:(0,Kg.jsxs)("div",{className:dz().tagsTopWarp,children:[(0,Kg.jsx)("div",{className:dz().tagsTop,children:(0,Kg.jsx)("div",{style:{display:s?"block":"none"},children:(0,Kg.jsx)(Iz,{title:"\u89c6\u9891\u80cc\u666f",bindClickTag:f})})}),(0,Kg.jsx)("div",{className:dz().searchContent,children:(0,Kg.jsx)(Zz,{param:m,type:"video",req:iz})})]})},"1"),(0,Kg.jsx)(i,{tab:"\u56fe\u7247\u80cc\u666f",children:(0,Kg.jsxs)("div",{className:dz().tagsTopWarp,children:[(0,Kg.jsx)("div",{className:dz().tagsTop,children:(0,Kg.jsx)("div",{style:{display:s?"block":"none"},children:(0,Kg.jsx)(Iz,{title:"\u56fe\u7247\u80cc\u666f",bindClickTag:h})})}),(0,Kg.jsx)("div",{className:dz().searchContent,children:(0,Kg.jsx)(Zz,{param:v,type:"pic",req:az})})]})},"2")]})})},Dz=Lz,Rz=i(13070),zz=i.n(Rz),Fz=()=>{var e=(0,r.useRef)(null),t=(0,dx.Z)({keyword:"",showKey:"InitialPage",title:""}),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=(0,DI.ZP)(tz,{manual:!0,onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),l=s.data,c=void 0===l?{video:{},image:{}}:l,d=s.run,u=c.video.items,p=void 0===u?[]:u,v=c.image.items,m=void 0===v?[]:v;(0,r.useEffect)((()=>{d()}),[]);var h=(e,t)=>{o({title:e,showKey:"DetailPage",type:t})},f=(0,ez.Z)(a.keyword,{wait:500}),g=()=>{o({showKey:"InitialPage",keyword:""})},x=()=>{switch(a.showKey){case"SearchPage":return(0,Kg.jsx)(Dz,{value:f});case"DetailPage":return(0,Kg.jsx)(Pz,{type:a.type,title:a.title,bindClickback:g,value:f});default:return(0,Kg.jsx)(kz,{bindClickMore:h,videoArr:p,imageArr:m})}},y=e=>{if(e.target.value!==a.keyword)if(e.target.value)switch(a.showKey){case"InitialPage":o({showKey:"SearchPage",keyword:e.target.value});break;default:o({keyword:e.target.value})}else o({keyword:""})};return(0,Kg.jsxs)("div",{className:zz().backgroundWarp,children:[(0,Kg.jsx)("div",{className:zz().topInput,children:(0,Kg.jsx)(VP.Z,{ref:e,prefix:(0,Kg.jsx)($R.Z,{}),size:"large",value:a.keyword,placeholder:"\u641c\u7d22\u60a8\u9700\u8981\u7684\u80cc\u666f\u89c6\u9891",onPressEnter:y,onChange:y,onKeyDown:Ph,onPaste:Ph,suffix:"SearchPage"===a.showKey?(0,Kg.jsx)("div",{className:zz().suffix,onClick:g,children:(0,Kg.jsx)(EM.Z,{})}):null})}),(0,Kg.jsx)("div",{className:zz().content,children:x()})]})},Oz=Fz;function Bz(e){e.keyword,e.class_id,e.page;return bp.g.get("/video/audio-search-v2?".concat((0,jp.stringify)(e)))}function Wz(e){var t=e.source_type||"1";return bp.g.get("/user-upload/audio-payload?name=".concat(e.name,"&type=").concat(e.type,"&size=").concat(e.size,"&source_type=").concat(t))}function Vz(e){var t=e.id;return bp.g.post("/video/del-my-audio",{body:"res_id=".concat(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function Uz(){return bp.g.get("/user-upload/ai-voices")}function Gz(e){var t=new FormData;return Object.keys(e).forEach((i=>{t.append(i,e[i])})),bp.g.post("/user-upload/ai-audio",{data:t})}function Xz(e){var t=e.page,i=e.sourceType,a=void 0===i?"2":i;return bp.g.get("/video/my-audio?p=".concat(t,"&source_type=").concat(a))}function qz(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,pageSize:40};return bp.g.get("/creator-api/resource/material-audio?".concat((0,jp.stringify)(e)))}function Hz(){return bp.g.get("/label-api/material-audio")}function Yz(e){return bp.g.get("/resource-api/search?".concat((0,jp.stringify)(e)))}function Kz(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{filter_id:"1230860"};return bp.g.get("/resource-api/sub-filters-tree?".concat((0,jp.stringify)(e)))}function Qz(){return bp.g.get("/user-upload/audio-info")}function Jz(e){var t=e.ids,i=new FormData;return t.forEach(((e,t)=>{i.append("ids[".concat(t,"]"),e)})),bp.g.post("/user-upload/audio-scan",{data:i})}function $z(e){return bp.g.get("/resource-api/sub-fronts?filter_id=".concat(e))}function eF(e){return bp.g.get("/label-api/material-audio?pid=".concat(e))}function tF(e){var t=e.keyword,i=e.class_id,a=e.pageSize,n=e.page,r=e.resource_flag,o=e.filter_id;return bp.g.get("/resource-api/search?resource_flag=".concat(r,"&class_id=").concat(i,"&page_num=").concat(n,"&page_size=").concat(a,"&keyword=").concat(t,"&filter_id=").concat(o))}function iF(e){return bp.g.get("/file/exits?filename=".concat(e.filename,"&file_md5=").concat(e.file_md5,"&folder_id=").concat(e.folder_id,"&source_tag=").concat(e.file_type))}function aF(e){var t=new FormData;return Object.keys(e).forEach((i=>{t.append(i,e[i])})),bp.g.post("/file/".concat(e.folder_id,"/add"),{data:t})}function nF(e){var t=e.page,i=e.pageSize;return bp.g.get("/file/media-list?type=audio&page=".concat(t,"&pageSize=").concat(i))}function rF(e){var t=new FormData;return Object.keys(e).forEach((i=>{t.append(i,e[i])})),bp.g.post("/resource-api/search-count",{body:JSON.stringify(e)})}var oF=i(37187),sF=i.n(oF),lF=e=>{var t=e.bindClickTag,i=e.class_id,a=(0,dx.Z)({isShow:!1,tagArr:[]}),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=s.tagArr;(0,r.useEffect)((()=>{Hz().then((e=>{0===e.code&&l({tagArr:e.data})}))}),[]);var d=!s.isShow&&c.length>7?c.slice(0,6):c;return(0,Kg.jsxs)("div",{className:sF().musicTags,children:[(0,Kg.jsx)("div",{className:hb()({[sF().active]:""===i},sF().item),onClick:()=>{t("")},children:"\u5168\u90e8"}),d.map(((e,a)=>(0,Kg.jsx)("div",{className:hb()(sF().item,{[sF().active]:e.pid===i}),onClick:()=>{t(e.pid)},children:(0,Kg.jsx)("div",{className:sF().itemText,children:e.class_name})},e.pid))),c.length>7&&(0,Kg.jsx)("div",{className:sF().item,onClick:()=>{l({isShow:!s.isShow})},children:s.isShow?"\u6536\u8d77":"\u67e5\u770b\u5168\u90e8"})]})},cF=(0,r.memo)(lF),dF=i(54757),uF=i.n(dF),pF=e=>{var t=e.param,i=e.request,a=e.Item,n=(0,yp.Z)(e,["param","request","Item"]);return(0,Kg.jsx)(yE,(0,u.Z)((0,u.Z)({request:i,params:t,emptyDesc:(0,Kg.jsxs)("div",{className:uF().emptyWarp,children:[(0,Kg.jsx)(iP,{type:"iconkong",className:uF().img}),"\u672a\u641c\u7d22\u5230".concat(null!==t&&void 0!==t&&t.keyword?"\u4e0e\u201c".concat(null===t||void 0===t?void 0:t.keyword,"\u201d"):"","\u76f8\u5173\u97f3\u4e50")]}),wrapStyle:{flex:1,height:0,marginBottom:16},skeleton:{className:uF().musicContentWarp,style:{gridTemplateColumns:"repeat(auto-fill,minmax(218px,1fr))"}}},n),{},{children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)(a,{item:e},e.id)))})}}))},vF=pF,mF=i(69816),hF=i(25782),fF=e=>{var t=e.data,i=e.bindPlay,a=e.isPlay,o=e.onCancel,s=(0,r.useRef)(null),l=(0,r.useRef)(null),c=(0,r.useState)(-1),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=t.title,m=t.total_time,h=t.file_type,f=()=>{p(0),l.current=null===s||void 0===s?void 0:s.current,null!=l.current&&(l.current.currentTime=0,l.current.play(),l.current.ontimeupdate=()=>{var e,t;null!==(e=l.current)&&void 0!==e&&e.currentTime&&(parseInt("".concat(l.current.currentTime),10)<parseInt("".concat(m/1e3),10)?p(null===(t=l.current)||void 0===t?void 0:t.currentTime):(l.current.ontimeupdate=null,p(0),i(!1)))})};return(0,r.useEffect)((()=>(f(),()=>{l.current&&(l.current.ontimeupdate=null)})),[t]),(0,r.useEffect)((()=>{l.current&&(a?(0===u&&f(),l.current.play()):l.current.pause())}),[a]),(0,Kg.jsxs)("div",{className:uF().musicPlayWarp,children:[(0,Kg.jsx)("audio",{ref:s,src:t.preview,loop:!1,children:"\u7cdf\u7cd5\u4e86\u8001\u94c1\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301audio,\u8bf7\u5c1d\u8bd5\u5347\u7ea7"}),(0,Kg.jsxs)("div",{className:uF().musicPlayLeft,children:[(0,Kg.jsx)(iP,{type:"iconyinle1"}),(0,Kg.jsx)("div",{className:uF().musicItemPlay,onClick:e=>{e.stopPropagation(),i(!a)},children:a?(0,Kg.jsx)(mF.Z,{}):(0,Kg.jsx)(hF.Z,{})})]}),(0,Kg.jsxs)("div",{className:uF().musicPlayContent,children:[(0,Kg.jsx)("div",{className:uF().musicPlayContentTop,children:"".concat(v,".").concat(h)}),(0,Kg.jsxs)("div",{className:uF().musicPlayContentBottom,children:[(0,Kg.jsx)("div",{className:uF().musicPlayStatTime,children:Th(parseInt("".concat(u),10))}),(0,Kg.jsx)("div",{className:uF().shuxian}),(0,Kg.jsx)("div",{className:uF().musicPlayEndtime,children:Th(parseInt("".concat(m/1e3),10))}),(0,Kg.jsx)("div",{className:uF().musicPlayProgress,children:(0,Kg.jsx)(tM.Z,{percent:1e5*u/m,showInfo:!1})})]})]}),(0,Kg.jsx)("div",{className:uF().musicPlayClose,onClick:o,children:(0,Kg.jsx)(EM.Z,{})})]})},gF=(0,r.memo)(fF),xF=(i(81984),i(46190)),yF=e=>{var t=e.data,i=e.isCheck,a=e.bindPlay,n=e.isPlay,r=e.className,o=(0,yp.Z)(e,["data","isCheck","bindPlay","isPlay","className"]),s=t.title,l=t.total_time,c=t.preview,d=t.file_type,p=t.id,v=oh(),m=v.bindAddAudio,h=e=>{Ph(e);var t={rt_title:s,resId:p,type:2,rt_url:c,volume:60,isLoop:!1,rt_duration:l,fadeIn:500,fadeOut:500},i=rh(void 0,t);m&&m((0,u.Z)((0,u.Z)({},t),i)),a(!1),Rb()};return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:hb()(uF().musicItemWarp,r,{[uF().check]:i})},o),{},{children:[(0,Kg.jsx)("div",{className:uF().musicItemLeft,children:(0,Kg.jsx)(iP,{type:"iconyinle1"})}),(0,Kg.jsxs)("div",{className:uF().musicItemRight,children:[(0,Kg.jsx)("div",{className:uF().musicItemRightTop,children:"".concat(s,".").concat(d)}),(0,Kg.jsx)("div",{className:uF().musicItemRightBottom,children:Th(parseInt("".concat(l/1e3),10))})]}),(0,Kg.jsx)("div",{className:uF().musicItemPlay,onClick:e=>{e.stopPropagation(),a(!n)},children:n?(0,Kg.jsx)(mF.Z,{}):(0,Kg.jsx)(hF.Z,{})}),(0,Kg.jsx)(xF.Z,{overlayClassName:"musicItemtooltip",title:(0,Kg.jsx)("div",{className:uF().musicItemtooltipText,children:"\u6dfb\u52a0"}),color:"#fcfcfc",children:(0,Kg.jsx)("div",{className:uF().musicItemAdd,onClick:h,children:(0,Kg.jsx)(XP.Z,{})})})]}))},bF=yF,_F=i(91953),jF=i.n(_F);function wF(e){function t(t){e.onChange(t.target.value)}return(0,Kg.jsx)("div",{className:jF().topInput,children:(0,Kg.jsx)(VP.Z,{prefix:(0,Kg.jsx)($R.Z,{}),size:"large",placeholder:"\u8bf7\u8f93\u5165\u641c\u7d22\u8bcd",onPressEnter:t,onChange:t,onPaste:Ph,onKeyDown:Ph})})}var kF=e=>{var t=e.onPlay,i=e.playInfo,a=e.isPlaying,o=e._isPlaying,s=(0,r.useState)(""),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(""),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,Zm.Z)(d,{wait:500}),f=h.run,g=(0,r.useCallback)((e=>{m(e)}),[]),x=(0,r.useMemo)((()=>({keyword:c,page:1,pageSize:40,class_id:v})),[v,c]);return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(wF,{onChange:f}),(0,Kg.jsx)(cF,{bindClickTag:g,class_id:v}),(0,Kg.jsx)(vF,{param:x,request:qz,Item:e=>{var n=e.item;return(0,Kg.jsx)(bF,{data:n,bindPlay:o,isPlay:a,isCheck:(null===i||void 0===i?void 0:i.id)===n.id,onClick:()=>t(n)},n.id)}})]})};function TF(e){var t=e.data,i=e.className,a=(0,yp.Z)(e,["data","className"]);return(0,Kg.jsx)("span",(0,u.Z)((0,u.Z)({className:hb()(jF()["music-tag-item"],i)},a),{},{children:t.name}))}function ZF(e){var t=e.onPlay,i=e.playInfo,a=e.isPlaying,o=e._isPlaying,s=(0,r.useState)(),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=(0,r.useState)(""),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(""),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,Zm.Z)(d,{wait:500}),_=b.run,j=(0,r.useState)([]),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=(0,DI.ZP)(Kz,{manual:!0}),C=Z.run,N=Z.data,S=void 0===N?[]:N;return(0,r.useEffect)((()=>{C({filter_id:"1230860"})}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(wF,{onChange:_}),(0,Kg.jsxs)("div",{className:jF()["music-tags"],style:{marginTop:18},children:[(0,Kg.jsx)("span",{className:jF()["music-tag-label"],children:"\u7c7b\u578b\uff1a"}),(0,Kg.jsx)(TF,{data:{name:"\u5168\u90e8",id:""},className:hb()({[jF().active]:!x}),onClick:()=>{h(""),y(""),T([])}}),S.map((e=>(0,Kg.jsx)(TF,{data:e,className:hb()({[jF().active]:e.id===x}),onClick:()=>{h(e.id),y(e.id),T([{id:e.id,name:"\u5168\u90e8"},...e.children])},children:e.name},e.id)))]}),k.length>0&&(0,Kg.jsxs)("div",{className:jF()["music-tags"],children:[(0,Kg.jsx)("span",{className:jF()["music-tag-label"],children:"\u98ce\u683c\uff1a"}),(0,Kg.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:16,flex:1},children:[...k].map((e=>(0,Kg.jsx)(TF,{className:hb()({[jF().active]:e.id===m}),data:e,onClick:()=>{h(e.id)},children:e.name},e.id)))})]}),(0,Kg.jsx)(vF,{request:Yz,param:{keyword:c,filter_id:m||"1230862,1230863,1230861"},Item:e=>{var n=e.item,r=(0,u.Z)({id:n.gid,preview:n.url,file_type:"mp3",total_time:n.duration},n);return(0,Kg.jsx)(bF,{data:r,bindPlay:o,isPlay:a,isCheck:(null===i||void 0===i?void 0:i.id)===n.gid,onClick:()=>t(r)},n.id)}})]})}function CF(){var e=(0,r.useState)(),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1];function d(e){a(e),c(!0)}function u(){a(void 0),c(!1)}return(0,Kg.jsxs)("div",{className:jF().musicPanel,children:[(0,Kg.jsxs)(YP.Z,{children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u97f3\u4e50",children:(0,Kg.jsx)(kF,{onPlay:d,_isPlaying:c,isPlay:l,playInfo:i})},"music"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u97f3\u6548",children:(0,Kg.jsx)(ZF,{onPlay:d,_isPlaying:c,isPlay:l,playInfo:i})},"effect")]}),i&&(0,Kg.jsx)(gF,{data:i,bindPlay:c,onCancel:u,isPlay:l})]})}function NF(){return bp.g.get("/creator-api/resource/mix-role")}function SF(e){return bp.g.get("/creator-api/resource/lottie-role?class_id=".concat(e.class_id))}var IF=i(76025),AF=i.n(IF),PF=e=>{var t=e.i,i=e.index,a=e=>{var t=(0,u.Z)({width:300,height:300,resId:e.id,rt_preview_url:e.preview,preview_url:e.preview,rt_url:e.sample},e);Tg({meta:{type:"lottie"},attribute:t})};return(0,Kg.jsxs)("div",{className:hb()({[AF().rolePopoverWarpItem]:!0,[AF().rolePopoverWarpItem4]:(i+1)%4===0}),children:[(0,Kg.jsx)("div",{className:AF().rolePopoverWarpItemImg,onClick:()=>a(t),children:(0,Kg.jsx)(GE,{path:t.sample,preview:t.preview})}),(0,Kg.jsx)("div",{className:AF().rolePopoverWarpItemName,children:t.title})]})},MF=PF,EF=e=>{var t=e.title,i=e.bindClickMore,a=e.data,n=e.isMore,r=e.id,o=e.buttonShow,s=VI(),l=s.updateRoleMoreName,c=e=>(0,Kg.jsxs)("div",{className:AF().rolePopoverWarp,children:[(0,Kg.jsx)("div",{className:AF().rolePopoverWarpTitle,children:e.class_name}),(0,Kg.jsx)("div",{className:AF().rolePopoverWarpContent,children:e.sub_list.map(((e,t)=>(0,Kg.jsx)(MF,{i:e,index:t},e.id)))})]});return(0,Kg.jsxs)("div",{className:hb()(AF().simpleShow,{[AF().moreShow]:n}),children:[(0,Kg.jsxs)("div",{className:AF().simpleShowTop,children:[(0,Kg.jsx)("div",{className:AF().simpleShowTopLeft,children:t}),o&&(0,Kg.jsx)("div",{className:AF().simpleShowTopRight,onClick:()=>{!n&&l({id:r,class_name:t}),i(n?"role":"role-more")},children:n?"<\u8fd4\u56de":"\u67e5\u770b\u66f4\u591a>"})]}),(0,Kg.jsx)("div",{className:AF().simpleShowContent,children:a.map((e=>(0,Kg.jsx)(tE.Z,{content:c(e),placement:"rightBottom",overlayClassName:AF().rolePopover,children:(0,Kg.jsx)("div",{className:AF().item,children:(0,Kg.jsx)("img",{src:e.preview,alt:"",style:{width:"100%",height:"100%"}})})},e.id)))})]})},LF=EF,DF=e=>{var t=e.getMore,i=(0,dx.Z)({roleArr:[]}),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=QI(),c=l.width,d=(0,r.useMemo)((()=>c>860?7:c>760?6:c>650?5:4),[c]),u=(0,DI.ZP)(NF,{manual:!0,onSuccess:e=>{var t=e;s({roleArr:t})},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),p=u.run;return(0,r.useEffect)((()=>{p()}),[]),(0,Kg.jsx)("div",{className:AF().RolePageWarp,children:o.roleArr.map((e=>(0,Kg.jsx)(LF,{title:e.class_name,bindClickMore:t,id:e.id,data:null===e||void 0===e?void 0:e.sub_list.slice(0,d),isMore:!1,buttonShow:(null===e||void 0===e?void 0:e.sub_list.length)>d},e.id)))})},RF=DF,zF=e=>{var t=e.getMore,i=VI(),a=i.roleMoreName,o=(0,dx.Z)({imageArr:[]}),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,DI.ZP)(SF,{manual:!0,onSuccess:e=>{var t=e;c({imageArr:t})},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),u=d.run;return(0,r.useEffect)((()=>{c({imageArr:[]}),u({class_id:null===a||void 0===a?void 0:a.id})}),[a]),(0,Kg.jsx)("div",{className:AF().RolePageWarp,children:(0,Kg.jsx)(LF,{title:null===a||void 0===a?void 0:a.class_name,bindClickMore:t,data:l.imageArr,buttonShow:!0,isMore:!0})})},FF=(0,r.memo)(zF);function OF(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageSize:10};return bp.g.get("/creator-api/resource/mix-material",{params:e})}function BF(e){var t=e.type,i=(0,yp.Z)(e,["type"]);return bp.g.get("/creator-api/resource/material-".concat(t,"?").concat((0,jp.stringify)(i)))}function WF(e){switch(e.type){case"png":return bp.g.get("/label-api/material-png");case"lottie":return bp.g.get("/label-api/material-lottie");case"video":return bp.g.get("/label-api/material-video");case"shape":return bp.g.get("/editor/shape-label-list");case"td":return bp.g.get("/creator-api/search_labels/1230825");default:return new Promise((e=>{e(1)}))}}function VF(){return bp.g.get("/designer-editor/asset-label-list")}function UF(e){return bp.g.get("/editor/asset-list?page=".concat(null===e||void 0===e?void 0:e.page,"&pageSize=").concat(null===e||void 0===e?void 0:e.pageSize,"&search_type=").concat(null===e||void 0===e?void 0:e.type,"&class_id=").concat(null===e||void 0===e?void 0:e.class_id))}function GF(){return bp.g.get("/editor/asset-list?page=1&pageSize=30&class_id=2062&keyword=")}var XF=(e,t)=>{t="mask"===e.asset_type?"mask":t;var i,a=t;return"gif"===t||"video"===t?(a="videoE",i={rt_url:e.sample,rt_preview_url:e.preview,rt_frame_file:e.frame_file,rt_total_frame:e.total_frame,rt_total_time:e.duration,isLoop:!0}):"lottie"===t?(a="lottie",i=(0,u.Z)({width:e.width,height:e.height,resId:e.id,rt_preview_url:e.preview,rt_url:e.sample},e)):"shape"===t||"svg"===t?(a="SVG",i={SVGUrl:e.sample||e.preview,source_key:e.source_key,rt_preview_url:e.sample||e.preview}):"mask"===t?(a="mask",i={SVGUrl:e.svg_preview,source_key:e.source_key,picUrl:e.preview,rt_preview_url:e.preview}):(a="png"===t?"image":"pic",i=(0,u.Z)({picUrl:e.preview,rt_preview_url:e.preview},e)),{type:a,attribute:(0,u.Z)({resId:"td"===t?e.gid:e.id,width:e.width,height:e.height},i)}};function qF(e){var t=e.style,i=e.src,a=e.poster,o=e.type,s=e.name,l=e.active,c=e.icon,d=void 0===c?(0,Kg.jsx)(XP.Z,{}):c,v=e.attribute,h=(e.defaultBackground,e.previewNode),f=e.isBackground,g=void 0!==f&&f,x=e.children,y=e.meta,b=(0,r.useState)(!1),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=(0,r.useState)(!1),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=Lw(),S=N.template;function I(){return A.apply(this,arguments)}function A(){return A=(0,p.Z)(m().mark((function e(){var t,i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(w(!0),!g){e.next=13;break}if(!S.backgroundAsset){e.next=7;break}return e.next=5,dw({assets:[(0,u.Z)((0,u.Z)({type:o,isBackground:!0},v),qv(v))],pageTime:v.rt_total_time||3e3,index:Du(S.id)+1});case 5:e.next=11;break;case 7:return t=Math.min(S.videoInfo.endTime,v.rt_total_time),e.next=10,Tg({meta:{type:o,isBackground:g},attribute:(0,u.Z)((0,u.Z)({},v),{},{startTime:0,endTime:t})});case 10:xw(t,Du(S.id));case 11:e.next=17;break;case 13:return i={},["video","videoE"].includes(o)&&(i=mm(v.rt_total_time)),e.next=17,Tg({meta:(0,u.Z)({type:o},y),attribute:(0,u.Z)((0,u.Z)({},v),i)});case 17:w(!1);case 18:case"end":return e.stop()}}),e)}))),A.apply(this,arguments)}function P(){return M.apply(this,arguments)}function M(){return M=(0,p.Z)(m().mark((function e(){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return C(!0),e.next=3,Ng({params:{meta:{type:o,isBackground:g},attribute:v},asset:S.backgroundAsset});case 3:C(!1);case 4:case"end":return e.stop()}}),e)}))),M.apply(this,arguments)}return(0,Kg.jsx)(hz,{type:o,previewNode:h,src:"lottie"===o?v.rt_url:i,poster:v.rt_preview_url,children:(0,Kg.jsxs)(mL,{type:o,data:{meta:{type:o},attribute:v},style:t,className:hb()("materialItem",{materialItemActive:l}),children:[x,["videoE","lottie"].includes(o)&&(0,Kg.jsxs)(Kg.Fragment,{children:[a&&(0,Kg.jsx)(mz,{src:a}),v.rt_total_time>0&&(0,Kg.jsx)("div",{className:"video-duration",children:Th(parseInt("".concat(v.rt_total_time/1e3),10))})]}),i&&"videoE"!==o?(0,Kg.jsx)(mz,{src:i}):s&&(0,Kg.jsx)("div",{className:"materialItemName",children:s}),g&&S.backgroundAsset&&(Z?(0,Kg.jsx)(uN.Z,{className:"materialItemLoading",spin:!0}):(0,Kg.jsx)("span",{className:"materialItemAdd",style:{left:6},onClick:P,children:(0,Kg.jsx)(iP,{type:"iconexchange"})})),j?(0,Kg.jsx)(uN.Z,{className:"materialItemLoading",spin:!0}):(0,Kg.jsx)("span",{className:"materialItemAdd",onClick:I,children:d})]})})}var HF=(0,hp.Pi)(qF),YF=[{key:"icon",title:"\u4e8c\u7ef4\u7801",mapKey:"preview",classify:!0},{key:"shape",title:"\u77e2\u91cf\u56fe\u5f62",mapKey:"preview",classify:!0},{key:"td",title:"3D\u5143\u7d20",mapKey:"preview",classify:!0},{key:"png",title:"PNG\u5143\u7d20",mapKey:"preview",classify:!0},{key:"lottie",title:"lottie\u52a8\u56fe",mapKey:"sample",classify:!0},{key:"gif",title:"GIF\u8868\u60c5\u5305",mapKey:"sample"},{key:"video",title:"\u89c6\u9891\u52a8\u56fe",mapKey:"sample",classify:!0}],KF={icon:{title:"\u4e8c\u7ef4\u7801",mapKey:"preview",url:"/creator-api/resource/mix-material"},shape:{title:"\u77e2\u91cf\u56fe\u5f62",mapKey:"preview",url:"/label-api/material-svg"},td:{title:"3D\u5143\u7d20",mapKey:"preview",url:"/resource-api/sub-filters?filter_id=1230825"},png:{url:"/label-api/material-png",title:"PNG\u5143\u7d20",mapKey:"preview"},lottie:{url:"/label-api/material-lottie",title:"lottie\u52a8\u56fe",mapKey:"preview"},gif:{title:"GIF\u8868\u60c5\u5305",mapKey:"sample"},video:{url:"/label-api/material-video",title:"\u89c6\u9891\u52a8\u56fe",mapKey:"sample"},image:{title:"\u56fe\u7247",mapKey:"preview"}},QF={icon:{title:"\u4e8c\u7ef4\u7801",mapKey:"preview",url:"/creator-api/resource/mix-material"},shape:{url:"/creator-api/resource/material-shape",title:"\u77e2\u91cf\u56fe\u5f62",mapKey:"preview"},td:{url:"/creator-api/resource/material-td",title:"3D\u5143\u7d20",mapKey:"preview"},png:{url:"/creator-api/resource/material-png",title:"PNG\u5143\u7d20",mapKey:"preview"},lottie:{url:"/creator-api/resource/material-lottie",title:"lottie\u52a8\u56fe",mapKey:"preview"},gif:{url:"/creator-api/resource/material-gif",title:"GIF\u8868\u60c5\u5305",mapKey:"sample"},video:{url:"/creator-api/resource/material-video",title:"\u89c6\u9891\u52a8\u56fe",mapKey:"sample"},image:{url:"/creator-api/resource/material-image",title:"\u56fe\u7247",mapKey:"preview"},svg:{url:"/creator-api/resource/material-svg",title:"svg",mapKey:"preview"},mask:{url:"/creator-api/resource/material-mask",title:"\u8499\u7248",mapKey:"preview"}},JF=i(94171),$F=i.n(JF),eO=e=>(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:$F().moreCmp},e),{},{children:"\u67e5\u770b\u66f4\u591a>"})),tO=e=>{var t=e.onCallBack,i=e.bindClickTag,a=(0,DI.ZP)(OF),o=a.data,s=(0,r.useState)([]),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=["#31BD80","#3F73FF","#2BAEFB","#FA802C"];return(0,r.useEffect)((()=>{VF().then((e=>{0===(null===e||void 0===e?void 0:e.code)&&d(null===e||void 0===e?void 0:e.data)}))}),[]),(0,Kg.jsxs)("div",{style:{overflowY:"auto",padding:"0 14px 0px 20px",height:"100%"},children:[(0,Kg.jsx)("div",{className:$F().tabWarp,children:c.map(((e,t)=>(0,Kg.jsx)("div",{className:$F().tabItem,style:{background:p[t]},onClick:()=>i(e),children:e.class_name},e.id)))}),(0,Kg.jsx)("div",{className:$F().main,children:o&&YF.map((e=>{var i;return(0,Kg.jsx)(dL,{title:e.title,extraContent:(0,Kg.jsx)(eO,{onClick:()=>{t(e.key)}}),contentStyle:{gridTemplateColumns:"repeat(auto-fill,minmax(98px,1fr))"},children:((null===(i=o[e.key])||void 0===i?void 0:i.items)||[]).map(((t,i)=>i>3&&"icon"===e.key?(0,Kg.jsx)(Kg.Fragment,{}):(0,r.createElement)(HF,(0,u.Z)((0,u.Z)({},XF(t,e.key)),{},{key:t.id,style:{width:"auto",height:100},src:t[e.mapKey],poster:t.preview}))))},e.key)}))})]})},iO=tO,aO=i(79050),nO=i.n(aO);function rO(e){var t=e.label,i=e.active,a=(0,yp.Z)(e,["label","active"]);return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:hb()("xiudd-designer-tag",{"xiudd-designer-tag-active":i})},a),{},{children:t}))}var oO=e=>{var t=e.type,i=e.tag,a=e.changeTag,o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,DI.ZP)(WF,{manual:!1,onError(){}}),u=d.data,p=void 0===u?[]:u,v=d.run,m=!l&&p.length>5?p.slice(0,4):p;return(0,r.useEffect)((()=>{v({type:t})}),[t]),(0,Kg.jsx)(Kg.Fragment,{children:p.length>0&&(0,Kg.jsxs)("div",{className:nO().searchCatalogView,children:[(0,Kg.jsx)(rO,{label:"\u5168\u90e8",onClick:()=>a(""),active:""===i}),m.map((e=>(0,Kg.jsx)(rO,{label:e.tagname||e.class_name,onClick:()=>a(e.id),active:i===e.id},e.id))),p.length>5&&(0,Kg.jsx)(rO,{label:l?"\u6536\u8d77":"\u67e5\u770b\u5168\u90e8",onClick:()=>c(!l)})]})})},sO=(0,r.memo)(oO),lO=e=>{var t=e.search,i=e.type,a=void 0===i?"shape":i,o=e.tag,s=void 0!==o&&o,l=e.request,c=e.class_id,d=(0,r.useState)(""),p=(0,n.Z)(d,2),v=p[0],m=p[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[s&&(0,Kg.jsx)(sO,{type:a,changeTag:m,tag:v}),(0,Kg.jsx)(yE,{request:l||BF,params:{type:a,pageSize:40,keyword:t,class_id:null!==c&&void 0!==c?c:v},wrapStyle:{flex:1,height:0},skeleton:{style:{padding:"0 18px 0 18px",display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill,minmax(98px,1fr))",alignContent:"flex-start"}},children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,r.createElement)(HF,(0,u.Z)((0,u.Z)({},XF(e,a)),{},{style:{width:"auto",height:98},key:e.id,src:e.preview,poster:e.preview}))))})}})]})},cO=lO,dO=YP.Z.TabPane,uO=e=>{var t=e.search,i=(0,r.useState)("shape"),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,r.useState)(!1),c=(0,n.Z)(l,2),d=c[0],u=c[1];return(0,Kg.jsx)(YP.Z,{defaultActiveKey:o,onChange:s,className:nO().searchPart,tabBarExtraContent:KF[o].url&&(0,Kg.jsxs)("div",{className:nO().searchCatolag,onClick:()=>{u(!d)},children:["\u5206\u7c7b\u7b5b\u9009",d?(0,Kg.jsx)(Mz.Z,{}):(0,Kg.jsx)(Ez.Z,{})]}),children:YF.map((e=>(0,Kg.jsx)(dO,{tab:e.title,children:(0,Kg.jsx)(cO,{type:e.key,tag:d,search:t})},e.key)))})},pO=(0,r.memo)(uO),vO=i(54825),mO=i.n(vO),hO=e=>{var t=e.searchType,i=e.tagObj,a=e.onCallBack;return(0,Kg.jsxs)("div",{className:mO().singer,children:[(0,Kg.jsxs)("div",{className:mO().header,children:[(0,Kg.jsx)("span",{className:mO().moldTitle,children:(null===i||void 0===i?void 0:i.class_name)||QF[t].title}),(0,Kg.jsxs)("span",{className:mO().goback,onClick:()=>a(t),children:["<","\u8fd4\u56de"]})]}),(0,Kg.jsx)(cO,{type:(null===i||void 0===i?void 0:i.asset_type)||t,tag:QF[t].url,request:(null===i||void 0===i?void 0:i.asset_type)&&UF,class_id:null===i||void 0===i?void 0:i.id})]})},fO=hO,gO=i(24433),xO=i.n(gO),yO=[{key:"main",component(e){return(0,Kg.jsx)(iO,(0,u.Z)({},e))}},{key:"search",component(e){return(0,Kg.jsx)(pO,(0,u.Z)({},e))}},{key:"singer",component(e){return(0,Kg.jsx)(fO,(0,u.Z)({},e))}}],bO=()=>{var e=(0,r.useState)("main"),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(""),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)("png"),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,r.useState)(null),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=()=>{a("search")},y=e=>{c(e.target.value),a("search")},b=e=>{g(e),a("singer")},_=e=>{"main"===i?(g(null),v(e),a("singer")):(c(""),a("main"))};return(0,Kg.jsxs)("div",{className:xO().material,children:[(0,Kg.jsx)("div",{className:xO().materialHeader,children:(0,Kg.jsx)(VP.Z,{className:xO().materialInput,value:l,placeholder:"\u641c\u7d22\u60a8\u9700\u8981\u7684\u7d20\u6750",prefix:(0,Kg.jsx)(iP,{type:"iconshipinhaosousuo",style:{color:"rgba(39, 39, 49, 1)",fontSize:15}}),suffix:(""!==l&&"singer"!==i||"search"===i)&&(0,Kg.jsx)("div",{className:xO().suffix,onClick:()=>{c(""),a("main")},children:(0,Kg.jsx)(EM.Z,{})}),onChange:y,onPressEnter:x,onKeyDown:Ph})}),yO.map((e=>(0,Kg.jsx)(eM,{visible:i===e.key,className:xO().lazyLoad,children:e.component&&e.component({activeMenu:i,search:l,searchType:p,tagObj:f,eleType:"",onCallBack:_,bindClickTag:b})},e.key)))]})},_O=bO,jO=()=>(0,Kg.jsx)(_O,{}),wO=jO,kO=i(1897),TO=i.n(kO),ZO=e=>{var t=e.colors,i=F_(),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=DL(),c=l.editFlag,d=l.list,p=l.changeList,v=l.getEffectColor,m=l.changeAngle,h=(0,r.useState)("color"),f=(0,n.Z)(h,2),g=(f[0],f[1]),x=[];if(t&&Object.keys(t).forEach((e=>{var i=t[e],a=i.color,n=i.id,r=void 0===n?"":n,o=i.color;"none"!==e&&(null!==a&&void 0!==a&&a.colorStops?x.push({type:"gradient",color:i,key:e,id:r,background:ML(a)}):x.push({type:"color",color:i,key:e,id:r,background:o}))})),0===x.length)return null;var y=e=>{var t=PL(e);m(t.angle),p(t.list)};return(0,r.useEffect)((()=>{if(d.length>0){var e=v();e&&s((0,u.Z)((0,u.Z)({},o),{},{[Object.keys(o)[0]]:{id:Object.keys(o)[0],color:{type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle}}}))}}),[c]),(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u989c\u8272"}),(0,Kg.jsx)("div",{className:TO().basicRowContent,style:{flexWrap:"wrap"},children:x.map(((e,i)=>(0,Kg.jsx)(fD,{placement:"topRight",isDesigner:!0,color:k(e.color.color),colorPickupChange:i=>{s((0,u.Z)((0,u.Z)({},t),{},{[e.key]:{id:e.id,color:Oh(i)}}))},gradientColorChange:i=>{s((0,u.Z)((0,u.Z)({},t),{},{[e.key]:{id:e.id,color:{type:"linear",colorStops:i.colorStops,coords:i.coords,angle:i.angle}}}))},changeMockGradient:y,children:(0,Kg.jsx)("div",{onClick:()=>{g(e.type)},className:TO().chooseColorGradient,style:{background:e.background},children:e.color.background})},i)))})]})},CO=(0,hp.Pi)(ZO),NO=e=>{var t=e.name,i=e.icon,a=e.active,n=e.onchange;return(0,Kg.jsxs)("div",{className:hb()(TO().flipItem,{[TO().flipItemSelectd]:a}),onClick:n,children:[(0,Kg.jsx)(iP,{type:i,style:{marginRight:14,fontSize:20}}),t]})},SO=()=>{var e=R_(),t=(0,n.Z)(e,2),i=t[0],a=t[1],r=z_(),o=(0,n.Z)(r,2),s=o[0],l=o[1],c=K_(),d=c.endClip,u=e=>{d(),"horizontal"===e?a(!i):l(!s)};return(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u7ffb\u8f6c"}),(0,Kg.jsxs)("div",{className:TO().basicRowContent,children:[(0,Kg.jsx)(NO,{name:"\u6c34\u5e73\u7ffb\u8f6c",icon:"iconshuipingfanzhuan",active:i,onchange:()=>{u("horizontal")}}),(0,Kg.jsx)(NO,{name:"\u5782\u76f4\u7ffb\u8f6c",icon:"iconchuizhifanzhuan",active:s,onchange:()=>{u("vertical")}})]})]})},IO=(0,hp.Pi)(SO),AO=()=>{var e=P_(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u4e0d\u900f\u660e\u5ea6"}),(0,Kg.jsx)("div",{className:TO().basicRowContent,children:(0,Kg.jsx)(bR,{defaultValue:i,onChange:e=>{a(e)}})})]})},PO=(0,hp.Pi)(AO),MO=()=>{var e=aj(),t=e.svgStroke,i=e.changeColor;return(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u63cf\u8fb9\u989c\u8272"}),(0,Kg.jsx)("div",{className:TO().basicRowContent,style:{flexWrap:"wrap"},children:(0,Kg.jsx)(tE.Z,{trigger:"click",overlayClassName:TO().color,content:(0,Kg.jsx)("div",{className:TO().colorPopover,children:(0,Kg.jsx)(qL.xS,{width:280,color:null===t||void 0===t?void 0:t.stroke,onChange:e=>{i(e.rgb)}})}),children:(0,Kg.jsx)("div",{className:TO().chooseColorGradient,style:{background:Oh(null===t||void 0===t?void 0:t.stroke)}})})})]})},EO=(0,hp.Pi)(MO),LO=(i(97140),i(79596)),DO=()=>{var e=aj(),t=e.changeDashStyle,i=e.svgStroke,a=[(0,fb.Sx)("/svg/svgStrokes/2.svg"),(0,fb.Sx)("/svg/svgStrokes/3.svg"),(0,fb.Sx)("/svg/svgStrokes/4.svg"),(0,fb.Sx)("/svg/svgStrokes/6.svg"),(0,fb.Sx)("/svg/svgStrokes/5.svg"),(0,fb.Sx)("/svg/svgStrokes/7.svg"),(0,fb.Sx)("/svg/svgStrokes/1.svg")];return(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u63cf\u8fb9\u6837\u5f0f"}),(0,Kg.jsx)(LO.Z,{placeholder:"\u9009\u62e9\u8fb9\u6846\u6837\u5f0f",value:null===i||void 0===i?void 0:i.strokeDashType,onChange:e=>{console.log("val",e),t(e)},dropdownClassName:"outlineStyleSelect",dropdownStyle:{background:"#1C1C26"},children:a.map(((e,t)=>(0,Kg.jsx)(LO.Z.Option,{value:t,children:(0,Kg.jsx)("img",{src:e,alt:"",style:{width:"100%"}})},e)))})]})},RO=(0,hp.Pi)(DO),zO=()=>{var e=aj(),t=e.svgStroke,i=e.changeStrokeWidth,a=Pw(),n=(null===a||void 0===a?void 0:a.attribute)||{},o=n.width,s=n.height,l=(0,r.useMemo)((()=>Math.floor(Math.min(o,s)/2*.5)||50),[o,s]);return(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u63cf\u8fb9\u5bbd\u5ea6"}),(0,Kg.jsx)("div",{className:TO().basicRowContent,children:(0,Kg.jsx)(bR,{step:1,min:0,max:l,defaultValue:null===t||void 0===t?void 0:t.strokeWidth,value:null===t||void 0===t?void 0:t.strokeWidth,onChange:e=>{i(e)}})})]})},FO=(0,hp.Pi)(zO),OO=()=>{var e=tj(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsxs)("div",{className:TO().basicRow,children:[(0,Kg.jsx)("div",{className:TO().basicRowName,children:"\u97f3\u91cf"}),(0,Kg.jsx)("div",{className:TO().basicRowContent,children:(0,Kg.jsx)(bR,{defaultValue:null!==i&&void 0!==i?i:0,onChange:e=>{a(e)}})})]})},BO=(0,hp.Pi)(OO),WO=()=>{var e,t,i,a,n=Pw();return(0,Kg.jsxs)("div",{className:"xdd-designer-sider-panel-padding",children:[(0,Kg.jsx)(IO,{}),(0,Kg.jsx)(PO,{}),"SVG"===(null===n||void 0===n?void 0:n.meta.type)&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(CO,{colors:null===n||void 0===n||null===(e=n.attribute)||void 0===e?void 0:e.colors}),(null===(t=n.attribute)||void 0===t?void 0:t.svgStrokes)&&1===(null===(i=n.attribute)||void 0===i?void 0:i.svgStrokes.length)&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(EO,{}),(0,Kg.jsx)(RO,{}),(0,Kg.jsx)(FO,{})]})]}),n&&(["video","videoE"].includes(null===n||void 0===n?void 0:n.meta.type)||ai(n)&&n.assets.length>0&&["video","videoE"].includes(null===(a=n.assets[0])||void 0===a?void 0:a.meta.type))&&(0,Kg.jsx)(BO,{})]})},VO=(0,hp.Pi)(WO),UO=i(2138);function GO(e){return bp.g.get("/api/del-user-asset?id=".concat(e))}function XO(e,t){return bp.g.get("/api/upload-oss-form?filename=".concat(e,"&value_hint=",0,"&orientationFlag=").concat(t))}function qO(e,t,i){return bp.g.get("/file/get-logo-up-params?filename=".concat(e,"&orientationFlag=").concat(t,"&file_md5=").concat(i))}function HO(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0";return bp.g.get("/file/get-phone-up-url?folder_id=".concat(e))}function YO(){return bp.g.get("/api/check-phone-upload")}function KO(){return bp.g.get("/editor/asset-label-list")}function QO(e){return null!==e&&void 0!==e&&e.keyword,bp.g.get("/editor/asset-list?".concat((0,jp.stringify)(e)))}function JO(e){return bp.g.get("/home-api/asset-list?kid_1=".concat(e.kid||"","&label_id=").concat(e.labelId||"","&is_portrait=").concat(e.isPortrait||"","&page=").concat(e.page||1,"&pageSize=").concat(e.pageSize||30,"&keyword=").concat(e.keyword||"","&is_hot=").concat(e.isHot||"","&is_new=").concat(e.isNew||"","&is_elite=").concat(e.isElite||""))}function $O(e){return bp.g.post("/editor/set-history-record",{body:"asset_id=".concat(e.id,"&asset_type=").concat(e.asset_type),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function eB(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,pageSize:3};return bp.g.get("/editor/asset-list?".concat((0,jp.stringify)(e),"&search_type=used"))}function tB(e){return bp.g.get("/editor/mask-list?page=".concat(e,"&pageSize=30"))}function iB(){return bp.g.get("/matting/get-pkg-info")}function aB(e){return bp.g.post("/matting/check-matting",{data:"ids=".concat(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function nB(e,t){return bp.g.post("/matting/editor-matting",{data:"file_id=".concat(e,"&u_file_id=").concat(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}var rB=()=>{var e=du(),t=e.inMask,i=e.resetMask,a=e.startMask,n=e.cancelMask,r=e.endMask,o=e=>{t||a();var i={width:e.width,height:e.height,resId:e.id,SVGUrl:e.sample,source_key:e.source_key,rt_svgString:""};UO.ZP.get(e.source_key).then((e=>{1===e.stat&&(i.rt_svgString=e.msg,Ch(i))})).catch((e=>{}))};return(0,Kg.jsxs)("div",{className:"img-cutting-view",children:[(0,Kg.jsxs)("div",{className:"img-cutting-action",children:[(0,Kg.jsx)(CS.Z,{className:"img-cutting-action-button",onClick:n,children:"\u53d6\u6d88"}),(0,Kg.jsx)(CS.Z,{className:"img-cutting-action-button",onMouseDown:()=>{i(),eu()},children:"\u91cd\u7f6e"}),(0,Kg.jsx)(CS.Z,{className:"img-cutting-action-button",onMouseDown:()=>{r(),eu()},children:"\u786e\u5b9a"})]}),(0,Kg.jsx)("div",{className:"img-cutting-list-title",children:"\u5f62\u72b6\u88c1\u526a"}),(0,Kg.jsx)(yE,{request:tB,beforeLoadData:e=>e.page,formatResult:e=>{var t,i;return{pageTotal:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.pageTotal,list:null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.items}},wrapStyle:{flex:1,height:0,paddingBottom:16},skeleton:{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill,minmax(80px,1fr))"}},children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)("div",{className:"cutting-shape-box",onClick:()=>o(e),children:(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",background:"url(".concat(e.preview,") center / contain no-repeat")}})},e.id)))})}})]})},oB=(0,hp.Pi)(rB),sB=()=>bp.g.get("/api/filters-list"),lB=e=>{var t=e.colon,i=void 0===t||t,a=e.value,n=e.onChange,o=e.onAfterChange,s=e.inputNumber,l=void 0!==s&&s,c=e.label,d=e.style,p=e.min,v=void 0===p?0:p,m=e.max,h=void 0===m?100:m,f=(0,yp.Z)(e,["colon","value","onChange","onAfterChange","inputNumber","label","style","min","max"]),g=(0,r.useRef)();return(0,Kg.jsxs)("div",{className:"cover-slider",style:d,onKeyDown:Ph,children:[c&&(0,Kg.jsxs)("div",{className:"cover-slider-label",children:[c,i?"\uff1a":""]}),(0,Kg.jsx)(TP.Z,(0,u.Z)({ref:g,style:{},min:v,max:h,value:a||0,onAfterChange:e=>{g.current&&g.current.blur(),o&&o(e)},onChange:n},f)),l&&(0,Kg.jsx)(zM.Z,{size:"small",min:v,max:h,value:a,onChange:n})]})},cB=(0,r.memo)(lB);function dB(){var e,t,i=xu(),a=i&&Kh(i),n=null===a||void 0===a||null===(e=a.attribute.filters)||void 0===e?void 0:e.resId,r=null===a||void 0===a||null===(t=a.attribute.filters)||void 0===t?void 0:t.strong,o=(0,DI.ZP)(sB,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),s=o.data,l=void 0===s?[]:s;function c(e){cj({target:a,params:(0,u.Z)((0,u.Z)({},e.filters),{},{resId:e.id}),replace:!0,save:!0})}return(0,Kg.jsxs)("div",{className:"filters",children:[(0,Kg.jsx)("div",{className:"filter-list",children:l.map((e=>(0,Kg.jsxs)(dL,{title:e.name,children:["\u57fa\u7840"===e.name&&(0,Kg.jsxs)("div",{className:"filter-item",children:[(0,Kg.jsx)("img",{width:"100%",src:"".concat(fb.PP,"/img/img_filter/0.jpg"),alt:"\u539f\u8272",className:hb()({"filter-item-active":"origin_"===n}),onClick:()=>{cj({target:a,params:{resId:"origin_"},replace:!0,save:!0})}}),(0,Kg.jsx)("div",{className:"filter-name",children:"\u539f\u8272"})]}),e.items.map((e=>(0,Kg.jsxs)("div",{className:"filter-item",children:[(0,Kg.jsx)("img",{width:"100%",src:e.preview_url,alt:e.name,className:hb()({"filter-item-active":n===e.id}),onClick:()=>c(e)}),(0,Kg.jsx)("div",{className:"filter-name",children:e.name})]},e.id)))]},e.name)))}),(0,Kg.jsx)("div",{className:"filter-parameter",children:(0,Kg.jsx)(cB,{label:"\u5f3a\u5ea6",value:Math.round(100*(null!==r&&void 0!==r?r:1)),step:1,onChange:e=>{cj({target:a,params:(0,u.Z)((0,u.Z)({},null===a||void 0===a?void 0:a.attribute.filters),{},{strong:e/100})})},inputNumber:!0,tooltipVisible:!1})})]})}var uB=(0,hp.Pi)(dB),pB=[{key:"blur",range:[0,1],sliderRange:[0,100],label:"\u6a21\u7cca"},{key:"brightness",range:[-1,1],sliderRange:[-50,50],label:"\u4eae\u5ea6"},{key:"contrast",range:[-1,1],sliderRange:[-50,50],label:"\u5bf9\u6bd4\u5ea6"},{key:"gamma-r",range:[.01,1.99],sliderRange:[-50,50],label:"\u504f\u8272"},{key:"gamma-g",range:[.01,1.99],sliderRange:[-50,50],label:"\u8272\u8c03"},{key:"gamma-b",range:[.01,1.99],sliderRange:[-50,50],label:"\u6e29\u5ea6"},{key:"hue",range:[-2,2],sliderRange:[-50,50],label:"\u8272\u76f8"},{key:"saturate",range:[-1,1],sliderRange:[-50,50],label:"\u9971\u548c\u5ea6"},{key:"sharpen",range:[0,2],sliderRange:[0,100],label:"\u9510\u5316"},{key:"strong",range:[0,1],sliderRange:[0,100],label:"\u5f3a\u5ea6"}];function vB(){var e=(0,r.useRef)(!1),t=xu();if(!t)return null;var i=t&&Kh(t),a=i.attribute.filters,o=(0,u.Z)((0,u.Z)({},x),a);return(0,Kg.jsxs)("div",{className:"image-controller",children:[(0,Kg.jsx)("div",{className:"image-controller-list",style:{color:"#fff",fontSize:12},children:pB.map((t=>{var a=(0,n.Z)(t.range,2),r=a[0],s=a[1],l=(0,n.Z)(t.sliderRange,2),c=l[0],d=l[1],u=o[t.key],p=Math.round((u-r)/(s-r)*(d-c)+c);return(0,Kg.jsx)(HR,{value:Math.min(p,d),label:t.label,className:t.key,onChange:a=>{var n=Math.floor(1e4*((a-c)/(d-c)*(s-r)+r))/1e4,o={[t.key]:n,resId:""};cj({target:i,params:o}),e.current=!0},min:c,max:d,onAfterChange:()=>{e.current=!1}},t.key)}))}),(0,Kg.jsx)("div",{className:"image-controller-bottom",children:(0,Kg.jsx)("div",{className:"image-controller-reset",onClick:()=>cj({target:i,params:(0,u.Z)((0,u.Z)({},x),{},{resId:""}),save:!0}),children:"\u91cd\u7f6e"})})]})}var mB=(0,hp.Pi)(vB);function hB(e){var t,i=e.bgaId,a=e.onClick,n=e.active,o=(0,r.useRef)(null),s=(null===(t=vp[i])||void 0===t?void 0:t.name)||"\u65e0\u52a8\u753b";return(0,Kg.jsxs)("div",{className:"bgAni-item",onClick:()=>{a(i)},children:[(0,Kg.jsx)("div",{className:hb()("item-part",{active:n===i,"no-animation":"\u65e0\u52a8\u753b"===s}),children:"\u65e0\u52a8\u753b"===s?(0,Kg.jsx)(iP,{type:"iconIcon-jinyong"}):(0,Kg.jsx)("img",{onMouseEnter:()=>{o.current&&(o.current.src=(0,fb.Sx)("/image/backgroundAnimation/".concat(i,".gif")))},onMouseLeave:()=>{o.current&&(o.current.src=(0,fb.Sx)("/image/backgroundAnimation/jingtu.png"))},ref:o,src:(0,fb.Sx)("/image/backgroundAnimation/jingtu.png"),alt:""})}),(0,Kg.jsx)("p",{className:"title",children:s})]})}var fB=hB,gB=()=>{var e=Pw();return(0,Kg.jsxs)("div",{className:"bgAni-view",children:[(0,Kg.jsx)(fB,{bgaId:0,onClick:ww}),mp.map((t=>{var i,a;return(0,Kg.jsx)(fB,{bgaId:t,active:null===e||void 0===e||null===(i=e.attribute)||void 0===i||null===(a=i.bgAnimation)||void 0===a?void 0:a.id,onClick:ww},t)}))]})},xB=(0,hp.Pi)(gB),yB=()=>{var e,t=du(),i=t.startMask,a=t.inMask,o=t.endMask,s=uu(),l=s.changStatue,c=Pw(),d=(0,r.useState)("basic"),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=c&&Kh(c);(0,r.useEffect)((()=>{a||v("basic")}),[c]);var h=[{key:"basic",name:"\u57fa\u7840",show:!0,Component:VO},{key:"Cutting",name:"\u8499\u7248\u88c1\u526a",show:c&&!(null!==c&&void 0!==c&&c.meta.isBackground)&&!ti(c.parent)&&["image","pic","video","videoE"].includes(null===c||void 0===c?void 0:c.meta.type)||ai(c)&&(null===c||void 0===c||null===(e=c.assets)||void 0===e?void 0:e.length),Component:oB},{key:"animation",name:"\u52a8\u753b",show:!ti(c)&&!(null!==c&&void 0!==c&&c.meta.isBackground)&&!ti(null===c||void 0===c?void 0:c.parent),Component:sL},{key:"bgAnimation",name:"\u80cc\u666f\u52a8\u753b",show:(null===c||void 0===c?void 0:c.meta.isBackground)&&oi(c),Component:xB},{key:"filters",name:"\u6ee4\u955c",show:!(null!==c&&void 0!==c&&c.meta.isBackground)&&m&&Mt.includes(m.meta.type),Component:uB},{key:"embellish",name:"\u7f8e\u5316",show:!(null!==c&&void 0!==c&&c.meta.isBackground)&&m&&Mt.includes(m.meta.type),Component:mB},{key:"shadow",name:"\u6295\u5f71",show:!(null!==c&&void 0!==c&&c.meta.isBackground)&&!ti(c)&&!ti(null===c||void 0===c?void 0:c.parent),Component:KR}];return(0,Kg.jsx)(RM,{destroyInactiveTabPane:!0,activeKey:p,onChange:e=>{v(e),l(-1),"Cutting"===e?i():o()},children:h.map((e=>{var t=e.show,i=e.Component;return t&&(0,Kg.jsx)(MM,{tab:e.name,children:(0,Kg.jsx)(i,{})},e.key)}))})},bB=(0,hp.Pi)(yB),_B=[{key:"contrast",range:[0,200],label:"\u5bf9\u6bd4\u5ea6"},{key:"brightness",range:[0,200],label:"\u4eae\u5ea6"},{key:"saturate",range:[0,200],label:"\u9971\u548c\u5ea6"},{key:"sepia",range:[0,100],label:"\u68d5\u8910\u8272"},{key:"grayscale",range:[0,100],label:"\u7070\u5ea6"},{key:"invert",range:[0,100],label:"\u53cd\u8272"},{key:"hue",range:[0,360],label:"\u8272\u76f8"},{key:"blur",range:[0,20],label:"\u6a21\u7cca"}],jB=i(75233),wB=i.n(jB),kB={r:62,g:162,b:253,a:.5},TB=[{key:"none",label:"\u65e0"},{key:"solid",label:"\u7eaf\u8272"}],ZB=[{key:"normal",label:"\u666e\u901a\u7684"},{key:"overlay",label:"\u53e0\u52a0"},{key:"multiply",label:"\u76f8\u4e58"},{key:"screen",label:"\u6ee4\u8272"},{key:"darken",label:"\u53d8\u6697"},{key:"lighten",label:"\u53d8\u4eae"},{key:"color-dodge",label:"\u989c\u8272\u51cf\u6de1"},{key:"color-burn",label:"\u989c\u8272\u52a0\u6df1"},{key:"hard-light",label:"\u5f3a\u5149"},{key:"soft-light",label:"\u67d4\u5149"},{key:"difference",label:"\u5dee\u5f02"},{key:"exclusion",label:"\u6392\u9664"},{key:"hue",label:"\u8272\u8c03"},{key:"saturation",label:"\u9971\u548c"},{key:"color",label:"\u8272\u5f69"},{key:"luminosity",label:"\u53d1\u4eae"}],CB=()=>{var e=xu(),t=(0,r.useRef)(!1);if(!e)return null;var i=e.attribute.effectInfo,a=(0,u.Z)((0,u.Z)({},y),i),o=a.background,s=a.mixBlendMode,l=o?"solid":"none",c=t=>{var i={background:void 0};"solid"===t.target.value&&(i.background=kB,i.mixBlendMode="normal"),dj({params:i,target:e,save:!0})},d=t=>{dj({params:{mixBlendMode:t},target:e,save:!0})};return(0,Kg.jsxs)("div",{className:"image-controller",children:[(0,Kg.jsxs)("div",{className:"image-controller-list",style:{color:"#7e8792",fontSize:12},children:[(0,Kg.jsx)("div",{className:wB().title,children:"\u6ee4\u955c"}),_B.map((i=>{var r=(0,n.Z)(i.range,2),o=r[0],s=r[1],l=a[i.key];return(0,Kg.jsx)(HR,{wrapperClassName:wB().slider,value:l,label:i.label,className:i.key,onChange:a=>{var n={[i.key]:a};dj({params:n,target:e}),t.current=!0},min:o,max:s,onAfterChange:()=>{t.current&&(We("updateEffect",!0),Km("Filters3"),t.current=!1)}},i.key)})),(0,Kg.jsxs)("div",{className:wB().overlayRow,children:[(0,Kg.jsxs)("div",{className:wB().overlayColor,children:[(0,Kg.jsx)("div",{className:wB().overlayLabel,children:"\u53e0\u52a0"}),(0,Kg.jsx)(FP.ZP.Group,{onChange:c,className:wB().radioGroup,value:l,children:TB.map((e=>(0,Kg.jsx)(FP.ZP,{value:e.key,children:e.label},e.key)))})]}),"solid"===l&&o&&(0,Kg.jsxs)("div",{className:wB().overlayColor,children:[(0,Kg.jsx)("div",{className:wB().overlayLabel,children:"\u53e0\u52a0\u989c\u8272"}),(0,Kg.jsx)(tE.Z,{trigger:"click",overlayClassName:"color-picker",placement:"rightBottom",destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{style:{width:"318px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:o,onChange:t=>{dj({params:{background:t.rgb},target:e,save:!0}),Km("Shadow4")}})}),children:(0,Kg.jsx)("div",{className:wB().colorSelector,style:{backgroundColor:j(o)},onClick:()=>{Km("Shadow3")}})})]})]}),"solid"===l&&o&&(0,Kg.jsxs)("div",{className:wB().overlayColor,children:[(0,Kg.jsx)("div",{className:wB().overlayLabel,children:"\u6df7\u5408\u6a21\u5f0f"}),(0,Kg.jsx)(LO.Z,{value:s,onChange:d,className:wB().colorSelector,children:ZB.map((e=>(0,Kg.jsx)(LO.Z.Option,{value:e.key,children:e.label},e.key)))})]})]}),(0,Kg.jsxs)("div",{className:"image-controller-bottom",children:[(0,Kg.jsx)("div",{}),(0,Kg.jsx)("div",{className:"image-controller-reset",onClick:()=>{dj({params:{},target:e,replace:!0,save:!0}),Km("Filters4")},children:"\u91cd\u7f6e"})]})]})},NB=(0,hp.Pi)(CB);function SB(){return bp.g.get("/creator-api/resource/mix-image")}function IB(e){return bp.g.get("/creator-api/resource/pic-image?page=".concat(e.page,"&pageSize=").concat(e.pageSize,"&keyword=").concat(e.keyword,"&is_portrait=").concat(e.is_portrait))}function AB(e){return bp.g.get("/creator-api/resource/creative-bg-image?page=".concat(e.page,"&pageSize=").concat(e.pageSize,"&keyword=").concat(e.keyword))}function PB(e){return bp.g.get("/creator-api/resource/illustration-image?page=".concat(e.page,"&pageSize=").concat(e.pageSize,"&keyword=").concat(e.keyword))}function MB(e){return bp.g.get("/creator-api/my/image?".concat((0,jp.stringify)(e)))}function EB(e){return bp.g.get("/creator-api/my/video?".concat((0,jp.stringify)(e)))}function LB(e,t,i){return bp.g.get("/creator-api/upload/image-payload?name=".concat(e,"&type=").concat(t,"&size=").concat(i))}var DB=i(71453),RB=i.n(DB),zB="pic",FB=e=>{var t=e.item,i={width:t.width,height:t.height,resId:t.id,picUrl:t.preview,rt_preview_url:t.preview};return(0,Kg.jsx)(mL,{data:{meta:{type:zB},attribute:i},type:zB,style:{width:"100%",height:"100%"},children:(0,Kg.jsx)(HF,{type:zB,src:t.preview,attribute:{width:t.width,height:t.height,resId:t.id,picUrl:t.preview,rt_preview_url:t.preview}})})},OB=(0,hp.Pi)(FB),BB=e=>{var t=e.title,i=e.bindClickMore,a=e.data,n=a;return(0,Kg.jsx)(dL,{title:t,extraContent:(0,Kg.jsx)("div",{className:RB().more,onClick:()=>i(t),children:"\u67e5\u770b\u66f4\u591a>"}),contentStyle:{gridTemplateColumns:"repeat(auto-fill,minmax(98px,1fr))"},children:n.map(((e,t)=>(0,Kg.jsx)("div",{className:RB().item,children:(0,Kg.jsx)(OB,{item:e})},e.id)))})},WB=BB,VB=e=>{var t=e.bindClickMore,i=e.creativeBg,a=e.illustration,n=e.pic;return(0,Kg.jsxs)("div",{className:RB().initialPageWarp,children:[(0,Kg.jsx)(WB,{title:"\u521b\u610f\u80cc\u666f",bindClickMore:t,data:i}),(0,Kg.jsx)(WB,{title:"\u63d2\u753b",bindClickMore:t,data:a}),(0,Kg.jsx)(WB,{title:"\u7167\u7247",bindClickMore:t,data:n})]})},UB=VB,GB=e=>{var t=e.param,i=(e.styleName,e.title),a=e.req,o=(0,dx.Z)({itemArr:[],page:0,pageTotal:0,isShow:!1}),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,DI.ZP)(a,{manual:!0,onSuccess:(e,t)=>{var i=e.items,a=e.pageTotal,n=e.page,r=[];i.length>0&&(r=1!==n?[...l.itemArr,...i]:[...i]);var o=r.length>0;c({itemArr:r,page:n,pageTotal:a,isShow:o})},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),u=(d.loading,d.run);return(0,r.useEffect)((()=>{c({itemArr:[],page:0}),u(t)}),[t]),(0,Kg.jsx)(yE,{request:a,params:t,emptyDesc:(0,Kg.jsxs)("div",{className:RB().emptyWarp,children:[(0,Kg.jsx)(iP,{type:"iconkong",className:RB().img}),"\u672a\u641c\u7d22\u5230".concat(null!==t&&void 0!==t&&t.keyword?"\u4e0e\u201c".concat(null===t||void 0===t?void 0:t.keyword,"\u201d"):"","\u76f8\u5173").concat(i)]}),wrapStyle:{flex:1,height:0},skeleton:{style:{paddingTop:2,display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill,minmax(98px,1fr))",alignContent:"flex-start"}},children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)("div",{className:RB().item,children:(0,Kg.jsx)(OB,{item:e})},e.id)))})}})},XB=(0,r.memo)(GB),qB=e=>{var t=e.bindClickTag;return(0,Kg.jsxs)("div",{className:RB().tagWarp,children:["\u4eba\u50cf\uff1a",(0,Kg.jsxs)(FP.ZP.Group,{name:"radiogroup",defaultValue:0,onChange:e=>t(e.target.value),children:[(0,Kg.jsx)(FP.ZP,{value:0,children:"\u5168\u90e8"}),(0,Kg.jsx)(FP.ZP,{value:1,children:"\u6709"}),(0,Kg.jsx)(FP.ZP,{value:2,children:"\u65e0"})]})]})},HB=qB,YB=e=>{var t=e.title,i=e.bindClickback,a=e.value,o=(0,dx.Z)({is_portrait:0}),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=e=>{c({is_portrait:e})},u=(0,r.useMemo)((()=>({keyword:a,page:1,pageSize:40,is_portrait:l.is_portrait})),[l.is_portrait,a]);return(0,Kg.jsxs)("div",{className:RB().detailPage,children:[(0,Kg.jsxs)("div",{className:RB().detailPageT,children:[(0,Kg.jsxs)("div",{className:RB().detailPageTop,children:[(0,Kg.jsx)("div",{className:RB().detailPageTopLeft,children:t}),(0,Kg.jsx)("div",{className:RB().detailPageTopRight,onClick:i,children:"<\u8fd4\u56de"})]}),(0,Kg.jsx)("div",{className:RB().tagsTop,hidden:"\u7167\u7247"!==t,children:(0,Kg.jsx)(HB,{bindClickTag:d})})]}),(0,Kg.jsx)(XB,{title:t,styleName:"searchPageContent",param:u,req:"\u521b\u610f\u80cc\u666f"===t?AB:"\u63d2\u753b"===t?PB:IB})]})},KB=YB,QB=e=>{var t=e.value,i=YP.Z.TabPane,a=(0,dx.Z)({is_portrait:0}),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useMemo)((()=>({keyword:t,page:1,pageSize:40})),[t]),d=(0,r.useMemo)((()=>({keyword:t,page:1,pageSize:40,is_portrait:s.is_portrait})),[s.is_portrait,t]),u=e=>{l({is_portrait:e})};return(0,Kg.jsx)("div",{className:RB().searchPage,children:(0,Kg.jsxs)(YP.Z,{defaultActiveKey:"1",children:[(0,Kg.jsx)(i,{tab:"\u521b\u610f\u80cc\u666f",children:(0,Kg.jsx)("div",{className:RB().tagsTopWarp,children:(0,Kg.jsx)("div",{className:RB().searchContent,children:(0,Kg.jsx)(XB,{param:c,title:"\u521b\u610f\u80cc\u666f",req:AB,styleName:"searchPageContent"})})})},"1"),(0,Kg.jsx)(i,{tab:"\u63d2\u753b",children:(0,Kg.jsx)("div",{className:RB().tagsTopWarp,children:(0,Kg.jsx)("div",{className:RB().searchContent,children:(0,Kg.jsx)(XB,{param:c,title:"\u63d2\u753b",req:PB,styleName:"searchPageContent"})})})},"2"),(0,Kg.jsx)(i,{tab:"\u7167\u7247",children:(0,Kg.jsxs)("div",{className:RB().tagsTopWarp,children:[(0,Kg.jsx)("div",{className:RB().tagsTop,children:(0,Kg.jsx)(HB,{bindClickTag:u})}),(0,Kg.jsx)("div",{className:RB().searchContent,children:(0,Kg.jsx)(XB,{param:d,title:"\u7167\u7247",req:IB,styleName:"searchPageContent"})})]})},"3")]})})},JB=QB,$B=i(90965),eW=i.n($B),tW=()=>{var e=(0,r.useRef)(null),t=(0,dx.Z)({keyword:"",showKey:"InitialPage",title:"",creativeBg:[],illustration:[],pic:[]}),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=(0,DI.ZP)(SB,{manual:!0,onSuccess:e=>{var t,i,a;o({creativeBg:null===e||void 0===e||null===(t=e.creativeBg)||void 0===t?void 0:t.items.slice(0,10),illustration:null===e||void 0===e||null===(i=e.illustration)||void 0===i?void 0:i.items.slice(0,10),pic:null===e||void 0===e||null===(a=e.pic)||void 0===a?void 0:a.items.slice(0,10)})},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),l=s.run;(0,r.useEffect)((()=>{l()}),[]);var c=e=>{o({title:e,showKey:"DetailPage"})},d=(0,ez.Z)(a.keyword,{wait:500}),u=(0,r.useCallback)((()=>{o({showKey:"InitialPage",keyword:""})}),[]),p=()=>{switch(a.showKey){case"SearchPage":return(0,Kg.jsx)(JB,{value:d});case"DetailPage":return(0,Kg.jsx)(KB,{title:a.title,bindClickback:u,value:d});default:return(0,Kg.jsx)(UB,{bindClickMore:c,creativeBg:a.creativeBg,illustration:a.illustration,pic:a.pic})}},v=e=>{if(e.target.value!==a.keyword)if(e.target.value)switch(a.showKey){case"InitialPage":o({showKey:"SearchPage",keyword:e.target.value});break;default:o({keyword:e.target.value})}else o({keyword:""})};return(0,Kg.jsxs)("div",{className:eW().imagesWarp,children:[(0,Kg.jsx)("div",{className:eW().topInput,children:(0,Kg.jsx)(VP.Z,{ref:e,prefix:(0,Kg.jsx)($R.Z,{}),size:"large",value:a.keyword,placeholder:"\u641c\u7d22\u60a8\u9700\u8981\u7684\u7d20\u6750",onPressEnter:v,onChange:v,onPaste:Ph,onKeyDown:Ph,suffix:"SearchPage"===a.showKey?(0,Kg.jsx)("div",{className:eW().suffix,onClick:u,children:(0,Kg.jsx)(EM.Z,{})}):null})}),(0,Kg.jsx)("div",{className:eW().content,children:p()})]})},iW=tW;function aW(){return bp.g.get("/creator-api/resource/mix-video")}function nW(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pageSize:40};return bp.g.get("/creator-api/resource/video-".concat(e.type,"?").concat((0,jp.stringify)(e)))}function rW(e){return bp.g.get("/label-api/designer-video-label?".concat((0,jp.stringify)(e)))}var oW=i(51193),sW=i.n(oW),lW="videoE",cW=e=>{var t=e.item,i={width:t.width,height:t.height,resId:t.id,rt_url:t.sample,rt_preview_url:t.preview,rt_frame_file:t.frame_file,rt_total_frame:t.total_frame,rt_total_time:t.duration};return(0,Kg.jsx)(HF,{type:lW,attribute:i,poster:t.preview,src:t.sample})},dW=cW,uW=e=>{var t=e.bindClickMore,i=e.minVideoArr;return(0,Kg.jsx)("div",{className:sW().initialPageWarp,children:i&&i.map((e=>(0,Kg.jsx)(dL,{title:null===e||void 0===e?void 0:e.title,extraContent:(0,Kg.jsx)("div",{className:sW().simpleShowTopRight,onClick:()=>t(null===e||void 0===e?void 0:e.title,null===e||void 0===e?void 0:e.type),children:"\u67e5\u770b\u66f4\u591a>"}),children:e.items.map((e=>(0,Kg.jsx)(dW,{item:e},e.id)))},null===e||void 0===e?void 0:e.type)))})},pW=uW,vW=i(40989),mW=i.n(vW),hW=[{value:-1,label:"\u5168\u90e8"},{value:1,label:"\u6a2a"},{value:2,label:"\u7ad6"},{value:0,label:"\u65b9"}],fW=e=>{var t=e.param,i=e.title,a=e.req,o=(0,r.useState)(-1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(""),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,DI.ZP)(rW,{manual:!0}),b=y.run,_=y.data,j=void 0===_?[]:_;(0,r.useEffect)((()=>{["bg","sp"].includes(t.type)&&b({type:t.type})}),[]);var w=(0,r.useMemo)((()=>g?j:j.slice(0,3)),[g,j]);return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:mW()["classify-tags-wrap"],hidden:!w.length,children:[(0,Kg.jsx)("div",{className:mW()["classify-label"],children:"\u5206\u7c7b\uff1a"}),(0,Kg.jsxs)("div",{className:mW()["classify-tags"],children:[(0,Kg.jsx)(rO,{label:"\u5168\u90e8",active:!v,onClick:()=>m("")}),null===w||void 0===w?void 0:w.map((e=>(0,Kg.jsx)(rO,{label:e.class_name,active:v===e.id,onClick:()=>m(e.id)},e.id))),(0,Kg.jsx)(rO,{label:g?"\u6536\u8d77":"\u67e5\u770b\u5168\u90e8",onClick:()=>x(!g)})]})]}),(0,Kg.jsxs)("div",{className:mW()["classify-tags-wrap"],children:[(0,Kg.jsx)("div",{className:mW()["classify-label"],children:"\u7248\u5f0f\uff1a"}),(0,Kg.jsx)("div",{className:mW()["classify-tags"],children:hW.map((e=>(0,Kg.jsx)(rO,{label:e.label,active:l===e.value,onClick:()=>c(e.value)},e.value)))})]}),(0,Kg.jsx)(yE,{request:a,params:(0,u.Z)((0,u.Z)({},t),{},{class_id:v,ratio:l}),emptyDesc:(0,Kg.jsxs)("div",{className:mW().emptyWarp,children:[(0,Kg.jsx)(iP,{type:"iconkong",className:mW().img}),"\u672a\u641c\u7d22\u5230".concat(null!==t&&void 0!==t&&t.keyword?"\u4e0e\u201c".concat(null===t||void 0===t?void 0:t.keyword,"\u201d"):"","\u76f8\u5173").concat(i)]}),skeleton:{className:mW().list},children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)("div",{className:mW().item,children:(0,Kg.jsx)(dW,{item:e})},e.id)))})}})]})},gW=(0,r.memo)(fW),xW=e=>{var t=e.title,i=e.bindClickback,a=e.value,n=e.type,o=(0,r.useMemo)((()=>({keyword:a,page:1,pageSize:40,type:n})),[a]);return(0,Kg.jsxs)("div",{className:sW().detailPage,children:[(0,Kg.jsx)("div",{className:sW().detailPageT,children:(0,Kg.jsxs)("div",{className:sW().detailPageTop,children:[(0,Kg.jsx)("div",{className:sW().detailPageTopLeft,children:t}),(0,Kg.jsx)("div",{className:sW().detailPageTopRight,onClick:i,children:"<\u8fd4\u56de"})]})}),(0,Kg.jsx)(gW,{title:t,param:o,req:nW})]})},yW=xW,bW=e=>{var t=e.value,i=e.minVideoArr,a=YP.Z.TabPane,n=(0,r.useMemo)((()=>({keyword:t,page:1,pageSize:40})),[t]);return(0,Kg.jsx)("div",{className:sW().searchPage,children:(0,Kg.jsx)(YP.Z,{defaultActiveKey:"1",children:i&&i.map((e=>(0,Kg.jsx)(a,{tab:e.title,children:(0,Kg.jsxs)("div",{className:sW().tagsTopWarp,children:[(0,Kg.jsx)("div",{className:sW().tagsTop}),(0,Kg.jsx)("div",{className:sW().searchContent,children:(0,Kg.jsx)(gW,{param:(0,u.Z)((0,u.Z)({},n),{},{type:e.type}),title:e.title,req:nW})})]})},e.type)))})})},_W=(0,r.memo)(bW),jW=i(68711),wW=i.n(jW),kW=()=>{var e=(0,r.useRef)(null),t=(0,dx.Z)({keyword:"",showKey:"InitialPage",title:"",type:"",minVideoArr:null}),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=(0,DI.ZP)(aW,{manual:!0,onSuccess:e=>{o({minVideoArr:e})},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),l=s.run;(0,r.useEffect)((()=>{l()}),[]);var c=(e,t)=>{o({type:t,title:e,showKey:"DetailPage"})},d=(0,ez.Z)(a.keyword,{wait:500}),u=(0,r.useCallback)((()=>{o({showKey:"InitialPage",keyword:""})}),[]),p=()=>{switch(a.showKey){case"SearchPage":return(0,Kg.jsx)(_W,{value:d,minVideoArr:a.minVideoArr});case"DetailPage":return(0,Kg.jsx)(yW,{type:a.type,title:a.title,bindClickback:u,value:d});default:return(0,Kg.jsx)(pW,{bindClickMore:c,minVideoArr:a.minVideoArr})}},v=e=>{if(console.log("onPressEnter",e),o({keyword:e.target.value}),e.target.value!==a.keyword)if(e.target.value)switch(a.showKey){case"InitialPage":o({showKey:"SearchPage",keyword:e.target.value});break;default:o({keyword:e.target.value})}else o({keyword:""})};return(0,Kg.jsxs)("div",{className:wW().imagesWarp,children:[(0,Kg.jsx)("div",{className:wW().topInput,children:(0,Kg.jsx)(VP.Z,{ref:e,prefix:(0,Kg.jsx)($R.Z,{}),size:"large",placeholder:"\u641c\u7d22\u60a8\u9700\u8981\u7684\u7d20\u6750",onPressEnter:v,onChange:v,onPaste:Ph,onKeyDown:Ph,suffix:"SearchPage"===a.showKey?(0,Kg.jsx)("div",{className:wW().suffix,onClick:u,children:(0,Kg.jsx)(EM.Z,{})}):null,onKeyDown:Ph})}),p()]})},TW=kW,ZW={sepia:0,brightness:100,contrast:100,saturate:100,grayscale:0,invert:0,hue:0,blur:0},CW=i(84676),NW=i.n(CW),SW=(e,t)=>{var i=e.effectInfo,a=void 0===i?{}:i,n=e.showEffect,r=e.autoPlay,o=e.children,s=e.maskUrl,l=e.resType,c=e.maskNode,d=(0,u.Z)((0,u.Z)({},ZW),a),p=d.sepia,v=d.brightness,m=d.contrast,h=d.blur,f=d.saturate,g=d.grayscale,x=d.invert,y=d.hue,b=d.background,_=d.mixBlendMode,w=void 0===_?"normal":_,k=()=>{if(!n)return null;if(c)return c;if(s)switch(l){case"video":return(0,Kg.jsx)("video",{loop:!0,ref:t,className:NW().video,src:s,crossOrigin:"anonymous",autoPlay:r});default:return(0,Kg.jsx)("img",{crossOrigin:"anonymous",alt:"",className:NW().img,src:s})}return null};return(0,Kg.jsxs)("div",{className:NW().EffectWrapper,children:[k(),(0,Kg.jsxs)("div",{className:NW().EffectItem,style:{filter:n?"sepia(".concat(p,"%)\n            brightness(").concat(v,"%)\n            contrast(").concat(m,"%)\n            saturate(").concat(f,"%)\n            grayscale(").concat(g,"%)\n            invert(").concat(x,"%)\n            hue-rotate(").concat(y,"deg)\n            blur(").concat(h,"px)"):"none"},children:[n&&b&&(0,Kg.jsx)("div",{className:NW().background,style:{background:j(b),mixBlendMode:w}}),o]})]})},IW=(0,r.forwardRef)(SW),AW=i(46953),PW=i.n(AW),MW="".concat(fb.BT,"/image/effect_preview.png"),EW="".concat(fb.BT,"/video/effect_preview.mov"),LW=("".concat(fb.PP,"/video/fps/tgs.webm"),[{effectInfo:{sepia:50,hue:30,saturate:140},title:"1977",id:"1"},{effectInfo:{sepia:20,brightness:115,saturate:140,background:{r:125,g:105,b:24,a:.1},mixBlendMode:"multiply"},title:"aden",id:"2"},{effectInfo:{sepia:35,contrast:110,brightness:120,saturate:130,background:{r:125,g:105,b:24,a:.2},mixBlendMode:"overlay"},title:"amaro",id:"3"},{effectInfo:{sepia:50,contrast:120,saturate:180,background:{r:125,g:105,b:24,a:.35},mixBlendMode:"lighten"},title:"ashby",id:"4"},{effectInfo:{sepia:40,contrast:125,brightness:110,saturate:90,hue:358},title:"brannan",id:"5"},{effectInfo:{sepia:25,contrast:125,brightness:125,hue:5,background:{r:127,g:187,b:227,a:.2},mixBlendMode:"overlay"},title:"brooklyn",id:"6"},{effectInfo:{sepia:25,contrast:125,brightness:125,saturate:135,hue:5,background:{r:125,g:105,b:24,a:.25},mixBlendMode:"darken"},title:"charmes",id:"7"},{effectInfo:{sepia:15,contrast:125,brightness:125,hue:5,background:{r:127,g:187,b:227,a:.4},mixBlendMode:"overlay"},title:"clarendon",id:"8"},{effectInfo:{sepia:50,contrast:125,brightness:115,saturate:90,hue:358,background:{r:125,g:105,b:24,a:.2},mixBlendMode:"multiply"},title:"crema",id:"9"},{effectInfo:{sepia:35,contrast:150,saturate:110},title:"dogpatch",id:"10"},{effectInfo:{contrast:110,brightness:110,background:{r:230,g:230,b:230,a:1},mixBlendMode:"soft-light"},title:"gingham",id:"11"},{effectInfo:{contrast:85,brightness:125,grayscale:100},title:"inkwell",id:"12"},{effectInfo:{sepia:35,contrast:115,brightness:115,saturate:180,background:{r:127,g:187,b:227,a:.2},mixBlendMode:"overlay"},title:"juno",id:"13"},{effectInfo:{contrast:95,brightness:140,saturate:0,sepia:35},title:"moon",id:"14"},{effectInfo:{contrast:125,brightness:120,saturate:90,sepia:75},title:"reyes",id:"15"},{effectInfo:{sepia:35,contrast:115,brightness:120,saturate:130,background:{r:125,g:105,b:24,a:.25},mixBlendMode:"overlay"},title:"vesper",id:"16"},{effectInfo:{sepia:35,contrast:80,brightness:125,saturate:140,background:{r:229,g:240,b:128,a:.5},mixBlendMode:"darken"},title:"walden",id:"17"}]),DW=()=>(0,Kg.jsx)("div",{className:PW().EffectPanel,children:(0,Kg.jsx)("div",{className:PW().list,children:LW.map((e=>(0,Kg.jsx)("div",{children:(0,Kg.jsx)(HF,{style:{width:100,height:56,minHeight:56},type:"effect",meta:{overlayType:e.overlayType},attribute:{effectInfo:e.effectInfo,picUrl:e.picUrl,rt_url:e.rt_url},previewNode:(0,Kg.jsx)("div",{style:{width:380,height:214},children:(0,Kg.jsx)(IW,{effectInfo:e.effectInfo,showEffect:!0,autoPlay:!0,maskUrl:e.picUrl||e.rt_url,resType:e.overlayType,children:(0,Kg.jsx)("video",{style:{width:"100%"},src:EW,muted:!0,autoPlay:!0})})}),children:(0,Kg.jsx)(IW,{effectInfo:e.effectInfo,maskUrl:e.picUrl||e.rt_url,resType:e.overlayType,showEffect:!0,children:(0,Kg.jsx)("img",{src:MW,alt:"img"})})})},e.id)))})}),RW=DW,zW=i(60605),FW=i.n(zW),OW=e=>{var t=e.children,i=e.title;return(0,Kg.jsxs)("div",{className:FW().opacity,children:[(0,Kg.jsx)("div",{className:FW().label,children:i}),t]})},BW=e=>{e.data;var t=zv(),i=t.activeAudio,a=oh(),n=a.bindSetVolume;return(0,Kg.jsx)(RM,{children:(0,Kg.jsx)(MM,{tab:"\u57fa\u7840",children:(0,Kg.jsx)("div",{className:FW().basics,children:(0,Kg.jsxs)("div",{className:FW().bottom,children:[(0,Kg.jsxs)(OW,{title:"\u58f0\u97f3\u5927\u5c0f",children:[(0,Kg.jsx)("div",{className:FW().progress,children:(0,Kg.jsx)(TP.Z,{value:null===i||void 0===i?void 0:i.volume,onChange:e=>{n(e,null===i||void 0===i?void 0:i.rt_id),Lv(e)}})}),(0,Kg.jsx)("div",{className:FW().number,children:null===i||void 0===i?void 0:i.volume})]}),(0,Kg.jsxs)(OW,{title:"\u58f0\u97f3\u6de1\u5165",children:[(0,Kg.jsx)("div",{className:FW().progress,children:(0,Kg.jsx)(TP.Z,{tipFormatter:null,value:null===i||void 0===i?void 0:i.fadeIn,max:5e3,onChange:e=>{zk(e,null===i||void 0===i?void 0:i.rt_id),Rv({fadeIn:e})}})}),(0,Kg.jsxs)("div",{className:FW().number,children:[((null===i||void 0===i?void 0:i.fadeIn)/1e3).toFixed(1),"\u79d2"]})]}),(0,Kg.jsxs)(OW,{title:"\u58f0\u97f3\u6de1\u51fa",children:[(0,Kg.jsx)("div",{className:FW().progress,children:(0,Kg.jsx)(TP.Z,{value:null===i||void 0===i?void 0:i.fadeOut,max:5e3,tipFormatter:null,onChange:e=>{Fk(e,null===i||void 0===i?void 0:i.rt_id),Rv({fadeOut:e})}})}),(0,Kg.jsxs)("div",{className:FW().number,children:[((null===i||void 0===i?void 0:i.fadeOut)/1e3).toFixed(1),"\u79d2"]})]})]})})},"1")})},WW=(0,hp.Pi)(BW),VW=i(40847);function UW(e){var t=e.onOk,i=(0,yp.Z)(e,["onOk"]);return(0,Kg.jsx)(nA.Z,(0,u.Z)((0,u.Z)({centered:!0,footer:null},i),{},{children:(0,Kg.jsxs)("div",{style:{textAlign:"center"},children:[(0,Kg.jsx)("p",{children:" \u4e25\u7981\u4e0a\u4f20\u975e\u539f\u521b\u65e0\u7248\u6743\u4f5c\u54c1\uff0c\u5982\u9020\u6210\u7248\u6743\u7ea0\u7eb7\u7b49\u4e25\u91cd\u540e\u679c "}),(0,Kg.jsx)("p",{children:" \u7531\u8bbe\u8ba1\u5e08\u672c\u4eba\u627f\u62c5\u7ecf\u6d4e\u8d54\u507f\u4ee5\u53ca\u6cd5\u5f8b\u8d23\u4efb\u3002 "}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:t,children:"\u6211\u5df2\u9605\u8bfb\u5e76\u627f\u8bfa\u9075\u5b88\u4e0a\u8ff0\u8981\u6c42"})]})}))}var GW=[{label:"\u5b9e\u62cd\u7c7b\u573a\u666f",value:10},{label:"H5\u573a\u666f",value:11},{label:"\u5149\u6548\u7c92\u5b50\u573a\u666f",value:8},{label:"\u63d2\u753b\u7c7b\u573a\u666f",value:9}],XW=[{value:1,label:"\u6f02\u6d6e"},{value:2,label:"\u6548\u679c\u7d20\u6750"},{value:3,label:"\u88c5\u9970"},{value:4,label:"\u4fc3\u9500"},{value:5,label:"\u8282\u65e5"},{value:6,label:"\u8fb9\u6846\u7eb9\u7406"},{value:7,label:"\u4e0d\u89c4\u5219"},{value:8,label:"PPT\u5143\u7d20"},{value:9,label:"\u5b9e\u7269"},{value:10,label:"\u5361\u901a"},{value:22,label:"\u5176\u4ed6"},{value:24,label:"\u56fe\u6807\u5143\u7d20"},{value:69,label:"\u8868\u60c5\u5305"},{value:82,label:"3D\u7acb\u4f53"},{value:83,label:"\u91d1\u8272"},{value:85,label:"\u6c34\u58a8"},{value:86,label:"\u521b\u65b0"},{value:90,label:"\u5934\u50cf\u6302\u4ef6"},{value:92,label:"\u4eba\u7269"},{value:93,label:"logo\u5143\u7d20"},{value:95,label:"\u6444\u5f71\u4eba\u50cf"}],qW=(i(83557),i(9242)),HW=i(86504),YW=i(15132);function KW(e,t){var i=new FormData;return i.append("OSSAccessKeyId",t.OSSAccessKeyId),i.append("policy",t.policy),i.append("Signature",t.Signature),i.append("key",t.key),i.append("callback",t.callback),i.append("file",e),i}function QW(e,t){var i=new FormData;return i.append("OSSAccessKeyId",t.id),i.append("policy",t.base64policy),i.append("Signature",t.signature),i.append("key",t.key),i.append("callback",t.base64callback_body),i.append("file",e),i}function JW(e){return"//".concat(e.bucket,".").concat(e.endpoint)}function $W(e){var t=e.onprogress,i=e.url,a=e=>new Promise(((a,n)=>{var r=new window.XMLHttpRequest;r.onload=()=>{if(r.readyState===r.DONE&&200===r.status){var e=JSON.parse(r.response);a(e)}else n(r)},r.onerror=e=>{n(e)},t&&(r.upload.onprogress=t),r.open("post",i,!0),r.withCredentials=!0,r.send(e)}));return{send:a}}function eV(e){if("function"!==typeof e)throw new Error("workerCode need a function type, but got a ".concat(typeof e));function t(e){var t=e.toString(),i=t.substring(t.indexOf("{")+1,t.lastIndexOf("}")),a=new Blob([i],{type:"application/javascript"});return URL.createObjectURL(a)}return new Worker(t(e))}class tV{static createURLOnWorker(e){var t=()=>{self.onmessage=e=>{var t=self.URL.createObjectURL(e.data);self.postMessage(t)}},i=eV(t);return new Promise(((t,a)=>{i.postMessage(e),i.onmessage=e=>{t(e.data)},i.onerror=e=>{a(e)}}))}static createURLOnPromise(e){return new Promise(((t,i)=>{try{var a=window.URL.createObjectURL(e);t(a)}catch(n){i(n)}}))}constructor(e){var t=this;this.file=void 0,this.URL=void 0,this.createURL=(0,p.Z)(m().mark((function e(){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,tV.createURLOnPromise(t.file);case 2:return i=e.sent,t.URL=i,e.abrupt("return",i);case 5:case"end":return e.stop()}}),e)}))),this.clearURL=()=>{this.URL&&window.URL.revokeObjectURL(this.URL)},this.file=e,this.URL=null}}function iV(e,t){var i=()=>new Promise(((t,i)=>{var a=new tV(e);a.createURL().then((e=>{t(e)})).catch((e=>{i(e)}))})),a=function(){var e=(0,p.Z)(m().mark((function e(){var t;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i();case 2:return t=e.sent,e.abrupt("return",new Promise(((e,i)=>{var a=new Image;a.onload=()=>{var i=a.width,n=a.height;e({fileURL:t,width:i,height:n})},a.onerror=i,a.src=t})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function n(){return r.apply(this,arguments)}function r(){return r=(0,p.Z)(m().mark((function t(){var i;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return i=URL.createObjectURL(e),t.abrupt("return",new Promise(((e,t)=>{var a=new Audio(i);a.onloadedmetadata=()=>{e({duration:a.duration,fileURL:i})},a.onerror=t})));case 2:case"end":return t.stop()}}),t)}))),r.apply(this,arguments)}var o=e=>new Promise(((t,i)=>{var a=document.createElement("video");a.onloadedmetadata=e=>{t({width:a.videoWidth,height:a.videoHeight,duration:a.duration})},a.onerror=e=>{i(e)},a.src=e,a.load()})),s=function(){var e=(0,p.Z)(m().mark((function e(){var a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i();case 3:return a=e.sent,e.next=6,o(a);case 6:return n=e.sent,e.abrupt("return",(0,u.Z)({fileURL:a},n));case 10:return e.prev=10,e.t0=e["catch"](0),t&&t(e.t0),e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();return{transformFile:i,getDimension:o,startGetting:s,getImageInfo:a,getAudioInfo:n}}var aV=["image/png","image/jpeg","image/gif"],nV=["video/mp4","video/quicktime"],rV=["audio/mpeg","audio/x-m4a","audio/mp3","audio/wav"],oV=[...aV,...nV,...rV],sV={image:{title:"\u56fe\u7247",limitSize:10,acceptType:aV,errorTip:"jpg / png"},video:{title:"\u89c6\u9891",limitSize:100,acceptType:nV,errorTip:"mp4 / MOV"},audio:{title:"\u97f3\u9891",limitSize:50,acceptType:rV,errorTip:"MP3 / M4A / WMA"},all:{title:"\u5168\u90e8",limitSize:1024,acceptType:oV,errorTip:""}};function lV(e,t,i){return cV.apply(this,arguments)}function cV(){return cV=(0,p.Z)(m().mark((function e(t,i,a){var n,r,o,s,l,c,d,p,v,h,f,g,x,y,b,_,j;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=!0,r={file:t},o=t.size,s=t.type,l=sV[i],c=l.title,d=l.limitSize,p=l.acceptType,v=l.errorTip,h=1024*d*1024,f=iV(t),g=f.startGetting,x=f.getImageInfo,y=f.getAudioInfo,p.includes(s)){e.next=11;break}xp.default.error("\u4e0a\u4f20\u5931\u8d25\uff0c\u652f\u6301\u4e0a\u4f20".concat(100,"M\u4ee5\u4e0b",v,"\u683c\u5f0f\u7684\u672c\u5730").concat(c)),n=!1,e.next=36;break;case 11:if(!(o>h)){e.next=16;break}n=!1,xp.default.error("\u8bf7\u52ff\u4e0a\u4f20\u8d85\u8fc7".concat(d,"M\u7684").concat(c)),e.next=36;break;case 16:if("video"!==i){e.next=24;break}return e.next=19,g();case 19:b=e.sent,Object.assign(r,b),0!==b.width&&0!==b.height&&b||(n=!1,xp.default.error("\u89c6\u9891\u5206\u8fa8\u7387\u8fc7\u9ad8\uff0c\u6216\u4e0a\u4f20\u4e86\u4e0d\u53d7\u652f\u6301\u7684\u89c6\u9891\u683c\u5f0f\uff01")),e.next=36;break;case 24:if("image"!==i){e.next=31;break}return e.next=27,x();case 27:_=e.sent,Object.assign(r,_),e.next=36;break;case 31:if("audio"!==i){e.next=36;break}return e.next=34,y();case 34:j=e.sent,Object.assign(r,j);case 36:return a&&a(n,(0,u.Z)({file:t},r)),e.abrupt("return",n);case 38:case"end":return e.stop()}}),e)}))),cV.apply(this,arguments)}function dV(e,t){var i=new FileReader;i.onload=e=>{var a=new DataView(i.result);if(65496!==a.getUint16(0,!1))return t(-2);var n=a.byteLength,r=2;while(r<n)try{var o=a.getUint16(r,!1);if(r+=2,65505===o){if(1165519206!==a.getUint32(r+=2,!1))return t(-1);var s=18761===a.getUint16(r+=6,!1);r+=a.getUint32(r+4,s);var l=a.getUint16(r,s);r+=2;for(var c=0;c<l;c++)if(274===a.getUint16(r+12*c,s))return t(a.getUint16(r+12*c+8,s))}else{if(65280!==(65280&o))break;r+=a.getUint16(r,!1)}}catch(d){return console.error(d),t(-1)}return t(-1)},i.readAsArrayBuffer(e)}function uV(e){return bp.g.get("/creator-api/upload/video-payload?".concat((0,jp.stringify)(e)))}function pV(e){return bp.g.get("/creator-api/upload/image-payload?".concat((0,jp.stringify)(e)))}function vV(e){var t=e.onError,i=e.setProgress,a=e.onSucceed,n=e.moduleType,r=(e,t)=>{if(e.lengthComputable&&"function"===typeof i){var a=Math.round(e.loaded/e.total*100);i(a<10?10:a,t)}};function o(e,t){return s.apply(this,arguments)}function s(){return s=(0,p.Z)(m().mark((function e(i,o){var s,l,c,d,u,p,v,h,f;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s=i.name,l=i.size,c=i.type,e.prev=1,e.next=4,"video"===n?uV({name:s,size:l,type:c,upload_type:o}):pV({name:s,size:l,type:c,upload_type:o});case 4:if(d=e.sent,0===d.code){e.next=8;break}return t(d),e.abrupt("return");case 8:return u=KW(i,d.data.payload),p=d.data.host,v=$W({url:p,onprogress:e=>r(e,i)}),h=v.send,e.next=13,h(u);case 13:f=e.sent,0===f.code?a(f.data):t&&t(f),e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](1),console.error(e.t0),t&&t(e.t0);case 21:case"end":return e.stop()}}),e,null,[[1,17]])}))),s.apply(this,arguments)}return{start:o}}function mV(){return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("p",{children:"\u6587\u4ef6\u4e0a\u4f20\u89c4\u8303\uff1a"}),(0,Kg.jsx)("p",{children:"1.\u547d\u540d\u4e3atgs_00000\uff0c\u4f8b\uff1atgs_00001\uff1b"}),(0,Kg.jsx)("p",{children:"2.30\u5e27/\u79d2\uff0c\u5bfc\u51faPNG\u5e8f\u5217\uff08\u542b\u900f\u660e\u56fe\u5c42\uff09\uff1b"}),(0,Kg.jsx)("p",{children:"3.\u5c06PNG\u5e8f\u5217\u53bb\u9664\u6700\u540e\u4e00\u5e27\u540e\u538b\u7f29\u4e3azip\u4e0a\u4f20\uff1b"}),(0,Kg.jsx)("p",{children:"3.\u538b\u7f29\u5305\u4e2d\u4e0d\u53ef\u5305\u542b\u6709\u6587\u4ef6\u5939\u3002"})]})}function hV(){return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("p",{style:{textAlign:"center"},children:"\u5de5\u7a0b\u6e90\u6587\u4ef6\u652f\u6301\u683c\u5f0f\uff1apsd\u3001Ae\u3001Pr\u7b49"}),(0,Kg.jsx)("p",{style:{textAlign:"center"},children:"\u5c06\u5de5\u7a0b\u6587\u4ef6\u548c\u7d20\u6750\u538b\u7f29\u6210\u4e00\u4e2azip\u6587\u4ef6\u4e0a\u4f20"})]})}function fV(){return(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"},children:[(0,Kg.jsx)("p",{children:"\u6587\u4ef6\u683c\u5f0f\uff1ajpg\u3001png"}),(0,Kg.jsx)("p",{children:"\u89c4\u683c\uff1a16:9\u30019:16"}),(0,Kg.jsx)("p",{children:"\u6587\u4ef6\u5927\u5c0f\u4e0d\u8d85\u8fc720M"})]})}function gV(e){var t=e.file,i=e.onSucceed,a=e.uploadType,o=e.onChange,s=e.moduleType,l=e.accept,c=(0,r.useState)(20),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=vV({moduleType:s,setProgress:p,onSucceed(e){p(100),i(e)},onError(e){console.log("onError",e),xp.default.info(e.type)}}),m=v.start;return(0,r.useEffect)((()=>{t&&(p(0),m(t,a))}),[t]),(0,Kg.jsx)("div",{className:"upload-progress",children:100===u?(0,Kg.jsxs)(Kg.Fragment,{children:["preview"===a?(0,Kg.jsx)(HW.Z,{className:"uploaded-file-icon"}):(0,Kg.jsx)(YW.Z,{className:"uploaded-file-icon"}),(0,Kg.jsx)("p",{className:"uploaded-file-title",children:t.name}),(0,Kg.jsx)(qW.Z,{accept:l,showUploadList:!1,beforeUpload:o,children:(0,Kg.jsx)(CS.Z,{size:"small",type:"primary",children:"\u91cd\u65b0\u4e0a\u4f20"})})]}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{style:{display:"flex"},children:["\u6b63\u5728\u4e0a\u4f20",(0,Kg.jsx)("span",{style:{maxWidth:"140px",display:"inline-block",color:"#5A4CDB",marginLeft:"16px"},className:"upload-ellipsis",children:t.name})]}),(0,Kg.jsx)("div",{className:"upload-progress-bg",children:(0,Kg.jsx)("div",{className:"upload-progress-success-bg",style:{width:"".concat(u,"%")}})}),(0,Kg.jsx)("span",{children:"".concat(u,"%")})]})})}function xV(e){var t=e.desc,i=e.accept,a=e.limitSize,o=e.onChange,s=e.upload_type,l=e.moduleType,c=(0,r.useState)(),d=(0,n.Z)(c,2),v=d[0],h=d[1],f=(0,r.useState)(),g=(0,n.Z)(f,2),x=g[0],y=g[1];function b(e){return _.apply(this,arguments)}function _(){return _=(0,p.Z)(m().mark((function e(t){var n,r,o,s,l,c;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.size,r=t.type,!(i.indexOf(r)<0)){e.next=4;break}return xp.default.info("\u4e0d\u652f\u6301\u4e0a\u4f20".concat(r,"\u7c7b\u578b\u7684\u6587\u4ef6")),e.abrupt("return",!1);case 4:if(!a){e.next=9;break}if(o=1024*a*1024,!(n>o)){e.next=9;break}return xp.default.info("\u8bf7\u52ff\u4e0a\u4f20\u8d85\u8fc7".concat(a,"M\u7684").concat(i,"\u6587\u4ef6")),e.abrupt("return",!1);case 9:if(s=iV(t),l=s.getImageInfo,!(r.indexOf("image")>=0)){e.next=15;break}return e.next=13,l();case 13:c=e.sent,y((0,u.Z)((0,u.Z)({},c),{},{mime:r}));case 15:return h(t),e.abrupt("return",!1);case 17:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}function j(e){o((0,u.Z)({path:e.path},x))}return(0,Kg.jsx)(Kg.Fragment,{children:v?(0,Kg.jsx)("div",{className:"file-upload",children:(0,Kg.jsx)(gV,{accept:i,file:v,onSucceed:j,onChange:b,uploadType:s,moduleType:l})}):(0,Kg.jsxs)("div",{className:"file-upload file-upload-default",children:[(0,Kg.jsx)(qW.Z,{accept:i,showUploadList:!1,beforeUpload:b,children:(0,Kg.jsx)(CS.Z,{size:"small",type:"primary",children:"\u9009\u62e9\u6587\u4ef6"})}),t]})})}var yV=UP.Z.Item;function bV(e){var t=e.onOk,i=e.scope_type,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)(""),d=(0,n.Z)(c,2),v=d[0],h=d[1],f=(0,r.useState)(),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,r.useState)([]),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=UP.Z.useForm(),T=(0,n.Z)(k,1),Z=T[0];function C(e){return N.apply(this,arguments)}function N(){return N=(0,p.Z)(m().mark((function e(a){var n,r,o,s,c,d;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=Z.getFieldsValue(),r=n.preview,o=n.description,s=(0,yp.Z)(n,["preview","description"]),c=(0,u.Z)((0,u.Z)({},s),{},{description:o.join(" "),preview:r.path,width:r.width,height:r.height,mime:r.mime}),console.log("todo \u63d0\u4ea4",n),e.next=6,"png"===i?ED(c):MD((0,u.Z)((0,u.Z)({},c),{},{scope_type:i}));case 6:d=e.sent,0===d.code?(xp.default.success("\u63d0\u4ea4\u6210\u529f"),l(!1),t(d.data.id)):xp.default.info(d.ms);case 8:case"end":return e.stop()}}),e)}))),N.apply(this,arguments)}return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)(UP.Z,{form:Z,className:"upload-form",labelAlign:"right",children:[(0,Kg.jsxs)(OP.Z,{gutter:16,justify:"center",children:["png"!==i&&(0,Kg.jsx)(BP.Z,{span:8,children:(0,Kg.jsx)(yV,{label:"\u89c6\u9891\u6587\u4ef6\u4e0a\u4f20",name:"origin_file_path",labelCol:{span:24},rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u89c6\u9891\u6587\u4ef6\u4e0a\u4f20"}],getValueFromEvent:e=>e.path,children:(0,Kg.jsx)(xV,{desc:(0,Kg.jsx)(mV,{}),accept:"application/x-zip-compressed,application/zip",upload_type:"frame",moduleType:"video"})})}),(0,Kg.jsx)(BP.Z,{span:8,children:(0,Kg.jsx)(yV,{label:"\u9884\u89c8\u56fe\u4e0a\u4f20",name:"preview",labelCol:{span:24},rules:[{required:!0,message:"\u8bf7\u4e0a\u4f20\u9884\u89c8\u56fe"}],children:(0,Kg.jsx)(xV,{desc:(0,Kg.jsx)(fV,{}),accept:"image/png,image/jpeg",limitSize:20,upload_type:"preview",moduleType:"video"})})}),(0,Kg.jsx)(BP.Z,{span:8,children:(0,Kg.jsx)(yV,{label:"\u6e90\u6587\u4ef6\u4e0a\u4f20",name:"source_file",labelCol:{span:24},rules:[{required:"png"!==i,message:"\u8bf7\u4e0a\u4f20\u6e90\u6587\u4ef6"}],getValueFromEvent:e=>e.path,children:(0,Kg.jsx)(xV,{desc:(0,Kg.jsx)(hV,{}),accept:"application/x-zip-compressed,application/zip",upload_type:"source",moduleType:"video"})})})]}),(0,Kg.jsxs)(OP.Z,{gutter:16,children:[(0,Kg.jsx)(BP.Z,{span:8,children:(0,Kg.jsx)(yV,{label:"\u7248\u6743\u7c7b\u578b",name:"copyright_type",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7248\u6743\u7c7b\u578b"}],getValueFromEvent:e=>(y(e.target.value),e.target.value),children:(0,Kg.jsxs)(FP.ZP.Group,{children:[(0,Kg.jsx)(FP.ZP,{value:3,children:"\u7eaf\u539f\u521b"}),(0,Kg.jsx)(FP.ZP,{value:4,children:"\u4f2a\u539f\u521b"})]})})}),"png"!==i&&(0,Kg.jsx)(BP.Z,{span:16,children:(0,Kg.jsx)(yV,{label:"\u900f\u660e\u6807\u8bc6",name:"alpha_flag",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u900f\u660e\u6807\u8bc6"}],children:(0,Kg.jsxs)(FP.ZP.Group,{children:[(0,Kg.jsx)(FP.ZP,{value:0,children:"\u672a\u77e5"}),(0,Kg.jsx)(FP.ZP,{value:1,children:"\u900f\u660e"}),(0,Kg.jsx)(FP.ZP,{value:2,children:"\u4e0d\u900f\u660e"})]})})}),4===x&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(BP.Z,{span:8,children:(0,Kg.jsx)(yV,{label:"\u7d20\u6750\u6765\u6e90",name:"source",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7d20\u6750\u6765\u6e90"}],children:(0,Kg.jsxs)(WP.Z.Group,{onChange:w,children:[(0,Kg.jsx)(WP.Z,{value:1,children:"\u7ad9\u5185\u7d20\u6750"}),(0,Kg.jsx)(WP.Z,{value:2,children:"\u7ad9\u5916\u7d20\u6750"})]})})}),j.indexOf(1)>-1&&(0,Kg.jsx)(BP.Z,{span:24,children:(0,Kg.jsx)(yV,{label:"\u7ad9\u5185\u7d20\u6750ID",name:"asset_ids",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7d20\u6750ID"}],children:(0,Kg.jsx)(VP.Z,{onPaste:Ph,onKeyDown:Ph,placeholder:"\u8bf7\u586b\u5199\u7ad9\u5185\u7d20\u6750ID\uff0c\u5404\u7d20\u6750\u4e4b\u95f4\u7528\u82f1\u6587\u9017\u53f7\u9694\u5f00"})})}),j.indexOf(2)>-1&&(0,Kg.jsx)(BP.Z,{span:24,children:(0,Kg.jsx)(yV,{label:"\u7ad9\u5916\u7d20\u6750\u94fe\u63a5",name:"asset_links",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u7d20\u6750\u94fe\u63a5"}],children:(0,Kg.jsx)(VP.Z,{onPaste:Ph,onKeyDown:Ph,placeholder:"\u8bf7\u586b\u5199\u7ad9\u5916\u7d20\u6750\u94fe\u63a5\uff0c\u5404\u94fe\u63a5\u4e4b\u95f4\u7528\u7a7a\u683c\u9694\u5f00"})})})]}),(0,Kg.jsx)(BP.Z,{span:24,children:(0,Kg.jsx)(yV,{label:"\u6807\u9898",name:"title",rules:[{required:!0,message:"\u8bf7\u586b\u5199\u6807\u9898"}],getValueFromEvent:e=>(h(e.target.value),e.target.value),children:(0,Kg.jsx)(VP.Z,{onPaste:Ph,onKeyDown:Ph,maxLength:20,suffix:(0,Kg.jsxs)("span",{children:[v.length,"/20"]})})})}),(0,Kg.jsx)(BP.Z,{span:8,children:(0,Kg.jsx)(yV,{label:"\u5206\u7c7b",name:"class_id",rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u7d20\u6750\u5206\u7c7b"}],children:(0,Kg.jsx)(LO.Z,{options:"png"===i?XW:GW})})}),(0,Kg.jsx)(BP.Z,{span:16,children:(0,Kg.jsx)(yV,{label:"\u5173\u952e\u8bcd",name:"description",required:!0,rules:[()=>({validator(e,t){return!t||t.length<3?Promise.reject(new Error("\u8bf7\u8f93\u5165\u4e0d\u5c11\u4e8e3\u4e2a\u5173\u952e\u8bcd")):Promise.resolve()}})],children:(0,Kg.jsx)(HP,{})})}),(0,Kg.jsx)(BP.Z,{span:24,style:{textAlign:"center"},children:(0,Kg.jsx)("span",{style:{fontSize:12,color:"#767676"},children:"\u4e25\u7981\u4e0a\u4f20\u975e\u539f\u521b\u65e0\u7248\u6743\u4f5c\u54c1\uff0c\u5982\u9020\u6210\u7248\u6743\u7ea0\u7eb7\u7b49\u4e25\u91cd\u540e\u679c\uff0c\u7531\u8bbe\u8ba1\u5e08\u672c\u4eba\u627f\u62c5\u7ecf\u6d4e\u8d54\u507f\u4ee5\u53ca\u6cd5\u5f8b\u540e\u679c\u3002"})})]}),(0,Kg.jsx)(UP.Z.Item,{wrapperCol:{span:24},shouldUpdate:!0,children:(0,Kg.jsx)(OP.Z,{justify:"center",style:{marginTop:24},children:(0,Kg.jsx)(CS.Z,{type:"primary",style:{width:237},onClick:()=>{Z.validateFields().then((()=>{l(!0)})).catch((e=>{}))},children:"\u63d0\u4ea4"})})})]}),(0,Kg.jsx)(UW,{visible:s,centered:!0,footer:null,onCancel:()=>l(!1),onOk:C})]})}var _V=i(46583),jV=i.n(_V);function wV(e){var t=e.type,i=e.request,a=e.Item,n=e.reload,o=e.setReload,s=(0,r.useRef)();return(0,r.useEffect)((()=>{var e;n&&(null===(e=s.current)||void 0===e||e.reload(),o(!1))}),[n]),(0,Kg.jsx)(yE,{request:i,params:{scope_type:t,pageSize:50},ref:s,children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>{var t;return(0,Kg.jsx)(a,{data:e,className:jV()["upload-list-item"],reload:null===(t=s.current)||void 0===t?void 0:t.reload},e.id)}))})}})}function kV(e){var t=e.data,i=e.className,a=e.isBackground;return(0,Kg.jsx)("div",{className:i,children:(0,Kg.jsx)(HF,{isBackground:a,defaultBackground:!0,type:"videoE",attribute:{resId:t.id,width:t.width,height:t.height,rt_url:t.sample,rt_total_frame:t.total_frame,rt_total_time:t.duration,rt_preview_url:t.preview,rt_frame_file:t.frame_file},poster:t.preview,src:t.sample})})}function TV(e){var t=e.data,i=e.className;return(0,Kg.jsx)("div",{className:i,children:(0,Kg.jsx)(HF,{type:"image",attribute:{resId:t.id,width:t.width,height:t.height,picUrl:t.big_preview,rt_preview_url:t.preview},src:t.preview})})}var ZV=i(72721),CV=i.n(ZV);function NV(e){var t=e.status,i=e.children,a=e.reload;function n(){switch(t){case"fail":return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(VW.Z,{style:{fontSize:20,color:"#FE822A"}}),(0,Kg.jsx)("p",{style:{color:"red"},children:"\u5408\u6210\u5931\u8d25!"})]});default:return"\u5408\u6210\u4e2d\u2026"}}return(0,Sb.Z)((()=>{"done"===t&&a()}),[t]),(0,Kg.jsxs)("div",{style:{position:"relative"},children:[(0,Kg.jsx)("div",{hidden:"done"===t,style:{backgroundColor:"rgba(0,0,0,0.3)",position:"absolute",zIndex:10,width:"100%",height:"100%",color:"#fff",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",fontSize:12},children:n()}),i]})}function SV(){var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)("lottie"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)([]),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,DI.ZP)(LD,{manual:!0,pollingInterval:2e3,onSuccess(e){var t=[];Object.keys(e).forEach((i=>{var a=e[i];"done"!==a.step&&t.push(i)})),t.length<1&&(_(),x(!0)),m(t)}}),b=y.run,_=y.cancel;function j(e){_(),a(!1),"png"!==l&&m((t=>{var i=[...t,String(e)];return b(i),i})),x(!0)}return(0,Kg.jsxs)("div",{className:CV()["upload-list"],children:[(0,Kg.jsxs)("div",{className:CV().header,children:[(0,Kg.jsx)("span",{children:"\u4e0a\u4f20"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:()=>a(!0),children:"\u4e0a\u4f20\u7d20\u6750"})]}),(0,Kg.jsxs)(YP.Z,{onChange:c,destroyInactiveTabPane:!0,className:CV()["upload-list-tabs"],children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u89c6\u9891\u5143\u7d20",children:(0,Kg.jsx)(wV,{reload:g,setReload:x,type:"lottie",request:EB,Item:e=>{var t=e.data,i=e.reload,a=(0,yp.Z)(e,["data","reload"]);return(0,Kg.jsx)(NV,{status:v.includes(t.id)?0:t.step,reload:i,children:(0,Kg.jsx)(kV,(0,u.Z)({data:t},a))})}})},"lottie"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u56fe\u7247",children:(0,Kg.jsx)(wV,{type:"png",reload:g,setReload:x,request:MB,Item:TV})},"png"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u80cc\u666f\u89c6\u9891",children:(0,Kg.jsx)(wV,{reload:g,setReload:x,type:"bg",request:EB,Item:e=>{var t=e.data,i=e.reload,a=(0,yp.Z)(e,["data","reload"]);return(0,Kg.jsx)(NV,{status:v.includes(t.id)?0:t.step,reload:i,children:(0,Kg.jsx)(kV,(0,u.Z)({isBackground:!0,data:t},a))})}})},"bg")]}),(0,Kg.jsx)(nA.Z,{keyboard:!1,visible:i,destroyOnClose:!0,width:"950px",onCancel:()=>a(!1),maskClosable:!1,footer:null,centered:!0,children:(0,Kg.jsx)(bV,{onOk:j,scope_type:l})})]})}var IV=[{name:"\u4ece\u5de6\u79fb\u5165",key:"moveIntoLeft",videoUrl:"".concat(fb.BT,"/transition/moveLeft.mp4"),imageUrl:"".concat(fb.BT,"/transition/moveLeft.png"),animation:{exit:{baseId:1,duration:0,details:{direction:2}},enter:{baseId:1,duration:-1,details:{direction:2}}},total_frame:30,asset_type:"plain"},{name:"\u4ece\u53f3\u79fb\u5165",key:"moveIntoRight",videoUrl:"".concat(fb.BT,"/transition/moveRight.mp4"),imageUrl:"".concat(fb.BT,"/transition/moveRight.png"),animation:{exit:{baseId:1,duration:0,details:{direction:4}},enter:{baseId:1,duration:-1,details:{direction:4}}},total_frame:30,asset_type:"plain"},{name:"\u4ece\u4e0a\u79fb\u5165",key:"moveIntoTop",videoUrl:"".concat(fb.BT,"/transition/moveTop.mp4"),imageUrl:"".concat(fb.BT,"/transition/moveTop.png"),animation:{exit:{baseId:1,duration:0,details:{direction:3}},enter:{baseId:1,duration:-1,details:{direction:3}}},total_frame:30,asset_type:"plain"},{name:"\u4ece\u4e0b\u79fb\u5165",key:"moveIntoBottom",videoUrl:"".concat(fb.BT,"/transition/moveBottom.mp4"),imageUrl:"".concat(fb.BT,"/transition/moveBottom.png"),animation:{exit:{baseId:1,duration:0,details:{direction:1}},enter:{baseId:1,duration:-1,details:{direction:1}}},total_frame:30,asset_type:"plain"},{name:"\u6de1\u5165\u6de1\u51fa",key:"fadeIn",videoUrl:"".concat(fb.BT,"/transition/fade.mp4"),imageUrl:"".concat(fb.BT,"/transition/fade.png"),animation:{exit:{baseId:3,duration:-1,details:{direction:-1}},enter:{baseId:3,duration:0,details:{direction:-1}}},total_frame:30,asset_type:"plain"},{name:"\u653e\u5927",key:"fadeIn",videoUrl:"".concat(fb.BT,"/transition/enlarge.mp4"),imageUrl:"".concat(fb.BT,"/transition/enlarge.png"),animation:{exit:{baseId:2,duration:-1,details:{direction:-1}},enter:{baseId:2,duration:0,details:{direction:-1}}},total_frame:30,asset_type:"plain"},{name:"\u7f29\u5c0f",key:"fadeOut",videoUrl:"".concat(fb.BT,"/transition/reducec.mp4"),imageUrl:"".concat(fb.BT,"/transition/reduce.png"),animation:{exit:{baseId:2,duration:0,details:{direction:-1}},enter:{baseId:2,duration:-1,details:{direction:-1}}},total_frame:30,asset_type:"plain"}];function AV(e,t){var i,a;if(null!==t&&void 0!==t&&null!==(i=t.endTransfer)&&void 0!==i&&i.attribute.animation){var n,r,o,s,l=t.endTransfer.attribute.animation,c=l.enter,d=l.exit;if(c.duration>0&&null!==e&&void 0!==e&&null!==(n=e.animation)&&void 0!==n&&n.enter&&(null===e||void 0===e||null===(r=e.animation)||void 0===r?void 0:r.enter.duration)>-1&&c.baseId===(null===e||void 0===e?void 0:e.animation.enter.baseId)&&c.details.direction===(null===e||void 0===e?void 0:e.animation.enter.details.direction))return!0;if(d.duration>0&&null!==e&&void 0!==e&&null!==(o=e.animation)&&void 0!==o&&o.exit&&(null===e||void 0===e||null===(s=e.animation)||void 0===s?void 0:s.exit.duration)>-1&&d.baseId===(null===e||void 0===e?void 0:e.animation.exit.baseId)&&d.details.direction===(null===e||void 0===e?void 0:e.animation.exit.details.direction))return!0}return Number(e.id)===Number(null===t||void 0===t||null===(a=t.endTransfer)||void 0===a?void 0:a.attribute.resId)}function PV(e){var t=e.transition,i=e.onClick,a=e.active,n=e.actionDom,o=(0,r.useRef)(null);return(0,Kg.jsxs)("div",{className:hb()("designer-transition-item",{"designer-transition-item-active":a}),ref:o,children:[(0,Kg.jsx)("div",{style:{width:"100%",height:98,position:"relative"},onClick:i,children:(0,Kg.jsx)(UM,{poster:t.poster,src:t.src})}),t.name&&(0,Kg.jsx)("div",{className:"designer-transition-title",children:t.name}),a&&n&&n({itemRef:o})]})}var MV=PV,EV=(0,hp.Pi)((()=>{var e=Lw(),t=e.template;function i(e){var t={resId:e.key,totalTime:Zh(e.total_frame),transition:e.transition},i=(0,u.Z)((0,u.Z)({},e),{},{assetInfo:{attribute:t,meta:{type:e.asset_type}}}),a=Ow();Bw().endTransfer?Cw(a,i):Tw(a,i),xp.default.success("\u8f6c\u573a\u8bbe\u7f6e\u6210\u529f")}return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"designer-transition-label",children:"\u57fa\u7840\u8f6c\u573a"}),(0,Kg.jsx)("div",{className:"designer-transition-list",children:IV.map((e=>(0,Kg.jsx)(MV,{transition:{poster:e.imageUrl,src:e.videoUrl,name:e.name},onClick:()=>i(e),active:AV(e,t)},e.name)))})]})})),LV=EV;function DV(){return bp.g.get("/label-api/video")}function RV(){return bp.g.get("/editor/material-video?class_id=2021&page=1")}function zV(e){return bp.g.get("/editor/material-video?".concat((0,jp.stringify)(e)))}function FV(){return bp.g.get("/resource-api/sub-fronts?filter_id=1230854")}function OV(e){return bp.g.get("/resource-api/search?keyword=".concat(e.keyword||"","&filter_id=").concat(e.class_id,"&page_num=").concat(e.page,"&page_size=").concat(e.pageSize))}function BV(e){return bp.g.post("/editor/set-history-record",{data:{module_type:"effect",asset_id:e}})}function WV(e){return bp.g.get("/editor/get-history-record?module_type=effect&&page_num=".concat(e.page,"&page_size=").concat(e.pageSize))}function VV(e){return bp.g.get("/resource-api/info?gid=".concat(e))}var UV=(0,hp.Pi)((()=>{var e=Lw(),t=e.template;function i(e){var t={resId:e.id,rt_url:e.sample,rt_preview_url:e.preview,rt_frame_url:e.preview,rt_total_frame:e.total_frame,rt_frame_file:e.frame_file,height:e.height,width:e.width};Qj(Ow(),{attribute:t}),xp.default.success("\u8f6c\u573a\u8bbe\u7f6e\u6210\u529f")}var a=(0,DI.ZP)(RV,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),n=a.data;a.loading;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"designer-transition-label",children:"\u7279\u6548\u8f6c\u573a"}),(0,Kg.jsx)("div",{className:"designer-transition-list",children:((null===n||void 0===n?void 0:n.items)||[]).map((e=>(0,Kg.jsx)(MV,{transition:{poster:e.preview,src:e.sample},onClick:()=>i(e),active:AV(e,t)},e.id)))})]})})),GV=UV,XV=i(46816),qV=i(94175),HV=i.n(qV),YV=(0,XV.t1)(XV.OQ),KV=(0,XV.t1)(XV.PS),QV=e=>{var t=e.color,i=e.onChange,a=e=>{i(e)};return(0,Kg.jsxs)("div",{className:HV().CustomColor,children:[(0,Kg.jsx)("div",{className:HV().Saturation,children:(0,Kg.jsx)(YV,(0,u.Z)((0,u.Z)({},e),{},{color:t,onChange:a}))}),(0,Kg.jsxs)("div",{className:HV().handler,children:[(0,Kg.jsx)("div",{className:HV().Hue,children:(0,Kg.jsx)(KV,(0,u.Z)((0,u.Z)({},e),{},{color:t,onChange:a}))}),(0,Kg.jsx)("div",{className:HV().TwitterPicker,children:(0,Kg.jsx)(qL.e8,{onChange:a,color:t,styles:{default:{triangle:{display:"none"},swatch:{width:22,height:22},input:{height:22,width:81},label:{height:22},body:{padding:"12px 0"},card:{boxShadow:"none"},hash:{width:22,height:22}}},width:"100%"})})]})]})};QV.defaultProps={color:void 0};var JV=(0,qL.iS)(QV),$V=i(85518),eU=i.n($V),tU=e=>{var t,i,a,n,r=e.itemRef,o=e.listRef,s=(0,Cm.Z)(o),l=wj(),c=l.updateColor,d=l.changeDuration,u=Bw(),p=ni(u.endTransfer),v=null===u||void 0===u||null===(t=u.endTransfer)||void 0===t||null===(i=t.attribute)||void 0===i?void 0:i.colors,m=null===u||void 0===u||null===(a=u.endTransfer)||void 0===a?void 0:a.attribute.totalTime,h=e=>{d(e)},f=()=>p?u.pageAttr.pageInfo.offsetTime?Math.min(Nd,u.pageAttr.pageInfo.pageTime-u.pageAttr.pageInfo.offsetTime[1]-500):Math.min(Nd,u.pageAttr.pageInfo.pageTime-500):0,g={width:s.width,marginLeft:16-(null===r||void 0===r||null===(n=r.current)||void 0===n?void 0:n.offsetLeft)};return p?(0,Kg.jsxs)("div",{className:eU().transAction,style:g,children:[(0,Kg.jsxs)("div",{className:eU().transActionItem,children:[(0,Kg.jsxs)("div",{className:eU().transActionItemRow,children:["\u65f6\u957f",(0,Kg.jsx)(zM.Z,{min:Cd,max:f(),value:m,className:eU().rowTip,formatter:e=>"".concat(Number((null!==e&&void 0!==e?e:0)/1e3).toFixed(1),"s"),onChange:e=>{h(e)}})]}),(0,Kg.jsx)("div",{className:eU().transActionItemRow,style:{marginLeft:5},children:(0,Kg.jsx)(TP.Z,{value:m,min:Cd,max:f(),tipFormatter:e=>(0,Kg.jsxs)(Kg.Fragment,{children:[Number((null!==e&&void 0!==e?e:0)/1e3).toFixed(1),"s"]}),onChange:e=>{h(e)}})})]}),(0,Kg.jsxs)("div",{className:eU().transActionItem,children:[(0,Kg.jsx)("div",{className:eU().transActionItemRow,children:"\u989c\u8272"}),v&&Object.keys(v).map((e=>(0,Kg.jsx)(tE.Z,{destroyTooltipOnHide:!0,getPopupContainer:e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.parentNode},placement:"topRight",trigger:"click",content:(0,Kg.jsx)(JV,{color:Oh(v[e]),onChange:t=>{c(t.rgb,e)}}),children:(0,Kg.jsx)("div",{className:eU().transActionItemRowColor,style:{backgroundColor:Oh(v[e])}})},e)))]})]}):null},iU=(0,hp.Pi)(tU),aU=(0,hp.Pi)((()=>{var e=(0,r.useRef)(null),t=Lw(),i=t.template;function a(e){var t={resId:e.id,rt_url:e.sample,rt_preview_url:e.preview,height:Number(e.height),width:Number(e.width),picUrl:e.sample,rt_total_time:Zh(e.total_frame),rt_total_frame:e.total_frame,totalTime:Zh(e.total_frame)},i=Ow(),a=(0,u.Z)((0,u.Z)({},e),{},{assetInfo:{attribute:t,meta:{type:e.asset_type}}});Bw().endTransfer?Cw(i,a):Tw(i,a),xp.default.success("\u8f6c\u573a\u8bbe\u7f6e\u6210\u529f")}var n=(0,DI.ZP)(GF,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),s=n.data;n.loading;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"designer-transition-label",children:"\u906e\u7f69\u8f6c\u573a"}),(0,Kg.jsx)("div",{className:"designer-transition-list",ref:e,children:((null===s||void 0===s?void 0:s.items)||[]).map(((t,n)=>(0,Kg.jsx)(o().Fragment,{children:(0,Kg.jsx)(MV,{transition:{poster:t.preview,src:t.play_url},onClick:()=>a(t),active:AV(t,i),actionDom:t=>{var i=t.itemRef;return(0,Kg.jsx)(iU,{itemRef:i,listRef:e})}},t.id)},"transition-".concat(t.id))))})]})})),nU=aU;function rU(){var e=Lw(),t=e.template,i=t.endTransfer,a=()=>{var e=null===t||void 0===t?void 0:t.endTransfer;e&&Jj(Ow(),null===e||void 0===e?void 0:e.meta.id)},n=()=>{Kj(Ow())};return(0,Kg.jsx)(RM,{children:(0,Kg.jsxs)(MM,{tab:"\u8f6c\u573a",className:"designer-transition-panel",children:[(0,Kg.jsxs)("div",{className:"designer-transition-Wrap",children:[(0,Kg.jsx)(LV,{}),(0,Kg.jsx)(nU,{}),(0,Kg.jsx)(GV,{})]}),(0,Kg.jsxs)("div",{className:"designer-transition-bottom",hidden:!i,children:[(0,Kg.jsx)("div",{className:"transition-btn",onClick:n,children:"\u540c\u6b65\u5230\u6240\u6709\u9875\u9762"}),(0,Kg.jsx)("div",{className:"transition-btn",onClick:a,children:"\u53d6\u6d88\u8f6c\u573a"})]})]},"transition")})}var oU=(0,hp.Pi)(rU),sU=i(97688),lU=i.n(sU),cU=[{key:"background",name:"\u80cc\u666f",icon:"iconbackground",component(e){return(0,Kg.jsx)(Oz,(0,u.Z)({},e))}},{key:"text",name:"\u6587\u5b57",icon:"iconwenzi1",component(e){return(0,Kg.jsx)(jL,(0,u.Z)({},e))}},{key:"music",name:"\u97f3\u4e50",icon:"iconyinle2",component(e){return(0,Kg.jsx)(CF,(0,u.Z)({},e))}},{key:"material",name:"\u7d20\u6750",icon:"iconyuansu1",component(e){return(0,Kg.jsx)(wO,{})}},{key:"images",name:"\u56fe\u7247",icon:"iconzhaopian",component(e){return(0,Kg.jsx)(iW,(0,u.Z)({},e))}},{key:"video",name:"\u89c6\u9891",icon:"iconshipin1",component(e){return(0,Kg.jsx)(TW,(0,u.Z)({},e))}},{key:"effect",name:"\u89c6\u9891\u6ee4\u955c",icon:"lvjing",component(e){return(0,Kg.jsx)(RW,(0,u.Z)({},e))}},{key:"role",name:"\u89d2\u8272",icon:"iconshipinhaowode",component(e){return(0,Kg.jsx)(RF,(0,u.Z)({},e))}},{key:"role-more",name:"effect",hideInMenu:!0,component(e){return(0,Kg.jsx)(FF,(0,u.Z)({},e))}},{key:"user",name:"\u6211\u7684",icon:"iconant-design_cloud-upload-outlined",component(e){return(0,Kg.jsx)(SV,(0,u.Z)({},e))}},{key:"textEdit",includeTypes:["text"],name:"effect",hideInMenu:!0,component(){return(0,Kg.jsx)(JR,{})}},{key:"materialEdit",name:"effect",includeTypes:["SVG","image","lottie","pic","mask","video","videoE"],hideInMenu:!0,component(){return(0,Kg.jsx)(bB,{})}},{key:"effectEdit",name:"effect",includeTypes:["effect"],hideInMenu:!0,component(){return(0,Kg.jsx)(NB,{})}},{key:"moduleEdit",name:"module",includeTypes:["module","__module"],hideInMenu:!0,component(){return(0,Kg.jsx)(cL,{})}},{key:"audioController",name:"audioController",includeTypes:[],hideInMenu:!0,component(){return(0,Kg.jsx)(WW,{})}},{key:"transition",name:"\u8f6c\u573a",includeTypes:[],hideInMenu:!0,component(){return(0,Kg.jsx)(oU,{})}}];function dU(e){var t=cU.filter((t=>{var i;return null===(i=t.includeTypes)||void 0===i?void 0:i.includes(e.meta.type)}))[0];return(null===t||void 0===t?void 0:t.key)||""}var uU=(0,hp.Pi)((()=>{var e=zv(),t=e.activeAudio,i=qI(),a=i.activeMenu,n=i.setActiveMenu,o=i.activeSubMenu,s=i.setActiveSubMenu,l=i.activeOperationMenu,c=i.setActiveOperationMenu,d=Vw(),u=d.currentAsset,p=d.moduleItemActive,v=d.multiSelect;TM((()=>{var e,i,a,n="";(null===v||void 0===v?void 0:v.length)>1||ti(u)?(null===v||void 0===v?void 0:v.length)>1&&(null===(e=v[0])||void 0===e||null===(i=e.template)||void 0===i?void 0:i.id)!==(null===(a=Bw())||void 0===a?void 0:a.id)||v.every((e=>!ti(e)))&&(n=p?dU(p):"moduleEdit"):u&&!ii(u)?n=dU(u):t&&(n="audioController");c(n)}),[null===u||void 0===u?void 0:u.meta.id,p,v,t]);var m=(0,r.useMemo)((()=>{var e;return(null===(e=document.getElementById("designer-".concat(o||a)))||void 0===e?void 0:e.offsetTop)||0}),[a,o]);return(0,Kg.jsxs)("div",{className:lU()["xiudodo-designer-aside"],children:[(0,Kg.jsxs)("div",{className:lU()["side-menu"],children:[cU.map((e=>(0,Kg.jsxs)("div",{hidden:e.hideInMenu,id:"designer-".concat(e.key),className:lU()["menu-item"],onMouseDown:()=>{eu(),Ov(),n(e.key),s("")},children:[e.icon&&(0,Kg.jsx)(iP,{type:e.icon,className:lU().icon}),(0,Kg.jsx)("span",{children:e.name})]},e.key))),!l&&(0,Kg.jsx)("div",{className:lU()["menu-item-active-background"],style:{top:m}})]}),(0,Kg.jsx)("div",{className:lU()["side-panel"],children:cU.map((e=>(0,Kg.jsx)(eM,{visible:l?l===e.key:o?o===e.key:a===e.key,children:e.component&&e.component({keyName:e.key,getMore:["background","music","material","images"].includes(e.key)?s:c,className:""})},e.key)))})]})})),pU=uU,vU=i(86568),mU=()=>window.innerWidth>1440?"large":"small",hU=i(47311),fU=i.n(hU),gU=e=>{var t=e.src;return(0,Kg.jsx)("div",{className:fU().Image,children:(0,Kg.jsx)("img",{className:fU().previewImage,src:t,alt:""})})},xU=(0,hp.Pi)(gU);i(59322);var yU=i(31314),bU=i.n(yU),_U=i(80026),jU=i.n(_U),wU=(e,t)=>{var i="".concat(t,"&x-oss-process=video/snapshot,t_").concat(e,",f_jpg,w_100");return i};function kU(e){var t=e.assetUrl,i=e.assetWidth,a=e.assetHeight,o=e.assetDuation,s=e.style,l=e.poster,c=e.loopTimes,d=void 0===c?1:c,v=(0,r.useState)(!1),h=(0,n.Z)(v,2),f=h[0],g=(h[1],(0,r.useRef)(null)),x=(0,Cm.Z)(g),y=x.width,b=x.height,_=(0,r.useState)([]),j=(0,n.Z)(_,2),w=j[0],k=j[1];function T(e){return Z.apply(this,arguments)}function Z(){return Z=(0,p.Z)(m().mark((function e(t){var i,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,ZA(t);case 2:a=e.sent,0===a.code&&(null===(i=a.data)||void 0===i?void 0:i.count)>=0&&(n=new Array(d).fill(a.data.urls),k((0,lM.Z)(n)));case 4:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}return(0,r.useEffect)((()=>{if(y&&b&&t&&d>0){var e=y/d,n=b*(i/a),r=Math.floor(e/n),s=Math.floor(o/r);if(t.indexOf(".mp4?")>=0){for(var l=[],c=0;c<r;c++)l.push(wU(c*s,t));var u=new Array(d).fill(l);k((0,lM.Z)(u))}else s=o/1e3*30/r,T({frame_file:encodeURIComponent(t),img_count:r,img_step:s})}}),[t,b,y,d]),(0,Kg.jsx)("div",{ref:g,className:jU()["rail-wrap"],style:(0,u.Z)((0,u.Z)({},s),{},{background:"url(".concat(l,") center / auto 100% repeat-x")}),children:w.map(((e,t)=>(0,Kg.jsx)("img",{src:f?bU():e,alt:"videoFrame"},"rail-".concat(e,"-").concat(t))))})}var TU,ZU,CU,NU,SU,IU,AU,PU=(0,r.memo)(kU);function MU(e){var t=e.duration,i=e.onChange,a=e.children,n=e.overlayClassName,o=e.durationTooltip,s=void 0===o||o,l=e.onFinish,c=(0,r.useRef)(null),d=(0,Cm.Z)(c),u=d.width,p=void 0===u?0:u,v=(a,n)=>{var r;Ph(a),a.preventDefault(),a.nativeEvent.preventDefault(),Fh(a,(a=>{var o=e.startTime,s=e.endTime,l=o,c=Math.ceil(t*(a/p));switch(n){case"start":o+=c,l=o;break;case"end":s+=c,l=s;break;default:o+=c,s+=c,l=o}r=i({startTime:o,endTime:s,currentTime:l,changeTime:c},n)}),(()=>{l&&l({target:n,extra:r})}))},m=(0,r.useMemo)((()=>{var i=Math.floor(e.startTime/t*100),a=Math.floor(e.endTime/t*100);return{start:i,end:a}}),[e]),h=e.startTime,f=e.endTime,g=e=>Number((e/1e3).toFixed(2));return(0,Kg.jsxs)("div",{ref:c,className:hb()("axis-track-wrap",{"axis-simple":(m.end-m.start)/100*p<25},n),children:[(0,Kg.jsx)("div",{className:"axis-track-left",style:{width:"".concat(m.start,"%")},children:(0,Kg.jsx)(xF.Z,{title:Th(g(h)),getPopupContainer:e=>e,children:(0,Kg.jsx)("div",{id:"axis-track-left",className:hb()("axis-track-handle","axis-track-handle-left"),onMouseDown:e=>v(e,"start"),children:(0,Kg.jsx)("div",{className:"axis-track-line"})})})}),(0,Kg.jsxs)("div",{className:"axis-track-center",onMouseDown:e=>v(e,"center"),style:{minWidth:1,width:"".concat(m.end-m.start,"%")},children:[s&&(0,Kg.jsx)("div",{className:"axis-track-duration",children:Th(g(f-h))}),(0,Kg.jsx)("div",{className:"axis-track-content",children:a})]}),(0,Kg.jsx)("div",{className:"axis-track-right",style:{width:"".concat(100-m.end,"%")},children:(0,Kg.jsx)(xF.Z,{title:Th(g(f)),getPopupContainer:e=>e,children:(0,Kg.jsx)("div",{className:hb()("axis-track-handle","axis-track-handle-right"),onMouseDown:e=>v(e,"end"),children:(0,Kg.jsx)("div",{className:"axis-track-line"})})})})]})}var EU=(TU=Reflect.metadata("design:type",Function),ZU=Reflect.metadata("design:paramtypes",[]),CU=class{constructor(){(0,l.Z)(this,"scaleTime",NU,this),(0,l.Z)(this,"scaleWidth",SU,this),(0,l.Z)(this,"paddingLeft",IU,this),this.timeLineWrapper=void 0,(0,l.Z)(this,"initOptions",AU,this),this.initTimeLineWrapper=e=>{this.timeLineWrapper=e},(0,s.rC)(this),this.timeLineWrapper=null}get metaScaleWidth(){return this.scaleTime/this.scaleWidth}},NU=(0,c.Z)(CU.prototype,"scaleTime",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),SU=(0,c.Z)(CU.prototype,"scaleWidth",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 15}}),IU=(0,c.Z)(CU.prototype,"paddingLeft",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),AU=(0,c.Z)(CU.prototype,"initOptions",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=e.scaleTime,i=e.scaleWidth,a=e.paddingLeft;this.scaleTime=t,this.scaleWidth=i,this.paddingLeft=a}}}),(0,c.Z)(CU.prototype,"metaScaleWidth",[s.Fl,TU,ZU],Object.getOwnPropertyDescriptor(CU.prototype,"metaScaleWidth"),CU.prototype),CU),LU=new EU,DU=LU,RU=e=>{var t=e.children,i=e.scaleTime,a=e.scaleWidth,n=e.paddingLeft,o=DU.initOptions,s=DU.initTimeLineWrapper,l=(0,r.useRef)(null);return(0,r.useLayoutEffect)((()=>{o({scaleTime:i,scaleWidth:a,paddingLeft:n})}),[i,a,n]),(0,r.useLayoutEffect)((()=>{l.current&&s(l.current)}),[l]),(0,Kg.jsx)("div",{ref:l,className:"timeLine-wrapper",children:t})},zU=RU;class FU{constructor(e,t){this.ctx=void 0,this.el=void 0,this.options=void 0,this.devicePixelRatio=void 0,this.drawRuler=()=>{if(this.ctx){var e=this.options,t=e.width,i=void 0===t?0:t,a=e.height,n=e.background,r=void 0===n?"rgba(255, 255, 255, 0)":n,o=e.scaleColor,s=e.scaleWidth,l=void 0===s?1:s,c=e.scaleHeight,d=void 0===c?a:c,u=e.lineWidth,p=void 0===u?1:u,v=e.fontColor,m=void 0===v?"#57575C":v,h=e.offsetLeft,f=void 0===h?0:h,g=e.labelInterval,x=e.formatter,y=void 0===x?e=>e:x,b=e.textAlign,_=void 0===b?"left":b,j=e.paddingLeft,w=void 0===j?0:j,k=e.fontOffsetY,T=void 0===k?.5*a:k,Z=e.fontOffsetX,C=void 0===Z?0:Z,N=e.textBaseline,S=void 0===N?"alphabetic":N,I=e.fontSize,A=void 0===I?"14px Arial":I;this.el.style.width="".concat(i,"px"),this.el.style.height="".concat(a,"px"),this.el.width=i*this.devicePixelRatio,this.el.height=a*this.devicePixelRatio,this.ctx.scale(this.devicePixelRatio,this.devicePixelRatio),this.ctx.clearRect(0,0,i,a),this.ctx.fillStyle=r;for(var P=i/l,M=f%l,E=~~(f/l),L=0;L<P;L++){this.ctx.beginPath(),this.ctx.save(),this.ctx.strokeStyle=o,this.ctx.lineWidth=p,this.ctx.lineCap="round";var D=l*L-M+w;if(this.ctx.moveTo(D,0),(L+E)%g===0){this.ctx.lineTo(D,d);var R=y(L+E);this.ctx.font=A,this.ctx.fillStyle=m,this.ctx.textBaseline=S,this.ctx.textAlign=_,this.ctx.fillText(R.toString(),D+C,T)}else this.ctx.lineTo(D,Math.floor(.5*d));this.ctx.stroke(),this.ctx.restore(),this.ctx.closePath()}}},this.updateOptions=e=>{Object.assign(this.options,e),this.drawRuler()},this.updateOption=e=>{this.options=(0,u.Z)((0,u.Z)({},this.options),e),this.drawRuler()},this.el=e,this.options=t,this.ctx=e.getContext("2d"),this.devicePixelRatio=window.devicePixelRatio||1}}var OU=e=>{var t=e.width,i=e.height,a=(0,r.useRef)(null),n=(0,r.useRef)(),o=DU.paddingLeft;return(0,r.useLayoutEffect)((()=>{if(a.current)if(n.current)n.current.updateOptions((0,u.Z)((0,u.Z)({},e),{},{paddingLeft:o}));else{var t=new FU(a.current,(0,u.Z)((0,u.Z)({},e),{},{paddingLeft:o}));t.drawRuler(),n.current=t}}),[...Object.values(e)]),(0,Kg.jsx)("div",{style:{width:t,height:i},children:(0,Kg.jsx)("canvas",{ref:a})})},BU=OU;class WU{constructor(e,t){this.originalPosition=void 0,this.position={left:0,top:0},this.hooks=void 0,this.calcMoveDistance=e=>{var t=e.left,i=e.top;return{left:t-this.originalPosition.left,top:i-this.originalPosition.top}},this.onMouseUp=e=>{var t=e.pageX,i=e.pageY;this.position=this.calcMoveDistance({left:t,top:i}),this.hooks.onMouseUp({distanceX:this.position.left,distanceY:this.position.top,event:e}),window.removeEventListener("mouseup",this.onMouseUp),window.removeEventListener("mousemove",this.onMouseMove)},this.onMouseMove=e=>{var t=e.pageX,i=e.pageY;this.position=this.calcMoveDistance({left:t,top:i}),this.hooks.onMouseMove({distanceX:this.position.left,distanceY:this.position.top,event:e})},this.onMouseDown=()=>{window.addEventListener("mouseup",this.onMouseUp),window.addEventListener("mousemove",this.onMouseMove)},this.originalPosition=e,this.hooks=t}}var VU=4,UU=4,GU=()=>(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",backgroundColor:"#C86DD7",borderRadius:"5px"}}),XU={height:30,render:GU},qU=()=>(0,$v.Z)({length:6});function HU(e,t){return e/t}function YU(e,t){return e*t}function KU(e,t,i){var a=t.type,n=t.trackId,r=e.trackTypes,o=void 0===r?[]:r,s=o.find((e=>e.types.includes(a||""))),l=s||XU,c={trackId:n||qU(),type:a,height:l.height,tracksRange:{minY:i,midY:i+l.height/2,maxY:i+l.height},assets:[]};return c}function QU(e){var t={trackId:qU(),isAddTrack:!0,tracksRange:{minY:e,midY:e+VU/2,maxY:e+VU},height:VU,assets:[]};return t}var JU=(e,t,i)=>{var a=i.getAsset(e.id),n={source:e,height:t.height,trackId:t.trackId,id:e.id,startTime:e.startTime,endTime:e.endTime,fixedPosition:{top:0,left:0},tracksRange:(0,u.Z)({},t.tracksRange)};return a?(i.updateAsset(a,n),a):n},$U=(e,t,i)=>{var a=[],n=0;return e.forEach((e=>{var r=e.trackId,o=a.find((e=>e.trackId===r));o||(a.push(QU(n)),n+=VU,o=KU(t,e,n),n+=o.height,a.push(o));var s=JU(e,o,i);o.assets.push(s)})),a.push(QU(n)),a},eG=e=>{var t=e.path||e.composedPath&&e.composedPath()||[];return t.some((e=>"timeLine-asset"===(null===e||void 0===e?void 0:e.className)))},tG=(e,t,i)=>{(0,r.useEffect)((()=>{if(i)if(e&&e.length){var a=$U(e,t,i);i.initTracks(a),i.initOptions(t)}else i.initTracks([])}),[e,t,i])},iG=e=>{var t=e.ele,i=e.onMouseMove,a=void 0===i?()=>{}:i,n=e.onMouseUp,o=void 0===n?()=>{}:n,s=e.onMouseDown,l=void 0===s?()=>{}:s,c=e.stopPropagation,d=(0,r.useRef)({x:0,y:0});(0,r.useLayoutEffect)((()=>{if(t.current){var e=e=>{c&&e.stopPropagation(),d.current={x:e.pageX,y:e.pageY},l(e);var t=new WU({left:e.pageX,top:e.pageY},{onMouseMove:e=>{var t=e.distanceX,i=e.distanceY;(t||i)&&a(e)},onMouseUp:o});t.onMouseDown()};return t.current.addEventListener("mousedown",e),()=>{var i;null===(i=t.current)||void 0===i||i.removeEventListener("mousedown",e)}}}),[t,l,a,o,c])},aG=e=>{var t=t=>{var i=e.clearActiveIds,a=eG(t);a||i()};(0,r.useLayoutEffect)((()=>(window.addEventListener("click",t),()=>{window.removeEventListener("click",t)})))},nG=(e,t)=>{(0,r.useEffect)((()=>{t.setScale(e)}),[e])},rG=(e,t)=>{var i=e.scroll,a=e.duration,n=e.selectKeys,o=i.left,s=i.top;if((0,r.useEffect)((()=>{t.setScroll({left:o,top:s})}),[o,t,s]),(0,r.useEffect)((()=>{t.setDuration(a)}),[a,t]),n){var l=t.activeIds,c=t.replaceActiveIds;n.join()!==l.join()&&c(n)}},oG=(0,r.createContext)(void 0);function sG(){return(0,r.useContext)(oG)}var lG=e=>{var t=e.getBoundingClientRect(),i=t.left,a=t.top;return{left:i,top:a}};function cG(e){var t="".concat(e||"000");e<10?t="00".concat(e):e<100&&(t="0".concat(e));var i=e/1e3/60,a=i%1,n=Math.floor(60*a);return n<10&&(n="0".concat(n)),i<10&&(i="0".concat(Math.floor(i))),{m:i,s:n,ms:t.slice(-3,-1)}}var dG,uG,pG,vG,mG,hG,fG,gG,xG,yG,bG,_G,jG,wG,kG,TG,ZG,CG,NG,SG,IG,AG,PG,MG,EG,LG,DG,RG,zG,FG,OG,BG,WG,VG,UG,GG,XG=i(97329),qG=e=>{var t=e.startPoint,i=e.endPoint,a=e.asset,n=e.timeLineStore,r=n.tracks,o=n.options.adsorbLimit,s=n.duration,l=[t,i].filter((e=>void 0!==e)),c=new Array(l.length).fill(void 0);return o?(l.forEach(((e,n)=>t&&Math.abs(0-e)<=o?(c[n]=0,!0):i&&s&&Math.abs(s-e)<=o?(c[n]=s,!0):void r.find((t=>t.assets.find((t=>{var i=t.startTime,r=t.endTime;return t.id!==a.id&&(Math.abs(i-e)<=o?(c[n]=i,!0):Math.abs(r-e)<=o&&(c[n]=r,!0))})))))),c):c},HG=e=>{var t=e.asset,i=e.position,a=e.timeLineStore,n=a.tracks,r=t.tracksRange.midY+i.top,o=n.find(((e,t)=>{var i=e.tracksRange;return 0===t?r<=i.maxY:t===n.length-1?r>i.minY:r>i.minY&&r<=i.maxY}));return o},YG=(e,t)=>{var i={id:e.id,trackId:t,startTime:e.source.startTime,endTime:e.source.endTime};return i},KG=e=>{var t=e.accurateTrack,i=e.asset,a=e.position,n=e.updater,r=e.scale,o=e.timeLineStore.duration,s=i.source,l=s.startTime,c=s.endTime,d=YU(a.left,r),u=c-l,p={startTime:l+d,endTime:c+d};if(o&&p.endTime>o&&(p.endTime=o,p.startTime=p.endTime-u),p.startTime<0&&(p.startTime=0,p.endTime=0+u),t.assets.some((e=>e.id!==i.id&&!(p.endTime<=e.source.startTime||p.startTime>=e.source.endTime))))return!0;Object.assign(n,p),n.trackId=null===t||void 0===t?void 0:t.trackId},QG=e=>{var t=e.initialScroll,i=e.timeLineStore,a=e.changedPosition,n=e.asset,r=e.scale,o=n.startTime,s=n.endTime,l=i.scroll,c=i.setAlignLines,d=t.left,u=l.left-d,p=a.left+u,v=YU(p,r),m=qG({startPoint:v+o,endPoint:v+s,asset:n,timeLineStore:i}),h=m.filter((e=>void 0!==e));if(c(h),h.length){var f=h[0],g=f-(v+o);void 0===m[0]&&(g=f-(v+s));var x=HU(g,r);e.changedPosition.left+=x,e.position.left+=x}},JG=(e,t,i,a,n)=>{var r=n.updateAsset,o=n.putVirtualAsset,s=n.removeVirtualAsset,l=n.scroll,c=n.scale,d=i.left,u=i.top,p=l.left-d,v=l.top-u,m=a.distanceX,h=a.distanceY,f={asset:e,changedPosition:{left:m,top:h},position:{left:m+p,top:h+v},timeLineStore:n,initialScroll:i,updater:{id:e.id},scale:c};QG(f),r(e,{fixedPosition:{left:t.left+f.changedPosition.left,top:t.top+f.changedPosition.top}});var g=HG(f);if(g){f.accurateTrack=g;var x=KG(f);x||o(f.updater)}else s(e.id)},$G=(e,t,i)=>{var a=e.id,n=t.virtualAssets,r=t.replaceVirtualAssets,o=t.tracks,s=t.setInDragging,l=t.options,c=l.onTrackChange,d=void 0===c?()=>{}:c,u=l.onTimeChangeEnd,p=void 0===u?()=>{}:u,v=t.setAlignLines;v([]);var m=n.find((e=>e.id===a));if(m){if(m.trackId!==e.trackId){for(var h=0,f=0;f<o.length;f++){var g=o[f];if(g.trackId===m.trackId){if(g.isAddTrack)break;var x=g.assets.filter((t=>t.source.endTime<m.startTime&&t.id!==e.id)).length;h+=x;break}g.isAddTrack||(h+=g.assets.filter((t=>t.id!==e.id)).length)}d({id:a,fromTrackId:e.trackId,trackId:m.trackId,index:h,record:e.source})}m.startTime===e.source.startTime&&m.endTime===e.source.endTime||p({id:a,startTime:m.startTime,endTime:m.endTime,changeType:"move",record:e.source,event:i.event})}r([]),s(!1)},eX=(e,t,i)=>{var a=e.tracks,n=a.find((e=>e.trackId===t.trackId));if(n){var r=n.assets.findIndex((e=>e.id===t.id));return n.assets[r-("next"===i?-1:1)]}},tX=(e,t,i)=>{var a=t.distanceX,n=t.event,r=i.updateAsset,o=i.options,s=i.setAlignLines,l=i.scale,c=o.onTimeChange,d=void 0===c?()=>{}:c,u=e.source,p=u.startTime,v=u.endTime,m=u.id,h=u.minDuration,f=void 0===h?UU:h,g=u.minStartTime,x=void 0===g?0:g,y=YU(a,l),b=p+y,_=eX(i,e,"prev"),j=Math.max((null===_||void 0===_?void 0:_.source.endTime)||x||0,x),w=[j,v-f],k=qG({startPoint:p+y,asset:e,timeLineStore:i}).filter((e=>void 0!==e&&e>=w[0]&&e<=w[1]));s(k),void 0!==k[0]&&(b=k[0]+0),b=(0,XG.Z)(b,w[0],w[1]),r(e,{startTime:b}),b!==p&&d({id:m,startTime:b,endTime:v,changeType:"start",record:u,event:n})},iX=(e,t,i)=>{var a=t.distanceX,n=t.event,r=i.updateAsset,o=i.options,s=i.setAlignLines,l=i.scale,c=o.onTimeChange,d=void 0===c?()=>{}:c,u=e.source,p=u.startTime,v=u.endTime,m=u.id,h=u.maxEndTime,f=void 0===h?1/0:h,g=u.minDuration,x=void 0===g?UU:g,y=YU(a,l),b=v+y,_=eX(i,e,"next"),j=Math.min((null===_||void 0===_?void 0:_.source.startTime)||1/0,f),w=[p+x,j],k=qG({endPoint:b,asset:e,timeLineStore:i}).filter((e=>void 0!==e&&e>=w[0]&&e<=w[1]));s(k),void 0!==k[0]&&(b=k[0]+0),b=(0,XG.Z)(b,w[0],w[1]);var T=i.getAsset(e.id);T&&r(T,{endTime:b}),b!==v&&d({id:m,startTime:p,endTime:b,changeType:"end",record:u,event:n})},aX=(e,t,i,a)=>{var n=e.source,r=e.startTime,o=e.endTime,s=e.id,l=t.options.onTimeChangeEnd,c=void 0===l?()=>{}:l,d=t.setAlignLines;d([]),c({id:s,startTime:r,endTime:o,changeType:i,record:n,event:a.event})},nX=(e,t)=>{var i=e.width,a=e.time,o=(0,r.useState)(null),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useRef)(null),u=()=>{if(d.current){var e=lG(d.current),t=e.top,i=e.left;c({top:t,left:i})}};(0,r.useLayoutEffect)((()=>{u()}),[]),iG({ele:d,onMouseDown:()=>{u()},onMouseMove:()=>{u()}});var p=cG(Math.max(a,0));return(0,Kg.jsx)("div",{className:hb()("timeLine-handler",{"timeLine-handler-ghost":i<30}),ref:t,children:(0,Kg.jsxs)("div",{className:"timeLine-handler-icon",ref:d,onMouseEnter:u,children:[(0,Kg.jsx)("div",{style:{left:null===l||void 0===l?void 0:l.left,top:null===l||void 0===l?void 0:l.top},className:hb()("timeLine-handler-tooltip"),children:(0,Kg.jsxs)("div",{className:"timeLine-handler-tooltip-content",children:[(0,Kg.jsx)("div",{className:"timeLine-handler-tooltip-arrow"}),p.m,":",p.s,".",p.ms]})}),(0,Kg.jsx)("span",{}),(0,Kg.jsx)("span",{})]})})},rX=(0,r.forwardRef)(nX),oX=(0,hp.Pi)(rX),sX=e=>{var t=e.asset,i=e.width,a=t.source,n=a.id,o=a.disableDrag,s=sG(),l=s.replaceActiveIds,c=s.activeIds,d=s.setInDragging,p=s.updateAsset,v=s.putVirtualAsset,m=s.scroll,h=s.options,f=s.inDragging,g=h.onMouseMove,x=void 0===g?()=>{}:g,y=h.onMouseDown,b=void 0===y?()=>{}:y,_=h.onMouseUp,j=void 0===_?()=>{}:_,w=(0,r.useRef)(null),k=(0,r.useRef)(null),T=(0,r.useRef)(null),Z=(0,r.useRef)(t.fixedPosition),C=(0,r.useRef)(m),N=(e,t)=>{var i,r;console.log("source",a,null===(i=a.asset)||void 0===i||null===(r=i.meta)||void 0===r?void 0:r.type),b({id:n,record:a,changeType:e,event:t}),l([n])},S=()=>{if(T.current){var e=lG(T.current);return p(t,{fixedPosition:e}),Z.current=e,C.current=(0,u.Z)({},m),e}};return(0,r.useLayoutEffect)((()=>{S()}),[]),iG({ele:w,stopPropagation:!0,onMouseDown:e=>{N("start",e)},onMouseMove:e=>{tX(t,e,s),x({id:n,record:a,changeType:"start",event:e.event})},onMouseUp:e=>{aX(t,s,"start",e),j({id:n,record:a,changeType:"start",event:e.event})}}),iG({ele:k,stopPropagation:!0,onMouseDown:e=>{N("end",e)},onMouseMove:e=>{iX(t,e,s),x({id:n,record:a,changeType:"end",event:e.event})},onMouseUp:e=>{aX(t,s,"end",e),j({id:n,record:a,changeType:"end",event:e.event})}}),iG({ele:T,onMouseDown:e=>{S(),N("move",e),d(!0);var i=YG(t,t.trackId);v(i)},onMouseMove:e=>{x({id:n,record:a,changeType:"move",event:e.event}),T.current&&!o&&JG(t,Z.current,C.current,e,s)},onMouseUp:e=>{$G(t,s,e),j({id:n,record:a,changeType:"move",event:e.event})}}),(0,Kg.jsxs)("div",{className:hb()("timeLine-dragItem",{"timeLine-dragItem-active":c.includes(n),"timeLine-dragItem-dragging":f}),ref:T,children:[(0,Kg.jsx)(oX,{width:i,ref:w,time:t.startTime}),(0,Kg.jsx)(oX,{width:i,ref:k,time:t.endTime})]})},lX=(0,hp.Pi)(sX),cX=e=>{var t=e.asset,i=e.height,a=t.source,n=a.type,o=a.id,s=t.endTime,l=t.startTime,c=(0,r.useRef)(null),d=sG(),p=d.options.trackTypes,v=void 0===p?[]:p,m=d.inDragging,h=d.activeIds,f=d.scale,g=HU(s-l,f),x=v.find((e=>e.types.includes(n||""))),y=(null===x||void 0===x?void 0:x.previewRender)||GU,b=h.includes(o),_=m&&b?(0,u.Z)({position:"fixed",zIndex:2},t.fixedPosition):{left:HU(l,f)};return(0,Kg.jsx)("div",{className:"timeLine-asset",ref:c,style:(0,u.Z)((0,u.Z)({width:g,height:i},_),{},{display:g<=0?"none":"block"}),children:(0,Kg.jsxs)("div",{className:"timeLine-assetContent",children:[(0,Kg.jsx)("div",{className:"timeLine-preview",children:y(t,b)}),(0,Kg.jsx)(lX,{asset:t,width:g})]})})},dX=(0,hp.Pi)(cX),uX=e=>{var t=e.track,i=t.height,a=t.assets,n=t.trackId,o=sG(),s=o.virtualAssets,l=o.scale,c=(0,r.useRef)(null),d=s.filter((e=>e.trackId===n));return(0,Kg.jsxs)("div",{className:hb()("timelint-track",{"timelint-track-add-active":d.length&&t.isAddTrack}),ref:c,style:{height:i},children:[a.map((e=>(0,Kg.jsx)(dX,{asset:e,height:i},e.id))),!t.isAddTrack&&d.map((e=>(0,Kg.jsx)("div",{className:"timelint-virtual-asset",style:{left:HU(e.startTime,l),width:HU(e.endTime-e.startTime,l)}},e.id)))]})},pX=(0,hp.Pi)(uX),vX=(dG=Reflect.metadata("design:type","undefined"===typeof vU.TimeLineOpts?Object:vU.TimeLineOpts),uG=Reflect.metadata("design:type",Array),pG=Reflect.metadata("design:type",Array),vG=Reflect.metadata("design:type","undefined"===typeof VirtualItem?Object:VirtualItem),mG=Reflect.metadata("design:type",Array),hG=Reflect.metadata("design:type","undefined"===typeof vU.Position?Object:vU.Position),fG=Reflect.metadata("design:type",Array),gG=Reflect.metadata("design:type",Function),xG=Reflect.metadata("design:paramtypes",[]),yG=class{constructor(){(0,l.Z)(this,"options",bG,this),(0,l.Z)(this,"tracks",_G,this),(0,l.Z)(this,"virtualAssets",jG,this),(0,l.Z)(this,"virtualItem",wG,this),(0,l.Z)(this,"activeIds",kG,this),(0,l.Z)(this,"inDragging",TG,this),(0,l.Z)(this,"scale",ZG,this),(0,l.Z)(this,"duration",CG,this),(0,l.Z)(this,"scroll",NG,this),(0,l.Z)(this,"alignLines",SG,this),(0,l.Z)(this,"initTracks",IG,this),(0,l.Z)(this,"initOptions",AG,this),(0,l.Z)(this,"addActiveId",PG,this),(0,l.Z)(this,"replaceActiveIds",MG,this),(0,l.Z)(this,"putVirtualAsset",EG,this),(0,l.Z)(this,"replaceVirtualAssets",LG,this),(0,l.Z)(this,"removeVirtualAsset",DG,this),(0,l.Z)(this,"clearActiveIds",RG,this),(0,l.Z)(this,"updateAsset",zG,this),(0,l.Z)(this,"updateTrack",FG,this),(0,l.Z)(this,"setInDragging",OG,this),(0,l.Z)(this,"setScroll",BG,this),(0,l.Z)(this,"setDuration",WG,this),(0,l.Z)(this,"setScale",VG,this),(0,l.Z)(this,"setVirtualItem",UG,this),(0,l.Z)(this,"setAlignLines",GG,this),this.getAsset=e=>this.assetsMap.find((t=>t.id===e)),(0,s.rC)(this)}get assetsMap(){var e=[];return this.tracks.forEach((t=>{t.assets.forEach((t=>e.push(t)))})),e}},bG=(0,c.Z)(yG.prototype,"options",[s.LO,dG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{consolidatable:!1}}}),_G=(0,c.Z)(yG.prototype,"tracks",[s.LO,uG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jG=(0,c.Z)(yG.prototype,"virtualAssets",[s.LO,pG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wG=(0,c.Z)(yG.prototype,"virtualItem",[s.LO,vG],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),kG=(0,c.Z)(yG.prototype,"activeIds",[s.LO,mG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),TG=(0,c.Z)(yG.prototype,"inDragging",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ZG=(0,c.Z)(yG.prototype,"scale",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),CG=(0,c.Z)(yG.prototype,"duration",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),NG=(0,c.Z)(yG.prototype,"scroll",[s.LO,hG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{left:0,top:0}}}),SG=(0,c.Z)(yG.prototype,"alignLines",[s.LO,fG],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),IG=(0,c.Z)(yG.prototype,"initTracks",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.tracks=e}}}),AG=(0,c.Z)(yG.prototype,"initOptions",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.options,e)}}}),PG=(0,c.Z)(yG.prototype,"addActiveId",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.activeIds.push(e)}}}),MG=(0,c.Z)(yG.prototype,"replaceActiveIds",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.activeIds=e}}}),EG=(0,c.Z)(yG.prototype,"putVirtualAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.virtualAssets.find((t=>t.id===e.id));return t?(Object.assign(t,e),t):(this.virtualAssets.push(e),this.virtualAssets[this.virtualAssets.length-1])}}}),LG=(0,c.Z)(yG.prototype,"replaceVirtualAssets",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.virtualAssets=e}}}),DG=(0,c.Z)(yG.prototype,"removeVirtualAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{var t=this.virtualAssets.findIndex((t=>t.id===e));-1!==t&&this.virtualAssets.splice(t,1)}}}),RG=(0,c.Z)(yG.prototype,"clearActiveIds",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{this.activeIds=[]}}}),zG=(0,c.Z)(yG.prototype,"updateAsset",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{Object.assign(e,t)}}}),FG=(0,c.Z)(yG.prototype,"updateTrack",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{Object.assign(e,t)}}}),OG=(0,c.Z)(yG.prototype,"setInDragging",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.inDragging=e}}}),BG=(0,c.Z)(yG.prototype,"setScroll",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{Object.assign(this.scroll,e)}}}),WG=(0,c.Z)(yG.prototype,"setDuration",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.duration=e}}}),VG=(0,c.Z)(yG.prototype,"setScale",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.scale=e}}}),UG=(0,c.Z)(yG.prototype,"setVirtualItem",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.virtualItem=e}}}),GG=(0,c.Z)(yG.prototype,"setAlignLines",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.alignLines=e}}}),(0,c.Z)(yG.prototype,"assetsMap",[s.Fl,gG,xG],Object.getOwnPropertyDescriptor(yG.prototype,"assetsMap"),yG.prototype),yG),mX=vX,hX=()=>{var e=sG(),t=e.alignLines,i=DU,a=i.metaScaleWidth;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)("div",{className:"timeline-align-line",style:{left:HU(e,a)}},e)))})},fX=(0,hp.Pi)(hX),gX=e=>{var t=e.data,i=e.options,a=e.className,n=e.scale,r=void 0===n?1:n,o=e.style,s=e.duration,l=void 0===s?0:s,c=DU,d=c.metaScaleWidth,u=c.scaleTime,p=c.scaleWidth,v=(0,Ju.Z)((()=>new mX),[]);rG(e,v),tG(t,i,v),nG(d*r,v),aG(v);var m=v.tracks;return(0,Kg.jsx)(oG.Provider,{value:v,children:(0,Kg.jsxs)("div",{className:hb()("timeLine-item-wrapper",a),style:o,children:[(0,Kg.jsx)(fX,{}),(0,Kg.jsx)("div",{className:"timeLine-item",style:{width:HU(l,u/p)},children:m.map((e=>(0,Kg.jsx)(pX,{track:e},e.trackId)))})]})})};gX.defaultProps={className:void 0,selectKeys:void 0,style:void 0};var xX=(0,hp.Pi)(gX),yX=e=>{var t=e.currentTime,i=e.scrollLeft,a=e.onTimeChange,o=void 0===a?()=>{}:a,s=e.maxDuration,l=e.hidden,c=DU.metaScaleWidth,d=DU.paddingLeft,u=DU.timeLineWrapper,p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useRef)(null),g=(0,r.useRef)(null),x=HU(t,c)+d-i,y=(0,r.useCallback)(((e,i)=>{var a=(0,XG.Z)(e,0,s);a!==t&&o(a,i)}),[t,s]),b=(0,r.useCallback)((e=>{if(f.current){var t=lG(f.current),a=t.left,n=YU(e.pageX-a+i,c);y(n,"click")}}),[i,c,y]);return(0,r.useLayoutEffect)((()=>(null===u||void 0===u||u.addEventListener("click",b),()=>{null===u||void 0===u||u.removeEventListener("click",b)})),[u,b]),iG({ele:g,onMouseDown:()=>{h(!0),e_(!0)},onMouseMove:e=>{var i=t+YU(e.distanceX,c);y(i,"move")},onMouseUp:()=>{h(!1),e_(!1)}}),(0,Kg.jsxs)("div",{className:"pointer-wrapper",children:[(0,Kg.jsx)("div",{className:"pointer-handler",style:{left:d},ref:f}),(0,Kg.jsxs)("div",{className:hb()("pointer-content",{"pointer-content-hidden":l}),style:{left:x},children:[(0,Kg.jsx)("div",{className:hb()("pointer-arrow",{"pointer-arrow-moving":m}),ref:g}),(0,Kg.jsx)("div",{className:"pointer-line"})]})]})};yX.defaultProps={onTimeChange:()=>{},hidden:!1};var bX=(0,hp.Pi)(yX),_X=zU;_X.Ruler=BU,_X.Item=xX,_X.Pointer=bX;var jX,wX,kX,TX,ZX,CX,NX,SX,IX,AX,PX,MX,EX,LX,DX,RX,zX,FX,OX,BX,WX,VX,UX,GX,XX,qX,HX,YX,KX,QX,JX,$X,eq=_X,tq=e=>{var t=e.asset,i=Sq.timeLineScale,a=t.source,n=a.asset,r=(n.meta.type,n.assetDurationWithOffset),o=n.attribute,s=o.rt_url,l=o.rt_frame_file,c=o.rt_total_time,d=void 0===c?0:c,u=o.width,p=o.height,v=(o.isLoop,o.startTime),m=o.endTime,h=o.cst,f=void 0===h?0:h,g=()=>Math.ceil((m-v)/(Math.min(r.endTime,d)-r.startTime)),x=g();return(0,Kg.jsx)("div",{className:fU().Video,children:(0,Kg.jsx)("div",{className:fU().videoOffset,style:{transform:"translateX(".concat(-HU(t.startTime-a.startTime,i),"px)")},children:(0,Kg.jsx)(PU,{assetUrl:s&&s.indexOf(".webm")>-1?l||"":s,assetDuation:d,assetWidth:u,assetHeight:p,loopTimes:x,style:{width:HU(d*x,i),left:"-".concat(HU(f,i),"px")}})})})},iq=(0,hp.Pi)(tq),aq=[{type:"rect",name:"\u77e9\u5f62",icon:"juxing"},{type:"ellipse",name:"\u5706\u5f62",icon:"yuanxing"},{type:"triangle",name:"\u4e09\u89d2\u5f62",icon:"sanjiaoxing"},{type:"line",name:"\u76f4\u7ebf",icon:"zhixian"}],nq=e=>{var t=e.shapeType,i=aq.find((e=>e.type===t));return(0,Kg.jsxs)("div",{className:fU().svgPath,children:[(0,Kg.jsx)(iP,{type:(null===i||void 0===i?void 0:i.icon)||"zhixian",style:{marginRight:6}}),(null===i||void 0===i?void 0:i.name)||"\u8def\u5f84"]})},rq=nq,oq=e=>{var t=e.text;return(0,Kg.jsxs)("div",{className:fU().textWrapper,children:[(0,Kg.jsx)(iP,{type:"iconwenzi1",className:fU().icon}),(0,Kg.jsx)("div",{className:fU().text,children:t})]})},sq=(0,hp.Pi)(oq),lq=()=>(0,Kg.jsxs)("div",{className:fU().Group,children:[(0,Kg.jsx)(iP,{type:"icona-173",className:fU().icon}),"\u7ec4\u4ef6\u65f6\u95f4\u8f74"]}),cq=lq,dq=e=>{var t=e.asset,i=t.source,a=i.template,n=a.pageAttr.backgroundColor;return(0,Kg.jsx)("div",{className:fU().emptyBg,style:{backgroundColor:"rgba(".concat(n.r,", ").concat(n.g,", ").concat(n.b,", ").concat(n.a||1,")")}})},uq=dq,pq=e=>{var t=e.asset,i=t.source,a=i.asset,n=a&&hi(a),r=(null===n||void 0===n?void 0:n.meta.type)||t.source.type||"",o=(null===n||void 0===n?void 0:n.attribute)||{},s=o.text,l=void 0===s?[]:s,c=o.picUrl,d=o.SVGUrl,u=(o.rt_svgString,o.rt_preview_url),p=()=>{switch(r){case"image":case"pic":case"background":return(0,Kg.jsx)(xU,{src:c||""});case"SVG":case"mask":return(0,Kg.jsx)(xU,{src:(null!==u&&void 0!==u?u:d)||""});case"lottie":case"videoE":return(0,Kg.jsx)(xU,{src:u||""});case"text":return(0,Kg.jsx)(sq,{text:l||""});case"svgPath":return(0,Kg.jsx)(rq,{shapeType:(null===n||void 0===n?void 0:n.meta.shapeType)||"path"});case"video":return null!==a&&void 0!==a&&a.meta.isBackground?(0,Kg.jsx)(iq,{asset:t}):(0,Kg.jsx)(xU,{src:u||""});case"module":return(0,Kg.jsx)(cq,{});case bq:return(0,Kg.jsx)(uq,{asset:t});default:return(0,Kg.jsx)("div",{children:"empty"})}},v=e=>{e.stopPropagation(),xg(i.asset),Km("Timeline10")},m={i:!1,o:!1};return null!==a&&void 0!==a&&a.attribute.animation&&(null!==a&&void 0!==a&&a.attribute.animation.enter.baseId&&(m.i=!0),null!==a&&void 0!==a&&a.attribute.animation.exit.baseId&&(m.o=!0)),null!==a&&void 0!==a&&a.attribute.aeA&&(null!==a&&void 0!==a&&a.attribute.aeA.i.resId&&(m.i=!0),null!==a&&void 0!==a&&a.attribute.aeA.o.resId&&(m.o=!0)),(0,Kg.jsxs)("div",{className:hb()(fU().previewWrapper,r&&fU()[r]),children:[(null===n||void 0===n?void 0:n.meta.type)&&(0,Kg.jsx)("div",{onClick:v,className:hb()(fU().lock,{[fU().locked]:n.meta.locked}),children:(0,Kg.jsx)(iP,{type:n.meta.locked?"iconmdi_lock-outline":"iconmdi_lock-open-variant-outline"})}),(0,Kg.jsx)("div",{className:fU().previewAsset,children:p()}),(0,Kg.jsxs)("div",{className:fU().aniMark,children:[m.i&&(0,Kg.jsxs)("div",{className:fU().aniStart,children:[(0,Kg.jsx)("div",{className:fU().line}),(0,Kg.jsx)(iP,{type:"iconbofang"})]}),m.o&&(0,Kg.jsxs)("div",{className:fU().aniEnd,children:[(0,Kg.jsx)("div",{className:fU().line}),(0,Kg.jsx)(iP,{type:"iconbofang"})]})]})]})},vq=(0,hp.Pi)(pq),mq=10,hq=100,fq=20,gq=20,xq=15,yq=2,bq="emptyBg",_q=jd,jq=(e,t)=>(0,Kg.jsx)(vq,{asset:e,active:t}),wq=[{types:["image","pic","SVG","lottie","mask","background","svgPath"],height:26,previewRender:jq},{types:["text"],height:26,previewRender:jq},{types:["video","videoE"],height:26,previewRender:jq},{types:["module"],height:26,previewRender:jq}],kq=[{types:["video","videoE"],height:32,previewRender:jq},{types:[bq],height:32,previewRender:jq}],Tq=mU(),Zq={small:{defaultSize:300,minSize:254,maxSize:429},large:{defaultSize:300,minSize:254,maxSize:650}}[Tq],Cq=(jX=Reflect.metadata("design:type","undefined"===typeof r.ReactText?Object:r.ReactText),wX=Reflect.metadata("design:type",Array),kX=Reflect.metadata("design:type","undefined"===typeof vU.TimeLineData?Object:vU.TimeLineData),TX=Reflect.metadata("design:type","undefined"===typeof r.ReactText?Object:r.ReactText),ZX=Reflect.metadata("design:type",Function),CX=Reflect.metadata("design:paramtypes",[]),NX=Reflect.metadata("design:type",Function),SX=Reflect.metadata("design:paramtypes",[]),IX=Reflect.metadata("design:type",Function),AX=Reflect.metadata("design:paramtypes",[]),PX=Reflect.metadata("design:type",Function),MX=Reflect.metadata("design:paramtypes",[]),EX=class{constructor(){(0,l.Z)(this,"canvasHeight",LX,this),(0,l.Z)(this,"scaleTime",DX,this),(0,l.Z)(this,"scaleWidth",RX,this),(0,l.Z)(this,"templates",zX,this),(0,l.Z)(this,"audioList",FX,this),(0,l.Z)(this,"activePartKey",OX,this),(0,l.Z)(this,"rulerWidth",BX,this),(0,l.Z)(this,"autoScale",WX,this),(0,l.Z)(this,"hiddenPointer",VX,this),(0,l.Z)(this,"setCanvasHeight",UX,this),(0,l.Z)(this,"setScaleTime",GX,this),(0,l.Z)(this,"setScaleWidth",XX,this),(0,l.Z)(this,"setTemplates",qX,this),(0,l.Z)(this,"updateTemplate",HX,this),(0,l.Z)(this,"setAudioList",YX,this),(0,l.Z)(this,"setRulerWidth",KX,this),(0,l.Z)(this,"setActivePartKey",QX,this),(0,l.Z)(this,"setHiddenPointer",JX,this),(0,l.Z)(this,"setAutoScale",$X,this),(0,s.rC)(this),(0,s.U5)((()=>this.activePartKey),(()=>{this.setAutoScale()}),{equals:s.p6.structural})}get timeLineScale(){return this.scaleTime/this.scaleWidth}get selectedTemplates(){if(-1===this.activePartKey)return this.templates;var e=this.templates.find((e=>e.id===this.activePartKey));return e?[e]:[]}get durationInfo(){var e,t=(null===(e=this.selectedTemplates[0])||void 0===e?void 0:e.offsetTime)||0,i=this.selectedTemplates.reduce(((e,t)=>(e+=t.endTime,e)),0);return{offsetTime:t,countDuration:i}}get maxDuration(){return this.selectedTemplates.reduce(((e,t)=>(e+=t.endTime,e)),0)}},LX=(0,c.Z)(EX.prototype,"canvasHeight",[s.LO,jX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Zq.defaultSize}}),DX=(0,c.Z)(EX.prototype,"scaleTime",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),RX=(0,c.Z)(EX.prototype,"scaleWidth",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return xq}}),zX=(0,c.Z)(EX.prototype,"templates",[s.LO,wX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),FX=(0,c.Z)(EX.prototype,"audioList",[s.LO,kX],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),OX=(0,c.Z)(EX.prototype,"activePartKey",[s.LO,TX],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),BX=(0,c.Z)(EX.prototype,"rulerWidth",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2e3}}),WX=(0,c.Z)(EX.prototype,"autoScale",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 200}}),VX=(0,c.Z)(EX.prototype,"hiddenPointer",[s.LO],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),(0,c.Z)(EX.prototype,"timeLineScale",[s.Fl,ZX,CX],Object.getOwnPropertyDescriptor(EX.prototype,"timeLineScale"),EX.prototype),(0,c.Z)(EX.prototype,"selectedTemplates",[s.Fl,NX,SX],Object.getOwnPropertyDescriptor(EX.prototype,"selectedTemplates"),EX.prototype),(0,c.Z)(EX.prototype,"durationInfo",[s.Fl,IX,AX],Object.getOwnPropertyDescriptor(EX.prototype,"durationInfo"),EX.prototype),(0,c.Z)(EX.prototype,"maxDuration",[s.Fl,PX,MX],Object.getOwnPropertyDescriptor(EX.prototype,"maxDuration"),EX.prototype),UX=(0,c.Z)(EX.prototype,"setCanvasHeight",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.canvasHeight=e}}}),GX=(0,c.Z)(EX.prototype,"setScaleTime",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{console.log({scaleTime:e}),e<gq?(this.scaleTime=gq,this.scaleWidth=xq*(1+(gq-e)/gq)):(this.scaleTime=e,this.scaleWidth=xq)}}}),XX=(0,c.Z)(EX.prototype,"setScaleWidth",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.scaleWidth=e}}}),qX=(0,c.Z)(EX.prototype,"setTemplates",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.templates=e}}}),HX=(0,c.Z)(EX.prototype,"updateTemplate",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(e,t)=>{Object.assign(e,t)}}}),YX=(0,c.Z)(EX.prototype,"setAudioList",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.audioList=e}}}),KX=(0,c.Z)(EX.prototype,"setRulerWidth",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.rulerWidth=e}}}),QX=(0,c.Z)(EX.prototype,"setActivePartKey",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.activePartKey=e}}}),JX=(0,c.Z)(EX.prototype,"setHiddenPointer",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e=>{this.hiddenPointer=e}}}),$X=(0,c.Z)(EX.prototype,"setAutoScale",[s.aD],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return()=>{var e=Math.max(this.maxDuration/((this.rulerWidth-hq)/xq),fq);return this.autoScale=e,e}}}),EX),Nq=new Cq,Sq=Nq,Iq=10,Aq=(0,_p.Z)(),Pq=Aq.redirect;function Mq(e){return Iq*e}function Eq(){var e=tf(),t=e.value,i=WI(),a=i.timeRuleScale,n=jf(),r=n.timeLinePartKey;if(r){var o=Sq.scaleTime,s=Sq.scaleWidth;return 1e3/o*s}return"designer"===Pq?Iq*a:Iq*(t/10)}function Lq(e){var t=e.e,i=e.target,a=e.targetScroll,n=e.moving,r=e.finish,o=t.clientX,s=t.clientY,l=0,c=0,d=0,p={};function v(e){clearTimeout(p.current);var t=e.increment,i=e.needScroll,r=(0,yp.Z)(e,["increment","needScroll"]);p={current:setTimeout((()=>{d+=t,n((0,u.Z)({distanceX:d,distanceY:c},r)),v(e),i&&a.scrollBy(t,0)}),10)}}function m(){return{left:100,right:document.body.clientWidth}}var h=!1,f=0,g=e=>{var t=e.clientX,a=e.clientY,r=t-o,u=a-s,g=m(),x=g.left,y=g.right;t<=x&&"end"===i?h||(v({increment:5,justifyContent:"start",fixedWidth:!1,needScroll:!1}),d=r,f=r,h=!0):t>=y-50?h||(v({increment:5,justifyContent:"start"===i?"end":"start",fixedWidth:r<0&&"end"===i,needScroll:"start"!==i}),d=r,f=r,h=!0):(clearTimeout(p.current),n({distanceX:d+(r-f),distanceY:c,justifyContent:"start"===i?"end":"start",fixedWidth:"start"===i||"end"===i&&r<0}),h=!1),l=r,c=u},x=e=>{var t=e.clientX,i=e.clientY;l=t-o,c=i-s,r&&r({distanceX:l,distanceY:c}),window.removeEventListener("mouseup",x),window.removeEventListener("mousemove",g),clearTimeout(p.current)};window.addEventListener("mouseup",x),window.addEventListener("mousemove",g)}function Dq(e){return e<6e4?"".concat((e/1e3).toFixed(1),"\u79d2"):Th(parseInt("".concat(e/1e3),10))}function Rq(){var e,t=Fw(),i=document.querySelector(".xiudodo-bottom"),a=null!==(e=null===i||void 0===i?void 0:i.clientWidth)&&void 0!==e?e:0,n=(a-170)/Iq/(t/1e3);ef(Math.max(10*n,5))}function zq(){var e=Fw(),t=document.querySelector(".xiudodo-bottom"),i=(0,Cm.Z)(t),a=i.width,n=void 0===a?0:a,o=(0,r.useMemo)((()=>{var t=(n-170)/Iq/(e/1e3);return Math.max(10*t,5)}),[n,e]);return{min:5,max:2*o,fit:o}}function Fq(e,t){return e/1e3*t}function Oq(e,t){return Math.ceil(e/t*1e3)}var Bq=()=>(0,$v.Z)({length:6});function Wq(){var e=WI(),t=e.timeRuleScale,i=Mw(),a=(0,n.Z)(i,1),r=a[0],o=Eq(),s=Fq(r,o),l=Oq(s,o);return{endTime:r,scaleEndTime:l,clientWidth:s,timeRuleScale:t}}function Vq(e){var t=e.filter((e=>{var t;return"__module"!==(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)})),i=t.filter((e=>!e.meta.isBackground&&!e.meta.isTransfer)),a=(0,dg.Z)([...i],(e=>-e.transform.zindex)),n=[];return a.forEach((e=>{var t=n.find((t=>t.trackId===e.meta.trackId)),i=e.assetDuration,a=i.startTime,r=i.endTime;if(r-a>=100)if(t)t.assets.push(e);else{var o=e.meta.trackId;o||(o=Bq(),e.meta.trackId=o);var s=["pic","videoE"];n.push({trackId:o,accept:s.includes(e.meta.type)?s:[e.meta.type],assets:[e]})}})),{comAssets:n}}function Uq(){nA.Z.confirm({title:"\u786e\u5b9a\u8981\u5220\u9664\u7247\u6bb5\u5417",content:"\u5220\u9664\u7247\u6bb5\u5c06\u6e05\u9664\u7247\u6bb5\u5185\u7684\u6240\u6709\u5143\u7d20\uff0c\u8bf7\u8c28\u614e\u64cd\u4f5c",okText:"\u786e\u8ba4",cancelText:"\u6211\u518d\u60f3\u60f3",onOk(){var e=Bw();Lb(0,!1),fw(e.id)}})}function Gq(){var e=Mw(),t=(0,n.Z)(e,1),i=t[0],a=e=>{var t,a=xu(),n=e||a,r=null!==(t=null===n||void 0===n?void 0:n.parent)&&void 0!==t?t:n;r&&(Ij(r),eu(),setTimeout((()=>{i<Wb()&&Lb(i,!1)})))};return{handleRemoveAsset:a}}function Xq(e){var t=ii(e)||!(ti(e)||"text"===e.meta.type);return t}function qq(){var e=Vw(),t=e.currentAsset,i=e.multiSelect,a=e.moduleItemActive,n=null!==a&&void 0!==a?a:t;if(!(a?Xq(a):t&&Xq(t)))return(0,Kg.jsx)(Kg.Fragment,{});var r=()=>{var e=null===n||void 0===n?void 0:n.meta.isQuickEditor;return null!==i&&void 0!==i&&i.length&&i.forEach((t=>{t.meta.isQuickEditor||(e=t.meta.isQuickEditor)})),e};function o(e){var t=e.target.checked;i.length?i.forEach((e=>{Xq(e)&&e.update({meta:{isQuickEditor:t}})})):n&&n.update({meta:{isQuickEditor:t}}),We("isQuickEditor",!0)}return(0,Kg.jsx)(WP.Z,{checked:r(),onChange:o,style:{color:"#fff",fontSize:12},children:"\u53ef\u66ff\u6362"})}var Hq=(0,hp.Pi)(qq),Yq=400,Kq=(0,hp.Pi)((e=>{var t=e.asset,i=e.onClose,a=t.minAssetDuration,o=t.assetDuration,s=o.startTime,l=o.endTime,c=Number(((l-s)/1e3).toFixed(1)),d=(0,r.useState)(0),u=(0,n.Z)(d,2),p=u[0],v=u[1];function m(e){var i=String(e).split(":"),r="0",o="0";if(2===i.length){var l=(0,n.Z)(i,2);r=l[0],o=l[1]}else if(1===i.length){var d=(0,n.Z)(i,1);o=d[0]}if(Number(r)>=0&&parseFloat(o)){var u,p=6e4*Number(r)+1e3*parseFloat(o),v=(null===(u=t.template)||void 0===u?void 0:u.videoInfo.allAnimationTime)||0,m=v-s;if(p<a)p=a;else{if(null!==t&&void 0!==t&&t.videoClip.totalTime){var h=t.videoClip,f=h.cst,g=h.totalTime;m=Math.min(g-f,m)}p>m&&(p=m)}return Number(p)}return c}function h(e){var t=m(e);v(t)}function f(e){t.updateAssetDuration({startTime:s,endTime:s+(null!==e&&void 0!==e?e:p)}),We("updateAssetDuration",!0)}return(0,r.useLayoutEffect)((()=>{v(l-s)}),[s,l]),(0,Kg.jsxs)("div",{style:{padding:"8px 10px",display:"flex"},children:[(0,Kg.jsxs)(VP.Z.Group,{compact:!0,children:[(0,Kg.jsx)("span",{className:"action",onClick:()=>h((p-Yq)/1e3),children:"-"}),(0,Kg.jsx)(zM.Z,{autoFocus:!0,onFocus:e=>e.target.select(),value:Dq(p),className:"input-number",onPaste:Ph,onBlur:e=>{h(e.target.value)},onKeyDown:e=>{Ph(e),"Enter"===e.code&&(f(m(e.target.value)),i())}}),(0,Kg.jsx)("span",{className:"action",onClick:()=>h((p+Yq)/1e3),children:"+"})]}),(0,Kg.jsx)(CS.Z,{type:"primary",size:"small",style:{marginLeft:6,height:30},onClick:()=>{f(),i()},children:"\u786e\u5b9a"})]})}));function Qq(){var e=Pw(),t=(0,r.useState)(!1),i=(0,n.Z)(t,2),a=i[0],o=i[1];if(!e||ii(e)||e.parent&&ii(e.parent))return(0,Kg.jsx)(Kg.Fragment,{});var s=e.assetDuration,l=s.startTime,c=void 0===l?0:l,d=s.endTime,u=void 0===d?0:d,p=Number(((u-c)/1e3).toFixed(1));return(0,Kg.jsx)(tE.Z,{destroyTooltipOnHide:!0,placement:"top",trigger:"click",visible:a,onVisibleChange:o,content:(0,Kg.jsx)(Kq,{asset:e,onClose:()=>o(!1)}),children:(0,Kg.jsx)(uH,{item:{key:"assetDuration",name:"".concat(p,"s"),icon:"icontime",onClick(){o(!a)}}})})}function Jq(e){return e?Zd:wd}function $q(e,t){var i=xk(e.getAssetCloned()),a=e.assetDuration,n=a.startTime,r=a.endTime;i.setAssetDuration([t-n,0]),i.updateAeaItem([{key:"i",data:{pbr:1}}]),e.setAssetDuration([0,t-r]),e.updateAeaItem([{key:"o",data:{pbr:1}}]),kj(i,e.template),We("splitAsset",!0)}function eH(e,t,i){var a=t.attribute.aeA;if(!a)return 1;var n=t.animationItemDuration[e],r=t.assetDuration.endTime-t.assetDuration.startTime,o=i.assetDuration.endTime-i.assetDuration.startTime,s=_t(o*(n/r),a[e].kw);return s>Td?Td:s}function tH(e,t){var i=Du(e.id),a=e.assets,n=Sw(e.getTemplateCloned()),r=[],o=[];a.forEach((e=>{var i=e.assetDuration,a=i.startTime,n=i.endTime;if(n<t)r.push(e);else{var s,l,c=null===(s=e.attribute.aeA)||void 0===s?void 0:s.i,d=null===(l=e.attribute.aeA)||void 0===l?void 0:l.o,p=xk(e.getAssetCloned()),v=xk(e.getAssetCloned()),m=ai(p)?p.assets[0]:p;if(si(m)){var h=p.videoClip,f=h.cst,g=h.cet;m.update({attribute:{cst:f+(t-a),cet:g}})}if(p.updateAssetDuration({startTime:Math.max(a-t,0),endTime:n-t}),a<t){var x=[{key:"i",data:{pbr:1}}];null!==d&&void 0!==d&&d.resId&&x.push({key:"o",data:(0,u.Z)((0,u.Z)({},d),{},{pbr:eH("o",e,p)})}),p.updateAeaItem(x),v.setAssetDuration([0,t-n]);var y=[{key:"o",data:{pbr:1}}];null!==c&&void 0!==c&&c.resId&&y.push({key:"i",data:(0,u.Z)((0,u.Z)({},c),{},{pbr:eH("i",e,v)})}),v.updateAeaItem(y),r.push(v)}o.push(p)}})),n.replaceAssetClasses(o),n.updatePageInfo({pageTime:e.videoInfo.endTime-t}),uw(n,i+1),e.replaceAssetClasses(r),e.updatePageInfo({pageTime:t}),We("templateSplit",!0)}function iH(){var e,t,i=Bb(),a=i.currentTime,r=Pw(),o=Ib(),s=Lw(),l=s.template,c=r?null===r||void 0===r?void 0:r.template:l,d=c?Du(c.id):0,u=null!==(e=o[d])&&void 0!==e?e:[],p=(0,n.Z)(u,2),v=p[0],m=p[1],h=a-v,f=!0;if(r&&!r.meta.isBackground&&l.id===(null===(t=r.template)||void 0===t?void 0:t.id)){var g=r.assetDuration,x=g.startTime,y=g.endTime,b=r.minAssetDuration;f=h-x<b||y-h<b}var _=!1;if(r)r.meta.isBackground||(_=!0);else if(l){var j=l.startTransfer,w=l.endTransfer;_=h<Jq(j)||m-a<Jq(w)}function k(){f?_||tH(l,h):r&&$q(r,h)}return{assetDisable:f,templateDisable:_,split:k}}var aH=i(59465),nH=i(1977),rH=i(14750),oH=i.n(rH),sH=.5;function lH(){var e=(0,r.useRef)(null),t=WI(),i=t.timeRuleScale,a=t.update;function n(t){var n;t.preventDefault();var r=(null===(n=e.current)||void 0===n?void 0:n.getBoundingClientRect().width)||0;Fh(t,(e=>{var t=Math.ceil(e/r*100)+i;t<1||t>100||a(t)}))}return(0,Kg.jsxs)("div",{className:oH().wrap,children:[(0,Kg.jsx)("div",{className:oH()["change-btn"],onClick:()=>{i>1&&a(i-sH)},children:(0,Kg.jsx)(aH.Z,{})}),(0,Kg.jsxs)("div",{className:oH().slider,ref:e,children:[(0,Kg.jsx)("div",{className:oH().line,style:{width:"".concat(i,"%")}}),(0,Kg.jsx)(xF.Z,{placement:"top",title:"".concat(i,"%"),getTooltipContainer:e=>e,overlayInnerStyle:{fontSize:12},children:(0,Kg.jsx)("div",{className:oH().handler,style:{left:"".concat(i,"%")},onMouseDown:n})})]}),(0,Kg.jsx)("div",{className:oH()["change-btn"],onClick:()=>{i<100&&a(i+sH)},children:(0,Kg.jsx)(nH.Z,{})})]})}var cH=i(61877),dH=i.n(cH);function uH(e){var t=e.item;return(0,Kg.jsx)(xF.Z,{title:t.tooltip,overlayInnerStyle:{fontSize:10},children:(0,Kg.jsxs)("div",{className:hb()(dH()["action-item"],{[dH().disabled]:t.disabled,[dH().choosed]:t.choosed}),onClick:e=>{var i;Ph(e),t.disabled?t.disabledTip&&xp.default.info(t.disabledTip):(Rb(),null===(i=t.onClick)||void 0===i||i.call(t))},children:[(0,Kg.jsx)(iP,{type:t.icon,className:dH()[t.key],style:t.iconStyle}),t.name&&(0,Kg.jsx)("span",{className:dH().name,children:t.name})]})})}function pH(){var e=Pw(),t=Gq(),i=t.handleRemoveAsset,a=iH(),n=a.assetDisable,r=a.templateDisable,o=a.split,s=Iw(),l=s.start,c=s.inCamera;function d(e,t){var i=Ab();pw(e,t);var a=iw(),n=a[t][0]+i;Lb(n,!1)}var p=[{key:"copy",tooltip:"\u590d\u5236",disabled:!e,icon:"icona-Frame6",onClick:()=>{if(e){var t=e.assetDuration,i=t.startTime,a=t.endTime,n=a-i;if(e.meta.isBackground){var r=Ow();dw({assets:[(0,u.Z)({type:e.meta.type,isBackground:!0},e.getAssetCloned().attribute)],pageTime:n,index:r+1})}else Cj(e.getAssetCloned(),{attribute:hm(n),meta:{trackId:Bq()}})}}},{key:"trim",tooltip:r?"\u5206\u5272\u5143\u7d20":"\u5206\u5272\u7247\u6bb5",icon:"iconfenge",disabled:n&&r,onClick:o,disabledTip:"\u5f53\u524d\u4f4d\u7f6e\u65e0\u6cd5\u5206\u5272"},{key:"delete",tooltip:"\u5220\u9664",icon:"iconicons8_trash",disabled:!e,onClick:()=>i()},{key:"lock",tooltip:"\u9501\u5b9a",disabled:!e||e.meta.locked,icon:"iconmdi_lock-outline",hidden:!e,onClick:()=>xg(e)},{key:"hide",tooltip:null!==e&&void 0!==e&&e.meta.hidden?"\u663e\u793a\u5143\u7d20":"\u9690\u85cf\u5143\u7d20",hidden:!e,icon:null!==e&&void 0!==e&&e.meta.hidden?"iconbiyanjing1":"iconyanjing",onClick:()=>cu(e)},{key:"addTemplate",tooltip:"\u6dfb\u52a0\u7247\u6bb5",icon:"icontianjia",onClick(){cw(kd,Ow()+1)}},{key:"forward",tooltip:"\u7247\u6bb5\u524d\u79fb",icon:"iconfangxiang",iconStyle:{transform:"rotate(180deg)",fontSize:14},onClick(){var e=Ow();e>0&&d(e,e-1)}},{key:"backward",tooltip:"\u7247\u6bb5\u540e\u79fb",icon:"iconfangxiang",iconStyle:{fontSize:14},onClick(){var e=Ow();e<Rw().length-1&&d(e,e+1)}},{key:"camera",name:"\u955c\u5934",tooltip:"\u955c\u5934",icon:"jingtou-duijiao",disabled:!1,choosed:c,onClick:()=>{l()},disabledTip:""}];return(0,Kg.jsxs)("div",{className:hb()(dH().actions,dH()["flex-box"]),children:[(0,Kg.jsxs)("div",{className:hb()(dH()["actions-left"],dH()["flex-box"]),children:[p.map((e=>!e.hidden&&(0,Kg.jsx)(uH,{item:e},e.key))),(0,Kg.jsx)(Qq,{}),(0,Kg.jsx)(Hq,{})]}),(0,Kg.jsx)("div",{className:dH()["actions-right"],children:(0,Kg.jsx)(lH,{})})]})}var vH=(0,hp.Pi)(pH),mH=(0,hp.Pi)((()=>{var e=Eq(),t=Bb(),i=t.currentTime,a=t.setCurrentTime,n=Ob(),o=n.isPlaying,s=(0,r.useRef)(null);function l(t){Ph(t),t.preventDefault(),e_(!0),Fh(t,(t=>{var n=t/e*1e3,r=i+n;r<0&&(r=0),a(r)}),(()=>{e_(!1)}))}var c=(0,r.useMemo)((()=>{var t=0;return i>=0&&(t=i/1e3*e),t}),[i,e]);return(0,r.useEffect)((()=>{var e;o&&(null===(e=s.current)||void 0===e||e.scrollIntoView())}),[i]),(0,r.useEffect)((()=>{var e;o||null===(e=s.current)||void 0===e||e.scrollIntoView()}),[o]),(0,Kg.jsx)("div",{ref:s,className:"designer-timer-line",style:{width:2,position:"absolute",left:c,top:0,bottom:0,backgroundColor:"#fff",zIndex:10,cursor:"pointer",pointerEvents:"none",height:500},onMouseDown:l,children:(0,Kg.jsx)("div",{style:{width:6,height:12,backgroundColor:"#fff",position:"relative",left:-2,top:0,borderBottomRightRadius:"50%",borderBottomLeftRadius:"50%",pointerEvents:"auto"}})})})),hH=(0,hp.Pi)((e=>{e.style,(0,yp.Z)(e,["style"]);var t=Eq(),i=(0,r.useRef)(null),a=(0,Cm.Z)(i),o=a.width,s=void 0===o?0:o,l=(0,r.useState)(1),c=(0,n.Z)(l,1),d=c[0],u=(0,r.useState)(),p=(0,n.Z)(u,1),v=(p[0],(0,r.useState)(5)),m=(0,n.Z)(v,1),h=m[0],f=(0,r.useCallback)((e=>"".concat(e,"s")),[d]);return(0,Kg.jsxs)("div",{className:"designer-ruler",ref:i,children:[(0,Kg.jsx)(mH,{}),(0,Kg.jsx)(eq.Ruler,{width:s,height:25,scaleWidth:t,labelInterval:h,formatter:f,offsetLeft:0,scaleHeight:8,fontOffsetY:6,fontOffsetX:15,textBaseline:"top",fontColor:"#484E5F",scaleColor:"#484E5F",textAlign:"center"})]})}));function fH(e){var t=e.videoInfo.allAnimationTime;[...e.assets].forEach((e=>{var i,a=e.assetDuration,n=a.startTime,r=a.endTime,o={startTime:n,endTime:r};e.meta.isBackground||r>t&&(o={startTime:n,endTime:t},o.endTime-n<300?null===(i=e.template)||void 0===i||i.autoRemoveAsset(e.id):e.setAssetDuration([0,t-r]))}))}function gH(e,t){var i=Mq(BI());return Math.abs(t-e)<Oq(10,i)}function xH(e,t){var i,a=null===(i=t.template)||void 0===i?void 0:i.assets;if(!a)return{};var n,r,o=e.startTime,s=e.endTime,l=Pb(),c=0;if(t.template){var d=Du(t.template.id);c=iw()[d][0]}return gH(l,o)?n=l:gH(s,l)?r=l:o<0?n=0:a.forEach((e=>{var i=e.assetDuration,a=i.startTime,l=i.endTime;t.id!==e.id&&(gH(a,o)&&(n=a),gH(l,o)&&(n=l),gH(s,a)&&(r=a),gH(s,l)&&(r=l))})),{start:n,end:r,absolute:c}}function yH(e){var t=e.asset,i=e.trackIndex,a=e.assets,r=t.assetDuration,o=r.startTime,s=r.endTime,l=s-o,c=Eq();function d(e){var i,a=e.template,n=xk(t.getAssetCloned()),r={startTime:0,endTime:Math.min(0+l,a.videoInfo.allAnimationTime)};n.updateAssetDuration(r);var o=a.addAsset(n);null===(i=t.template)||void 0===i||i.removeAsset(t.id),o&&Aj(o),We("dropDifferentTemplate",!0)}function u(e){var i=e.template,a=i.videoInfo.allAnimationTime,n={startTime:0,endTime:a};["video","videoE"].includes(t.meta.type)&&(n.endTime=Math.min(l,a));var r=new Pn(t.getAssetCloned());r.updateAssetDuration(n),r.update({meta:{isBackground:!0},transform:{zindex:i.zIndex.max}}),Xd(t.template,t),i.backgroundAsset&&Xd(i,i.backgroundAsset),kj(r,i),J_({asset:r,direction:"bottom"});var o=n.endTime-n.startTime;xw(o,Du(i.id)),o<a&&fH(i)}function p(e){var r,l,d,u,p,v,m=HI(),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=e.track,y=x.trackIndex,b=x.trackId,_=x.children,j=e.offsetX,w=-o,k=(null!==(r=null===(l=t.template)||void 0===l?void 0:l.videoInfo.allAnimationTime)&&void 0!==r?r:0)-s,T=Oq(j,c),Z=0;if(t.template){var C=Du(t.template.id);Z=iw()[C][0]}function N(){a[i].assets=a[i].assets.filter((e=>e.meta.id!==t.meta.id));var e=Bq();t.meta.trackId=e,a.splice(y,0,{trackId:e,accept:[t.meta.type],assets:[t]})}if(f?T=f-Z-o:g&&(T=g-Z-s),T<w?T=w:T>k&&(T=k),o+=T,s+=T,b&&_){for(var S=!1,I=0;I<_.length;I++){var A=_[I],P=A.assetDuration,M=P.startTime,E=P.endTime;if(t.meta.id!==A.meta.id&&(o<M&&s>M||o>=M&&s<=E||o<E&&s>E)){N(),S=!0;break}}S||(t.meta.trackId=b,a[i].assets=a[i].assets.filter((e=>e.meta.id!==t.meta.id)),a[y].assets.push(t))}else N();for(var L,D=[],R=null!==(d=null===(u=t.template)||void 0===u?void 0:u.minZIndex)&&void 0!==d?d:0,z=a.length-1;z>-1;z-=1){var F=a[z];F.assets.forEach((e=>{var i;(R+=1,e.transform.zindex=R,e.meta.id===t.meta.id)&&(null===(i=e.updateAssetDuration)||void 0===i||i.call(e,{startTime:o,endTime:s}),e.meta.trackId=t.meta.trackId);D.push(e)}))}null!==(p=t.template)&&void 0!==p&&p.backgroundAsset&&D.push(null===(L=t.template)||void 0===L?void 0:L.backgroundAsset);null===(v=t.template)||void 0===v||v.replaceAssetClasses(D),We("dropUpdateAsset",!0)}function v(e){var i,a=e.template,n=e.track.type;"background"===n?u({template:a}):a.id!==(null===(i=t.template)||void 0===i?void 0:i.id)?d({template:a}):p(e),KI()}return{data:{},onDrop:v}}function bH(e,t){if(!e||!t)return{display:"block"};var i=t.x,a=t.y,n="translate(".concat(i,"px, ").concat(a,"px)");return{transform:n,WebkitTransform:n}}function _H(){var e=Eq(),t=(0,xP.f)((e=>({item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}))),i=t.itemType,a=(t.isDragging,t.item),n=t.initialOffset,o=t.currentOffset;function s(){if(!a||("audio"===i?!a.endTime:!a.asset))return 0;if("audio"===i)return"".concat(Fq(a.endTime-a.startTime,e),"px");var t=a.asset.assetDuration,n=t.startTime,r=t.endTime,o=r-n;return"".concat(Fq(o,e),"px")}return(0,r.useEffect)((()=>{if(a&&a.source&&o&&n){var t=a.asset.assetDuration,i=t.startTime,r=t.endTime,s=r-i,l=(null===n||void 0===n?void 0:n.x)-o.x;i-=Oq(l,e),r=s+i;var c=xH({startTime:i,endTime:r},a.asset),d=c.start,u=c.end,p=c.absolute;YI([d?d+p:void 0,u?u+p:void 0])}}),[o,null===a||void 0===a?void 0:a.templateIndex]),console.log(),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:"designer-drag-layer",children:(0,Kg.jsx)("div",{style:(0,u.Z)((0,u.Z)({width:s()},bH(n,o)),{},{backgroundColor:"rgba(0,0,0,0.2)",borderRadius:6,overflow:"hidden",position:"relative"}),children:null===a||void 0===a?void 0:a.preview})})})}var jH=(0,hp.Pi)(_H),wH=["videoE","image","background","pic","SVG","group","container","chart","table","lottie","video","text","module"];function kH(e,t){var i,a,o,s=e.acceptType,l=void 0===s?wH:s,c=e.style,d=void 0===c?{}:c,p=e.hoverStyle,v=void 0===p?{}:p,m=e.children,h=e.onDrop,f=e.data,g=e.className,x=e.onHover,y=(0,r.useRef)(t),b=(0,pL.L)((()=>({accept:l,collect:e=>({isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0})}),drop:(e,t)=>{if(t.isOver({shallow:!0})){var i=t.getDifferenceFromInitialOffset();h&&h(e,{offsetX:i.x,offsetY:i.y,zIndex:null===f||void 0===f?void 0:f.maxZIndex,dropInfo:f})}},hover:(e,t)=>{x&&x(e,t)}})),[f]),_=(0,n.Z)(b,2),j=_[0],w=(j.isOver,j.isOverCurrent),k=_[1],T=null===(i=y.current)||void 0===i||null===(a=i.children)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.getBoundingClientRect().height;return k(y),(0,Kg.jsx)("div",{className:hb()("dropContainer",g),ref:y,style:(0,u.Z)((0,u.Z)({backgroundColor:w?"#34363f":"",height:null!==T&&void 0!==T?T:0},d),w?v:{}),children:m})}var TH=(0,r.forwardRef)(kH);function ZH(){var e=Uk(Fv());Mv((0,u.Z)({},e))}function CH(e){for(var t=[],i=e.length-1;i>=0;i--){var a=e[i];if(a.endTime-a.startTime>100){for(var n=a.startTime,r=a.endTime,o=a.speed,s=void 0===o?1:o,l=r/s,c=!1,d=0;d<t.length;d++){for(var u=t[d],p=!0,v=0;v<u.length;v++){var m=u[v],h=m.startTime,f=m.speed,g=void 0===f?1:f,x=m.endTime/g;if(n<=h&&l>h||n>=h&&l<=x||n<x&&l>=x||n<=h&&l>=x){p=!1;break}}if(p){u.push(a),c=!0;break}}c||t.push([a])}}return t}i(19597);var NH=i(2291),SH=(i(37482),i(6104));function IH(e){var t=e.children,i=e.overlayClassName,a=e.theme,n=void 0===a?"light":a,r=e.trigger,o=zv(),s=o.activeAudio,l=o.setActiveAudioInCliping,c=oh(),d=c.bindRemoveAudio;function u(e){var t,i=e.key,a=e.domEvent;switch(Ph(a),i){case"copy":ZH(),t="a_timeline_005";break;case"delete":d(null===s||void 0===s?void 0:s.rt_id),t="a_timeline_006";break;case"cut":l(null===s||void 0===s?void 0:s.trackIndex),t="a_timeline_003";break;case"voice":Cv(!0),t="a_timeline_004";break}Km(t)}var p=(0,Kg.jsxs)(SH.Z,{onMouseDown:Ph,onClick:u,className:hb()("audio-context-menu","audio-context-menu-".concat(n)),children:[(0,Kg.jsx)(SH.Z.Item,{icon:(0,Kg.jsx)(iP,{type:"iconjianji",style:{fontSize:16,transform:"rotate(90deg)"}}),hidden:"designer"===(0,_p.Z)().redirect,disabled:!s,children:"\u8c03\u6574"},"cut"),(0,Kg.jsx)(SH.Z.Item,{icon:(0,Kg.jsx)(iP,{type:"iconbx_bx-volume-full",style:{fontSize:16}}),hidden:"designer"===(0,_p.Z)().redirect,disabled:!s,children:"\u97f3\u91cf"},"voice"),(0,Kg.jsx)(SH.Z.Item,{icon:(0,Kg.jsx)(iP,{type:"iconic_baseline-content-copy",style:{fontSize:16}}),disabled:!s,children:"\u590d\u5236"},"copy"),(0,Kg.jsx)(SH.Z.Item,{icon:(0,Kg.jsx)(iP,{type:"iconicons8_trash",style:{fontSize:18}}),hidden:!s,children:"\u5220\u9664"},"delete")]});return(0,Kg.jsx)(NH.Z,{overlayClassName:hb()("audio-context-overlay-dropdown","audio-context-overlay-dropdown-".concat(n),i),overlay:p,trigger:r,children:t})}var AH=(0,hp.Pi)(IH),PH=i(99133),MH=i.n(PH);function EH(e){var t=e.height,i=e.src,a=e.style,o=e.waveColor,s=e.progressColor,l=(e.loading,e.audioRate),c=void 0===l?1:l,d=e.playing,p=e.start,v=void 0===p?0:p,m=e.end,h=e.onFinish,f=void 0===h?()=>{}:h,g=(0,yp.Z)(e,["height","src","style","waveColor","progressColor","loading","audioRate","playing","start","end","onFinish"]),x=(0,r.useState)(),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)("00:00"),w=(0,n.Z)(j,2),k=(w[0],w[1]),T=(0,r.useState)(0),Z=(0,n.Z)(T,2),C=(Z[0],Z[1]),N=(0,r.useRef)(null),S=(0,r.useState)(!1),I=(0,n.Z)(S,2),A=I[0],P=I[1],M=(0,Cm.Z)(N.current),E=(0,Nb.Z)((e=>{C(e)}),{wait:50}),L=E.run,D=()=>{if(i){var e=MH().create({container:N.current,waveColor:null!==o&&void 0!==o?o:"#c9c9c9",progressColor:null!==s&&void 0!==s?s:"#c9c9c9",backend:"MediaElement",mediaControls:!1,audioRate:c,height:t,barWidth:1,hideScrollbar:!0,scrollParent:!1,interact:!1,cursorColor:"transparent"});e.load(i),e.on("ready",(()=>{P(!0)})),e.on("audioprocess",(t=>{L(e.getCurrentTime()/e.getDuration()*100);var i=Th(parseInt(t));i!==t&&k(i)})),e.on("pause",(()=>{f(),e.seekTo(0)})),_(e)}};return(0,r.useEffect)((()=>(N.current&&M.width&&(b?(b.destroy(),D()):D()),()=>{})),[M.width,c]),(0,r.useEffect)((()=>{d?null===b||void 0===b||b.play(v,m):null!==b&&void 0!==b&&b.isPlaying()&&A&&(null===b||void 0===b||b.pause(),null===b||void 0===b||b.seekTo(0))}),[d,b,A]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",(0,u.Z)({ref:N,className:"waveform",style:a},g))})}var LH=(0,r.memo)(EH);function DH(e){var t=e.children,i=e.active,a=e.isLocked,n=e.asset,r=e.onClip,o=e.onClipFinish,s=e.style,l=e.duation,c=e.className,d=e.handlerToolTip,p=e.handlerIcon,v=(0,yp.Z)(e,["children","active","isLocked","asset","onClip","onClipFinish","style","duation","className","handlerToolTip","handlerIcon"]);function m(e,t){var i;Ph(e),e.preventDefault(),e.nativeEvent.preventDefault(),Fh(e,(e=>{var a=r&&r({target:t,distance:e});a&&(i=a)}),(e=>{o&&o({distance:e,target:t,extra:i})}))}return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:hb()("clip-component",c,{"clip-asset-item-active":i}),style:s},v),{},{children:[!!l&&(0,Kg.jsx)("div",{className:"clip-duation",style:{background:i?"#36DAA0":"#494955"},children:Th(parseInt("".concat(l/1e3),10))}),t,i&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(xF.Z,{placement:"right",getPopupContainer:e=>e,overlayClassName:"clip-handler-tooltip",title:null===d||void 0===d?void 0:d.start,children:(0,Kg.jsx)("div",{className:hb()("clip-handler","clip-handler-left"),onMouseDown:e=>m(e,"start"),children:(0,Kg.jsx)(iP,{type:null!==p&&void 0!==p?p:"iconzanting"})})}),(0,Kg.jsx)(xF.Z,{placement:"left",getPopupContainer:e=>e,overlayClassName:"clip-handler-tooltip",title:null===d||void 0===d?void 0:d.end,children:(0,Kg.jsx)("div",{className:hb()("clip-handler","clip-handler-right"),onMouseDown:e=>m(e,"end"),children:(0,Kg.jsx)(iP,{type:null!==p&&void 0!==p?p:"iconzanting"})})})]}),a&&(0,Kg.jsx)(xF.Z,{title:"\u89e3\u9501",children:(0,Kg.jsx)("div",{className:"clip-asset-locked",onMouseDown:e=>{Ph(e),xg(n)},children:(0,Kg.jsx)(iP,{type:"iconsuozi"})})})]}))}var RH=DH;function zH(e){var t=e.data,i=e.style,a=e.active,o=e.trackIndex,l=Wq(),c=l.endTime,d=Eq(),p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=zv(),g=f.updateActiveAudio,x=f.inCliping,y=f.setActiveAudioInCliping,b=t.startTime,_=t.endTime,j=t.rt_duration,w=t.rt_id,k=t.rt_title,T=t.rt_sourceType,Z=t.cut||[0,_-b],C=(0,n.Z)(Z,2),N=C[0],S=C[1],I=oh(),A=I.bindSetAudioCut,P=I.bindSetAudioDuration,M=(0,r.useRef)(null),E=(0,Cm.Z)(M),L=E.width,D=void 0===L?0:L,R=e=>({width:j/1e3*d,left:-e/1e3*d}),z=(0,r.useMemo)((()=>({left:b/1e3*d})),[b,d]),F=(0,r.useMemo)((()=>({start:{min:Math.max(-b,-N),max:_-b-_d},end:{min:-(_-b-_d),max:Math.min(t.rt_duration-S,c-_)},center:{min:-b,max:c-_},cut:{min:-(j-S),max:N}})),[b,_,N,S,c]);function O(e){var t=e.distance,i=e.target,a=b,n=_,r=Math.ceil(t/d*1e3),o=F[x>-1?"cut":i],s=o.min,l=o.max;r>l?r=l:r<s&&(r=s);var c=N,u=S;x>-1?(u-=r,c-=r):"start"===i?(a+=r,c+=r):"end"===i?(n+=r,u+=r):(a+=r,n+=r),(i||x>-1)&&A({startTime:c,endTime:u},w),-1===x&&P({startTime:a,endTime:n},w)}(0,r.useEffect)((()=>{var e;(!a&&x>-1&&y(-1),a)&&(null===(e=M.current)||void 0===e||e.scrollIntoViewIfNeeded())}),[a]);var B=(0,r.useRef)();return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(xF.Z,{title:"".concat((N/1e3).toFixed(1),"s"),getTooltipContainer:e=>e,arrowContent:!0,visible:m,children:(0,Kg.jsx)("div",{style:(0,u.Z)({width:0,height:"100%",position:"absolute",top:0},z)})}),(0,Kg.jsx)(RH,{className:hb()("audio-clip",{"audio-incliping":x>-1&&a}),active:!0,style:(0,u.Z)((0,u.Z)({},i),z),onClip:O,onClipFinish:e=>{e.extra,e.distance;g((0,u.Z)({trackIndex:o},(0,s.ZN)(t)))},handlerToolTip:{start:"".concat(Th(parseInt("".concat(b/1e3),10)),"s"),end:"".concat(Th(parseInt("".concat(_/1e3),10)),"s")},handlerIcon:"iconshuxian",onClick:Ph,children:(0,Kg.jsxs)("div",{ref:M,className:hb()("wave-wrap"),style:{opacity:a?1:.6},onMouseDown:e=>{Ph(e),e.preventDefault(),clearTimeout(B.current),g((0,u.Z)({trackIndex:o},(0,s.ZN)(t))),eu(),x>-1&&h(!0),Fh(e,(e=>O({distance:e,target:"center"})),(()=>{g((0,u.Z)({trackIndex:o},(0,s.ZN)(t))),h(!1)}))},onDoubleClick:()=>{clearTimeout(B.current),y(o)},children:[(0,Kg.jsx)("div",{className:"cutted-wrap",style:{background:2===Number(T)?"#51DB86":"#5646ED"},children:(0,Kg.jsx)("div",{"aria-label":"audio-cut",style:{position:"relative",width:(_-b)/1e3*d,height:"100%",overflow:"hidden"},children:(0,Kg.jsx)(LH,{height:28,src:t.rt_url,style:(0,u.Z)({position:"absolute",height:"100%"},R(N)),waveColor:"rgba(255,255,255,0.8)"})})}),a&&x>-1&&(0,Kg.jsx)(LH,{height:26,src:t.rt_url,waveColor:2===Number(T)?"#38C26D":"#867be7",style:(0,u.Z)({position:"absolute",top:0,zIndex:1,height:"100%"},R(N))}),-1===x&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("span",{hidden:!a||2===Number(T)||D<60,className:"audio-info-wrap audio-duration",children:[((_-b)/1e3).toFixed(1),"s"]}),(0,Kg.jsxs)("span",{hidden:2!==Number(T)||D<60,className:"audio-info-wrap audio-title",title:k,children:[2===T&&(0,Kg.jsx)("span",{className:"audio-ai-icon",children:"AI"}),k]}),a&&(0,Kg.jsx)(AH,{trigger:["click"],children:(0,Kg.jsx)("div",{hidden:D<160,className:"audio-info-wrap audio-more-action",onMouseDown:Ph,children:"\xb7\xb7\xb7"})})]}),!!t.fadeIn&&(0,Kg.jsx)("div",{className:"audio-clip-fade audio-clip-fadeIn",style:{borderRightWidth:t.fadeIn/1e3*d}}),!!t.fadeOut&&(0,Kg.jsx)("div",{className:"audio-clip-fade audio-clip-fadeOut",style:{borderLeftWidth:t.fadeOut/1e3*d}})]})})]})}var FH=(0,hp.Pi)(zH),OH=(0,hp.Pi)((e=>{var t=e.className,i=e.style,a=e.contextmenuTheme,n=e.empty,o=e.wrapStyle,l=e.wrapClassName,c=(0,r.useRef)(null),d=Eq(),p=Ik(),v=oh(),m=(v.bindSetAudioCut,v.bindSetAudioDuration),h=(v.bindRemoveAudio,zv()),f=h.activeAudio,g=h.updateActiveAudio,x=h.inCliping,y=p?CH([...p]):[];function b(e,t){var i=t.offsetX,a=Math.ceil(i/d*1e3),n=e.startTime,r=e.endTime;n+=a,r+=a,n<0||(m({startTime:n,endTime:r},e.rt_id),g((0,u.Z)((0,u.Z)({},(0,s.ZN)(e)),{},{startTime:n,endTime:r})))}return!p.length&&n?n:(0,Kg.jsx)(TH,{acceptType:"audio",style:(0,u.Z)({position:"relative",height:"auto"},o),onDrop:b,className:l,children:(0,Kg.jsx)(AH,{theme:a,trigger:["contextMenu"],children:(0,Kg.jsx)("div",{className:hb()(t),ref:c,style:(0,u.Z)({},i),children:y.map(((e,t)=>(0,Kg.jsx)("div",{className:hb()("audio-track"),onMouseDown:Ph,children:e.map((e=>(0,Kg.jsx)(FH,{trackIndex:t,data:e,active:e.rt_id===(null===f||void 0===f?void 0:f.rt_id),style:{opacity:x===t&&e.rt_id!==(null===f||void 0===f?void 0:f.rt_id)?0:1}},e.rt_id)))},"audio-track-".concat(t))))})})})}));function BH(){var e=HI(),t=Eq();function i(e){return Fq(e,t)+64}return(0,Kg.jsx)(Kg.Fragment,{children:null===e||void 0===e?void 0:e.map((e=>e&&(0,Kg.jsx)("div",{className:"asset-auxiliary-line",style:{position:"absolute",height:"100%",borderLeft:"1px dashed #5A4CDB",zIndex:1e3,left:i(e)}},"line_".concat(e))))})}var WH=i(77197),VH=i.n(WH),UH=e=>{e.data;var t=e.index,i=e.children,a=e.template,o=Iw(a),s=o.removeCamera,l=o.removeAll,c=(0,r.useState)(!1),d=(0,n.Z)(c,2),u=d[0],p=d[1];return(0,Kg.jsx)(NH.Z,{onVisibleChange:e=>{p(e)},overlayClassName:VH().actionPopover,visible:u,overlay:(0,Kg.jsxs)("div",{className:VH().actionMenu,children:[(0,Kg.jsx)("div",{className:VH().actionMenuItem,onMouseDown:Ph,onClick:e=>{e.stopPropagation(),s(t),Km("Timeline_camera_delete")},children:"\u5220\u9664\u955c\u5934"}),(0,Kg.jsx)("div",{className:VH().actionMenuItem,onMouseDown:Ph,onClick:e=>{e.stopPropagation(),l(),Km("Timeline_camera_deleteAll")},children:"\u6e05\u7a7a\u6240\u6709\u955c\u5934"})]}),trigger:["contextMenu"],children:i})},GH=UH,XH=e=>{var t=e.data,i=e.height,a=e.index,n=e.cameras,o=e.template,s=e.preLength,l=Eq(),c=yu(),d=Iw(o),p=d.addCamera,v=t.camera,m=v.endTime,h=v.startTime,f=(0,r.useRef)(null),g=(0,r.useRef)(null),x=(0,r.useRef)(null),y=(0,r.useRef)(null),b=(0,r.useRef)(),_=Fq(Sd,l),j=Fq(m-h,l),w=Fq(h,l),k=(null===c||void 0===c?void 0:c.id)===t.id,T=(e,i)=>{t&&(i.stopPropagation(),j_(t),y.current=t.getCameraCloned(),b.current={min:0,max:o.videoInfo.allAnimationTime},0!==a&&n[a-1]&&(b.current.min=n[a-1].camera.endTime),a!==n.length-1&&n[a+1]&&(b.current.max=n[a+1].camera.startTime),"start"===e&&(b.current.max=Math.min(b.current.max,m-Sd)),"end"===e&&(b.current.min=Math.min(b.current.max,h+Sd)))};iG({ele:f,stopPropagation:!0,onMouseDown:e=>{T("start",e)},onMouseMove:e=>{if(y.current&&b.current){var i,a,n=y.current.startTime+Oq(e.distanceX,l);n=Math.max(null===(i=b.current)||void 0===i?void 0:i.min,n),n=Math.min(null===(a=b.current)||void 0===a?void 0:a.max,n),Yd(t,(0,u.Z)((0,u.Z)({},y.current),{},{startTime:n}))}},onMouseUp:e=>{w_()}}),iG({ele:g,stopPropagation:!0,onMouseDown:e=>{T("end",e)},onMouseMove:e=>{if(y.current&&b.current){var i,a,n=y.current.endTime+Oq(e.distanceX,l);n=Math.max(null===(i=b.current)||void 0===i?void 0:i.min,n),n=Math.min(null===(a=b.current)||void 0===a?void 0:a.max,n),Yd(t,(0,u.Z)((0,u.Z)({},y.current),{},{endTime:n}))}},onMouseUp:e=>{w_()}}),iG({ele:x,stopPropagation:!0,onMouseDown:e=>{T("move",e)},onMouseMove:e=>{if(y.current&&b.current){var i,a,n,r,o=y.current.endTime-y.current.startTime,s=y.current.startTime+Oq(e.distanceX,l),c=s+o;if(s<(null===(i=b.current)||void 0===i?void 0:i.min))s=null===(n=b.current)||void 0===n?void 0:n.min,c=s+o;if(c>(null===(a=b.current)||void 0===a?void 0:a.max))c=null===(r=b.current)||void 0===r?void 0:r.max,s=c-o;Yd(t,(0,u.Z)((0,u.Z)({},y.current),{},{startTime:s,endTime:c}))}},onMouseUp:e=>{w_()}});var Z=()=>{var e=m,t=m;t=a===n.length-1?o.videoInfo.allAnimationTime:n[a+1].camera.startTime;var i=Fq(t-e,l);return i},C=Z(),N=()=>{var e=a;return s&&(e+=s),0===e?(0,Kg.jsx)("div",{className:VH()["dragCamera-title"],children:"\u9ed8\u8ba4\u955c\u5934"}):(0,Kg.jsxs)("div",{className:VH()["dragCamera-title"],children:["\u955c\u5934",e]})},S=e=>{p(a,e)};return(0,Kg.jsxs)(Kg.Fragment,{children:[0===a&&(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u955c\u5934",children:(0,Kg.jsxs)("div",{className:hb()(VH()["timeLine-dragCamera-link"],VH()["last-dragCamera-link"],{[VH()["no-action"]]:w<_}),style:{left:w-25},children:[(0,Kg.jsx)("div",{className:VH().add,onMouseDown:Ph,onClick:e=>{e.stopPropagation(),S("before")},children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),(0,Kg.jsxs)("div",{className:VH().line,children:[(0,Kg.jsx)("div",{className:VH().dian}),(0,Kg.jsx)("div",{className:VH().triangle})]})]})}),(0,Kg.jsx)(GH,{data:t,index:a,template:o,children:(0,Kg.jsxs)("div",{className:hb()(VH()["timeLine-dragCamera"],{[VH()["timeLine-dragCamera-active"]]:k,[VH()["timeLine-dragCamera-dragging"]]:k}),ref:x,style:{width:j,height:i,left:w,display:j<=0?"none":"flex"},children:[(0,Kg.jsx)(oX,{width:j,ref:f,time:h}),(0,Kg.jsx)(N,{}),(0,Kg.jsx)(oX,{width:j,ref:g,time:m})]})}),(0,Kg.jsxs)("div",{className:hb()(VH()["timeLine-dragCamera-link"],{[VH()["last-dragCamera-link"]]:a===n.length-1,[VH()["no-action"]]:C<_}),style:{left:j+w,width:C},children:[(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u955c\u5934",children:(0,Kg.jsx)("div",{className:VH().add,"data-change":!1,onMouseDown:Ph,onClick:e=>{e.stopPropagation(),S("after")},children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})})}),(0,Kg.jsxs)("div",{className:VH().line,children:[(0,Kg.jsx)("div",{className:VH().dian}),(0,Kg.jsx)("div",{className:VH().triangle})]})]})]})},qH=(0,hp.Pi)(XH),HH=e=>{e.className,e.style;var t=e.template,i=t.videoInfo.allAnimationTime,a=Rw(),n=(0,r.useRef)(null),o=Iw(t),s=o.addCamera,l=Eq(),c=()=>{var e=0;if(t){var i=a.findIndex((e=>e.id===t.id));a.forEach(((t,a)=>{a<i&&(e+=t.cameras.length)}))}return e},d=e=>{e.stopPropagation(),s(-1,"before"),Km("Timeline_camera_add")};return(0,r.useLayoutEffect)((()=>(n.current&&0===(null===t||void 0===t?void 0:t.cameras.length)&&(null===n||void 0===n||n.current.addEventListener("click",d)),()=>{var e;null===n||void 0===n||null===(e=n.current)||void 0===e||e.removeEventListener("click",d)})),[null===t||void 0===t?void 0:t.cameras.length]),(0,Kg.jsxs)("div",{className:VH()["timeLine-item"],style:{width:Fq(i,l),height:"100%"},children:[(null===t||void 0===t?void 0:t.cameras)&&t.cameras.map(((e,i)=>(0,Kg.jsx)(qH,{preLength:c(),template:t,cameras:t.cameras,data:e,height:21,index:i},e.id))),0===(null===t||void 0===t?void 0:t.cameras.length)&&(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u955c\u5934",children:(0,Kg.jsxs)("div",{className:hb()(VH()["timeLine-dragCamera-link"],VH()["last-dragCamera-link"]),style:{marginLeft:10},children:[(0,Kg.jsx)("div",{className:VH().add,ref:n,children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),(0,Kg.jsxs)("div",{className:VH().line,children:[(0,Kg.jsx)("div",{className:VH().dian}),(0,Kg.jsx)("div",{className:VH().triangle})]})]})})]})};HH.defaultProps={className:void 0,style:void 0};var YH=(0,hp.Pi)(HH),KH=()=>{var e=vw(),t=e.templates;return(0,Kg.jsx)("div",{className:VH()["designer-timeLine"],children:t.map((e=>(0,Kg.jsx)(YH,{template:e},e.id)))})},QH=(0,hp.Pi)(KH),JH=i(10198),$H=i.n(JH);function eY(e){var t=e.children,i=e.isLast,a=e.template,n=Pw(),r=Gq(),o=r.handleRemoveAsset;function s(e){var t=e.key,i=e.domEvent;switch(Ph(i),t){case"copy":zh.copy("asset",Ew());break;case"paste":Gh();break;case"cut":zh.copy("asset",Ew()),o(n);break;case"lock":xg(n);break;case"delTemplate":Uq();break;case"transition":XI("transition");break}}var l=(0,Kg.jsxs)(SH.Z,{onMouseDown:Ph,onClick:s,className:$H().menu,children:[(0,Kg.jsx)(SH.Z.Item,{disabled:!n,children:"\u590d\u5236 Ctrl+c"},"copy"),(0,Kg.jsx)(SH.Z.Item,{disabled:!1,children:"\u7c98\u8d34 Ctrl+v"},"paste"),(0,Kg.jsx)(SH.Z.Item,{hidden:!a.backgroundAsset,children:"\u9501\u5b9a\u56fe\u5c42"},"lock"),(0,Kg.jsx)(SH.Z.Item,{hidden:i,children:"\u8bbe\u7f6e\u8f6c\u573a"},"transition"),(0,Kg.jsx)(SH.Z.Item,{children:"\u5220\u9664\u7247\u6bb5"},"delTemplate")]});return(0,Kg.jsx)(NH.Z,{overlayClassName:$H()["overlay-dropdown"],overlay:l,trigger:["contextMenu"],children:t})}var tY=(0,hp.Pi)(eY);function iY(e){var t=e.template,i=e.style;return(0,Kg.jsx)("div",{className:"transition-connect",style:i,onMouseDown:e=>{if(Ph(e),XI("transition"),t.id!==Bw().id){var i=iw()[Du(t.id)||0][1];Lb(i-100,!1)}},children:(0,Kg.jsx)(xF.Z,{title:"\u8bbe\u7f6e\u8f6c\u573a",children:(0,Kg.jsx)("div",{className:"transition-connect-icon",children:t.endTransfer?(0,Kg.jsx)(iP,{type:"iconzhuanchang2"}):(0,Kg.jsx)("div",{className:"transition-connect-line"})})})})}var aY=(0,hp.Pi)(iY),nY=(0,r.forwardRef)(((e,t)=>{var i=e.children,a=e.data,o=e.className,s=e.style,l=e.canDrag,c=(0,yp.Z)(e,["children","data","className","style","canDrag"]),d=(0,r.useRef)(null),p=(0,uL.c)({canDrag:l,type:a.asset.meta.type,item:(0,u.Z)((0,u.Z)({},a),{},{preview:i}),collect:e=>({opacity:e.isDragging()?0:1,id:e.getHandlerId()})}),v=(0,n.Z)(p,3),m=v[0],h=m.opacity,f=(m.id,v[1]),g=v[2];return(0,r.useEffect)((()=>{g((0,vL.r)(),{captureDraggingState:!0})}),[]),f(null!==t&&void 0!==t?t:d),(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({tabIndex:a.asset.meta.id,className:hb()("asset-drag",o),style:(0,u.Z)((0,u.Z)({},s),{},{opacity:h}),ref:null!==t&&void 0!==t?t:d},c),{},{children:i}))})),rY=nY,oY=i(79066),sY=i.n(oY);function lY(e){var t,i=e.data,a=e.style,o=Mw(),s=(0,n.Z)(o,1),l=s[0],c=Eq(),d=i.attribute,p=d.cst,v=void 0===p?0:p,m=d.isLoop,h=d.rt_total_time,f=(0,r.useMemo)((()=>{var e=1;m&&(e=Math.ceil(l/h));var t=h/1e3*c*e;return{loopTimes:e,size:{width:t,left:-v/1e3*c}}}),[c,i.attribute.cst,m,l]),g=f.size,x=f.loopTimes;return(0,Kg.jsx)("div",{className:sY()["video-wrap"],style:(0,u.Z)((0,u.Z)({},g),a),children:(0,Kg.jsx)(PU,{assetUrl:(null===(t=i.attribute)||void 0===t?void 0:t.rt_url.indexOf(".webm?"))>=0?i.attribute.rt_frame_file:i.attribute.rt_url,assetDuation:i.attribute.rt_total_time,assetHeight:i.attribute.height,assetWidth:i.attribute.width,loopTimes:x})})}var cY=(0,hp.Pi)(lY),dY=i(30730),uY=i.n(dY);function pY(e){var t=e.data,i=e.style;return(0,Kg.jsx)("div",{className:uY()["image-wrap"],style:i,children:(0,Kg.jsx)("img",{src:t.attribute.picUrl||t.attribute.SVGUrl,alt:""})})}var vY=(0,hp.Pi)(pY);function mY(e){switch(e){case"video":case"videoE":return cY;case"pic":case"image":return vY;default:return(0,Kg.jsx)(Kg.Fragment,{})}}function hY(e){var t=e.asset,i=Pw(),a=mY(t.meta.type),n=t.assetDuration||{},r=n.startTime,o=n.endTime;function s(e){var i=e.track.type,a=e.template,n=a.videoInfo.allAnimationTime,s=xk(t.getAssetCloned()),l={startTime:r,endTime:o};"background"===i&&(l=["video","videoE"].includes(t.meta.type)?{startTime:0,endTime:o-r}:{startTime:0,endTime:n});var c=l.endTime-l.startTime;s.updateAssetDuration(l),s.update({meta:{isBackground:"background"===i}}),"background"===i&&a.backgroundAsset&&Ij(a.backgroundAsset),Ij(t),kj(s,a),"background"===i&&(xw(c),c<a.videoInfo.allAnimationTime&&fH(a))}return(0,Kg.jsx)(rY,{canDrag:!t.meta.locked,data:{trackIndex:0,asset:t,preAssetEndTime:0,nextAssetStartTime:0,templateIndex:0,finish:s},children:(0,Kg.jsx)(a,{data:t,style:{height:30},active:t.id===(null===i||void 0===i?void 0:i.id)&&!t.meta.locked})})}var fY=e=>{var t=e.template,i=e.isLast,a=t.videoInfo.allAnimationTime,r=t.backgroundAsset,o=t.background.backgroundColor,s=Du(t.id),l=Pw(),c=Eq(),d=Fq(a,c),p=(0,pL.L)({accept:["image","pic","videoE"],collect(e){return{hover:!!e.isOver()&&!!e.canDrop()}},drop(e){null===e||void 0===e||e.finish({template:t,track:{type:"background"}})}}),v=(0,n.Z)(p,2),m=v[0].hover,h=v[1],f=!!r&&["video","videoE"].includes(r.meta.type),g=()=>{if(!r||!f)return{start:{max:a-wd,min:-999999},end:{max:9999999,min:-(a-wd)}};var e=r.videoClip,t=e.cst,i=e.cet,n=r.attribute.rt_total_time;return{start:{min:-t,max:i-t-wd},end:{min:-(i-t-wd),max:n-i}}};function x(e,i){var n=(null===r||void 0===r?void 0:r.videoClip)||{},o=n.cst,l=n.cet,d=g()[i],p=d.max,v=d.min;Ph(e),e.preventDefault(),Fh(e,(e=>{var t=Oq(e,c),n={};t<v?t=v:t>p&&(t=p),f&&(n="start"===i?{cst:o+t,cet:l}:{cst:o,cet:l+t});var d=0;d="start"===i?a-t:a+t,xw(d,s),null===r||void 0===r||r.update({attribute:(0,u.Z)({startTime:0,endTime:d},n)})}),(()=>{fH(t),ch()}))}function y(){r&&!r.meta.locked&&setTimeout((()=>{Aj(r)}))}return(0,Kg.jsx)(tY,{isLast:i,template:t,children:(0,Kg.jsxs)("div",{ref:h,className:"background-asset",style:{width:d,opacity:m?.3:1},onContextMenu:e=>{y()},onClick:y,children:[(0,Kg.jsxs)("div",{className:"part-index",children:[s<9?0:"",s+1]}),(0,Kg.jsxs)("div",{className:hb()("background-asset-clip",{"background-asset-active":r&&(null===l||void 0===l?void 0:l.id)===(null===r||void 0===r?void 0:r.id)}),style:{background:o.type?Bh(o):Oh(o),overflow:"hidden"},children:[r&&(0,Kg.jsx)(hY,{asset:r}),r&&r.meta.locked&&(0,Kg.jsx)(xF.Z,{title:"\u89e3\u9501",children:(0,Kg.jsx)("div",{className:"clip-asset-locked",onMouseDown:e=>{Ph(e),xg(r)},children:(0,Kg.jsx)(iP,{type:"iconsuozi"})})}),(0,Kg.jsx)("div",{className:"clip-handler clip-handler-left",onMouseDown:e=>x(e,"start"),children:(0,Kg.jsx)(iP,{type:"iconzanting"})}),(0,Kg.jsx)("div",{className:"clip-handler clip-handler-right",onMouseDown:e=>x(e,"end"),children:(0,Kg.jsx)(iP,{type:"iconzanting"})})]}),!i&&(0,Kg.jsx)(aY,{template:t,style:{position:"absolute",bottom:10,right:0}})]})})},gY=(0,hp.Pi)(fY),xY=i(49197),yY=i.n(xY);function bY(e){var t=e.children,i=Pw(),a=Gq(),n=a.handleRemoveAsset;function r(e){var t=e.key,a=e.domEvent;switch(Ph(a),t){case"copy":zh.copy("asset",Ew());break;case"paste":Gh();break;case"cut":zh.copy("asset",Ew()),n(i);break;case"lock":xg(i);break;case"delTemplate":Uq();break;case"hide":cu(i);break}}var o=(0,Kg.jsxs)(SH.Z,{onMouseDown:Ph,onClick:r,className:yY().menu,children:[(0,Kg.jsx)(SH.Z.Item,{disabled:!i,children:"\u590d\u5236 Ctrl+c"},"copy"),(0,Kg.jsx)(SH.Z.Item,{disabled:!1,children:"\u7c98\u8d34 Ctrl+v"},"paste"),(0,Kg.jsx)(SH.Z.Item,{hidden:null===i||void 0===i?void 0:i.meta.isBackground,disabled:!i,children:"\u526a\u5207 Ctrl+x"},"cut"),(0,Kg.jsx)(SH.Z.Item,{disabled:!i,children:"\u9501\u5b9a\u56fe\u5c42"},"lock"),(0,Kg.jsx)(SH.Z.Item,{disabled:!i,children:i&&i.meta.hidden?"\u663e\u793a\u56fe\u5c42":"\u9690\u85cf\u56fe\u5c42"},"hide"),(0,Kg.jsx)(SH.Z.Item,{hidden:!(null!==i&&void 0!==i&&i.meta.isBackground),disabled:Rw().length<2,children:"\u5220\u9664\u7247\u6bb5"},"delTemplate")]});return(0,Kg.jsx)(NH.Z,{overlayClassName:yY()["overlay-dropdown"],overlay:o,trigger:["contextMenu"],children:t})}var _Y=(0,hp.Pi)(bY),jY=i(30959),wY=i.n(jY);function kY(e){var t=e.data,i=e.style;return(0,Kg.jsxs)("div",{className:wY()["text-wrap"],style:i,children:[(0,Kg.jsx)(iP,{type:"iconwenzi1"}),(0,Kg.jsx)("span",{className:wY().text,children:t.attribute.text.join(" ")})]})}function TY(e){var t=e.data,i=e.style;return(0,Kg.jsx)("div",{style:(0,u.Z)({height:25,paddingLeft:20,background:"url(".concat(t.attribute.rt_preview_url,")"),backgroundRepeat:"repeat-x",backgroundSize:"contain",backgroundColor:"#aea998"},i)})}function ZY(e){var t=e.style;return(0,Kg.jsx)("div",{style:(0,u.Z)({height:25,paddingLeft:20,backgroundRepeat:"repeat-x",backgroundSize:"contain",backgroundColor:"#aea998",fontSize:12},t),children:"\u6ee4\u955c"})}var CY=i(36345),NY=i.n(CY);function SY(e){var t=e.data,i=(0,r.useMemo)((()=>{var e,i=null===t||void 0===t||null===(e=t.assets)||void 0===e?void 0:e.find((e=>"text"===e.meta.type));return null===i||void 0===i?void 0:i.attribute.text}),[null===t||void 0===t?void 0:t.assets]);return(0,Kg.jsxs)("div",{className:NY().wrap,children:[(0,Kg.jsx)(iP,{type:"iconqunzu",style:{color:"#fff"}}),i&&(0,Kg.jsx)("span",{className:NY().text,children:i.join(" ")})]})}function IY(e){var t,i=e.data,a=null===(t=i.assets)||void 0===t?void 0:t[0],n=null===a||void 0===a?void 0:a.meta.type;switch(n){case"videoE":return(0,Kg.jsx)(cY,{data:a});case"image":case"pic":return(0,Kg.jsx)(vY,{data:a});default:return(0,Kg.jsx)(vY,{data:i})}}var AY=i(85750);function PY(){kp.h.dispatch(kp.iJ.clearDragStatus())}function MY(e){var t=(0,AY.N)(),i=t.getActions(),a=t.getMonitor(),n=(t.getRegistry(),e.asset),o=(0,r.useRef)({});function s(){return!n.meta.isBackground}function l(e){Bg()||(Ph(e),Ov(),eu(),Rb(),n.meta.locked||Aj(n),setTimeout((()=>{Bj([n])})))}function c(e){if(s()){if(Ph(e),0===e.button&&Bg()){var t,r,l;e.preventDefault();var c=Ww();if(c[0]&&(null===(t=c[0])||void 0===t||null===(r=t.template)||void 0===r?void 0:r.id)!==(null===(l=n.template)||void 0===l?void 0:l.id))return!1;Xj(n)}o.current.fn=()=>{o.current.timer=setTimeout((()=>{PY(),a.isDragging()&&i.endDrag(),o.current.fn&&window.removeEventListener("mouseup",o.current.fn)}))},window.addEventListener("mouseup",o.current.fn)}}return{onMouseDown:c,onClick:l}}var EY,LY=i(34947),DY=i.n(LY),RY="module"===(null===(EY=(0,_p.Z)())||void 0===EY?void 0:EY.redirect),zY=()=>(0,Kg.jsx)("div",{});function FY(e){return(0,r.useMemo)((()=>{switch(e){case"video":case"videoE":return cY;case"SVG":case"image":case"pic":case"background":return vY;case"mask":return IY;case"text":return kY;case"module":return SY;case"lottie":return TY;case"effect":return ZY;default:return zY}}),[e])}function OY(e){var t=e.assets,i=e.data,a=e.active,o=i.preAssetEndTime,s=i.nextAssetStartTime,l=i.asset,c=l.meta,d=l.minAssetDuration,p=Eq(),v=MY({asset:i.asset}),m=(0,r.useRef)(null),h=(0,dx.Z)({top:0,left:0,width:0}),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=FY(c.type),b=yH({asset:i.asset,trackIndex:i.trackIndex,assets:t}),_=b.onDrop,j=Lw(),w=j.template,k=i.asset.videoClip,T=k.cst,Z=k.cet,C=k.totalTime,N=(0,r.useMemo)((()=>{var e=i.asset.assetDuration,t=e.startTime,a=e.endTime,n=Math.min(null===w||void 0===w?void 0:w.videoInfo.endTime,i.nextAssetStartTime),r={min:-Math.min(t,t-o),max:a-d-t},l={min:-(a-d-t),max:Math.min(n-a,s-a)};return C&&(r.min=Math.max(r.min,-T),r.max=Math.min(r.max,Z-d-T),l.min=Math.max(l.min,-(Z-d-T)),l.max=Math.min(l.max,C-Z)),{start:r,end:l}}),[T,Z,i.asset.assetDuration.startTime,i.asset.assetDuration.endTime,null===w||void 0===w?void 0:w.videoInfo.endTime,d]),S=e=>{var t=e.target,a=e.extra;if(a){var r=i.asset.assetDuration.endTime,o=(0,n.Z)(a,2),s=o[0],l=o[1];if(RY){var d=Math.max.apply(Math,vu().map((e=>e.meta.id===c.id?r+l:e.assetDuration.endTime)));d&&xw(d)}G_(i.asset,[s,l]),T-s<=0&&"start"===t&&si(i.asset)&&xp.default.info("\u89c6\u9891\u5df2\u7ecf\u5230\u5934\u4e86")}KI()};function I(e){var t=g.left,a=void 0===t?0:t,n=g.width,r=void 0===n?0:n,o=i.asset.assetDuration,s=o.startTime,l=o.endTime,c=xH({startTime:s+e,endTime:l},i.asset),d=c.start,u=(c.end,c.absolute);if(d&&(e=d-s),!RY){var v=N.start,m=v.min,h=v.max;e>h&&(e=h),e<m&&(e=m)}var f=Fq(e,p);return r-=f,a+=f,x({left:a,width:r}),YI([d?d+u:void 0,void 0]),[e,0]}function A(e){var t=g.width,a=void 0===t?0:t,n=i.asset.assetDuration,r=n.endTime,o=n.startTime,s=xH({startTime:o,endTime:r+e},i.asset),l=(s.start,s.end),c=s.absolute;if(l&&(e=l-r),!RY){var d=N.end,u=d.min,v=d.max;e>v&&(e=v),e<u&&(e=u)}var m=Fq(e,p);return a+=m,x({width:a}),YI([void 0,l?l+c:void 0]),[0,e]}var P=e=>{var t=e.distance,i=e.target,a=Oq(t,p);return"start"===i?I(a):A(a)};(0,r.useEffect)((()=>{var e=0,t=0,a=i.asset.assetDuration,n=a.startTime,r=a.endTime,o=r-n;e=Fq(n,p),t=Fq(o,p),x({left:e,width:t})}),[p,i.asset.assetDuration]);var M=i.asset.assetDuration.endTime-i.asset.assetDuration.startTime;return(0,Kg.jsx)(rY,(0,u.Z)((0,u.Z)({canDrag:!i.asset.meta.locked,ref:m,data:(0,u.Z)((0,u.Z)({},i),{},{source:"asset",finish:_}),style:{position:"absolute",height:"100%",left:g.left,width:g.width,top:1,cursor:"pointer"}},v),{},{children:(0,Kg.jsx)(_Y,{children:(0,Kg.jsxs)(RH,{active:a,isLocked:c.locked,onClip:P,onClipFinish:S,style:{height:["videoE","pic"].includes(i.asset.meta.type)?34:20,overflow:"hidden",position:"relative"},asset:i.asset,children:[a&&(0,Kg.jsx)("div",{className:DY().duration,children:Th(parseInt("".concat(M/1e3),10))}),(0,Kg.jsx)(y,{active:a,data:i.asset,style:{height:"100%",background:["video","videoE","pic","image"].includes(i.asset.meta.type)?"#293A8F":"linear-gradient(134deg, #BF7CFF 0%, #6B87FF 100%)"}}),i.asset.meta.hidden&&(0,Kg.jsx)("div",{className:"asset-hide-mask"}),(0,Kg.jsxs)("div",{className:hb()("asset-aeA-wrap",{"asset-aeA-wrap-fixed":!["video","videoE","pic","image"].includes(i.asset.meta.type)}),children:[(0,Kg.jsxs)("div",{hidden:!i.asset.animationItemDuration.i,className:"asset-aeA asset-aeA-in",style:{width:Fq(i.asset.animationItemDuration.i,p)},children:[(0,Kg.jsx)("div",{className:"asset-aeA-line"}),(0,Kg.jsx)(iP,{type:"iconbofang",className:"asset-aeA-icon"})]}),(0,Kg.jsxs)("div",{hidden:!i.asset.animationItemDuration.o,className:"asset-aeA asset-aeA-out",style:{width:Fq(i.asset.animationItemDuration.o,p)},children:[(0,Kg.jsx)(iP,{type:"iconbofang",className:"asset-aeA-icon"}),(0,Kg.jsx)("div",{className:"asset-aeA-line"})]}),(0,Kg.jsxs)("div",{hidden:!i.asset.animationItemDuration.s,className:"asset-aeA asset-aeA-stay",style:{width:"100%"},children:[(0,Kg.jsx)(iP,{type:"iconbofang",className:"asset-aeA-icon"}),(0,Kg.jsx)("div",{className:"asset-aeA-line"}),(0,Kg.jsx)(iP,{type:"iconbofang",className:"asset-aeA-icon"})]})]})]})})}))}var BY=(0,hp.Pi)(OY),WY=["image","pic","lottie","text","videoE","SVG","module","mask"];function VY(e){var t=e.children,i=e.className,a=e.data,o=e.accept,s=e.template,l=(0,r.useRef)(null),c=(0,pL.L)({accept:o,collect:e=>({isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),item:e.getItem()}),drop:(e,t)=>{if(t.isOver({shallow:!0})){var i=t.getDifferenceFromInitialOffset();e.finish&&e.finish({offsetX:null===i||void 0===i?void 0:i.x,track:a,template:s})}}}),d=(0,n.Z)(c,2),u=d[0].isOverCurrent,p=d[1];return p(l),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:hb()("assetTrack",i,{"asset-track-isOverCurrent":u}),ref:l,children:t})})}function UY(e){e.isLast;var t=e.template,i=e.accept,a=e.itemData,n=(0,yp.Z)(e,["isLast","template","accept","itemData"]),r=a.trackIndex;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(VY,(0,u.Z)({template:t,accept:i,data:a},n)),(0,Kg.jsx)(VY,{template:t,accept:WY,className:"addTrack",data:{trackIndex:r+1,type:"asset"},children:(0,Kg.jsx)("div",{className:"addLineInner"})})]})}var GY=i(1304),XY=i.n(GY),qY=["image","pic","lottie","text","videoE","SVG","module","mask","effect"],HY=(0,hp.Pi)((e=>{var t=e.template,i=e.isLast,a=Vw(),n=a.currentAsset,o=t.videoInfo.allAnimationTime,s=Vq(t.assets),l=s.comAssets,c=Du(t.id),d=Eq(),u=t.videoInfo.allAnimationTime,p=(0,r.useMemo)((()=>Fq(u,d)),[d,u]);return(0,Kg.jsxs)("div",{className:"template-assets",style:{width:p,display:"flex",flexDirection:"column",justifyContent:"flex-end",borderRight:"1px dashed rgb(52, 52, 64)"},children:[(0,Kg.jsx)(VY,{template:t,accept:qY,className:"addTrack",data:{trackIndex:0,type:"asset"},children:(0,Kg.jsx)("div",{className:"addLineInner"})}),null===l||void 0===l?void 0:l.map(((e,i)=>{var a=e.trackId,r=e.accept,s=e.assets,d=(0,dg.Z)(s,(e=>e.assetDuration.startTime));return(0,Kg.jsx)(UY,{template:t,isLast:i===l.length-1,itemData:{type:"asset",trackIndex:i,trackId:a,children:s},accept:r,className:hb()(XY()["asset-track"],{[XY()["asset-track-large"]]:["pic","videoE"].includes(r[0])}),children:(0,Kg.jsx)(Kg.Fragment,{children:d.map(((e,t)=>{var r,s;return(0,Kg.jsx)(BY,{assets:l,data:{trackIndex:i,asset:e,templateIndex:c,preAssetEndTime:(null===(r=d[t-1])||void 0===r?void 0:r.assetDuration.endTime)||0,nextAssetStartTime:(null===(s=d[t+1])||void 0===s?void 0:s.assetDuration.startTime)||o},active:e.parent&&e.parent.id===(null===n||void 0===n?void 0:n.id)||e.id===(null===n||void 0===n?void 0:n.id),templateEndTime:o},"AssetItem-".concat(a,"-").concat(e.id))}))})},a)})),(0,Kg.jsx)(gY,{isLast:i,template:t})]})}));function YY(){var e=vw(),t=e.templates;return(0,Kg.jsx)("div",{className:"designer-template",children:t.map(((e,i)=>(0,Kg.jsx)(HY,{template:e,isLast:t.length===i+1},"assets-".concat(e.id))))})}var KY=(0,hp.Pi)(YY);function QY(){var e=Eq(),t=Iw(),i=t.inCamera,a=(0,r.useRef)(null),o=(0,r.useState)(250),s=(0,n.Z)(o,2),l=s[0],c=s[1];function d(e){Ph(e),e.preventDefault(),e.nativeEvent.preventDefault(),Fh(e,((e,t)=>{var i=l-t;i<1?i=1:i>500&&(i=500),c(i)}))}var u=Mw(),p=(0,n.Z)(u,1),v=p[0];function m(t){if(eu(),Ov(),Rb(),XI(""),!(v<=0)){var i=document.querySelector(".designer-template");if(i){var a=i.getBoundingClientRect(),n=a.x,r=t.clientX,o=Oq(r-n,e);o=Math.max(o,0),Number(o)>v&&(o=v),Lb(100*Math.round(o/100),!1)}}}return(0,Kg.jsxs)("div",{ref:a,className:"xiudodo-designer-bottom",onContextMenu:e=>e.preventDefault(),children:[(0,Kg.jsx)("div",{className:"drag-handle",onMouseDown:d}),(0,Kg.jsx)(vH,{}),(0,Kg.jsxs)("div",{className:"designer-bottom-layout",style:{height:l},onMouseDown:m,children:[i&&(0,Kg.jsx)(QH,{}),(0,Kg.jsx)(BH,{}),(0,Kg.jsxs)("div",{className:"designer-block",children:[i&&(0,Kg.jsxs)("div",{className:"designer-timeLine-label",children:[(0,Kg.jsx)(iP,{type:"jingtou-duijiao",style:{marginRight:2}})," \u955c\u5934"]}),(0,Kg.jsxs)("div",{className:"designer-background-label",children:[(0,Kg.jsx)(iP,{type:"iconshipin-copy"})," \u80cc\u666f"]})]}),(0,Kg.jsx)(hH,{}),(0,Kg.jsx)(KY,{}),(0,Kg.jsx)("div",{className:"designer-audio-label",children:(0,Kg.jsxs)("div",{className:"designer-audio-label-text",children:[(0,Kg.jsx)(iP,{type:"iconyinle"})," \u97f3\u4e50"]})}),(0,Kg.jsx)("div",{className:"designer-audios",children:(0,Kg.jsx)(OH,{contextmenuTheme:"dark",empty:(0,Kg.jsx)("div",{className:"designer-audios-empty",onMouseDown:e=>{Ph(e),UI("music")},children:"\u70b9\u51fb\u6dfb\u52a0\u97f3\u9891"})})}),(0,Kg.jsx)(jH,{})]})]})}var JY=(0,hp.Pi)(QY),$Y=i(87298);function eK(e){var t=e.onCancel,i=e.onOk,a=e.data,o=e.actionType,s=e.trigger,l=(0,r.useRef)(null),c=(0,dx.Z)({isPlaying:!1}),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,r.useState)(0),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=(0,r.useRef)(null),x=(0,r.useState)({cst:0,cet:0}),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(!1),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=Lw(),C=Z.template,N=Mw(),S=(0,n.Z)(N,1),I=S[0],A=e=>{Ph(e),l.current&&(u.isPlaying?l.current.pause():l.current.play(h/1e3),p({isPlaying:!u.isPlaying}))};function P(){g.current&&(l.current=new iM(g.current,b.cst,Number(a.duration),(e=>f(1e3*e))))}function M(e){var t;f(e),null===(t=l.current)||void 0===t||t.setTime(e/1e3)}(0,r.useEffect)((()=>{(h>=b.cet&&u.isPlaying||h>=Number(a.duration))&&M(b.cst)}),[h]);var E=(0,r.useMemo)((()=>{var e=0;switch(o){case"add":e=jd-I;break;case"replace":case"addInCurrent":e=jd-I+C.videoInfo.allAnimationTime;break;case"addAsset":e=C.videoInfo.allAnimationTime-Ab()+(jd-I);break;case"cut":return a.duration}return Math.min(e,a.duration)}),[o]);(0,r.useEffect)((()=>{var e=0,t=0;switch(o){case"add":t=Math.min(Number(a.duration),5e3,E);break;case"replace":case"addAsset":case"addInCurrent":t=Math.min(Number(a.duration),E);break;case"cut":Number(a.cst)>=0&&a.cet?(e=a.cst,t=a.cet):t=a.duration;break}_({cst:e,cet:t})}),[null===C||void 0===C?void 0:C.id]);var L=(0,r.useMemo)((()=>{var e=b.cst,t=b.cet;return{start:{min:-(E-(t-e)),max:t-1e3-e},end:{min:-(t-1e3-e),max:Number(E)-(t-e)},center:{min:-e,max:Number(a.duration)-t}}}),[b.cst,b.cet]);function D(e,t){var i=e.changeTime,a=b.cst,n=b.cet,r=L[t],s=r.min,l=r.max;switch(i<s?i=s:i>l&&(i=l),t){case"start":"cut"!==o&&(a+=i);break;case"end":"cut"!==o&&(n+=i);break;default:a+=i,n+=i}return _({cst:a,cet:n}),M("end"===t?n:a),{cst:a,cet:n}}return(0,r.useEffect)((()=>{var e=document.querySelector(".background-video-clip-modal-content");e&&e.focus()}),[]),(0,Kg.jsxs)("div",{className:"background-video-clip-modal-content",tabIndex:1,onKeyDown:Ph,children:[(0,Kg.jsx)("video",{ref:g,width:"100%",height:320,src:a.preview_video,onCanPlay:()=>P()}),(0,Kg.jsxs)("div",{className:"clip-modal-content-bottom",children:[(0,Kg.jsxs)("div",{className:"clip-modal-play-video",children:[(0,Kg.jsx)("div",{className:"clip-modal-play-video-icon",onClick:A,children:(0,Kg.jsx)(iP,{type:u.isPlaying?"iconzanting":"iconbofang"})}),(0,Kg.jsxs)("div",{style:{fontSize:12},children:[Th(parseInt("".concat(h/1e3),10))," /",Th(parseInt("".concat(a.duration/1e3),10))]})]}),(0,Kg.jsxs)("div",{style:{height:47,position:"relative",flex:1},children:[(0,Kg.jsx)("div",{style:{borderLeft:"2px solid #ff0000 ",height:"100%",position:"absolute",left:"".concat(Math.floor(h/Number(a.duration)*100),"%"),zIndex:100}}),(0,Kg.jsx)(MU,{overlayClassName:"background-video-clip-track",duration:a.duration,startTime:b.cst,endTime:b.cet,onChange:D,onFinish:e=>{var t=e.target,i=e.extra,a=i?i.cet-i.cst:0;!k&&s&&(T(!0),Km("videoClip",{action_label:s})),a>=E&&"center"!==t&&xp.default.info("\u89c6\u9891\u65f6\u957f\u5df2\u8fbe\u5230\u6700\u5927\u9650\u5236")}}),(0,Kg.jsx)(PU,{assetDuation:a.duration,assetHeight:a.height,assetWidth:a.width,assetUrl:a.preview_video})]})]}),(0,Kg.jsxs)("div",{style:{textAlign:"center",marginTop:30},children:[(0,Kg.jsx)(CS.Z,{style:{width:156,height:38},onClick:t,children:"\u53d6\u6d88"}),(0,Kg.jsx)(CS.Z,{type:"primary",style:{width:156,height:38,marginLeft:8},onClick:()=>i(b),children:"\u786e\u8ba4"})]})]})}function tK(e){var t=e.onCancel,i=e.contentProps;return(0,Kg.jsx)(nA.Z,(0,u.Z)((0,u.Z)({title:"\u88c1\u526a\u89c6\u9891",width:850,maskClosable:!1,footer:!1,bodyStyle:{padding:"0  0 20px 0"},centered:!0,destroyOnClose:!0,onCancel:t},e),{},{children:(0,Kg.jsx)(eK,(0,u.Z)({onCancel:t},i))}))}function iK(){var e,t,i,a=_w(Ow()),o=(0,n.Z)(a,2),s=(o[0],o[1]),l=Ep(),c=l.value;c=void 0===c?{width:1,height:1}:c;var d=c.width,p=c.height,v=zv(),m=v.activeAudio,h=Pw(),f=sj(),g=f.value,x=f.setHorizontalFlip,y=f.setVerticalFlip,b=f.setSize,_=f.setPosition,j=f.setOpacity,w=f.setVolume,k=Gq(),T=k.handleRemoveAsset,Z=(null===h||void 0===h?void 0:h.meta.isBackground)&&!m,C=g||{},N=C.meta,S=C.attribute,I=C.transform,A=S||{},P=A.width,M=void 0===P?1:P,E=A.height,L=void 0===E?1:E;function D(e,t,i){if(t){var a=e.cet-e.cst,n={meta:{type:"videoE",isBackground:!0},attribute:(0,u.Z)((0,u.Z)({},t),{},{startTime:0,endTime:a},e)};xw(a),g?Ng({params:n,asset:g}):Tg(n),setTimeout((()=>{s([0,0])})),i()}}var R=(e,t)=>{var i={meta:{type:"image",isBackground:!0},attribute:e};g?Ng({params:i,asset:g}):(Object.assign(i.attribute,{startTime:0,endTime:Bw().videoInfo.pageTime}),Tg(i)),t()},z=()=>{T(g)},F=e=>{j(e)},O=()=>{},B=e=>{x(e)},W=e=>{y(e)},V=e=>{_({posY:e.top,posX:e.left})},U=e=>{var t=0,i=0,a=M/L;d>p?(t=d*e,i=t/a):(i=p*e,t=i*a),b({width:t,height:i})},G=()=>{if(g){var e=g.attribute,t=e.width,i=e.height,a=t/i;t=d,i=t/a,i>p&&(i=p,t=i*a),b({width:t,height:i})}},X=()=>{if(g){var e=g.attribute,t=e.width,i=e.height,a=t/i;t=d,i=t/a,i<p&&(i=p,t=i*a),b({width:t,height:i})}},q=e=>{Rw().forEach((e=>{var t=e.assets,i=t.find((e=>e.meta.isBackground));if(i&&!i.meta.locked){var a=S||{},n=(a.startTime,a.endTime,(0,yp.Z)(a,["startTime","endTime"]));Ud(i,{meta:{type:null===N||void 0===N?void 0:N.type},attribute:(0,u.Z)((0,u.Z)({},n),{},{isLoop:!0}),transform:I})}})),e()},H=e=>{},Y=(0,r.useMemo)((()=>{var e=1;if(g){var t=g.attribute,i=t.width,a=t.height;e=d>p?i/d:a/p}return Math.round(100*Number(e.toFixed(2)))}),[null===g||void 0===g?void 0:g.attribute.width,d]);return{onVideoReplace:D,onImgReplace:R,backgroundDel:z,backgroundTransparent:F,backgroundLock:O,updateBackHorizontalFlip:B,updateBackVerticalFlip:W,updateSize:U,backgroundModerate:G,backgroundFill:X,applyAll:q,bindOk:H,backOpacity:null!==(e=null===g||void 0===g?void 0:g.transform.alpha)&&void 0!==e?e:100,backHorizontalFlip:null===g||void 0===g?void 0:g.transform.horizontalFlip,backVerticalFlip:null===g||void 0===g?void 0:g.transform.verticalFlip,isBackground:Z,backSize:Y,backgroundAsset:g,updatePosition:V,position:{left:null!==(t=null===I||void 0===I?void 0:I.posX)&&void 0!==t?t:0,top:null!==(i=null===I||void 0===I?void 0:I.posY)&&void 0!==i?i:0},setVolume:w}}function aK(){var e=Lw(),t=e.template,i=t?Du(t.id):0,a=_w(i),r=(0,n.Z)(a,2),o=r[0],s=r[1];function l(e){var t=e.cet-e.cst,i=t-(Bw().videoInfo.allAnimationTime-Ab());i>0&&s([o[0],-i+o[1]])}return[l]}function nK(e){var t=e.data,i=void 0===t?{}:t,a=e.attribute,r=e.meta,o=void 0===r?{type:"videoE",isBackground:!1}:r,s=aK(),l=(0,n.Z)(s,1),c=l[0],d=(0,dx.Z)({visible:!1}),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=i.preview,f=i.sample,g=i.total_frame,x=i.height,y=i.width,b=i.frame_file,_=i.duration,j=(0,u.Z)({resId:i.id,rt_url:f,rt_preview_url:h,rt_frame_url:h,rt_total_frame:g,rt_frame_file:b,rt_total_time:_,height:x,width:y},a);function w(){m({visible:!0})}function k(){m({visible:!1})}function T(e){var t=Ab();Object.assign(j,(0,u.Z)((0,u.Z)({},e),{},{startTime:t,endTime:t+(e.cet-e.cst)})),c(e),setTimeout((()=>{Tg({meta:o,attribute:j}),k()}))}function Z(){w()}return{check:Z,openClipModal:w,closeClipModal:k,state:v,onAdd:T}}function rK(e){var t=e.tip,i=e.icon,a=e.children,n=e.className,r=e.onClick,o=(0,yp.Z)(e,["tip","icon","children","className","onClick"]);return(0,Kg.jsx)(xF.Z,{title:t,arrowPointAtCenter:!0,getPopupContainer:()=>document.getElementById("xiudodo"),overlayClassName:"asset-action",children:(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({},o),{},{className:hb()("element-action",n),onClick:r,children:i?(0,Kg.jsx)(iP,{type:i}):a}))})}function oK(){return(0,Kg.jsx)(Kg.Fragment,{})}function sK(e){return(0,r.useMemo)((()=>{switch(e){case"mask":case"SVG":case"pic":case"image":return LE;case"module":case"video":case"videoE":return UM;case"lottie":return GE;default:return oK}}),[e])}var lK=(0,hp.Pi)((e=>{var t,i=e.data,a=e.type,o=e.className,s=e.style,l=e.children,c=e.onSuccess,d=i.rt_total_time,p=i.rt_url,v=i.rt_preview_url,m=iK(),h=m.onVideoReplace,f=m.onImgReplace,g=(0,r.useState)(!1),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=(0,r.useRef)(null),j=(0,bE.Z)(_),w=(0,r.useRef)();(0,r.useEffect)((()=>{j?w.current=setTimeout((()=>{var e=Sf(),t=e.menu,a=qf(),n=a.panelKey;Km("asset_hover_".concat(n||t),{action_label:"",asset_id:i.id})}),2e3):clearTimeout(w.current)}),[j]);var k=Pw(),T=aK(),Z=(0,n.Z)(T,1),C=Z[0],N=nK({data:(0,u.Z)((0,u.Z)({},i),{},{duration:d}),meta:{type:a}}),S=N.check,I=N.state,A=N.closeClipModal,P=i,M=sK(a),E=["video","videoE"].includes(a);function L(e,t){var i=Sf(),n=i.menu,r=qf(),o=r.panelKey;Km("action_".concat(o||n,"_").concat(e,"_").concat(a).concat(t?"_".concat(t):""))}function D(e){Object.assign(P,e),E&&e&&C(e),setTimeout((()=>{if(E&&e){var t=hm(e.cet-e.cst);Object.assign(P,t)}Tg({meta:{type:a,isUserAdd:!0},attribute:P}),A()})),c&&c(),L("add")}var R=(0,Zm.Z)((()=>{Ng({params:{meta:{type:a},attribute:P}}),c&&c(),L("replace")}),{wait:300}),z=R.run,F=()=>{f(i,(()=>{A()}))},O=e=>{h(e,i,(()=>{A()})),b(!1)},B=k&&("mask"!==k.meta.type||null===(t=k.assets)||void 0===t||!t.length||["video","videoE","image","pic"].includes(a)),W=(0,Zm.Z)((e=>{E?S():D()}),{wait:300}),V=W.run,U=(0,Zm.Z)((()=>{L("add","b"),E?S():F(),b(!0)}),{wait:300}),G=U.run;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(tK,{onCancel:A,visible:I.visible,contentProps:{data:{duration:d,preview_video:p,height:i.height,width:i.width},actionType:"addAsset",onOk:y?O:D,trigger:"menu_".concat(Sf().menu)}}),(0,Kg.jsxs)("div",{className:hb()("element-warp",o),style:s,ref:_,onClick:V,children:[d&&E&&(0,Kg.jsx)("div",{className:"element-duration",children:Th(parseInt("".concat(d/1e3),10))}),l||(0,Kg.jsx)(M,(0,u.Z)({poster:v,preview:v,path:p,src:p,loop:!0},i)),(0,Kg.jsx)(rK,{tip:"\u8bbe\u4e3a\u80cc\u666f",className:"background-replace",onClick:e=>{Ph(e),G()},hidden:k||!["videoE","img","user-space","background"].includes(Sf().menu),children:(0,Kg.jsx)("img",{src:(0,fb.Sx)("/image/backgroundAnimation/tihuan.png"),alt:""})}),(0,Kg.jsx)(rK,{tip:"\u66ff\u6362",className:"element-action-replace",onClick:e=>{Ph(e),z()},icon:"icontihuan",hidden:!!("module"===a||null!==k&&void 0!==k&&k.meta.isBackground)||!B})]})]})}));function cK(e){var t=e.poster,i=e.src;e.duration;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(UM,{poster:t,src:i})})}function dK(e){return(0,Kg.jsxs)("div",{className:"upload-file-folder",children:[e.thumbnail.map(((e,t)=>t<2&&(0,Kg.jsx)("div",{style:{position:"absolute",top:8*t,width:134,height:"100%",background:"url(".concat(null!==e&&void 0!==e?e:(0,fb.gP)("/image/fileManage/fileCover.png"),") center ").concat(10+5*t,"px / ").concat(80+10*t,"% no-repeat")}},t))),(0,Kg.jsx)("img",{src:(0,fb.Sx)("/image/folder.png"),alt:"",style:{width:"calc(100% + 8px)",position:"absolute",bottom:0,left:-4}})]})}function uK(e){var t=e.src,i=e.hiddenAction,a=void 0!==i&&i,o=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useState)(),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1];function f(e){e&&Ph(e),m?null===d||void 0===d||d.playPause():(h(!0),null===d||void 0===d||d.play())}(0,aM.Z)((()=>{m&&(null===d||void 0===d||d.stop())}),o);var g=()=>{if(t){var e=MH().create({container:s.current,waveColor:"#c9c9c9",progressColor:"#5646ED",backend:"MediaElement",mediaControls:!1,height:90,hideScrollbar:!0,scrollParent:!1,interact:!1,cursorColor:"transparent"});e.load(t),e.on("pause",(()=>{h(!1)})),e.on("audioprocess",(e=>{})),u(e)}};return(0,r.useEffect)((()=>{s.current&&g()}),[]),(0,Kg.jsxs)("div",{style:{height:"100%"},ref:o,children:[(0,Kg.jsx)(xF.Z,{title:m?"\u6682\u505c":"\u64ad\u653e",getPopupContainer:()=>document.getElementById("xiudodo"),overlayClassName:"audio-action-play",children:(0,Kg.jsx)("div",{className:"upload-file-item-action upload-file-item-action-play",onClick:f,hidden:a,children:(0,Kg.jsx)(iP,{type:m?"iconzanting":"iconbofang"})})}),(0,Kg.jsx)("div",{ref:s}),(0,Kg.jsx)("audio",{src:t})]})}var pK=(0,r.memo)(uK);function vK(e){var t=e.percent,i=e.state,a=(0,yp.Z)(e,["percent","state"]);return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:"upload-file-item-progress"},a),{},{children:[[-2,-1].includes(i)&&(0,Kg.jsx)(VW.Z,{style:{fontSize:20,color:"#FE822A"}}),(0,Kg.jsx)("span",{style:{color:"#fff",fontSize:12},children:{0:"\u6392\u961f\u4e2d\u2026\u2026",3:"\u4e0a\u4f20\u4e2d\u2026\u2026",1:"\u4e0a\u4f20\u6210\u529f",2:"\u8f6c\u7801\u4e2d\u2026\u2026","-2":(0,Kg.jsx)("span",{children:"\u6d89\u5acc\u8fdd\u89c4\uff0c\u65e0\u6cd5\u4e0a\u4f20!"}),"-1":(0,Kg.jsx)("span",{children:"\u4e0a\u4f20\u5931\u8d25\uff01"})}[i]}),[0,3,1].includes(i)&&(0,Kg.jsx)(tM.Z,{percent:t,trailColor:"#fff",strokeColor:"#5646ED",showInfo:!1})]}))}var mK=i(41147),hK=i.n(mK);function fK(e){var t=e.onSucceed,i=e.onError,a=e.setProgress,n=e.folder_id,o=void 0===n?"0":n,s=e.source_tag,l=(0,r.useRef)(),c=e=>{if(e.lengthComputable&&"function"===typeof a){var t=Math.round(e.loaded/e.total*100);a({progress:t>99?99:t})}};function d(e,t){return u.apply(this,arguments)}function u(){return u=(0,p.Z)(m().mark((function e(a,n){var r,c,d,u;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log("handleAddFile",null===(r=l.current)||void 0===r?void 0:r.folderId),e.next=3,TD({file_md5:a,title:n.name,folder_id:null!==(c=null===(d=l.current)||void 0===d?void 0:d.folderId)&&void 0!==c?c:o,type:"file",source_tag:s});case 3:u=e.sent,0===u.code?t(u.data):i&&i(u);case 5:case"end":return e.stop()}}),e)}))),u.apply(this,arguments)}function v(e,t){return h.apply(this,arguments)}function h(){return h=(0,p.Z)(m().mark((function e(a,n){var r,o,s,l,d;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=QW(n,a.data),o=JW(a.data),s=$W({url:o,onprogress:e=>c(e,n)}),l=s.send,e.next=5,l(r);case 5:d=e.sent,0===d.code?t(d.data):i&&i(d);case 7:case"end":return e.stop()}}),e)}))),h.apply(this,arguments)}function f(e){return g.apply(this,arguments)}function g(){return g=(0,p.Z)(m().mark((function e(t){var n,r;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=t.md5,r=t.file,a&&a({progress:99}),dV(r,function(){var e=(0,p.Z)(m().mark((function e(t){var a,c,u,p,h;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u=0,t>4&&t<=8&&(u=1),e.next=4,kD({file_md5:n,filename:r.name,orientationFlag:u,folder_id:null!==(a=null===(c=l.current)||void 0===c?void 0:c.folderId)&&void 0!==a?a:o,source_tag:s});case 4:p=e.sent,e.t0=String(null===p||void 0===p?void 0:p.code),e.next="0"===e.t0?8:"1005"===e.t0?10:13;break;case 8:return d(n,r),e.abrupt("break",13);case 10:return h=p.data.err,"fileBlock"===h?i&&i(p,{isNotAllow:!0}):"fileNotExist"===h?v(p,r):"bindPhone"===h&&i&&i(p,{bindPhone:!0}),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),g.apply(this,arguments)}function x(e,t){var i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=2097152,n=Math.ceil(e.size/a),r=0,o=new(hK().ArrayBuffer),s=new FileReader;function l(){var t=r*a,n=t+a>=e.size?e.size:t+a;s.readAsArrayBuffer(i.call(e,t,n))}s.onload=e=>{if(o.append(e.target.result),r+=1,r<n)l();else{var i=o.end();t(i)}},s.onerror=()=>{console.warn("oops, something went wrong.")},s.onprogress=e=>{},l()}var y=(e,t)=>{t&&(l.current={folderId:t});try{x(e,(t=>{f({md5:t,file:e})}))}catch(a){console.error(a),i&&i(a)}};return{uploadStat:y,handleProgress:c}}function gK(){return(0,Kg.jsx)(Kg.Fragment,{})}function xK(e){return aV.includes(e)?"image":nV.includes(e)?"video":rV.includes(e)?"audio":"all"}function yK(e){return(0,r.useMemo)((()=>{switch(e){case"image":return LE;case"video":return cK;case"audio":return pK;case"folder":return dK;default:return gK}}),[e])}function bK(e){var t,i,a,o=e.data,s=e.selected,l=e.selectedChange,c=e.onFolderClick,d=e.onTranscodingFilesChange,p=e.changeFileState,v=e.folderId,m=e.selectable,h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=zv(),b=y.activeAudio,_=Mw(),j=(0,n.Z)(_,1),w=(j[0],oh()),k=w.bindAddAudio,T=w.bindReplaceAudio,Z=o.fileInfo,C=o.title,N=o.type,S=o.scan_flag,I=2===N?"folder":xK(Z.mime_type),A=yK(I),P=Eq(),M=(0,r.useState)({}),E=(0,n.Z)(M,2),L=E[0],D=E[1],R=(0,r.useMemo)((()=>2!==N&&(Object.keys(Z).length<1||!oV.includes(Z.mime_type))),[Z.mime_type]);function z(e){p(o.id,I,e)}var F=fK({folder_id:v,onSucceed:e=>{var t=100;2===e.fileInfo.state&&(t=99),Km("file_uploaded",{action_label:e.fileInfo.file_format});var i=(0,u.Z)((0,u.Z)({},e.fileInfo),{},{state:e.fileInfo.state,progress:t,id:e.id,file_id:e.file_id,poster:e.fileInfo.cover_path,src:e.fileInfo.file_path});setTimeout((()=>{z(i)}),1e3)},setProgress(e){var t=e.progress;z({progress:t,state:3})},onError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isNotAllow,a=t.bindPhone;xp.default.error(null===e||void 0===e?void 0:e.msg),z({state:i?-2:-1,progress:100}),a&&(Hf(),uA(0))}}),O=F.uploadStat;(0,r.useEffect)((()=>{switch(Z.state){case 0:lV(Z.file,I,((e,t)=>{var i={width:t.width,height:t.height,poster:t.fileURL,duration:t.duration};e?(O(Z.file),Object.assign(i,{state:4})):Object.assign(i,{state:-1,progress:100}),z(i)}));break;case 2:d(o.file_id);break}}),[Z.state]);var B={resId:"f".concat(o.file_id),ufsId:"f".concat(o.id)};function W(){return(0,u.Z)((0,u.Z)({},B),{},{width:Z.width,height:Z.height,picUrl:Z.cover_path,rt_preview_url:Z.cover_path,isUser:!0})}function V(){var e,t,i,a,n;return(0,u.Z)((0,u.Z)({},B),{},{rt_url:null!==(e=null===(t=Z.transcode)||void 0===t?void 0:t.hd)&&void 0!==e?e:null===(i=Z.transcode)||void 0===i?void 0:i.sd,rt_preview_url:Z.cover_path,rt_frame_url:Z.cover_path,rt_total_frame:30*parseInt(null===(a=Z.values)||void 0===a?void 0:a.duration),rt_total_time:1e3*parseInt(null===(n=Z.values)||void 0===n?void 0:n.duration),width:Z.width,height:Z.height,isUser:!0,volume:60,voiced:!0})}var U=Vf(),G=U.value,X="simple"===G&&b,q=e=>{var t,i,a=1e3*parseFloat(null===(t=Z.values)||void 0===t?void 0:t.duration),n=(0,u.Z)((0,u.Z)({},B),{},{rt_title:C,type:2,rt_url:null===(i=Z.transcode)||void 0===i?void 0:i.mp3,volume:60,isLoop:!1,rt_duration:a,rt_sourceType:1}),r=rh(1,(0,u.Z)((0,u.Z)({},n),{},{startTime:e}));Object.assign(n,r),X?T(n,null===b||void 0===b?void 0:b.rt_id):k(n),Rb()},H="image"===I?W():V(),Y=(0,uL.c)((()=>({type:fP,canDrag:1===N,item:{id:o.id,mousePosition:L,add:e=>{var t=e.relativeX/P*1e3;q(t),Km("drag_user-space_add_audio")}},collect:e=>({isDragging:!!e.isDragging()})})),[L,P]),K=(0,n.Z)(Y,3),Q=K[0],J=K[1],$=K[2];return(0,r.useEffect)((()=>{$((0,vL.r)(),{captureDraggingState:!0})}),[L]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)("div",{"aria-label":I,className:hb()("upload-file-item",{"upload-file-item-hover":1===Z.state}),style:{opacity:Q.isDragging||g?0:1},onClick:()=>{2===N?c&&c(o.id):R&&xp.default.info("\u6682\u4e0d\u652f\u6301\u8be5\u7c7b\u578b\uff08".concat(Z.mime_type,"\uff09\u6587\u4ef6\u6dfb\u52a0\u5230\u753b\u5e03"))},children:[(0,Kg.jsx)("div",{hidden:!m||"simple"===G&&["folder","audio"].includes(I),className:hb()("upload-file-item-action-select",{"item-selected":s}),onClick:Ph,children:(0,Kg.jsx)(WP.Z,{checked:s,onChange:e=>l({file:(0,u.Z)({id:o.id,type:"video"===I?"videoE":"image"},H),checked:e.target.checked})})}),(0,Kg.jsxs)("div",{className:"file-not-allow",hidden:![3].includes(Number(S)),children:[(0,Kg.jsx)(VW.Z,{style:{fontSize:20}}),(0,Kg.jsx)("span",{children:"\u6587\u4ef6\u6d89\u53ca\u8fdd\u89c4 \u5df2\u4e0b\u67b6"}),(0,Kg.jsx)("span",{children:"\u5982\u9700\u6062\u590d \u8bf7\u8054\u7cfb\u5ba2\u670d"})]}),(0,Kg.jsxs)("div",{className:hb()("upload-file-item-content",{"upload-file-item-disabled":R}),children:[(0,Kg.jsx)(vK,{percent:Z.progress,state:Z.state,hidden:2===N||1===Z.state||Object.keys(Z).length<1}),"audio"===I||"folder"===I?(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(rK,{tip:X?"\u66ff\u6362":"\u6dfb\u52a0",onClick:()=>{Km("action_user-space_add_audio"),q()},hidden:"folder"===I,className:"element-action-add upload-file-item-action",style:{zIndex:4},icon:X?"icontihuan":"",children:(0,Kg.jsx)(XP.Z,{style:{color:"#fff",fontSize:12}})}),(0,Kg.jsx)("div",{ref:J,id:o.file_id,onMouseDown:e=>{var t=document.getElementById(o.file_id),i=null===t||void 0===t?void 0:t.getBoundingClientRect();D({x:null===i||void 0===i?void 0:i.x,y:null===i||void 0===i?void 0:i.y})},style:{height:"100%"},children:(0,Kg.jsx)(A,{poster:Z.small_cover_path,src:(null===(t=Z.transcode)||void 0===t?void 0:t.sd)||(null===(i=Z.transcode)||void 0===i?void 0:i.mp3),duration:null===(a=Z.values)||void 0===a?void 0:a.duration,width:Z.width,height:Z.height,thumbnail:o.thumbnail,id:o.id,file_id:o.file_id,canEdit:!1})})]}):(0,Kg.jsx)(mL,{data:{meta:{type:"video"===I?"videoE":"image"},attribute:H},type:"video"===I?"videoE":"image",style:{height:"100%"},canDrag:!R||1!==N,onDrag:()=>{x(!0)},onDragEnd:()=>{x(!1)},onDrop:()=>{},children:(0,Kg.jsx)(lK,{data:H,type:"video"===I?"videoE":"image"})})]}),(0,Kg.jsx)("div",{className:"upload-file-item-title",title:C,children:C})]})})}var _K=(0,hp.Pi)(bK),jK=()=>{var e="clipboardPaste",t=Yf(),i=t.showBindPhoneModal,a=Qf(),n=a.setPasteStatus,r=Jf(),o=r.open,s=e=>{var t={resId:"f".concat(e.file_id),ufsId:"f".concat(e.id)};return{meta:{isUser:!0,type:xK(e.fileInfo.mime_type)},attribute:(0,u.Z)((0,u.Z)({},t),{},{width:e.fileInfo.width,height:e.fileInfo.height,picUrl:e.fileInfo.cover_path,rt_preview_url:e.fileInfo.cover_path})}},l=function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n,r,s,l,c;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.clipboard.read();case 3:if(e.sent,t&&(a=t.clipboardData.items,n=[].slice.call(a).filter((function(e){return-1!==e.type.indexOf("image")})),n.length>0&&(r=n[0],i=r.getAsFile())),i||t){e.next=16;break}return e.next=8,navigator.clipboard.read();case 8:if(s=e.sent,!(s.length>0)){e.next=16;break}if(l=s[0],c=l.types.filter((e=>["image/png","image/jpeg"].includes(e))),!(c.length>0)){e.next=16;break}return e.next=15,l.getType("image/png");case 15:i=e.sent;case 16:if(!i||["designer","module"].includes((0,_p.Z)().redirect)){e.next=19;break}return d(i),e.abrupt("return",!0);case 19:return e.abrupt("return",!1);case 22:if(e.prev=22,e.t0=e["catch"](0),!(e.t0.message.indexOf("Read permission denied")>-1)){e.next=27;break}return o(),e.abrupt("return",!0);case 27:return e.abrupt("return",!1);case 28:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),c=e=>"image".concat(Date.now(),"image/png"===e?".png":".jpeg"),d=function(){var t=(0,p.Z)(m().mark((function t(i){var a,r;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=new File([i],c(i.type),{type:i.type}),t.next=3,bD();case 3:r=t.sent,r.data.maxMemoryByte-r.data.useMemoryByte>=a.size?(xp.default.info({content:"\u6587\u4ef6\u8d44\u6e90\u4e0a\u4f20\u4e2d\u2026",key:e,duration:0}),n(1),h(a)):xp.default.info({content:"\u5b58\u50a8\u7a7a\u95f4\u5df2\u6ee1",maxCount:1});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=fK({onSucceed:t=>{xp.default.destroy(e),Tg(s(t)),xp.default.success("\u4e0a\u4f20\u6210\u529f!"),n(2)},onError(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=(a.isNotAllow,a.bindPhone);xp.default.destroy(e),xp.default.error(null===t||void 0===t?void 0:t.msg),n(-1),r&&i()}}),h=v.uploadStat;return{clipboardPaste:d,analyPaste:l}},wK=jK,kK=(0,hp.Pi)((()=>{var e=nM(),t=e.isPlaying,i=e.pauseVideo,a=e.playVideo,n=Pw(),r=Gq(),o=r.handleRemoveAsset,s=oh(),l=s.bindRemoveAudio,c=Jk(),d=(c.value,c.goNext),u=c.goPrev,v=Vw(),h=v.multiSelect,f=wK(),g=(f.clipboardPaste,f.analyPaste),x=Bf(),y=x._show,b=x.show;return(0,aC.Z)(["space"],(e=>{var n;e.preventDefault(),(null===(n=document.getElementsByClassName("preview-video"))||void 0===n?void 0:n.length)<=0&&(eu(),t?i():a())})),(0,aC.Z)(["backspace","delete"],(e=>{var t;e.preventDefault();var i=Fv();if(i)l(i.rt_id),Mv(),Pv(-1);else if((null===(t=document.getElementsByClassName("preview-video"))||void 0===t?void 0:t.length)<=0)if(n)n.meta.locked||o(n);else{var a=Bw();a.validAssets.length<1&&vh(a)}})),(0,aC.Z)(["ctrl.s","meta.s"],(e=>{e.preventDefault(),eP()})),(0,aC.Z)(["ctrl.d","meta.d"],(e=>{e.preventDefault();var t=Fv();t&&Wh(t)})),(0,aC.Z)(["ctrl.z","meta.z"],(e=>{e.preventDefault(),u()})),(0,aC.Z)(["ctrl.y","meta.y"],(e=>{e.preventDefault(),d()})),(0,aC.Z)(["ctrl.x","meta.x"],(e=>{if(n&&!ii(n)&&!n.meta.locked){var t=Eg();t&&zh.copy(t.type,t.data),o(n)}})),(0,aC.Z)(["ctrl.;","meta.;"],(e=>{y(!b)})),(0,aC.Z)(["shift.ctrl.g","shift.meta.g"],(e=>{ti(n)&&zj(n)})),(0,aC.Z)(["ctrl.g","meta.g"],(e=>{e.preventDefault(),e.shiftKey||null!==h&&void 0!==h&&h.length&&Fj()})),(0,aC.Z)(["ctrl.c","meta.c"],function(){var e=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Eg(),i&&zh.copy(i);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,$Y.Z)("paste",function(){var e=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,g(t);case 2:i=e.sent,i||Gh();case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,aC.Z)(37,(()=>{n||Lb(Math.max(Wb()-400,0),!1)})),(0,aC.Z)(39,(()=>{n||Lb(Math.min(Wb()+400,Fw()),!1)})),(0,Kg.jsx)(Kg.Fragment,{})})),TK=i(31517);function ZK(e){var t=e.container,i=e.className,a=(0,yp.Z)(e,["container","className"]),o=rg(),s=Am({container:t}),l=s.canvasInfo,c=s.update,d=s.isScroll,p=l.scale,v=l.width,m=l.height,h=Ep(),f=h.value,g=f,x=g.width,y=void 0===x?0:x,b=g.height,_=void 0===b?0:b,j=(0,r.useState)(!1),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=(0,r.useState)(!1),C=(0,n.Z)(Z,2),N=C[0],S=C[1],I=(0,Cm.Z)(t),A=(0,TK.Z)(t);(0,Sb.Z)((()=>{o&&T(!0)}),[p,o]);var P=(0,r.useMemo)((()=>{var e=Nm(f,{width:132,height:80},1,20);return{width:y*e,height:_*e,scale:e}}),[y,_]),M=(0,r.useMemo)((()=>{var e=1,t=1,i="0",a="0",n="absolute",r=d.isScrollX,o=d.isScrollY;return(r||o)&&(i="".concat(A.left/v*100,"%"),a="".concat(A.top/m*100,"%")),r&&I.width&&(e=I.width/v),o&&I.height&&(t=I.height/m),{position:n,left:i,top:a,width:P.width*e,height:P.height*t}}),[d,A.left,A.top,P.height,P.width]);function E(e){Ph(e);var i=A.top,a=A.left,n=m-Number(I.height),r=v-Number(I.width);Fh(e,((e,o)=>{var s=r*(e/P.width),l=n*(o/P.height);t.scrollTo(a+s,i+l)}))}function L(e){c(e)}var D=(0,Kg.jsxs)(SH.Z,{onClick:e=>{var t=e.key;L(t),Km("canvasScale03")},children:[(0,Kg.jsx)(SH.Z.Item,{children:"50%"},.5),(0,Kg.jsx)(SH.Z.Item,{children:"75%"},.75),(0,Kg.jsx)(SH.Z.Item,{children:"100%"},1),(0,Kg.jsx)(SH.Z.Item,{children:"135%"},1.35),(0,Kg.jsx)(SH.Z.Item,{children:"\u9002\u5e94\u5c4f\u5e55"},"fit")]});return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:hb()("scale-wrap",i),onMouseDown:Ph},a),{},{children:(0,Kg.jsxs)("div",{style:{position:"relative"},id:"xiudod-canvas-scale",children:[(0,Kg.jsx)("div",{className:"scale-preview",style:{height:k?80:0},children:(0,Kg.jsxs)("div",{className:"scale-preview-canvas",style:P,children:[(0,Kg.jsx)("div",{style:{height:"100%",width:"100%",position:"relative",zIndex:1},children:k&&(0,Kg.jsx)(LI,{canvasInfo:(0,u.Z)((0,u.Z)({},f),{},{scale:P.scale}),currentTime:Ab(),templateIndex:Ow()})}),(0,Kg.jsx)("div",{className:"scale-preview-view",style:M,onMouseDown:E})]})}),(0,Kg.jsxs)("div",{className:hb()("scale-content",{"scale-content-active":k||N}),children:[(0,Kg.jsx)(xF.Z,{title:k?"\u5173\u95ed\u5bfc\u822a\u5668":"\u5c55\u5f00\u5bfc\u822a\u5668",getTooltipContainer:()=>document.getElementById("xiudodo"),children:(0,Kg.jsx)("div",{className:hb()("scale-preview-canvas-btn",{"scale-preview-canvas-btn-active":k}),onClick:()=>T(!k),children:(0,Kg.jsx)(iP,{type:"icona-1"})})}),(0,Kg.jsx)(NH.Z,{overlayClassName:"scale-dropdown",overlay:D,placement:"topCenter",getPopupContainer:()=>document.getElementById("xiudod-canvas-scale"),trigger:["click"],onVisibleChange:S,children:(0,Kg.jsxs)("div",{className:"scale-handler",children:[(0,Kg.jsx)("div",{className:"scale-action-icon",onClick:e=>{Ph(e),Km("canvasScale02"),L(Number(p)-.05)},children:(0,Kg.jsx)(iP,{type:"icona-3"})}),(0,Kg.jsxs)("span",{className:"scale-action-span",children:[Math.floor(100*Number(p))," %"]}),(0,Kg.jsx)("div",{className:"scale-action-icon",onClick:e=>{Km("canvasScale01"),Ph(e),L(Number(p)+.05)},children:(0,Kg.jsx)(iP,{type:"icona-2"})})]})})]})]})}))}var CK=(0,hp.Pi)(ZK);function NK(){var e=(0,r.useState)(null),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=Bf(),s=o.XLine,l=o.YLine,c=o.show,d=o.updateLine,u=o._show,p=()=>{var e=Date.now(),t=Math.ceil(1e3*Math.random()),i="".concat(e).concat(t);return i},v=()=>{if(c)u(!1);else{if(0===s.length&&0===l.length){var e=p();d([{id:e,value:50}],"x");var t=p();d([{id:t,value:50}],"y")}u(!0)}},m=()=>{d([],"x"),d([],"y")},h=(e,t,i)=>{var a="x"===i?s:l,n=a.map((i=>{if(i.id===t){var a=JSON.parse(JSON.stringify(i));return a.value=e,a}return i}));d(n,i)},f=(e,t,i,n,r)=>{var o=document.querySelector("#xiudodo-canvas"),c=o.getBoundingClientRect(),u=c.left,v=c.top,m=c.width,h=c.height,f=e.clientX,g=e.clientY,x=f-u,y=g-v,b="x"===t?(h-n-26)/2:(m-i-26)/2,_=b>0?b:0;"y"===t&&(x-26<_||x-_-26>i)||"x"===t&&(y-26<_||y-_-26>n)?a(null):"click"===r?(a(null),"y"===t?d([...s,{value:(x-_-26)/i*100,id:p()}],"x"):d([...l,{value:(y-_-26)/n*100,id:p()}],"y")):a({type:t,pos:"y"===t?x:y})},g=(e,t,i,a,n)=>{if("y"===e)if(t<0||t>n){var r=s.filter((e=>e.id!==i));d(r,"x")}else h(t/n*100,i,"x");else if(t<0||t>a){var o=l.filter((e=>e.id!==i));d(o,"y")}else h(t/a*100,i,"y")},x=(e,t,i)=>{var a=document.querySelector("#xiudodo-canvas"),n=a.getBoundingClientRect(),r=n.width,o=n.height,s="x"===e?(o-t-26)/2:(r-i-26)/2,l=s>0?s:0;return l};return{show:c,showLine:v,clearLine:m,hoverLine:i,setHoverLine:a,getDisplay:f,delLine:g,getPad:x}}function SK(){var e=NK(),t=e.showLine,i=e.clearLine,a=e.show,n=(0,Kg.jsxs)(SH.Z,{children:[(0,Kg.jsx)(SH.Z.Item,{onClick:t,children:a?"\u5173\u95ed\u53c2\u8003\u7ebf":"\u5f00\u542f\u53c2\u8003\u7ebf"}),(0,Kg.jsx)(SH.Z.Item,{onClick:i,children:"\u6e05\u9664\u53c2\u8003\u7ebf"})]});return(0,Kg.jsx)(NH.Z,{overlay:n,placement:"topCenter",children:(0,Kg.jsx)("span",{className:"xiudodo-designer-canvas-line",children:"\u53c2\u8003\u7ebf"})})}var IK=SK;function AK(e,t,i){var a=Np(),n=(a.templateInfo,a.updateTemplateInfo),r=fA(),o=r.open;return fA(),(0,DI.ZP)(ev,{manual:!0,onSuccess:(t,a)=>{var r,s=t.info,l=(t.assets,t.stat),c=t.msg;(0,yp.Z)(t,["info","assets","stat","msg"]);[-3,-4].includes(l)?o("\u6a21\u677f\u52a0\u8f7d\u5931\u8d25",c):"ApCo-1"!==l?(a[0].picId&&(r=s.id),i&&!i(t)||n((0,u.Z)((0,u.Z)({},t),{},{picId:r})),e&&e(t,a)):o("\u6a21\u677f\u52a0\u8f7d\u5931\u8d25",c,mA.reload)},onError:e=>{t&&t(e)}})}function PK(e,t){var i=Np(),a=(i.templateInfo,i.updateTemplateInfo),n=fA(),r=n.open;return fA(),(0,DI.ZP)(uv,{manual:!0,onSuccess:(t,i)=>{if(t){var n,o=t.info,s=(t.assets,t.stat),l=t.msg;(0,yp.Z)(t,["info","assets","stat","msg"]);if(-3===s)return void r("\u6a21\u677f\u52a0\u8f7d\u5931\u8d25",l);if("ApCo-1"===s)return;i[0].picId&&(n=o.id),t.doc.canvas.height||(t.doc.canvas.height=1080),a((0,u.Z)((0,u.Z)({},t),{},{picId:n})),e&&e(t)}else r("\u6a21\u677f\u52a0\u8f7d\u5931\u8d25","")},onError:e=>{t&&t(e)}})}function MK(){Up(),Lb(0)}function EK(){var e=PK((e=>{var t=LA(e);if(t.length>0){rw(t);var i=Ik();if(null===i||void 0===i||!i.length){var a=zA(e);Mk(a)}MK()}}));(0,r.useEffect)((()=>{var t=(0,_p.Z)(),i=t.blankSize,a=t.upicId,n=t.renovate_type;if(!Rw().length)if(a)e.run(Number(a),n);else if(i){var r=i.split("*");cw(3e3),Mp({width:Number(r[0]),height:Number(r[1])}),MK()}else cw(0),MK()}),[])}function LK(e){var t,i=e.style,a=void 0===i?{}:i,o=e.hoverStyle,s=e.children,l=e.onDrop,c=e.className,d=e.onHover,p=e.ExtraContent,v={border:"5px solid #5A4CDB",background:"#5A4CDB",opacity:.8},m=(0,r.useRef)(null),h=(0,pL.L)((()=>({accept:gP,collect:e=>({isOver:e.isOver(),isOverCurrent:e.isOver({shallow:!0}),item:e.getItem(),itemType:e.getItemType()}),drop:(e,t)=>{var i=t.getItemType();if("TEMPLATE_DRAG"!==i){if(t.isOver({shallow:!0})){var a=t.getClientOffset();l&&l({delta:a,dropInfo:e})}}else e.replace("canvas")},hover:(e,t)=>{var i=t.getItemType();"TEMPLATE_DRAG"!==i&&d&&d(e,t)}})),[]),f=(0,n.Z)(h,2),g=f[0],x=(g.isOver,g.isOverCurrent),y=g.item,b=g.itemType,_=f[1];return(0,Kg.jsxs)("div",{id:"xiudodo-canvas",className:hb()("DropDustbin",c),ref:_(m),style:(0,u.Z)((0,u.Z)((0,u.Z)({},a),x?o:{}),y&&(null!==(t=y.meta)&&void 0!==t&&t.isBackground||["TEMPLATE_DRAG","part"].includes(b))?v:{}),children:[p&&(0,Kg.jsx)(p,{isOverCurrent:x}),s]})}var DK=LK,RK=()=>{var e=(0,r.useRef)(null);function t(e){var t=e.filter((e=>"mask"===e.meta.type&&!e.meta.locked));return(0,iN.Z)(t,(e=>e.transform.zindex),"desc")}function i(e){var t=Sf(),i=t.menu,a=qf(),n=a.panelKey;Km("drag_".concat(n||i,"_add_").concat(e))}var a=t=>{var a=t.delta,n=t.dropInfo,r=Kb();if(e.current||(e.current=B()),a&&n.offset&&e.current){var o,s=e.current,l=s.left,c=s.top;if("text"==n.meta.type)null===n||void 0===n||(null===(o=n.attribute)||void 0===o||delete o.rt_preview_url);var d={x:null===a||void 0===a?void 0:a.x,y:null===a||void 0===a?void 0:a.y},u={left:(null===a||void 0===a?void 0:a.x)-l,top:(null===a||void 0===a?void 0:a.y)-c},p={x:d.x-(null===n||void 0===n?void 0:n.attribute.width)*r.scale*n.offset.offsetLeftPercent,y:d.y-(null===n||void 0===n?void 0:n.attribute.height)*r.scale*n.offset.offsetTopPercent},v={meta:null===n||void 0===n?void 0:n.meta,attribute:null===n||void 0===n?void 0:n.attribute,transform:{posX:((null===p||void 0===p?void 0:p.x)-l)/r.scale,posY:(p.y-c)/r.scale}};if(v.meta.isBackground){v.transform.posX=0,v.transform.posY=0;var m=Bw().assets.find((e=>e.meta.isBackground));m?(Ng({params:v,asset:m}),Km("drag_replace_003")):(Tg(v),Km("drag_add_003"))}else if("module"===v.meta.type)Pg(v.attribute.resId,v.transform),Km("drag_module_add");else{var h;Tg(v,u),i(null!==(h=n.weblogType)&&void 0!==h?h:v.meta.type)}}},n=(e,i)=>{var a,n=t(Mu());n.forEach((t=>{var n,r=Bu(t),o=Vu(r,e),s=mi(t,e);o&&!a?(s&&(n=zn(t,{width:i.attribute.width,height:i.attribute.height})),Gd(t,{rt_hover:{isHover:o,isMaskCenter:s},rt_asset:s?(0,u.Z)((0,u.Z)({},i),{},{attribute:(0,u.Z)((0,u.Z)({},i.attribute),n)}):void 0}),a=t):Gd(t,{rt_hover:{isHover:!1,isMaskCenter:!1},rt_asset:void 0})}))},o=(0,Nb.Z)(((t,i)=>{if(t.meta.type&&g.includes(t.meta.type)&&!t.meta.isBackground){var a=i.getClientOffset();if(e.current=B(),a&&e.current){var r=e.current,o=r.left,s=r.top,l={left:a.x-o,top:a.y-s};n(l,t)}}}),{wait:300}),s=o.run;return{onDrop:a,onHover:s}},zK=i(45552),FK=i.n(zK);function OK(e){var t=e.item,i=e.type,a=e.canvasInfo,o=e.showTip,s=e.setShowTip,l=e.docWidth,c=e.docHeight,d=a.height,u=a.width,p=a.scale,v=d*p,m=u*p,h=NK(),f=h.delLine,g=h.getPad,x=()=>{var e="x"===i?t.value/100*v:t.value/100*m;return Number(e)},y=(0,r.useState)(x()),b=(0,n.Z)(y,2),_=b[0],j=b[1];(0,r.useEffect)((()=>{j(x())}),[p]);var w=g(i,v,m),k=e=>{Ph(e),e.preventDefault(),Fh(e,((e,a)=>{var n="x"===i?a+_:e+_,r="x"===i?v/2:m/2;s(t.id),j(n<r&&n>r-10||n<r+10&&n>r?r:n)}),((e,a)=>{s("");var n="x"===i?a+_:e+_;f(i,n,t.id,v,m)}))};return(0,Kg.jsxs)(Kg.Fragment,{children:[o===t.id&&(0,Kg.jsx)("div",{className:"x"===i?FK().referenceLineXTip:FK().referenceLineYTip,style:"x"===i?{top:"".concat(_+w-5+26,"px")}:{left:"".concat(_+w-5+26,"px")},children:"x"===i?(d-_/a.scale).toFixed(0):(_/a.scale).toFixed(0)}),(0,Kg.jsx)("div",{className:"x"===i?FK().referenceLineX:FK().referenceLineY,style:"x"===i?{top:"".concat(_+w-5+26,"px"),left:30,width:l}:{left:"".concat(_+w-5+26,"px"),top:30,height:c},onMouseDown:k})]})}var BK=OK;function WK(e){var t=e.hoverLine,i=e.canvasInfo,a=e.docWidth,n=e.docHeight,r=i||{},o=r.height,s=r.width,l=r.scale,c=t||{},d=c.type,u=c.pos,p=NK(),v=p.getPad,m=o*l,h=s*l,f=v(d,m,h);return(0,Kg.jsx)(Kg.Fragment,{children:u&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"x"===d?FK().referenceLineXTip:FK().referenceLineYTip,style:"x"===d?{top:"".concat(u,"px")}:{left:"".concat(u,"px")},children:"x"===d?(o-(u-26-f)/l).toFixed(0):((u-26-f)/l).toFixed(0)}),(0,Kg.jsx)("div",{className:"x"===d?FK().hoverLineX:FK().hoverLineY,style:"x"===d?{top:"".concat(u-5,"px"),left:26,width:a}:{left:"".concat(u-5,"px"),top:26,height:n}})]})})}var VK=WK;function UK(e){var t=e.canvasInfo,i=NK(),a=i.hoverLine,o=i.setHoverLine,s=i.getDisplay,l=(0,r.useState)(""),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=Bf(),v=p.XLine,m=p.YLine,h=p.show,f=p.updateLine,g=p._show,x=t||{},y=x.scale,b=x.width,_=x.height,j=y*b,w=y*_,k=document.querySelector("#xiudodo-canvas"),T=(0,Cm.Z)(k),Z=T.width,C=void 0===Z?0:Z,N=T.height,S=void 0===N?0:N,I=(0,r.useCallback)((e=>{var t=y>.5?10*e:20*e;return"".concat(t.toFixed(0))}),[t]),A=y<.5?20*y:10*y,P=y<.5?20:10;return(0,r.useEffect)((()=>{var e=(0,_p.Z)(),t=e.upicId;t&&(window.localStorage.getItem("xLine".concat(t))&&f(JSON.parse(window.localStorage.getItem("xLine".concat(t))),"x"),window.localStorage.getItem("yLine".concat(t))&&f(JSON.parse(window.localStorage.getItem("yLine".concat(t))),"y"),window.localStorage.getItem("show".concat(t))&&g(JSON.parse(window.localStorage.getItem("show".concat(t)))))}),[]),(0,Kg.jsx)(Kg.Fragment,{children:h&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"designer_corner_block"}),(0,Kg.jsx)("div",{className:"designerHorizontal",style:{width:"100%"},onMouseMove:e=>{d||s(e,"y",j,w,"move")},onMouseOut:()=>{o(null)},onMouseDown:e=>{d||s(e,"y",j,w,"click")},children:(0,Kg.jsx)(eq.Ruler,{width:b*y||0,height:26,scaleWidth:A,formatter:I,offsetLeft:0,labelInterval:P,scaleHeight:12,fontOffsetX:4,textBaseline:"top",fontColor:"#A2AAB1",scaleColor:"#CBD1D7",textAlign:"center",fontSize:"10px Arial"})}),(0,Kg.jsx)("div",{className:"designer_vertical",style:{height:"100%"},onMouseMove:e=>{d||s(e,"x",j,w,"move")},onMouseOut:()=>{o(null)},onMouseDown:e=>{d||s(e,"x",j,w,"click")},children:(0,Kg.jsx)("div",{className:"designer_vertical_content",children:(0,Kg.jsx)(eq.Ruler,{width:_*y||0,height:26,scaleWidth:A,formatter:I,offsetLeft:0,labelInterval:P,scaleHeight:12,fontOffsetX:4,textBaseline:"top",fontColor:"#A2AAB1",scaleColor:"#CBD1D7",textAlign:"center",fontSize:"10px Arial"})})}),null===m||void 0===m?void 0:m.map((e=>(0,Kg.jsx)(BK,{item:e,type:"x",canvasInfo:t,showTip:d,setShowTip:u,docWidth:C,docHeight:S},e.id))),null===v||void 0===v?void 0:v.map((e=>(0,Kg.jsx)(BK,{item:e,type:"y",canvasInfo:t,showTip:d,setShowTip:u,docWidth:C,docHeight:S},e.id))),(0,Kg.jsx)(VK,{hoverLine:a,canvasInfo:t,docWidth:C,docHeight:S})]})})}var GK=UK,XK=i(42992),qK=i.n(XK),HK=e=>{var t=e.currentCamera,i=32,a=8,n=Kb(),r=n.width,o=n.height,s=n.scale,l=o*s,c=t.camera,d=c.posX,p=c.posY,v=c.scale,m=Iw(),h=m.removeCamera,f=m.inCamera,g=document.getElementById("HC-CORE-EDITOR-CANVAS"),x=()=>{var e=p*s-(i+a),t=Math.max(d,0)*s;return e<0&&(e=p*s+a),e>l-i&&(e=0),g&&(t+=null===g||void 0===g?void 0:g.offsetLeft,e+=null===g||void 0===g?void 0:g.offsetTop),{left:t,top:e}},y=x(),b=[{key:"fullScreen",title:"\u5168\u5c4f",icon:"iconquanping1",show:1!==v,iconStyle:{},onclick:()=>{Yd(t,(0,u.Z)((0,u.Z)({},t.camera),{},{width:r,height:o,posX:0,posY:0,scale:1}))},render:null},{key:"delete",title:"\u5220\u9664",icon:"iconshanchu",iconStyle:{fontSize:14},show:!0,onclick:()=>{h(-1,t)},render:null}],_=b.filter((e=>e.show));return _.length&&f?(0,Kg.jsx)("div",{className:qK()["camera-action"],style:y,children:_.map((e=>e.render?e.render():(0,Kg.jsxs)("div",{className:qK()["camera-action-item"],onMouseDown:Ph,onClick:t=>{t.stopPropagation(),e.onclick()},children:[(0,Kg.jsx)(iP,{type:e.icon,className:qK().icon,style:e.iconStyle}),e.title]},e.key)))}):null},YK=(0,hp.Pi)(HK),KK=(e,t)=>{var i=RK(),a=i.onDrop,n=i.onHover,o=Bf(),s=o.show,l=Gp(),c=Vp(),d=c.value,p=Qb(),v=p.loadComplete,m=Ep(),h=m.value;(0,r.useEffect)((()=>{v&&Rw().length&&$k()}),[v]),(0,r.useLayoutEffect)((()=>{l&&t.current&&Im(t.current)}),[l]);var f=yu();return(0,Kg.jsxs)("div",{ref:t,className:hb()("xiudodo-designer-canvas",{"xiudodo-designer-canvas-grid":s}),children:[(0,Kg.jsx)(GK,{canvasInfo:(0,u.Z)((0,u.Z)({},h),{},{scale:d})}),(0,Kg.jsxs)(DK,{onDrop:a,onHover:n,className:"xiudodo-designer-DropDustbin",children:[h&&(0,Kg.jsx)(NI,{canvasInfo:(0,u.Z)((0,u.Z)({},h),{},{scale:d}),onChange:(e,t)=>{$k(),t&&$A({autoSave:!0})}}),(null===f||void 0===f?void 0:f.camera)&&(0,Kg.jsx)(YK,{currentCamera:f})]})]})},QK=(0,hp.Pi)((0,r.forwardRef)(KK));function JK(){var e=Bw(),t=xu(),i=Mw(),a=(0,n.Z)(i,1),o=a[0],s=Wb(),l=nM(),c=l.isPlaying,d=l.pauseVideo,u=l.playVideo,p=Ep(),v=p.value,m=void 0===v?{width:0,height:0}:v,h=(p.update,(0,r.useRef)(null));function f(){var e,t,i,a;null!==(e=h.current)&&void 0!==e&&e.fullscreenElement?null!==(t=h.current)&&void 0!==t&&t.exitFullscreen&&(null===(i=h.current)||void 0===i||i.exitFullscreen()):null===(a=h.current)||void 0===a||a.requestFullscreen()}function g(t){e.id&&(Rw().length>1?vh(e):(jh(e),Mk([])),t())}function x(){nA.Z.confirm({title:"\u786e\u5b9a\u8981\u6e05\u7a7a\u753b\u5e03\u5417",content:"\u6e05\u7a7a\u753b\u5e03\uff0c\u753b\u5e03\u5185\u7684\u5143\u7d20\u5c06\u5168\u90e8\u6e05\u9664\uff01",okText:"\u786e\u8ba4",cancelText:"\u6211\u518d\u60f3\u60f3",onOk:g})}return EK(),(0,r.useEffect)((()=>{t&&d()}),[t]),(0,Kg.jsxs)("div",{className:"xiudodo-designer-content",onMouseDown:()=>{eu()},children:[(0,Kg.jsx)(QK,{ref:h}),(0,Kg.jsxs)("div",{className:"xiudodo-designer-canvas-detail",children:[(0,Kg.jsxs)("div",{className:"xiudodo-designer-canvas-detail-time",children:[Th(parseInt("".concat((null!==s&&void 0!==s?s:0)/1e3),10))," | \xa0",Th(parseInt("".concat(o/1e3),10))]}),(0,Kg.jsx)("div",{className:"xiudodo-designer-canvas-detail-play",children:(0,Kg.jsx)(iP,{className:"xiudodo-designer-canvas-play-icon",type:c?"iconzanting":"iconbofang",onClick:c?d:u})}),(0,Kg.jsxs)("div",{className:"xiudodo-designer-canvas-detail-right",children:[h.current&&(0,Kg.jsx)(CK,{style:{marginRight:16},container:h.current,className:"xdd-designer-scale-handler"}),(0,Kg.jsx)(IK,{}),(0,Kg.jsx)(xF.Z,{title:"\u5220\u9664\u5f53\u524d\u7247\u6bb5\u6240\u6709\u5143\u7d20",children:(0,Kg.jsx)("span",{className:"xiudodo-designer-canvas-clear",onClick:x,children:"\u6e05\u7a7a\u753b\u5e03"})}),(0,Kg.jsx)("div",{className:"xiudodo-designer-canvas-detail-scale",children:{"1080*1920":"9:16","1080*1080":"1:1","1920*1080":"16:9","1440*1080":"4:3"}["".concat(m.width,"*").concat(m.height)]}),(0,Kg.jsx)(iP,{onClick:f,type:"iconquanping",className:"xiudodo-designer-canvas-detail-full-screen"})]})]})]})}var $K=(0,hp.Pi)(JK),eQ=(0,r.memo)((()=>(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(aA,{header:(0,Kg.jsx)(kM,{}),sider:(0,Kg.jsx)(pU,{}),content:(0,Kg.jsx)($K,{}),footer:(0,Kg.jsx)(JY,{})}),(0,Kg.jsx)(mP,{})]})));function tQ(){var e=bf(),t=e.showLoginModal;(0,r.useEffect)((()=>{Ah.closeWindowsLoading()}),[]);var i=yf(),a=i.loopRun,n=i.reLoginTips,o=i.stopLoop,s=rA(),l=(0,DI.ZP)(aP,{manual:!0,pollingInterval:2e3,onSuccess:e=>{s(e),e.id>0||n||(t(),o(),l.cancel())},onError:e=>{console.log(e)}});return(0,r.useEffect)((()=>{a?l.run():l.cancel()}),[a]),(0,Kg.jsxs)(RI.W,{backend:zI.PD,children:[(0,Kg.jsx)(eQ,{}),(0,Kg.jsx)(kK,{}),(0,Kg.jsx)(kP,{})]})}var iQ=(0,hp.Pi)(tQ),aQ=i(96738),nQ=i(68654),rQ=()=>{var e=Bb(),t=e.setCurrentTime,i=e.currentTime,a=Sq.durationInfo,n=a.offsetTime,o=(0,r.useCallback)((e=>{e+n!==i&&t(e+n)}),[n,i]);return{currentTime:i-a.offsetTime,updateCurrentTime:o}},oQ=()=>{var e=Pw(),t=Iw(),i=t.start,a=t.inCamera,n=Jk(),r=n.value,o=r.hasNext,s=r.hasPrev,l=n.goNext,c=n.goPrev,d=wK(),u=d.analyPaste;return[{key:"undo",text:"\u4e0a\u4e00\u6b65",icon:"iconchexiao1",show:!0,isNew:!1,onclick:c,disable:!s},{key:"redo",text:"\u4e0b\u4e00\u6b65",icon:"iconchexiao1",iconStyles:{transform:"rotateY(180deg)"},disable:!o,show:!0,isNew:!1,onclick:l},{key:"copy",text:"\u590d\u5236",icon:"icona-Frame6",disable:!e,show:!0,isNew:!1,onclick:function(){var t=(0,p.Z)(m().mark((function t(i){var a,n;return m().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(Ph(i),a=Ew(),a){t.next=4;break}return t.abrupt("return");case 4:return zh.copy({type:"asset",data:a,canvasInfo:Kb()}),t.next=7,u(void 0);case 7:n=t.sent,n||Gh({asset:e});case 9:case"end":return t.stop()}}),t)})));function i(e){return t.apply(this,arguments)}return i}()},{key:"delete",text:"\u5220\u9664",icon:"iconicons8_trash",disable:!e,show:!0,isNew:!1,onclick:()=>{e&&(e&&Ij(e),eu())}},{key:"camera",text:"\u955c\u5934",icon:"jingtou-duijiao",choosed:a,iconStyles:{transform:"rotateY(180deg)"},disable:!1,show:!0,isNew:!0,onclick:()=>{i()}}]},sQ=i(74702),lQ=i.n(sQ),cQ=()=>{var e=Sq.maxDuration,t=Sq.activePartKey,i=Sq.durationInfo,a=Sq.scaleTime,o=(Sq.scaleWidth,Sq.setScaleTime),s=Sq.rulerWidth,l=Sq.setAutoScale,c=Sq.autoScale,d=nM(),u=d.isPlaying,p=d.pauseVideo,v=d.playVideo,m=(0,r.useState)(a),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=i.countDuration,y=rQ(),b=y.currentTime,_=cG(Math.max(b,0)),j=cG(x),w=oQ(),k=(0,Zm.Z)((e=>{o(e)}),{wait:10}),T=k.run,Z=k.cancel,C=e=>{T(e),g(e),Km("Timeline4\u200b")},N=()=>{Km("Timeline5\u200b"),Z();var e=l();o(e),g(e)};(0,r.useLayoutEffect)((()=>{N()}),[t,s]),(0,r.useLayoutEffect)((()=>{Z();var e=l();g(e)}),[e]);var S=()=>{u?p():v(),Km("Timeline3\u200b")},I=2*c,A=-c;return(0,Kg.jsxs)("div",{className:lQ().Tools,children:[(0,Kg.jsx)("div",{className:lQ().operation,children:w.map((e=>e.show?(0,Kg.jsxs)("div",{className:hb()(lQ().tool,{[lQ().disable]:e.disable,[lQ().toolChoosed]:e.choosed}),onClick:t=>{e.onclick(t),Km("Timeline_".concat(e.key))},onMouseDown:Ph,children:[(0,Kg.jsx)(iP,{type:e.icon,className:lQ().icon,style:e.iconStyles}),(0,Kg.jsx)("span",{className:hb()({[lQ().hasAfter]:e.isNew}),children:e.text}),e.isNew&&(0,Kg.jsx)("div",{className:lQ().hasAfter})]},e.key):null))}),(0,Kg.jsxs)("div",{className:lQ().duration,children:[(0,Kg.jsx)("div",{className:lQ().control,onClick:S,children:(0,Kg.jsx)(iP,{type:u?"iconzanting":"iconbofang",className:lQ().icon})}),_.m,":",_.s," / ",j.m,":",j.s]}),(0,Kg.jsxs)("div",{className:lQ().timeLineSize,children:[(0,Kg.jsx)("span",{children:"\u65f6\u95f4\u8f74\u8c03\u6574"}),(0,Kg.jsx)(TP.Z,{className:lQ().slider,tooltipVisible:!1,reverse:!0,step:(I-A)/10,value:f,onChange:C,min:A,max:I},c),(0,Kg.jsx)(xF.Z,{title:"\u9002\u5e94\u5c4f\u5e55",getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:"fit-screen",onClick:N,children:(0,Kg.jsx)(nQ.Z,{style:{transform:"rotate(45deg)"}})})})]})]})},dQ=(0,hp.Pi)(cQ);function uQ(e){var t=Wb();return!!e&&!(t-e.startTime<_d||t>e.endTime)}function pQ(){var e=Wb(),t=Fv();if(uQ(t)&&t){var i=t.rt_id,a=t.speed,r=void 0===a?1:a,o=t.startTime,s=t.endTime,l=t.cut,c=void 0===l?[0,s-o]:l,d=(s-o)/r,p=e-o,v=(0,n.Z)(c,2),m=v[0],h=v[1],f=(0,u.Z)((0,u.Z)({},t),{},{startTime:e,endTime:e+(d-p)*r});Object.assign(f,{cut:[m+(e-o)*r,h]});var g=Uk(f);Wk({startTime:m,endTime:m+p*r},i),Bk({startTime:o,endTime:o+p*r},i),Mv(g)}}function vQ(){var e=zv(),t=e.activeAudio,i=Bb();i.currentTime;return{splitAudio:pQ,disabled:!uQ(t)}}function mQ(e){var t=e.children,i=e.overlayClassName,a=e.theme,o=void 0===a?"light":a,s=e.trigger,l=e.visible,c=(0,r.useState)(!1),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=zv(),h=m.activeAudio,f=m.setActiveAudioInCliping,g=oh(),x=g.bindRemoveAudio,y=vQ(),b=y.disabled,_=y.splitAudio;function j(e){var t,i=e.key;switch(v(!1),i){case"copy":ZH(),t="a_timeline_005";break;case"split":t="a_timeline_009",_();break;case"delete":x(null===h||void 0===h?void 0:h.rt_id),t="a_timeline_006";break;case"cut":f(null===h||void 0===h?void 0:h.trackIndex),t="a_timeline_003";break;case"voice":Cv(!0),t="a_timeline_004";break;case"speed":Nv(!0),t="a_timeline_010";break}Km(t)}var w=[{key:"cut",icon:"iconjianji",name:"\u8c03\u6574",iconStyle:{transform:"rotate(90deg)"},hidden:"designer"===(0,_p.Z)().redirect,disable:!h},{key:"split",icon:"iconGroup",name:"\u5206\u5272",hidden:"designer"===(0,_p.Z)().redirect,disable:b||!h},{key:"voice",icon:"iconbx_bx-volume-full",name:"\u97f3\u91cf",hidden:"designer"===(0,_p.Z)().redirect,disable:!h},{key:"speed",icon:"beisu",name:"\u500d\u901f",hidden:"designer"===(0,_p.Z)().redirect,disable:!h},{key:"copy",icon:"iconic_baseline-content-copy",name:"\u590d\u5236\u97f3\u9891",disable:!h,keyPress:Ld.clone},{key:"delete",icon:"iconicons8_trash",name:"\u5220\u9664",iconStyle:{fontSize:18},hidden:"designer"===(0,_p.Z)().redirect,disable:!h,keyPress:Ld.delete}],k=(0,Kg.jsx)(SH.Z,{onMouseDown:Ph,onClick:j,className:hb()("audio-context-menu","audio-context-menu-".concat(o)),children:w.map((e=>(0,Kg.jsxs)(SH.Z.Item,{icon:(0,Kg.jsx)(iP,{type:e.icon,style:(0,u.Z)({fontSize:16},e.iconStyle)}),hidden:e.hidden,disabled:e.disable,children:[e.name,(0,Kg.jsx)("span",{className:"audio-contextmenu-keypress",children:e.keyPress})]},e.key)))});return(0,Kg.jsx)(NH.Z,{overlayClassName:hb()("audio-context-overlay-dropdown","audio-context-overlay-dropdown-".concat(o),i),visible:null!==l&&void 0!==l?l:p,overlay:k,trigger:s,onVisibleChange:e=>{v(e),e&&Km("audio_contextMenu")},getPopupContainer:()=>document.getElementById("xiudodo"),children:t})}var hQ=(0,hp.Pi)(mQ);function fQ(e,t){var i=iw(),a=Ik(),r=[];function o(t){return t/1e3*e}return i.forEach((e=>{var t=(0,n.Z)(e,2),i=t[0],a=t[1];r.push(o(i),o(a))})),a.forEach((e=>{var i=e.startTime,a=e.endTime,n=e.rt_id,s=e.speed,l=void 0===s?1:s;t!==n&&r.push(o(i),o(a/l))})),r}function gQ(e){var t=e.data,i=(e.style,e.active),a=e.trackIndex,o=e.setAuxiliaryLine,l=e.setTrackZIndex,c=e.autoScroll,d=void 0===c||c,p=Wq(),v=p.endTime,m=nM(),h=m.isPlaying,f=Eq(),g=zv(),x=g.updateActiveAudio,y=g.inCliping,b=g.setActiveAudioInCliping,_=g.activeAudio,j=t.startTime,w=t.endTime,k=t.rt_duration,T=t.rt_id,Z=t.rt_title,C=t.rt_sourceType,N=t.rt_url,S=t.speed,I=void 0===S?1:S,A=y===a&&i,P=t.cut||[0,w-j],M=(0,n.Z)(P,2),E=M[0],L=M[1],D=w-j,R=j+D/I,z=oh(),F=z.bindSetAudioDuration,O=z.bindSetAudioCut,B=(0,r.useState)(),W=(0,n.Z)(B,2),V=W[0],U=W[1],G=(0,r.useState)(!1),X=(0,n.Z)(G,2),q=X[0],H=X[1],Y=(0,dx.Z)({width:0,left:0}),K=(0,n.Z)(Y,2),Q=K[0],J=K[1],$=(0,dx.Z)({x:0,y:0}),ee=(0,n.Z)($,2),te=ee[0],ie=ee[1],ae=(0,r.useState)(0),ne=(0,n.Z)(ae,2),re=ne[0],oe=ne[1],se=(0,r.useState)(-1),le=(0,n.Z)(se,2),ce=le[0],de=le[1],ue=(0,r.useState)(0),pe=(0,n.Z)(ue,2),ve=pe[0],me=pe[1],he=(0,r.useRef)(null),fe=(0,r.useState)(!1),ge=(0,n.Z)(fe,2),xe=ge[0],ye=ge[1],be=(0,r.useRef)(null);(0,aM.Z)((()=>ye(!1)),[be],"contextmenu"),(0,aM.Z)((()=>ye(!1)),[be],"click");var _e=(0,r.useMemo)((()=>({start:{min:Math.max(-j,-E)/I,max:(w-j-_d)/I},end:{min:-(w-j-_d)/I,max:Math.min((k-L)/I,v-(j+D/I))},center:{min:-j,max:v-j-100},cut:{min:-(k-L)/I,max:E/I}})),[L,v,w,j,E,I,k]);function je(e,t){var i=e.duration,a=e.cut;("start"===t&&(0===i.startTime||0===a.startTime)||"end"===t&&(i.endTime===v||a.endTime>=k))&&xp.default.info("\u5df2\u7ecf\u5230\u5e95\u5566"),F(e.duration,T),O(e.cut,T)}function we(e,t){var i=Number((e/f*1e3).toFixed(0)),a=j,n=w,r=E,o=L,s=w-j;if(A)r-=i*I,o=r+s,de(r);else if("start"===t)a+=i,r+=i*I,n-=i*(I-1),de(a);else if("end"===t)n+=i*I,o+=i*I,de(n);else{a+=i,n=a+s;var l=a+s/I;if(l>v){var c=l-v;n=a+s-c*I,o-=c*I}}return{duration:{startTime:a,endTime:n},cut:{startTime:r,endTime:o}}}function ke(e,t){var i=_e[e],a=i.min,n=i.max,r=a/1e3*f,o=n/1e3*f;return t<r?t=r:t>o&&(t=o),t}function Te(e,t){var i,a=-1,n=1,r=(0,Xe.Z)(t);try{for(r.s();!(i=r.n()).done;){var o=i.value;if(a=-1,Math.abs(o-e)<10){n=o-e,a=o;break}}}catch(s){r.e(s)}finally{r.f()}return{point:a,auxiliary:n}}function Ze(e){var t="";"cut"===e?t="a_timeline_001":"center"===e?t="a_timeline_007":Km("a_timeline_008"),t&&Km(t)}function Ce(e,i){eu(),e.preventDefault(),l(a);var n,r=fQ(f,T);Fh(e,((t,a)=>{var s;if(!(Math.abs(t)<=5)){Ph(e);var l,c,d=Q.width,u=Q.left,p=-1;"start"===i?c=Te(u+t,r):"end"===i?c=Te(u+d+t,r):"center"===i&&(c=Te(u+t,r),c.point<0&&(c=Te(u+d+t,r))),c&&(p=c.point,l=c.auxiliary+t);var v=ke(i,null!==(s=l)&&void 0!==s?s:t);o(l===v&&p>=0?p:-1),U(i),"start"===i?(u+=v,d-=v,me(v)):"end"===i?d+=v:(ie({x:v,y:a}),oe(u+v)),n=we(v,i),J({width:d,left:u})}}),(()=>{if(x((0,u.Z)((0,u.Z)({},(0,s.ZN)(t)),{},{trackIndex:a})),n){je(n,i),U(void 0),ie({x:0,y:0}),me(0),de(-1),o(-1),Ze(i);var e=(0,u.Z)({},n.duration);n.cut&&(e.cut=[n.cut.startTime,n.cut.endTime]),Ev(e)}}))}return(0,r.useEffect)((()=>{J({width:(w-j)/1e3*f/I,left:j/1e3*f})}),[j,w,f,I]),(0,r.useEffect)((()=>{(h||T!==(null===_||void 0===_?void 0:_.rt_id)&&q)&&H(!1)}),[T,null===_||void 0===_?void 0:_.rt_id,q,h]),(0,Sb.Z)((()=>{if(R>v){var e=(R-v)*I;F({startTime:j,endTime:w-e},T),O({startTime:E,endTime:L-e},T)}}),[I]),(0,r.useEffect)((()=>{d&&i&&setTimeout((()=>{var e,t;null===(e=he.current)||void 0===e||e.scrollIntoView({block:"center"}),null===(t=document.querySelector(".xiudodo-bottom-scrollX"))||void 0===t||t.scrollTo(j/1e3*f,0),l(a)}),200)}),[d]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:hb()("audio-module-item",{"audio-module-item-simple":Q.width<120,"audio-module-item-active":i,"audio-module-item-incliping":A,"audio-module-item-moving":"center"===V}),style:(0,u.Z)((0,u.Z)({},Q),{},{transform:A?"unset":"translateX(".concat(te.x,"px) translateY(").concat(te.y,"px)")}),onMouseDown:e=>{Ce(e,A?"cut":"center")},onDoubleClick:()=>{b(a)},ref:he,children:[(0,Kg.jsx)("div",{className:"audio-title-extra",children:Z}),(0,Kg.jsxs)("div",{className:hb()("audio-module-item-content",{"audio-module-item-ai":2===C}),style:{overflow:A?"unset":"hidden",pointerEvents:V?"none":"all"},children:[(0,Kg.jsx)(xF.Z,{title:"".concat((ce/1e3).toFixed(1),"s"),placement:"right",visible:!0,getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{style:(0,u.Z)({position:"absolute",display:V&&"center"!==V?"block":"none"},["start","cut"].includes(V||"")?{left:10}:{right:10})})}),(0,Kg.jsx)(LH,{height:24,src:N,audioRate:I,progressColor:2===C?"#5679A7":"#5A4CDB",playing:q,onFinish:()=>{H(!1)},start:E/1e3,end:L/1e3,waveColor:2===C?"#9fb4d0":"#a39de3",style:{position:"absolute",top:"50%",transform:"translateY(-50%) translateX(".concat(A?te.x:-ve,"px)"),zIndex:1,width:k/1e3*f/I,left:-E/1e3*f/I}}),(0,Kg.jsxs)("div",{className:"autio-detail",children:[(0,Kg.jsxs)("span",{className:"autio-duration",children:[((w-j)/1e3).toFixed(1),"s"]}),(0,Kg.jsx)("span",{className:hb()("autio-title",{"audio-ai-icon":2===C}),title:Z,children:Z}),1!==I&&(0,Kg.jsxs)("span",{className:hb()("autio-title","speed"),children:["\u500d\u901f",I,"x"]})]}),(0,Kg.jsx)("div",{className:hb()("active-autio-detail",{"active-autio-detail-playing":q}),children:(0,Kg.jsxs)("span",{onClick:()=>{H(!q),Km("audioSpeed3")},className:hb()("autio-title"),title:Z,children:[(0,Kg.jsx)("div",{className:"autio-title-play",children:(0,Kg.jsx)(iP,{type:q?"iconzanting":"iconbofang"})}),!q&&(0,Kg.jsx)("div",{className:"autio-title-text",children:Z})]})}),(0,Kg.jsx)("div",{className:"audio-module-clip audio-clip-left",onMouseDown:e=>{Ph(e),Ce(e,"start")},children:(0,Kg.jsx)(iP,{type:"iconhuoyunsuanfuhao"})}),(0,Kg.jsx)("div",{className:"audio-module-clip audio-clip-right",onMouseDown:e=>{Ph(e),Ce(e,"end")},children:(0,Kg.jsx)(iP,{type:"iconhuoyunsuanfuhao"})}),(0,Kg.jsx)(hQ,{trigger:["click"],visible:xe,children:(0,Kg.jsx)("div",{className:hb()("audio-more-action",{"audio-more-action-active":xe}),ref:be,onDoubleClick:Ph,onMouseDown:e=>{Ph(e),ye(!0),x((0,u.Z)((0,u.Z)({},(0,s.ZN)(t)),{},{trackIndex:a})),Km("a_timeline_002")},children:(0,Kg.jsx)(iP,{type:"icongengduo_tianchong"})})}),!!t.fadeIn&&(0,Kg.jsx)("div",{className:"audio-fade audio-fadeIn",style:{borderRightWidth:t.fadeIn/1e3*f}}),!!t.fadeOut&&(0,Kg.jsx)("div",{className:"audio-fade audio-fadeOut",style:{borderLeftWidth:t.fadeOut/1e3*f}})]})]}),"center"===V&&(0,Kg.jsx)("div",{className:"audio_absolute",style:{width:Q.width,left:re}})]})}var xQ=(0,hp.Pi)(gQ),yQ=e=>{var t=e.className,i=e.style,a=e.contextmenuTheme,o=e.empty,s=e.autoScroll,l=(0,r.useRef)(null),c=Ik(),d=zv(),p=d.activeAudio,v=d.inCliping,m=(0,r.useState)(-1),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=(0,r.useState)(-1),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=CH([...c]),w=!c.length&&o;return(0,Kg.jsx)(hQ,{theme:a,trigger:["contextMenu"],children:(0,Kg.jsx)("div",{className:hb()(t),style:(0,u.Z)({},i),children:w?(0,Kg.jsxs)(Kg.Fragment,{children:[" ",o]}):(0,Kg.jsxs)("div",{className:"audio-wrap",ref:l,children:[(0,Kg.jsx)("div",{hidden:f<0,className:hb()("audio-auxiliary-line"),style:{left:f}}),j.map(((e,t)=>(0,Kg.jsx)("div",{className:hb()("audio-track",{"audio-track-incliping":v===t}),style:{zIndex:b===t?100:2},onMouseDown:e=>{v===t&&Ph(e)},children:e.map((e=>(0,Kg.jsx)(xQ,{connect:"designer"!==(0,_p.Z)().redirect,trackIndex:t,data:e,active:e.rt_id===(null===p||void 0===p?void 0:p.rt_id),setAuxiliaryLine:g,autoScroll:s,setTrackZIndex:_,style:{opacity:v===t&&e.rt_id!==(null===p||void 0===p?void 0:p.rt_id)?0:1}},e.rt_id)))},"audio-track-".concat(t))))]})})})},bQ=(0,hp.Pi)(yQ),_Q=i(27916),jQ=i.n(_Q),wQ=e=>{e.data;var t=e.index,i=e.children,a=e.template,o=Iw(a),s=o.removeCamera,l=o.removeAll,c=(0,r.useState)(!1),d=(0,n.Z)(c,2),u=d[0],p=d[1];return(0,Kg.jsx)(NH.Z,{onVisibleChange:e=>{p(e)},overlayClassName:jQ().actionPopover,visible:u,overlay:(0,Kg.jsxs)("div",{className:jQ().actionMenu,children:[(0,Kg.jsx)("div",{className:jQ().actionMenuItem,onClick:e=>{s(t),Km("Timeline_camera_delete")},children:"\u5220\u9664\u955c\u5934"}),(0,Kg.jsx)("div",{className:jQ().actionMenuItem,onClick:e=>{l(),Km("Timeline_camera_deleteAll")},children:"\u6e05\u7a7a\u6240\u6709\u955c\u5934"})]}),trigger:["contextMenu"],children:i})},kQ=wQ,TQ=e=>{var t=e.data,i=e.height,a=e.index,n=e.cameras,o=e.template,s=e.preLength,l=(0,r.useRef)(null),c=(0,r.useRef)(null),d=yu(),p=Iw(o),v=p.addCamera,m=t.camera,h=m.endTime,f=m.startTime,g=sG(),x=g.scale,y=(g.scroll,(0,r.useRef)(null)),b=(0,r.useRef)(null),_=(0,r.useRef)(null),j=(0,r.useRef)(null),w=(0,r.useRef)(),k=HU(Sd,x),T=HU(h-f,x),Z=HU(f,x),C=(null===d||void 0===d?void 0:d.id)===t.id,N=(e,i)=>{t&&(i.stopPropagation(),j_(t),j.current=t.getCameraCloned(),w.current={min:0,max:o.endTime},0!==a&&n[a-1]&&(w.current.min=n[a-1].camera.endTime),a!==n.length-1&&n[a+1]&&(w.current.max=n[a+1].camera.startTime),"start"===e&&(w.current.max=Math.min(w.current.max,h-Sd)),"end"===e&&(w.current.min=Math.min(w.current.max,f+Sd)))};iG({ele:y,stopPropagation:!0,onMouseDown:e=>{N("start",e)},onMouseMove:e=>{if(j.current&&w.current){var i,a,n=j.current.startTime+e.distanceX*x;n=Math.max(null===(i=w.current)||void 0===i?void 0:i.min,n),n=Math.min(null===(a=w.current)||void 0===a?void 0:a.max,n),Yd(t,(0,u.Z)((0,u.Z)({},j.current),{},{startTime:n}))}},onMouseUp:e=>{w_()}}),iG({ele:b,stopPropagation:!0,onMouseDown:e=>{N("end",e)},onMouseMove:e=>{if(j.current&&w.current){var i,a,n=j.current.endTime+e.distanceX*x;n=Math.max(null===(i=w.current)||void 0===i?void 0:i.min,n),n=Math.min(null===(a=w.current)||void 0===a?void 0:a.max,n),Yd(t,(0,u.Z)((0,u.Z)({},j.current),{},{endTime:n}))}},onMouseUp:e=>{w_()}}),iG({ele:_,stopPropagation:!0,onMouseDown:e=>{N("move",e)},onMouseMove:e=>{if(j.current&&w.current){var i,a,n,r,o=j.current.endTime-j.current.startTime,s=j.current.startTime+e.distanceX*x,l=s+o;if(s<(null===(i=w.current)||void 0===i?void 0:i.min))s=null===(n=w.current)||void 0===n?void 0:n.min,l=s+o;if(l>(null===(a=w.current)||void 0===a?void 0:a.max))l=null===(r=w.current)||void 0===r?void 0:r.max,s=l-o;Yd(t,(0,u.Z)((0,u.Z)({},j.current),{},{startTime:s,endTime:l}))}},onMouseUp:e=>{w_()}});var S=()=>{var e=h,t=h;t=a===n.length-1?o.endTime:n[a+1].camera.startTime;var i=HU(t-e,x);return i},I=S(),A=()=>{var e=a;return s&&(e+=s),0===e?(0,Kg.jsx)("div",{className:jQ()["dragCamera-title"],children:"\u9ed8\u8ba4\u955c\u5934"}):(0,Kg.jsxs)("div",{className:jQ()["dragCamera-title"],children:["\u955c\u5934",e]})},P=e=>{v(a,e)},M=e=>{e.stopPropagation(),P("before"),Km("Timeline_camera_add")},E=e=>{e.stopPropagation(),P("after"),Km("Timeline_camera_add")},L=e=>{e.stopPropagation()};return(0,r.useLayoutEffect)((()=>(c.current&&(null===c||void 0===c||c.current.addEventListener("click",E)),l.current&&(null===l||void 0===l||l.current.addEventListener("click",M)),y.current&&(null===y||void 0===y||y.current.addEventListener("click",L)),b.current&&(null===b||void 0===b||b.current.addEventListener("click",L)),_.current&&(null===_||void 0===_||_.current.addEventListener("click",L)),()=>{var e,t,i,a,n;null===c||void 0===c||null===(e=c.current)||void 0===e||e.removeEventListener("click",E),null===l||void 0===l||null===(t=l.current)||void 0===t||t.removeEventListener("click",M),null===y||void 0===y||null===(i=y.current)||void 0===i||i.removeEventListener("click",L),null===b||void 0===b||null===(a=b.current)||void 0===a||a.removeEventListener("click",L),null===_||void 0===_||null===(n=_.current)||void 0===n||n.removeEventListener("click",L)})),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[0===a&&(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u955c\u5934",children:(0,Kg.jsxs)("div",{className:hb()(jQ()["timeLine-dragCamera-link"],jQ()["last-dragCamera-link"],{[jQ()["no-action"]]:Z<k}),style:{left:Z-25},children:[(0,Kg.jsx)("div",{className:jQ().add,ref:l,children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),(0,Kg.jsxs)("div",{className:jQ().line,children:[(0,Kg.jsx)("div",{className:jQ().dian}),(0,Kg.jsx)("div",{className:jQ().triangle})]})]})}),(0,Kg.jsx)(kQ,{data:t,index:a,template:o,children:(0,Kg.jsxs)("div",{className:hb()(jQ()["timeLine-dragCamera"],{[jQ()["timeLine-dragCamera-active"]]:C,[jQ()["timeLine-dragCamera-dragging"]]:C}),ref:_,style:{width:T,height:i,left:Z,display:T<=0?"none":"flex",position:"absolute",pointerEvents:"auto",cursor:"grabbing",justifyContent:"space-between"},children:[(0,Kg.jsx)(oX,{width:T,ref:y,time:f}),(0,Kg.jsx)(A,{}),(0,Kg.jsx)(oX,{width:T,ref:b,time:h})]})}),(0,Kg.jsxs)("div",{className:hb()(jQ()["timeLine-dragCamera-link"],{[jQ()["last-dragCamera-link"]]:a===n.length-1,[jQ()["no-action"]]:I<k}),style:{left:T+Z,width:I},children:[(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u955c\u5934",children:(0,Kg.jsx)("div",{className:jQ().add,"data-change":!1,ref:c,children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})})}),(0,Kg.jsxs)("div",{className:jQ().line,children:[(0,Kg.jsx)("div",{className:jQ().dian}),(0,Kg.jsx)("div",{className:jQ().triangle})]})]})]})},ZQ=(0,hp.Pi)(TQ),CQ=e=>{var t=e.data,i=e.options,a=e.className,n=e.scale,o=void 0===n?1:n,s=e.style,l=e.duration,c=void 0===l?0:l,d=e.template,u=DU,p=u.metaScaleWidth,v=u.scaleTime,m=u.scaleWidth,h=(0,Ju.Z)((()=>new mX),[]),f=Rw(),g=(0,r.useRef)(null),x=Iw(d),y=x.addCamera;rG(e,h),tG(t,i,h),nG(p*o,h),aG(h);var b=()=>{var e=0;if(d){var t=f.findIndex((e=>e.id===d.id));f.forEach(((i,a)=>{a<t&&(e+=i.cameras.length)}))}return e},_=e=>{e.stopPropagation(),y(-1,"before"),Km("Timeline_camera_add")};return(0,r.useLayoutEffect)((()=>(g.current&&0===(null===d||void 0===d?void 0:d.cameras.length)&&(null===g||void 0===g||g.current.addEventListener("click",_)),()=>{var e;null===g||void 0===g||null===(e=g.current)||void 0===e||e.removeEventListener("click",_)})),[null===d||void 0===d?void 0:d.cameras.length]),(0,Kg.jsx)(oG.Provider,{value:h,children:(0,Kg.jsx)("div",{className:hb()(jQ()["timeLine-item-wrapper"],a),style:s,children:(0,Kg.jsxs)("div",{className:jQ()["timeLine-item"],style:{width:HU(c,v/m),height:"100%"},children:[(null===d||void 0===d?void 0:d.cameras)&&d.cameras.map(((e,t)=>(0,Kg.jsx)(ZQ,{preLength:b(),template:d,cameras:d.cameras,data:e,height:21,index:t},e.id))),0===(null===d||void 0===d?void 0:d.cameras.length)&&(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u955c\u5934",children:(0,Kg.jsxs)("div",{className:hb()(jQ()["timeLine-dragCamera-link"],jQ()["last-dragCamera-link"]),style:{marginLeft:10},children:[(0,Kg.jsx)("div",{className:jQ().add,ref:g,children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),(0,Kg.jsxs)("div",{className:jQ().line,children:[(0,Kg.jsx)("div",{className:jQ().dian}),(0,Kg.jsx)("div",{className:jQ().triangle})]})]})})]})})})};CQ.defaultProps={className:void 0,selectKeys:void 0,style:void 0};var NQ=(0,hp.Pi)(CQ),SQ=i(70170),IQ=i.n(SQ),AQ=e=>{var t=e.top,i=Sq.activePartKey,a=Ik(),n=Aw();return(0,Kg.jsxs)("div",{className:IQ().Mark,children:[(0,Kg.jsx)("div",{className:IQ().bgMark,style:{top:t},children:(0,Kg.jsx)(iP,{className:IQ().icon,type:"iconbackground"})}),n&&(0,Kg.jsx)("div",{className:IQ().cameraMark,children:(0,Kg.jsx)(iP,{className:IQ().icon,type:"jingtou-duijiao"})}),-1===i&&!!a.length&&(0,Kg.jsx)("div",{className:IQ().audioMark,style:{top:t+40},children:(0,Kg.jsx)(iP,{className:IQ().icon,type:"icona-luyin"})})]})},PQ=(0,hp.Pi)(AQ),MQ=e=>{var t=e.meta,i=t.isBackground,a=t.type;return i&&"video"===a},EQ=()=>{var e=Bb(),t=e.setCurrentTime,i=e.currentTime,a=Sq.activePartKey,n=Sq.durationInfo,o=(Sq.maxDuration,Sq.hiddenPointer,n.offsetTime),s=n.countDuration,l=nM(),c=l.isPlaying;l.pauseVideo,l.playVideo;(0,r.useEffect)((()=>{a&&t(o)}),[a,o]),(0,r.useLayoutEffect)((()=>{i-o>s&&c&&t(o)}),[i,o,s])},LQ=e=>{(0,r.useEffect)((()=>{var t=Sq.setActivePartKey;t(e)}),[e])},DQ=()=>{var e=(0,r.useRef)({});(0,r.useEffect)((()=>{var t=(0,s.EH)((()=>{var t=Sq.setTemplates,i=Sq.timeLineScale,a=Rw(),r=0,o=[],s=Mw(),l=(0,n.Z)(s,1),c=l[0];a.forEach(((t,a)=>{var n=t.videoInfo.speed,s=[],l=[],d=[...t.assets].filter((e=>!ii(e)&&!e.meta.isTransfer&&!e.meta.isLogo&&!e.meta.hidden&&!("effect"===e.meta.type))).sort(((e,t)=>t.asset.transform.zindex-e.asset.transform.zindex));d.forEach((i=>{var n=i.assetDurationWithOffset,r=i.minAssetDuration,o=i.attribute.rt_total_time,d=i.meta,p=d.trackId,v=d.type,m={id:i.id,startTime:n.startTime,endTime:n.endTime,trackId:p||e.current[i.id]||qh(),asset:i,type:v,disableDrag:i.meta.locked,templateId:t.id,templateIndex:a,minDuration:r,maxEndTime:t.videoInfo.allAnimationTime};if(["video","videoE"].includes(v)){var h=Nj(i),f=h.value;m.minStartTime=n.startTime-f.startTime,m.maxEndTime=Math.min(n.endTime+Number(o)-f.endTime,t.videoInfo.allAnimationTime)}MQ(i)?l.push((0,u.Z)((0,u.Z)({},m),{},{minDuration:t.startTransfer||t.endTransfer?Zd:wd,minStartTime:-t.videoInfo.offsetTime[0],isBackground:!0,disableDrag:!0,maxEndTime:t.videoInfo.allAnimationTime+(_q-c)})):(e.current[i.id]||(e.current[i.id]=m.trackId),s.push(m))})),l.length||l.push({id:qh(),startTime:0,endTime:t.videoInfo.allAnimationTime,trackId:qh(),minDuration:t.startTransfer||t.endTransfer?Zd:wd,template:t,type:bq,templateId:t.id,templateIndex:a,isBackground:!0,disableDrag:!0,minStartTime:-t.videoInfo.offsetTime[0],maxEndTime:t.videoInfo.allAnimationTime+(_q-c)}),o.push({endTime:t.videoInfo.allAnimationTimeBySpeed,id:t.id,assets:s,bgAssets:l,cameras:t.cameras,scale:n,offsetTime:r,width:HU(t.videoInfo.allAnimationTimeBySpeed,i),paddingLeft:0,paddingRight:0}),r+=t.videoInfo.allAnimationTimeBySpeed})),t(o)}));return t}),[])},RQ=i(36338),zQ=i.n(RQ),FQ=e=>{var t=e.record,i=e.trackId,a=e.index,n=t.templateId,r=t.id,o=Sq.templates,l=o.find((e=>e.id===n));if(l){var c=[...l.assets],d=c.findIndex((e=>e.id===r)),u=c.splice(d,1)[0];u&&(c.splice(a,0,u),(0,s.z)((()=>{u.asset.meta.trackId=i,c.forEach(((e,t)=>{e.trackId===i&&(e.asset.meta.trackId=i),e.asset.transform.zindex=c.length-t+yq}))})),We("reSortAsset",!0))}},OQ=()=>{var e=(0,r.useMemo)((()=>({adsorbLimit:50,onMouseDown:e=>{var t=e.record,i=e.event;i.stopPropagation(),eu(),t.asset&&Aj(t.asset)},onMouseMove:e=>{var t=e.record,i=e.changeType;"move"===i&&t.disableDrag&&xp.default.info({content:"\u56fe\u5c42\u5df2\u9501\u5b9a\uff0c\u8bf7\u5148\u89e3\u9501",key:t.id})},onTimeChangeEnd:e=>{var t=e.startTime,i=e.endTime,a=e.record,n=e.changeType;t=Math.ceil(t),i=Math.ceil(i);var r=a.asset,o=r.meta.type,s=r.attribute.rt_total_time;if(Km("move"===n?"Timeline8":"Timeline7"),"move"!==n&&["video","videoE"].includes(o)){var l=Nj(),c=l.value,d=l.update,u=Math.min(a.startTime-t,c.startTime),p=Math.min(i-a.endTime,s-c.endTime);(u||p)&&(U_(r,{startTime:a.startTime-u,endTime:a.endTime+p}),d({startTime:c.startTime-u,endTime:c.endTime+p}))}else U_(r,{startTime:t,endTime:i})},onTrackChange:e=>{FQ(e)},trackTypes:wq})),[]);return e},BQ=e=>{var t=(0,r.useRef)([0,0]),i=(0,r.useRef)(),a=(0,r.useRef)(0),o=Sq.setHiddenPointer,s=Bb(),l=(s.currentTime,t=>{var i=Sq.timeLineScale,a=_w(t),r=(0,n.Z)(a,2),o=r[0],s=r[1],l=YU(20,i),c=Mw(),d=(0,n.Z)(c,1),u=d[0];u+l>_q||(l=(0,XG.Z)(l,0,_q-u),s([o[0],o[1]-l]),e&&e.scrollBy(20,0))});(0,r.useEffect)((()=>()=>{clearInterval(i.current)}),[]);var c=(0,r.useMemo)((()=>({onMouseDown:e=>{var i=e.changeType;"end"!==i&&"start"!==i||(t.current=[0,0],a.current=0)},onMouseMove:r=>{var o=r.record,s=r.event,c=r.changeType,d=o.templateIndex,u=s.clientX,p=document.body.clientWidth;if(clearInterval(i.current),p-u<20&&e&&"end"===c){var v=_w(d),m=(0,n.Z)(v,2),h=m[0],f=m[1];f([h[0],h[1]+a.current-t.current[1]]),t.current[1]=a.current,i.current=setInterval((()=>{l(d)}),100)}},onTimeChange:e=>{var t=e.startTime,i=e.endTime,n=e.record,r=e.changeType,o=n.templateIndex,s=t-n.startTime,l=n.endTime-i,c=Sq.templates,d=Sq.updateTemplate,u=Sq.timeLineScale,p=c[o],v=p.offsetTime;a.current=l,"start"===r?(Db(v+s,!1),d(p,{paddingLeft:-HU(s,u)})):(d(p,{paddingRight:-HU(l,u)}),Db(v+p.endTime-l,!1))},onTimeChangeEnd:e=>{var t=e.startTime,i=e.endTime,a=e.record,r=e.changeType;Km("Timeline9");var o=a.templateIndex,s=t-a.startTime,l=a.endTime-i,c=_w(o),d=(0,n.Z)(c,2),u=d[0],p=d[1];if(p([u[0]+s,u[1]+l]),"start"===r){var v=Sq.templates,m=v[o],h=m.offsetTime;Db(h,!1)}},onMouseUp:()=>{clearInterval(i.current),o(!1)},trackTypes:kq})),[e]);return c},WQ=()=>{var e=Sq.scaleTime,t=Sq.scaleWidth,i=Sq.selectedTemplates,a=Sq.setRulerWidth,n=Sq.timeLineScale,o=Sq.audioList,s=Sq.activePartKey,l=Sq.durationInfo,c=Sq.canvasHeight,d=Sq.hiddenPointer,p=(0,r.useRef)(null),v=(0,r.useRef)(null),m=(0,r.useRef)(null),h=(0,r.useRef)(null),f=(0,r.useRef)(null),g=(0,TK.Z)(v),x=(0,Cm.Z)(p),y=(0,Cm.Z)(v),b=(0,Cm.Z)(m),_=(0,Cm.Z)(h),j=Bb(),w=j.currentTime,k=Aw();(0,r.useEffect)((()=>{a(x.width||2e3)}),[x.width,a]),EQ();var T=OQ(),Z=BQ(v.current),C=(0,r.useCallback)((t=>{var i=t/1e3*e;return i&&i/window.parseInt("".concat(i))!==1?"".concat(i.toFixed(1),"s"):"".concat(i,"s")}),[e]),N=Math.max(...o.map((e=>e.endTime))),S=(0,r.useCallback)((e=>{Db(e+l.offsetTime,!1)}),[l.offsetTime]),I=(0,r.useMemo)((()=>{var e,t;return(null!==(e=null===(t=m.current)||void 0===t?void 0:t.offsetTop)&&void 0!==e?e:0)-g.top}),[y.height,m.current,s,b.height,_.height,c,g.top]),A=e=>{var t,i,a,n,r=xu();return"__module"===(null===r||void 0===r?void 0:r.meta.type)?(null===(i=r.assets)||void 0===i||null===(a=i[0])||void 0===a||null===(n=a.template)||void 0===n?void 0:n.id)!==e?[]:r.assets.map((e=>e.id)):(null===r||void 0===r||null===(t=r.template)||void 0===t?void 0:t.id)!==e?[]:[r.id]};return(0,Kg.jsxs)("div",{className:zQ().timeLineWrapper,children:[(0,Kg.jsx)(PQ,{top:I}),(0,Kg.jsx)("div",{className:zQ().timeLineBody,children:(0,Kg.jsxs)(eq,{scaleTime:e,scaleWidth:t,paddingLeft:mq,children:[(0,Kg.jsx)(eq.Pointer,{currentTime:w-l.offsetTime,scrollLeft:g.left||0,maxDuration:l.countDuration,onTimeChange:S,hidden:d}),(0,Kg.jsx)("div",{ref:p,className:zQ().ruler,children:(0,Kg.jsx)(eq.Ruler,{width:(null===x||void 0===x?void 0:x.width)||0,height:(null===x||void 0===x?void 0:x.height)||0,scaleWidth:t,formatter:C,offsetLeft:(null===g||void 0===g?void 0:g.left)||0,labelInterval:~~Math.max(5,100/e),scaleHeight:12,fontOffsetY:12,textBaseline:"top",fontColor:"#484E5F",scaleColor:"#CDD5DE",textAlign:"center"})}),(0,Kg.jsxs)("div",{ref:v,className:zQ().timeLines,style:{paddingLeft:mq},children:[k&&(0,Kg.jsx)("div",{className:zQ().cameras,ref:f,children:i.map(((e,t)=>(0,Kg.jsx)(NQ,{template:e,data:[],scale:e.scale,selectKeys:[],options:Z,scroll:(0,u.Z)({},g),duration:e.endTime,style:{paddingLeft:e.paddingLeft,paddingRight:e.paddingRight}},e.id)))}),(0,Kg.jsx)("div",{ref:h,className:zQ().assetTimeLine,children:(0,Kg.jsx)("div",{className:zQ().parts,children:i.map((e=>(0,Kg.jsx)(eq.Item,{data:e.assets,className:zQ().assetTimeLineItem,scale:e.scale,selectKeys:A(e.id),options:T,scroll:(0,u.Z)({},g),duration:e.endTime,style:{paddingLeft:e.paddingLeft,paddingRight:e.paddingRight}},e.id)))})}),(0,Kg.jsx)("div",{className:zQ().bgs,ref:m,children:i.map((e=>(0,Kg.jsx)(eq.Item,{data:e.bgAssets,scale:e.scale,selectKeys:[],options:Z,scroll:(0,u.Z)({},g),duration:e.endTime,style:{paddingLeft:e.paddingLeft,paddingRight:e.paddingRight}},e.id)))}),-1===s&&(0,Kg.jsx)("div",{className:zQ().audios,style:{width:HU(N,n)},children:(0,Kg.jsx)(bQ,{wrapClassName:"xiudodo-bottom-audios-wrap",className:"xiudodo-bottom-audios",autoScroll:!1,style:{width:HU(N,n)}})})]})]})}),(0,Kg.jsx)("div",{style:{width:20}})]})},VQ=(0,hp.Pi)(WQ),UQ=i(32827),GQ=i.n(UQ),XQ=SH.Z.SubMenu;function qQ(e){var t,i=e.children,a=(e.className,e.classNameWrapper,Pw()),n=(0,r.useRef)(null),o=(null===a||void 0===a?void 0:a.meta.type)||"",s=Zf(),l=s.dropdownVisible,c=s.setDropdownVisible,d=()=>null!==a&&void 0!==a&&a.assets&&a.assets.length>0&&["video","videoE"].includes(a.assets[0].meta.type)?"\u5206\u79bb\u89c6\u9891":"\u5206\u79bb\u56fe\u50cf",u=$_(),v=(u.zIndex,u.maxZIndex),h=u.minZIndex,f=u.moveBottom,g=u.moveTop,x=u.moveDown,y=u.moveUp,b=Gq(),_=b.handleRemoveAsset,j=rf(),w=j.open,k=jf(),T=k.timeLinePartKey,Z=Sq.activePartKey,C=wK(),N=(C.clipboardPaste,C.analyPaste),S=Gf(),I=S.open,A=Iw(),P=A.inCamera,M=function(){var e=(0,p.Z)(m().mark((function e(t){var i,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.key,t.e,i.split("-").includes("line")||Km("QuickActions12_".concat(i)),["up","down","top","bottom"].includes("key")&&Km("QuickActions13"),e.t0=i,e.next="copy"===e.t0?6:"paste"===e.t0?8:"cut"===e.t0?13:"order"===e.t0?16:"up"===e.t0?17:"down"===e.t0?19:"top"===e.t0?21:"bottom"===e.t0?23:"AI"===e.t0?25:"animation"===e.t0?27:"group"===e.t0?29:"lock"===e.t0?32:"delete"===e.t0?34:"splitMask"===e.t0?36:"ungroup"===e.t0?38:40;break;case 6:return zh.copy({type:"asset",data:Ew()}),e.abrupt("break",41);case 8:return e.next=10,N(void 0);case 10:return n=e.sent,n||Gh(),e.abrupt("break",41);case 13:return zh.copy({type:"asset",data:Ew()}),_(a),e.abrupt("break",41);case 16:return e.abrupt("break",41);case 17:return y(),e.abrupt("break",41);case 19:return x(),e.abrupt("break",41);case 21:return g(),e.abrupt("break",41);case 23:return f(),e.abrupt("break",41);case 25:return w(),e.abrupt("break",41);case 27:return I("tool-animation"),e.abrupt("break",41);case 29:return Hu(),We("groupModule",!0),e.abrupt("break",41);case 32:return xg(xu()),e.abrupt("break",41);case 34:return a&&(Ij(a),eu()),e.abrupt("break",41);case 36:return"mask"===(null===a||void 0===a?void 0:a.meta.type)&&a&&!a.meta.isClip&&Oj(),e.abrupt("break",41);case 38:return"module"===(null===a||void 0===a?void 0:a.meta.type)&&zj(a),e.abrupt("break",41);case 40:return e.abrupt("break",41);case 41:c(!1);case 42:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=[{key:"copy",name:"\u590d\u5236",icon:"copy",disabled:!a||ii(a),shortcut:Ld.copy},{key:"paste",name:"\u7c98\u8d34",icon:"iconic_round-flip-to-front",disabled:!1,shortcut:Ld.paste},{key:"cut",name:"\u526a\u5207",icon:"iconic_outline-content-paste",hidden:["__module","module"].includes(o),disabled:!a,shortcut:Ld.cut},{key:"line-1",className:GQ().lineItem},{key:"order",name:"\u56fe\u5c42\u987a\u5e8f",icon:"tucengshunxu",disabled:!a,hidden:["__module"].includes(o),children:[{key:"top",name:"\u7f6e\u4e8e\u9876\u5c42",icon:"iconic_round-flip-to-front",disabled:(null===a||void 0===a?void 0:a.transform.zindex)===v,shortcut:Ld.moveToTop},{key:"up",name:"\u5411\u4e0a\u4e00\u5c42",icon:"icongg_move-up",disabled:(null===a||void 0===a?void 0:a.transform.zindex)===v,shortcut:Ld.moveUp},{key:"down",name:"\u5411\u4e0b\u4e00\u5c42",icon:"icongg_move-down",disabled:(null===a||void 0===a?void 0:a.transform.zindex)===h,shortcut:Ld.moveDown},{key:"bottom",name:"\u7f6e\u4e8e\u5e95\u5c42",icon:"iconic_round-flip-to-back",disabled:(null===a||void 0===a?void 0:a.transform.zindex)===h,shortcut:Ld.moveToBottom}]},{key:"AI",name:"\u6587\u672c\u6717\u8bfb",icon:"acoustic",disabled:!1,hidden:!("text"===(null===a||void 0===a?void 0:a.meta.type))||![-1,null].includes(Z)},{key:"animation",name:"\u52a8\u753b\u8bbe\u7f6e",hidden:["__module","module"].includes(o||"")||null!==T,icon:"donghua",disabled:!a},{key:"line-2",className:GQ().lineItem},{key:"lock",name:"\u9501\u5b9a\u56fe\u5c42",icon:"lock",hidden:["__module"].includes(o),disabled:!a},{key:"group",name:"\u7ec4\u5408",icon:"zuhe",hidden:!("__module"===o),disabled:!a},{key:"splitMask",name:d(),icon:"iconxingzhuangjiehe",hidden:!("mask"===(null===a||void 0===a?void 0:a.meta.type)&&!a.meta.isClip&&(null===a||void 0===a||null===(t=a.assets)||void 0===t?void 0:t.length)>0)},{key:"ungroup",name:"\u62c6\u5206\u7ec4\u5408",icon:"chaifen",hidden:"module"!==(null===a||void 0===a?void 0:a.meta.type)},{key:"delete",name:"\u5220\u9664\u56fe\u5c42",icon:"delete",disabled:!a,shortcut:Ld.delete}],L=e=>e.map((e=>!e.hidden&&Array.isArray(e.children)?(0,Kg.jsx)(XQ,{title:e.name,icon:(0,Kg.jsx)(iP,{className:GQ()["icon-size"],type:e.icon}),disabled:e.disabled,popupClassName:GQ().hover,children:L(e.children)},e.key):(0,Kg.jsxs)(SH.Z.Item,{hidden:e.hidden,disabled:e.disabled,className:e.className,icon:(0,Kg.jsx)(iP,{className:GQ()["icon-size"],type:e.icon}),children:[e.name,e.shortcut&&(0,Kg.jsx)("span",{className:"template-contextmenu-keypress",children:e.shortcut})]},e.key)));return(0,r.useEffect)((()=>{if(n.current){var e=()=>{c(!1)};return n.current.addEventListener("mousedown",e),()=>{n.current&&n.current.removeEventListener("mousedown",e)}}}),[n.current]),(0,r.useEffect)((()=>{P&&c(!1)}),[P]),(0,Kg.jsx)(NH.Z,{getPopupContainer:e=>e,onVisibleChange:e=>{!0===e&&P||c(e),e&&Km("QuickActions12_show")},visible:l,overlay:(0,Kg.jsx)(SH.Z,{className:GQ().hover,onMouseDown:Ph,onClick:M,theme:"light",getPopupContainer:e=>e,children:L(E)}),trigger:["contextMenu"],overlayStyle:{width:"max-content"},children:i})}var HQ=(0,hp.Pi)(qQ),YQ=i(74355),KQ=i.n(YQ),QQ=i(67915),JQ=i.n(QQ),$Q=e=>{var t=e.currentCamera,i=32,a=8,n=Kb(),r=n.width,o=n.height,s=n.scale,l=o*s,c=t.camera,d=c.posX,p=c.posY,v=c.scale,m=Iw(),h=m.removeCamera,f=m.inCamera,g=()=>{var e=p*s-(i+a);return e<0&&(e=p*s+a),e>l-i&&(e=0),{left:Math.max(d,0)*s,top:e}},x=g(),y=[{key:"fullScreen",title:"\u5168\u5c4f",icon:"iconquanping1",show:1!==v,iconStyle:{},onclick:()=>{Yd(t,(0,u.Z)((0,u.Z)({},t.camera),{},{width:r,height:o,posX:0,posY:0,scale:1})),Km("Timeline_camera_fullScreen")},render:null},{key:"delete",title:"\u5220\u9664",icon:"iconshanchu",iconStyle:{fontSize:14},show:!0,onclick:()=>{h(-1,t),Km("Timeline_camera_delete")},render:null}],b=y.filter((e=>e.show));return b.length&&f?(0,Kg.jsx)("div",{className:JQ()["camera-action"],style:x,children:b.map((e=>e.render?e.render():(0,Kg.jsxs)("div",{className:JQ()["camera-action-item"],onMouseDown:Ph,onClick:t=>{t.stopPropagation(),e.onclick()},children:[(0,Kg.jsx)(iP,{type:e.icon,className:JQ().icon,style:e.iconStyle}),e.title]},e.key)))}):null},eJ=(0,hp.Pi)($Q),tJ=40,iJ=()=>{var e=(0,r.useRef)(null),t=(0,Cm.Z)(e),i=Lp(),a=Math.min((((null===t||void 0===t?void 0:t.width)||i.width)-2*tJ)/i.width,(((null===t||void 0===t?void 0:t.height)||i.height)-2*tJ)/i.height),n=ah(),o=yu();return(0,Kg.jsx)("div",{ref:e,className:KQ().canvas,style:{padding:tJ},children:(0,Kg.jsxs)("div",{className:KQ().stage,style:{width:i.width*a,height:i.height*a},children:[(null===o||void 0===o?void 0:o.camera)&&(0,Kg.jsx)(eJ,{currentCamera:o}),(0,Kg.jsx)(HQ,{classNameWrapper:KQ().ContextMenu,children:(0,Kg.jsx)(NI,{onChange:(e,t)=>{$k(),t&&$A({autoSave:!0});var i=xu();n(i,e)},canvasInfo:{width:i.width,height:i.height,scale:a}})})]})})},aJ=(0,hp.Pi)(iJ),nJ=i(75945),rJ=i.n(nJ),oJ=e=>{var t=e.onBack;return(0,Kg.jsxs)("div",{className:rJ().Header,children:[(0,Kg.jsx)("span",{className:rJ().title,children:"\u65f6\u95f4\u7ebf\u6a21\u5f0f"}),(0,Kg.jsxs)("div",{className:rJ().back,onClick:t,children:[(0,Kg.jsx)(iP,{className:rJ().icon,type:"iconjiantouyou"}),(0,Kg.jsx)("div",{children:"\u8fd4\u56de"})]})]})},sJ=oJ,lJ=i(78793),cJ=i.n(lJ),dJ=e=>{var t=e.partKey,i=e.onClose,a=Iw(),n=a.clearStatus,r=Sq.canvasHeight,o=Sq.setCanvasHeight,s=Sq.templates,l=Sq.activePartKey,c=Sq.setActivePartKey;DQ(),LQ(t);var d=()=>{n(),i(),Km("Timeline2")};(0,aC.Z)(["esc"],(()=>{d()}));var u=e=>{var t=Number(e);c(t),Km("Timeline6")};return(0,Kg.jsxs)("div",{className:cJ().TimeLine,onMouseDown:()=>{Ov(),eu()},children:[(0,Kg.jsx)(sJ,{onBack:d}),(0,Kg.jsx)("div",{className:cJ().content,children:(0,Kg.jsxs)(aQ.Z,{split:"horizontal",size:r,minSize:Zq.minSize,maxSize:Zq.maxSize,primary:"second",pane1Style:{height:0},pane2Style:{maxHeight:Zq.maxSize,minHeight:Zq.minSize},onChange:o,children:[(0,Kg.jsx)(aJ,{}),(0,Kg.jsxs)("div",{className:cJ().bottom,children:[(0,Kg.jsx)(dQ,{}),(0,Kg.jsx)("div",{className:cJ().tabs,children:(0,Kg.jsxs)(YP.Z,{activeKey:null===l||void 0===l?void 0:l.toString(),type:"card",size:"small",onChange:u,children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u6240\u6709\u7247\u6bb5"},-1),s.map(((e,t)=>(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u7247\u6bb5 ".concat(t<9?0:"").concat(t+1)},e.id)))]})}),(0,Kg.jsx)(VQ,{})]})]})})]})},uJ=(0,hp.Pi)(dJ),pJ=i(96534),vJ=FI.Z.Header,mJ=FI.Z.Content;xp.default.config({top:200,duration:2,maxCount:1});var hJ=e=>{var t=e.header,i=e.content,a=Bb(),n=a.setCurrentTime,o=a.currentTime,s=jf(),l=s.timeLinePartKey,c=s.setTimeLinePartKey,d=kf(),u=d.editMode;return(0,r.useLayoutEffect)((()=>(Ah.closeWindowsLoading(),()=>{})),[]),(0,r.useLayoutEffect)((()=>{setTimeout((()=>{n(o)}),1)}),[l]),(0,r.useEffect)((()=>{(0,pJ.W4)(u)}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[null!==l&&(0,Kg.jsx)(uJ,{partKey:l,onClose:()=>{c(null)}}),(0,Kg.jsxs)(FI.Z,{className:"xiudodo-layout",style:{overflow:"hidden"},children:[(0,Kg.jsx)(vJ,{children:t}),(0,Kg.jsx)(mJ,{children:i})]})]})},fJ=hJ;function gJ(e){var t=new FormData;return Object.keys(e).forEach((i=>{t.append(i,e[i])})),bp.g.post("/watermark-video/exec-compound",{body:JSON.stringify(e)})}function xJ(e){return bp.g.get("/watermark-video/check-watermark-res?id=".concat(e))}function yJ(e){return bp.g.get("/watermark-video/watermark-detail?id=".concat(e))}function bJ(e,t,i){return bp.g.get("/watermark-video/get-oss-up-params?filename=".concat(e,"&cdnName=").concat(t,"&type=pic&id=").concat(i))}function _J(e){return bp.g.get("/video-tools/get-cdn-name?filename=".concat(e,"&root=video_watermark"))}function jJ(e){return bp.g.get("/site-api/send-tel-login-code?num=".concat(e,"&noCodeImg=1"))}function wJ(e){var t={num:null===e||void 0===e?void 0:e.phoneNum,code:null===e||void 0===e?void 0:e.phoneMsgNum,confirm_bind:null===e||void 0===e?void 0:e.confirm_bind};return bp.g.post("/user/bind-tel",{data:t})}function kJ(e){return bp.g.get("/video-tools/get-download-link?id=".concat(e))}function TJ(e){return bp.g.get("/user-upload/draft-payload?source_type=draft_cover&name=".concat(e.name,"&type=").concat(e.type,"&size=").concat(e.size))}function ZJ(){var e=(0,kp.TL)();function t(t){t&&e(kp.I0.getCouponStatus(t))}return t}function CJ(){var e=(0,kp.CG)((e=>({couponStatus:e.couponStatus}))),t=e.couponStatus,i=ZJ();return{couponStatus:t,updateCouponStatus:i}}function NJ(){var e=xf(),t=e.open,i=()=>{var e=sA();return console.log("loginStatus",e>-1),e<0&&(t(),!0)};return{checkLoginStatus:i}}var SJ=i(50209),IJ=i.n(SJ);function AJ(e){var t=e.onCancel,i=e.onOk,a=e.title,n=e.content,r=e.button,o=e.width;return nA.Z.warning({okText:r,icon:null,className:"warnModal",content:(0,Kg.jsxs)("div",{className:IJ().warnModalContent,children:[(0,Kg.jsx)("div",{className:IJ().warnModalContentTitle,children:a}),(0,Kg.jsx)("div",{className:IJ().warnModalContentContent,children:n})]}),width:o,closable:!0,centered:!0,onCancel(){t&&t()},onOk(){i&&i()}})}var PJ=!0;function MJ(e,t){var i={vip_type:1,dln_value:1,vip_value:1,today_dln_value:1,today_vip_dln_value:0};return t&&!PJ?i:(0,u.Z)({},e)}var EJ=(e,t)=>AJ(e?{title:"\u60a8\u4eca\u65e5\u4e0b\u8f7d\u6b21\u6570\u5df2\u7528\u5b8c!",content:"\u60a8\u53ef\u4ee5\u5347\u7ea7\u66f4\u9ad8\u7248\u672c\u4f1a\u5458,\u6216\u660e\u65e5\u5728\u6765\u4e0b\u8f7d\u5427!",button:"\u5347\u7ea7\u4f1a\u5458",onOk:()=>{t()},onCancel:()=>{},width:415}:{title:"\u5f53\u524d\u4f1a\u5458\u5957\u9910\u4e0b\u8f7d\u6b21\u6570\u5df2\u7528\u5b8c!",content:"\u7ee7\u7eed\u4e0b\u8f7d\u9700\u8981\u91cd\u65b0\u5145\u503c\u4f1a\u5458\u5957\u9910",button:"\u7acb\u5373\u5145\u503c",onOk:()=>{t()},onCancel:()=>{},width:415});function LJ(){var e=sf(),t=CJ(),i=t.updateCouponStatus,a=lf(),n=hf(),r=vf(),o=dA(),s=o.downloadInfo,l=0!==(null===s||void 0===s?void 0:s.vip_type),c=r.open,d=()=>{e.open(),a.close()};function u(e){var t=n.buttonType.openMyDownload,i=e.err;"repeated"===i&&n.open({message:"\u5f53\u524d\u89c6\u9891\u5df2\u5728\u4e0b\u8f7d\u5217\u8868!",description:"\u65e0\u9700\u91cd\u590d\u4e0b\u8f7d\uff0c\u53ef\u5728\u6211\u7684\u89c6\u9891\u67e5\u770b\u8fdb\u5ea6",buttonType:t,buttonText:"\u70b9\u51fb\u67e5\u770b",pixelType:n.pixelType})}var p=(0,DI.ZP)(wA,{manual:!0,onSuccess:(t,n)=>{if(1005===t.code){var r,o,d,p;if("memory_limited"===(null===(r=t.data)||void 0===r?void 0:r.err))c();else if("limited"===(null===(o=t.data)||void 0===o?void 0:o.err))l?EJ(!0,(()=>{s.is_upg&&1===s.pkg_count?([301,302,303].indexOf(s.vip_type)>-1?i({tagKey:"10",upgradeMode:!0}):i({tagKey:"20",upgradeMode:!0}),e.open()):window.open("https://xiudodo.com/myspace/vip")})):e.open(),qm({vip_type:s.vip_type,pixel_type:n[0].pixel_type,limited_type:"mp4"===n[0].exportType?"dlNum":"gifDl"});else if("displayNC"===(null===(d=t.data)||void 0===d?void 0:d.err)){var v,m;null===(v=n[0])||void 0===v||v.callback(null===(m=t.data)||void 0===m?void 0:m.err)}else"contentBlock"===(null===(p=t.data)||void 0===p?void 0:p.err)?xp.default.error("\u7cfb\u7edf\u68c0\u6d4b\u5f53\u524d\u5b58\u5728\u8fdd\u89c4\u5acc\u7591\xa0 \u65e0\u6cd5\u5408\u6210"):u(t.data)}else{var h,f,g=null!==(h=n[0])&&void 0!==h&&h.platform?"https://xiudodo.com/myspace/videos?platform=".concat(null===(f=n[0])||void 0===f?void 0:f.platform):"https://xiudodo.com/myspace/videos";Sh.close(),window.open(g,"_self"),a.close()}}}),v=(e,t,i,a,n)=>{var r=(0,_p.Z)(),o=r.upicId;p.run({id:o,format:e,pixel_type:t,platform:i,data:a,callback:n})};return{startDownLoad:v,openRechargeModal:d,loading:p.loading}}function DJ(){var e=dA(),t=e.downloadInfo,i=hf(),a=i.pixelType,n=i.setPixelType,o=i.exportType,s=i.setExportType,l=hf(),c=sf(),d=CJ(),p=d.updateCouponStatus,v=lf(),m=(0,r.useMemo)((()=>{var e=MJ(t,!1),i=e.dln_value,n=void 0===i?0:i,r=e.vip_type,o=void 0===r?0:r,s=e.vip_value,c=void 0===s?0:s,d=e.today_dln_value,u=e.today_vip_dln_value,p=void 0===u?0:u,v=0!==o,m=o,h="480P"===a?n:c,f=-1;return-1===n&&(h="\u6d77\u91cf"),v?0===d||0===c&&"480P"!==a?f=l.buttonType.openVipRecharge:1===c&&(f=l.buttonType.download):0!==d&&"480P"===a||(f=l.buttonType.openVipRecharge),{remainingTimes:h,vipType:m,downloadType:f,isVip:v,today_dln_value:d,today_vip_dln_value:p}}),[t,a]),h=m.remainingTimes,f=m.downloadType,g=m.vipType,x=m.isVip,y=()=>{var e=l.buttonType,i=e.openVipRecharge,n=e.download,r=e.openVipUpgrade;switch(f){case-1:v.open();break;case i:x?EJ(!0,(()=>{t.is_upg&&1===t.pkg_count?([301,302,303].indexOf(t.vip_type)>-1?p({tagKey:"10",upgradeMode:!0}):p({tagKey:"20",upgradeMode:!0}),c.open()):window.open("https://xiudodo.com/myspace/vip")})):c.open(),qm({vip_type:t.vip_type,pixel_type:a,limited_type:"mp4"===o?"dlNum":"gifDl"});break;case n:l.open({message:"\u5f53\u524d\u5269\u4f59\u4e0b\u8f7d\u6b21\u6570\uff1a",description:"\u786e\u5b9a\u4e0b\u8f7d\u5417\uff1f",buttonType:f,buttonText:"\u786e\u5b9a\u4e0b\u8f7d",pixelType:a,remainingTimes:h});break;case r:l.open({message:"\u5f53\u524d\u4e0b\u8f7d\u6743\u76ca\u5df2\u7528\u5b8c\uff01",description:"\u53ef\u8865\u5dee\u4ef7\u5347\u7ea7\u6743\u76ca\u7ee7\u7eed\u4e0b\u8f7d\u89c6\u9891",buttonType:r,buttonText:"\u5347\u7ea7VIP",pixelType:"480px"}),qm({vip_type:g,pixel_type:a,limited_type:"mp4"===o?"dlNum":"gifDl"});break;default:}};return(0,u.Z)({pixelType:a,setPixelType:n,exportType:o,setExportType:s,beforeDownLoad:y,getDownloadInfo:jA},m)}function RJ(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"openDownloadModal",t=arguments.length>1?arguments[1]:void 0,i=NJ(),a=i.checkLoginStatus,n=dA(),r=n.update,o=hf(),s=o.setPixelType,l=o.exportType,c=sf(),d=lf(),u=CJ(),p=u.updateCouponStatus,v=vf(),m=pf(),h=v.open,f=(0,DI.ZP)(jA,{manual:!0,onSuccess:i=>{var a=i.vip_type,n=i.is_upg,o=i.pkg_count;if(r(i),-1!==i.max_dln_value&&i.max_dln_value<=i.total_dln_value)h();else{if(null!==i&&void 0!==i&&i.team_id&&0!=(null===i||void 0===i?void 0:i.team_id)&&"set"===i.limited_unit)return m.open("set",null===i||void 0===i?void 0:i.team_id),void Ym({team_id:null===i||void 0===i?void 0:i.team_id,action_type:"dlSetPopup"});if(null!==i&&void 0!==i&&i.team_id&&0!=(null===i||void 0===i?void 0:i.team_id)&&"memberLess"===i.limited_unit)return m.open("memberLess",null===i||void 0===i?void 0:i.team_id),void Ym({team_id:null===i||void 0===i?void 0:i.team_id,action_type:"memberLessPopup"});if(0!==i.vip_type&&(i.vip_value>0||-1===i.dln_value)?s("1080P"):s("480P"),"openDownloadModal"===e){if(!i.today_dln_value)return 0===a?c.open():EJ(!0,(()=>{n&&1===o?([301,302,303].indexOf(a)>-1?p({tagKey:"10",upgradeMode:!0}):p({tagKey:"20",upgradeMode:!0}),c.open()):window.open("https://xiudodo.com/myspace/vip")})),void qm({vip_type:i.vip_type,limited_type:"mp4"===l?"dlNum":"gifDl"});d.open()}t&&t(i.today_dln_value)}},onError:e=>{console.log(e)}}),g=f.run;function x(){if(!a()){if("openDownloadModal"===e)return void $A({onSuccess:g});g()}}return{open:x,run:g}}var zJ=()=>{var e=Ub(),t=e.currentTime,i=e.setCurrentTime,a=Yb(),r=a.isPlaying,o=a.pauseVideo,s=a.playVideo,l=Mw(),c=(0,n.Z)(l,1),d=c[0];return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"preview-video-process",children:(0,Kg.jsx)(TP.Z,{value:t/d*100,style:{width:"100%"},onChange:e=>{o(),i(Math.floor(d*(e/100))),r&&setTimeout((()=>{s()}),0)},tooltipVisible:!1})}),(0,Kg.jsxs)("div",{className:"preview-video-process-time",children:[Th(parseInt("".concat(t/1e3),10)),"/",Th(parseInt("".concat(d/1e3),10))]})]})},FJ=(0,hp.Pi)(zJ),OJ=()=>{var e=Yb(),t=e.isPlaying,i=e.playVideo,a=e.pauseVideo,n=of(),o=n.value,s=n.close,l=Qb(),c=l.loadComplete,d=RJ("openDownloadModal",(()=>{s()})),u=d.open;return(0,r.useEffect)((()=>{o&&(i(),Lm.set({actionType:"previewVideo"}))}),[o,c]),(0,Kg.jsxs)(nA.Z,{visible:o,title:"\u9884\u89c8\u89c6\u9891",width:1e3,footer:!1,destroyOnClose:!0,onCancel:s,bodyStyle:{padding:"0 0 32px 0 "},centered:!0,getContainer:document.getElementById("xiudodo"),maskClosable:!1,children:[(0,Kg.jsx)(EP,{className:"preview-video-height"}),(0,Kg.jsxs)("div",{className:"preview-play-wrap",children:[(0,Kg.jsx)(iP,{className:"preview-play-btn",type:t?"iconzanting":"iconbofang",onClick:t?a:i}),(0,Kg.jsx)(FJ,{})]}),(0,Kg.jsxs)("div",{className:"preview-action-btn",children:[(0,Kg.jsx)(CS.Z,{onClick:s,children:"\u7ee7\u7eed\u7f16\u8f91"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:()=>{Om(),s(),u()},children:"\u786e\u8ba4\u5e76\u4e0b\u8f7d"})]})]})},BJ=(0,hp.Pi)(OJ),WJ=i(68855),VJ=i(20824),UJ=i.n(VJ);function GJ(e){var t=e.onCancel,i=e.goHome;return nA.Z.warning({okText:"",icon:null,className:"violationModal",content:(0,Kg.jsxs)("div",{className:UJ().violationModalContent,children:[(0,Kg.jsxs)("div",{className:UJ().violationModalContentTitle,children:[(0,Kg.jsx)(WJ.Z,{className:UJ().violationModalContentIcon}),"\u7cfb\u7edf\u68c0\u6d4b\u5230\u60a8\u4e0a\u4f20\u7684",i?"\u89c6\u9891":"\u56fe\u7247","\u53ef\u80fd\u6d89\u53ca\u8fdd\u89c4\uff0c\u73b0\u5df2\u81ea\u52a8\u5220\u9664!"]}),(0,Kg.jsx)("img",{className:UJ().lianxikefuErweima,src:"//js.xiudodo.com/xiudodo/image/qrcode/contact_service.png",alt:""}),(0,Kg.jsx)("div",{className:UJ().violationModalContentFooter,children:"\u5982\u6709\u8bef\u5224\uff0c\u8bf7\u626b\u7801\u8054\u7cfb\u4eba\u5de5\u5ba2\u670d\u6062\u590d\uff01"}),i&&(0,Kg.jsx)("div",{className:UJ().violationModalContentFooterButton,onClick:i,children:"\u8fd4\u56de\u9996\u9875 \u91cd\u65b0\u4e0a\u4f20"})]}),closable:!i,centered:!0,width:559,onCancel(){t&&t()}})}var XJ=e=>{var t=e.topNode,i=e.bottomNode,a=e.className;return(0,Kg.jsxs)("div",{className:"pub-modal-content ".concat(a),children:[(0,Kg.jsx)("div",{className:"pmc-top",children:t}),(0,Kg.jsx)("div",{className:"pmc-bottom",children:i})]})},qJ=XJ,HJ=i(4933),YJ=i.n(HJ),KJ=e=>{var t=e.title,i=e.children,a=e.onCancel,n=e.className,r=(0,yp.Z)(e,["title","children","onCancel","className"]);return(0,Kg.jsx)(nA.Z,(0,u.Z)((0,u.Z)({title:t||null,destroyOnClose:!0,className:"".concat(YJ()["no-title-modal"]," ").concat(n),maskClosable:!1,onCancel:a,getContainer:document.getElementById("xiudodo")},r),{},{children:i}))},QJ=KJ;function JJ(e){var t=e.jobId,i=e.type,a=(0,dx.Z)({percent:0,downloadUrl:""}),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=s.percent,d=s.downloadUrl,u=ff(),p=(0,DI.ZP)(xJ,{manual:!0,pollingInterval:2e3,onSuccess:e=>{if(c<90){var t=Math.floor(3*Math.random())||1,a=c<50?t+2:t;l({percent:c+a})}"fail"===e.data.step&&v(),"success"===e.data.step&&(p.cancel(),"watermark"===i?kJ(e.data.id).then((e=>{var t,i;-9==e.stat&&xp.default.error("\u5f53\u524d\u8d44\u6e90\u5df2\u8fc7\u671f\uff0c\u8bf7\u91cd\u65b0\u5408\u6210"),3!==(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.video_scan_flag)?3!==(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.img_scan_flag)?l({percent:100,downloadUrl:e.data.url}):GJ({onCancel:()=>{u.close()}}):GJ({goHome:()=>{window.open("https://xiudodo.com/watermark/")}})})):l({percent:100,downloadUrl:e.data.url}))}});function v(){p.cancel(),u.close()}function m(){window.open(d),u.close()}(0,r.useEffect)((()=>{t&&p.run(t)}),[t]);var h=d&&100===c;return(0,Kg.jsx)("div",{className:"video-download-Progress",style:{width:"100%"},children:(0,Kg.jsx)(qJ,{topNode:(0,Kg.jsx)("div",{className:"vd-progress-title"}),bottomNode:(0,Kg.jsx)("div",{className:"vd-progress-content",children:h?(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("h3",{className:"vd-progress-content-title",children:"\u89c6\u9891\u5408\u6210\u6210\u529f\uff01"}),(0,Kg.jsx)("div",{className:"vd-progress-content-content",children:(0,Kg.jsx)(iP,{type:"iconduihao"})}),(0,Kg.jsx)(CS.Z,{type:"primary",className:"vd-progress-content-footer",onClick:m,children:"\u4e0b\u8f7d\u89c6\u9891"})]}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("h3",{className:"vd-progress-item-title",children:"\u89c6\u9891\u6b63\u5728\u5408\u6210\u4e2d\u2026"}),(0,Kg.jsx)("div",{className:"vd-progress-item",children:(0,Kg.jsx)(tM.Z,{strokeColor:{"0%":"#5200FF","100%":"#B100FF"},type:"circle",percent:c,width:125,status:"active"})}),(0,Kg.jsx)("p",{className:"vd-progress-item-footer",children:"\u8bf7\u8010\u5fc3\u7b49\u5f85\uff0c\u89c6\u9891\u5408\u6210\u5b8c\u5373\u53ef\u4e0b\u8f7d\uff5e"})]})})})})}var $J=e=>{var t=e.type,i=ff();return(0,Kg.jsx)(QJ,{title:null,style:{top:"25%"},visible:i.value,onCancel:i.close,wrapClassName:"vd-progress-modal",width:554,closable:!1,keyboard:!1,footer:!1,maskClosable:!1,children:(0,Kg.jsx)(JJ,{jobId:i.jobId,type:t})})},e$=(0,r.memo)($J),t$=i(84387),i$=i(16208),a$=i(27811),n$=i.n(a$),r$=e=>{var t=e.loading,i=e.refreshQrcode,a=e.price,n=e.showQrcode,r=e.isLate,o=e.className,s=e.payloadCode,l=e.qRCodeSize,c=void 0===l?144:l,d=e.payQRCodeStyle,u=void 0===d?null:d,p=e.desc,v=e.payQRCodeFontStyle,m=e.priceDesc,h={width:c,height:c},f=(0,Kg.jsx)(uN.Z,{type:"loading",style:{fontSize:24},spin:!0});return(0,Kg.jsxs)("div",{className:n$()["payment-entry"],style:u,children:[(0,Kg.jsx)(dN.Z,{indicator:f,spinning:t,children:(0,Kg.jsx)("div",{onClick:i,className:o,children:r?(0,Kg.jsxs)("div",{className:n$().classNameQRCodeWarp,style:h,children:[(0,Kg.jsxs)("div",{className:n$().classNameWarp,children:[(0,Kg.jsx)("div",{className:n$().classNameTxt,children:"\u4e8c\u7ef4\u7801\u5df2\u5931\u6548"}),(0,Kg.jsx)("div",{className:n$().classNameBtn,children:"\u8bf7\u70b9\u51fb\u5237\u65b0"})]}),(0,Kg.jsx)(i$.ZP,{value:s,className:n$().classNameQRCode,size:c})]}):(0,Kg.jsx)("div",{className:n$().classNameQRCodeWarp,style:h,children:n&&(0,Kg.jsx)(i$.ZP,{value:s,size:c})})})}),(0,Kg.jsxs)("div",{className:n$()["qrcode-des"],style:null===v||void 0===v?void 0:v.marginLeft,children:[(0,Kg.jsx)("span",{className:n$()["vip-settlement-price"],style:null===v||void 0===v?void 0:v.title,children:"\u5e94\u4ed8\u91d1\u989d\uff1a"}),(0,Kg.jsxs)("span",{className:n$()["strong-tip"],children:[(0,Kg.jsx)("span",{className:n$()["need-to-pay-span"],style:null===v||void 0===v?void 0:v.unit,children:"\xa5"}),(0,Kg.jsx)("span",{className:n$()["need-to-pay"],style:null===v||void 0===v?void 0:v.price,children:a}),(null===v||void 0===v?void 0:v.o_price)&&(0,Kg.jsx)("span",{style:null===v||void 0===v?void 0:v.o_price,children:"\u539f\u4ef7: \xa5799"})]}),m,p||(0,Kg.jsxs)("p",{className:n$()["qrcode-des-payment"],children:[(0,Kg.jsx)(iP,{type:"iconzu95",style:(null===v||void 0===v?void 0:v.iconSize)||{fontSize:"16px",marginRight:"5px"}}),(0,Kg.jsx)(iP,{type:"iconweixinzhifu",style:(null===v||void 0===v?void 0:v.iconSize)||{fontSize:"16px",marginRight:"5px"}}),(0,Kg.jsx)("span",{style:null===v||void 0===v?void 0:v.text,children:"\u4f7f\u7528\u652f\u4ed8\u5b9d/\u5fae\u4fe1\u626b\u7801\u652f\u4ed8"})]})]})]})},o$=r$,s$=i(24613),l$=(0,Kg.jsx)(uN.Z,{type:"loading",style:{fontSize:24},spin:!0});function c$(){var e=CJ(),t=e.couponStatus,i=(e.updateCouponStatus,t.tagKey),a=t.upgradeMode,o=t.upgradePkgId,s=i.slice(0,1),l=i&&i.slice(1,2)||"0",c=(0,r.useState)(!1),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=(0,r.useState)(0),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=(0,r.useState)({paySkus:null,active:l,payloadCode:"",amount:"",prams:null,needBeUpgradePkgInfo:{}}),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=b.paySkus,w=b.active,k=b.payloadCode,T=b.amount,Z=b.prams,C=(e,t)=>{switch(e){case"1":return t.personalSkus;case"2":return t.skus;case"3":return t.enterpriseSkus}},N=(0,DI.ZP)(a?yA:xA,{manual:!0,cacheKey:a?void 0:"pay-skus",onSuccess:e=>{var t=C(s,e);_((i=>(0,u.Z)((0,u.Z)({},i),{},{active:l,paySkus:t,needBeUpgradePkgInfo:e.current_vip_info||{}})))}}),S=sf(),I=gf(),A=()=>{I.open(),S.close()},P=(0,DI.ZP)(bA,{manual:!0,pollingInterval:1e3,onSuccess:e=>{var t=(new Date).getTime();1===e.is_pay&&(A(),P.cancel()),t-f>6e5&&(P.cancel(),g(0),v(!0))}}),M=(0,DI.ZP)(_A,{manual:!0,onSuccess:e=>{var t=e.payload_code,i=e.order;_((e=>(0,u.Z)((0,u.Z)({},e),{},{amount:null===i||void 0===i?void 0:i.amount,payloadCode:t})));var a=(new Date).getTime();v(!1),g(a),P.run(i.order_no)}}),E=(0,r.useMemo)((()=>{var e,t,i=(null===(e=window)||void 0===e?void 0:e.xa)||{},a="";if(null!==i&&void 0!==i&&i.srm){var n,r,o,s,l;a=null===(n=i.srm)||void 0===n||null===(r=n.get)||void 0===r?void 0:r.call(n),t=null===(o=i.srm)||void 0===o||null===(s=o.getActiveSrm)||void 0===s?void 0:s.call(o);var c=null===(l=String(Bw().template.templateId))||void 0===l?void 0:l.split(".")[0];t=t.split("."),t[3]="t".concat(c),t=t.join(".")}return{source_srm:a,focus_srm:t}}),[]),L=(0,s$.Z)((()=>{a?N.run(o):N.run()}));function D(e,t){if(_((i=>(0,u.Z)((0,u.Z)({},i),{},{active:e,prams:t}))),j&&j[e]){var i,n,r={rch_type:a?"upg":void 0,pkg_id:o};if(t)M.run(null===(i=j[e])||void 0===i?void 0:i.code,E,(0,u.Z)((0,u.Z)({},t),r));else M.run(null===(n=j[e])||void 0===n?void 0:n.code,E,r)}}var R=()=>{Z?D(w,Z):D(w)},z=j?j[w]:null,F=""!==k,O=hb()({"qrcode-show":!0,"show-qrcode-loading":!F});return{active:w,paySkus:j,payloadCode:k,amount:T,interests:z,qrcodeCls:O,showQrcode:F,isLate:p,selectPackage:D,refreshQrcode:R,updatePaySkus:L,fetchPaySkusLoading:N.loading,fetchCreatePayLoading:M.loading,startCheckOrder:P,needBeUpgradePkgInfo:b.needBeUpgradePkgInfo}}var d$=i(35983),u$=i.n(d$),p$=e=>{var t=e.active,i=e.tagType,a=e.interests,n=a||{},r=n.gift_pkg,o=n.includes,s=r||{},l=s.cp,c=s.vm,d=s.aia,u=s.kt,p=o||{},v=p.draft,m=p.disk,h=()=>{switch("".concat(i).concat(t)){case"30":return 3;default:return 3}},f=e=>{var t,i=(null===e||void 0===e?void 0:e.limited)&&(null===e||void 0===e?void 0:e.limited[0]);return 0===(null===e||void 0===e||null===(t=e.limited)||void 0===t?void 0:t.length)&&-1===(null===e||void 0===e?void 0:e.value)?" \u65e0\u9650\u4f7f\u7528":" ".concat((null===i||void 0===i?void 0:i.num)||0,"\u6b21").concat(null!==i&&void 0!==i&&i.unit&&"month"===(null===i||void 0===i?void 0:i.unit)?"/\u6708":"/\u5e74")},g={1:"\u4e2a\u4eba\u4e0b\u8f7d\u5e74VIP\u6743\u76ca",2:"\u4e2a\u4eba\u5546\u7528\u5e74VIP\u6743\u76ca",3:"\u4f01\u4e1a\u5546\u7528\u7248"};return(0,Kg.jsxs)("div",{className:u$()["vip-interest"],children:[(0,Kg.jsx)("h6",{children:g[i]}),(0,Kg.jsx)("div",{className:u$()["vip-interest-line"]}),(0,Kg.jsxs)("ul",{className:u$()["current-vip-interest"],children:[(0,Kg.jsx)("li",{className:u$()["current-vip-interest-title"],children:"\u529f\u80fd+\u5185\u5bb9\u6743\u76ca"}),(0,Kg.jsxs)("li",{children:["\u7ad9\u5185\u89c6\u9891\u7d20\u6750+\u89c6\u9891\u6a21\u7248",(0,Kg.jsx)("span",{children:"1"===i?"\u7545\u7528":"2"===i?"\u53ef\u5546\u7528":"\u4f01\u4e1a\u5546\u7528"})]}),(0,Kg.jsxs)("li",{children:["\u89c6\u9891\u5408\u6210\u5bfc\u51fa\u65f6\u957f ",(0,Kg.jsxs)("span",{children:[h(),"\u5206\u949f"]})]}),(0,Kg.jsxs)("li",{children:["\u4f5c\u54c1\u5b58\u50a8\u6570\u91cf ",(0,Kg.jsx)("span",{children:-1===v?"\u65e0\u9650\u5236":v})]}),(0,Kg.jsx)("li",{children:"\u7f16\u8f91\u5668\u6a21\u7248\u9ad8\u6e05\u65e0\u6c34\u5370\u5bfc\u51fa"}),(0,Kg.jsxs)("li",{hidden:"3"!==i,children:["\u89c6\u9891\u7d20\u6750\u4e0b\u8f7d ",(0,Kg.jsx)("span",{children:"4k/8k\u7279\u6743"})]}),(0,Kg.jsxs)("li",{children:["\u4f1a\u5458\u4e13\u5c5e\u7d20\u6750",(0,Kg.jsx)("span",{children:"1"===i?"\u65e0\u6c34\u5370\u5bfc\u51fa":"2"===i?"\u53ef\u5546\u7528":"\u4f01\u4e1a\u5546\u7528"})]}),(0,Kg.jsx)("li",{children:"\u4e13\u5c5e\u5ba2\u670d/\u6b63\u89c4\u53d1\u7968"}),(0,Kg.jsx)("li",{hidden:"3"!==i,children:"\u53ef\u63d0\u4f9b\u6388\u6743\u8bc1\u4e66"}),(0,Kg.jsx)("li",{className:u$()["current-vip-interest-title"],children:"\u5de5\u5177\u6743\u76ca"}),(0,Kg.jsxs)("li",{children:["AI\u8bed\u97f3\u5c0f\u5de5\u5177",(0,Kg.jsx)("span",{children:f(d)})]}),(0,Kg.jsxs)("li",{children:["\u62a0\u56fe\u5de5\u5177\u5957\u9910",(0,Kg.jsx)("span",{children:f(u)})]}),(0,Kg.jsxs)("li",{children:["\u89c6\u9891\u538b\u7f29\u5de5\u5177",(0,Kg.jsx)("span",{children:f(l)})]}),(0,Kg.jsxs)("li",{children:["\u89c6\u9891\u6c34\u5370\u5de5\u5177",(0,Kg.jsx)("span",{children:f(c)})]}),(0,Kg.jsxs)("li",{children:["\u4e91\u7aef\u5b58\u50a8\u7a7a\u95f4 ",(0,Kg.jsx)("span",{children:m})]}),(0,Kg.jsx)("li",{children:"\u89c6\u9891\u526a\u8f91\u5de5\u5177\u7545\u7528 "})]})]})},v$=p$,m$=i(64001),h$=e=>{var t=new Date,i=1e3*e-t.getTime(),a="".concat(i),n=Math.floor(i/1e3/60%60),r=Math.floor(i/1e3%60),o=a.substring(a.length-3,a.length-1);if(i>0){var s=kh(n),l=kh(r);return"".concat(s,":").concat(l,":").concat(o)}return"00:00:00"};function f$(e){var t=(0,r.useState)("00:00:00"),i=(0,n.Z)(t,2),a=i[0],o=i[1];return(0,m$.Z)((()=>{var t=h$(e);o(t)}),100),a}var g$=i(14155),x$=i.n(g$),y$=e=>{var t=(0,r.useState)(0),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=e.packageChange,l=e.index,c=e.packages,d=e.active,u=(e.tagType,c||{}),p=u.describe,v=u.price,m=u.expire,h=()=>{s(l)};(0,r.useEffect)((()=>{if(c.is_countdown){var e=new Date,t=c.is_countdown&&c.coupons&&c.coupons[0]&&c.coupons[0].expire_time,i=t||e.getTime()/1e3+3600;o(i)}}),[c]);f$(a);return(0,Kg.jsxs)("li",{onClick:h,className:hb()({[x$().active]:d,[x$().vipPackagesLi]:!0}),children:[(0,Kg.jsxs)("div",{className:x$().price,children:[(0,Kg.jsx)("span",{children:"\uffe5"}),(0,Kg.jsx)("span",{children:v}),(0,Kg.jsxs)("span",{children:["/","-1"===m?"\u7ec8\u8eab":"\u5e74"]})]}),(0,Kg.jsx)("div",{className:x$().o_price,children:p}),(0,Kg.jsx)("p",{className:x$().count,dangerouslySetInnerHTML:{__html:c.label_html}}),(0,Kg.jsx)("div",{className:x$().explain,children:"\u7f16\u8f91\u5668\u5bfc\u51fa+\u7d20\u6750\u4e0b\u8f7d"}),["40009","40008"].includes(null===c||void 0===c?void 0:c.code)&&(0,Kg.jsx)("div",{className:x$().postscript,children:"\u53cc\u5341\u4e00\u62a2\u8d2d"})]})},b$=(0,r.memo)(y$),_$=i(97496),j$=i.n(_$),w$=i(38819),k$=i(83343),T$=i.n(k$);function Z$(e){var t=e.expire_time,i=f$(t);return(0,Kg.jsx)("span",{children:i})}var C$=Z$;function N$(e){var t=e.data,i=e.callback,a=e.time,o=(0,r.useState)(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=e=>{e===l?(c(""),i("")):(c(e),i(e))};return(0,r.useEffect)((()=>{if((null===t||void 0===t?void 0:t.length)>0){var e,i=null===(e=t[0])||void 0===e?void 0:e.cid;c(i)}else c("")}),[t]),(0,Kg.jsx)(Kg.Fragment,{children:(null===t||void 0===t?void 0:t.length)>0&&(0,Kg.jsx)("div",{className:T$().couponWarp,children:null===t||void 0===t?void 0:t.map((e=>(0,Kg.jsx)("div",{className:T$().coupon,children:(0,Kg.jsx)("div",{className:T$().couponContentWarp,children:(0,Kg.jsxs)("div",{className:T$().couponContent,children:[(0,Kg.jsx)(w$.Z,{onClick:()=>{d(e.cid)},className:T$().couponRadio,style:l===e.cid?{color:"#8460ff"}:{color:"#ffffff"}}),(0,Kg.jsxs)("div",{className:T$().couponCard,style:{background:"url(".concat((0,fb.Sx)("/image/VIP/coupon2.png"),")")},children:[(0,Kg.jsxs)("div",{className:T$().cardLeft,children:[(0,Kg.jsx)("div",{className:T$().cardLeftLeft,children:"\xa5"}),(0,Kg.jsx)("div",{className:T$().cardLeftRight,children:e.cash})]}),(0,Kg.jsxs)("div",{className:T$().cardRight,children:[(0,Kg.jsx)("div",{className:T$().cardRightTop,children:e.title}),(0,Kg.jsxs)("div",{className:T$().cardRightBottom,children:["\u5012\u8ba1\u65f6\uff1a",(0,Kg.jsx)(C$,{expire_time:a})]})]})]})]})})},e.id)))})})}var S$=N$;function I$(){var e,t,i,a,o=oA(),s=o.username,l=o.avatar,c=o.id,d=(0,r.useState)(0),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=CJ(),h=m.couponStatus,f=m.updateCouponStatus,g=h.tagKey,x=h.limitType,y=h.upgradeMode,b=g&&g.slice(0,1),_=c$(),j=_.active,w=_.paySkus,k=_.showQrcode,T=_.amount,Z=_.isLate,C=_.interests,N=_.qrcodeCls,S=_.selectPackage,I=_.refreshQrcode,A=_.updatePaySkus,P=_.payloadCode,M=_.fetchPaySkusLoading,E=_.fetchCreatePayLoading,L=_.needBeUpgradePkgInfo,D=e=>{switch(e){case"1":return"250px";case"2":return"294px";case"3":return"275px";default:return"100%"}},R=e=>{var t,i=w&&(null===(t=w[e])||void 0===t?void 0:t.coupons);if((null===i||void 0===i?void 0:i.length)>0){var a,n=null===(a=i[0])||void 0===a?void 0:a.cid;S(e,{cid:n})}else S(e)};(0,r.useEffect)((()=>{w&&(null===w||void 0===w?void 0:w.length)>0&&R(j)}),[w]);var z=e=>{switch(e){case"3":return[{name:"\u4f01\u4e1a\u5546\u7528\u7248",key:"3",tagKey:"30",tooltipTitle:"\u4ee5\u4f01\u4e1a\u8eab\u4efd\uff08\u5de5\u5546\u767b\u8bb0\u6ce8\u518c\u7684\u7ecf\u8425\u4e3b\u4f53\uff09\u4ece\u4e8b",tooltipContent:"\u7684\u5546\u4e1a\u76c8\u5229\u884c\u4e3a\uff0c\u76c8\u5229\u4e3b\u4f53\u4e3a\u4f01\u4e1a\u3002"}];default:var t=[{name:"\u4e2a\u4eba\u4e0b\u8f7d\u7248",key:"1",tagKey:"10",tooltipTitle:"\u4e0d\u53ef\u4ee5\u5546\u7528",tooltipContent:"\u4ec5\u4f9b\u4e2a\u4eba\u5b66\u4e60\u5206\u4eab\u4f7f\u7528\uff0c\u4e0d\u4ee5\u76c8\u5229\u4e3a\u76ee\u7684"},{name:"\u4e2a\u4eba\u5546\u7528\u7248",key:"2",tagKey:"20",tooltipTitle:"\u4ee5\u81ea\u7136\u4eba\u8eab\u4efd(\u6301\u81ea\u7136\u4eba\u6709\u6548\u8eab\u4efd\u8bc1)\u4ece\u4e8b\u7684\u5546\u4e1a\u76c8",tooltipContent:"\u5229\u884c\u4e3a\u76c8\u5229\u4e3b\u4f53\u4e3a\u4e2a\u4eba"}];return y?[t[+b-1]]:t}};(0,r.useEffect)((()=>{A()}),[g]),(0,r.useEffect)((()=>{zm({limitType:y?"upgrade":x})}),[]);var F=()=>{var e=new Date,t=(new Date).getTime();return e.setTime(t+36e5)/1e3};return(0,r.useEffect)((()=>{v(F())}),[]),(0,Kg.jsx)("div",{className:j$()["recharge-modal"],children:C&&(0,Kg.jsxs)("div",{className:j$()["recharge-modal-inner"],children:[(0,Kg.jsxs)("div",{className:j$()["recharge-modal-Top"],children:[(0,Kg.jsx)("div",{className:j$()["user-avatar"],children:(0,Kg.jsx)("img",{src:l,alt:"\u5934\u50cf",className:j$().portrait})}),(0,Kg.jsxs)("div",{className:j$()["vip-user-info"],children:[(0,Kg.jsxs)("p",{className:j$()["vip-username"],children:["\u5145\u503c\u8d26\u53f7\uff1a",s]}),(0,Kg.jsxs)("p",{className:j$()["vip-id"],children:["ID\uff1a",c]})]}),(0,Kg.jsx)("div",{className:j$()["vip-tab"],children:z(b).map((e=>(0,Kg.jsxs)("div",{className:hb()(j$()["vip-tab1"],{[j$().vipTabActive]:b===e.key}),style:{background:"url(".concat((0,fb.Sx)("/image/VIP/".concat(b===e.key?"tixingActive2":"tixing2png",".png?v3")),")")},onClick:()=>{f({tagKey:e.tagKey})},children:[e.name,(0,Kg.jsx)(xF.Z,{placement:"bottom",overlayInnerStyle:{width:D(e.key),fontSize:"12px",padding:"8px 16px "},title:()=>(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{children:e.tooltipTitle}),(0,Kg.jsx)("div",{children:e.tooltipContent})]}),children:(0,Kg.jsx)(t$.Z,{className:j$().vipTabItemIcon})})]},e.key)))}),(0,Kg.jsxs)("h6",{className:j$()["expire-date"],children:["\u8d2d\u4e70\u540e\u6298\u5408\u5230\u671f\u65f6\u95f4\uff1a",(0,Kg.jsx)("span",{className:j$()["primary-color"],children:"-1"===C.expire?"\u7ec8\u8eab":C.expire})]})]}),(0,Kg.jsxs)("div",{className:j$()["recharge-modal-Bottom"],children:[(0,Kg.jsx)(v$,{active:j,tagType:b,interests:C}),(0,Kg.jsx)(dN.Z,{indicator:l$,spinning:M,children:(0,Kg.jsxs)("div",{className:j$()["vip-shop"],children:[(0,Kg.jsxs)("div",{className:j$()["vip-detail"],children:[(0,Kg.jsx)("h6",{hidden:"3"===b,children:"\u8bf7\u9009\u62e9\u5408\u9002\u7684\u5957\u9910"}),(0,Kg.jsx)("div",{className:j$()["vip-packages-wrapper"],children:(0,Kg.jsx)("ul",{className:j$()["vip-packages"],children:w&&w.map(((e,t)=>(0,Kg.jsx)(b$,{active:t==j,packages:e,index:t,tagType:b,packageChange:R},e.code)))})})]}),w&&(null===(e=w[j])||void 0===e||null===(t=e.coupons)||void 0===t?void 0:t.length)>0&&(0,Kg.jsx)(S$,{data:null===(i=w[j])||void 0===i?void 0:i.coupons,callback:e=>{S(j,{cid:e})},time:p}),(0,Kg.jsx)(o$,{loading:E,showQrcode:k,isLate:Z,payloadCode:P,price:T||(null===C||void 0===C?void 0:C.price),refreshQrcode:I,className:N,priceDesc:y&&w&&(0,Kg.jsxs)("p",{className:j$().upgradePriceDesc,children:["\u5347\u7ea7\u5957\u9910\u4ef7\u683c\uff1a",(0,Kg.jsxs)("i",{children:[null===(a=w[j].price)||void 0===a?void 0:a.toFixed(2),"\u5143"]})," - \u539f\u5957\u9910\u5269\u4f59\u91d1\u989d\uff1a",(0,Kg.jsxs)("i",{children:[(+L.pay_price-L.pay_price/L.total_day*(L.total_day-L.surplus_day)).toFixed(2),"\u5143"]}),(0,Kg.jsxs)("span",{className:j$().icon,children:[(0,Kg.jsx)(iP,{type:"iconwenhao"}),(0,Kg.jsxs)("span",{children:[(0,Kg.jsx)("p",{children:"\u539f\u5957\u9910\u5269\u4f59\u91d1\u989d\u8ba1\u7b97\uff1a"}),(0,Kg.jsxs)("p",{children:[L.pay_price,"\u5143 -\uff08",L.pay_price,"\u5143/",L.total_day,"\u5929\uff09* \u4f1a\u5458\u4f7f\u7528",L.total_day-L.surplus_day,"\u5929"]})]})]})]})}),(0,Kg.jsx)("div",{className:j$()["recharge-modal-footer"],hidden:"3"!==b,children:"\u6e29\u99a8\u63d0\u793a\uff1a\u6210\u529f\u652f\u4ed8\u540e\uff0c\u8054\u7cfb\u5ba2\u670d\u4eab\u53d7\u6781\u901f\u5f00\u901a\u53d1\u7968\u670d\u52a1"})]})})]})]})})}function A$(){var e=sf(),t=CJ(),i=t.updateCouponStatus;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(QJ,{visible:Boolean(e.value),onCancel:()=>{e.close(),i({tagKey:"10",upgradeMode:!1,upgradePkgId:void 0})},footer:!1,centered:!0,wrapClassName:"rechargeModal",width:960,children:(0,Kg.jsx)(I$,{})})})}var P$=(0,r.memo)(A$);function M$(){return(0,Kg.jsxs)("div",{className:"pub-modal-qqPanel",children:[(0,Kg.jsx)("img",{className:"pmq-qqGroup-qrcode",src:(0,fb.gP)("/image/qrcode/wechat-group.png"),alt:"\u5fae\u4fe1\u7fa4"}),(0,Kg.jsxs)("div",{className:"pmq-qqGrout-content",children:[(0,Kg.jsx)("p",{children:"\u5fae\u4fe1\u626b\u7801\u52a0\u5165\u79c0\u591a\u591a\u7528\u6237\u4ea4\uff08tu\uff09\u6d41\uff08cao\uff09\u7fa4"}),(0,Kg.jsx)("p",{children:"\u6709\u95ee\u9898\u7fa4\u91cc\u627e\u5c0f\u79c0\uff01"})]})]})}function E$(){var e=gf(),t=()=>{e.close(),window.location.reload()};return(0,Kg.jsx)(QJ,{visible:Boolean(e.value),onCancel:t,footer:!1,width:554,centered:!0,zIndex:99999999999,children:(0,Kg.jsx)(qJ,{className:j$()["pay-success"],topNode:(0,Kg.jsxs)("div",{className:j$()["pay-successs-title"],children:[(0,Kg.jsx)(iP,{type:"icondui",className:j$().anticon}),(0,Kg.jsx)("p",{children:"\u5145\u503c\u6210\u529f"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:t,className:j$()["ant-btn"],children:"\u786e\u5b9a"})]}),bottomNode:(0,Kg.jsx)(M$,{})})})}var L$=E$,D$=()=>(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(L$,{}),(0,Kg.jsx)(P$,{})]}),R$=D$,z$=i(22395),F$=i.n(z$),O$=i(12202),B$=i.n(O$);function W$(e){var t,i=e.loginCallback,a=e.setBindResult,o=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useState)({weChatLoginQrcodeSrc:"",weChatNumber:"",isInvalid:!1,loginError:"",phoneSendDisabled:!1}),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=(0,tP.Z)({onEnd:()=>{p((e=>(0,u.Z)((0,u.Z)({},e),{},{phoneSendDisabled:!1})))}}),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=d.phoneSendDisabled,x=d.loginError;function y(){xp.default.success("\u7ed1\u5b9a\u6210\u529f\uff01"),i(!0)}var b=(0,DI.ZP)(jJ,{manual:!0,onSuccess:e=>{var t=e.stat,i=e.msg;1===t?(p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"",phoneSendDisabled:!0}))),f(Date.now()+6e4)):p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:i})))}});function _(){if(o.current){var e=o.current.value,t=void 0===e?"":e;""!==t&&/^1[3456789]\d{9}$/.test(t)?(p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:""}))),b.run(t)):p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"})))}}function j(){if(o.current&&s.current){var e=o.current.value,t=s.current.value;""!==e&&/^1[3456789]\d{9}$/.test(e)?""!==t?(p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:""}))),wJ({phoneNum:e,phoneMsgNum:t,confirm_bind:0}).then((n=>{var r,o,s=n.code;n.msg;0===s?(p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:""}))),y()):["alreadyUpFile","alreadyBindOther","noBindOther"].indexOf(null===n||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)>-1?(a((0,u.Z)((0,u.Z)({},null===n||void 0===n?void 0:n.data),{},{phoneNum:e,phoneMsgNum:t})),i(!1)):xp.default.error(null===n||void 0===n||null===(o=n.data)||void 0===o?void 0:o.msg)}))):p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u9a8c\u8bc1\u7801"}))):p((e=>(0,u.Z)((0,u.Z)({},e),{},{loginError:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u624b\u673a\u53f7"})))}}function w(e){13===e.keyCode&&_()}return(0,Kg.jsxs)("div",{className:B$().bindPhone,children:[(0,Kg.jsxs)("div",{className:B$().bindPhoneTop,children:[(0,Kg.jsx)(WJ.Z,{}),(0,Kg.jsx)("span",{children:"\u6e29\u99a8\u63d0\u793a"})]}),(0,Kg.jsxs)("div",{className:B$().bindPhoneTxt,children:["\u6839\u636e\u56fd\u5bb6\u6cd5\u5f8b\u89c4\u5b9a\u4e3a\u4e86\u60a8\u7684\u8d26\u53f7\u5b89\u5168\uff0c",(0,Kg.jsx)("br",{}),"\u8bf7\u60a8\u54cd\u5e94\u56fd\u5bb6\u653f\u7b56\uff0c\u5148\u7ed1\u5b9a\u624b\u673a\u8ba4\u8bc1\u518d\u8fdb\u884c\u64cd\u4f5c!"]}),(0,Kg.jsxs)("div",{className:B$().bindPhoneContent,children:[(0,Kg.jsx)("input",{ref:o,onKeyDown:w,type:"tel",className:B$().bindPhoneContentTopInput,placeholder:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7",onKeyDownCapture:Ph}),(0,Kg.jsx)("div",{className:B$()["tel-login-error"],style:x?{opacity:1}:{},children:x||"\u8bf7\u8f93\u5165\u6b63\u786e\u624b\u673a\u53f7"}),(0,Kg.jsxs)("div",{className:B$().bindPhoneContentBottom,children:[(0,Kg.jsx)("input",{ref:s,type:"tel",className:B$().bindPhoneContentBottomInput,placeholder:"\u77ed\u4fe1\u9a8c\u8bc1\u7801",onKeyDownCapture:Ph}),g?(0,Kg.jsx)("div",{className:g?B$()["submit-disabled"]:"",children:g?"\u91cd\u65b0\u53d1\u9001 (".concat(Math.round(h/1e3),")"):"\u53d1\u9001\u9a8c\u8bc1\u7801"}):(0,Kg.jsx)("div",{className:B$()["send-code-btn"],onClick:_,children:"\u53d1\u9001\u9a8c\u8bc1\u7801"})]}),(0,Kg.jsx)("div",{className:hb()(B$()["tel-login-submit"],{[B$()["tel-login-submit-active"]]:null===(t=s.current)||void 0===t?void 0:t.value}),onClick:j,children:"\u7acb\u5373\u7ed1\u5b9a"})]})]})}var V$=(0,r.memo)(W$),U$=i(86226),G$=i.n(U$);function X$(e){var t=e.bindResult,i=e.setBindResult,a=e.bindChange,o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=()=>{a({phoneNum:null===t||void 0===t?void 0:t.phoneNum,phoneMsgNum:null===t||void 0===t?void 0:t.phoneMsgNum})},u=e=>{switch(null===e||void 0===e?void 0:e.message){case"alreadyBindOther":return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:G$().bindResultWarpContent,children:["\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7",null===e||void 0===e?void 0:e.tel," \u5df2\u7ecf\u7ed1\u5b9a\u5230\u8d26\u53f7",(0,Kg.jsx)("br",{}),'"',null===e||void 0===e?void 0:e.originalUid,'"',(0,Kg.jsx)("br",{}),(0,Kg.jsx)("br",{}),"\u4f60\u53ef\u4ee5\u9009\u62e9\u5c06\u8be5\u624b\u673a\u53f7\u4ece\u8be5\u8d26\u53f7\u4e2d\u89e3\u7ed1,\u5e76\u7ed1\u5b9a\u4e4b",(0,Kg.jsx)("br",{}),"\u5f53\u524d\u8d26\u53f7\u201c",null===e||void 0===e?void 0:e.uid,"\u201d"]}),(0,Kg.jsxs)("div",{className:G$().bindResultWarpFooter,children:[(0,Kg.jsx)("div",{className:G$().leftButton,onClick:d,children:"\u786e\u8ba4\u7ed1\u5b9a"}),(0,Kg.jsx)("div",{className:G$().rightButton,onClick:()=>{i(null)},children:"\u6682\u4e0d\u7ed1\u5b9a"})]})]});case"alreadyUpFile":return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:G$().bindResultWarpContent,children:["\u60a8\u8f93\u5165\u7684\u624b\u673a\u53f7",null===e||void 0===e?void 0:e.tel," \u5df2\u7ecf\u7ed1\u5b9a\u5230\u8d26\u53f7",(0,Kg.jsx)("br",{}),"\u201c",null===e||void 0===e?void 0:e.originalUid,"\u201d",(0,Kg.jsx)("br",{}),(0,Kg.jsx)("br",{}),"\u5e76\u4e14\u5df2\u6709\u4e0a\u4f20\u6587\u4ef6\u8bb0\u5f55,\u65e0\u6cd5\u76f4\u63a5\u89e3\u9664\u7ed1\u5b9a,\u4f60\u53ef",(0,Kg.jsx)("br",{}),"\u7528\u8be5\u624b\u673a\u53f7\u767b\u5f55\u540e,\u5728\u8d26\u53f7\u8bbe\u7f6e\u4e2d\u66f4\u6362\u624b\u673a\u53f7\u540e,",(0,Kg.jsx)("br",{}),"\u91cd\u65b0\u7ed1\u5b9a."]}),(0,Kg.jsx)("div",{className:G$().bindResultWarpButton,onClick:()=>{i(null)},children:"\u77e5\u9053\u4e86"})]});case"noBindOther":return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:G$().bindResultWarpContent,children:[null===e||void 0===e?void 0:e.tel," \u7528\u6237\u53ea\u6709\u5f53\u524d\u767b\u5f55\u65b9\u5f0f,\u7ed1\u5b9a\u540e",(0,Kg.jsx)("br",{}),"\u539f\u8d26\u53f7\u5c06\u65e0\u6cd5\u767b\u5f55,\u5e76\u4e14\u76f8\u5173\u6743\u76ca\u5c06\u4f1a\u6ce8\u9500",(0,Kg.jsx)("br",{}),"\u9700\u8c28\u614e\u64cd\u4f5c"]}),(0,Kg.jsxs)("div",{className:G$().bindResultWarpFooter,children:[(0,Kg.jsx)("div",{className:G$().leftButton,onClick:d,children:"\u786e\u8ba4\u7ed1\u5b9a"}),(0,Kg.jsx)("div",{className:G$().rightButton,onClick:()=>{i(null)},children:"\u6682\u4e0d\u7ed1\u5b9a"})]})]});default:break}};return(0,r.useEffect)((()=>{c(!!t)}),[t]),(0,Kg.jsx)(QJ,{visible:l,width:385,centered:!0,onCancel:()=>{i(null)},footer:null,wrapClassName:"bindResultModal",children:(0,Kg.jsxs)("div",{className:G$().bindResultWarp,children:[(0,Kg.jsx)("div",{className:G$().bindResultWarpTitle,children:"\u7ed1\u5b9a\u5931\u8d25"}),u(t)]})})}var q$=X$;function H$(e){var t=e.phoneBindingShow,i=e.setPhoneBindingShow,a=e.loginCallback,o=Yf(),s=o.bindPhoneModal,l=o.closeBindPhoneModal,c=rA(),d=(0,r.useState)(null),u=(0,n.Z)(d,2),p=u[0],v=u[1];function m(e){i&&i(e),l()}var h=(0,DI.ZP)(aP,{manual:!0,onSuccess:e=>{c(e)},onError:e=>{console.log(e)}});function f(e){e?(a&&a(),h.run(),m(!1)):m(!1)}var g=()=>{wJ({phoneNum:null===p||void 0===p?void 0:p.phoneNum,phoneMsgNum:null===p||void 0===p?void 0:p.phoneMsgNum,confirm_bind:1}).then((e=>{0===(null===e||void 0===e?void 0:e.code)&&(f(!0),v(null),xp.default.success("\u7ed1\u5b9a\u6210\u529f"))}))};return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(nA.Z,{footer:null,destroyOnClose:!0,className:"no-title-modal",title:null,centered:!0,visible:null!==s&&void 0!==s?s:t,onCancel:()=>{m(!1)},width:413,children:(0,Kg.jsx)(V$,{loginCallback:f,setBindResult:v})}),(0,Kg.jsx)(q$,{bindResult:p,setBindResult:v,bindChange:g})]})}var Y$=(0,r.memo)(H$),K$=()=>{var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=(s[0],s[1]),c=nM(),d=c.pauseVideo,u=(0,r.useState)(!1),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=oA(),f=(0,r.useState)(!1),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,r.useState)(!1),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=ff(),T=k.open,Z=WA({}),C=rA(),N=xf(),S=N.open,I=RJ("refresh",(e=>{l(e)})),A=I.run,P=()=>{window.open("https://xiudodo.com/watermark/","_self")},M=(0,DI.ZP)(gJ,{manual:!0,onSuccess:e=>{var t,i;switch(e||S(),e.stat){case-21:T(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id);break;case-22:xp.default.error("\u89c6\u9891\u6c34\u5370\u6b63\u5728\u4e0a\u4f20");break;case-23:xp.default.error("\u89c6\u9891\u6c34\u5370\u4e0a\u4f20\u5931\u8d25");break;case-30:w(!0);break;case-31:eh(),y(!0);break;case-32:GJ({goHome:()=>{window.open("https://xiudodo.com/watermark/")}});break;case-33:GJ({});break;case 0:"\u53c2\u6570\u9519\u8bef"===(null===e||void 0===e?void 0:e.msg)?xp.default.error("\u8bf7\u6dfb\u52a0\u6c34\u5370\u540e\u4e0b\u8f7d"):xp.default.error(null===e||void 0===e?void 0:e.msg);break;default:T(null===e||void 0===e||null===(i=e.data)||void 0===i?void 0:i.id)}}}),E=(0,DI.ZP)(aP,{manual:!0,onSuccess:e=>{C(e),e.id>-1||S()},onError:e=>{console.log(e)}}),L=()=>{1!==(null===h||void 0===h?void 0:h.bind_phone)?m(!0):(d(),M.run(Z))},D=()=>{E.run()};return(0,r.useEffect)((()=>{E.run(),A()}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:F$().headerWrap,children:[(0,Kg.jsxs)("div",{className:F$().left,children:[(0,Kg.jsx)("a",{href:"https://xiudodo.com/",children:(0,Kg.jsx)("div",{className:F$().logo})}),(0,Kg.jsx)("div",{className:F$().leftText,children:"\u6d4b\u8bd5\u7248"})]}),(0,Kg.jsxs)("div",{className:F$().right,children:[(0,Kg.jsx)("div",{className:F$().button,onClick:P,children:"\u9000\u51fa"}),(0,Kg.jsx)("div",{className:F$().downloadButton,onClick:L,children:"\u9ad8\u6e05\u89c6\u9891\u4e0b\u8f7d"})]})]}),(0,Kg.jsx)(R$,{}),(0,Kg.jsx)(e$,{type:"watermark"}),(0,Kg.jsx)(BJ,{visible:i,onCancel:()=>a(!1)}),(0,Kg.jsx)(Y$,{phoneBindingShow:v,setPhoneBindingShow:m,loginCallback:D}),(0,Kg.jsx)(nA.Z,{visible:j,footer:!1,bodyStyle:{padding:"0px"},width:608,closable:!1,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsxs)("div",{className:F$().headerModal,children:[(0,Kg.jsx)("div",{className:F$().headerModalTitle,children:"\u5f53\u524d\u670d\u52a1\u533a\u62e5\u5835\u2026"}),(0,Kg.jsx)("div",{className:F$().headerModalText,children:"\u8bf7\u7a0d\u540e\u518d\u6765\u4e0b\u8f7d\uff5e"}),(0,Kg.jsx)("div",{className:F$().headerModalButton,onClick:()=>{w(!1)},children:"\u77e5\u9053\u4e86"})]})}),(0,Kg.jsx)(QJ,{visible:x,width:354,onCancel:()=>{y(!1)},footer:null,children:(0,Kg.jsxs)("div",{className:F$().compressModalWarp,children:[(0,Kg.jsx)("div",{className:F$().modalTxt,children:"\u8be5\u529f\u80fd\u4ec5\u9650VIP\u7528\u6237\u4f7f\u7528"}),(0,Kg.jsx)("div",{className:F$().modalTxt1,children:"\u5f00\u901a\u89c6\u9891\u6c34\u5370VIP \u529f\u80fd\u65e0\u9650\u7545\u7528 \u4e0d\u9650\u4e0b\u8f7d\u6b21\u6570"}),(0,Kg.jsx)("div",{className:F$().modalButton,onClick:()=>{y(!1),window.open("https://xiudodo.com/vip/paying.html?type=watermark")},children:"\u7acb\u5373\u5f00\u901a"})]})})]})},Q$=(0,hp.Pi)(K$),J$=i(74707),$$=i(39144),e0=i(89262),t0=i.n(e0),i0=()=>{var e=Bb(),t=e.setCurrentTime,i=e.currentTime,a=nM(),n=a.pauseVideo,r=a.playVideo,o=a.isPlaying,s=Lw(),l=s.template,c=null===l||void 0===l?void 0:l.pageAttr.pageInfo.pageTime;function d(){o?n():r()}return(0,Kg.jsxs)("div",{className:t0().warp,children:[(0,Kg.jsx)("div",{className:t0().button,onClick:d,children:o?(0,Kg.jsx)(J$.Z,{}):(0,Kg.jsx)($$.Z,{})}),(0,Kg.jsx)("div",{className:t0().TimeAxis,children:(0,Kg.jsx)(TP.Z,{tooltipVisible:!1,onChange:e=>{t(c*(e/100))},value:i/c*100})}),(0,Kg.jsxs)("div",{className:t0().time,children:[Th(parseInt("".concat(i/1e3),10)),"/",Th(parseInt("".concat(c/1e3),10))]})]})},a0=(0,hp.Pi)(i0);function n0(e){return r0.apply(this,arguments)}function r0(){return r0=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s,l,c;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t.id,a=t.width,n=void 0===a?1080:a,r=t.height,o=void 0===r?1920:r,s=t.url,l=t.duration,c=void 0===l?1e4:l,e.next=3,dw({assets:[{type:"videoE",isBackground:!0,resId:i,width:Number(n),height:Number(o),isLoop:!1,isUser:!0,rt_url:s,videoVolume:100}],pageTime:Number(c)});case 3:Lb(0,!1);case 4:case"end":return e.stop()}}),e)}))),r0.apply(this,arguments)}function o0(e,t){var i=Bw(),a=ym(e.meta.type);Object.assign(a.meta,{isWatermark:!0,locked:!0}),Object.assign(a.attribute,e.attribute,{startTime:0,endTime:i.videoInfo.allAnimationTime}),Object.assign(a.meta,e.meta),e.transform&&Object.assign(a.transform,e.transform),a.transform.alpha=50;var n=200;if("image"===e.meta.type){var r=e.attribute,o=r.width,s=r.height,l=o,c=s;o>n&&(l=n,c=n/o*s),a.attribute.width=l,a.attribute.height=c,a.attribute.assetWidth=l,a.attribute.assetHeight=c}if("add"===t)Tj(a);else if("replace"===t){var d=i.watermark[e.meta.type];null===d||void 0===d||d.replaceAssetSelf({meta:d.meta,attribute:(0,u.Z)((0,u.Z)({},d),a.attribute),transform:d.transform})}}function s0(e){var t,i,a=Lp(),n=a.width,r=a.height,o=mk();if(!n||!o)return{};e?(t=Math.ceil(n-e.width),i=Math.ceil(r-e.height)):(t=Math.ceil(n-o.attribute.width),i=Math.ceil(r-o.attribute.height));var s=t/2,l=i/2;return{minPosX:24,minPosY:24,maxPosX:t-24,maxPosY:i-24,centerPosX:s,centerPosY:l}}function l0(e,t){var i=s0(t),a=i.minPosX,n=i.minPosY,r=i.maxPosX,o=i.maxPosY,s=i.centerPosX,l=i.centerPosY,c=a,d=n,u="left";switch(e){case"top":c=s,u="center";break;case"topRight":c=r,u="right";break;case"left":d=l;break;case"leftBottom":d=o;break;case"bottom":d=o,c=s,u="center";break;case"bottomRight":c=r,d=o,u="right";break;case"right":c=r,d=l,u="right";break;case"center":c=s,d=l,u="center";break;default:break}return{posX:c,posY:d,textAlign:u}}function c0(e){if(void 0===(null===e||void 0===e?void 0:e.posX)||null===(null===e||void 0===e?void 0:e.posX))return"topLeft";var t,i=e.posX,a=e.posY,n=e.textAlign,r=s0(),o=(r.minPosX,r.minPosY,r.maxPosX),s=r.maxPosY,l=r.centerPosX,c=r.centerPosY;switch(a){case s:t=(n?"center"===n:i===l)?"bottom":(n?"right"===n:i===o)?"bottomRight":"leftBottom";break;case c:t=(n?"center"===n:i===l)?"center":(n?"right"===n:i===o)?"right":"left";break;default:t=(n?"center"===n:i===l)?"top":(n?"right"===n:i===o)?"topRight":"topLeft"}return t}function d0(e){var t=0,i=0,a=mk();if(!a)return{width:t,height:i};var n=a.attribute,r=n.assetHeight,o=n.assetWidth;return t=Number((o*(e/100)).toFixed(2)),i=Number((r*(e/100)).toFixed(2)),{width:t,height:i}}function u0(e){var t=0,i=mk();return i&&e&&(t=Number((e.width/i.attribute.assetWidth*100).toFixed(2))),t}var p0=i(57254),v0=i(59361),m0=(0,hp.Pi)((e=>{var t=e.fontFamilyListStyle,i=e.language,a=void 0===i?"zh":i,r=e.onChange,o=e.selected,s=Z_(),l=(0,n.Z)(s,2),c=l[0],d=l[1];return(0,Kg.jsx)(v0.E,{options:{className:"os-theme-dark",scrollbars:{autoHide:"never"},overflowBehavior:{y:"scroll"}},children:(0,Kg.jsx)("div",{className:"font-family-list",style:t,children:("zh"===a?GD:XD).map((e=>(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{children:e.cateName}),(0,Kg.jsx)("div",{children:e.fontList.map(((e,t)=>{var i=zD(e),a="".concat(fb.PP,"/index_img/fonts/").concat(i,".svg");return(0,Kg.jsx)("div",{className:hb()({"font-family-item":!0,"font-family-active":(null!==o&&void 0!==o?o:c)===i}),onClick:()=>r?r(i):d(i),children:(0,Kg.jsx)("img",{src:a,alt:e,height:22})},"fontFamily-".concat(e,"-").concat(t))}))})]},"fontFamily-".concat(e.cateName))))})})})),h0=e=>{var t=e.onChange,i=e.fontFamilyListStyle,a=e.selected,r=(0,dx.Z)({activeLanguage:"zh"}),o=(0,n.Z)(r,2),s=o[0],l=o[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"language-tabs",children:[(0,Kg.jsx)("div",{className:hb()({"language-tabs-item":!0,"language-item-active":"zh"===s.activeLanguage}),onClick:()=>l({activeLanguage:"zh"}),children:"\u4e2d\u6587"}),(0,Kg.jsx)("div",{className:hb()({"language-tabs-item":!0,"language-item-active":"en"===s.activeLanguage}),onClick:()=>l({activeLanguage:"en"}),children:"\u82f1\u6587"})]}),(0,Kg.jsx)(eM,{visible:"en"===s.activeLanguage,children:(0,Kg.jsx)(m0,{language:"en",onChange:t,fontFamilyListStyle:i,selected:a})}),(0,Kg.jsx)(eM,{visible:"zh"===s.activeLanguage,children:(0,Kg.jsx)(m0,{language:"zh",onChange:t,fontFamilyListStyle:i,selected:a})})]})},f0=(0,hp.Pi)((e=>{var t=e.fontFamily,i=e.fontFamilyListStyle,a=e.onChange,r=((0,yp.Z)(e,["fontFamily","fontFamilyListStyle","onChange"]),Z_()),o=(0,n.Z)(r,2),s=o[0],l=o[1];function c(e){l(e),Km("tool_fontFamily",{action_label:e})}return(0,Kg.jsx)(MR,{placement:"bottomLeft",trigger:"click",overlayInnerStyle:{marginTop:-5},content:(0,Kg.jsx)("div",{style:{paddingLeft:16,paddingTop:8},children:(0,Kg.jsx)(h0,{fontFamilyListStyle:i,onChange:a||c,selected:t})}),children:(0,Kg.jsxs)("div",{className:hb()("font-family-wrap"),onClick:e=>{e.preventDefault(),e.stopPropagation()},children:[(0,Kg.jsx)("div",{className:"selected-fontFamily",children:(t||s)&&(0,Kg.jsx)("img",{src:"".concat(fb.PP,"/index_img/fonts/").concat(t||s,".svg"),alt:"text",height:22})}),(0,Kg.jsx)(p0.Z,{})]})})})),g0=i(39949),x0=i.n(g0),y0=i(26139),b0=i(51113),_0=i.n(b0),j0=()=>{var e=[{rotate:325,position:"topLeft"},{rotate:0,position:"top"},{rotate:45,position:"topRight"},{rotate:270,position:"left"},{rotate:-1,position:"center"},{rotate:90,position:"right"},{rotate:225,position:"leftBottom"},{rotate:180,position:"bottom"},{rotate:135,position:"bottomRight"}],t=vk(),i=(0,n.Z)(t,2),a=i[0],r=i[1],o=c0(a);return(0,Kg.jsx)("div",{className:_0().positionWarp,children:e.map((e=>(0,Kg.jsx)("div",{className:hb()(_0().positionWarpItem,{[_0().positionWarpItemActive]:e.position===o}),onClick:()=>{Fm("VideoWmEdit","location"),r(l0(e.position))},children:-1!==e.rotate?(0,Kg.jsx)(y0.Z,{rotate:e.rotate}):(0,Kg.jsx)("div",{className:_0().dot})},e.rotate)))})},w0=(0,hp.Pi)(j0),k0=i(69530),T0=i.n(k0),Z0=e=>{var t=e.title,i=e.bindChange,a=e.num,n=e.min,r=e.onAfterChange;return(0,Kg.jsxs)("div",{className:T0().transparency,children:[(0,Kg.jsxs)("div",{className:T0().top,children:[(0,Kg.jsx)("div",{className:T0().left,children:t}),(0,Kg.jsx)("div",{className:T0().right,children:Number(a)})]}),(0,Kg.jsx)("div",{className:T0().bottom,children:(0,Kg.jsx)(cB,{value:Number(a),min:n,onChange:e=>i(e),onAfterChange:e=>r(e),tooltipVisible:!1})})]})},C0=Z0,N0=i(35375),S0=i.n(N0);function I0(e){var t,i=e.visible,a=e.text,r=e.tiledShow,o=(0,dx.Z)({colorPopover:!1,colorPickerSelected:{},activeIndex:-1}),l=(0,n.Z)(o,2),c=l[0],d=l[1],u=mk(),p=sk(),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=ck(),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=lk(),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=uk(),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=pk(),S=(0,n.Z)(N,2),I=S[0],A=S[1],P=vk(),M=(0,n.Z)(P,2),E=M[0],L=M[1],D=c0(E),R=()=>{void 0!=(0,s.ZN)(a)&&""!=(0,s.ZN)(a)[0]||xp.default.warning("\u8bf7\u8f93\u5165\u6c34\u5370\u5185\u5bb9")},z=e=>{"text"===(null===u||void 0===u?void 0:u.meta.type)?y(e):(A(d0(e)),L(l0(D)))};function F(){var e=0;return null!==u&&void 0!==u&&u.meta&&(e="text"===(null===u||void 0===u?void 0:u.meta.type)?x:u0(I)),e}function O(e){console.log("switch to ".concat(e))}return(0,Kg.jsxs)("div",{hidden:!i,children:[(0,Kg.jsxs)("div",{hidden:"image"===(null===u||void 0===u||null===(t=u.meta)||void 0===t?void 0:t.type),className:S0().textStyles,children:[(0,Kg.jsx)(f0,{fontFamilyListStyle:{width:"294px",height:"40vh"},fontFamily:j,onChange:e=>{R(),w(e),Fm("VideoWmEdit","fontFamily")}}),(0,Kg.jsx)("div",{className:S0().fontcolor,children:(0,Kg.jsx)(tE.Z,{visible:c.colorPopover,trigger:"click",placement:"rightBottom",overlayClassName:"color-picker",onVisibleChange:e=>{R(),a&&(d({colorPopover:e}),e&&Fm("VideoWmEdit","color"))},getTooltipContainer:e=>e.parentNode,content:(0,Kg.jsx)("div",{style:{width:"270px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:m,onChange:e=>{h(e.rgb)}})}),children:(0,Kg.jsxs)("div",{className:S0().fontcolorIcon,children:[(0,Kg.jsx)("img",{src:x0(),alt:"colorIcon",width:30,height:36}),(0,Kg.jsx)("div",{className:S0().toolsVipCard,children:"VIP"})]})})})]}),r&&(0,Kg.jsxs)("div",{className:S0().tiled,children:[(0,Kg.jsx)("div",{className:S0().left,children:"\u56fe\u7247\u5e73\u94fa"}),(0,Kg.jsx)("div",{className:S0().right,children:(0,Kg.jsx)(KP.Z,{defaultChecked:!0,onChange:O})})]}),(0,Kg.jsx)(C0,{title:"\u4e0d\u900f\u660e\u5ea6",min:0,num:Z||0,bindChange:e=>{C(e)},onAfterChange:()=>{Fm("VideoWmEdit","opacity")}}),(0,Kg.jsx)(C0,{title:"\u6c34\u5370\u5927\u5c0f",num:F(),bindChange:e=>{z(e)},onAfterChange:()=>{Fm("VideoWmEdit","size")},min:25}),(0,Kg.jsxs)("div",{className:S0().watermarkPosition,children:[(0,Kg.jsx)("div",{className:S0().watermarkname,children:"\u6c34\u5370\u4f4d\u7f6e"}),(0,Kg.jsx)(w0,{})]})]})}var A0=(0,hp.Pi)(I0),P0=i(61270),M0=i.n(P0),E0=VP.Z.TextArea,L0=()=>{var e=Rf(),t=e.close,i=e.visible,a=ok(),r=(0,n.Z)(a,2),o=r[0],s=r[1],l=mk(),c=Kb(),d=(0,Zm.Z)((e=>{var t=c.width-48,i=100,a=1.5*i,n=e.target.value;l?s([n]):o0({meta:{addOrigin:"text",type:"text"},attribute:{text:[n],width:t,height:a,fontSize:50,textAlign:"left",fontFamily:"fnsyhtRegular"}},null!==l&&void 0!==l&&l.meta.type?"replace":"add")}),{wait:200}),u=d.run;return(0,Kg.jsxs)("div",{className:M0().warp,children:[(0,Kg.jsx)("div",{className:M0().textarea,children:(0,Kg.jsx)(tE.Z,{placement:"bottom",visible:i,content:(0,Kg.jsxs)("div",{className:M0().PopoverWarp,children:[(0,Kg.jsx)("div",{className:M0().PopoverText,children:"\u8f93\u5165\u6587\u5b57\uff0c\u5373\u53ef\u5728\u7ebf\u5b9e\u65f6\u751f\u6210\u6587\u5b57\u6c34\u5370"}),(0,Kg.jsx)("div",{className:M0().Popoverbutton,onClick:()=>{t()},children:"\u77e5\u9053\u4e86"})]}),children:(0,Kg.jsx)(E0,{placeholder:"\u8f93\u5165\u6c34\u5370\u5185\u5bb9",rows:4,onChange:u,onFocus:()=>{t(),Fm("VideoWmEdit","addFont")}})})}),(0,Kg.jsx)(A0,{visible:!0,text:o,tiledShow:!1})]})},D0=(0,hp.Pi)(L0);function R0(e,t){var i=new FileReader,a=window.webkitURL.createObjectURL(e);i.onload=i=>{var n,r=null===(n=i.target)||void 0===n?void 0:n.result,o=new Image;o.onload=()=>{var i=o.width,n=o.height;t({file:e,path:a,width:i,height:n})},o.src=r},i.readAsDataURL(e)}function z0(e){var t=e.onSucceed,i=e.onError,a=e.setProgress,n=(e,t)=>{if(e.lengthComputable&&"function"===typeof a){var i=Math.round(e.loaded/e.total*100);a(i>99?99:i,t)}},r=e=>{var a=e.name;try{dV(e,function(){var r=(0,p.Z)(m().mark((function r(o){var s,l,c,d,u,p,v;return m().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return s=0,o>4&&o<=8&&(s=1),r.next=4,XO(a,s);case 4:return l=r.sent,c=QW(e,l.msg),d=JW(l.msg),u=$W({url:d,onprogress:t=>n(t,e)}),p=u.send,r.next=10,p(c);case 10:v=r.sent,1===v.stat?t(v.msg.id,v.msg.picUrl,v.msg):i&&i(v);case 12:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}catch(r){console.error(r),i&&i(r)}};function o(e,t){var i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=2097152,n=Math.ceil(e.size/a),r=0,o=new(hK().ArrayBuffer),s=new FileReader;function l(){var t=r*a,n=t+a>=e.size?e.size:t+a;s.readAsArrayBuffer(i.call(e,t,n))}s.onload=e=>{if(o.append(e.target.result),r+=1,r<n)l();else{var i=o.end();t(i)}},s.onerror=()=>{console.warn("oops, something went wrong.")},s.onprogress=e=>{},l()}var s=e=>{var a=e.name;o(e,(r=>{try{dV(e,function(){var o=(0,p.Z)(m().mark((function o(s){var l,c,d,u,p,v,h,f;return m().wrap((function(o){while(1)switch(o.prev=o.next){case 0:return c=0,s>4&&s<=8&&(c=1),o.next=4,qO(a,c,r);case 4:if(d=o.sent,"alreadyExist"!==(null===d||void 0===d||null===(l=d.data)||void 0===l?void 0:l.message)){o.next=8;break}return t(null===d||void 0===d?void 0:d.data),o.abrupt("return");case 8:return 1005==(null===d||void 0===d?void 0:d.code)&&"bindPhone"===(null===d||void 0===d?void 0:d.err)&&i&&i("bindPhone"),u=QW(e,d.data),p=JW(d.data),v=$W({url:p,onprogress:t=>n(t,e)}),h=v.send,o.next=14,h(u);case 14:f=o.sent,0===f.code?t(f.data):i&&i(f.msg);case 16:case"end":return o.stop()}}),o)})));return function(e){return o.apply(this,arguments)}}())}catch(o){console.error(o),i&&i(o)}}))},l=e=>{var a=e.name;try{dV(e,function(){var r=(0,p.Z)(m().mark((function r(o){var s,l,c,d,u,p,v,h,f,g,x;return m().wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.next=2,_J(a);case 2:return s=r.sent,l=null===s||void 0===s?void 0:s.data,c=l.cdnName,d=(0,_p.Z)(),u=d.params,r.next=7,bJ(a,c,u);case 7:return p=r.sent,v=QW(e,p.data),h=JW(p.data),f=$W({url:h,onprogress:t=>n(t,e)}),g=f.send,r.next=13,g(v);case 13:x=r.sent,1===x.stat?t(x.data):i&&i(x.msg);case 15:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}catch(r){console.error(r),i&&i(r)}};return{uploadStat:r,handleProgress:n,uploadWatermarkStat:l,upLogoloadStat:s}}function F0(e){var t=e.onSucceed,i=e.onError,a=e.setProgress,n=(e,t)=>{if(e.lengthComputable&&"function"===typeof a){var i=Math.round(e.loaded/e.total*100);a(i>99?99:i,t)}},r=function(){var e=(0,p.Z)(m().mark((function e(a){var r,o,s,l,c,d,u,p,v,h,f,g;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=a.name,o=a.size,s=a.type,e.next=3,TJ({name:r,size:o,type:s});case 3:if(l=e.sent,0!==l.code){e.next=14;break}return d=l.data,u=d.host,p=d.payload,v=$W({url:u,onprogress:e=>n(e,a)}),h=v.send,f=KW(a,p),e.next=10,h(f);case 10:g=e.sent,0===g.code?t(g.code,g.data):1005===g.code&&"contentBlock"===(null===(c=g.data)||void 0===c?void 0:c.message)?xp.default.error("\u7cfb\u7edf\u68c0\u6d4b\u5f53\u524d\u56fe\u7247\u5b58\u5728\u8fdd\u89c4\u5acc\u7591\xa0 \u65e0\u6cd5\u4e0a\u4f20"):i&&i(g),e.next=15;break;case 14:i&&i(l);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return{uploadStat:r,handleProgress:n}}function O0(e,t){return B0.apply(this,arguments)}function B0(){return B0=(0,p.Z)(m().mark((function e(t,i){var a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.size,n=10485760,!(a>n)){e.next=5;break}return xp.default.error("\u8bf7\u52ff\u4e0a\u4f20\u8d85\u8fc710M\u7684\u56fe\u7247!"),e.abrupt("return",!1);case 5:if(["image/png","image/jpeg"].some((e=>e===t.type))){e.next=8;break}return xp.default.error("\u4e0a\u4f20\u5931\u8d25\uff0c\u652f\u6301\u4e0a\u4f2010M\u4ee5\u4e0bjpg/png\u672c\u5730\u56fe\u7247"),e.abrupt("return",!1);case 8:return e.next=10,R0(t,(e=>{i((0,u.Z)({file:t},e))}));case 10:case"end":return e.stop()}}),e)}))),B0.apply(this,arguments)}var W0=i(57066),V0=i.n(W0),U0=qW.Z.Dragger,G0=e=>(0,Kg.jsx)("div",{className:V0().notuploadWarpper,children:(0,Kg.jsx)(U0,(0,u.Z)((0,u.Z)({},e),{},{children:(0,Kg.jsxs)("div",{className:V0().notuploadWarp,children:[(0,Kg.jsx)(iP,{type:"iconshangchuan1",className:V0().icon}),(0,Kg.jsx)("div",{className:V0().text,children:"\u53ef\u5c06\u56fe\u7247\u76f4\u63a5\u62d6\u62fd\u5230\u6b64"}),(0,Kg.jsx)("div",{className:V0().text1,children:"\u6216"}),(0,Kg.jsx)("div",{className:V0().button,children:"\u4e0a\u4f20\u56fe\u7247"}),(0,Kg.jsx)("div",{className:V0().text2,children:"\u652f\u6301\u56fe\u7247\u683c\u5f0f\uff1aJPG\u3001PNG \u3001GIF \u56fe\u7247\u5927\u5c0f\uff1a10M"})]})}))}),X0=G0,q0=e=>{var t=e.picUrl,i=e.loading,a=mk(),n=(0,DI.ZP)(GO,{manual:!0,onSuccess:e=>{1===Number(e.stat)&&xp.default.success("\u5220\u9664\u6210\u529f")}}),r=(n.run,()=>{Ij(a)});return(0,Kg.jsx)("div",{className:V0().uploadedWarp,children:(0,Kg.jsxs)("div",{className:V0().imgWarp,children:[(0,Kg.jsx)("div",{className:V0().imgShow,children:i?(0,Kg.jsx)(dN.Z,{spinning:i}):(0,Kg.jsx)("img",{src:t,className:V0().img,alt:""})}),(0,Kg.jsx)(qW.Z,(0,u.Z)((0,u.Z)({},e),{},{children:(0,Kg.jsx)("div",{className:V0().replace,children:"\u66ff\u6362"})})),(0,Kg.jsx)("div",{className:V0().del,onClick:r,children:"\u5220\u9664"})]})})},H0=(0,hp.Pi)(q0),Y0=e=>{var t=e.tiledShow,i=mk(),a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=dk(),d=(0,n.Z)(c,2),p=d[0],v=(d[1],vk()),m=(0,n.Z)(v,1),h=m[0],f=c0(h),g=e=>{var t,a=e.id,n=e.url,r=e.height,o=e.width,s=o,l=r;o>200&&(s=200,l=200/o*r),p&&(t=l0(f,{width:s,height:l})),o0({meta:{id:null===i||void 0===i?void 0:i.meta.id,type:"image"},attribute:{resId:a,width:o/2,height:r/2,picUrl:n},transform:t},p?"replace":"add")},x=z0({setProgress:e=>{},onSucceed:e=>{3!==e.img_scan_flag?(l(!1),e.url&&g(e)):GJ({})},onError:()=>{console.log("\u4e0a\u4f20\u5931\u8d25")}}),y=x.uploadWatermarkStat,b={name:"file",showUploadList:!1,beforeUpload:e=>{Fm("VideoWmEdit","addImg"),O0(e,(e=>{l(!0),y(e.file)}))}};return(0,Kg.jsxs)("div",{className:V0().warp,children:[p?(0,Kg.jsx)(H0,(0,u.Z)({picUrl:p,loading:s},b)):(0,Kg.jsx)(X0,(0,u.Z)({},b)),(0,Kg.jsx)(A0,{visible:p,tiledShow:t})]})},K0=(0,hp.Pi)(Y0),Q0=i(9142),J0=i.n(Q0),$0=YP.Z.TabPane,e1=()=>{var e=Rf(),t=e.close,i=(0,r.useState)("text"),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=Bw(),c=(mk(),(0,r.useState)()),d=(0,n.Z)(c,2),u=(d[0],d[1],e=>{s(e);var t=l.watermark;Object.keys(t).forEach((i=>{var a=t[i];console.log(a),a&&a.update({meta:{hidden:e!==i}})}))});return(0,Kg.jsxs)("div",{className:J0().watermarkTabsWarp,children:[(0,Kg.jsx)("div",{className:J0().watermarkTabs,children:(0,Kg.jsxs)(YP.Z,{defaultActiveKey:"text",activeKey:o,onChange:e=>{t(),u(e)},children:[(0,Kg.jsx)($0,{tab:"\u6587\u5b57\u6c34\u5370",children:(0,Kg.jsx)(D0,{})},"text"),(0,Kg.jsx)($0,{tab:(0,Kg.jsxs)("div",{children:["\u56fe\u7247\u6c34\u5370",(0,Kg.jsx)("div",{className:J0().toolsVipCard,children:"VIP"})]}),children:(0,Kg.jsx)(K0,{tiledShow:!1})},"image")]})}),(0,Kg.jsxs)("div",{className:J0().watermarkFooter,children:[(0,Kg.jsx)(i$.ZP,{value:"https://work.weixin.qq.com/kfid/kfcf7c815de3b3edd21",size:100}),(0,Kg.jsx)("div",{className:J0().watermarkFooterText,children:"\u9047\u5230\u95ee\u9898\uff0c\u5fae\u4fe1\u626b\u7801\u54a8\u8be2\u5ba2\u670d"})]})]})},t1=(0,hp.Pi)(e1);function i1(){var e=Ep(),t=e.update,i=oA(),a=i.id,o=(0,r.useRef)(null),s=(0,Cm.Z)(o),l=(0,ez.Z)(s,{wait:100}),c=(0,DI.ZP)(yJ,{manual:!0}),d=c.run,p=c.data;p=void 0===p?{}:p;var v=p.data,m=(0,r.useState)({width:500,height:500,scale:1}),h=(0,n.Z)(m,2),f=h[0],g=h[1];return(0,r.useEffect)((()=>{if(3!=(null===v||void 0===v?void 0:v.video_scan_flag)){if(v&&l.width){var e=1,i=Number(v.height),a=Number(v.width);e=Nm({width:a,height:i},s,.9,110),g({width:a,height:i,scale:e});var n=v.source_path,r=v.video_time,o=(0,yp.Z)(v,["source_path","video_time"]);t({width:a,height:i}),Ti({width:a,height:i}),n0((0,u.Z)({duration:r,url:n},o))}}else GJ({goHome:()=>{window.open("https://xiudodo.com/watermark/")}})}),[v,l.width]),(0,Sb.Z)((()=>{if(a>-1){var e=(0,_p.Z)(),t=e.params;d(t)}}),[a]),(0,Kg.jsx)("div",{ref:o,className:"xiudodo-tools-canvas",children:(0,Kg.jsx)(NI,{canvasInfo:f})})}function a1(){return(0,Kg.jsxs)("div",{className:"xiudodo-tools-main",children:[(0,Kg.jsx)(mP,{}),(0,Kg.jsx)("div",{className:"xiudodo-tools-aside",children:(0,Kg.jsx)(t1,{})}),(0,Kg.jsxs)("div",{className:"xiudodo-tools-content",children:[(0,Kg.jsx)(i1,{}),(0,Kg.jsx)("div",{className:"xiudodo-bottomBar",children:(0,Kg.jsx)(a0,{})})]})]})}var n1=()=>((0,r.useEffect)((()=>{Ah.closeWindowsLoading()}),[]),(0,Kg.jsx)(fJ,{header:(0,Kg.jsx)(Q$,{}),content:(0,Kg.jsx)(a1,{})})),r1=n1,o1=i(29104),s1=i(73218);function l1(e){var t=e.filters,i=e.onFilter,a=e.filtered,r=void 0===a?{}:a;return(0,Kg.jsx)("div",{className:"xiudd-filters",children:t.map((e=>(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{children:e.label}),(0,Kg.jsx)("div",{className:"xiudd-filters-group",children:"radio"===e.type?(0,Kg.jsx)(FP.ZP.Group,{options:e.options,onChange:t=>{var a=t.target.value;i({[e.key]:a})},value:r[e.key]}):e.options.map((t=>{var a,o;return(0,Kg.jsx)("span",{onClick:()=>{var a=e.key&&e.key.split("."),r=(0,n.Z)(a,2),o=r[0],s=r[1];i(t.key?t.value:{[o]:{[s]:""},[e.key]:t.value})},className:hb()("xiudd-filters-option",{"xiudd-filters-option-active":null!==(o=t.checked)&&void 0!==o?o:r[e.key]===t.value}),children:t.label},null!==(a=t.key)&&void 0!==a?a:t.value)}))})]},e.key)))})}var c1=(e,t)=>{e.children;var i=e.filters,a=e.value,o=e.onChange,s=e.placeholder,l=e.destroyFilterOnHide,c=e.defaultValue,p=e.searchKey,v=e.onFilter,m=e.className,h=e.onClickFilter,f=void 0===h?()=>{}:h,g=((0,yp.Z)(e,["children","filters","value","onChange","placeholder","destroyFilterOnHide","defaultValue","searchKey","onFilter","className","onClickFilter"]),(0,r.useRef)(null)),x=(0,r.useState)(c),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(!1),w=(0,n.Z)(j,2),k=w[0],T=w[1];TM((()=>{(0,qe.Z)(b,c)||_(c)}),[c]);var Z=(0,d.Z)((e=>{var t=e.target.value,i=Sf(),a=i.menu;_((e=>(0,u.Z)((0,u.Z)({},e),{},{[p]:t}))),o((0,u.Z)((0,u.Z)({},b),{},{[p]:t})),Km("action_".concat(a,"_search"),{action_label:t})}),300);function C(e){var t=Sf(),i=t.menu;_((t=>(0,u.Z)((0,u.Z)({},t),e))),v&&v((0,u.Z)((0,u.Z)({},b),e)),T(!1),Km("action_".concat(i,"_filter"),{action_label:JSON.stringify(e)})}function N(){o({[p]:""}),v&&v(c),_(null!==c&&void 0!==c?c:{}),null!==t&&void 0!==t&&t.current?t.current.state.value="":null!==g&&void 0!==g&&g.current&&(g.current.state.value="")}return(0,Kg.jsx)("div",{className:hb()("xiudd-search",m),children:(0,Kg.jsx)(VP.Z,{ref:null!==t&&void 0!==t?t:g,allowClear:!i,size:"middle",prefix:(0,Kg.jsx)(iP,{type:"iconsousuo"}),placeholder:s,suffix:(0,Kg.jsxs)("div",{hidden:!i,children:[(0,Kg.jsx)(s1.Z,{className:"xiudd-search-clear",style:{display:b?"inline-block":"none"},onClick:N}),(0,Kg.jsx)(tE.Z,{visible:k,destroyTooltipOnHide:l,trigger:"click",getPopupContainer:e=>e,content:(0,Kg.jsx)(l1,{onFilter:C,filters:i,filtered:b}),overlayClassName:"xiudd-search-cover-popover",placement:"bottomRight",onVisibleChange:T,children:(0,Kg.jsxs)("span",{onClick:f,className:"xiudd-search-filter-icon",children:[(0,Kg.jsx)(iP,{type:"iconshaixuan"}),"\u7b5b\u9009"]})})]}),value:a,onChange:Z,onKeyDown:Ph,onPaste:Ph})})},d1=(0,r.memo)((0,r.forwardRef)(c1)),u1=i(53044),p1=i.n(u1),v1=e=>{var t=e.isSingle,i=e.item,a=e.onAdd,o=e.onPreview,s=e.itemStyle,l=(e.parent,(0,r.useState)(!1)),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=(0,r.useRef)(null),m=t?i.preview_url:"".concat(i.host).concat(i.imgUrl),h=t?i.small_url:"".concat(i.host).concat(i.small_url),f=e=>{e?sv(i.id).then((()=>{xp.default.success("\u6536\u85cf\u6210\u529f!")})):lv(i.id).then((()=>{xp.default.success("\u53d6\u6d88\u6536\u85cf\u6210\u529f!")}))};return(0,Kg.jsxs)("div",{onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),className:p1().item,ref:v,children:[(0,Kg.jsxs)("div",{className:hb()(p1().video,{[p1().hover]:d}),style:(0,u.Z)({backgroundImage:"url(".concat(m,")")},s),children:[(0,Kg.jsx)(UM,{poster:m,clip:t?[i.position,i.position+i.duration]:void 0,playing:d,src:h}),!t&&(0,Kg.jsx)("div",{className:hb()(p1().favorite,p1().hidden,{[p1().favorited]:i.isFav}),onClick:()=>{i.isFav=i.isFav?0:1,f(!!i.isFav)},children:(0,Kg.jsx)(iP,{className:p1().icon,type:"iconaixin"})}),!t&&(0,Kg.jsxs)("div",{className:p1().partCount,children:["\u5171",i.pages,"\u4e2a\u7247\u6bb5"]}),(0,Kg.jsxs)("div",{className:hb()(p1().preview,p1().hidden),onClick:()=>{o(i)},children:[(0,Kg.jsx)(iP,{className:p1().icon,type:"iconyanjing"})," \u9884\u89c8"]}),(0,Kg.jsxs)("div",{className:hb()(p1().add,p1().hidden),onClick:()=>{a(i)},children:["\u6dfb\u52a0\u8be5",t?"\u7247\u6bb5":"\u6a21\u677f"]})]}),(0,Kg.jsx)("div",{className:hb()(p1().name,{[p1().hid]:d}),title:i.title,style:{maxWidth:s.width},children:i.title})]},i.id)},m1=(e,t)=>{var i=e.data,a=e.isSingle,n=e.onAdd,r=e.onPreview,o=e.keyword,s=Mi(),l=s.width,c=s.height,d=_h(),u="h"===d?172:216,p={width:u,height:u*(c/l)};return(0,Kg.jsx)("div",{className:p1().TemplateList,style:{gridTemplateColumns:"repeat(auto-fill, ".concat(u,"px)")},ref:t,children:null!==i&&void 0!==i&&i.length?(0,Kg.jsxs)(Kg.Fragment,{children:[!o&&(0,Kg.jsxs)("div",{className:p1().item,onClick:()=>{n()},children:[(0,Kg.jsx)("div",{className:p1().emptyItem,style:p,children:(0,Kg.jsxs)("div",{className:p1().empty,children:[(0,Kg.jsx)("div",{className:p1().addEmpty,children:(0,Kg.jsx)(iP,{className:p1().addEmptyIcon,type:"iconxingzhuangjiehe6"})}),(0,Kg.jsx)("div",{children:"\u6dfb\u52a0\u7a7a\u767d\u7247\u6bb5"})]})}),(0,Kg.jsx)("div",{className:p1().name,children:"\u7a7a\u767d\u7247\u6bb5"})]}),i.map((e=>(0,Kg.jsx)(v1,{parent:t,onAdd:n,item:e,onPreview:r,isSingle:a,itemStyle:p},e.id)))]}):(0,Kg.jsx)("div",{className:p1().emptyData,children:(0,Kg.jsxs)("div",{className:p1().emptyDataContent,children:[(0,Kg.jsx)("div",{style:{textAlign:"center",marginBottom:6},children:(0,Kg.jsx)(iP,{className:p1().emptyDataIcon,type:"iconwuneirong1"})}),(0,Kg.jsxs)("p",{children:["\u62b1\u6b49,\u6682\u672a\u627e\u5230\u4e0e\u201c",o,"\u201d\u76f8\u5173\u5185\u5bb9"]}),(0,Kg.jsx)("p",{children:"\u5efa\u8bae\u6362\u4e00\u4e2a\u5173\u952e\u8bcd\u641c\u7d22\u8bd5\u8bd5"})]})})})},h1=(0,r.forwardRef)(m1),f1=h1,g1=i(49556),x1=i.n(g1),y1=e=>{var t,i=e.template,a=e.onBack,o=e.shape,s=e.cancel,l=(0,r.useState)(null),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=(0,r.useState)([]),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=Mi(),x=g.width,y=g.height,b=_f(),_=b.partModal.currentIndex,j=(b.changePartModal,"h"===o?172:216),w={width:j,height:j*(y/x)},k=(0,DI.ZP)(ev,{manual:!0}),T=k.data,Z=k.run,C=k.mutate,N=null===T||void 0===T?void 0:T.doc.pageAttr.pageInfo;(0,r.useEffect)((()=>{if(!i)return T&&C(void 0),void f([]);Z({picId:i.id})}),[i]);var S=()=>{N&&h.length!==N.length?f(null===N||void 0===N?void 0:N.map((e=>e.tid))):f([])},I=(e,t)=>{if(t)f([...h,e]);else{var i=h.findIndex((t=>t===e));-1!==i&&(h.splice(i,1),f([...h]))}},A=()=>{var e=h.map((e=>{var t=Number(e.split(".")[1])||0;return null===T||void 0===T?void 0:T.doc.work[t]}));T.doc.work=e;var t=LA((0,u.Z)((0,u.Z)({},T),{},{doc:(0,u.Z)((0,u.Z)({},null===T||void 0===T?void 0:T.doc),{},{work:e})})),i=0;t.forEach((e=>{i+=e.pageAttr.pageInfo.pageTime})),xh({index:_,templates:t,incrementalPageTime:i,warnAssets:null===T||void 0===T?void 0:T.assets}),Km("AddPartModal6"),s()},P=(0,r.useMemo)((()=>{var e=[];return T&&T.doc.pageAttr.pageInfo.length&&T.doc.pageAttr.pageInfo.reduce(((t,i)=>{var a=i||{},n=a.pageTime,r=void 0===n?0:n,o=t+r;return e.push([t,o]),o}),0),e}),[T]);return(0,Kg.jsxs)("div",{className:hb()(x1().SelectPart,{[x1().show]:!!i}),children:[(0,Kg.jsxs)("div",{className:x1().header,children:[(0,Kg.jsx)("div",{className:x1().title,children:"\u9009\u62e9\u60a8\u8981\u63d2\u5165\u7684\u573a\u666f\u9875"}),(0,Kg.jsxs)("div",{className:x1().back,onClick:a,children:[(0,Kg.jsx)(iP,{className:x1().backIcon,type:"iconjiantouyou"})," \u8fd4\u56de"]})]}),(0,Kg.jsx)("div",{className:x1().selectAll,children:(0,Kg.jsx)(WP.Z,{indeterminate:!!h.length&&h.length<(null!==(t=null===N||void 0===N?void 0:N.length)&&void 0!==t?t:0),checked:N&&h.length===N.length,onChange:S,children:"\u5168\u9009"})}),(0,Kg.jsx)("div",{className:x1().body,children:(0,Kg.jsx)("div",{className:x1().list,children:T&&T.doc.pageAttr.pageInfo.map(((e,t)=>(0,Kg.jsxs)("div",{onMouseEnter:()=>p(e.tid),onMouseLeave:()=>p(null),className:x1().item,onClick:()=>I(e.tid,!h.includes(e.tid)),style:(0,u.Z)({backgroundImage:"url(".concat(e.rt_preview_image,")")},w),children:[(0,Kg.jsx)(UM,{poster:e.rt_preview_image,clip:P.length?P[t]:void 0,playing:d===e.tid,src:(null===T||void 0===T?void 0:T.info)&&T.info.small_url}),(0,Kg.jsx)("div",{className:x1().checkbox,children:(0,Kg.jsx)(WP.Z,{checked:h.includes(e.tid),onChange:t=>I(e.tid,t.target.checked)})})]},e.tid)))})}),(0,Kg.jsx)("div",{className:x1().footer,children:(0,Kg.jsx)(CS.Z,{style:{width:231,height:42},type:"primary",onClick:A,disabled:!h.length,children:"\u6dfb\u52a0\u6240\u9009\u7247\u6bb5"})})]})},b1=y1,_1=i(36571),j1=i.n(_1),w1=e=>{var t=e.previewItem,i=e.onBack,a=e.shape,n=e.isSingle,r="w"===a?"80%":"auto",o="w"===a?"auto":"80%",s=n?t.preview_url:"".concat(t.host).concat(t.imgUrl),l=n?t.small_url:"".concat(t.host).concat(t.small_url);return(0,Kg.jsxs)("div",{className:hb()(j1().Preview,{[j1().show]:!!t}),children:[(0,Kg.jsx)("div",{className:j1().mask}),(0,Kg.jsx)("div",{className:j1().video,style:{width:r,height:o},children:(0,Kg.jsxs)("div",{className:j1().videoWrapper,children:[(0,Kg.jsx)("div",{className:j1().close,onClick:i,children:(0,Kg.jsx)(iP,{type:"iconchahao",style:{fontSize:20,color:"#fff"}})}),(0,Kg.jsx)("img",{src:s,style:{opacity:0},width:"100%",height:"100%",alt:"preview"}),(0,Kg.jsx)(UM,{poster:"",clip:n?[t.position,t.position+t.duration]:void 0,playing:!0,src:l,style:{width:"100%",height:"100%",backgroundColor:"rgba(0,0,0,0)"}})]})})]})},k1=w1,T1={g:"\u5206\u7c7b",c:"\u7528\u9014",d:"\u573a\u666f",i:"\u884c\u4e1a"},Z1=[{label:"\u7efc\u5408\u6392\u5e8f",value:0},{label:"\u70ed\u95e8\u4e0b\u8f7d",value:"hot"},{label:"\u6700\u65b0\u4e0a\u4f20",value:"new"}],C1=39,N1=i(72182),S1=i.n(N1),I1=30,A1=e=>{var t=e.label,i=e.list,a=e.onSelect,o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(!1),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,r.useRef)(null);(0,r.useLayoutEffect)((()=>{m.current&&m.current.scrollHeight>I1&&v(!0)}),[]);var h=()=>{c(!l)};return(0,Kg.jsxs)("div",{className:S1().filterRow,children:[(0,Kg.jsxs)("div",{className:S1().selector,children:[(0,Kg.jsx)("div",{className:S1().label,children:T1[t]}),(0,Kg.jsx)("div",{className:hb()(S1().list,{[S1().showAll]:l}),ref:m,children:i.map((e=>(0,Kg.jsx)("div",{onClick:()=>{a(e.params)},className:hb()(S1().item,{[S1().active]:e.active}),children:e.name},e.id)))})]}),p&&(0,Kg.jsxs)("div",{onClick:h,className:S1().more,children:["\u66f4\u591a",(0,Kg.jsx)(iP,{type:"iconarrow_right",style:{marginLeft:6},className:hb()({[S1().collapsed]:l})})]})]})},P1=A1,M1=e=>{var t=e.onFilterChange,i=e.onOrderbyChange,a=e.filterData,o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=e=>{t(e)};if(!a)return null;var u=a.tags.st,p=u.slice(4,u.length-1),v=p.find((e=>!!e.active));return(0,Kg.jsxs)("div",{className:S1().filter,children:[Object.entries(a.classes).map((e=>{var t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)(P1,{onSelect:d,label:i,list:a},i)})),(0,Kg.jsxs)("div",{className:S1().sortRow,children:[(0,Kg.jsxs)("div",{className:S1().sortRow,children:[(0,Kg.jsx)("div",{className:S1().label,children:"\u6392\u5e8f"}),(0,Kg.jsx)("div",{className:S1().list,children:Z1.map((e=>(0,Kg.jsx)("div",{onClick:()=>{i(e.value),c(e.value)},className:hb()(S1().item,{[S1().active]:e.value===l}),children:e.label},e.label)))})]}),(0,Kg.jsxs)("div",{style:{marginLeft:24},className:S1().sortRow,children:[(0,Kg.jsx)("div",{className:S1().label,children:"\u98ce\u683c"}),(0,Kg.jsxs)("div",{className:S1().list,children:[u.slice(0,4).map((e=>(0,Kg.jsx)("div",{onClick:()=>{d(e.params)},className:hb()(S1().item,{[S1().active]:e.active}),children:e.name},e.name))),(0,Kg.jsx)("div",{children:(0,Kg.jsx)(NH.Z,{overlay:(0,Kg.jsx)(SH.Z,{children:p.map((e=>(0,Kg.jsx)(SH.Z.Item,{className:S1().menuItem,onClick:()=>{d(e.params)},children:e.name},e.name)))}),children:(0,Kg.jsxs)("div",{className:hb()(S1().item,{[S1().active]:null===v||void 0===v?void 0:v.id}),children:[null!==v&&void 0!==v&&v.id?v.name:"\u66f4\u591a",(0,Kg.jsx)(iP,{style:{marginLeft:3},type:"iconarrow_right"})]})})})]})]})]})]})},E1=M1,L1=i(13422),D1=i.n(L1),R1=e=>{var t=e.getCancel,i=_f(),a=i.partModal.currentIndex,o=i.changePartModal,s=(0,r.useState)({}),l=(0,n.Z)(s,2),c=l[0],v=l[1],h=(0,r.useState)(""),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)(null),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=(0,r.useState)(null),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=(0,r.useRef)(null),N=(0,r.useState)(0),S=(0,n.Z)(N,2),I=S[0],A=S[1],P=(0,r.useState)(!0),M=(0,n.Z)(P,2),E=M[0],L=M[1],D=Np(),R=D.templateInfo,z=R.last_templ_id,F=R.picId,O=Lp(),B=O.width,W=O.height,V=(0,_p.Z)(),U=V.picId||F||z,G=_h(),X=(0,DI.ZP)(tv,{manual:!0}),q=X.data,H=X.run,Y=function(){var e=(0,p.Z)(m().mark((function e(t,i,a){var n,r,o,s,l;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=(null===t||void 0===t?void 0:t.page)||1,i.p=n,!a){e.next=8;break}return e.next=5,av(i);case 5:r=e.sent,e.next=11;break;case 8:return e.next=10,iv(i);case 10:r=e.sent;case 11:return o=r,s=o.data,l=n>=s.pageTotal,e.abrupt("return",{list:s.items,isNoMore:l,page:n+1,totalCount:s.totalCount});case 14:case"end":return e.stop()}}),e)})));return function(t,i,a){return e.apply(this,arguments)}}(),K=(0,r.useMemo)((()=>{var e=(0,u.Z)((0,u.Z)({},c),{},{shape:G}),t=(0,o1.cv)(JSON.stringify(e));return{template_id:U,w:g,filter:t,orderby:I,page_size:g?C1+1:C1,width:B,height:W}}),[c,I,g,U,G,B,W]),Q=(0,DI.ZP)((e=>Y(e,K,E)),{loadMore:!0,ref:C,isNoMore:e=>!(null===e||void 0===e||!e.isNoMore),refreshDeps:[K,E],threshold:100}),J=Q.data;(0,r.useEffect)((()=>{var e=(0,u.Z)((0,u.Z)({},c),{},{shape:G}),t=(0,o1.cv)(JSON.stringify(e));H(t)}),[c,G]);var $=(0,DI.ZP)(ev,{manual:!0}),ee=$.run,te=()=>{o({visible:!1}),x("")};(0,r.useEffect)((()=>{t(te),Km("AddPartModal1")}),[]),(0,r.useEffect)((()=>{Km(E?"AddPartModal2":"AddPartModal7")}),[E]);var ie=e=>{ee({picId:e.template_id}).then((t=>{var i=LA(t),n=i[e.jump];xh({index:a,templates:[n],incrementalPageTime:n.pageAttr.pageInfo.pageTime,warnAssets:t.assets}),Km("AddPartModal5"),te()}))},ae=e=>{if(!e)return xh({index:a}),Km("AddPartModal3"),void te();E?ie(e):j(e)},ne=e=>{L(e),Z(null)};return(0,Kg.jsxs)("div",{className:D1().wrapper,children:[(0,Kg.jsx)(b1,{template:_,shape:G,cancel:te,onBack:()=>{j(null)}}),(0,Kg.jsxs)("div",{className:D1().header,children:[(0,Kg.jsx)("div",{className:D1().title,children:"\u6a21\u677f/\u7247\u6bb5\u5e93"}),(0,Kg.jsx)("div",{className:D1().right,children:(0,Kg.jsx)(d1,{className:D1().search,searchKey:"keyword",onChange:(0,d.Z)((e=>{Km("AddPartModal4"),x(e.keyword)}),200),placeholder:"\u641c\u7d22\u5173\u952e\u8bcd"})})]}),(0,Kg.jsxs)("div",{className:D1().body,children:[(0,Kg.jsxs)("div",{className:D1().aside,children:[(0,Kg.jsx)("div",{className:hb()(D1().templateType,{[D1().active]:E}),onClick:()=>{ne(!0)},children:"\u5355\u7247\u6bb5"}),(0,Kg.jsx)("div",{className:hb()(D1().templateType,{[D1().active]:!E}),onClick:()=>{ne(!1)},children:"\u6a21\u677f"})]}),(0,Kg.jsxs)("div",{className:D1().content,children:[T&&(0,Kg.jsx)(k1,{onBack:()=>Z(null),shape:G,previewItem:T,isSingle:E}),g&&(null===J||void 0===J?void 0:J.totalCount)&&(0,Kg.jsxs)("p",{className:D1().result,children:["\u641c\u7d22\u7ed3\u679c: \u5171\u641c\u7d22\u5230 \u201c",(0,Kg.jsx)("span",{children:g}),"\u201d \u6a21\u677f",(0,Kg.jsx)("span",{children:null===J||void 0===J?void 0:J.totalCount}),"\u5957"]}),(0,Kg.jsx)(E1,{onFilterChange:v,filterData:q,onOrderbyChange:A}),(0,Kg.jsx)(f1,{onPreview:Z,onAdd:ae,keyword:g,ref:C,data:null===J||void 0===J?void 0:J.list,isSingle:E})]})]})]})},z1=R1,F1=i(41521),O1=i.n(F1),B1=()=>{var e=(0,r.useRef)(null),t=_f(),i=t.partModal.visible;return(0,Kg.jsx)(nA.Z,{footer:null,destroyOnClose:!0,className:O1().AddPartModal,title:null,centered:!0,visible:i,width:"auto",onCancel:()=>e.current&&e.current(),maskClosable:!1,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsx)(z1,{getCancel:t=>{e.current=t}})})},W1=B1,V1=e=>{var t=e.title,i=e.icon,a=e.iconstyle,n=e.disabled,r=e.onClick,o=(0,yp.Z)(e,["title","icon","iconstyle","disabled","onClick"]),s=()=>{n?xp.default.info("\u8bf7\u9009\u4e2d\u4f60\u9700\u8981\u4fee\u6539\u7684\u56fe\u5c42!"):r&&r()};return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:hb()("layer-drag-tool-item",{"layer-drag-tool-item-active":!n}),onClick:s},o),{},{children:[(0,Kg.jsx)(iP,{type:i,style:a}),(0,Kg.jsx)("span",{children:t})]}))},U1=()=>{var e=Pw(),t=Gq(),i=t.handleRemoveAsset;function a(){$t(e)?(i(e),th("LayerModal_01",{action_label:null===e||void 0===e?void 0:e.meta.type})):xp.default.info("\u8bf7\u5148\u89e3\u9501")}function n(t){e&&$t(e)?(Gh({asset:e}),th("LayerModal_02",{action_label:null===e||void 0===e?void 0:e.meta.type})):xp.default.info("\u8bf7\u5148\u89e3\u9501")}return(0,Kg.jsxs)("div",{className:"layer-drag-tool",children:[(0,Kg.jsx)(V1,{title:"\u5220\u9664",icon:"iconshanchu",onClick:a,iconstyle:{fontSize:16},disabled:!e}),(0,Kg.jsx)(V1,{title:"\u62f7\u8d1d",icon:"iconfuzhi1",onClick:n,iconstyle:{fontSize:20},disabled:!e})]})},G1=(0,hp.Pi)(U1),X1=i(63921),q1=e=>{var t=e.src,i=void 0===t?"":t,a=e.className,o=(0,r.useState)({width:"100%",height:"auto"}),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=e=>{var t=e.target,i=t.clientHeight,a=t.clientWidth;c(i>a?{width:"auto",height:"100%"}:{width:"100%",height:"auto"})};return(0,Kg.jsx)("div",{className:a,children:(0,Kg.jsx)("img",{style:l,src:i,alt:"",onLoad:d})})},H1=q1,Y1=VP.Z.TextArea,K1=e=>{var t,i,a=e.asset,n=e.onBlur,o=void 0===n?()=>{}:n,s=(0,r.useRef)(null),l=e=>{Ud(a,{attribute:{text:e.target.value.split("\n")}})};function c(e){Ud(a,{attribute:{fontSize:e}}),null===a||void 0===a||a.setRtRelativeByParent()}return(0,Kg.jsxs)("div",{className:"layerItem-textArea",children:[(0,Kg.jsx)(Y1,{ref:s,rows:5,defaultValue:null===a||void 0===a||null===(t=a.attribute.text)||void 0===t?void 0:t.join("\n"),placeholder:"\u8bf7\u8f93\u5165\u6587\u5b57",onChange:l,onKeyDown:Ph,onBlur:()=>{We("changeText",!0),o()},autoFocus:!0,onFocus:e=>{e.target.select()},onCopy:Ph,onPaste:Ph}),a&&(null===a||void 0===a?void 0:a.parent)&&(0,Kg.jsx)(WN,{textEditAsset:a,currentText:null===a||void 0===a||null===(i=a.attribute.text)||void 0===i?void 0:i.join("<br/>"),onChange:c},null===a||void 0===a?void 0:a.attribute.text)]})},Q1=(0,hp.Pi)(K1),J1=e=>{var t=Xf(),i=t.open,a=(0,r.useState)(),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=()=>{var t,i,a="";switch(null===e||void 0===e?void 0:e.meta.type){case"text":((null===e||void 0===e||null===(t=e.attribute)||void 0===t?void 0:t.text)||[]).forEach((e=>{a+=e}));break;case"video":case"videoE":a="\u89c6\u9891",null!==e&&void 0!==e&&e.meta.isOverlay&&(a="\u89c6\u9891\u7279\u6548");break;case"pic":a="\u56fe\u7247";break;case"image":a="\u56fe\u7247";break;case"SVG":a="\u77e2\u91cf\u56fe";break;case"lottie":a="\u89d2\u8272";break;case"mask":a="\u8499\u7248";break;case"module":a="\u7ec4\u5408";break;case"qrcode":a="\u4e8c\u7ef4\u7801";break;default:a="\u4e0d\u53ef\u4fee\u6539"}return null!==e&&void 0!==e&&null!==(i=e.meta)&&void 0!==i&&i.isBackground&&(a="\u80cc\u666f".concat(a)),a},d=(0,Nb.Z)((t=>{xg(e),xp.default.info(t),eu()}),{wait:200}),u=d.run,p=(0,Nb.Z)((t=>{null!==e&&void 0!==e&&e.meta.locked?xp.default.info("\u8bf7\u5148\u89e3\u9501\u5143\u7d20"):(cu(e),xp.default.info(t))}),{wait:200}),v=p.run,m=t=>{var i;Ph(t),t.preventDefault(),null!==e&&void 0!==e&&null!==(i=e.meta)&&void 0!==i&&i.isBackground?xp.default.info("\u89c6\u9891\u80cc\u666f\uff0c\u4e0d\u53ef\u9009\u4e2d\uff01"):null!==e&&void 0!==e&&e.meta.hidden||(Rb(),gg({asset:e}))},h=t=>{t.stopPropagation(),t.preventDefault(),e.meta.locked?xp.default.info("\u8bf7\u5148\u89e3\u9501\u5143\u7d20"):"text"===e.meta.type?l(e):e.meta.isBackground?i("t_b_replace"):(Rb(),gg({asset:e}),__(e))},f=()=>{l(void 0)};return{textAsset:s,showLayerName:c,clickLockFunction:u,clickSeeFunction:v,clearTextAsset:f,handleItemClick:m,handleItemDoubleClick:h}},$1=J1,e2=["pic","image","text","SVG","video","videoE","module"],t2=e=>{var t=e.data,i=e.onCollapsed,a=e.collapsed,n=NJ(),o=n.checkLoginStatus,s=Pw(),l=Ap(),c=(l.value,O(t)||t),d=(0,r.useRef)(null),u=(0,bE.Z)(d),p=$1(t),v=p.textAsset,m=p.showLayerName,h=p.clickLockFunction,f=p.clickSeeFunction,g=p.clearTextAsset,x=p.handleItemClick,y=p.handleItemDoubleClick,b=e=>{var t=!1;return e2.forEach((i=>{(0,qe.Z)(i,e)&&(t=!0)})),t},_=()=>{var e;if(c)return(0,Kg.jsxs)(Kg.Fragment,{children:["module"===c.meta.type&&(a?(0,Kg.jsx)(hF.Z,{onClick:i}):(0,Kg.jsx)(Ez.Z,{onClick:i})),("pic"===c.meta.type||"image"===c.meta.type)&&(0,Kg.jsx)(H1,{src:c.attribute.picUrl,className:"img"}),"text"===c.meta.type&&(0,Kg.jsx)(iP,{type:"iconwenzi1"}),"SVG"===c.meta.type&&(0,Kg.jsx)(H1,{src:c.attribute.SVGUrl,className:"img"}),("video"===c.meta.type||"videoE"===c.meta.type)&&(0,Kg.jsx)(H1,{src:c.attribute.rt_preview_url,className:"img"}),!b(null===c||void 0===c||null===(e=c.meta)||void 0===e?void 0:e.type)&&(0,Kg.jsx)(iP,{type:"iconteshuruanjian"})]})},j=(0,r.useMemo)((()=>{var e;return s&&(s.id===t.id||s.id===(null===(e=t.parent)||void 0===e?void 0:e.id))}),[null===s||void 0===s?void 0:s.id]),w=(0,r.useMemo)((()=>!(!t.parent||!ti(t.parent))),[t.meta]);(0,r.useEffect)((()=>{(null===v||void 0===v?void 0:v.id)!==(null===s||void 0===s?void 0:s.id)&&g()}),[s]);var k=t.meta.locked;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{ref:d,className:hb()("layer-item",{"layer-item-choosed":j}),onClick:x,onDoubleClick:e=>{"text"===t.meta.type?th("LayerModal_08",{action_label:t.meta.type}):th("LayerModal_03",{action_label:t.meta.type}),y(e)},children:[(0,Kg.jsx)("div",{className:"layer-item-left",children:(0,Kg.jsx)(iP,{type:t.meta.hidden?"iconbiyanjing1":"iconyanjing",onClick:e=>{Ph(e),th("LayerModal_07",{action_label:t.meta.type}),f(null!==t&&void 0!==t&&t.meta.hidden?"\u663e\u793a\u6210\u529f":"\u9690\u85cf\u6210\u529f")}})}),(0,Kg.jsxs)("div",{className:"layer-item-right",children:[(0,Kg.jsx)("div",{className:hb()("layer-item-right-pic",{"layer-item-right-pic-group":ti(t)}),children:_()}),(0,Kg.jsx)("div",{className:"layer-item-right-text",children:m()}),u&&!["text","module"].includes(t.meta.type)&&(0,Kg.jsx)(CS.Z,{type:"primary",className:"layer-item-right-button",onClick:e=>{o()||(th("LayerModal_04",{action_label:t.meta.type}),y(e))},children:"\u66ff\u6362"})]}),!w&&(0,Kg.jsx)(xF.Z,{title:k?"\u89e3\u9501":"\u9501\u5b9a",children:(0,Kg.jsx)("div",{className:"layer-item-done",onClick:e=>{Ph(e),th("LayerModal_06",{action_label:t.meta.type}),h(k?"\u89e3\u9501\u6210\u529f":"\u9501\u5b9a\u6210\u529f")},children:(0,Kg.jsx)(iP,{type:k?"iconsuo":"icona-huaban11",style:{color:"#7D8295 "}})})})]}),v&&(0,Kg.jsx)(Q1,{asset:v,onBlur:g})]})},i2=(0,hp.Pi)(t2),a2=e=>{var t=e.data,i=(0,r.useState)(!1),a=(0,n.Z)(i,2),o=a[0],s=a[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(i2,(0,u.Z)((0,u.Z)({},e),{},{onCollapsed:()=>s(!o),collapsed:o})),ti(t)&&(0,Kg.jsx)(o2,{assets:t.assets,className:hb()("layer-list-chidren",{"layer-list-chidren-collapsed":o})})]})},n2=(0,hp.Pi)(a2),r2=e=>{var t=e.assets,i=e.className,a=(0,dg.Z)([...t],(e=>-e.transform.zindex)),n=e=>{var t=e.source,i=e.destination;if(i&&t){var n,r,o=t.index,s=i.index,l=a[o],c=a[s];if(th("LayerModal_05",{action_label:l.meta.type}),(null===(n=l.parent)||void 0===n?void 0:n.id)===(null===(r=c.parent)||void 0===r?void 0:r.id)){var d=l.transform.zindex,u=c.transform.zindex;J_({direction:d>u?"down":"up",zindex:u,asset:l})}}};return(0,Kg.jsx)(X1.Z5,{onDragEnd:n,children:(0,Kg.jsx)(X1.bK,{droppableId:"droppable",children:(e,t)=>(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({},e.droppableProps),{},{ref:e.innerRef,className:i,children:[a.map(((e,t)=>(0,Kg.jsx)(X1._l,{draggableId:"".concat(e.meta.id),index:t,isDragDisabled:e.meta.isBackground,children:(t,i)=>(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)((0,u.Z)({ref:t.innerRef},t.draggableProps),t.dragHandleProps),{},{style:t.draggableProps.style,children:(0,Kg.jsx)(n2,{data:e})}))},e.meta.id))),e.placeholder]}))})})},o2=(0,hp.Pi)(r2),s2=()=>{var e=Dw();return(0,Kg.jsxs)("div",{className:"layer-drag",children:[(0,Kg.jsx)(G1,{}),(0,Kg.jsx)("div",{className:"layer-drag-list",children:(0,Kg.jsx)(o2,{assets:e})})]})},l2=(0,hp.Pi)(s2);function c2(e){var t,i,a=e.title,r=e.children,o=e.visible,s=e.onCancel,l=(e.onOk,e.width),c=e.style,d=e.className,p=e.defaultPosition,v=void 0===p?{right:50,top:100}:p,m=(0,yp.Z)(e,["title","children","visible","onCancel","onOk","width","style","className","defaultPosition"]),h=(0,dx.Z)(v),f=(0,n.Z)(h,2),g=f[0],x=f[1],y={width:null!==(t=null!==l&&void 0!==l?l:null===c||void 0===c?void 0:c.width)&&void 0!==t?t:220,height:null!==(i=null===c||void 0===c?void 0:c.height)&&void 0!==i?i:615},b=(0,dx.Z)(v),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=(0,dx.Z)(y),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=window.innerHeight-Number(Z.height),S=window.innerWidth-Number(null===Z||void 0===Z?void 0:Z.width);function I(e){Ph(e),e.preventDefault(),Fh(e,((e,t)=>{var i=j.right,a=j.top;i-=e,a+=t,a<0?a=0:a>N&&(a=N),i<0?i=0:i>S&&(i=S),w({right:i,top:a}),x({right:i,top:a})}))}function A(e){Ph(e),e.preventDefault(),Fh(e,((e,t)=>{var i=Z.height;i=t+Number(i),i<100&&(i=100),i>850&&(i=850),C({height:i})}))}function P(e,t){e.preventDefault(),Fh(e,((e,i)=>{var a=Z.width;if(!(e>80)){if("right"===t){a=e+Number(a);var n=Math.min(g.right,j.right-e);if(g.right===n&&(n-=e),a>=300&&e>0||a<=220)return;w({right:n})}else a=-e+Number(a);a<y.width&&(a=y.width),a>300&&(a=300),C({width:a})}}))}return o?Ty().createPortal((0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:"xiudodo-dragable-modal ".concat(d),style:(0,u.Z)((0,u.Z)((0,u.Z)((0,u.Z)({minHeight:100,width:l},c),Z),j),{},{boxShadow:"0px 2px 4px 0px rgba(226, 199, 199, 0.5)"})},m),{},{children:[(0,Kg.jsxs)("div",{className:"xiudodo-dragable-modal-header",onMouseDown:I,children:[(0,Kg.jsx)("div",{className:"xiudodo-dragable-modal-title",children:a}),(0,Kg.jsx)("div",{className:"xiudodo-dragable-modal-close",onClick:s,children:(0,Kg.jsx)(EM.Z,{})})]}),r,(0,Kg.jsx)("div",{className:"xiudodo-dragable-modal-resize-bottom",onMouseDown:A}),(0,Kg.jsx)("div",{className:"xiudodo-dragable-modal-resize-left",onMouseDown:e=>{P(e,"left")}}),(0,Kg.jsx)("div",{className:"xiudodo-dragable-modal-resize-right",onMouseDown:e=>{P(e,"right")}})]})),document.getElementById("xiudodo")):null}function d2(e){e.className,(0,yp.Z)(e,["className"]);var t=af(),i=t.value,a=(t.open,t.close),n=nM(),r=n.isPlaying;return(0,Kg.jsx)(c2,{title:"\u56fe\u5c42",visible:Boolean(i)&&!r,onCancel:a,style:{width:220,height:615,background:"#262E48"},children:(0,Kg.jsx)(l2,{})})}var u2=i(54885),p2=i.n(u2),v2=e=>{var t,i=e.folderId,a=e.onSuccess,o=Cf(),s=o.leftSideInfo,l=(null===(t=s.submenu)||void 0===t?void 0:t.split("/"))||[],c=(0,dx.Z)({time:null,status:!1}),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,DI.ZP)(YO,{manual:!0,pollingInterval:2e3,onSuccess:e=>{e.last_upload_time!==u.time?(p({status:!0,time:e.last_upload_time}),a()):p({status:!1})}}),m=(0,DI.ZP)(HO,{manual:!0,onSuccess:e=>{p({time:e.last_upload_time}),v.run()},onError:e=>{console.log(e)}}),h=m.data,f=m.run;return(0,r.useEffect)((()=>(f(i),()=>{v.cancel()})),[l[1]]),(0,Kg.jsxs)("div",{className:p2().wapper,children:[(0,Kg.jsx)("div",{className:p2().title,children:"\u5fae\u4fe1\u201c\u626b\u4e00\u626b\u201d\u4e0a\u4f20\u624b\u673a\u6587\u4ef6"}),(0,Kg.jsx)("div",{className:p2().QRcode,children:(null===h||void 0===h?void 0:h.page_url)&&(0,Kg.jsx)(i$.ZP,{value:h.page_url})})]})};function m2(e){var t=e.children,i=(0,yp.Z)(e,["children"]),a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=NJ(),d=c.checkLoginStatus,p=Yf(),v=p.showBindPhoneModal;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(tE.Z,{overlayClassName:p2().popover,visible:s,placement:"bottomRight",trigger:"click",onVisibleChange:e=>{d()?l(!1):1!==lA().bind_phone?(l(!1),v()):l(e)},content:(0,Kg.jsx)(v2,(0,u.Z)({},i)),getPopupContainer:e=>e.parentNode,children:t})})}function h2(e){var t=e.amount,i=e.onDelete,a=e.onCancel,n=e.onSelectAll,r=e.isSelectedAll,o=(0,yp.Z)(e,["amount","onDelete","onCancel","onSelectAll","isSelectedAll"]);return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({style:{padding:"6px 16px",backgroundColor:"#fff",display:t?"flex":"none",justifyContent:"space-between",alignItems:"center"}},o),{},{children:[(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(WP.Z,{onChange:e=>{n(e.target.checked)},checked:r,children:(0,Kg.jsxs)("span",{style:{color:"#262E48",fontSize:12},children:["\u5df2\u9009",(0,Kg.jsx)("span",{style:{color:"#8676e8"},children:t}),"\u4e2a"]})}),(0,Kg.jsx)(IR.Z,{type:"vertical"}),(0,Kg.jsx)(xF.Z,{title:"\u6279\u91cf\u5220\u9664",overlayClassName:"tooltip-overlayClassName",getPopupContainer:()=>document.getElementById("xiudodo"),children:(0,Kg.jsxs)("span",{className:"file-action-deleted",onClick:()=>{Km("action_upload_delete"),nA.Z.confirm({title:"\u5220\u9664\u6587\u4ef6",content:(0,Kg.jsxs)("p",{children:["\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684",(0,Kg.jsx)("span",{style:{fontSize:16,color:"#8676e8",fontWeight:"bold",padding:"0 6px"},children:t}),"\u4e2a\u6587\u4ef6\uff1f"]}),okText:"\u786e\u5b9a",cancelText:"\u518d\u60f3\u60f3",onOk:i})},children:[(0,Kg.jsx)(iP,{type:"iconshanchu"}),(0,Kg.jsx)("span",{children:" \u5220\u9664"})]})})]}),(0,Kg.jsx)(xF.Z,{title:"\u9000\u51fa\u5220\u9664",overlayClassName:"tooltip-overlayClassName",children:(0,Kg.jsx)("span",{className:"file-selected-exit",onClick:a,children:"\u9000\u51fa"})})]}))}function f2(e){e.setMemoryState;var t=e.data,i=(0,yp.Z)(e,["setMemoryState","data"]),a=oA(),n=a.id,r=t||{},o=r.useMemory,s=void 0===o?0:o,l=r.maxMemory,c=void 0===l?0:l,d=r.unit,p=(r.maxMemoryByte,r.useMemoryByte,sf()),v=p.open;return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:"upload-memory"},i),{},{children:[(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Kg.jsxs)("span",{children:["\u5b58\u50a8\u7a7a\u95f4\uff1a",(0,Kg.jsxs)("span",{className:"useMemory",children:[s,d]}),"/ ",c,d]}),(0,Kg.jsx)("span",{hidden:-1===n,className:"upload-memory-recharge",onClick:v,children:"\u6269\u5bb9"})]}),(0,Kg.jsx)(tM.Z,{percent:s/c*100,showInfo:!1,trailColor:"#fff",strokeColor:"#5646ED"})]}))}var g2=f2;function x2(e){var t=e.children,i=e.onFinish,a=e.contentClassName,r=e.deps,o=(0,pL.L)((()=>({accept:"__NATIVE_FILE__",collect:e=>{var t=e.isOver({shallow:!0});return{isOverContent:t}}}))),s=(0,n.Z)(o,2),l=s[0].isOverContent,c=s[1],d=(0,pL.L)((()=>({accept:"__NATIVE_FILE__",collect:e=>{var t=e.isOver({shallow:!0});return{isOverMask:t}},drop(e){i(e.files)}})),r),u=(0,n.Z)(d,2),p=u[0].isOverMask,v=u[1];return(0,Kg.jsxs)("div",{className:hb()("drag-upload",{"upload-file-dragenter":p||l}),children:[(0,Kg.jsxs)("div",{className:"dragenter-mask",ref:v,children:[(0,Kg.jsx)("div",{className:"drag-upload-icon",children:(0,Kg.jsx)(XP.Z,{style:{fontSize:24}})}),(0,Kg.jsx)("p",{className:"dragenter-desc",children:"\u62d6\u653e\u5230\u6b64\u5904\u4ee5\u4e0a\u4f20\u6587\u4ef6"})]}),(0,Kg.jsx)("div",{className:hb()("drag-upload-content",a),ref:c,style:{pointerEvents:p||l?"none":"auto"},children:t})]})}function y2(e){var t=e.beforeUpload,i=NJ(),a=i.checkLoginStatus;return(0,Kg.jsxs)("div",{className:"file-list-empty",children:[(0,Kg.jsx)(qW.Z,{multiple:!0,showUploadList:!1,beforeUpload:t,children:(0,Kg.jsx)("div",{className:"upload-file-drag-icon",onClick:e=>{var t;a()?Ph(e):1!==(null===(t=lA())||void 0===t?void 0:t.bind_phone)&&(Hf(),Ph(e))},children:(0,Kg.jsx)(XP.Z,{style:{fontSize:24}})})}),(0,Kg.jsx)("p",{children:"\u62d6\u62fd\u6587\u4ef6\u5230\u6b64\u533a\u57df\u4ee5\u4e0a\u4f20"})]})}function b2(e,t){var i=e.type,a=e.beforeUpload,n=e.fileList,r=e.itemProps,o=e.onChange,s=e.dragUploadDeps,l=(0,yp.Z)(e,["type","beforeUpload","fileList","itemProps","onChange","dragUploadDeps"]),c=NJ(),d=c.checkLoginStatus;function p(e){var t;Km("action_upload_drag"),d()||(1===(null===(t=lA())||void 0===t?void 0:t.bind_phone)?a(e[0],e):Hf())}return(0,Kg.jsx)(x2,{deps:s,onFinish:p,children:(0,Kg.jsx)(yE,(0,u.Z)((0,u.Z)({ref:t},l),{},{wrapStyle:{position:"absolute",top:0},isEmpty:!1,skeleton:{rows:3},onChange:o,children:e=>{var t=e.list,o=[...n,...t];return o.length<1?(0,Kg.jsx)(y2,{beforeUpload:a}):(0,Kg.jsx)("div",{className:"user-upload-list",style:{position:"relative",height:"100%"},children:o.map((e=>{var t,a;return(0,Kg.jsx)(_K,(0,u.Z)({data:e,selected:(null===(a=r.selectFile)||void 0===a?void 0:a.findIndex((t=>t.id===e.id)))>-1},r),"uploader-".concat(i,"-").concat(null!==(t=e.uid)&&void 0!==t?t:e.id))}))})}}))})}var _2=(0,r.memo)((0,r.forwardRef)(b2)),j2=(i(37678),i(67125));function w2(e){var t=e.folderId,i=e.onChange,a=(0,DI.ZP)(ND,{manual:!0,onSuccess(e){}}),n=a.run,o=a.data,s=void 0===o?[]:o,l=[{title:"\u5168\u90e8",id:"0"}].concat(s);return(0,r.useEffect)((()=>{t&&n(t)}),[t]),(0,Kg.jsx)("div",{className:"upload-file-bread-menu",children:(0,Kg.jsx)(j2.Z,{children:l.map((e=>(0,Kg.jsx)(j2.Z.Item,{onClick:()=>i(e.id),children:(0,Kg.jsx)("span",{className:"upload-file-bread-menu-item",children:e.title})},"breadcrumb-".concat(e.id))))})})}var k2={image:{label:"\u56fe\u7247",size:10,accept:["jpg","png"]},video:{label:"\u89c6\u9891",size:100,accept:["mp4","mov"]},audio:{label:"\u97f3\u9891",size:50,accept:["mp3","m4a"]}},T2=e=>{var t=e.accept,i=[];for(var a in k2){var n=k2[a];t.includes(a)&&i.push((0,Kg.jsxs)("p",{children:[n.label,"\uff1a\u53ef\u4e0a\u4f20",(0,Kg.jsxs)("span",{className:"upload-tip-size",children:[n.size,"M"]}),"\u4ee5\u5185\u7684",n.accept.join("\uff0c"),"\u683c\u5f0f"]},a))}return(0,Kg.jsxs)(Kg.Fragment,{children:[" ",i]})},Z2=e=>{var t=e.tip,i=e.style,a=e.className;return(0,Kg.jsx)(xF.Z,{placement:"bottom",overlayClassName:hb()("upload-help-tips",a),getTooltipContainer:()=>document.getElementById("xiudodo"),title:t,children:(0,Kg.jsx)("div",{className:"upload-help-tips-icon",style:i,children:(0,Kg.jsx)(iP,{type:"iconhelp"})})})},C2={image:[],video:[],audio:[]},N2=[{key:"all",name:"\u5168\u90e8",request:_D},{key:"image",name:"\u56fe\u7247",request:jD},{key:"video",name:"\u89c6\u9891",request:jD},{key:"audio",name:"\u97f3\u9891",request:jD}];function S2(e){return{title:e.name,type:1,id:e.uid,uid:e.uid,fileInfo:{state:0,mime_type:e.type,file:e}}}function I2(e){var t=e.type,i=e.Bottom,a={},o=NJ(),s=o.checkLoginStatus,l=lA(),c=Vf(),v=c.value,h=(0,DI.ZP)(bD,{manual:!0}),f=h.data,g=void 0===f?{}:f,x=h.run;(0,r.useEffect)((()=>{var e=s();e||x()}),[l.id]);var y=Qf(),b=y.pasteStatus,_=y.setPasteStatus,j=(0,r.useState)("0"),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=(0,r.useState)([]),C=(0,n.Z)(Z,2),N=(C[0],C[1]),S=(0,r.useState)([]),I=(0,n.Z)(S,2),A=I[0],P=I[1],M=(0,r.useState)("all"),E=(0,n.Z)(M,2),L=E[0],D=E[1],R=(0,r.useState)([]),z=(0,n.Z)(R,2),F=z[0],O=z[1],B=(0,dx.Z)((0,u.Z)({},C2)),W=(0,n.Z)(B,2),V=W[0],U=W[1],G=[].concat(V.image,V.video,V.audio);function X(){U({image:[],video:[],audio:[]})}var q=(0,d.Z)((e=>{for(var t=(0,sh.Z)(e,G,"uid"),i=g.maxMemoryByte,a=void 0===i?0:i,n=g.useMemoryByte,r=void 0===n?0:n,o={},s=(0,u.Z)({},C2),l=0;l<t.length;l++){var c=t[l];if(c.uid||(c.uid="timeStamp-".concat(c.lastModified)),r+=c.size,r>a){xp.default.info({content:"\u5b58\u50a8\u7a7a\u95f4\u5df2\u6ee1",maxCount:1});break}var d=xK(c.type);if("all"===d){xp.default.info("\u4e0d\u652f\u6301\u8be5\u683c\u5f0f".concat(c.type,"\u6587\u4ef6\u7c7b\u578b"));break}Object.assign(o,{[d]:d});var p=S2(c);s[d]=[p].concat(s[d])}if("0"===k){var v=Object.keys(o);v.length>1?D("all"):v[0]&&D(v[0])}setTimeout((()=>{U((e=>{var t=e;return Object.keys(s).forEach((e=>{t[e]=s[e].concat(t[e])})),t}))}))}),200);function H(e,t){return s()||(1!==(null===l||void 0===l?void 0:l.bind_phone)?Hf():q(t)),!1}function Y(){Object.keys(a).forEach((e=>{var t;null===(t=a[e])||void 0===t||t.reload()})),x()}function K(){return Q.apply(this,arguments)}function Q(){return Q=(0,p.Z)(m().mark((function e(){var t;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t={},"all"!==L){e.next=7;break}return e.next=4,ZD(A.map((e=>e.id)),k);case 4:t=e.sent,e.next=10;break;case 7:return e.next=9,CD(A.map((e=>e.id)));case 9:t=e.sent;case 10:0===t.code&&(xp.default.success("\u5220\u9664\u6210\u529f"),P([]),X(),Y());case 11:case"end":return e.stop()}}),e)}))),Q.apply(this,arguments)}function J(e){var t=e.file,i=e.checked,a=t.id,n=A;if(i){if("simple"===v){var r=Dw().filter((e=>["image","pic","video","videoE"].includes(e.meta.type)&&!e.meta.isBackground));if(A.length>=r.length)return void xp.default.info("\u4e0d\u80fd\u518d\u9009\u5566")}n=n.concat([t])}else n=A.filter((e=>e.id!==a));P(n)}var $=(0,DI.ZP)(SD,{manual:!0,pollingInterval:1e3,onSuccess(e){var t=[];e.forEach((e=>{2===e.state&&t.push(e)})),U((t=>(Object.keys(t).forEach((i=>{t[i].forEach((t=>{e.forEach((e=>{e.file_id===t.file_id&&1===e.state&&Object.assign(t.fileInfo,(0,u.Z)({state:1},e.fileInfo))}))}))})),t))),N(t),t.length||te()}}),ee=$.run,te=$.cancel;function ie(e){te(),N((t=>{var i=t.concat([{file_id:e,state:2}]),a=[],n=i.filter((e=>{if(2===e.state)return a.push(e.file_id),e}));return a.length&&ee(a),n}))}function ae(e,t,i){U((a=>{var n=a[t],r=n.findIndex((t=>t.id===e));return n[r]&&(i.duration&&Object.assign(n[r].fileInfo,{values:{duration:i.duration}}),i.state&&Object.assign(n[r].fileInfo,{state:i.state}),i.width&&Object.assign(n[r].fileInfo,{height:i.height,width:i.width}),i.poster&&Object.assign(n[r].fileInfo,{cover_path:i.poster,small_cover_path:i.poster}),i.progress&&Object.assign(n[r].fileInfo,{progress:i.progress}),i.src&&Object.assign(n[r].fileInfo,{transcode:{sd:i.src,mp3:i.src}}),i.transcode&&Object.assign(n[r].fileInfo,{transcode:i.transcode}),i.values&&Object.assign(n[r].fileInfo,{values:i.values}),i.file_id&&Object.assign(n[r],{file_id:i.file_id,id:i.id}),Object.assign(a,{[t]:n})),a}))}function ne(e){X(),T(e)}function re(e){P(e?[..."all"===L?G:V[L],...a[L].getData()]:[])}return(0,r.useEffect)((()=>{2===b&&(Y(),_(-1))}),[b]),(0,Kg.jsxs)(rE,{refresh:!0,wrapClassName:"upload-wrap",bottom:i?(0,Kg.jsx)(i,{selected:A,onSuccess:()=>P([])}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(h2,{amount:A.length,onDelete:()=>K(),onCancel:()=>P([]),onSelectAll:re,isSelectedAll:[...F,..."all"===L?G:V[L]].length===A.length}),!A.length&&(0,Kg.jsx)(g2,{data:g})]}),children:[(0,Kg.jsxs)("div",{className:"upload-buttons",children:[(0,Kg.jsx)(qW.Z,{beforeUpload:H,multiple:!0,showUploadList:!1,children:(0,Kg.jsxs)(CS.Z,{className:"upload-button-item",type:"primary",onClick:e=>{Km("action_upload"),s()?Ph(e):1!==(null===l||void 0===l?void 0:l.bind_phone)&&(Ph(e),Hf())},children:["\u7535\u8111\u4e0a\u4f20",(0,Kg.jsx)(Z2,{tip:(0,Kg.jsx)(T2,{accept:["video","audio","image"]})})]})}),(0,Kg.jsx)(m2,{onSuccess:()=>Y(),folderId:k,children:(0,Kg.jsxs)(CS.Z,{className:"upload-button-item",onClick:()=>Km("action_upload_mobile"),children:["\u624b\u673a\u4e0a\u4f20",(0,Kg.jsx)(Z2,{tip:(0,Kg.jsx)(T2,{accept:["video","image"]}),style:{backgroundColor:"#5A4CDB",color:"#fff"}})]})})]}),(0,Kg.jsx)(YP.Z,{activeKey:L,destroyInactiveTabPane:!0,onChange:e=>{X(),D(e),P([]),T("0")},children:N2.map((e=>(0,Kg.jsxs)(YP.Z.TabPane,{tab:e.name,children:["all"===e.key&&"0"!==k&&(0,Kg.jsx)(w2,{folderId:k,onChange:ne}),(0,Kg.jsx)(_2,{ref:t=>{t&&(a[e.key]=t)},type:e.key,request:e.request,params:{folderId:"all"===e.key?k:0,type:e.key},beforeUpload:H,fileList:"all"===L?G:V[L],itemProps:{selectable:"replace"!==t,selectFile:A,selectedChange:J,onFolderClick:ne,onTranscodingFilesChange:ie,changeFileState:ae,folderId:k},onChange:O,dragUploadDeps:[null===g||void 0===g?void 0:g.maxMemoryByte]})]},e.key)))})]})}var A2=i(19688),P2=i.n(A2),M2=e=>{var t=e.data,i=e.handleReload,a=()=>{nA.Z.confirm({title:"\u5220\u9664\u6587\u4ef6",content:"\u5220\u9664\u540e\u5c06\u65e0\u6cd5\u627e\u56de\uff0c\u786e\u5b9a\u8981\u5220\u9664\u8be5\u6587\u4ef6\u561b\uff01",cancelText:"\u53d6\u6d88",okText:"\u786e\u8ba4",onOk:()=>{var e=t.id;CD([e]).then((e=>{0===e.code&&(xp.default.success("\u5220\u9664\u6210\u529f"),i&&i())})),Km("concise19")},onCancel:()=>{}})},n=(0,Kg.jsx)(SH.Z,{children:(0,Kg.jsx)(SH.Z.Item,{onClick:a,children:"\u5220\u9664"})});return(0,Kg.jsx)(NH.Z,{trigger:["hover"],overlay:n,placement:"bottomLeft",overlayClassName:"moreDropdown",children:(0,Kg.jsx)("span",{className:hb()({[P2().moreDropdown]:!0}),onClick:()=>{Km("concise20")},children:(0,Kg.jsx)(iP,{type:"icongengduo_tianchong",className:P2().itemIcon})})})},E2=M2,L2=()=>{var e=Xf(),t=e.value.selectedList,i=e.updateSelectedList,a=Zv(),n=a.filter((e=>!e.replaced)),r=e=>{var a=e.resId,r=e.ufsId,o=[...t],s=o.findIndex((e=>"".concat(e.resId).concat(e.ufsId)==="".concat(a).concat(r)));if(-1===s){if(n.length===o.length)return void xp.default.warn("\u6279\u91cf\u66ff\u6362\u56fe\u7247\u5df2\u8fbe\u5230\u4e0a\u9650\uff01");o.push(e)}else o.splice(s,1);i(o)};return r},D2=()=>{var e=Xf(),t=e.value.selectedList,i=e.updateSelectedList,a=Uv(),n=a.filter((e=>!e.replaced)),r=e=>{var a=e.resId,r=e.ufsId,o=[...t],s=o.findIndex((e=>"".concat(e.resId).concat(e.ufsId)==="".concat(a).concat(r)));if(-1===s){if(n.length===o.length)return void xp.default.warn("\u6279\u91cf\u66ff\u6362\u56fe\u7247\u5df2\u8fbe\u5230\u4e0a\u9650\uff01");o.push(e)}else o.splice(s,1);i(o)};return r};function R2(){return(0,Kg.jsx)(Kg.Fragment,{})}function z2(e){return(0,r.useMemo)((()=>{switch(e){case"mask":case"SVG":case"pic":case"image":return LE;case"module":case"video":case"videoE":return UM;case"lottie":return GE;case"element":return LE;default:return R2}}),[e])}var F2=(0,hp.Pi)((e=>{var t=e.data,i=e.type,a=e.style,n=e.children,o=Xf(),s=o.value,l=s.type,c=s.selectedList,d=s.replaceIngAsset,p=o.close,v=og(),m=v.isOneKeyReplace,h=L2(),f=D2(),g=d&&Yt(d),x=null!==g&&void 0!==g?g:xu(),y=t.rt_total_time,b=t.rt_url,_=t.rt_preview_url,j=iK(),w=j.onVideoReplace,k=j.onImgReplace,T=Rj(),Z=T.endClip,C=nK({data:(0,u.Z)((0,u.Z)({},t),{},{duration:y}),meta:{type:i}}),N=C.check,S=C.state,I=C.closeClipModal,A=z2(i),P=["video","videoE"].includes(i),M="replace-batch"===l,E="replace-audio"===l,L=(0,r.useMemo)((()=>{var e=c.findIndex((e=>"".concat(e.resId).concat(e.ufsId)==="".concat(t.resId).concat(t.ufsId)));return e+1}),[c,t]);function D(){I(),p(),Z()}function R(){if("modal-replace"!==l)"image"===i?k(t,(()=>{D()})):N();else{var e={meta:{type:i},attribute:t,transform:{}};Ng({params:e,asset:x}),D()}}function z(e){t&&w(e,t,(()=>{D()}))}return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(tK,{onCancel:I,visible:S.visible,contentProps:{data:{duration:y,preview_video:b,height:t.height,width:t.width},actionType:"addAsset",onOk:z}}),(0,Kg.jsxs)("div",{className:hb()(P2().elementWarp),style:a,onClick:()=>{M?m?f(t):h(t):(P&&"modal-replace"!==l?N():R(),Km("concise15"))},children:[y&&P&&"t_b_replace"===l&&(0,Kg.jsx)("div",{className:P2().elementDuration,children:Th(parseInt("".concat(y/1e3),10))}),!!L&&(0,Kg.jsx)("div",{className:P2().selector,children:L}),!M&&!E&&(0,Kg.jsx)("div",{className:P2().elementReplace,onClick:()=>{P&&"modal-replace"!==l?N():R(),Km("concise15")},children:"t_b_add"===l||ai(x)&&(null===x||void 0===x||!x.assets||0==(null===x||void 0===x?void 0:x.assets.length))?"\u6dfb\u52a0":"\u66ff\u6362"}),n||(0,Kg.jsx)(A,(0,u.Z)({poster:_,preview:_,path:b,src:b,loop:!0},t))]})]})})),O2=i(46787),B2=i.n(O2),W2=i(71088),V2=i.n(W2);function U2(e){var t=e.bindAddAudio,i=e.value,a=e.clickAwayTarget,o=e.volume,s=e.playingId,l=e.setPlayingId,c=e.deleteMusicReq,d=e.reload,p=e.bindReplaceAudio,v=e.className,m=e.isReplace,h=i.source_type,f=void 0===h?1:h,g=i.scan_flag,x=i.fileState,y=i.progress,b=Vf(),_=b.value,j=zv(),w=j.activeAudio,k=Eq(),T=(0,r.useRef)(null),Z=(0,r.useState)(!1),C=(0,n.Z)(Z,2),N=C[0],S=C[1],I=(0,r.useState)(!1),A=(0,n.Z)(I,2),P=A[0],M=A[1],E=(0,r.useState)(0),L=(0,n.Z)(E,2),D=L[0],R=L[1],z=(0,r.useRef)(null),F=(0,r.useRef)(null),O=Number(i.total_time),B=nM(),W=B.isPlaying,V=B.pauseVideo,U=(0,r.useState)({}),G=(0,n.Z)(U,2),X=G[0],q=G[1],H=e=>{e.stopPropagation(),Km("action_music_play"),F.current&&(P?F.current.pause():(F.current.play(D),V()),l&&s!==i.id&&l(i.id),M(!P))};function Y(){var e;null===(e=F.current)||void 0===e||e.stop(),M(!1),R(0)}(0,aM.Z)((e=>{Y()}),null!==a&&void 0!==a?a:T),(0,r.useEffect)((()=>{o&&F.current&&F.current.setVolume(o)}),[o]),(0,r.useEffect)((()=>{l&&s!==i.id&&Y()}),[s]),(0,r.useEffect)((()=>{1e3*D>=O-1&&Y()}),[D]),(0,r.useEffect)((()=>{W&&P&&Y()}),[W]);var K=()=>Math.round(1e3*D/O*100);function Q(){z.current&&(F.current=new iM(z.current,0,O,R))}var J=e=>{CD([e]).then((e=>{0===e.code&&xp.default.success("\u5220\u9664\u6210\u529f"),d&&d()}))};function $(){return{rt_title:i.title,resId:i.gid,type:2,rt_url:i.preview,volume:60,isLoop:!1,ufsId:i.ufsId||void 0,rt_duration:Number(i.total_time),rt_sourceType:f}}var ee=e=>{var i=$(),a=rh(f,(0,u.Z)((0,u.Z)({},i),{},{startTime:e}));Object.assign(i,a),t&&t(i),Y(),V()},te={offsetX:0,offsetY:0},ie=(0,uL.c)((()=>({type:fP,previewOptions:te,item:{mousePosition:X,add:e=>{var t=e.relativeX/k*1e3;ee(t),Km(3===Number(f)?"drag_add_004":"drag_add_005")}},collect:e=>({isDragging:!!e.isDragging()})})),[X,k]),ae=(0,n.Z)(ie,3),ne=ae[0],re=ae[1],oe=ae[2];(0,r.useEffect)((()=>{oe((0,vL.r)(),{captureDraggingState:!0})}),[X]);var se=(0,Kg.jsx)(uN.Z,{style:{fontSize:24},spin:!0}),le=["","\u3010\u5f55\u97f3\u3011"],ce=()=>m?(0,Kg.jsx)("div",{className:V2()["action-btn"],onClick:()=>{ee()},children:"\u66ff\u6362"}):"simple"===_&&w?(0,Kg.jsx)("div",{className:V2()["action-btn"],onClick:()=>{var e=$();Object.assign(e,{startTime:w.startTime,endTime:Math.min(w.endTime,w.startTime+i.total_time)}),p&&p(e,null===w||void 0===w?void 0:w.rt_id)},children:"\u66ff\u6362"}):null,de=()=>{m||"simple"===_&&w||(ee(),Km(3===f?"mike_audio_005":"music_mix_add"))},ue=(e,t)=>(0,Kg.jsxs)("div",{className:V2()["music-list-scan_flag"],children:[(0,Kg.jsx)("div",{style:{background:e},className:V2().scan_flag_icon,children:"!"}),t]}),pe=()=>{if(!y||2===x||100===y)return null;var e=y<99?"\u4e0a\u4f20\u4e2d...":"\u4e0a\u4f20\u6210\u529f";return(0,Kg.jsxs)("div",{className:V2()["music-list-scan_process"],children:[(0,Kg.jsx)("div",{className:V2()["process-text"],children:e}),(0,Kg.jsx)(tM.Z,{percent:y})]})},ve=K();return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(dN.Z,{indicator:se,spinning:2===(null===i||void 0===i?void 0:i.status),children:(0,Kg.jsxs)("div",{id:i.id,ref:re,onMouseDown:e=>{var t=document.getElementById(i.id),a=null===t||void 0===t?void 0:t.getBoundingClientRect();q({x:null===a||void 0===a?void 0:a.x,y:null===a||void 0===a?void 0:a.y})},className:hb()(V2()["music-list-item"],v),style:{opacity:ne.isDragging?0:1},children:[3===g&&ue("#FF8A30","\u6d89\u5acc\u8fdd\u89c4\u8fdd\u7eaa"),2===x&&ue("#FF8A30","\u8f6c\u7801\u4e2d...."),(0,Kg.jsx)(pe,{}),(0,Kg.jsxs)("div",{className:V2()["music-list-item-wrap"],ref:T,onMouseEnter:()=>{S(!0)},onClick:de,children:[N&&(0,Kg.jsx)("audio",{ref:z,src:i.preview,loop:!1,onCanPlay:Q,children:"\u7cdf\u7cd5\u4e86\u8001\u94c1\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301audio,\u8bf7\u5c1d\u8bd5\u5347\u7ea7"}),(0,Kg.jsxs)("div",{className:V2()["music-list-item-pic"],children:[(0,Kg.jsx)(tM.Z,{type:"circle",className:V2()["play-progress"],showInfo:!1,percent:ve,strokeColor:"#5A4CDB",trailColor:"transparent"}),(0,Kg.jsxs)("div",{className:hb()(V2()["play-wrap"],{[V2()["play-wrap-playing"]]:P||ve>0}),onClick:H,children:[(0,Kg.jsx)("div",{className:V2()["play-wrap-mask"]}),null!==i&&void 0!==i&&i.cover_url?(0,Kg.jsx)("img",{alt:"",src:i.cover_url}):(0,Kg.jsx)("div",{className:V2()["music-list-item-defaultBg"],children:(0,Kg.jsx)(iP,{type:"yinle-6fejnlmk"})}),(0,Kg.jsx)(iP,{type:P?"iconzanting":"iconbofang",className:V2()["play-icon"]})]})]}),(0,Kg.jsxs)("div",{className:V2()["music-list-item-right"],children:[(0,Kg.jsx)("div",{className:V2()["music-list-item-top"],children:(0,Kg.jsxs)("div",{className:V2()["top-left"],children:[le[i.is_recording||0],RegExp(/mp3/).test(i.title)?i.title:"".concat(i.title,".mp3")]})}),(0,Kg.jsx)("div",{className:V2()["music-play-area"],children:(0,Kg.jsx)("div",{className:V2()["music-time"],children:Th(Number(i.total_time)/1e3)})})]}),(0,Kg.jsxs)("div",{className:hb()(V2()["music-list-item-action"]),children:[c&&(0,Kg.jsx)("div",{className:V2()["del-btn"],onClick:e=>{Ph(e),J(i.id)},children:(0,Kg.jsx)(iP,{type:"iconicons8_trash"})}),0!==g&&3!==g&&ce()]})]},i.id)]})})})}var G2=(0,hp.Pi)(U2),X2=i(76978),q2=i.n(X2),H2=e=>{var t=e.data,i=Xf(),a=i.close,n=i.value.playId,r=i.setPlayId,o=oh(),s=o.bindSetBgAudios;return(0,Kg.jsx)("div",{className:q2().audioItem,children:(0,Kg.jsx)(G2,{value:t,className:q2().audioItemNode,isReplace:!0,bindAddAudio:e=>{s([Tk(e)]),a(),Km("concise22")},playingId:n,setPlayingId:r})})},Y2=(0,hp.Pi)(H2);function K2(e){var t=e.data,i=e.check,a=e.bindCheck,n=e.onTranscodingFilesChange,o=e.changeFileState,s=e.handleReload,l=e.folderId,c=e.setPhoneBindingShow,d=Xf(),p=d.value.type,v="replace-batch"===p,m="replace-audio"===p,h=t.fileInfo,f=t.scan_flag,g=xK(h.mime_type);function x(e){o(t.id,g,e)}var y=fK({folder_id:l,onSucceed:e=>{var t=100;2===e.fileInfo.state&&(t=99);var i=(0,u.Z)((0,u.Z)({},e.fileInfo),{},{state:e.fileInfo.state,progress:t,id:e.id,file_id:e.file_id,poster:e.fileInfo.cover_path,src:e.fileInfo.file_path});setTimeout((()=>{x(i)}),1e3)},setProgress(e){var t=e.progress;x({progress:t,state:3})},onError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isNotAllow,a=t.bindPhone;xp.default.error(null===e||void 0===e?void 0:e.msg),x({state:i?-2:-1,progress:100}),a&&(c(),uA(0))}}),b=y.uploadStat;(0,r.useEffect)((()=>{switch(h.state){case 0:lV(h.file,g,((e,t)=>{var i={width:t.width,height:t.height,poster:t.fileURL,duration:t.duration};e?b(h.file,l):Object.assign(i,{state:-1,progress:100}),x(i)}));break;case 2:n(t.file_id);break}}),[h.state]);var _={resId:"f".concat(t.file_id),ufsId:"f".concat(t.id)};function j(){return(0,u.Z)((0,u.Z)({},_),{},{width:h.width,height:h.height,picUrl:h.cover_path,rt_preview_url:h.cover_path,isUser:!0})}function w(){var e,t,i;return(0,u.Z)((0,u.Z)({},_),{},{rt_url:null===(e=h.transcode)||void 0===e?void 0:e.sd,rt_preview_url:h.cover_path,rt_frame_url:h.cover_path,rt_total_frame:30*parseInt(null===(t=h.values)||void 0===t?void 0:t.duration),rt_total_time:1e3*parseInt(null===(i=h.values)||void 0===i?void 0:i.duration),width:h.width,height:h.height,isUser:!0,volume:60,voiced:!0})}var k=()=>{var e,i,a;return{id:"f".concat(t.file_id),ufsId:"f".concat(t.id),preview:(null===(e=h.transcode)||void 0===e?void 0:e.mp3)||"",title:t.title,total_time:1e3*Number(null===(i=h.values)||void 0===i?void 0:i.duration)||"",url:(null===(a=h.transcode)||void 0===a?void 0:a.mp3)||"",source_type:1,status:1}},T="image"===g?j():w();return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)("div",{"aria-label":g,className:hb()(B2().fileItem,{[B2()["file-item-hover"]]:1===h.state}),children:[(0,Kg.jsxs)("div",{className:B2()["not-allow"],hidden:![3].includes(Number(f)),children:[(0,Kg.jsx)(VW.Z,{style:{fontSize:20}}),(0,Kg.jsx)("span",{children:"\u7d20\u6750\u6d89\u5acc\u8fdd\u89c4"})]}),!v&&!m&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:hb()(B2().checkboxItem,{[B2().checkboxItemActive]:i}),children:(0,Kg.jsx)(WP.Z,{checked:i,onChange:e=>{a(e,t.id),Km("concise18")}})}),(0,Kg.jsx)("div",{className:B2().moreDropdown,children:(0,Kg.jsx)(E2,{handleReload:s,data:t})})]}),(0,Kg.jsxs)("div",{className:hb()(B2()["file-item-content"]),children:[(0,Kg.jsx)(vK,{percent:h.progress,state:h.state,style:{width:"100%",height:"100%"},hidden:1===h.state||Object.keys(h).length<1}),"audio"===g?(0,Kg.jsx)(Y2,{data:k(),type:"local"}):(0,Kg.jsx)(F2,{data:T,type:"video"===g?"videoE":"image"})]})]})})}var Q2=(0,hp.Pi)(K2);function J2(e,t){var i=e.type,a=e.beforeUpload,o=e.fileList,s=e.setPhoneBindingShow,l=e.itemProps,c=e.clickUpload,d=e.handleDelete,p=e.dragUploadDeps,v=(0,yp.Z)(e,["type","beforeUpload","fileList","setPhoneBindingShow","itemProps","clickUpload","handleDelete","dragUploadDeps"]),m=(0,r.useState)([]),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=NJ(),y=x.checkLoginStatus,b=Xf(),_=(b.value.type,()=>{Km("concise17"),d(f),g([])}),j=(e,t)=>{if(e.target.checked){var i=t.map((e=>e.id));g(i)}else g([]);Km("concise16")},w=(e,t)=>{var i=JSON.parse(JSON.stringify(f));if(e.target.checked)i.push(t),g(i);else{var a=i.filter((e=>e!==t));g(a)}};return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(x2,{deps:p,onFinish:e=>{var t;Km("action_upload_drag"),y()||(1===(null===(t=lA())||void 0===t?void 0:t.bind_phone)?a(e[0],e):Hf())},children:(0,Kg.jsx)("div",{className:hb()(B2().uploadFileList),children:(0,Kg.jsx)(yE,(0,u.Z)((0,u.Z)({ref:t},v),{},{isEmpty:!1,skeleton:{rows:4,columns:4},children:e=>{var t=e.list,n=[...o,...t];return(null===n||void 0===n?void 0:n.length)>0?(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:B2().uploadFileListCheckAll,hidden:0===(null===f||void 0===f?void 0:f.length),children:[(0,Kg.jsxs)("div",{className:B2().checkAllLeft,children:[(0,Kg.jsx)(WP.Z,{checked:(null===f||void 0===f?void 0:f.length)===(null===n||void 0===n?void 0:n.length),onChange:e=>j(e,n)}),(0,Kg.jsxs)("span",{className:B2().checkAllNum,children:["\u5df2\u9009 ",null===f||void 0===f?void 0:f.length," \u4e2a"]}),(0,Kg.jsx)(xF.Z,{title:"\u6279\u91cf\u5220\u9664",children:(0,Kg.jsxs)("span",{className:B2().checkAllDel,onClick:()=>{Km("action_upload_delete"),nA.Z.confirm({title:"\u5220\u9664\u6587\u4ef6",content:(0,Kg.jsxs)("p",{children:["\u786e\u5b9a\u8981\u5220\u9664\u9009\u4e2d\u7684",(0,Kg.jsx)("span",{style:{fontSize:16,color:"#8676e8",fontWeight:"bold",padding:"0 6px"},children:null===f||void 0===f?void 0:f.length}),"\u4e2a\u6587\u4ef6\uff1f"]}),okText:"\u786e\u5b9a",cancelText:"\u518d\u60f3\u60f3",onOk:_})},children:[(0,Kg.jsx)(iP,{type:"iconshanchu",style:{fontSize:"16px",marginRight:"4px"}}),"\u5220\u9664"]})})]}),(0,Kg.jsx)("span",{className:B2().checkAllOut,onClick:()=>{g([]),Km("concise21")},children:"\u9000\u51fa"})]}),(0,Kg.jsx)("div",{"aria-label":i,className:B2().uploadList,style:{position:"relative",height:"100%"},children:n.map(((e,t)=>(0,Kg.jsx)(Q2,(0,u.Z)({data:e,setPhoneBindingShow:s,check:f.indexOf(null===e||void 0===e?void 0:e.id)>-1,bindCheck:w},l),"uploader-".concat(i,"-").concat(null===e||void 0===e?void 0:e.id))))})]}):(0,Kg.jsxs)("div",{className:B2().uploadEmpty,children:[(0,Kg.jsx)("img",{className:B2().uploadEmptyImg,src:(0,fb.Sx)("/image/logo/kong.png"),alt:""}),(0,Kg.jsx)("div",{className:B2().uploadEmptyTxt,children:"\u6682\u672a\u4e0a\u4f20\u5185\u5bb9 \u53ef\u70b9\u51fb\u4e0a\u4f20 \u6216\u62d6\u62fd\u4e0a\u4f20"}),(0,Kg.jsx)(qW.Z,{multiple:!0,showUploadList:!1,beforeUpload:a,children:(0,Kg.jsx)(CS.Z,{type:"primary",onClick:e=>{c(e)},className:B2().uploadEmptyButton,children:"\u70b9\u51fb\u4e0a\u4f20"})})]})}}))})})})}var $2=(0,r.memo)((0,r.forwardRef)(J2)),e3=i(1103),t3=i.n(e3),i3=[{key:"all",name:"\u5168\u90e8",request:jD},{key:"image",name:"\u56fe\u7247",request:jD},{key:"video",name:"\u89c6\u9891",request:jD}],a3=[{key:"audio",name:"\u97f3\u9891",request:jD}],n3={image:[],video:[],audio:[]};function r3(e){return{title:e.name,type:1,id:e.uid,uid:e.uid,fileInfo:{state:0,mime_type:e.type,file:e}}}function o3(){var e={},t=NJ(),i=t.checkLoginStatus,a=lA(),o=Xf(),s=o.value.type,l="replace-audio"===s,c=l?a3:i3,v=(0,dx.Z)((0,u.Z)({},n3)),h=(0,n.Z)(v,2),f=h[0],g=h[1],x=(0,r.useState)("all"),y=(0,n.Z)(x,2),b=y[0],_=y[1];(0,r.useEffect)((()=>{_(l?"audio":"all")}),[l]);var j=[].concat(f.image,f.video);function w(){g({image:[],video:[]})}var k=(0,r.useState)([]),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=Yf(),S=N.showBindPhoneModal,I=(0,DI.ZP)(bD,{manual:!0}),A=I.data,P=void 0===A?{}:A,M=I.run,E=(0,d.Z)((e=>{var t=(0,sh.Z)(e,j,"uid"),i=P.maxMemoryByte,a=void 0===i?0:i,n=P.useMemoryByte,r=void 0===n?0:n,o={};g((e=>{for(var i=e,n=0;n<t.length;n++){var s=t[n];if(r+=s.size,r>a){xp.default.info({content:"\u5b58\u50a8\u7a7a\u95f4\u5df2\u6ee1",maxCount:1});break}var l=xK(s.type);if("all"===l){xp.default.info("\u4e0d\u652f\u6301\u8be5\u683c\u5f0f".concat(s.type,"\u6587\u4ef6\u7c7b\u578b"));break}Object.assign(o,{[l]:l});var c=r3(s);i[l]=[c].concat(i[l])}return i}));var s=Object.keys(o);s.length>1?_("all"):s[0]&&_(s[0])}),200);function L(){w(),Object.keys(e).forEach((t=>{var i;null===(i=e[t])||void 0===i||i.reload()})),M()}(0,r.useEffect)((()=>{var e=i();e||M()}),[]);var D=(0,DI.ZP)(SD,{manual:!0,pollingInterval:1e3,onSuccess(e){var t=[];e.forEach((e=>{2===e.state&&t.push(e)})),g((t=>(Object.keys(t).forEach((i=>{t[i].forEach((t=>{e.forEach((e=>{e.file_id===t.file_id&&1===e.state&&Object.assign(t.fileInfo,(0,u.Z)({state:1},e.fileInfo))}))}))})),t))),C(t),t.length||z()}}),R=D.run,z=D.cancel;function F(e){z(),C((t=>{var i=t.concat([{file_id:e,state:2}]),a=[],n=i.filter((e=>{if(2===e.state)return a.push(e.file_id),e}));return a.length&&R(a),n}))}function O(e,t,i){g((a=>{var n=a[t],r=n.findIndex((t=>t.id===e));return n[r]&&(i.duration&&Object.assign(n[r].fileInfo,{values:{duration:i.duration}}),i.state&&Object.assign(n[r].fileInfo,{state:i.state}),i.width&&Object.assign(n[r].fileInfo,{height:i.height,width:i.width}),i.poster&&Object.assign(n[r].fileInfo,{cover_path:i.poster,small_cover_path:i.poster}),i.progress&&Object.assign(n[r].fileInfo,{progress:i.progress}),i.src&&Object.assign(n[r].fileInfo,{transcode:{sd:i.src}}),i.transcode&&Object.assign(n[r].fileInfo,{transcode:i.transcode}),i.values&&Object.assign(n[r].fileInfo,{values:i.values}),i.file_id&&Object.assign(n[r],{file_id:i.file_id,id:i.id}),Object.assign(a,{[t]:n})),a}))}function B(e,t){return i()||(1!==(null===a||void 0===a?void 0:a.bind_phone)?S():E(t)),!1}function W(e){return V.apply(this,arguments)}function V(){return V=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i={},"all"!==b){e.next=7;break}return e.next=4,ZD(t);case 4:i=e.sent,e.next=10;break;case 7:return e.next=9,CD(t);case 9:i=e.sent;case 10:0===i.code&&(xp.default.success("\u5220\u9664\u6210\u529f"),w(),L());case 11:case"end":return e.stop()}}),e)}))),V.apply(this,arguments)}var U=e=>{i()?Ph(e):1!==(null===a||void 0===a?void 0:a.bind_phone)&&(Ph(e),S())},G=(0,Kg.jsxs)("div",{className:t3().personalWarpTabRight,children:[!l&&(0,Kg.jsx)(m2,{onSuccess:()=>{L()},folderId:"0",children:(0,Kg.jsxs)(CS.Z,{className:t3()["upload-button-item"],onClick:()=>{Km("concise13")},style:{margin:12},children:["\u624b\u673a\u4e0a\u4f20",(0,Kg.jsx)(Z2,{className:t3()["upload-button-item-icon"],tip:(0,Kg.jsx)(T2,{accept:["video","image"]}),style:{backgroundColor:"#5A4CDB",color:"#fff"}})]})}),(0,Kg.jsx)(qW.Z,{multiple:!0,showUploadList:!1,beforeUpload:B,children:(0,Kg.jsxs)(CS.Z,{type:"primary",className:t3()["upload-button-item"],onClick:e=>{U(e),Km("concise14")},children:["\u7535\u8111\u4e0a\u4f20",(0,Kg.jsx)(Z2,{className:t3()["upload-button-item-icon"],tip:(0,Kg.jsx)(T2,{accept:l?["audio"]:["video","image"]})})]})})]});return(0,Kg.jsx)("div",{className:t3().personalWarp,children:(0,Kg.jsx)(YP.Z,{activeKey:b,destroyInactiveTabPane:!0,onChange:e=>{w(),_(e)},tabBarExtraContent:G,children:c.map((t=>(0,Kg.jsx)(YP.Z.TabPane,{tab:t.name,children:(0,Kg.jsx)($2,{ref:i=>{i&&(e[t.key]=i)},type:t.key,request:t.request,params:{folderId:0,type:"all"===t.key?"image,video":t.key,pageSize:40,filter_format:"gif"},beforeUpload:B,fileList:"all"===b?j:f[b],itemProps:{transcodingFiles:Z,changeFileState:O,onTranscodingFilesChange:F,folderId:0,handleReload:L},setPhoneBindingShow:S,clickUpload:U,handleDelete:W,dragUploadDeps:[null===P||void 0===P?void 0:P.maxMemoryByte]})},t.key)))})})}var s3=o3,l3={image:[{key:"kid",label:"\u5206\u7c7b",options:[{value:"20,2,66",label:"\u5168\u90e8"},{value:"2",label:"\u521b\u610f\u80cc\u666f"},{value:"66",label:"\u63d2\u753b"},{value:"20",label:"\u7167\u7247"}]},{key:"isPortrait",label:"\u4eba\u50cf",type:"radio",options:[{value:"all",label:"\u5168\u90e8"},{value:"1",label:"\u6709"},{value:"0",label:"\u65e0"}]}],videoE:[{key:"ratio",label:"\u89c6\u9891\u6bd4\u4f8b",type:"radio",options:[{value:"w",label:"16:9"},{value:"h",label:"9:16"},{value:"c",label:"1:1"}]}],element:[{key:"search_type",label:"\u7c7b\u578b",type:"radio",options:[{value:"image",label:"\u56fe\u7247"},{value:"gif",label:"GIF\u52a8\u56fe"},{value:"lottie",label:"\u52a8\u753b"}]}]},c3={image:{request:JO,formatResult:e=>({list:e.data.list,pageTotal:e.data.total}),getAttribute:e=>{var t=e.host+e.sample;return{picUrl:t,rt_preview_url:t}},defaultFiltered:{kid:"20,2,66",isPortrait:"all"}},videoE:{request:zV,getAttribute:e=>({rt_total_time:e.duration,rt_frame_url:e.frame_file,rt_total_frame:e.total_frame,rt_url:e.sample,rt_preview_url:e.preview}),defaultFiltered:{ratio:"w"}},element:{request:QO,getAttribute:e=>({picUrl:e.sample,rt_preview_url:e.preview,rt_url:e.sample,rt_total_time:"lottie"===e.asset_type?Zh(e.total_frame):e.duration,rt_frame_url:e.frame_file,rt_frame_file:e.frame_file,rt_total_frame:e.total_frame,source_key:e.source_key}),defaultFiltered:{search_type:"image"}},audio:{request:Bz,formatResult:e=>({list:e.data.list,pageTotal:e.data.total}),getAttribute:e=>(console.log("params",e),{}),defaultFiltered:{search_type:"audio"}}},d3=i(93236),u3=i.n(d3);function p3(e){switch(e){case"svg":return"SVG";case"gif":return"videoE";default:return e}}var v3=e=>({resId:e.id,width:e.width,height:e.height});function m3(e){var t,i,a=e.data,n=e.type,r=e.onSuccess,o=c3[n].getAttribute,s={meta:{type:p3(a.asset_type)},attribute:(0,u.Z)((0,u.Z)({},v3(a)),o(a))};return(0,Kg.jsx)(mL,{data:s,type:null===(t=s.meta)||void 0===t?void 0:t.type,onDrop:()=>{r&&r()},children:(0,Kg.jsx)(lK,{data:s.attribute,type:"element"===n?null===(i=s.meta)||void 0===i?void 0:i.type:n,style:{height:86,backgroundColor:"#e9ebed"},className:hb()("replace-element-item",{"replace-element-item-small":"element"===n}),onSuccess:r})})}var h3=i(53653),f3=i.n(h3);function g3(e){return{resId:e.id,width:e.width,height:e.height,picUrl:e.host+e.sample_big,rt_preview_url:e.host+e.sample_big,isUser:!0}}function x3(e){return{resId:e.id,width:e.width,height:e.height,picUrl:e.sample,rt_preview_url:e.preview,isUser:!0}}function y3(e){return{resId:e.id,rt_url:e.sample,rt_preview_url:e.preview,rt_frame_url:e.frame_file,rt_total_frame:e.total_frame,rt_total_time:e.duration,width:e.width,height:e.height,volume:60}}var b3=e=>({});function _3(e){var t=e.type,i=e.params,a=c3[t],n=a.request,o=a.formatResult,s=a.getAttribute,l=(0,r.useRef)(),c=e=>{switch(t){case"image":return g3(e);case"videoE":return y3(e);case"element":return(0,u.Z)((0,u.Z)({},x3(e)),s(e));case"audio":return b3(e)}};return(0,Kg.jsx)("div",{className:f3().listWarp,children:(0,Kg.jsx)(yE,{ref:l,formatResult:o,request:n,wrapStyle:{flex:1},params:i,skeleton:{rows:3,columns:3},children:e=>{var i=e.list;return(0,Kg.jsx)("div",{"aria-label":t,className:f3().list,style:{position:"relative",height:"100%"},children:i.map(((e,i)=>{var a;return(0,Kg.jsx)("div",{className:f3().listItem,children:"audio"===t?(0,Kg.jsx)(Y2,{data:e,type:"local"}):(0,Kg.jsx)(F2,{operationShow:!1,type:null!==(a=p3(e.asset_type))&&void 0!==a?a:t,data:c(e)},"uploader-".concat(t,"-").concat(e.id))},e.id)}))})}})})}var j3={image:{label:"\u56fe\u7247"},element:{label:"\u5143\u7d20"},videoE:{label:"\u89c6\u9891"},audio:{label:"\u97f3\u9891"}};function w3(){var e,t=Xf(),i=t.value.type,a=xu(),o=(0,r.useState)("image"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=c3[l].defaultFiltered,p=(0,r.useState)((0,u.Z)({page:1,pageSize:40,keyword:""},d)),v=(0,n.Z)(p,2),m=v[0],h=v[1],f="replace-audio"===i;(0,r.useEffect)((()=>{c(f?"audio":"image")}),[f]);var g=e=>{c(e),h((0,u.Z)({page:1,pageSize:40},c3[e].defaultFiltered))},x=e=>{h((0,u.Z)((0,u.Z)({},m),e))},y=(0,Kg.jsx)(d1,{searchKey:"keyword",placeholder:"\u641c\u7d22".concat(j3[l].label),filters:l3[l],onChange:e=>{Km("concise26"),x(e)},onFilter:e=>{Km("concise28"),x(e)},onClickFilter:()=>{Km("concise27")},defaultValue:d});return(0,Kg.jsx)("div",{className:u3().cloudWarp,children:(0,Kg.jsx)(YP.Z,{activeKey:l,destroyInactiveTabPane:!0,onChange:e=>{g(e)},tabBarExtraContent:y,children:f?(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u97f3\u9891",children:(0,Kg.jsx)(_3,{type:"audio",params:m})},"audio"):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u56fe\u7247",children:(0,Kg.jsx)(_3,{type:"image",params:m})},"image"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u89c6\u9891",children:(0,Kg.jsx)(_3,{type:"videoE",params:m})},"videoE"),"modal-replace"===i&&!("mask"===(null===a||void 0===a?void 0:a.meta.type)&&null!==(e=a.assets)&&void 0!==e&&e.length)&&(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u5143\u7d20",children:(0,Kg.jsx)(_3,{type:"element",params:m})},"element")]})})})}var k3=w3,T3=i(98087),Z3=i.n(T3);function C3(){var e=og(),t=e.isOneKeyReplace,i=e.openCloseOneKeyReplace,a=Rj(),o=a.endClip,s=a.inReplacing,l=(0,r.useState)("personal"),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=(0,Cm.Z)(document.querySelector("body")),m=Xf(),h=m.value,f=h.visible,g=h.type,x=h.selectedList,y=m.close,b=t?Uv():Zv(),_="replace-batch"===g,j=b.filter((e=>e.replaced)),w=x.map((e=>({meta:{type:e.picUrl?"image":"videoE"},attribute:(0,u.Z)({},e),transform:{}})));function k(){y(),s&&o()}return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(QJ,{visible:f,onCancel:k,footer:!1,width:(null===v||void 0===v?void 0:v.width)>1600?1332:911,centered:!0,closeIcon:(0,Kg.jsx)(EM.Z,{style:{color:"rgba(72, 78, 95, 1)"}}),zIndex:999,children:(0,Kg.jsxs)("div",{className:Z3().replaceModalContent,children:[(0,Kg.jsx)("div",{className:Z3().left,children:[{name:"\u4e2a\u4eba\u7a7a\u95f4",id:"personal"},{name:"\u4e91\u7aef\u7a7a\u95f4",id:"cloud"}].map((e=>(0,Kg.jsx)("div",{onClick:()=>{p(e.id)},className:hb()(Z3().leftItem,{[Z3().leftItemActive]:d===e.id}),children:e.name},e.id)))}),(0,Kg.jsxs)("div",{className:Z3().right,children:[(0,Kg.jsx)("div",{className:Z3().content,children:"personal"===d?(0,Kg.jsx)(s3,{}):(0,Kg.jsx)(k3,{})}),_&&(0,Kg.jsxs)("div",{className:Z3().replaceInfo,children:[(0,Kg.jsxs)("div",{className:Z3().text,children:["\u8be5\u6a21\u677f\u8fd8\u9700\u8981\u66ff\u6362",(0,Kg.jsx)("span",{children:b.length-j.length}),"\u5f20\u56fe\u7247\uff0c\u5df2\u66ff\u6362\u6210\u529f ",(0,Kg.jsx)("span",{children:j.length})," \u5f20"]}),(0,Kg.jsx)(CS.Z,{size:"small",type:"primary",disabled:!x.length,onClick:()=>{t?(Ag(w),eu(),i(!1),Km("onkeyReplace_010")):(Ig(w),Km("concise23")),k()},children:"\u786e\u8ba4\u66ff\u6362"})]})]})]})})})}var N3=C3,S3=()=>{var e=(0,kp.TL)(),t=(0,kp.CG)((e=>({data:e.qrCode}))),i=t.data;function a(t){e(kp.Fm.setQrCodeInfo(t))}return[i,a]};function I3(){kp.h.dispatch(kp.Fm.clear())}var A3=i(42449),P3=i.n(A3),M3=e=>{var t=e.label,i=e.children;return(0,Kg.jsxs)("div",{className:P3().LabelItem,children:[(0,Kg.jsxs)("div",{className:P3().label,children:[t,":"]}),(0,Kg.jsx)("div",{className:P3().content,children:i})]})},E3=M3,L3=i(77511),D3=i.n(L3),R3={url:{key:"url",text:"\u7f51\u5740",label:"\u7f51\u7edc\u94fe\u63a5",placeholder:"\u4f8b\u5982\uff1ahttp://xiudodo.com"},wxUrl:{key:"wxUrl",text:"\u5fae\u4fe1\u516c\u4f17\u53f7",label:"\u516c\u4f17\u53f7ID",placeholder:"\u8bf7\u8f93\u5165\u5fae\u4fe1\u516c\u4f17\u53f7ID \u4f8b\u5982\uff1agh_3fe6ee52ee0e"},text:{key:"text",text:"\u6587\u672c",label:"\u6587\u672c\u4fe1\u606f",placeholder:"\u8bf7\u8f93\u5165\u6587\u672c\u5185\u5bb9"}},z3=e=>{var t=e.state,i=e.dispatch,a=t.text,n=t.wxText,r=t.textType,o="wxUrl"===r;function s(e){return l.apply(this,arguments)}function l(){return l=(0,p.Z)(m().mark((function e(t){var a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o){e.next=2;break}return e.abrupt("return");case 2:if(a=t.target.value,!a){e.next=8;break}return e.next=6,EA({username:a});case 6:n=e.sent,i({text:n.data.text});case 8:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}var c=R3[r]||R3.url;return(0,Kg.jsxs)("div",{className:D3().ContentSet,children:[(0,Kg.jsx)(E3,{label:"\u9009\u62e9\u7c7b\u578b",children:(0,Kg.jsx)(FP.ZP.Group,{value:r,buttonStyle:"solid",onChange:e=>{var t=e.target.value;Km("qrcode_".concat(t)),i({textType:t,text:""})},children:Object.values(R3).map((e=>(0,Kg.jsx)(FP.ZP.Button,{value:e.key,style:{marginRight:12},children:e.text},e.key)))})}),(0,Kg.jsx)(E3,{label:c.label,children:(0,Kg.jsx)(VP.Z.TextArea,{value:o?n:a,onBlur:s,onChange:e=>{var t=e.target.value;i(o?{wxText:t}:{text:t})},placeholder:c.placeholder,autoSize:{minRows:2,maxRows:8},maxLength:200,onPaste:Ph})})]})},F3=z3,O3=i(93599),B3=i.n(O3),W3=e=>{var t=e.value,i=e.onChange,a=e.single,o=e.style,s=e.buttonClassName,l=(0,yp.Z)(e,["value","onChange","single","style","buttonClassName"]),c=(0,r.useState)(!1),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=!!t.colorStops,h=m?ML(t):j(t),f=(0,r.useState)("color"),g=(0,n.Z)(f,2),x=g[0],y=g[1];if(!t)return null;var b=e=>{var t={type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle};i(t)},_=e=>{i(e.rgb)};return(0,Kg.jsx)(tE.Z,(0,u.Z)((0,u.Z)({getTooltipContainer:e=>e,onVisibleChange:e=>{v(e)},destroyTooltipOnHide:!0,visible:p,trigger:"click",placement:"bottomLeft",overlayInnerStyle:{left:0}},l),{},{content:a?(0,Kg.jsx)(QL,{color:t||"",onChange:_}):(0,Kg.jsx)(uD,{color:t||"",gradientColorChange:e=>{b(e)},colorPickupChange:e=>{_(e)},type:x,setType:y}),children:(0,Kg.jsx)("div",{className:hb()(B3().basicRow,s),style:(0,u.Z)({background:h},o),onClick:()=>{v(!p),y(x)}})}))};W3.defaultProps={single:!1,style:void 0,buttonClassName:void 0};var V3=(0,hp.Pi)(W3),U3=e=>{var t,i=e.state,a=e.dispatch,o=i.background,s=i.foreground,l=bf(),c=l.showLoginModal,d=(0,r.useRef)(),u=(0,r.useState)([]),v=(0,n.Z)(u,2),h=v[0],f=v[1],g=(0,DI.ZP)(jD,{manual:!0,onSuccess(e){var t=[];e.items.forEach((e=>{t.push({resId:e.gid,url:e.fileInfo.small_cover_path,iconType:"custom"})})),f(t)}}),x=g.run,y=fK({folder_id:null===(t=d.current)||void 0===t?void 0:t.folderId,source_tag:"icon",onSucceed(e){d.current&&x({page:1,pageSize:1e3,type:"image",folder_id:d.current.folderId})},onError(e){xp.default.error(e.msg)}}),b=y.uploadStat;function _(e){return j.apply(this,arguments)}function j(){return j=(0,p.Z)(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:d.current&&b(t,d.current.folderId);case 1:case"end":return e.stop()}}),e)}))),j.apply(this,arguments)}function w(e){return Km("qrcode_04"),lV(e,"image",(t=>{t&&_(e)})),!1}function k(){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(m().mark((function e(){var t,i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,wD("\u6211\u7684\u56fe\u6807");case 2:t=e.sent,0===t.code&&(i=t.data.folder_id,d.current={folderId:i},x({page:1,pageSize:1e3,type:"image",folder_id:i}));case 4:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}return(0,r.useEffect)((()=>{k()}),[]),(0,Kg.jsxs)("div",{className:D3().StyleSet,children:[(0,Kg.jsxs)(E3,{label:"\u989c\u8272",children:[(0,Kg.jsx)(V3,{buttonClassName:D3().colorPicker,value:s,onChange:e=>{Km("qrcode_01"),a({foreground:e})}}),(0,Kg.jsx)(V3,{buttonClassName:D3().colorPicker,style:{padding:12},value:o,onChange:e=>{Km("qrcode_02"),a({background:e})},single:!0})]}),(0,Kg.jsx)(E3,{label:"logo",children:(0,Kg.jsxs)("div",{className:D3().imgList,children:[(0,Kg.jsx)("div",{className:D3().img,onClick:()=>{a({rt_url:"",resId:""})},children:(0,Kg.jsx)(iP,{className:D3().icon,type:"iconwushuju"})}),[...yb,...h].map((e=>{var t;return(0,Kg.jsx)("div",{onClick:()=>{Km("qrcode_03"),a({rt_url:e.url,resId:e.resId,iconType:e.iconType})},className:D3().img,style:{background:"url(".concat(e.url,") #F3F5F6 center / contain no-repeat")}},null!==(t=e.resId)&&void 0!==t?t:e.iconType)})),(0,Kg.jsx)(qW.Z,{showUploadList:!1,beforeUpload:w,children:(0,Kg.jsx)("div",{className:D3().img,onClick:e=>{var t=lA();t.id<0?(c(),Ph(e)):t.bind_phone||(Hf(),Ph(e))},children:(0,Kg.jsx)(iP,{className:D3().addIcon,type:"iconxingzhuangjiehe6"})})})]})})]})},G3=U3,X3=e=>{var t=e.state,i=e.dispatch;return(0,Kg.jsxs)("div",{className:D3().Setting,children:[(0,Kg.jsx)("div",{className:D3().title,children:"\u4e8c\u7ef4\u7801\u8bbe\u7f6e"}),(0,Kg.jsx)("div",{className:D3().content,children:(0,Kg.jsxs)(YP.Z,{children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u5185\u5bb9",children:(0,Kg.jsx)(F3,{state:t,dispatch:i})},"text"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u6837\u5f0f",children:(0,Kg.jsx)(G3,{state:t,dispatch:i})},"style")]})})]})},q3=(0,hp.Pi)(X3),H3=i(26198),Y3=i.n(H3),K3=e=>{var t=e.state,i=Kf(),a=(0,n.Z)(i,2),o=a[1],s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1];return(0,Kg.jsxs)("div",{className:Y3().Preview,children:[(0,Kg.jsx)(_b,{className:Y3().canvas,options:t}),(0,Kg.jsx)("div",{className:Y3().tooltip,children:"\u5efa\u8bae\u5728\u771f\u5b9e\u573a\u666f\u4e2d\u626b\u63cf\u786e\u8ba4"}),(0,Kg.jsx)(xF.Z,{title:"\u8bf7\u8f93\u5165\u4e8c\u7ef4\u7801\u5185\u5bb9",onVisibleChange:e=>{e&&!t.text?d(!0):d(!1)},visible:c,children:(0,Kg.jsx)(CS.Z,{onClick:()=>{xu()?jj((0,u.Z)({},t)):Tg({attribute:{qrcodeInfo:(0,u.Z)({},t),width:300,height:300},meta:{type:"qrcode"}}),o(!1),I3()},style:{width:"100%"},disabled:!t.text,type:"primary",size:"large",className:Y3().button,children:"\u4fdd\u5b58\u5e76\u4f7f\u7528"})})]})},Q3=K3,J3=i(20369),$3=i.n(J3),e5=(e,t)=>(0,u.Z)((0,u.Z)({},e),t),t5=e5,i5=()=>{var e=Pw(),t=S3(),i=(0,n.Z)(t,1),a=i[0],o=(null===e||void 0===e?void 0:e.attribute.qrcodeInfo)||a,s=(0,r.useReducer)(t5,(0,u.Z)({},o)),l=(0,n.Z)(s,2),c=l[0],d=l[1];return(0,Kg.jsxs)("div",{className:$3().Wrapper,children:[(0,Kg.jsx)(q3,{state:c,dispatch:d}),(0,Kg.jsx)(Q3,{state:c})]})},a5=i5,n5=()=>{var e=Kf(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)(nA.Z,{footer:null,destroyOnClose:!0,className:$3().QrCodeEditModal,title:null,centered:!0,visible:i,width:"auto",onCancel:()=>{a(!1),I3()},maskClosable:!1,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsx)(a5,{})})},r5=n5;function o5(){return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(W1,{}),(0,Kg.jsx)(mP,{}),(0,Kg.jsx)(BJ,{}),(0,Kg.jsx)(d2,{}),(0,Kg.jsx)(N3,{}),(0,Kg.jsx)(r5,{})]})}var s5=i(61573);function l5(e){var t=e.children,i=e.loading,a=(0,Cm.Z)(document.querySelector(".xiudodo-main")),n=(0,s5.dv)(),o=n.canvasInfo,s=(0,r.useMemo)((()=>{var e=o.width,t=o.height;if(e&&t&&a.width){var i=Nm(o,a);return{width:e*i,height:t*i}}return{width:0,height:0}}),[a.height,a.width,o.height,o.width]);return(0,Kg.jsx)(Kg.Fragment,{children:i?(0,Kg.jsx)(fE,{style:(0,u.Z)((0,u.Z)({},s),{},{position:"absolute",top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"})}):t})}function c5(e){var t=e.loading,i=e.children,a=e.className;return(0,Kg.jsx)("div",{className:hb()(a),children:t?(0,Kg.jsxs)("div",{className:"time-line-skeleton",children:[(0,Kg.jsxs)("div",{className:"time-line-skeleton-part-list",children:[(0,Kg.jsx)(fE,{className:"time-line-skeleton-part",style:{flex:3}}),(0,Kg.jsx)(fE,{className:"time-line-skeleton-part",style:{flex:2}}),(0,Kg.jsx)(fE,{className:"time-line-skeleton-part",style:{flex:3}}),(0,Kg.jsx)(fE,{className:"time-line-skeleton-part",style:{flex:4}})]}),(0,Kg.jsx)(fE,{className:"time-line-skeleton-audio"})]}):i})}function d5(e){var t=e.style,i=(0,r.useState)(!1),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,r.useRef)(null);(0,aM.Z)((()=>{s(!1)}),l);var c=[{id:"1",title:"\u753b\u5e03\u64cd\u4f5c",arr:[{id:"enlarge",name:"\u753b\u5e03\u653e\u5927"},{id:"narrow",name:"\u753b\u5e03\u7f29\u5c0f"}]},{id:"2",title:"\u6587\u4ef6",arr:[{id:"save",name:"\u4fdd\u5b58"},{id:"undo",name:"\u4e0a\u4e00\u6b65"},{id:"redo",name:"\u4e0b\u4e00\u6b65"}]},{id:"3",title:"\u89c6\u56fe",arr:[{id:"referenceLine",name:"\u663e\u793a/\u9690\u85cf\u53c2\u8003\u7ebf"}]},{id:"4",title:"\u5143\u7d20",arr:[{id:"group",name:"\u5efa\u7ec4"},{id:"unGroup",name:"\u53d6\u6d88\u5efa\u7ec4"},{id:"copy",name:"\u590d\u5236"},{id:"noCopyPaste",name:"\u62f7\u8d1d"},{id:"paste",name:"\u7c98\u8d34"},{id:"redo",name:"\u526a\u5207"},{id:"move",name:"\u79fb\u52a8"},{id:"multipleChoice",name:"\u591a\u9009"},{id:"delete",name:"\u5220\u9664"}]},{id:"5",title:"\u56fe\u5c42",arr:[{id:"moveLayerUp",name:"\u4e0a\u79fb\u4e00\u5c42"},{id:"moveToTopLevel",name:"\u79fb\u5230\u9876\u5c42"},{id:"moveLayerDown",name:"\u4e0b\u79fb\u4e00\u5c42"},{id:"moveToBottomLevel",name:"\u79fb\u5230\u5e95\u5c42"}]},{id:"6",title:"\u65f6\u95f4\u8f74",arr:[{id:"clone",name:"\u62f7\u8d1d\u7247\u6bb5"},{id:"copy",name:"\u590d\u5236"},{id:"paste",name:"\u7c98\u8d34"},{id:"delete",name:"\u5220\u9664\u7247\u6bb5"},{id:"splitFragment",name:"\u5206\u5272\u7247\u6bb5"}]}],d=(0,Kg.jsxs)("div",{className:"shortcutKey_Dropdown",children:[(0,Kg.jsx)("div",{className:"shortcutKey_Dropdown_title",children:"\u5feb\u6377\u952e"}),(0,Kg.jsx)("div",{className:"shortcutKey_Dropdown_content",children:c.map((e=>(0,Kg.jsxs)("div",{className:"shortcutKey_Dropdown_item",children:[(0,Kg.jsx)("div",{className:"item_title",children:e.title}),e.arr.map((e=>(0,Kg.jsxs)("div",{className:"item_item",children:[(0,Kg.jsx)("span",{className:"item_item_left",children:e.name}),(0,Kg.jsx)("span",{className:"item_item_right",children:Ld[e.id]})]},e.id)))]},e.id)))})]});return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(NH.Z,{overlay:d,visible:o,placement:"topLeft",getPopupContainer:e=>document.querySelector("#xiudodo"),trigger:["click"],onVisibleChange:e=>{e&&Km("help_001")},children:(0,Kg.jsx)(xF.Z,{title:"\u5feb\u6377\u952e\u5927\u5168",getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{ref:l,className:hb()("shortcutKey",{"shortcutKey-active":o}),onClick:()=>s(!o),style:t,children:(0,Kg.jsx)(iP,{type:"jianpan",className:"shortcutKey-icon"})})})})})}var u5=d5,p5=(i(42048),i(89866)),v5=i(36378),m5=i.n(v5),h5=[{actionType:"asset_duration_controller",title:"\u6211\u60f3\u8c03\u6574\u90e8\u5206\u56fe\u7247\u548c\u6587\u5b57\u7684\u51fa\u73b0\u65f6\u957f\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u663e\u793a\u65f6\u957f\u8c03\u6574\u9762\u677f\u3002"},{actionType:"layers",title:"\u6211\u60f3\u7f16\u8f91\u80cc\u666f\u89c6\u9891\u4e0a\u7684\u67d0\u4e9b\u5143\u7d20\uff0c\u4f46\u7f16\u8f91\u4e0d\u4e86\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u6253\u5f00\u56fe\u5c42\u5217\u8868\uff0c\u60a8\u53ef\u5728\u56fe\u5c42\u5217\u8868\u4e2d\u627e\u5230\u60a8\u60f3\u8981\u89e3\u9501\u7684\u5143\u7d20\uff0c\u70b9\u51fb\u5de6\u4fa7\u89e3\u9501\u6309\u94ae"},{actionType:"open_audio_list",title:"\u6211\u60f3\u66ff\u6362\u97f3\u4e50\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u663e\u793a\u80cc\u666f\u97f3\u4e50\u66ff\u6362\u9762\u677f\uff0c\u8bf7\u6ce8\u610f\u9875\u9762\u5de6\u4fa7\u3002"},{actionType:"open_audio_list",title:"\u6211\u60f3\u6dfb\u52a0\u81ea\u5df1\u7684\u80cc\u666f\u97f3\u4e50\uff1f",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u663e\u793a\u80cc\u666f\u97f3\u4e50\u66ff\u6362\u9762\u677f\uff0c\u8bf7\u6ce8\u610f\u9875\u9762\u5de6\u4fa7\u3002"},{actionType:"AIDubbing",title:"\u6211\u60f3\u4f7f\u7528AI\u914d\u97f3\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u5f39\u51faAI\u914d\u97f3\u5f39\u6846\uff0c\u8bf7\u6ce8\u610f\u3002"},{actionType:"recording",title:"\u6211\u60f3\u5f55\u97f3\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u663e\u793a\u5f55\u97f3\u9762\u677f\uff0c\u8bf7\u6ce8\u610f\u9875\u9762\u5de6\u4fa7\u3002"},{actionType:"layers",title:"\u6211\u60f3\u770b\u770b\u89c6\u9891\u6a21\u677f\u7684\u56fe\u5c42\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u5f39\u51fa\u56fe\u5c42\u9762\u677f\uff0c\u8bf7\u6ce8\u610f\u9875\u9762\u7684\u5de6\u4e0a\u65b9\u3002"},{actionType:"preview_video",title:"\u6211\u60f3\u9884\u89c8\u89c6\u9891\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u5f39\u51fa\u89c6\u9891\u9884\u89c8\u5f39\u6846\uff0c\u8bf7\u6ce8\u610f\u3002"},{actionType:"asset_upload",title:"\u6211\u60f3\u4e0a\u4f20\u6211\u81ea\u5df1\u7684\u56fe\u7247\u6216\u89c6\u9891\u3002",describe:"${click}\u5c06\u81ea\u52a8\u4e3a\u60a8\u663e\u793a\u4e0a\u4f20\u9762\u677f\uff0c\u8bf7\u6ce8\u610f\u9875\u9762\u5de6\u4fa7\u3002"},{actionType:"video_split",title:"\u6211\u60f3\u8c03\u6574\u89c6\u9891\u65f6\u957f\u3002",describe:"${click}\u4e3a\u60a8\u9ad8\u4eae\u5c55\u793a\u5206\u5272\u89c6\u9891\u6309\u94ae\uff0c\u5206\u5272\u540e\u53ef\u5220\u9664\u4e0d\u9700\u8981\u7684\u7247\u6bb5\u3002"},{actionType:"video_split",title:"\u6211\u60f3\u5728\u4e00\u4e2a\u7247\u6bb5\u4e2d\u95f4\u63d2\u5165\u4e00\u6bb5\u89c6\u9891\u3002",describe:"${click}\u4e3a\u60a8\u9ad8\u4eae\u5c55\u793a\u5206\u5272\u89c6\u9891\u6309\u94ae\uff0c\u5206\u5272\u540e\u53ef\u57282\u4e2a\u7247\u6bb5\u4e2d\u95f4\u63d2\u5165\u60a8\u60f3\u8981\u7684\u89c6\u9891\u3002"},{actionType:"asset_video_volume_controller",title:"\u6211\u63d2\u5165\u7684\u89c6\u9891\u7d20\u6750\u4e3a\u4ec0\u4e48\u6ca1\u6709\u58f0\u97f3\u3002",describe:"\u63d2\u5165\u7684\u89c6\u9891\u7d20\u6750\u6211\u4eec\u9ed8\u8ba4\u4e3a\u9759\u97f3\uff0c${click}\u4e3a\u60a8\u81ea\u52a8\u663e\u793a\u7d20\u6750\u7684\u97f3\u91cf\u8c03\u8282\u7a97\u53e3\uff0c\u8bf7\u6ce8\u610f\u9875\u9762\u4e0a\u65b9\u3002"}];function f5(e){var t=e.onClose,i=Pw(),a=(0,r.useState)(h5),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)(),u=(0,n.Z)(c,2),p=u[0],v=u[1],m=af(),h=m.open,f=Cf(),g=f.openSidePanel,x=of(),y=x.open,b=nf(),_=b.open,j=rf(),w=j.open,k=Lf(),T=k.open,Z=(0,d.Z)((e=>{v(e);var t=h5;e&&(t=h5.filter(((t,i)=>t.title.indexOf(e)>-1)),Jm({action:"search",word:e})),l(t)}),300);function C(e){switch(e){case"asset_unlock":break;case"recording":g({menu:"music",submenu:"3"});break;case"open_audio_list":g({menu:"music",submenu:"2"});break;case"audio_mute":break;case"layers":h();break;case"preview_video":y();break;case"background_video_replace":break;case"asset_upload":g({menu:"user-space"});break;case"asset_duration_controller":if(!i)return xp.default.info("\u8bf7\u5728\u753b\u5e03\u4e0a\u9009\u4e2d\u60a8\u8981\u8c03\u6574\u7684\u5143\u7d20");T(jm);break;case"video_split":t(),T(Tm);break;case"asset_video_volume_controller":if(!["video","videoE"].includes(String(null===i||void 0===i?void 0:i.meta.type)))return xp.default.info("\u8bf7\u5728\u753b\u5e03\u4e0a\u9009\u4e2d\u60a8\u8981\u8c03\u6574\u7684\u89c6\u9891");_();break;case"AIDubbing":if("text"!==(null===i||void 0===i?void 0:i.meta.type))return xp.default.info("\u8bf7\u5728\u753b\u5e03\u4e0a\u9009\u4e2d\u60a8\u8981\u914d\u97f3\u7684\u6587\u5b57");w();break;default:}Jm({action:"lookGuide",guideType:e})}return(0,Kg.jsxs)("div",{style:{color:"#262e48"},children:[(0,Kg.jsxs)("div",{className:"questions-modal-search",children:[(0,Kg.jsx)("span",{children:"\u4e5f\u53ef\u4ee5\u901a\u8fc7\u641c\u7d22\u5bfb\u6c42\u5e2e\u52a9"}),(0,Kg.jsx)(VP.Z,{onPaste:Ph,onKeyDown:Ph,prefix:(0,Kg.jsx)($R.Z,{}),placeholder:"\u641c\u7d22\u5e2e\u52a9",onChange:e=>{Z(e.target.value)},allowClear:!0})]}),(0,Kg.jsxs)("div",{className:"questions-modal-list-wrap",children:[(0,Kg.jsx)("span",{hidden:p,children:"\u60a8\u662f\u5426\u9047\u5230\u4e86\u4ee5\u4e0b\u95ee\u9898\uff1a"}),(0,Kg.jsx)("div",{className:"questions-modal-list",children:s.length?s.map(((e,t)=>{var i=e.title,a=e.describe,n=e.actionType,r=String(a).split("${click}");return(0,Kg.jsxs)("div",{className:"list-item",children:[(0,Kg.jsx)("div",{className:"list-item-title",children:i}),(0,Kg.jsx)("div",{children:r.map(((e,t)=>(0,Kg.jsxs)("span",{children:[e,t!==r.length-1&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("span",{className:"questions-action-click",onClick:()=>C(n),onMouseDown:Ph,children:"\u70b9\u51fb\u8fd9\u91cc"}),"\uff0c"]})]},"question-desc-".concat(t))))})]},"question-".concat(t))})):(0,Kg.jsx)(mE.Z,{description:(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("p",{children:"\u62b1\u6b49\uff0c\u6ca1\u6709\u627e\u5230\u60a8\u7684\u95ee\u9898\u76f8\u5173\u89e3\u7b54\uff01"}),(0,Kg.jsxs)("p",{children:["\u53ef\u4ee5\u626b\u4e0a\u9762\u4e8c\u7ef4\u7801\u76f4\u63a5\u627e\u5ba2\u670d\u89e3\u51b3\u3002",(0,Kg.jsx)("span",{children:"\ud83d\udc46"})]})]})})})]})]})}function g5(e){var t=e.style,i=((0,yp.Z)(e,["style"]),oA()),a=i.username,o=i.id,s=kf(),l=s.isConcise,c=(0,r.useState)(!1),d=(0,n.Z)(c,2),u=d[0],p=d[1];function v(){m5()("".concat(o)),xp.default.success("\u590d\u5236\u6210\u529fUID\uff1a".concat(o))}return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(p5.Z,{visible:u,title:(0,Kg.jsxs)("div",{className:"questions-modal-header",children:["\u60a8\u597d\uff01",o>-1&&(0,Kg.jsxs)("span",{children:[a,"\uff08UID\uff1a",(0,Kg.jsx)(xF.Z,{title:"\u70b9\u51fb\u590d\u5236UID",children:(0,Kg.jsx)("span",{className:"questions-modal-header-UID",onClick:v,children:o})}),"\uff09"]})]}),footer:!1,onClose:()=>p(!1),maskClosable:!1,width:374,height:300,className:"questions-modal-wrap",getContainer:!1,mask:!1,children:(0,Kg.jsx)(f5,{onClose:()=>p(!1)})}),!l&&(0,Kg.jsx)(xF.Z,{title:"\u95ee\u9898\u5e2e\u52a9",children:(0,Kg.jsx)("div",{className:"questions",style:t,onClick:()=>{p(!0),Jm({action:"open"})},children:(0,Kg.jsx)(iP,{type:"iconhelp"})})})]})}function x5(){var e=Of(),t=e.referenceLineX,i=e.referenceLineY,a=e.referenceLineShow,o=e.updateReferenceLine,s=e.updateReferenceLineShow,l=document.querySelector(".xiudodo-main"),c=(0,TK.Z)(l),d=(0,r.useState)(null),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,Cm.Z)(document.querySelector(".xiudodo-canvas")),h=(0,Cm.Z)(document.querySelector("#xiudodo-canvas")),f=h||{},g=f.width,x=f.height,y=()=>{var e=Date.now(),t=Math.ceil(1e3*Math.random()),i="".concat(e).concat(t);return i},b=()=>{if(a)s(!1);else{if(0===t.length&&0===i.length){var e=y();o([{id:e,value:50}],"x");var n=y();o([{id:n,value:50}],"y")}s(!0)}},_=()=>{Km("referenceLine01");var e=((null===m||void 0===m?void 0:m.width)/2-3)/(null===m||void 0===m?void 0:m.width)*100,t=i.length>0?e:50,a=y(),n=[...i,{value:t,id:a}];o(n,"y"),s(!0)},j=()=>{Km("referenceLine02"),o([],"x"),o([],"y")},w=(e,i)=>{var a=t.map((t=>{if(t.id===i){var a=JSON.parse(JSON.stringify(t));return a.value=e,a}return t}));o(a,"x")},k=(e,t)=>{var a=i.map((i=>{if(i.id===t){var a=JSON.parse(JSON.stringify(i));return a.value=e,a}return i}));o(a,"y")},T=()=>{Km("referenceLine01");var e=((null===m||void 0===m?void 0:m.height)/2+3)/(null===m||void 0===m?void 0:m.height)*100,i=t.length>0?e:50,a=y(),n=[...t,{value:i,id:a}];o(n,"x"),s(!0)},Z=(e,a)=>{var n=document.querySelector(".xiudodo-main"),r=n.getBoundingClientRect(),s=r.left,l=r.top,d=e.clientX,u=e.clientY,p=c&&c.left+d-s,h=c&&c.top+u-l,f="x"===a?((null===m||void 0===m?void 0:m.height)-x)/2:((null===m||void 0===m?void 0:m.width)-g)/2,b=f>0?f:0;if(("y"!==a||!(p-25<b||p-25-b>g))&&("x"!==a||!(h-25<b||h-b-25>x))){v(null);var _="y"===a?[...i,{value:(p-b-25)/g*100,id:y()}]:[...t,{value:(h-b-25)/x*100,id:y()}];o(_,a)}},C=(e,t)=>{var i=document.querySelector(".xiudodo-main"),a=i.getBoundingClientRect(),n=a.left,r=a.top,o=e.clientX,s=e.clientY,l=c&&c.left+o-n,d=c&&c.top+s-r,u="x"===t?((null===m||void 0===m?void 0:m.height)-x)/2:((null===m||void 0===m?void 0:m.width)-g)/2,p=u>0?u:0;v("y"===t&&(l-25<p||l-p-25>g)||"x"===t&&(d-25<p||d-p-25>x)?null:{type:t,pos:"y"===t?l:d})},N=(e,a,n)=>{if("y"===e)if(a<0||a>g){var r=i.filter((e=>e.id!==n));o(r,"y")}else k(a/g*100,n);else if(a<0||a>x){var s=t.filter((e=>e.id!==n));o(s,"x")}else w(a/x*100,n)};return{showLine:b,addY:_,addX:T,eliminate:j,getAddLine:Z,hoverLine:p,setHoverLine:v,getDisplay:C,delLine:N,uploadX:w}}var y5=(0,hp.Pi)((()=>{var e=nM(),t=e.isPlaying,i=e.pauseVideo,a=e.playVideo,n=Pw(),r=Gq(),o=r.handleRemoveAsset,s=oh(),l=s.bindRemoveAudio,c=x5(),d=c.showLine,u=kf(),v=u.isConcise,h=Am({container:document.querySelector(".xiudodo-main")}),f=h.update,g=h.scale,x=void 0===g?1:g,y=Jk(),b=(y.value,y.goNext),_=y.goPrev,j=Vw(),w=j.multiSelect,k=wK(),T=(k.clipboardPaste,k.analyPaste),Z=Iw(),C=Z.removeCamera,N=yu();return(0,$Y.Z)("keydown",function(){var e=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=null===(i=t.target)||void 0===i?void 0:i.tagName,"INPUT"!==a&&"TEXTAREA"!==a||t.stopPropagation();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),{capture:!0}),(0,aC.Z)(["space"],(e=>{var n;e.preventDefault(),(null===(n=document.getElementsByClassName("preview-video"))||void 0===n?void 0:n.length)<=0&&(Km("keyPress_play_video"),t?i():(eu(),a()))})),(0,aC.Z)(["backspace","delete"],(e=>{var t;e.preventDefault();var i,a=Fv();Km(a?"keyPress_delete_audio":"keyPress_delete_asset"),a?(l(a.rt_id),Mv(),Pv(-1),i="keyPress_delete_audio"):(null===(t=document.getElementsByClassName("preview-video"))||void 0===t?void 0:t.length)<=0&&n&&!n.meta.locked&&o(n),N&&(C(-1,N),Km("Timeline_camera_delete")),v&&(i="concise5"),i&&Km(i)})),(0,aC.Z)(["ctrl.s","meta.s"],(e=>{e.preventDefault(),eP(),Km("keyPress_save")})),(0,aC.Z)(["ctrl.d","meta.d"],(e=>{e.preventDefault();var t=Fv();t&&Wh(t),n&&Gh({asset:n})})),(0,aC.Z)(["ctrl.-","meta.-"],(e=>{e.preventDefault(),f(x-.1)})),(0,aC.Z)(["ctrl.=","meta.="],(e=>{e.preventDefault(),f(x+.1)})),(0,aC.Z)(["ctrl.z","meta.z"],(e=>{Km("keyPress_undo"),_()})),(0,aC.Z)(["ctrl.y","meta.y"],(e=>{e.preventDefault(),Km("keyPress_redo"),b()})),(0,aC.Z)(["ctrl.x","meta.x"],(e=>{if(n&&!ii(n)&&!n.meta.locked){Km("keyPress_cx_asset");var t=Eg();t&&zh.copy(t.data,e),o(n)}})),(0,aC.Z)(["ctrl.;","meta.;"],(e=>{d()})),(0,aC.Z)(["shift.ctrl.g","shift.meta.g"],(e=>{ti(n)&&zj(n)})),(0,aC.Z)(["ctrl.g","meta.g"],(e=>{e.preventDefault(),e.shiftKey||null!==w&&void 0!==w&&w.size&&Fj()})),(0,aC.Z)([],(e=>{})),(0,aC.Z)(["ctrl.c","meta.c"],function(){var e=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=Eg(),i&&(a=i.type,"audio"===a?Km("keyPress_copy_audio"):"asset"===a?Km("keyPress_copy_asset"):"template"===a&&Km("keyPress_copy_template"),zh.copy(i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,$Y.Z)("paste",function(){var e=(0,p.Z)(m().mark((function e(t){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:i=e.sent,i||(Gh(),a=Fv(),Km(a?"keyPress_paste_audio":"keyPress_paste_asset"));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),(0,aC.Z)(37,(()=>{n||Lb(Math.max(Wb()-400,0),!1)})),(0,aC.Z)(39,(()=>{n||Lb(Math.min(Wb()+400,Fw()),!1)})),(0,Kg.jsx)(Kg.Fragment,{})})),b5=i(40384),_5=i.n(b5),j5=e=>{var t=e.i,i=e.index,a=e=>{var t=(0,u.Z)({width:300,height:300,resId:e.id,rt_preview_url:e.preview,rt_url:e.sample},e);Km("action_role_add"),Tg({meta:{type:"lottie"},attribute:t})};return(0,Kg.jsxs)("div",{className:hb()({[_5().rolePopoverWarpItem]:!0,[_5().rolePopoverWarpItem4]:(i+1)%4===0}),children:[(0,Kg.jsx)("div",{className:_5().rolePopoverWarpItemImg,onClick:()=>a(t),children:(0,Kg.jsx)(GE,{path:t.sample,preview:t.preview})}),(0,Kg.jsx)("div",{className:_5().rolePopoverWarpItemName,children:t.title})]})},w5=j5,k5=e=>{var t=e.title,i=e.bindClickMore,a=e.data,o=e.isMore,s=e.id,l=e.buttonShow,c=(0,r.useRef)(),d=(0,r.useState)(),u=(0,n.Z)(d,2),p=(u[0],u[1]),v=e=>(0,Kg.jsxs)("div",{className:_5().rolePopoverWarp,children:[(0,Kg.jsx)("div",{className:_5().rolePopoverWarpTitle,children:e.class_name}),(0,Kg.jsx)("div",{className:_5().rolePopoverWarpContent,children:e.sub_list.map(((e,t)=>(0,Kg.jsx)(w5,{i:e,index:t},e.id)))})]});return(0,Kg.jsxs)("div",{className:hb()(_5().simpleShow,{[_5().moreShow]:o}),ref:c,children:[(0,Kg.jsxs)("div",{className:_5().simpleShowTop,children:[(0,Kg.jsx)("div",{className:_5().simpleShowTopLeft,children:t}),l&&(0,Kg.jsx)("div",{className:_5().simpleShowTopRight,onClick:()=>{!o&&p({id:s,class_name:t}),i(o?"role":"role-more"),Km("action_more")},children:o?"<\u8fd4\u56de":"\u66f4\u591a>"})]}),(0,Kg.jsx)("div",{className:_5().simpleShowContent,style:{position:"relative",overflowY:"auto",overflowX:"hidden"},children:a.map(((e,t)=>(0,Kg.jsx)(tE.Z,{content:v(e),placement:"right",overlayClassName:_5().rolePopover,getPopupContainer:e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.parentNode},zIndex:999999,children:(0,Kg.jsx)("div",{className:_5().item,children:(0,Kg.jsx)("img",{src:e.preview,alt:"lottie",style:{width:"100%",height:"100%"}})})},e.id)))})]})},T5=k5,Z5=e=>{var t=e.goBack,i=e.title,a=e.id,n=(0,DI.ZP)((()=>a&&SF({class_id:a})),{refreshDeps:[a],onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),r=n.data,o=void 0===r?[]:r,s=n.loading;return(0,Kg.jsx)(gE,{loading:s,rows:5,style:{overflow:"hidden",paddingTop:16,paddingRight:0},children:(0,Kg.jsx)("div",{className:_5().RolePageWarp,style:{overflowY:"hidden"},children:(0,Kg.jsx)(T5,{title:i,bindClickMore:t,data:o,buttonShow:!0,isMore:!0})})})},C5=(0,r.memo)(Z5),N5=e=>{e.theme;var t=(0,r.useState)(),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=(0,DI.ZP)(NF,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),l=s.data,c=void 0===l?[]:l,d=s.loading;return(0,Kg.jsx)(Kg.Fragment,{children:a?(0,Kg.jsx)(C5,{id:a.id,title:a.class_name,goBack:()=>o(void 0)}):(0,Kg.jsx)(gE,{loading:d,rows:5,title:!0,more:!0,style:{paddingTop:16,paddingRight:0,overflow:"hidden"},children:(0,Kg.jsx)("div",{className:_5().RolePageWarp,children:c.map((e=>(0,Kg.jsx)(T5,{title:e.class_name,bindClickMore:()=>{o({class_name:e.class_name,id:e.id})},data:null===e||void 0===e?void 0:e.sub_list.slice(0,3),id:e.id,isMore:!1,buttonShow:(null===e||void 0===e?void 0:e.sub_list.length)>3},e.id)))})})})},S5=N5,I5="EDITOR_CONFIG";function A5(){return localStorage.getItem(I5)||"{}"}function P5(e){var t=A5();return JSON.parse(t)[e]||!1}function M5(e,t){var i=A5(),a=JSON.parse(i);a[e]=t,localStorage.setItem(I5,JSON.stringify(a))}function E5(e){var t=(0,r.useState)(P5(e)),i=(0,n.Z)(t,2),a=i[0],o=i[1];return{state:a,getConfig:()=>P5(e),setConfig:()=>{M5(e,a)},setState:e=>{o(e)}}}function L5(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;setTimeout((()=>{dh(e)}))}(0,d.Z)((e=>{Lb(e?iw()[e][0]:0,!1)}),500);function D5(e){var t=(0,r.useState)([]),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=(0,r.useState)([]),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(""),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useRef)([]),b=(0,r.useRef)([]),_=(0,r.useRef)(!1),j=(0,r.useRef)({}),w=(0,r.useRef)([]),k=Ep(),T=k.update,Z=k.value,C=(0,r.useMemo)((()=>Z.height!==Number(e.height)||Z.width!==Number(e.width)),[Z.height,Z.width,e.height,e.width]),N=AK((e=>{var t=LA(e),i=zA(e),a=FA(e);o(t),m(e.info.doc_md5),d(i),y.current=t,b.current=i,_.current=a,j.current=e.doc.canvas,w.current=e.assets,x(!0)}),(()=>{}),(e=>!1)),S=N.run,I=N.loading;function A(e){I||g||S(e)}function P(t){C?xp.default.info("\u6682\u4e0d\u652f\u6301\u6dfb\u52a0\u4e0d\u540c\u5c3a\u5bf8\u7684\u7247\u6bb5"):xh({index:(null!==t&&void 0!==t?t:Ow())+1,templates:y.current,incrementalPageTime:Number(e.duration),warnAssets:w.current})}function M(){sw(y.current),Lb(0,!1),Mk([...b.current]),Xk(_.current),zp(y.current[0].templateId),T(j.current),L5(),gh(w.current)}function E(e,t){C?xp.default.info("\u6682\u4e0d\u652f\u6301\u6dfb\u52a0\u4e0d\u540c\u5c3a\u5bf8\u7684\u7247\u6bb5"):xh({index:(null!==t&&void 0!==t?t:Ow())+1,templates:[e],incrementalPageTime:e.pageAttr.pageInfo.pageTime,warnAssets:w.current})}function L(e,t){lh({incrementalTime:e.pageAttr.pageInfo.pageTime-Bw().videoInfo.allAnimationTime,callback:i=>{i||(ow(e),Rw().length<=1&&(Mk([...b.current]),T(j.current)),zp(e.templateId),L5(t),gh(w.current))}})}function D(){window.history.replaceState("",document.title,"?&upicId=".concat(e.id)),M(),Dp(v),T(j.current)}return{getTemplate:A,runGetTemplate:S,loading:I,loaded:g,parts:a,templateAudios:c,insertAllTemplates:P,handleReplaceAllTemplate:M,insertTemplate:E,handleReplace:L,afterReplace:L5,switchDraft:D,isDifferCurrentSize:C}}var R5=D5,z5=i(87290),F5=i.n(z5);function O5(e){var t=e.data,i=e.onClick,a=e.clip,o=(0,uL.c)((()=>({type:hP,item:{attribute:(0,u.Z)((0,u.Z)({},t.canvas),{},{rt_preview_url:t.poster}),offset:{offsetLeft:0,offsetTop:0,offsetLeftPercent:0,offsetTopPercent:0},replace:e=>i({trigger:"drag",dropContainer:e}),add:()=>{var e=nw([t]);setTimeout((()=>{Lb(e?iw()[e][0]:0,!1)}))}},collect:e=>({isDragging:!!e.isDragging()})}))),s=(0,n.Z)(o,3),l=s[0],c=s[1],d=s[2];return(0,r.useEffect)((()=>{d((0,vL.r)(),{captureDraggingState:!0})}),[]),(0,Kg.jsxs)("div",{ref:c,className:F5().poster,onClick:()=>{i({trigger:"click"})},style:{opacity:l.isDragging?0:1},children:[!l.isDragging&&t.poster&&(0,Kg.jsx)(UM,{poster:t.poster,clip:a,src:t.small_url}),(0,Kg.jsx)("div",{className:F5().duration,children:Th(parseInt("".concat(t.pageAttr.pageInfo.pageTime/1e3),10))})]})}var B5=(0,hp.Pi)(O5);function W5(e){var t=e.templateBaseInfo,i=e.goBack,a=e.type,o=E5("modulePartForAdd"),s=E5("allModulePartForAdd"),l=(0,r.useState)(!1),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=Lw(),_=b.template,j=(0,r.useState)(),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=(0,r.useMemo)((()=>{if(null!==_&&void 0!==_&&_.id)return Du(_.id)}),[null===_||void 0===_?void 0:_.id]),C=R5(t),N=C.insertTemplate,S=C.handleReplaceAllTemplate,I=C.runGetTemplate,A=C.loading,P=C.handleReplace,M=C.insertAllTemplates,E=C.parts,L=C.switchDraft,D=C.isDifferCurrentSize,R=(0,r.useMemo)((()=>{var e=[];return E.length&&E.reduce(((t,i)=>{var a,n=(null===i||void 0===i||null===(a=i.pageAttr)||void 0===a?void 0:a.pageInfo)||{},r=n.pageTime,o=void 0===r?0:r,s=t+o;return e.push([t,s]),s}),0),e}),[E]);function z(e,t){var i=t.trigger,n=t.dropContainer;if(0===aw().length)Km("click"===i?"action_template_replace":"bottom"===n?"drag_replace_002 ":"drag_replace_001",{action_label:a}),P(e,Z||0);else if(o.getConfig())N(e,Z);else{if(D)return void nA.Z.info({title:"\u63d0\u793a",content:"\u6682\u4e0d\u652f\u6301\u6dfb\u52a0/\u66ff\u6362\u4e0d\u540c\u5c3a\u5bf8\u7684\u7247\u6bb5",okText:"\u77e5\u9053\u4e86"});T(t),y(e),u(!0)}}function F(){Km("template_applyAll"),0===aw().length&&1===Rw().length?(Km("action_template_replaceAll",{action_label:a}),S()):s.getConfig()?(Km("action_template_replaceAll",{action_label:a}),M(Z)):h(!0)}return(0,r.useEffect)((()=>{I("draft"===a?{upicId:t.id}:{picId:t.id})}),[t.id]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(rE,{children:(0,Kg.jsxs)("div",{className:F5().wrap,children:[(0,Kg.jsxs)("div",{className:F5().header,children:[(0,Kg.jsxs)("span",{className:F5().back,onClick:i,children:["<  ",t.title]}),"draft"===a&&D?(0,Kg.jsx)(CS.Z,{className:F5()["replace-button"],onClick:()=>{L(),u(!1),Km("action_template_replaceAll",{action_label:a})},children:"\u5207\u6362\u8349\u7a3f"}):(0,Kg.jsxs)(CS.Z,{className:F5()["replace-button"],onClick:F,children:["\u5e94\u7528\u5168\u90e8",E.length,"\u9875\u7247\u6bb5"]})]}),(0,Kg.jsx)(gE,{loading:A,columns:2,children:(0,Kg.jsx)("div",{className:F5().list,children:E.map(((e,t)=>(0,Kg.jsx)(B5,{data:e,clip:R[t],onClick:t=>z(e,t)},e.templateId)))})})]})}),(0,Kg.jsx)(QJ,{visible:d,footer:null,width:360,centered:!0,onCancel:()=>{y(void 0),u(!1),o.setState(!1)},children:(0,Kg.jsxs)("div",{className:"replace-template-module",children:[(0,Kg.jsx)("h3",{children:"\u5c06\u6a21\u677f\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762\uff1f"}),(0,Kg.jsxs)("div",{className:"replace-button-box",children:[(0,Kg.jsx)(CS.Z,{onClick:()=>{o.setConfig(),P(x,Z),u(!1),Km("click"===(null===k||void 0===k?void 0:k.trigger)?"action_template_replace":"bottom"===(null===k||void 0===k?void 0:k.dropContainer)?"drag_replace_002 ":"drag_replace_001",{action_label:a})},children:"\u66ff\u6362\u5f53\u524d\u9875\u9762"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:()=>{o.setConfig(),N(x,Z),u(!1),Km("click"===(null===k||void 0===k?void 0:k.trigger)?"action_template_insert":"canvas"===(null===k||void 0===k?void 0:k.dropContainer)?"drag_add_001":"drag_add_002",{action_label:a})},children:"\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762"})]}),(0,Kg.jsx)(WP.Z,{checked:o.state,onChange:e=>{o.setState(e.target.checked)},children:"\u9ed8\u8ba4\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762\uff0c\u4e0d\u518d\u63d0\u9192\u3002"})]})}),(0,Kg.jsx)(QJ,{visible:m,footer:null,width:360,centered:!0,onCancel:()=>{h(!1),s.setState(!1)},children:(0,Kg.jsxs)("div",{className:"replace-template-module",children:[(0,Kg.jsxs)("h3",{children:["\u5f53\u524d\u6a21\u677f\u5305\u542b",E.length,"\u4e2a\u7247\u6bb5"]}),(0,Kg.jsx)("h3",{children:"\u662f\u5426\u5168\u90e8\u66ff\u6362\u5f53\u524d\u6240\u6709\u9875\u9762?"}),(0,Kg.jsxs)("div",{className:"replace-button-box",children:[(0,Kg.jsx)(CS.Z,{hidden:D,onClick:()=>{s.setConfig(),M(Z),h(!1),Km("action_template_insert",{action_label:a})},children:"\u6dfb\u52a0\u5168\u90e8\u9875\u9762"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:()=>{Km("action_template_replaceAll",{action_label:a}),s.setConfig(),S(),h(!1)},children:"\u66ff\u6362\u5168\u90e8\u9875\u9762"})]}),(0,Kg.jsx)(WP.Z,{value:s.state,onChange:e=>{s.setState(e.target.checked)},children:"\u9ed8\u8ba4\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762\uff0c\u4e0d\u518d\u63d0\u9192\u3002"})]})})]})}var V5=(0,hp.Pi)(W5);function U5(){var e=NJ(),t=e.checkLoginStatus,i=(0,r.useState)([{id:-1}]),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,DI.ZP)(ov,{manual:!0,onSuccess:e=>{1===e.stat&&s(e.msg)}}),c=(0,DI.ZP)(sv,{manual:!0,onSuccess:e=>{}}),d=(0,DI.ZP)(lv,{manual:!0,onSuccess:e=>{}}),u=function(){var e=(0,p.Z)(m().mark((function e(i,a,n){var r,l;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.stopPropagation(),!t()){e.next=3;break}return e.abrupt("return");case 3:if(r=!n&&!o.some((e=>e.id===a)),l={stat:-1,msg:""},!r){e.next=11;break}return e.next=8,c.run(a);case 8:l=e.sent,e.next=14;break;case 11:return e.next=13,d.run(a);case 13:l=e.sent;case 14:1===l.stat?(s((e=>r?[...e,{id:a}]:null===e||void 0===e?void 0:e.filter((e=>e.id!==a)))),xp.default.success(l.msg)):xp.default.error(l.msg);case 15:case"end":return e.stop()}}),e)})));return function(t,i,a){return e.apply(this,arguments)}}();return{moduleFavList:o,beMyFav:u,getNormalUserFavs:l}}var G5=e=>{var t,i=e.data,a=e.beforeReplace,o=e.className,s=void 0===o?"":o,l=e.width,c=void 0===l?150:l,d=e.type,p=e.setUpdateTime,v=(0,yp.Z)(e,["data","beforeReplace","className","width","type","setUpdateTime"]),m=U5(),h=m.beMyFav,f=(0,r.useState)("collection"===d||i.isFav),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=Lw(),_=b.template,j=E5("moduleForAdd"),w=(0,r.useMemo)((()=>{if(null!==_&&void 0!==_&&_.id)return Du(_.id)}),[null===_||void 0===_?void 0:_.id]),k=(0,r.useState)(!1),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=(0,r.useRef)(),S=(0,r.useRef)(!1),I=i.imgUrl?"".concat(i.host).concat(i.imgUrl):"",A=i.small_url?"".concat(i.host).concat(i.small_url):"",P=R5(i),M=P.handleReplaceAllTemplate,E=P.getTemplate,L=P.loaded,D=P.insertAllTemplates,R=P.parts,z=P.isDifferCurrentSize,F=P.switchDraft;function O(e){0===aw().length&&1===Rw().length?(Km("bottom"===e?"drag_add_002 ":"drag_add_001",{action_label:d}),M()):j.getConfig()?D(w):C(!0)}var B=(0,uL.c)((()=>({type:hP,item:{attribute:{width:i.width,height:i.height,rt_preview_url:I},offset:{offsetLeft:0,offsetTop:0,offsetLeftPercent:0,offsetTopPercent:0},add:()=>{L?D():N.current=()=>{D()}},replace:e=>{L?O(e):N.current=O}},end:()=>{N.current&&S.current&&(N.current(),N.current=void 0)},collect:e=>({isDragging:!!e.isDragging()})}))),W=(0,n.Z)(B,3),V=W[0],U=W[1],G=W[2];return(0,r.useEffect)((()=>{S.current=L,N.current&&L&&(N.current(),N.current=void 0)}),[L]),(0,r.useEffect)((()=>{V.isDragging&&E("draft"===d?{upicId:i.id}:{picId:i.id})}),[V.isDragging]),(0,r.useEffect)((()=>{G((0,vL.r)(),{captureDraggingState:!0})}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({ref:U,className:"template-item-wrap ".concat(s),style:{width:c,height:c*(Number(i.height)/Number(i.width))},onClick:()=>a(i)},v),{},{children:(0,Kg.jsxs)("div",{className:"video-container",children:["draft"!==d&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"module-time",children:Th(parseInt("".concat(Number(i.duration)/1e3),10))}),(0,Kg.jsx)("div",{className:"module-count",children:"\u5171".concat(i.pages,"\u4e2a\u7247\u6bb5")})]}),!V.isDragging&&(0,Kg.jsx)(UM,{poster:I,src:A}),"draft"!==d&&(0,Kg.jsx)(iP,{className:hb()("module-myFav",{active:x}),type:"iconaixin",onClick:e=>{Ph(e),Km("action_template_collection",{action_label:i.id}),"collection"===d&&p&&p(new Date),h(e,i.id,x),y(!x)}}),"draft"===d&&(0,Kg.jsx)("div",{className:"videoBottom",children:(0,Kg.jsxs)("div",{className:"videoBottomWarp",children:[(0,Kg.jsx)("img",{className:"videoBottomImg",src:null===i||void 0===i||null===(t=i.userInfo)||void 0===t?void 0:t.avatar,alt:""}),(0,Kg.jsx)("div",{className:"videoBottomName",children:null===i||void 0===i?void 0:i.title}),314===c&&(0,Kg.jsx)("div",{className:"videoBottomTime",children:null===i||void 0===i?void 0:i.updated})]})})]})})),(0,Kg.jsx)(QJ,{visible:Z,footer:null,width:360,centered:!0,onCancel:()=>{C(!1),j.setState(!1)},children:(0,Kg.jsxs)("div",{className:"replace-template-module",children:[(0,Kg.jsxs)("h3",{children:["\u5f53\u524d\u6a21\u677f\u5305\u542b",R.length,"\u4e2a\u7247\u6bb5"]}),(0,Kg.jsx)("h3",{children:"\u662f\u5426\u5168\u90e8\u66ff\u6362\u5f53\u524d\u6240\u6709\u7247\u6bb5?"}),(0,Kg.jsxs)("div",{className:"replace-button-box",children:[(0,Kg.jsx)(CS.Z,{hidden:z,onClick:()=>{j.setConfig(),D(w),C(!1)},children:"\u6dfb\u52a0\u5168\u90e8\u7247\u6bb5"}),"draft"===d?(0,Kg.jsx)(CS.Z,{type:"primary",style:{width:126},onClick:()=>{F(),C(!1)},children:"\u5207\u6362\u8349\u7a3f"}):(0,Kg.jsx)(CS.Z,{type:"primary",onClick:()=>{j.setConfig(),M(),C(!1)},children:"\u66ff\u6362\u5168\u90e8\u7247\u6bb5"})]}),(0,Kg.jsx)(WP.Z,{onChange:e=>{j.setState(e.target.checked)},children:"\u9ed8\u8ba4\u6dfb\u52a0\u4e3a\u65b0\u7247\u6bb5\uff0c\u4e0d\u518d\u63d0\u9192\u3002"})]})})]})},X5=(0,r.memo)(G5),q5=(0,_p.Z)(),H5=e=>{var t,i=e.filters,a=e.beforeReplace,o=e.request,s=e.type,l=(0,r.useRef)(),c=(0,Cm.Z)(document.querySelector(".template-list")),d=c.width,p=void 0===d?0:d,v=Np(),m=v.templateInfo,h=m.last_templ_id,f=m.picId,g=q5.picId||f||h,x=(0,r.useState)(g),y=(0,n.Z)(x,2),b=y[0],_=y[1],j="w"!==(null===i||void 0===i||null===(t=i.filter)||void 0===t?void 0:t.shape)&&{containerSelector:".template-list",itemSelector:".template-list-item"};return(0,r.useEffect)((()=>{p>0&&_(Number(g))}),[p,g]),(0,Kg.jsx)(yE,{manualRequest:!1,ref:l,request:o,masonry:j,beforeLoadData:e=>{var t=e.page,i=e.filter,a=(0,yp.Z)(e,["page","filter"]);return(0,u.Z)((0,u.Z)({},a),{},{p:t,filter:i?(0,o1.cv)(JSON.stringify(i)):""})},params:(0,u.Z)({template_id:b},i),skeleton:{rows:3,columns:1,className:"template-list-skeleton"},emptyDesc:(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("p",{children:["\u672a\u627e\u5230\u201c",(0,Kg.jsx)("span",{className:"empty-keyword",children:null===i||void 0===i?void 0:i.w}),"\u201d\u76f8\u5173\u89c6\u9891\u6a21\u677f"]}),(0,Kg.jsx)("p",{children:"\u5efa\u8bae\u66f4\u6362\u5176\u4ed6\u7c7b\u4f3c\u5173\u952e\u8bcd\u641c\u7d22"})]}),children:e=>{var t,n=e.list;return(0,Kg.jsx)("div",{className:hb()("template-list",{"template-list-w":"w"===(null===i||void 0===i||null===(t=i.filter)||void 0===t?void 0:t.shape)||1===i.ratio}),children:n.map((e=>{var t,n;return(0,Kg.jsx)(X5,{className:hb()("template-list-item",{"template-list-item-masonry":j,"template-list-item-w":"w"===(null===i||void 0===i||null===(t=i.filter)||void 0===t?void 0:t.shape)||1===i.ratio}),data:e,width:"w"===(null===i||void 0===i||null===(n=i.filter)||void 0===n?void 0:n.shape)||1===i.ratio?314:150,beforeReplace:a,type:s},e.id)}))})}})},Y5=(0,r.memo)(H5),K5=i(93996),Q5=i.n(K5);function J5(e){var t=e.active,i=e.onChange;return(0,Kg.jsxs)("div",{className:Q5().ratioRadio,children:[(0,Kg.jsx)("div",{className:Q5().ratioRadioLeft,children:"\u6bd4\u4f8b\uff1a"}),[{name:"\u6a2a\u677f",shape:"w",key:1},{name:"\u7ad6\u677f",shape:"h",key:2},{name:"\u65b9\u5f62",shape:"c",key:0}].map((e=>(0,Kg.jsx)(FP.ZP,{onClick:()=>i(e),value:e.shape,checked:t===e.key,children:e.name},"shape-".concat(e.shape))))]})}var $5=J5,e4={g:"\u5206\u7c7b",c:"\u7528\u9014",d:"\u573a\u666f",i:"\u884c\u4e1a"};function t4(e,t,i,a){var n;return n="radio"===a?i.map((e=>({label:e.name,value:e.id}))):i.map((e=>({label:e.name,value:e.params,checked:!!e.active,key:e.id}))),{key:t,label:e,type:a,options:n}}var i4=e=>{var t=e.beforeReplace,i=e.request,a=e.type,o=Lp(),s=o.width,l=o.height,c=(0,dx.Z)("template"===a?{filter:{shape:_h()},width:s,height:l}:{ratio:1}),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=Ep(),m=v.value;(0,r.useEffect)((()=>{"template"===a&&p({filter:{shape:_h()},width:s,height:l})}),[null===m||void 0===m?void 0:m.width,null===m||void 0===m?void 0:m.height]);var h=(0,r.useState)([]),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,DI.ZP)(tv,{onSuccess:e=>{var t=t4("\u6bd4\u4f8b","shape",e.shape,"radio"),i=t4("\u98ce\u683c","tags.st",e.tags.st),a=Object.keys(e.classes).map((t=>t4(e4[t],"classes.".concat(t),e.classes[t]))),n=[t,...a,i];x(n)}}),b=y.run;function _(e){e.shape;var t=(0,yp.Z)(e,["shape"]);p({filter:e}),b((0,o1.cv)(JSON.stringify(t)))}return(0,Kg.jsx)(rE,{search:"template"===a?(0,Kg.jsx)(d1,{searchKey:"w",filters:g,onChange:e=>p({w:e.w}),onFilter:_,placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22",defaultValue:{shape:_h()},className:"template-categories",destroyFilterOnHide:!0}):(0,Kg.jsx)($5,{active:u.ratio,onChange:e=>{p({ratio:e.key})}}),children:(0,Kg.jsx)(Y5,{filters:u,beforeReplace:t,request:i,type:a})})},a4=i4,n4=e=>{var t=e.request,i=e.beforeReplace,a=(0,r.useState)(1),o=(0,n.Z)(a,2),s=o[0],l=o[1];return(0,Kg.jsx)(rE,{search:(0,Kg.jsx)($5,{active:s,onChange:e=>{l(e.key)}}),children:(0,Kg.jsx)(yE,{request:t,params:{ratio:s},masonry:!1,skeleton:{rows:3,columns:1,className:"draft-list-skeleton"},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{className:hb()("draft-list",{"draft-list-w":1===s}),children:t.map((e=>(0,Kg.jsx)(X5,{className:"draft-item",data:e,width:1===s?314:150,beforeReplace:e=>i((0,u.Z)((0,u.Z)({},e),{},{pages:e.total_duration})),type:"draft"},e.id)))})}})})},r4=(0,r.memo)(n4),o4=YP.Z.TabPane;function s4(){var e=(0,r.useState)(),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)("template"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=NJ(),u=d.checkLoginStatus,p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=Cp(),g=f.ratioType,x=(0,r.useState)(g),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(g),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=Lf(),C=Z.open;function N(e){a(e),h(!0),"draft"===l&&Km("action_template_draft")}return(0,r.useEffect)((()=>{var e=Lh("guide");null!==e&&void 0!==e&&e.novice||(C(_m[1][0]),Mh("guide",{novice:!0}))}),[]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(YP.Z,{className:"templatePanelTabs",activeKey:l,destroyInactiveTabPane:!0,onChange:e=>{if(h(!1),a(void 0),Km("panel_".concat(e)),"collection"===e||"draft"===e){var t=u();if(t)return;c(e)}else c(e)},children:[{tab:"\u6a21\u677f",key:"template",require:iv,searchShow:!0},{tab:"\u6536\u85cf",key:"collection",require:nv,searchShow:!1,active:b,setactive:_},{tab:"\u8349\u7a3f",key:"draft",require:rv,draftActive:k,setDraftActive:T}].map((e=>(0,Kg.jsxs)(o4,{tab:null===e||void 0===e?void 0:e.tab,children:["draft"===e.key?(0,Kg.jsx)(r4,{request:rv,beforeReplace:N}):(0,Kg.jsx)(a4,{beforeReplace:N,request:null===e||void 0===e?void 0:e.require,type:e.key}),(0,Kg.jsx)("div",{style:{height:"100%",width:"100%",position:"absolute",top:0,zIndex:30,backgroundColor:"#f3f5f6"},hidden:!m,children:i&&(0,Kg.jsx)(V5,{type:l,goBack:()=>h(!1),templateBaseInfo:i})})]},null===e||void 0===e?void 0:e.key)))})})}var l4=(0,r.memo)(s4),c4=i(57119);function d4(){var e=(0,kp.TL)(),t=(0,kp.CG)((e=>({musicStatus:e.musicStatus}))),i=t.musicStatus;function a(t){(0,qe.Z)(i,t)||e(kp.JW.setMusicStatus(t))}return{musicStatus:i,updateMusicStatus:a}}function u4(e,t){var i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=2097152,n=Math.ceil(e.size/a),r=0,o=new(hK().ArrayBuffer),s=new FileReader;function l(){var t=r*a,n=t+a>=e.size?e.size:t+a;s.readAsArrayBuffer(i.call(e,t,n))}s.onload=e=>{if(o.append(e.target.result),r+=1,r<n)l();else{var i=o.end();t(i)}},s.onerror=()=>{console.warn("oops, something went wrong.")},s.onprogress=e=>{},l()}function p4(e,t){return v4.apply(this,arguments)}function v4(){return v4=(0,p.Z)(m().mark((function e(t,i){var a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(a=t.size,n=52428800,!(a>n)){e.next=5;break}return xp.default.error("\u8bf7\u52ff\u4e0a\u4f20\u8d85\u8fc750M\u7684\u97f3\u4e50!"),e.abrupt("return",!1);case 5:if(["audio/mpeg","audio/x-m4a","audio/x-ms-wma"].some((e=>e===t.type))){e.next=8;break}return xp.default.error("\u4e0a\u4f20\u5931\u8d25\uff0c\u652f\u6301\u4e0a\u4f2050M\u4ee5\u4e0bMP3 M4A WMA\u672c\u5730\u97f3\u4e50"),e.abrupt("return",!1);case 8:i({file:t});case 9:case"end":return e.stop()}}),e)}))),v4.apply(this,arguments)}function m4(e){var t=e.onSucceed,i=e.onError,a=e.setProgress,o=e.setFileState,s=(0,r.useState)({}),l=(0,n.Z)(s,2),c=l[0],d=l[1],v=(e,t)=>{if(e.lengthComputable&&"function"===typeof a){var i=Math.round(e.loaded/e.total*100);a(i>99?99:i,t)}},h=function(){var e=(0,p.Z)(m().mark((function e(a){var n,r,o,s,l,c,d,u,p,h,f,g,x=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=x.length>1&&void 0!==x[1]?x[1]:"audio",r=a.name,o=a.size,s=a.type,l={},"audio"!==n){e.next=9;break}return e.next=6,Wz({name:r,size:o,type:s});case 6:l=e.sent,e.next=13;break;case 9:if("image"!==n){e.next=13;break}return e.next=12,LB(r,s,o);case 12:l=e.sent;case 13:if(0!==l.code){e.next=23;break}return c=l.data,d=c.host,u=c.payload,p=$W({url:d,onprogress:e=>v(e,a)}),h=p.send,f=KW(a,u),e.next=19,h(f);case 19:g=e.sent,0===g.code?t(g):i&&i(g),e.next=24;break;case 23:i&&i(l);case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=(0,DI.ZP)(Jz,{manual:!0,pollingInterval:1e3,pollingWhenHidden:!1,onSuccess(e,t){var i,a;0!==(null===(i=e[0])||void 0===i?void 0:i.scan_flag)&&(null===(a=t[0])||void 0===a||a.callback(),g())},onError(){xp.default.error("\u63d0\u4ea4\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5"),g()}}),g=(f.loading,f.cancel),x=f.run,y=(0,DI.ZP)(SD,{manual:!0,pollingInterval:1e3,pollingWhenHidden:!1,onSuccess(e,t){var i,a,n;1===(null===(i=e[0])||void 0===i?void 0:i.state)?(o(null===(a=e[0])||void 0===a?void 0:a.state,(0,u.Z)((0,u.Z)({},c),e[0])),b()):o(null===(n=e[0])||void 0===n?void 0:n.state)},onError(){xp.default.error("\u63d0\u4ea4\u5931\u8d25\u8bf7\u7a0d\u540e\u91cd\u8bd5"),b()}}),b=y.cancel,_=y.run,j=function(){var e=(0,p.Z)(m().mark((function e(a,n,r,s){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:u4(a,function(){var e=(0,p.Z)(m().mark((function e(l){var c,u,p,h,f,g,x,y,b;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,iF({filename:n,folder_id:r,file_md5:l,file_type:s});case 2:if(c=e.sent,u=1005===c.code||"fileNotExist"===c.data.err,!u){e.next=14;break}return p=JW(c.data),h=$W({url:p,onprogress:e=>v(e,a)}),f=h.send,g=QW(a,c.data),e.next=10,f(g);case 10:x=e.sent,0===x.code?(d(null===x||void 0===x?void 0:x.data),o?_([null===x||void 0===x||null===(y=x.data)||void 0===y?void 0:y.file_id]):t(x)):i&&i(x),e.next=18;break;case 14:return e.next=16,aF({title:n,folder_id:r,file_md5:l,type:"file",source_tag:s});case 16:b=e.sent,0===b.code?t(b):i(b);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}}),e)})));return function(t,i,a,n){return e.apply(this,arguments)}}();return{uploadStat:h,uploadStatRecorder:j,handleProgress:v,run:x}}var h4=e=>{var t=e.children,i=e.gituploadId,a=e.onChoose,o=(0,r.useState)(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(0),p=(0,n.Z)(d,2),v=p[0],m=(p[1],(0,dx.Z)({visible:!1,progress:1,fileState:0})),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=m4({setFileState:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;g((0,u.Z)((0,u.Z)({},f),{},{fileState:e})),a(t||(0,u.Z)((0,u.Z)({},l),{},{progress:100,fileState:e}))},setProgress:(e,t)=>{g({visible:!0,progress:e}),a({file:t,progress:e,fileState:0})},onSucceed:()=>{g({visible:!1}),i()},onError:e=>{g({visible:!1}),xp.default.error(e.msg)}}),y=x.uploadStatRecorder,b={name:"file",showUploadList:!1,beforeUpload:e=>{p4(e,(e=>{a((0,u.Z)((0,u.Z)({},e),f)),c(e),y(e.file,e.file.name,v,""),Km("action_music_upload\u200b")}))}};return(0,Kg.jsx)(qW.Z,(0,u.Z)((0,u.Z)({},b),{},{accept:"audio/*",children:t}))},f4=h4;function g4(e,t){e.param;var i=e.request,a=e.deleteMusicReq,n=e.playingId,r=e.setPlayingId,o=e.mockList,s=e.reload,l=(0,yp.Z)(e,["param","request","deleteMusicReq","playingId","setPlayingId","mockList","reload"]),c=oh(),d=c.audioList,p=c.bindAddAudio,v=c.bindReplaceAudio;function m(){var e;null===t||void 0===t||null===(e=t.current)||void 0===e||e.reload(),s()}function h(e){var t,i,a,n;if(null!==e&&void 0!==e&&e.fileInfo&&(e.preview=null===e||void 0===e?void 0:e.fileInfo.file_path,e.cover_url=null===e||void 0===e?void 0:e.fileInfo.cover_path,null!==e&&void 0!==e&&null!==(t=e.fileInfo)&&void 0!==t&&null!==(i=t.values)&&void 0!==i&&i.duration))return e.total_time=1e3*(null===e||void 0===e||null===(a=e.fileInfo)||void 0===a||null===(n=a.values)||void 0===n?void 0:n.duration),e;return e.file_id&&(e.id=e.file_id),e.total_time=0,e.source_type=1===e.is_recording?3:1,e}return(0,Kg.jsx)("div",{style:{marginBottom:18,flex:1,height:0,position:"relative"},children:(0,Kg.jsx)(yE,(0,u.Z)((0,u.Z)({ref:t,emptyDesc:"\u4f60\u8fd8\u672a\u4e0a\u4f20\u4f60\u7684\u97f3\u9891",isEmpty:0==o.length,request:i,params:{pageSize:30},skeleton:{rows:4,columns:1}},l),{},{children:e=>{var t=e.list,i=[...o,...t];return(0,Kg.jsx)(Kg.Fragment,{children:i.map((e=>(0,Kg.jsx)(G2,{value:h(e),playingId:n,setPlayingId:r,audioList:d,bindAddAudio:p,bindReplaceAudio:v,deleteMusicReq:a,reload:m},e.id)))})}}))})}var x4=(0,r.forwardRef)(g4),y4=i(84559),b4=i.n(y4),_4=i(5072),j4=i(4273),w4=i.n(j4),k4=()=>(0,Kg.jsxs)("div",{className:w4().warn,children:[(0,Kg.jsx)("div",{className:w4().warnIcon,children:(0,Kg.jsx)(_4.Z,{})}),(0,Kg.jsx)("span",{children:"\u672a\u68c0\u6d4b\u5230\u5f55\u97f3\u8bbe\u5907\uff01"})]}),T4=k4,Z4=i(28680),C4=i(63543),N4=i.n(C4),S4=i(93982),I4=i.n(S4);function A4(){var e=new Date,t="",i=e.getFullYear(),a=e.getMonth()+1,n=e.getHours(),r=e.getMinutes(),o=e.getSeconds(),s=e.getDate();a>=1&&a<=9&&(a="0".concat(a)),s>=0&&s<=9&&(s="0".concat(s));var l="".concat(i+t+a+t+s).concat(n).concat(r).concat(o);return l}function P4(e){var t=parseInt(e),i=0,a=0;t>60&&(i=parseInt(t/60),t=parseInt(t%60),i>60&&(a=parseInt(i/60),i=parseInt(i%60)));var n=(t>=10?"":"0")+parseInt(t);return n="".concat((i>=10?"":"0")+parseInt(i),":").concat(n),n="".concat((a>=10?"":"0")+parseInt(a),":").concat(n),n}var M4=new(I4())({sampleBits:16,sampleRate:16e3,numChannels:1,compiling:!1}),E4={ready:{name:"\u51c6\u5907\u4e2d",showTxt:"\u70b9\u51fb\u6309\u94ae\u5f55\u97f3",className:"",icon:"luyin"},countDown:{name:"\u5012\u8ba1\u65f6\u4e2d",showTxt:"\u5012\u8ba1\u65f6\u51c6\u5907",className:"",icon:"luyin"},recording:{name:"\u5f55\u97f3\u4e2d",showTxt:"\u5f55\u97f3\u4e2d\u2026",className:w4().soundButtomRed,icon:"icontuoyuanxing"},recorded:{name:"\u5f55\u97f3\u7ed3\u675f\uff0c\u5f85\u4fdd\u5b58\u72b6\u6001",showTxt:"",className:"",icon:"iconbofang"},saved:{name:"\u4fdd\u5b58\u7ed3\u675f",showTxt:"\u70b9\u51fb\u8bd5\u542c",className:"",icon:"iconbofang"},uploading:{name:"\u4e0a\u4f20\u4e2d",showTxt:"\u4e0a\u4f20\u4e2d",className:"",icon:"iconbofang"}},L4=e=>{var t=600,i=(0,r.useState)("ready"),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,r.useRef)(E4.ready),c=(0,r.useState)(0),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,r.useState)(!1),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=(0,r.useState)(0),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=(0,r.useState)(""),j=(0,n.Z)(_,2),w=j[0],k=j[1],T=(0,r.useState)(""),Z=(0,n.Z)(T,2),C=Z[0],N=Z[1];(0,DI.ZP)(PD,{onSuccess:e=>{N(e.folder_id)}});var S=(0,r.useRef)(),I=(0,r.useState)(0),A=(0,n.Z)(I,2),P=A[0],M=A[1];function E(){M4.stop(),p(parseInt(M4.duration))}var L=m4({setProgress:e=>{b(e)},onSucceed:t=>{0===t.code&&(e&&e(),xp.default.info("\u4e0a\u4f20\u5b8c\u6bd5!"),b(100),Km("mike_audio_003"))},onError:e=>{xp.default.error(e.msg)}}),D=L.uploadStatRecorder;function R(){var e="\u5f55\u97f3".concat(A4(),".mp3");k(e),D(M4.getWAVBlob(),e,C,"recording"),M4.destroy()}var z=()=>{s("saved"),l.current=E4.saved},F=()=>{s("recording"),l.current=E4.recording,M4.start()},O=()=>{M4.destroy(),p(0),s("countDown"),l.current=E4.countDown},B=e=>{switch(o){case"ready":s("countDown"),l.current=E4.countDown,e&&e();break;case"countDown":F();break;case"recording":s("recorded"),l.current=E4.recorded,E();break;case"recorded":M4.play();break;case"saved":R(),s("uploading");break}},W=()=>{f(!h),clearInterval(S.current),h?M4.stopPlay():(M4.play(),S.current=setInterval((()=>{M((e=>e+1))}),1e3))},V=()=>{M4.destroy(),clearInterval()};return M4.onprogress=function(e){var i=parseInt(e.duration);i<=t&&p(i)},(0,r.useEffect)((()=>{P>u&&(clearInterval(S.current),M(0),M4.stopPlay(),f(!1))}),[P]),{time:u,currentTime:P,progress:y,formatCurrentTime:P4(P),formatTime:P4(u),fileName:w,isPlaying:h,status:o,statusInfo:l.current,setStatus:s,changeStatus:B,beginAudio:F,saveAudio:z,reset:O,playRecorder:W,destroy:V}},D4=L4,R4=e=>{var t=e.onChange,i=D4(t),a=(i.time,i.formatTime),o=(i.currentTime,i.formatCurrentTime),s=i.fileName,l=i.progress,c=i.isPlaying,d=i.status,u=i.statusInfo,p=i.changeStatus,v=i.beginAudio,m=i.saveAudio,h=i.reset,f=i.playRecorder,g=i.destroy,x=(0,r.useRef)(),y=(0,r.useState)(3),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=()=>{clearInterval(x.current),v()},k=()=>{x.current=setInterval((()=>{j((e=>e-1))}),1e3)},T=()=>{switch(d){case"ready":p(),k(),Km("mike_audio_002");break;case"recording":p();break;case"recorded":f();break;case"saved":f();break}},Z=()=>{j(3),k(),h()};return(0,r.useEffect)((()=>(_<=0&&w(),()=>{clearInterval()})),[_]),(0,Z4.Z)((()=>{g()})),(0,Kg.jsxs)(QJ,{className:w4().recorderModal,visible:!0,width:617,onCancel:()=>{g(),t()},centered:!0,footer:null,children:[(0,Kg.jsx)("div",{className:w4().soundTitle,children:"\u5f55\u97f3"}),(0,Kg.jsx)("img",{src:N4(),className:w4().soundBgImg}),(0,Kg.jsxs)("div",{className:w4().sound,children:[(0,Kg.jsxs)("div",{className:w4().soundItem,children:[(0,Kg.jsx)(iP,{type:"iconyinxiao",className:w4().soundItemIcon}),(0,Kg.jsx)(iP,{type:"iconyinxiao",className:w4().soundItemIcon}),(0,Kg.jsx)("div",{className:w4().soundButtom,onClick:T,children:(0,Kg.jsx)("div",{className:w4().soundButtomInner,children:(0,Kg.jsx)(iP,{className:u.className,type:c?"iconzanting":u.icon})})}),(0,Kg.jsx)(iP,{type:"iconyinxiao",className:w4().soundItemIcon}),(0,Kg.jsx)(iP,{type:"iconyinxiao",className:w4().soundItemIcon})]}),(0,Kg.jsxs)("div",{className:w4().soundRight,children:[(0,Kg.jsx)("div",{className:w4().soundRightTip,children:"countDown"===d?"".concat(u.showTxt).concat(_):u.showTxt}),(0,Kg.jsxs)("div",{className:w4().soundRightTime,children:[["ready","countDown","recording"].includes(d)&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("span",{className:w4().primary,children:a}),"/00:10:00"]}),["recorded","saved"].includes(d)&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("span",{className:w4().primary,children:o})," /",a]})]})]}),(0,Kg.jsxs)("div",{className:w4().soundItem,children:["recording"===d&&(0,Kg.jsx)(CS.Z,{type:"primary",className:w4().soundButtonOver,onClick:T,children:"\u7ed3\u675f\u5f55\u97f3"}),"recorded"===d&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(CS.Z,{icon:(0,Kg.jsx)(iP,{type:"icondui"}),type:"primary",className:w4().soundButtonOver,onClick:m,children:"\u786e\u5b9a\u5b8c\u6210"}),(0,Kg.jsx)(CS.Z,{className:w4().soundButtonReset,onClick:Z,icon:(0,Kg.jsx)(iP,{type:"iconzhongzhi"}),children:"\u91cd\u65b0\u5f55\u5236"})]}),"saved"===d&&(0,Kg.jsx)(CS.Z,{type:"primary",className:w4().soundButtonOver,onClick:p,children:"\u786e\u8ba4"})]}),"uploading"===d&&(0,Kg.jsxs)("div",{className:w4().uploadProgress,children:[(0,Kg.jsxs)("div",{className:w4().uploadProgressRow,children:[(0,Kg.jsxs)("div",{className:w4().uploadProgressTxt,children:["\u3010\u5f55\u97f3\u3011",s,".MP3"]}),(0,Kg.jsxs)("div",{className:w4().uploadProgressTip,children:["\u4e0a\u4f20\u4e2d\u2026",l,"%"]})]}),(0,Kg.jsx)("div",{className:w4().uploadProgressRow,children:(0,Kg.jsx)(tM.Z,{percent:l})})]})]})]})},z4=R4,F4=e=>{var t=e.playingId,i=e.setPlayingId,a=d4(),o=a.musicStatus,s=o.isModalVisible,l=(0,r.useRef)(null),c=Yf(),d=c.showBindPhoneModal,u=(0,r.useState)([]),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)(!1),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=()=>{var e;null===(e=l.current)||void 0===e||e.reload(),m([])},k=()=>{if(navigator.mediaDevices.getUserMedia){var e={audio:!0};navigator.mediaDevices.getUserMedia(e).then((e=>{j(!1),x(!0)}),(()=>{j(!0),Km("mike_audio_004"),setTimeout((()=>{j(!1)}),2e3)}))}else console.error("\u6d4f\u89c8\u5668\u4e0d\u652f\u6301 getUserMedia")},T=e=>{if(null!==e&&void 0!==e&&e.file){var t=A(v),i=v.findIndex((t=>t.id=e.file.uid)),a={id:null===e||void 0===e?void 0:e.file.uid,title:null===e||void 0===e?void 0:e.file.name,total_time:0,fileInfo:void 0,progress:e.progress,fileState:e.fileState};i>-1?t[i]=a:t.push(a),m(t)}else m([e])};return(0,Kg.jsxs)("div",{className:b4().localUpload,children:[(0,Kg.jsxs)("div",{className:b4().localUploadTop,children:[(0,Kg.jsx)(f4,{gituploadId:w,onChoose:T,children:(0,Kg.jsxs)("div",{className:b4().topItem,children:[(0,Kg.jsx)(iP,{type:"iconshangchuan",className:b4().topItemIcon}),"\u4e0a\u4f20"]})}),(0,Kg.jsxs)("div",{className:b4().topItem,onClick:()=>{var e;1!==(null===(e=lA())||void 0===e?void 0:e.bind_phone)?d():k(),Km("mike_audio_001")},children:[(0,Kg.jsx)(iP,{type:"icona-luyin",className:b4().topItemIcon}),"\u5f55\u97f3"]})]}),g&&!_&&(0,Kg.jsx)(z4,{onChange:()=>{var e;null===(e=l.current)||void 0===e||e.reload(),x(!1)}}),_&&(0,Kg.jsx)(T4,{}),!s&&(0,Kg.jsx)(x4,{mockList:v,ref:l,param:{},request:nF,deleteMusicReq:Vz,playingId:t,setPlayingId:i,reload:()=>{m([])}})]})},O4=F4,B4=i(92750),W4=i.n(B4),V4=i(21563),U4=i.n(V4),G4=e=>{var t=e.filter_id,i=e.pid,a=e.resource_flag,o=(0,r.useState)([]),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(!1),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=oh(),f=h.audioList,g=h.bindAddAudio,x=h.bindReplaceAudio,y=Cf(),b=y.openSidePanel,_=Xf(),j=(_.close,_.value.playId),w=_.setPlayId;(0,DI.ZP)((()=>eF(i)),{onSuccess(e){var t=e;t.unshift({pid:"",class_name:"\u5168\u90e8"}),c(t)},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}});var k=(0,DI.ZP)((()=>$z(t)),{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),T=k.data,Z=void 0===T?[]:T,C=k.loading;return(0,Kg.jsxs)("div",{className:U4()["music-tabs-item"],children:[l&&(0,Kg.jsxs)("div",{className:U4()["music-filter"],children:[l.map(((e,t)=>t>3?null:(0,Kg.jsx)("div",{className:hb()(U4()["music-filter-item"],{[U4()["music-filter-item-choosed"]]:""===e.pid}),onClick:()=>{""!==e.pid&&(b({submenu:"".concat(e.class_name,"-").concat(e.pid),params:{classId:e.pid,resourceFlag:a}}),Km("action_music_filter",{action_label:JSON.stringify({class_id:e.pid,p_id:i})}))},children:e.class_name},e.pid))),l.length>4&&(0,Kg.jsx)(tE.Z,{visible:v,placement:"bottom",trigger:"click",destroyTooltipOnHide:!0,overlayClassName:U4()["music-filter-dropdown"],content:l.length>4?(0,Kg.jsx)("div",{className:U4()["music-filter-dropdown-wrap"],children:l.map(((e,t)=>t<=3?null:(0,Kg.jsx)("div",{className:U4()["music-filter-item"],style:{marginLeft:10,width:68,maxWidth:68},onClick:()=>{""!==e.pid&&(b({submenu:"".concat(e.class_name,"-").concat(e.pid),params:{classId:e.pid,resourceFlag:a}}),Km("action_music_filter",{action_label:JSON.stringify({class_id:e.pid,p_id:i})}))},children:e.class_name},e.pid)))}):null,onVisibleChange:m,children:(0,Kg.jsxs)("div",{className:hb()(U4()["music-filter-more"],U4()["music-filter-item"]),onClick:e=>{m((e=>!e)),Ph(e)},children:["\u66f4\u591a"," ",(0,Kg.jsx)(iP,{type:"iconxiala",style:{fontSize:10,transform:"scale(0.7)"}})]})})]}),(0,Kg.jsx)(gE,{loading:C,title:!0,more:!0,columns:2,rows:5,style:{overflowY:"auto",overflowX:"hidden"},children:((null===Z||void 0===Z?void 0:Z.items)||[]).map((e=>{var t=e.name,i=e.id,n=e.list;return(0,Kg.jsx)(dL,{title:t,style:{fontSize:12,color:"#262E48",lineHeight:"40px"},extraContent:(0,Kg.jsxs)("div",{className:U4().more,onClick:()=>{b({submenu:"".concat(t,"-").concat(i),params:{filterId:i,resourceFlag:a}}),Km("action_music_more",{action_label:i})},children:["\u66f4\u591a",">"]}),contentStyle:{display:"block",gridTemplateColumns:"none",gap:"auto"},children:n.map((e=>(0,Kg.jsx)(G2,{playingId:j,setPlayingId:w,audioList:f,bindAddAudio:g,bindReplaceAudio:x,value:(0,u.Z)((0,u.Z)({},e),{},{total_time:e.duration,id:e.gid,preview:e.url})},e.gid)))},"class_name-".concat(i))}))})]})},X4=G4;function q4(e){var t=e.keyword,i=oh(),a=i.audioList,o=i.bindAddAudio,s=i.bindReplaceAudio,l=(0,r.useState)("1025"),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=(0,r.useState)(),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=(0,DI.ZP)((()=>rF({keyword:t,params:{1025:{resource_flag:"GA",class_id:"1025",filter_id:""},1026:{resource_flag:"GA",class_id:"1026",filter_id:""}}})),{manual:!0,onSuccess:e=>{f(e)}}),x=g.run;return(0,r.useEffect)((()=>{x()}),[t]),(0,Kg.jsxs)("div",{className:U4()["music-search"],children:[(0,Kg.jsxs)(YP.Z,{defaultActiveKey:"1025",tabPosition:"top",className:U4()["music-search-tabs"],onChange:e=>{p(e)},children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u97f3\u4e50(".concat(h&&h["1025"],")")},"1025"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u97f3\u6548(".concat(h&&h["1026"],")")},"1026")]}),(0,Kg.jsx)(yE,{request:tF,params:{keyword:t,class_id:d,resource_flag:"GA",pageSize:20,filter_id:""},skeleton:{rows:4,columns:1},className:U4()["music-search-list"],children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)(G2,{audioList:a,bindAddAudio:o,bindReplaceAudio:s,value:(0,u.Z)((0,u.Z)({},e),{},{total_time:e.duration,id:e.gid,preview:e.url,source_type:void 0})},e.id)))})}})]})}var H4=(0,r.forwardRef)(q4);function Y4(){var e,t,i,a,o=Cf(),s=o.leftSideInfo,l=o.openSidePanel,c=oh(),d=c.audioList,p=c.bindAddAudio,v=c.bindReplaceAudio,m=(0,r.useState)([]),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=(0,r.useState)(""),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(null===(e=s.submenu)||void 0===e?void 0:e.split("-"))||[],w=(0,n.Z)(j,2),k=w[0],T=(w[1],(0,DI.ZP)((()=>{var e;return eF(null===(e=s.params)||void 0===e?void 0:e.classId)}),{manual:!0,onSuccess(e){var t=e||[];e.length>0&&t.unshift({pid:"",class_name:"\u5168\u90e8"}),g(t)},onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}})),Z=(T.loading,T.run);return(0,r.useEffect)((()=>{var e;null!==s&&void 0!==s&&null!==(e=s.params)&&void 0!==e&&e.classId?Z():g([]),_("")}),[null===s||void 0===s?void 0:s.params]),(0,Kg.jsxs)("div",{className:U4()["music-search-more"],children:[(0,Kg.jsxs)("div",{className:U4()["class-name"],onClick:()=>{l()},children:["<",k]}),f.length>0&&(0,Kg.jsx)("div",{className:hb()(U4()["music-filter"],U4()["music-filter-sub"]),children:f.map(((e,t)=>(0,Kg.jsx)("div",{className:hb()(U4()["music-filter-item"],{[U4()["music-filter-item-choosed"]]:b===e.pid}),onClick:()=>{_(e.pid),Km("action_music_filter",{action_label:JSON.stringify({class_id:e.pid,p_id:"1026"})})},children:e.class_name},e.pid)))}),(0,Kg.jsx)(yE,{request:tF,params:{keyword:"",filter_id:(null===(t=s.params)||void 0===t?void 0:t.filterId)||"",class_id:""===b?(null===(i=s.params)||void 0===i?void 0:i.classId)||"":b,resource_flag:(null===(a=s.params)||void 0===a?void 0:a.resourceFlag)||"GA",pageSize:20},skeleton:{rows:4,columns:1},className:U4()["music-search-list"],children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)(G2,{audioList:d,bindAddAudio:p,bindReplaceAudio:v,value:(0,u.Z)((0,u.Z)({},e),{},{total_time:e.duration,id:e.gid,preview:e.url,source_type:void 0})},e.id)))})}})]})}var K4=(0,r.forwardRef)(Y4),Q4=YP.Z.TabPane,J4=()=>{var e=d4(),t=e.updateMusicStatus,i=Df(),a=i.visible,o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=NJ(),u=d.checkLoginStatus,p=(0,r.useState)("1"),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(""),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=oh(),_=b.BGMList,j=_[0]||null,w=(0,r.useState)(),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=Cf(),N=C.leftSideInfo,S=C.openSidePanel;return(0,r.useEffect)((()=>{t({musicType:"bgm",musicItem:JSON.parse(JSON.stringify(j))})}),[j]),(0,r.useEffect)((()=>{a||t({musicType:"bgm",musicItem:JSON.parse(JSON.stringify(j))})}),[a]),(0,r.useEffect)((()=>{Lh("musicGuide")||c(!0)}),[]),(0,Kg.jsxs)(rE,{search:(0,Kg.jsx)(d1,{searchKey:"keyword",placeholder:"\u641c\u7d22\u4f60\u9700\u8981\u7684\u97f3\u4e50",onChange:e=>{var t=e.keyword;S(),y(t),Km("action_music_search")},defaultValue:{class_id:""},className:W4()["music-categories"]}),bottom:l?(0,Kg.jsxs)("div",{className:W4()["music-guide"],children:[(0,Kg.jsx)(c4.Z,{style:{color:"#FF5A21",fontSize:14,marginRight:5}}),"\u97f3\u9891\u4e2d\u6240\u542b\u201c\u7334\u5b50\u97f3\u60a6\u201d\u4eba\u58f0\u6c34\u5370\uff0c\u4e0b\u8f7d\u540e\u6d88\u5931\u3002",(0,Kg.jsx)("span",{className:W4().close,onClick:()=>{c(!1),Eh("musicGuide",!0)},children:"\u77e5\u9053\u4e86"})]}):null,children:[(0,Kg.jsx)(eM,{visible:!N.submenu,children:x?(0,Kg.jsx)(H4,{keyword:x}):(0,Kg.jsxs)(YP.Z,{className:W4().musicTabs,defaultActiveKey:"1",activeKey:m,onChange:e=>{if(Z(void 0),"3"===e){var t=u();if(t)return;h(e)}else h(e);Km("action_music_tabs",{action_label:e})},children:[(0,Kg.jsx)(Q4,{tab:"\u97f3\u4e50",children:(0,Kg.jsx)(X4,{filter_id:"1230883",pid:"1025",resource_flag:"GA"})},"1"),(0,Kg.jsx)(Q4,{tab:"\u97f3\u6548",children:(0,Kg.jsx)(X4,{filter_id:"1230860",pid:"1026",resource_flag:"GA"})},"2"),(0,Kg.jsx)(Q4,{tab:"\u6211\u7684\u97f3\u9891",children:(0,Kg.jsx)(O4,{playingId:T,setPlayingId:Z})},"3")]})}),(0,Kg.jsx)(eM,{visible:Boolean(N.submenu&&!x),children:(0,Kg.jsx)(K4,{})})]})},$4=J4;function e6(e){var t=e.src,i=e.onClick,a=e.className,n=e.data,o=e.type,s=e.clickType,l=B_(),c=l.updateFontEffect,d=l.updateSignatureFontEffect,p=(0,r.useMemo)((()=>{return n&&"update"!=s?"effect"===o?{meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)((0,u.Z)({effect:"".concat(n.id,"@0")},Xv("effect")),{},{rt_preview_url:"".concat(fb.PP).concat(null===(e=n.preview)||void 0===e?void 0:e.split(".")[0],"-big.png")}),weblogType:o}:{meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)((0,u.Z)({},Xv("effect")),{},{rt_preview_url:n.preview_url,effectColorful:{resId:n.id,effect:""}}),weblogType:o}:{};var e}),[n]),v=()=>{Km("action_text_add_effect",{asset_id:n.id}),"update"===s?c("".concat(n.id,"@0")):Tg({meta:{type:"text",addOrigin:"specificWord"},attribute:(0,u.Z)({effect:"".concat(n.id,"@0")},Xv("effect"))})};function m(){Km("action_text_add_specificWord",{asset_id:n.id}),"add"===s?Tg(p):d({resId:n.id,effect:void 0})}var h=(0,Zm.Z)((()=>{i?i():"effect"===o?v():m()}),{wait:300}),f=h.run,g=(0,r.useRef)(null),x=(0,bE.Z)(g),y=(0,r.useRef)();return(0,r.useEffect)((()=>{x?y.current=setTimeout((()=>{Km("asset_hover_text",{action_label:"effect"===o?"text_effect":"text_effectColorful",asset_id:n.id})}),2e3):clearTimeout(y.current)}),[x]),(0,Kg.jsx)(Kg.Fragment,{children:n&&"add"==s?(0,Kg.jsx)(mL,{data:p,type:"text",children:(0,Kg.jsx)("div",{ref:g,className:hb()("specific-word-item",a),onClick:f,children:(0,Kg.jsx)(LE,{poster:t})})}):(0,Kg.jsx)("div",{ref:g,className:hb()("specific-word-item",a,"no-drag"),onClick:f,children:(0,Kg.jsx)(LE,{poster:t})})})}var t6=e=>{var t=e.clickType,i=void 0===t?"add":t,a=e.active,o=void 0!==a&&a,s=Pw(),l=(0,r.useState)(!0),c=(0,n.Z)(l,2),d=c[0],u=c[1],v=B_(),h=(v.clearFontEffect,(0,r.useState)([])),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)([]),b=(0,n.Z)(y,2),_=b[0],j=b[1];function w(){return k.apply(this,arguments)}function k(){return k=(0,p.Z)(m().mark((function e(){var t;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return u(!0),e.next=3,Promise.all([FM(),WM()]);case 3:t=e.sent,x(t[0].msg),j(t[1].data.items),u(!1);case 7:case"end":return e.stop()}}),e)}))),k.apply(this,arguments)}(0,r.useEffect)((()=>{w()}),[]);var T=(0,r.useMemo)((()=>{var e=g,t=_;return null!==s&&void 0!==s&&s.isAeaText&&(e=g.filter((e=>!gi(e.id))),t=_.filter((e=>!fi(e.id)))),{signature:t,specificWord:e}}),[null===s||void 0===s?void 0:s.isAeaText,g,_]),Z=T.signature,C=T.specificWord;return(0,Kg.jsx)(gE,{loading:d,rows:3,columns:3,children:(0,Kg.jsxs)("div",{className:"specific-word-list",children:[Z.map((e=>{var t;return(0,Kg.jsx)(e6,{className:o&&(null===s||void 0===s||null===(t=s.attribute.effectColorful)||void 0===t?void 0:t.resId)===e.id?"specific-word-active":"",src:e.preview_url,data:e,type:"specificWord",clickType:i},"signature-".concat(e.id))})),C.map((e=>{var t,a,n;return(0,Kg.jsx)(e6,{className:hb()({"specific-word-active":o&&(null===s||void 0===s||null===(t=s.attribute)||void 0===t||null===(a=t.effect)||void 0===a?void 0:a.split("@")[0])===e.id}),src:"".concat(fb.PP).concat(null===(n=e.preview)||void 0===n?void 0:n.split(".")[0],"-big.png"),data:e,type:"effect",clickType:i},"specific-word-".concat(e.id))}))]})})},i6=(0,hp.Pi)(t6),a6=e=>bp.g.post("/brand/add",{body:"title=".concat(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}});function n6(){return bp.g.get("/brand/list")}function r6(e){var t=new FormData;return Object.keys(e).forEach((i=>{t.append(i,e[i])})),bp.g.post("/brand/add-logo",{data:t})}function o6(e){return bp.g.get("/brand/logo-list?brand_id=".concat(e),{})}var s6=e=>{var t=new FormData;return Object.keys(e).forEach((i=>{t.append(i,e[i])})),bp.g.post("/brand/add-color-group",{data:t})};function l6(e){return bp.g.get("/brand/color-list?brand_id=".concat(e))}var c6=e=>bp.g.post("/brand/rename",{body:"brand_id=".concat(e.brand_id,"&title=").concat(e.title),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),d6=e=>bp.g.post("/brand/color-group-rename",{body:"group_id=".concat(e.group_id,"&title=").concat(e.title),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),u6=e=>bp.g.post("/brand/del-color-group",{body:"group_id=".concat(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),p6=e=>bp.g.post("/brand/del-logo",{body:"logo_id=".concat(e),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),v6=(e,t)=>bp.g.post("/brand/del-color",{body:"group_id=".concat(e,"&color=").concat(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}}),m6=(e,t,i)=>bp.g.post("/brand/add-color",{body:"group_id=".concat(e,"&color=").concat(t,"&r_color=").concat(i),headers:{"Content-Type":"application/x-www-form-urlencoded"}});function h6(e){return bp.g.get("/brand/font-detail?brand_id=".concat(e))}var f6=(e,t,i,a,n)=>bp.g.post("/brand/font-set",{body:"brand_id=".concat(e,"&text_type=").concat(t,"&source_type=").concat(i,"&font=").concat(a,"&font_size=").concat(n),headers:{"Content-Type":"application/x-www-form-urlencoded"}});function g6(e,t){return bp.g.get("/brand/system-color-list?page=".concat(e,"&pageSize=").concat(t))}function x6(e){var t=e?"/brand/get-active-brand?brand_id=".concat(e):"/brand/get-active-brand";return bp.g.get(t)}var y6=()=>{var e=ag(),t=e.activeBrand,i=Yf(),a=i.showBindPhoneModal,n=e=>{console.log("value",e)},r=e=>{ID({page:1,pageSize:100}).then((t=>{0===t.code?e(t.data):xp.default.error(t.msg)}))},o=(e,t)=>{ZD(e,"0").then((e=>{0===(null===e||void 0===e?void 0:e.code)&&(xp.default.success("\u5220\u9664\u6210\u529f"),t&&t(e.data))}))},s=(e,t)=>{o6(e).then((e=>{0===e.code&&t&&t(e.data)}))},l=e=>{n6().then((t=>{0===t.code&&e&&e(t.data)}))},c=(e,t)=>{a6(e).then(function(){var e=(0,p.Z)(m().mark((function e(i){var n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==i.code){e.next=6;break}return e.next=3,t(i.data);case 3:l(),e.next=7;break;case 6:"bindPhone"==(null===(n=i.data)||void 0===n?void 0:n.message)?a():xp.default.error(i.msg);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},d=(e,t)=>{l6(e).then((e=>{0===e.code&&t&&t(e.data)}))},v=(e,t)=>{u6(e).then((e=>{0===(null===e||void 0===e?void 0:e.code)&&(xp.default.success("\u5220\u9664\u6210\u529f"),t&&t(e.data))}))},h=(e,i)=>{s6((0,u.Z)((0,u.Z)({},e),{},{brand_id:null===t||void 0===t?void 0:t.id})).then((e=>{var t;0===e.code?i(e.data):"bindPhone"==(null===(t=e.data)||void 0===t?void 0:t.message)?a():xp.default.error(e.msg)}))},f=(e,i)=>{c6({title:e,brand_id:null===t||void 0===t?void 0:t.id}).then((e=>{var t;0===e.code?(xp.default.success("\u4fee\u6539\u6210\u529f"),i&&i(e.data)):"bindPhone"==(null===(t=e.data)||void 0===t?void 0:t.message)?a():xp.default.error(e.msg)}))},g=(e,t)=>{p6(e).then((e=>{0===e.code?(xp.default.success("\u5220\u9664\u6210\u529f"),t&&t(e.data)):xp.default.error(e.msg)}))},x=(e,t,i)=>{v6(e,t).then((e=>{0===e.code?i&&i(e.data):xp.default.error(e.msg)}))},y=(e,t,i,a)=>{m6(e,t,i).then((e=>{0===e.code?a&&a(e.data):xp.default.error(e.msg)}))},b=(e,t,i)=>{d6({title:e,group_id:t}).then((e=>{var t;0===e.code?(xp.default.success("\u4fee\u6539\u6210\u529f"),i&&i(e.data)):"bindPhone"==(null===(t=e.data)||void 0===t?void 0:t.message)?a():xp.default.error(e.msg)}))},_=e=>{},j=e=>{null!==t&&void 0!==t&&t.id&&h6(null===t||void 0===t?void 0:t.id).then((t=>{0===t.code?e&&e(t.data):xp.default.error(t.msg)}))},w=(e,t,i)=>{g6(e,t).then((e=>{0===e.code?i&&i(e.data):xp.default.error(e.msg)}))},k=(e,i,a,n,r)=>{f6(null===t||void 0===t?void 0:t.id,e,i,a,n).then((e=>{0===e.code?r&&r(e.data):xp.default.error(e.msg)}))},T=(e,t)=>{x6(t||"").then((t=>{0===t.code?e&&e(t.data):xp.default.error(t.msg)}))};return{logoColorSave:n,addBrand:c,modifyName:f,modifyPaletteName:b,bindBrandDetail:_,updateFontList:r,delFont:o,updateBranfList:l,addBrandColor:h,updateColorList:d,delLogo:g,delBrandColor:v,delColor:x,addColor:y,bindFontDetail:j,bindFontSet:k,bindSystemColorList:w,brandLogoList:s,bindActiveBrand:T}},b6=i(65629),_6=i.n(b6);function j6(e){var t,i=e.item,a=e.setVisible,n=y6(),r=(n.updateBranfList,n.bindActiveBrand),o=ag(),s=o.activeBrand,l=o.updateActiveBrand;return(0,Kg.jsxs)("div",{className:hb()(_6().brandListItem,{[_6().brandListItemActive]:(null===s||void 0===s?void 0:s.id)===i.id}),onClick:()=>{r((e=>{a(""),l(e)}),i.id)},children:[(0,Kg.jsxs)("div",{className:_6().itemTop,children:[(0,Kg.jsx)("div",{className:_6().itemTopImg,children:(0,Kg.jsx)("img",{src:i.coverInfo.cover_path,style:i.coverInfo.width/i.coverInfo.height>2.5625?{width:"100%"}:{height:"100%"},alt:""})}),(null===(t=i.coverInfo.colors)||void 0===t?void 0:t.length)>0&&(0,Kg.jsx)("div",{className:_6().itemTopColor,children:i.coverInfo.colors.map((e=>(0,Kg.jsx)("div",{style:{background:e},className:_6().itemTopColorItem},e)))})]}),(0,Kg.jsx)("div",{className:_6().itemBottom,children:(0,Kg.jsx)("span",{className:_6().itemBottomLeft,children:i.title})})]})}var w6=j6;function k6(e){var t=e.branfList,i=e.setVisible;return(0,Kg.jsxs)("div",{className:_6().brandList,children:[(0,Kg.jsx)("div",{className:_6().brandListTitle,children:"\u9009\u62e9\u54c1\u724c\u5de5\u5177\u7bb1"}),(0,Kg.jsx)("div",{className:_6().brandListContent,children:t.map((e=>(0,Kg.jsx)(w6,{item:e,setVisible:i},e.id)))})]})}var T6=k6,Z6=i(8212);function C6(e){var t=e.templateTitle,i=e.alterName,a=e.styles,o=(0,r.useState)(""),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(!1),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,r.useRef)(null);return(0,r.useEffect)((()=>{p&&c(t)}),[p]),(0,Kg.jsxs)("div",{onClick:e=>{e.stopPropagation()},className:hb()(a.itemFooterTopRight,{[a.itemFooterTopRightIsExport]:p}),children:[(0,Kg.jsx)(VP.Z,{className:a.itemFooterTopInput,ref:m,onChange:e=>{c(e.target.value)},onBlur:e=>{v(!1),i(e.target.value)},onPressEnter:e=>{v(!1)},value:l,bordered:!1,onKeyDown:Ph,onPaste:Ph}),(0,Kg.jsxs)("span",{className:a.itemFooterTopRightWarp,onClick:e=>{v(!0),setTimeout((()=>{m.current.focus({cursor:"all"})}),0),e.stopPropagation()},children:[(0,Kg.jsx)("span",{className:a.itemFooterTopRightName,children:t}),(0,Kg.jsx)("span",{className:a.itemFooterTopRightIcon,children:(0,Kg.jsx)(Z6.Z,{})})]})]})}var N6=C6,S6=i(5870),I6=i.n(S6);function A6(e){var t=e.right,i=e.isOpen,a=void 0!==i&&i,o=e.name,s=e.children,l=(0,r.useState)(a),c=(0,n.Z)(l,2),d=c[0],u=c[1];return(0,Kg.jsxs)("div",{className:I6().dropDown,children:[(0,Kg.jsxs)("div",{className:I6().dropDownTop,children:[(0,Kg.jsxs)("div",{className:I6().dropDownTopLeft,onClick:()=>{u(!d)},children:[(0,Kg.jsx)("div",{className:I6().dropDownTopLeftIcon,children:(0,Kg.jsx)(iP,{type:"right",style:d?{transform:"rotate(90deg)"}:{transform:"rotate(0deg)"}})}),(0,Kg.jsx)("span",{className:I6().dropDownTopLeftSpan,children:o})]}),t&&(0,Kg.jsx)("div",{className:I6().dropDownTopRight,children:t})]}),d&&(0,Kg.jsx)("div",{className:I6().dropDownContent,children:s})]})}var P6=A6,M6=i(99386),E6=i.n(M6);function L6(e){var t=e.uploadList,i=e._uploadList,a=(0,d.Z)(function(){var e=(0,p.Z)(m().mark((function e(a){var n,r,o,s,l,c,d,p,v;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=(0,sh.Z)(a,t,"uid"),r=[],o=0;case 3:if(!(o<n.length)){e.next=14;break}return s=n[o],l=iV(s),c=l.getImageInfo,e.next=8,c();case 8:d=e.sent,p=(0,u.Z)((0,u.Z)({},d),{},{upId:"".concat(s.uid),file:s,state:0,progress:0}),r.push(p);case 11:o++,e.next=3;break;case 14:v=r.concat(t),i(v);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200),n={beforeUpload:(e,t)=>(a(t),!1)};return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(qW.Z,(0,u.Z)((0,u.Z)({},n),{},{multiple:!0,showUploadList:!1,accept:".png,.jpeg,.jpg",children:(0,Kg.jsxs)("div",{className:E6().uploadLogo,onClick:e=>{},children:[(0,Kg.jsx)("div",{className:E6().uploadLogoIcon,children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),(0,Kg.jsx)("div",{className:E6().uploadLogoTxt,children:"\u70b9\u51fb\u4e0a\u4f20\u4f60\u7684LOGO"}),(0,Kg.jsx)("div",{className:E6().uploadLogoHoverTxt,children:"\u683c\u5f0f\uff1apng\u3001jpg \u5927\u5c0f\u4e0d\u8d85\u8fc710mb"})]})}))})}var D6=L6;function R6(e){var t=e.onSucceed,i=e.onError,a=e.setProgress,n=e=>{if(e.lengthComputable&&"function"===typeof a){var t=Math.round(e.loaded/e.total*100);a({progress:t>99?99:t})}};function r(e,t){return o.apply(this,arguments)}function o(){return o=(0,p.Z)(m().mark((function e(a,r){var o,s,l,c,d;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o=QW(r,a.data),s=JW(a.data),l=$W({url:s,onprogress:e=>n(e,r)}),c=l.send,e.next=5,c(o);case 5:d=e.sent,0===d.code?t(d.data):i&&i(d);case 7:case"end":return e.stop()}}),e)}))),o.apply(this,arguments)}function s(e){return l.apply(this,arguments)}function l(){return l=(0,p.Z)(m().mark((function e(n){var o,s,l;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:o=n.md5,s=n.file,l=n.brand_id,a&&a({progress:99}),dV(s,function(){var e=(0,p.Z)(m().mark((function e(a){var n,c,d,u;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=0,a>4&&a<=8&&(n=1),e.next=4,r6({brand_id:l,file_md5:o,filename:s.name,orientationFlag:n});case 4:c=e.sent,e.t0=String(null===c||void 0===c?void 0:c.code),e.next="0"===e.t0?8:"1005"===e.t0?10:13;break;case 8:return t(null===c||void 0===c?void 0:c.data),e.abrupt("break",13);case 10:return d=null===c||void 0===c?void 0:c.data,u=d.message,"fileBlock"===u?i&&i(c.data,{isNotAllow:!0}):"fileNotExist"===u?r(c,s):"bindPhone"===u&&i&&i(c.data,{bindPhone:!0}),e.abrupt("break",13);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)}))),l.apply(this,arguments)}function c(e,t){var i=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,a=2097152,n=Math.ceil(e.size/a),r=0,o=new(hK().ArrayBuffer),s=new FileReader;function l(){var t=r*a,n=t+a>=e.size?e.size:t+a;s.readAsArrayBuffer(i.call(e,t,n))}s.onload=e=>{if(o.append(e.target.result),r+=1,r<n)l();else{var i=o.end();t(i)}},s.onerror=()=>{console.warn("oops, something went wrong.")},s.onprogress=e=>{},l()}var d=(e,t)=>{try{c(e,(i=>{s({md5:i,file:e,brand_id:t})}))}catch(a){console.error(a),i&&i(a)}};return{uploadStat:d,handleProgress:n}}var z6=i(18710),F6=i.n(z6);function O6(e){var t,i=e.item,a=e.changeFileState,n=e.brand_id,o=e.updateLogoList,s=e.delLogo,l=e.updateLogoCallBack;function c(e){a(i.upId,e)}var d=Yf(),p=d.showBindPhoneModal,v=R6({onSucceed:e=>{var t=100,i=(0,u.Z)((0,u.Z)({},e.fileInfo),{},{id:e.id,state:1,progress:t,file_id:e.file_id,poster:e.fileInfo.cover_path,src:e.fileInfo.file_path});setTimeout((()=>{l(),c(i)}),1e3)},setProgress(e){var t=e.progress;c({progress:t,state:3})},onError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isNotAllow,a=t.bindPhone;c({state:i?-2:-1,progress:100}),a&&p()}}),m=v.uploadStat;return(0,r.useEffect)((()=>{var e={width:i.width,height:i.height,poster:i.fileURL};switch(i.state){case 0:m(i.file,n),Object.assign(e,{state:4}),c(e);break}}),[i.state]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)("div",{className:F6().branLogoItem,children:[(0,Kg.jsx)(vK,{percent:i.progress,state:i.state,style:{width:"100%",height:"100%"},hidden:!i.state||1===i.state||Object.keys(i).length<1}),(0,Kg.jsx)("div",{className:F6().branLogoItemImg,children:(0,Kg.jsx)("img",{src:(null===i||void 0===i||null===(t=i.logoInfo)||void 0===t?void 0:t.cover_path)||i.fileURL,style:{maxWidth:"100%",maxHeight:"100%"},alt:""})}),(0,Kg.jsx)(NH.Z,{overlay:(0,Kg.jsx)(SH.Z,{children:(0,Kg.jsxs)(SH.Z.Item,{onClick:()=>{AJ({title:"\u786e\u5b9a\u5220\u9664\u5df2\u4e0a\u4f20Logo\uff1f",content:"\u5220\u9664\u540e\u65e0\u6cd5\u64a4\u9500\uff0c\u73b0\u6709\u8bbe\u8ba1\u4e0d\u4f1a\u53d7\u5f71\u54cd\u3002",button:"\u786e\u5b9a\u5220\u9664",onOk:()=>{s(i.id,(e=>{o()}))},onCancel:()=>{},width:335})},children:[(0,Kg.jsx)(iP,{type:"delete",className:F6().branLogoItemMenuIcon}),"\u5220\u9664LOGO"]},"mail")}),children:(0,Kg.jsx)("div",{className:F6().branLogoItemIcon,children:(0,Kg.jsx)(iP,{type:"huaban1"})})})]},i.id)})}var B6=O6,W6=i(20270),V6=i.n(W6);function U6(e){var t=e.id,i=e.updateLogoCallBack,a=(0,r.useState)([]),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)(0),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,r.useState)(0),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=y6(),x=g.delLogo,y=g.brandLogoList,b=(0,r.useState)([]),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=e=>{y(e,(e=>{f(e.maxCount),p(null===e||void 0===e?void 0:e.total),l(null===e||void 0===e?void 0:e.items)}))};function T(e,t){w((i=>{var a=i,n=a.findIndex((t=>t.upId===e));a[n]&&(t.duration&&Object.assign(a[n],{values:{duration:t.duration}}),t.state&&Object.assign(a[n],{state:t.state}),t.width&&Object.assign(a[n],{height:t.height,width:t.width}),t.poster&&Object.assign(a[n],{cover_path:t.poster,small_cover_path:t.poster,id:t.id}),t.progress&&Object.assign(a[n],{progress:t.progress}),t.file_id&&Object.assign(a[n],{file_id:t.file_id,id:t.id}));var r=JSON.parse(JSON.stringify(a));return r}))}(0,r.useEffect)((()=>{k(t)}),[t]);var Z=()=>{i&&i(),k(t),w([])};return(0,Kg.jsx)("div",{className:V6().branLogo,children:(0,Kg.jsx)(P6,{name:"\u54c1\u724cLOGO\uff08".concat(u+(null===j||void 0===j?void 0:j.length),"\uff09"),isOpen:!0,children:(0,Kg.jsxs)("div",{className:V6().branLogoWarp,children:[(!h||u+(null===j||void 0===j?void 0:j.length)<h)&&(0,Kg.jsx)(D6,{uploadList:j,_uploadList:w}),[...j,...s].map(((e,a)=>(0,Kg.jsx)(B6,{item:e,changeFileState:T,brand_id:t,updateLogoList:Z,updateLogoCallBack:i,delLogo:x},a)))]})})})}var G6=U6,X6=i(70639),q6=i.n(X6);function H6(e){var t=e.children,i=e.getColorList,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=y6(),d=c.addBrandColor,u=c.bindSystemColorList,p=(0,r.useState)([]),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=()=>{u(1,60,(e=>{h(null===e||void 0===e?void 0:e.items)}))};return(0,r.useEffect)((()=>{f()}),[]),(0,Kg.jsx)(NH.Z,{trigger:["click"],visible:s,overlayClassName:"addColorDropdown",onVisibleChange:e=>{l(e)},getPopupContainer:e=>e,overlay:(0,Kg.jsxs)(SH.Z,{children:[(0,Kg.jsxs)("div",{className:q6().addColorDropdownTitle,onClick:()=>{d({title:"\u8c03\u8272\u677f",colors:[]},(()=>{i(),l(!1)}))},children:[(0,Kg.jsx)("span",{className:q6().leftAddIcon,children:"+"}),"\u6dfb\u52a0\u81ea\u5b9a\u4e49\u8c03\u8272\u677f"]}),(0,Kg.jsx)("div",{className:q6().addColorDropdownContent,children:m.map((e=>{var t;return(0,Kg.jsxs)(SH.Z.Item,{className:q6().addColorDropdownMenuItem,onClick:()=>{d({title:e.title,colors:e.colors},(()=>{i(),l(!1)}))},children:[(0,Kg.jsx)("div",{className:q6().menuItemTitle,children:e.title}),(0,Kg.jsx)("div",{className:q6().menuItemContent,children:null===(t=e.colors)||void 0===t?void 0:t.map(((e,t)=>(0,Kg.jsx)("div",{className:q6().colorItem,style:{background:e}},t)))})]},e.id)}))})]}),children:(0,Kg.jsx)("div",{onClick:e=>{l(!s)},children:t})})}var Y6=H6,K6=i(76684),Q6=i.n(K6),J6=i(48481),$6=i.n(J6);function e9(e){var t=e.show,i=e.id,a=e.item,o=e._isAdd,s=e.getColorList,l=(0,r.useState)(t),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)(L(a)),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=y6(),g=f.delColor,x=f.addColor;return(0,r.useEffect)((()=>{h(L(a))}),[a]),(0,Kg.jsx)(tE.Z,{visible:d,trigger:"click",overlayClassName:"color-picker",onVisibleChange:e=>{u(e),e||(x(i,Yh(m),a,(()=>{s()})),o(!1))},getTooltipContainer:e=>e,destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{style:{width:"250px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:m,onChange:e=>{h(e.rgb)},notOpc:!0})}),children:(0,Kg.jsx)(xF.Z,{placement:"bottom",mouseEnterDelay:.5,title:Yh(m),children:(0,Kg.jsx)("div",{className:$6().colorItem,children:(0,Kg.jsx)("div",{className:$6().itemColor,style:{background:Yh(m)},children:!t&&(0,Kg.jsx)("div",{className:$6().colorItemClose,onClick:e=>{e.stopPropagation(),g(i,Yh(m),(()=>{s()}))},children:(0,Kg.jsx)(iP,{type:"close-small"})})})})})})}var t9=e9;function i9(e){var t=e.item,i=e.maxColorCount,a=e.total,o=e.getColorList,s=y6(),l=s.delBrandColor,c=s.addColor,d=s.addBrandColor,u=s.modifyPaletteName,v=(0,r.useState)(!1),h=(0,n.Z)(v,2),f=h[0],g=h[1],x=(0,r.useState)(!0),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(!0),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=(0,r.useState)(t.title),C=(0,n.Z)(Z,2),N=C[0],S=C[1];(0,r.useEffect)((()=>{t.colorCount&&t.colorCount>=i?_(!1):_(!0)}),[t.colorCount]),(0,r.useEffect)((()=>{T((!a||1!==a)&&!!a)}),[a]);var I=function(){var e=(0,p.Z)(m().mark((function e(i){var n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=i||"\u8c03\u8272\u677f",i!==N&&(a<1?d({title:n,colors:[]},(()=>{o()})):u(n,t.id,(e=>{S(n)})));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Kg.jsxs)("div",{className:Q6().brandColorItem,children:[(0,Kg.jsxs)("div",{className:Q6().brandColorItemTop,children:[(0,Kg.jsx)("div",{className:Q6().topTitle,children:(0,Kg.jsx)(N6,{templateTitle:N,alterName:I,styles:Q6()})}),k&&(0,Kg.jsx)(NH.Z,{overlayClassName:"brandColorItemDropdown",overlay:(0,Kg.jsx)(SH.Z,{children:(0,Kg.jsxs)(SH.Z.Item,{onClick:()=>{AJ({title:(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(WJ.Z,{style:{color:"#E43114",marginRight:"10px"}}),"\u786e\u5b9a\u5220\u9664\u8c03\u8272\u677f\uff1f"]}),content:"\u5220\u9664\u540e\u65e0\u6cd5\u64a4\u9500\uff0c\u73b0\u6709\u8bbe\u8ba1\u4e0d\u4f1a\u53d7\u5f71\u54cd\u3002",button:"\u786e\u5b9a\u5220\u9664",onOk:()=>{l(t.id,(()=>{o()}))},onCancel:()=>{},width:335})},children:[(0,Kg.jsx)(iP,{type:"delete",className:Q6().topTitleMenuIcon}),"\u5220\u9664\u8c03\u8272\u677f"]},"del")}),children:(0,Kg.jsx)("div",{className:Q6().topBtn,children:(0,Kg.jsx)(iP,{type:"huaban1"})})})]}),(0,Kg.jsxs)("div",{className:Q6().brandColorItemBottom,children:[t.colors.map(((e,i)=>{var a;return(0,Kg.jsx)(t9,{item:e,id:t.id,show:f&&(null===(a=t.colors)||void 0===a?void 0:a.length)===i+1,_isAdd:g,getColorList:o},i)})),b&&(0,Kg.jsx)("div",{className:Q6().addBtn,onClick:()=>{g(!0),t.id?c(t.id,Qh(),"",(()=>{o()})):d({title:"\u8c03\u8272\u677f",colors:[Qh()]},(()=>{o()}))},children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})})]})]})}var a9=i9,n9=i(64486),r9=i.n(n9);function o9(e){var t,i=e.id,a=e.updateColorCallBack,o=y6(),s=o.updateColorList,l=(0,r.useState)(!0),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)({count:0,items:[{id:"",title:"\u8c03\u8272\u677f",colors:[]}],maxColorCount:200,maxCount:100,total:0}),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=()=>{s(i,(e=>{e.total?(h(e),e.total>=e.maxCount&&u(!1)):(h({count:0,items:[{id:"",title:"\u8c03\u8272\u677f",colors:[]}],maxColorCount:200,maxCount:100,total:0}),u(!0))}))};return(0,r.useEffect)((()=>{i&&f()}),[i]),(0,Kg.jsx)("div",{className:r9().brandColor,children:(0,Kg.jsx)(P6,{isOpen:!0,name:"\u54c1\u724c\u989c\u8272\uff08".concat((null===m||void 0===m?void 0:m.total)||0,"\uff09"),right:d&&(0,Kg.jsx)(Y6,{getColorList:()=>{f(),a&&a()},children:(0,Kg.jsxs)("div",{className:r9().rightBtn,children:[(0,Kg.jsx)("span",{className:r9().rightBtnSpan,children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),"\u65b0\u589e\u8c03\u8272\u677f"]})}),children:(0,Kg.jsx)("div",{className:r9().brandColorWarp,children:null===m||void 0===m||null===(t=m.items)||void 0===t?void 0:t.map((e=>(0,Kg.jsx)(a9,{item:e,getColorList:()=>{f(),a&&a()},maxColorCount:m.maxColorCount,total:m.total},e.id)))})})})}var s9=o9,l9=i(65285),c9=i.n(l9);function d9(e){var t=e.children,i=e.uploadSucceed,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)(""),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(0,r.useState)(0),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=Yf(),x=g.showBindPhoneModal,y=fK({onSucceed:e=>{"parseFailed"===e.message?(xp.default.error("\u6587\u4ef6\u89e3\u6790\u5931\u8d25"),p("\u6587\u4ef6\u89e3\u6790\u5931\u8d25")):setTimeout((()=>{p("\u4e0a\u4f20\u6210\u529f"),i&&i(),l(!1)}),1e3)},setProgress(e){var t=e.progress;f(t)},onError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(t.isNotAllow,t.bindPhone);p("\u4e0a\u4f20\u5931\u8d25"),xp.default.error(null===e||void 0===e?void 0:e.msg),i&&x()}}),b=y.uploadStat,_=e=>{b(e),p("\u6b63\u5728\u4e0a\u4f20\u4e2d\u2026"),l(!0)},j=()=>{l(!1)};return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(QJ,{visible:s,width:435,onCancel:j,footer:null,children:(0,Kg.jsxs)("div",{className:c9().uploadProgress,children:[(0,Kg.jsx)("div",{className:c9().uploadProgressTitle,children:u}),(0,Kg.jsx)(tM.Z,{strokeColor:"#5A4CDB",trailColor:"#EFEFEF",percent:h,showInfo:!1})]})}),(0,Kg.jsx)(qW.Z,{openFileDialogOnClick:!0,showUploadList:!1,beforeUpload:_,style:{height:"100%",cursor:"auto"},accept:".ttf,.otf",children:(0,Kg.jsx)("div",{onClick:e=>{},children:t})})]})}var u9=d9,p9=i(58442),v9=i.n(p9);function m9(e){var t=e.item,i=e.delBtnShow,a=e.uploadSucceed,o=t.file_id,s=t.id,l=(0,r.useState)(""),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=y6(),v=p.delFont;return(0,r.useEffect)((()=>{AD(o).then((e=>{var t,i;0===(null===e||void 0===e?void 0:e.code)&&u(null===(t=e.data)||void 0===t||null===(i=t.fileInfo)||void 0===i?void 0:i.cover_path)}))}),[o]),(0,Kg.jsxs)("div",{className:v9()["selected-fontFamily"],children:[(0,Kg.jsx)("div",{className:v9().left,children:d&&(0,Kg.jsx)("img",{src:d,alt:"text",height:22})}),i&&(0,Kg.jsx)(iP,{type:"delete",className:v9().right,onClick:()=>{AJ({title:(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(WJ.Z,{style:{color:"#E43114",marginRight:"10px"}}),"\u786e\u5b9a\u5220\u9664\u5df2\u4e0a\u4f20\u5b57\u4f53\uff1f"]}),content:"\u5220\u9664\u540e\u65e0\u6cd5\u64a4\u9500\u8be5\u5b57\u4f53\uff0c\u5df2\u4f7f\u7528\u8fc7\u5f53\u524d\u5b57\u4f53\u8bbe\u8ba1\u6a21\u7248 \u4e0d\u4f1a\u53d7\u5f71\u54cd\u3002",button:"\u786e\u5b9a\u5220\u9664",onOk:()=>{v([s],(e=>{a()}))},onCancel:()=>{},width:335})}})]})}var h9=m9,f9=i(98503),g9=i.n(f9),x9=LO.Z.Option;function y9(e){var t=y6(),i=t.bindFontSet,a=e.type,n=e.data,r=e.updateFontDetail,o=e.fontList,s=e.defaultFontSize,l=n.font_size,c=void 0===l?s:l,d=()=>{for(var e=[],t=0;t<69;t++){var i=8+2*t;e.push(i)}return e},u=e=>{i(a,1,e.file_id,c,(()=>{r()}))},p=e=>{var t;i(a,n.source_type,null===(t=n.fontInfo)||void 0===t?void 0:t.font_id,e,(()=>{r()}))},v=e=>{i(a,2,e,c,(()=>{r()}))},m=()=>{var e,t;switch(n.source_type){case 1:return(0,Kg.jsx)("img",{src:null===(e=n.fontInfo)||void 0===e?void 0:e.cover_path,alt:"",height:22});case 2:return(0,Kg.jsx)("img",{src:"".concat(fb.PP,"/index_img/fonts/").concat(zD(null===(t=n.fontInfo)||void 0===t?void 0:t.font_id),".svg"),alt:"",height:22})}};return(0,Kg.jsxs)("div",{className:g9().fontSet,children:[(0,Kg.jsx)("div",{className:g9().fontSetInput,children:n.fontInfo?m():(0,Kg.jsx)("div",{children:"\u9009\u62e9\u5b57\u4f53"})}),(0,Kg.jsx)(LO.Z,{style:{width:195},placement:"topLeft",dropdownClassName:g9().fontSetType,value:"",children:(0,Kg.jsxs)(Kg.Fragment,{children:[(null===o||void 0===o?void 0:o.length)>0&&(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{children:"\u4e0a\u4f20\u5b57\u4f53"}),o.map((e=>{var t;return(0,Kg.jsx)("div",{className:hb()({[g9()["font-family-item"]]:!0,[g9()["font-family-active"]]:e.file_id===(null===(t=n.fontInfo)||void 0===t?void 0:t.font_id)}),onClick:()=>u(e),children:(0,Kg.jsx)(h9,{item:e})},e.id)}))]}),[...GD,...XD].map((e=>(0,Kg.jsx)(x9,{value:"fontFamily-".concat(e.cateName),children:(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)("div",{children:e.cateName}),(0,Kg.jsx)("div",{children:e.fontList.map(((e,t)=>{var i,a=zD(e),r="".concat(fb.PP,"/index_img/fonts/").concat(a,".svg");return(0,Kg.jsx)("div",{className:hb()({[g9()["font-family-item"]]:!0,[g9()["font-family-active"]]:e===(null===(i=n.fontInfo)||void 0===i?void 0:i.font_id)}),onClick:()=>{v(e)},children:(0,Kg.jsx)("img",{src:r,alt:e,height:22})},"fontFamily-".concat(e,"-").concat(t))}))})]},"fontFamily-".concat(e.cateName))},"fontFamily-".concat(e.cateName))))]})}),(0,Kg.jsx)(LO.Z,{value:c,style:{width:70},placement:"topLeft",onChange:e=>{p(e)},children:d().map((e=>(0,Kg.jsx)(x9,{value:e,children:e},e)))})]})}var b9=y9,_9=i(69426),j9=i.n(_9);function w9(e){var t=e.type,i=e.item,a=e.updateFontDetail,o=e.fontList,s=e.defaultFontSize,l=(0,r.useState)(!1),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=e=>{var t,a,n;return 1===(null===i||void 0===i?void 0:i.source_type)?"".concat(e,", ").concat(null===i||void 0===i||null===(t=i.fontInfo)||void 0===t||null===(a=t.values)||void 0===a?void 0:a.name,", ").concat(i.font_size):2===(null===i||void 0===i?void 0:i.source_type)?"".concat(e,", ").concat(null===i||void 0===i||null===(n=i.fontInfo)||void 0===n?void 0:n.name,", ").concat(i.font_size):"\u70b9\u51fb\u5b9a\u4e49".concat(e,"\u5b57\u4f53")},v=()=>{switch(t){case"1":return p("\u6807\u9898");case"2":return p("\u6b63\u6587\u6587\u672c");case"3":return p("\u5e26\u5e95\u8272")}},m=()=>{var e,t;return 1===(null===i||void 0===i?void 0:i.source_type)?"webfont-".concat(null===i||void 0===i||null===(e=i.fontInfo)||void 0===e?void 0:e.font_id," ,font130"):null===i||void 0===i||null===(t=i.fontInfo)||void 0===t?void 0:t.font_id};return(0,Kg.jsx)(NH.Z,{overlay:(0,Kg.jsx)(b9,{type:t,data:i,updateFontDetail:a,fontList:o,defaultFontSize:s}),visible:d,onVisibleChange:e=>{u(e)},getPopupContainer:()=>document.getElementById("brandDetailWarp"),placement:"topRight",overlayClassName:j9().brandFontDropdown,trigger:["click"],children:(0,Kg.jsxs)("div",{className:j9().brandFontStyleItem,style:{fontSize:(null===i||void 0===i?void 0:i.font_size)||s,fontFamily:m()},onClick:()=>{u(!d)},children:[(0,Kg.jsx)("span",{className:j9().leftSpan,children:v()}),(0,Kg.jsx)("span",{className:j9().rightSpan,children:(0,Kg.jsx)(Z6.Z,{})})]})})}var k9=w9,T9=i(75041),Z9=i.n(T9),C9=i(63249),N9=i.n(C9);function S9(e){var t=e.fontList,i=void 0===t?[]:t,a=e.uploadSucceed;return(0,Kg.jsx)("div",{className:N9().uploadFont,children:(null===i||void 0===i?void 0:i.length)>0?(0,Kg.jsx)("div",{className:N9().uploadFontListWarp,children:i.map((e=>(0,Kg.jsx)("div",{className:N9().listItem,children:(0,Kg.jsx)(h9,{item:e,delBtnShow:!0,uploadSucceed:a})},e.id)))}):(0,Kg.jsx)("div",{className:N9().uploadFontWarp,children:(0,Kg.jsx)(u9,{uploadSucceed:a,children:(0,Kg.jsxs)("div",{className:N9().uploadWarp,children:[(0,Kg.jsx)(iP,{type:"shangchuan",className:N9().fontUploaIcon}),"\u4e0a\u4f20\u5b57\u4f53"]})})})})}var I9=S9,A9=YP.Z.TabPane;function P9(e){var t=e.id,i=e.updateFontCallBack,a=y6(),o=a.updateFontList,s=a.bindFontDetail,l=(0,r.useState)(),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)([]),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)("1"),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=()=>{s((e=>{u(e.info)}))};(0,r.useEffect)((()=>{t&&b()}),[t]);var _=()=>{o((e=>{h(null===e||void 0===e?void 0:e.items)}))},j=e=>{y(e)};return(0,r.useEffect)((()=>{y("1"),_()}),[]),(0,Kg.jsx)("div",{className:Z9().brandFont,children:(0,Kg.jsx)(P6,{isOpen:!0,name:"\u54c1\u724c\u5b57\u5e93",right:(0,Kg.jsx)(u9,{uploadSucceed:()=>{_(),y("2")},children:(0,Kg.jsxs)("div",{className:Z9().rightBtn,children:[(0,Kg.jsx)("span",{className:Z9().rightBtnSpan,children:(0,Kg.jsx)(iP,{type:"shangchuan"})}),"\u4e0a\u4f20\u5b57\u4f53"]})}),children:(0,Kg.jsx)("div",{className:Z9().brandFontWarp,children:(0,Kg.jsxs)(YP.Z,{activeKey:x,onChange:j,children:[(0,Kg.jsx)(A9,{tab:"\u6587\u5b57\u6837\u5f0f",children:[{type:"1",item:null===d||void 0===d?void 0:d.title,defaultFontSize:62},{type:"2",item:null===d||void 0===d?void 0:d.subtitle,defaultFontSize:44},{type:"3",item:null===d||void 0===d?void 0:d.content,defaultFontSize:14}].map((e=>(0,Kg.jsx)(k9,{type:e.type,item:e.item,defaultFontSize:e.defaultFontSize,updateFontDetail:()=>{b(),i&&i()},fontList:m},e.type)))},"1"),(0,Kg.jsx)(A9,{tab:"\u5df2\u4e0a\u4f20\u5b57\u4f53",children:(0,Kg.jsx)(I9,{fontList:m,uploadSucceed:()=>{_()}})},"2")]})})})})}var M9=P9,E9=i(94103),L9=i.n(E9);function D9(e){var t=y6(),i=t.modifyName,a=t.bindActiveBrand,n=ag(),r=n.updateActiveBrand,o=e.activeBrand,s=e.updateFontCallBack,l=e.updateColorCallBack,c=e.updateLogoCallBack,d=e=>{i(e,(()=>{a((e=>{r(e)}),"")}))};return(0,Kg.jsx)("div",{className:L9().brandDetail,children:(0,Kg.jsxs)("div",{className:L9().brandDetailWarp,id:"brandDetailWarp",children:[(0,Kg.jsx)("div",{className:L9().brandDetailTitle,children:(0,Kg.jsx)(N6,{templateTitle:null===o||void 0===o?void 0:o.title,alterName:d,styles:L9()})}),(0,Kg.jsx)(G6,{id:null===o||void 0===o?void 0:o.id,updateLogoCallBack:c}),(0,Kg.jsx)(s9,{id:null===o||void 0===o?void 0:o.id,updateColorCallBack:l}),(0,Kg.jsx)(M9,{id:null===o||void 0===o?void 0:o.id,updateFontCallBack:s})]})})}var R9=D9,z9=i(68632),F9=i.n(z9);function O9(e){var t=e.children,i=e.updateFontCallBack,a=e.updateColorCallBack,o=e.updateLogoCallBack,s=(0,r.useState)(""),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=y6(),p=u.updateBranfList,v=u.bindActiveBrand,m=NJ(),h=m.checkLoginStatus,f=ag(),g=f.activeBrand,x=f.updateActiveBrand,y=(0,r.useState)(!1),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=(0,r.useState)(!1),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=(0,r.useState)([]),N=(0,n.Z)(C,2),S=N[0],I=N[1];return(0,r.useEffect)((()=>{t||p((e=>{(null===e||void 0===e?void 0:e.total)>=1&&(v((e=>{x(e)}),""),Z(!0),I(null===e||void 0===e?void 0:e.items),(null===e||void 0===e?void 0:e.total)>1?j(!0):j(!1)),0===(null===e||void 0===e?void 0:e.total)&&(Z(!1),j(!1))}))}),[null===g||void 0===g?void 0:g.id]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(QJ,{visible:""!==c,width:"list"===c?640:806,onCancel:()=>{d("")},centered:!0,footer:null,children:"list"===c?(0,Kg.jsx)(T6,{branfList:S,setVisible:d}):(0,Kg.jsx)(R9,{activeBrand:g,updateFontCallBack:i,updateColorCallBack:a,updateLogoCallBack:o})}),t?(0,Kg.jsx)("div",{onClick:e=>{h()||d("detail")},children:t}):(0,Kg.jsx)(Kg.Fragment,{children:T&&(0,Kg.jsxs)("div",{className:F9().brandModalTop,children:[(0,Kg.jsxs)("div",{className:F9().left,style:_?{}:{cursor:"default"},onClick:()=>{_&&d("list")},children:[(0,Kg.jsx)(iP,{className:F9().leftIcon,type:"pinpai-6ae70fc5"}),(0,Kg.jsx)("span",{className:F9().leftTitle,children:null===g||void 0===g?void 0:g.title}),_&&(0,Kg.jsx)(iP,{className:F9().leftIcon1,type:"iconxiala"})]}),(0,Kg.jsx)("div",{className:F9().right,onClick:()=>{d("detail")},children:"\u7f16\u8f91"})]})})]})}var B9=O9,W9=()=>{var e,t,i,a=ag(),o=a.activeBrand,s=y6(),l=s.bindFontDetail,c=(0,r.useState)(),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=(e,t)=>{var i,a=Lp(),n=a.width,r=a.height,o=Xv(e);return i="title"===e?100:"textBackground"===e?r-o.height-100:(r-o.height)/2,{meta:{type:"text",addOrigin:"text",isUserAdd:!0},attribute:(0,u.Z)((0,u.Z)({},o),t),transform:{posX:(n-o.width)/2,posY:i},weblogType:e}},h=e=>{var t,i;return 1===(null===e||void 0===e?void 0:e.source_type)?"webfont-".concat(null===e||void 0===e||null===(t=e.fontInfo)||void 0===t?void 0:t.font_id," ,font130"):null===e||void 0===e||null===(i=e.fontInfo)||void 0===i?void 0:i.font_id},f=(e,t)=>{var i;if(t&&"{}"!=JSON.stringify(t)){var a,n,r=t.font_size,o=h(t),s=1===(null===t||void 0===t?void 0:t.source_type)?{resId:"f".concat(null===(a=t.fontInfo)||void 0===a?void 0:a.font_id),ufsId:"f".concat(t.id),fontFamily:"webfont-".concat(null===(n=t.fontInfo)||void 0===n?void 0:n.font_id),fontSize:r}:{fontFamily:zD(o),fontSize:r};i=m(e,s)}else i=m(e,{});return i},g=(e,t)=>{Km("action_text_add_".concat(e)),Tg(f(e,t))},x=(0,r.useRef)();function y(e){x.current=setTimeout((()=>{Km("asset_hover_text",{action_label:e})}),2e3)}function b(){clearTimeout(x.current)}var _=()=>{l((e=>{v(e.info)}))};return(0,r.useEffect)((()=>{_()}),[null===o||void 0===o?void 0:o.id]),(0,Kg.jsx)(rE,{wrapClassName:"text-panel-wrap",children:(0,Kg.jsxs)("div",{className:"text-panel-content",children:[(0,Kg.jsxs)("div",{className:"text-panel-header",children:[(0,Kg.jsx)("div",{className:"text-panel-header-desc",children:(0,Kg.jsx)(B9,{updateFontCallBack:_})}),(0,Kg.jsx)(mL,{data:m("title",null===(e=f("title",null===p||void 0===p?void 0:p.title))||void 0===e?void 0:e.attribute),type:"text",children:(0,Kg.jsx)(CS.Z,{size:"large",onClick:()=>g("title",null===p||void 0===p?void 0:p.title),onMouseEnter:()=>y("text_h"),onMouseLeave:b,style:{fontFamily:h(null===p||void 0===p?void 0:p.title),fontSize:"22px",height:"42px",padding:"0px"},children:"\u6dfb\u52a0\u6807\u9898\u5b57"})}),(0,Kg.jsx)(mL,{data:m("text",null===(t=f("text",null===p||void 0===p?void 0:p.subtitle))||void 0===t?void 0:t.attribute),type:"text",children:(0,Kg.jsx)(CS.Z,{size:"large",onClick:()=>g("text",null===p||void 0===p?void 0:p.subtitle),onMouseEnter:()=>y("text_p"),onMouseLeave:b,style:{fontFamily:h(null===p||void 0===p?void 0:p.subtitle),fontSize:"18px",height:"42px",padding:"0px"},children:"\u6dfb\u52a0\u6b63\u6587"})}),(0,Kg.jsx)(mL,{data:m("textBackground",null===(i=f("textBackground",null===p||void 0===p?void 0:p.content))||void 0===i?void 0:i.attribute),type:"text",children:(0,Kg.jsx)("div",{className:"backgroundButton",children:(0,Kg.jsx)(CS.Z,{size:"large",onClick:()=>g("textBackground",null===p||void 0===p?void 0:p.content),onMouseEnter:()=>y("text_b"),onMouseLeave:b,style:{background:"rgba(38, 46, 72, 0.08)",fontFamily:h(null===p||void 0===p?void 0:p.content),fontSize:"12px"},children:"\u6dfb\u52a0\u5e26\u5e95\u8272\u5b57\u4f53"})})})]}),(0,Kg.jsx)(i6,{})]})})},V9=(0,hp.Pi)(W9),U9=i(99881),G9=i.n(U9),X9=e=>{var t=e.bindChangeType,i=e.goBack,a=e.onAfterAdd,n=e.keyword,r=e.state,o=void 0===r?{imgData:[],kid:"1",moreKey:"10533",labelId:"",keyword:"",shapeList:[]}:r,s=o.moreKey;return(0,Kg.jsxs)(Kg.Fragment,{children:[n&&(0,Kg.jsxs)(YP.Z,{className:G9().cloundElementTabs,onChange:e=>{t(e)},children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u56fe\u7247"},"asset"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"gif\u52a8\u56fe"},"gif"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u52a8\u753b"},"lottie")]}),(0,Kg.jsx)("div",{className:G9().title,onClick:()=>i({id:"",class_name:"",asset_type:""}),children:"<".concat(s)}),(0,Kg.jsx)(yE,{wrapStyle:{flex:1,height:0},request:QO,params:o,skeleton:{rows:3,columns:3},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{className:G9().list,children:t.map((e=>(0,Kg.jsx)(m3,{data:e,type:"element",onSuccess:()=>a(e)},e.id)))})}})]})},q9=(0,hp.Pi)(X9),H9=i(54236),Y9=i.n(H9),K9=e=>{var t=e.data,i=e.onChange,a=["#33C586","#3F73FF","#2BAEFA","#FA802B","#A8BA72","#776EF8"],n=e=>({background:a[e%5]});return(0,Kg.jsx)("div",{className:Y9().catalogList,children:t.map(((e,t)=>(0,Kg.jsxs)("div",{className:Y9().catalog,style:n(t),onClick:()=>{i(e)},children:[(0,Kg.jsx)("div",{className:Y9().catalogPic,children:(0,Kg.jsx)("img",{src:e.cover_url,alt:""})}),(0,Kg.jsx)("div",{className:Y9().catalogTitle,children:e.class_name})]},e.id)))})},Q9=K9,J9=i(45876),$9=i.n(J9),e8=e=>{var t,i=e.item,a=e.getMore,n=e.onAfterAdd;return(0,Kg.jsxs)("div",{className:$9().content,children:[(0,Kg.jsxs)("div",{className:$9().contentTop,children:[(0,Kg.jsx)("div",{className:$9().left,children:null===i||void 0===i?void 0:i.class_name}),(0,Kg.jsx)("div",{className:$9().right,onClick:a,children:"\u66f4\u591a>"})]}),(0,Kg.jsx)("div",{className:$9().contentBottom,children:null===i||void 0===i||null===(t=i.assetList)||void 0===t?void 0:t.map((e=>(0,Kg.jsx)(m3,{data:e,onSuccess:()=>n(e),type:"element"},e.id)))})]})},t8=e8,i8=i(23006),a8=i.n(i8),n8=()=>{var e=Tf(),t=e.setAddSvgType,i=e.addSvgType;return(0,Kg.jsxs)("div",{className:a8().FreeformDraw,children:[(0,Kg.jsx)("div",{children:"\u81ea\u7531\u7ed8\u5236"}),(0,Kg.jsx)("div",{className:a8().shape,children:aq.map((e=>(0,Kg.jsx)(xF.Z,{placement:"bottom",title:e.name,children:(0,Kg.jsx)("div",{className:hb()(a8().item,{[a8().active]:i===e.type}),onClick:()=>{Km("FreeformDraw1"),t(e.type),eu()},children:(0,Kg.jsx)(iP,{type:e.icon,style:{fontSize:34}})})},e.type)))})]})},r8=n8,o8=()=>{var e=(0,r.useRef)(null),t=(0,dx.Z)({page:1,pageSize:30,totalPage:1,data:[],imgData:[],moreKey:"",class_id:"",keyword:"",shapeList:[],search_type:""}),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=a.moreKey,l=a.keyword,c=(0,DI.ZP)(KO),d=c.data;d=void 0===d?{other:[],recommend:[]}:d;var v=d.other,h=d.recommend,f=c.loading,g=(0,DI.ZP)(eB,{manual:!0}),x=g.data,y=g.run,b=(null===x||void 0===x?void 0:x.items)||[],_=(0,Zm.Z)((e=>{o(e)}),{wait:500}),j=_.run,w=t=>{Km("action_more",{action_label:"element_".concat(t.id)}),e.current.state.value="",o({search_type:t.asset_type,moreKey:t.class_name,imgData:[],class_id:t.id,keyword:""})},k=e=>{o({search_type:e,imgData:[]})};function T(e){return Z.apply(this,arguments)}function Z(){return Z=(0,p.Z)(m().mark((function e(t){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!(sA()>-1)){e.next=4;break}return e.next=3,$O({id:t.id,asset_type:t.asset_type});case 3:y();case 4:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}return(0,r.useEffect)((()=>{sA()>-1&&y()}),[]),(0,Kg.jsxs)("div",{style:{display:"flex",flexFlow:"column",height:"100%",paddingBottom:16},children:[(0,Kg.jsx)(d1,{ref:e,searchKey:"keyword",onChange:e=>{var t=e.keyword,i=t?"asset":"";j((0,u.Z)((0,u.Z)({},a),{},{imgData:[],keyword:t,search_type:i,moreKey:t}))},placeholder:"\u641c\u7d22\u5143\u7d20"}),""===s?(0,Kg.jsxs)("div",{className:$9().list,children:[(0,Kg.jsx)(gE,{loading:f,columns:4,children:(0,Kg.jsx)(Q9,{data:h,onChange:e=>{Km("action_element_recommend",{action_label:e.asset_type}),w(e)}})}),(0,Kg.jsx)(r8,{}),(0,Kg.jsx)(gE,{loading:f,columns:3,rows:3,title:!0,more:!0,style:{marginTop:16},children:[{class_name:"\u6700\u8fd1\u4f7f\u7528",asset_type:"used",assetList:b},...v].map((e=>!!e.assetList.length&&(0,Kg.jsx)(t8,{item:e,getMore:()=>w(e),onAfterAdd:T},"element-".concat(e.id))))})]}):(0,Kg.jsx)(q9,{keyword:l,state:a,goBack:w,bindChangeType:k,onAfterAdd:T})]})},s8=o8,l8=e=>{var t=e.data,i={meta:{type:"pic"},attribute:{width:t.width,height:t.height,resId:t.id,picUrl:t.host+t.sample_big,rt_preview_url:t.host+t.sample}};return(0,Kg.jsx)(mL,{data:i,type:"image",children:(0,Kg.jsx)(lK,{data:i.attribute,type:"image",style:{width:150,height:86,backgroundColor:"#e3e7eb"}})})},c8=l8,d8=e=>{var t=e.requests,i=e.param;return(0,Kg.jsx)(yE,{params:i,request:t,formatResult:e=>({list:e.data.list,pageTotal:Math.ceil((null===e||void 0===e?void 0:e.data.total)/(null===e||void 0===e?void 0:e.data.pageSize)),page:Number(e.data.page)}),skeleton:{rows:5},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,148px)",gap:16,alignContent:"start"},children:t.map((e=>(0,Kg.jsx)(c8,{data:e},"user-space-userImg-".concat(e.id))))})}})},u8=(0,r.memo)(d8),p8=i(4177),v8=i.n(p8),m8=YP.Z.TabPane,h8=[{key:"isPortrait",label:"\u4eba\u50cf",type:"radio",options:[{value:0,label:"\u5168\u90e8"},{value:1,label:"\u6709"},{value:2,label:"\u65e0"}]}],f8=()=>{var e=(0,dx.Z)({kid:"20,2,66",isHot:"",isNew:"",isElite:0,keyword:"",isPortrait:0,page:1}),t=(0,n.Z)(e,2),i=t[0],a=t[1],r=i.isElite,o=i.kid,s=i.isNew,l=e=>{a("isNew"===e?{isNew:1,isHot:0}:{isNew:0,isHot:1}),Km("panel_img_".concat(o,"_").concat(e))},c=e=>{a({kid:e}),Km("panel_img_".concat(e))};return(0,Kg.jsxs)("div",{className:v8().CloudImg,children:[(0,Kg.jsxs)(YP.Z,{onChange:c,activeKey:o,style:{height:44,flex:"0 0 auto"},children:[(0,Kg.jsx)(m8,{tab:"\u5168\u90e8"},"20,2,66"),(0,Kg.jsx)(m8,{tab:"\u521b\u610f\u80cc\u666f"},"2"),(0,Kg.jsx)(m8,{tab:"\u63d2\u753b"},"66"),(0,Kg.jsx)(m8,{tab:"\u7167\u7247"},"20")]}),(0,Kg.jsx)(d1,{searchKey:"keyword",placeholder:"\u641c\u7d22\u56fe\u7247",filters:h8,onChange:a,onFilter:a,defaultValue:{isPortrait:0}}),(0,Kg.jsxs)(YP.Z,{defaultActiveKey:"1",onChange:l,size:"small",activeKey:s?"isNew":"isHot",style:{flex:1},tabBarExtraContent:(0,Kg.jsx)("div",{children:(0,Kg.jsx)(FP.ZP,{checked:1===r,onClick:()=>{var e=1===r?0:1;a({isElite:e})},children:(0,Kg.jsx)("span",{className:v8().radioSpan,children:"\u7cbe\u54c1"})})}),children:[(0,Kg.jsx)(m8,{tab:"\u70ed\u95e8",children:(0,Kg.jsx)(u8,{requests:JO,param:i})},"isHot"),(0,Kg.jsx)(m8,{tab:"\u6700\u65b0",children:(0,Kg.jsx)(u8,{requests:JO,param:i})},"isNew")]})]})},g8=(0,r.memo)(f8),x8=i(12263),y8=i.n(x8);function b8(e){var t=e.data,i={meta:{type:"videoE"},attribute:{resId:t.id,rt_total_time:t.duration,width:t.width,height:t.height,rt_frame_url:t.frame_file,rt_total_frame:t.total_frame,rt_url:t.sample,rt_preview_url:t.preview}};return(0,Kg.jsx)(mL,{data:i,type:"videoE",children:(0,Kg.jsx)(lK,{data:i.attribute,type:"videoE",className:y8().wrap})})}var _8=b8,j8=i(67077),w8=i.n(j8);function k8(){var e=Cf(),t=e.openSidePanel,i=(0,DI.ZP)(DV,{}),a=i.data,n=void 0===a?[]:a,r=i.loading;return(0,Kg.jsx)(gE,{loading:r,title:!0,more:!0,columns:2,rows:5,className:w8().recommend,children:n.map((e=>{var i=e.class_name,a=e.id,n=e.videoList;return(0,Kg.jsx)(dL,{title:i,style:{fontSize:14,color:"#262E48"},extraContent:(0,Kg.jsxs)("div",{className:w8().more,onClick:()=>{t({submenu:"".concat(i,"-").concat(a)}),Km("action_more",{action_label:"videoE_".concat(a)})},children:["\u66f4\u591a",">"]}),children:(0,Kg.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 148px)",gridGap:16},children:n.map((e=>(0,Kg.jsx)(_8,{data:e},e.id)))})},"class_name-".concat(a))}))})}function T8(e){var t,i=e.keyword,a=e.hasTitle,r=void 0===a||a,o=e.ratio,s=e.class_id,l=Cf(),c=l.leftSideInfo,d=l.openSidePanel,u=(null===(t=c.submenu)||void 0===t?void 0:t.split("-"))||[],p=(0,n.Z)(u,2),v=p[0],m=p[1];return(0,Kg.jsxs)("div",{className:w8()["more-list"],children:[r&&(0,Kg.jsxs)("div",{className:w8()["class-name"],onClick:()=>{d()},children:["<",v]}),(0,Kg.jsx)(yE,{request:zV,beforeLoadData:e=>e,params:{class_id:null!==s&&void 0!==s?s:m,keyword:i,ratio:o},skeleton:{rows:5},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill, 148px)"},children:t.map((e=>(0,Kg.jsx)(_8,{data:e},e.id)))})}})]})}function Z8(e){var t=e.keyword,i=e.ratio;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)(YP.Z,{className:w8()["xiudd-videoE-search-list"],children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u5168\u90e8",children:(0,Kg.jsx)(T8,{hasTitle:!1,class_id:"",keyword:t,ratio:i})},"0"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u89c6\u9891\u80cc\u666f",children:(0,Kg.jsx)(T8,{hasTitle:!1,class_id:2001,keyword:t,ratio:i})},"2001"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u5b9e\u62cd\u89c6\u9891",children:(0,Kg.jsx)(T8,{hasTitle:!1,class_id:2002,keyword:t,ratio:i})},"2002")]})})}var C8=[{key:"ratio",label:"\u89c6\u9891\u6bd4\u4f8b",type:"radio",options:[{value:"w",label:"16:9"},{value:"h",label:"9:16"},{value:"c",label:"1:1"}]}];function N8(){var e=(0,r.useState)(),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=Cf(),u=d.leftSideInfo.submenu;return(0,Kg.jsxs)(rE,{search:(0,Kg.jsx)(d1,{searchKey:"keyword",placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22",filters:C8,onChange:e=>{a(null===e||void 0===e?void 0:e.keyword)},onFilter:e=>{c(null===e||void 0===e?void 0:e.ratio)}}),children:[(i||l)&&(0,Kg.jsx)(Z8,{keyword:i,ratio:l}),(0,Kg.jsx)(eM,{visible:!u&&!i&&!l,children:(0,Kg.jsx)(k8,{})}),(0,Kg.jsx)(eM,{visible:Boolean(u&&!i&&!l),children:(0,Kg.jsx)(T8,{})})]})}var S8=i(30305),I8=i.n(S8),A8=i(65086),P8=i.n(A8);function M8(e){var t=e.data,i=e.class_id,a=e.action;function o(e){return{meta:{type:"videoE",isOverlay:!0,name:e.title||"\u89c6\u9891\u7279\u6548"},attribute:(0,u.Z)({resId:e.gid,rt_total_time:e.duration,rt_frame_url:e.frame_file,rt_total_frame:e.total_frame,rt_url:e.url,rt_preview_url:e.cover_url,isLoop:!0},qv({width:e.width,height:e.height}))}}var s=o(t);function l(){Km(a,{action_label:"videoEffect_add"===a?i:"",asset_id:t.gid})}var c=function(){var e=(0,p.Z)(m().mark((function e(){return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,BV(t.gid);case 2:e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=()=>{l(),Tg(s),c()},v=(0,r.useState)({}),h=(0,n.Z)(v,2),f=h[0],g=h[1],x=e=>{var t=(null===e||void 0===e?void 0:e.filters)||[];t&&t.forEach((e=>{e.bgimg_url&&g(e)}))};return(0,r.useEffect)((()=>{x(t)}),[t]),(0,Kg.jsx)(mL,{data:s,type:"videoE",onDrop:c,children:(0,Kg.jsxs)("div",{className:P8().wrap,onClick:d,children:[(0,Kg.jsx)("div",{className:P8().bgImg,children:(null===f||void 0===f?void 0:f.bgimg_url)&&(0,Kg.jsx)("img",{src:null===f||void 0===f?void 0:f.bgimg_url,alt:""})}),(0,Kg.jsx)(UM,{src:t.url,poster:t.cover_url,defaultBackground:!1,style:{zIndex:2,overflow:"hidden"},styleChild:{backgroundSize:"cover"},styleVideo:{top:"50%",width:"100%",left:0,objectFit:"cover",transform:"translate(0, -50%)"},loop:!0})]})})}var E8=M8,L8=i(6423),D8=i.n(L8);function R8(e){var t=e.onChange,i=Cf(),a=i.openSidePanel,n=(0,DI.ZP)(FV,{}),o=n.data,s=n.loading,l=(null===o||void 0===o?void 0:o.items)||[];return(0,r.useEffect)((()=>{if(l){var e="";l.forEach(((t,i)=>{i===l.length-1?e+="".concat(t.id):e+="".concat(t.id,",")})),t&&t(e)}}),[l]),(0,Kg.jsx)(gE,{loading:s,title:!0,more:!0,columns:2,rows:5,style:{overflowY:"auto",overflowX:"hidden"},children:l.map((e=>{var t=e.name,i=e.id,n=e.list,r=void 0===n?[]:n;return(0,Kg.jsx)(dL,{title:t,style:{fontSize:12,color:"#262E48",fontWeight:"bold"},contentStyle:{gridTemplateColumns:"repeat(auto-fill,152px)",gap:8},extraContent:(0,Kg.jsxs)("div",{className:D8().more,onClick:()=>{a({submenu:"".concat(t,"-").concat(i)}),Km("videoEffect_more",{asset_id:i})},children:["\u66f4\u591a",">"]}),children:r.map((e=>(0,Kg.jsx)(E8,{data:e,class_id:i,action:"videoEffect_add"},e.gid)))},"class_name-".concat(i))}))})}function z8(e){var t,i=e.keyword,a=e.hasTitle,o=void 0===a||a,s=e.ratio,l=e.class_id,c=e.action,d=void 0===c?"videoEffect_add":c,u=Cf(),p=u.leftSideInfo,v=u.openSidePanel,m=(null===(t=p.submenu)||void 0===t?void 0:t.split("-"))||[],h=(0,n.Z)(m,2),f=h[0],g=void 0===f?"":f,x=h[1],y=void 0===x?"":x,b=(0,r.useState)(0),_=(0,n.Z)(b,2),j=_[0],w=_[1];return(0,Kg.jsxs)("div",{className:D8()["more-list"],style:l?{}:{paddingBottom:40},children:[o&&(0,Kg.jsxs)("div",{className:D8()["class-name"],onClick:()=>{v()},children:["<",g]}),i&&(0,Kg.jsxs)("div",{className:D8().keyword,children:["\u201c",i,"\u201d\u76f8\u5173\u5171",j,"\u4e2a"]}),(0,Kg.jsx)(yE,{request:OV,beforeLoadData:e=>e,params:{class_id:null!==l&&void 0!==l?l:y,keyword:i,ratio:s,pageSize:30},skeleton:{rows:5},onChange:e=>{w(e.length)},children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill, 148px)"},children:t.map((e=>(0,Kg.jsx)(E8,{data:e,class_id:null!==l&&void 0!==l?l:y,action:d},e.gid)))})})}})]})}function F8(e){var t=e.class_id,i=e.keyword,a=e.ratio;return(0,Kg.jsx)(z8,{hasTitle:!1,class_id:t,keyword:i,ratio:a,action:"videoEffect_search_add"})}function O8(e){var t=e.keyword,i=void 0===t?"":t,a=(e.visible,Cf()),o=a.leftSideInfo.submenu,s=(0,r.useState)(""),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=e=>{d(e)};return(0,Kg.jsxs)(Kg.Fragment,{children:[i&&(0,Kg.jsx)(F8,{keyword:i,class_id:c}),(0,Kg.jsx)(eM,{visible:!o&&!i,className:D8()["list-wrap"],children:(0,Kg.jsx)(R8,{onChange:u})}),(0,Kg.jsx)(eM,{visible:Boolean(o&&!i),children:(0,Kg.jsx)(z8,{})})]})}function B8(){return(0,Kg.jsx)("div",{className:I8()["video-list"],children:(0,Kg.jsx)(yE,{request:WV,beforeLoadData:e=>e,params:{pageSize:30},skeleton:{rows:5},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill, 148px)"},children:t.map((e=>(0,Kg.jsx)(E8,{data:e,action:"videoEffect_recently_add"},e.id)))})}})})}function W8(){var e=(0,r.useState)(""),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)("all"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=Cf(),u=d.leftSideInfo.submenu;return(0,Kg.jsxs)(rE,{search:(0,Kg.jsx)(d1,{defaultValue:1,searchKey:"keyword",placeholder:"\u641c\u7279\u6548",onChange:e=>{a(null===e||void 0===e?void 0:e.keyword),Km("videoEffect_search",{action_label:null===e||void 0===e?void 0:e.keyword})}}),children:[!u&&(0,Kg.jsxs)(YP.Z,{className:I8().indexTabs,defaultActiveKey:l,style:{display:i?"none":"block"},onChange:e=>{c(e),"recently"===e&&Km("videoEffect_recently")},children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u5168\u90e8"},"all"),(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u6700\u8fd1\u4f7f\u7528"},"recently")]}),"all"===l&&(0,Kg.jsx)(O8,{keyword:i,visible:"all"===l}),"recently"===l&&(0,Kg.jsx)(B8,{})]})}function V8(e){Lb(iw()[e][0],!1)}function U8(e){var t=e.data,i=e.type,a=e.isSearch,o=void 0!==a&&a,s="VB"===i,l=iK(),c=l.onImgReplace,d=l.onVideoReplace,v=(0,r.useState)(!1),h=(0,n.Z)(v,2),f=h[0],g=h[1],x=(0,r.useState)(),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=(0,r.useState)(),w=(0,n.Z)(j,2),k=w[0],T=w[1],Z=Mw(),C=(0,n.Z)(Z,1),N=C[0],S=Lw(),I=S.template,A=null===I||void 0===I?void 0:I.assets.find((e=>e.meta.isBackground)),P=()=>s?t.gid.indexOf("VB")>-1?"video":"videoE":"pic";function M(){g(!1)}function E(){return s?{width:t.width,height:t.height,resId:t.gid,rt_url:t.url,rt_preview_url:t.cover_url,rt_frame_url:(null===t||void 0===t?void 0:t.frame_file)||"",rt_total_frame:t.total_frame,rt_total_time:t.duration,assetWidth:t.width,assetHeight:t.height}:{width:t.width,height:t.height,resId:t.gid,picUrl:t.url,rt_preview_url:t.cover_url}}var L=()=>({meta:{type:P(),isBackground:!0},attribute:E()});function D(e,t){return R.apply(this,arguments)}function R(){return R=(0,p.Z)(m().mark((function e(t,i){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:a=Ow()+1,dw({assets:[(0,u.Z)((0,u.Z)({type:P(),isBackground:!0},i),xm(i,{isBackground:!0}))],pageTime:t,index:a}),setTimeout((()=>{V8(a)}),10);case 3:case"end":return e.stop()}}),e)}))),R.apply(this,arguments)}var z=e=>{"add"===e?D(3e3,E()):c(E(),(()=>{}))};function F(e){var t={type:P(),isBackground:!0},i=e.cet-e.cst,a=(0,u.Z)((0,u.Z)((0,u.Z)({},E()),e),{},{startTime:0,endTime:i});switch(k){case"addInCurrent":xw(i),setTimeout((()=>{Tg({meta:t,attribute:a})}));break;case"add":D(i,a);break;case"replace":d(e,(0,u.Z)({type:P()},a),(()=>{}));break}M()}var O=(e,i)=>{var a=o?"bgModule_009":"bgModule_008";Km(a,{action_label:s?"video":"image"}),"add"===i&&jd-N<1e3?xp.default.info("\u4e0d\u80fd\u518d\u6dfb\u52a0\u5566~~,\u4ec5\u652f\u6301\u5236\u4f5c".concat(jd/1e3,"s\u4ee5\u5185\u7684\u89c6\u9891")):s?(_((0,u.Z)((0,u.Z)({},e),{},{preview_video:t.url})),T(i),g(!0)):z(i)},B=(0,Zm.Z)((e=>{O((0,u.Z)((0,u.Z)({},t),{},{preview_video:t.url}),e)}),{wait:300}),W=B.run;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(tK,{visible:f,onCancel:M,contentProps:{data:b,onOk:F,actionType:k,trigger:"menu_background"}}),(0,Kg.jsx)(mL,{data:L(),type:s?P():"image",children:(0,Kg.jsxs)("div",{className:"background-video-item",onClick:()=>W(A?"add":"addInCurrent"),children:[s&&(0,Kg.jsx)("div",{className:"background-video-duration",children:Th(parseInt("".concat(t.duration/1e3),10))}),(0,Kg.jsx)(rK,{tip:"\u66ff\u6362\u5f53\u524d\u80cc\u666f",className:"background-video-replace",onClick:e=>{Ph(e),W("replace")},icon:"icontihuan",hidden:!A}),s?(0,Kg.jsx)(UM,{poster:t.cover_url,src:t.url}):(0,Kg.jsx)(LE,{poster:t.cover_url})]})},t.id)]})}var G8=(0,hp.Pi)(U8);function X8(e){var t=e.list,i=e.type,a=e.shape,n=void 0===a?"w":a,r=e.isSearch,o=void 0!==r&&r;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:hb()("background-video-list",{"background-video-w":"w"===n,"background-video-h":"h"===n,"background-video-c":"c"===n}),children:t.map((e=>(0,Kg.jsx)("div",{className:"background-video-item",children:(0,Kg.jsx)(G8,{type:i,data:e,isSearch:o})},e.gid)))})})}var q8=(0,hp.Pi)(X8);function H8(e){var t=e.type,i=e.shape,a=Cf(),o=a.openSidePanel,s=(0,r.useState)([]),l=(0,n.Z)(s,2),c=l[0],d=l[1],u={VB:{h:"1230806",w:"1230805",c:"1230807"},GP:{h:"1230810",w:"1230809",c:"1230811 "}},p=(0,DI.ZP)(sz,{manual:!0,onSuccess:e=>{d(null===e||void 0===e?void 0:e.items)}}),v=p.run,m=p.loading;return(0,r.useEffect)((()=>{v(u[t][i])}),[i]),(0,Kg.jsx)(gE,{loading:m,title:!0,more:!0,columns:2,rows:5,style:{marginTop:"5px",overflowY:"auto",overflowX:"hidden"},children:null===c||void 0===c?void 0:c.map((e=>{var a=e.name,n=e.id,r=e.list;return(0,Kg.jsx)(dL,{title:a,style:{fontSize:12,alignItems:"start",height:26,lineHeight:"12px",color:"#262E48"},extraContent:(0,Kg.jsxs)("div",{onClick:()=>{o({submenu:"".concat(a,"-").concat(t,"-").concat(n,"-").concat(i)});var e="VB"===t?"video":"image";Km("bgModule_007",{action_label:e})},style:{fontSize:12,fontWeight:400,color:"#7e8aa9"},children:["\u66f4\u591a",">"]}),contentStyle:{display:"block",marginBottom:18},children:(0,Kg.jsx)(q8,{list:r,type:t,shape:i,isSearch:!1})},"class_name-".concat(n))}))})}var Y8=i(25558),K8=i.n(Y8);function Q8(e){var t=e.params,i=e.type,a=(e.bindClickTag,(0,DI.ZP)(lz,{defaultParams:["VB"==i?"1230805":"1230809"]}));a.data,a.loading;return(0,Kg.jsx)("div",{className:K8().searchPage,children:(0,Kg.jsx)("div",{className:K8().searchPageContent,children:(0,Kg.jsx)(yE,{request:oz,params:(0,u.Z)({},t),skeleton:{rows:5},emptyDesc:(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("p",{children:["\u6ca1\u6709\u641c\u7d22\u5230\u201c",(0,Kg.jsx)("span",{className:K8()["empty-keyword"],children:null===t||void 0===t?void 0:t.keyword}),"\u201d\u7684\u76f8\u5173\u80cc\u666f"]}),(0,Kg.jsx)("p",{className:K8().emptyTxt,children:"\u60a8\u53ef\u4ee5\u5c1d\u8bd5\u66f4\u6362\u5173\u952e\u8bcd\u6765\u641c\u7d22"})]}),children:e=>{var a=e.list;return(0,Kg.jsx)(q8,{list:a,type:i,shape:t.shape,isSearch:!0})}})})})}var J8=Q8,$8=i(36055),e7=i.n($8),t7=YP.Z.TabPane;function i7(e){var t=e.children,i=e.color,a=e.gradientColorChange,o=e.colorPickupChange,s=e.changeMockGradient,l=e.isDesigner,c=e.placement,d=void 0===c?"bottomRight":c,u=(0,r.useState)(!1),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,r.useState)("color"),f=(0,n.Z)(h,2),g=f[0],x=f[1];return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(tE.Z,{visible:v,trigger:"click",overlayClassName:"colorPopover",onVisibleChange:e=>{m(e)},placement:d,destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{className:hb()(e7().colorPopover,{[e7().designerColorPopover]:l}),children:(0,Kg.jsxs)(YP.Z,{tabBarExtraContent:(0,Kg.jsx)(tE.Z,{trigger:"click",placement:"bottomRight",destroyTooltipOnHide:!0,overlayClassName:e7()["color-picker"],content:a?(0,Kg.jsx)(uD,{color:i||"",gradientColorChange:e=>{a(e)},colorPickupChange:e=>{o(null===e||void 0===e?void 0:e.rgb)},type:g,setType:x}):(0,Kg.jsx)("div",{style:{padding:"10px"},children:(0,Kg.jsx)(QL,{color:i||"",onChange:e=>{o(e.rgb)}})}),children:(0,Kg.jsx)("div",{className:e7().colorPopoverRight,children:"\u81ea\u5b9a\u4e49\u989c\u8272"})}),children:[(0,Kg.jsx)(t7,{tab:"\u9884\u8bbe\u7eaf\u8272",children:(0,Kg.jsx)("div",{className:e7().colorWarp,children:UL.map((e=>(0,Kg.jsx)("div",{className:e7().colorWarpItem,style:{background:e},onClick:t=>{var i=e.replace(/[^\d,]/g,"").split(","),a={r:Number(i[0]),g:Number(i[1]),b:Number(i[2]),a:1};o(a)}},e)))})},"1"),s&&(0,Kg.jsx)(t7,{tab:"\u9884\u8bbe\u6e10\u53d8",children:(0,Kg.jsx)("div",{className:e7().colorWarp,children:CL.map((e=>(0,Kg.jsx)("div",{className:e7().colorWarpItem,style:{backgroundImage:e},onClick:t=>{s(e)}},e)))})},"2")]})}),children:(0,Kg.jsx)("div",{onClick:()=>{m(!0)},children:t})})})}var a7=i7,n7=i(37207),r7=i.n(n7);function o7(){var e=bw(),t=e.backgroundColor,i=e.update,a=DL(),n=a.list,o=a.editFlag,s=a.getEffectColor,l=a.changeList,c=a.changeAngle,d=e=>{Km("bgModule_012");var t=PL(e);c(t.angle),l(t.list)};(0,r.useEffect)((()=>{if(n.length>0){var e=s();e&&i({type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle})}}),[o]);var u=["rgb(204, 116, 116)","rgb(227, 187, 46)","rgb(63, 172, 245)","rgb(54, 159, 133)","rgb(129, 199, 132)","rgb(171, 71, 188)"],p=["linear-gradient(180deg, rgba(151, 132, 251, 1) 0%, rgba(93, 77, 245, 1) 100%)","linear-gradient(232deg, rgba(140, 254, 185, 1) 0%, rgba(247, 251, 128, 1) 100%)","linear-gradient(227deg, rgba(251, 173, 125, 1) 0%, rgba(247, 202, 106, 1) 100%)","linear-gradient(215deg, rgba(253, 218, 65, 1) 0%, rgba(248, 37, 38, 1) 100%)","linear-gradient(211deg, rgba(232, 172, 172, 1) 0%, rgba(245, 224, 57, 1) 100%)"];return(0,Kg.jsxs)("div",{className:r7().backColor,children:[(0,Kg.jsx)("div",{className:r7().backColorTitle,children:"\u80cc\u666f\u989c\u8272"}),(0,Kg.jsx)("div",{className:r7().topColor,children:u.map((e=>(0,Kg.jsx)("div",{style:{background:e},className:r7().colorItem,onClick:t=>{var a=e.replace(/[^\d,]/g,"").split(","),n={r:Number(a[0]),g:Number(a[1]),b:Number(a[2]),a:1};Km("bgModule_011"),i(n)}},e)))}),(0,Kg.jsxs)("div",{className:r7().topColor,children:[p.map((e=>(0,Kg.jsx)("div",{onClick:()=>d(e),style:{background:e},className:r7().colorItem},e))),(0,Kg.jsx)(a7,{isDesigner:!1,placement:"bottomRight",color:t,colorPickupChange:e=>{Km("bgModule_011"),i(e)},gradientColorChange:e=>{Km("bgModule_012"),i(e)},changeMockGradient:d,children:(0,Kg.jsx)("div",{className:r7().colorItem1,onClick:()=>{Km("bgModule_010")},children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})})})]})]})}var s7=(0,hp.Pi)(o7),l7=i(76586),c7=i.n(l7),d7=YP.Z.TabPane;function u7(e){var t=e.keyword,i=(0,r.useState)(_h()),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,r.useState)(""),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(0,r.useState)(""),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)("video"),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(e,t)=>{"VB"===t?h(e):u(e)};return(0,r.useEffect)((()=>{t&&Km("bgModule_001",{action_label:x})}),[t]),(0,Kg.jsxs)("div",{className:c7().defaultPage,children:[!t&&(0,Kg.jsx)(s7,{}),!t&&(0,Kg.jsx)(IR.Z,{className:c7().defaultPageDivider}),(0,Kg.jsx)("div",{className:c7().defaultPageContent,children:(0,Kg.jsx)(YP.Z,{size:"small",style:{flex:1},onChange:e=>{var i="VB"===e?"video":"image";y(i);var a=t?"bgModule_003":"bgModule_002";Km(a,{action_label:i})},tabBarExtraContent:(0,Kg.jsx)(NH.Z,{overlay:(0,Kg.jsxs)(SH.Z,{selectedKeys:[o],onClick:e=>{s(e.key);var t={h:"bgModule_005",w:"bgModule_004",c:"bgModule_006"}[e.key]||"bgModule_004";Km(t,{action_label:x})},children:[(0,Kg.jsx)(SH.Z.Item,{className:c7().defaultPageContentMenuItem,children:"\u7ad6\u7248"},"h"),(0,Kg.jsx)(SH.Z.Item,{className:c7().defaultPageContentMenuItem,children:"\u6a2a\u7248"},"w")]}),children:(0,Kg.jsxs)("div",{style:{cursor:"pointer"},children:[{h:"\u7ad6\u7248",w:"\u6a2a\u7248",c:"\u65b9\u5f62"}[o],(0,Kg.jsx)(Ez.Z,{className:c7().defaultPageContentTabIcon})]})}),children:[{name:"\u89c6\u9891",key:"VB"},{name:"\u56fe\u7247",key:"GP"}].map((e=>(0,Kg.jsx)(d7,{tab:e.name,children:t?(0,Kg.jsx)(J8,{bindClickTag:b,params:"VB"===e.key?{keyword:t,filter_id:m,resource_flag:e.key,shape:o}:{keyword:t,filter_id:d,resource_flag:e.key,shape:o},type:e.key}):(0,Kg.jsx)(H8,{type:e.key,shape:o})},e.key)))})})]})}var p7=u7,v7=i(71192),m7=i.n(v7);function h7(){var e,t=Cf(),i=t.leftSideInfo,a=t.openSidePanel,r=(null===(e=i.submenu)||void 0===e?void 0:e.split("-"))||[],o=(0,n.Z)(r,4),s=o[0],l=o[1],c=o[2],d=o[3];return(0,Kg.jsx)(Kg.Fragment,{children:i.submenu&&(0,Kg.jsxs)("div",{className:m7()["more-list"],children:[(0,Kg.jsxs)("div",{className:m7()["class-name"],onClick:()=>{a()},children:["<",s]}),(0,Kg.jsx)(yE,{request:oz,params:{filter_id:c,shape:d,resource_flag:"VB"==l?"VB":"GP"},skeleton:{rows:5},children:e=>{var t=e.list;return(0,Kg.jsx)(q8,{list:t,type:l,shape:d,isSearch:!1})}})]})})}function f7(){var e=(0,r.useState)(""),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,ez.Z)(i,{wait:500}),s=Cf(),l=s.leftSideInfo.submenu,c=s.openSidePanel;return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(rE,{children:(0,Kg.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[(0,Kg.jsx)(d1,{searchKey:"keyword",onChange:e=>{c({submenu:""}),a(e.keyword)},className:"backgroundElementSearch",placeholder:"\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22"}),(0,Kg.jsxs)("div",{style:{height:"calc(100% - 72px)"},children:[(0,Kg.jsx)(eM,{visible:!l,children:(0,Kg.jsx)(p7,{keyword:o})}),(0,Kg.jsx)(eM,{visible:Boolean(l&&!i),children:(0,Kg.jsx)(h7,{})})]})]})})})}var g7=(0,hp.Pi)(f7);function x7(){var e=Cf(),t=e.openSidePanel,i=e.leftSideInfo,a=i.menu,n=i.sidePanelVisible,r=e.closeSidePanel,o=Gf(),s=o.close,l=o.value.visible,c=oA(),d=Ff(),u=d.moreMenu,p=d.updateMoreMenu,v=[{label:"a",id:"template",name:"\u6a21\u677f",icon:"moban",display:1},{label:"b",id:"scene",name:"\u7247\u6bb5",icon:"pianduan",display:1},{label:"c",id:"user-space",name:"\u4e0a\u4f20",icon:"shangchuan",display:1},{label:"d",id:"text",name:"\u6587\u5b57",icon:"wenzi",display:1},{label:"e",id:"element",name:"\u5143\u7d20",icon:"yuansu",display:1},{label:"f",id:"music",name:"\u97f3\u4e50",icon:"yinle",display:1},{label:"o",id:"EffectVideo",name:"\u7279\u6548",icon:"texiao-6hf9cnel",display:1,isClose:!0,newFun:!1},{label:"g",id:"module",name:"\u7ec4\u4ef6",icon:"zujian",display:1,isClose:!0},{label:"q",id:"qrcode",name:"\u4e8c\u7ef4\u7801",icon:"iconerweima",display:1,isClose:!0},{label:"h",id:"background",name:"\u80cc\u666f",icon:"beijing",display:1,isClose:!0},{label:"i",id:"AI",name:"AI\u8bed\u97f3",icon:"AIyuyin",display:1,isClose:!0},{label:"j",id:"videoE",name:"\u89c6\u9891",icon:"shipin",display:1,isClose:!0},{label:"k",id:"img",name:"\u56fe\u7247",icon:"tupian",display:1,isClose:!0},{label:"l",id:"role",name:"\u89d2\u8272",icon:"jiaose",display:0,isClose:!0},{label:"m",id:"logo",name:"logo\u6c34\u5370",icon:"shuiyin-5khma0nc",display:0,isClose:!0},{label:"n",id:"brandLogo",name:"\u54c1\u724clogo",icon:"pinpai-6aen9hm2",display:0,isClose:!0},{id:"more",name:"\u66f4\u591a",icon:"huaban1",display:1}],m=e=>{e?PA().then((e=>{for(var t=[],i=0;i<e.data.length;i++)for(var a=e.data[i],n=0;n<v.length;n++){var r=v[n];if(r.label===a.name){var o=JSON.parse(JSON.stringify(r));o.display=a.display,"brandLogo"===r.id?(null===c||void 0===c?void 0:c.team_id)>0&&t.push(o):t.push(o)}}t.push({id:"more",name:"\u66f4\u591a",icon:"huaban1",display:1}),p({menuList:t})})):p({menuList:v})},h=e=>{eu(),"AI"===e.id?Km("ai_audio_003"):"EffectVideo"===e.id?Km("videoEffect_panel"):Km("menu_".concat(e.id)),e.id===a&&!l&&n?r():t({menu:e.id}),s()},f=(e,t)=>{var i=null===e||void 0===e?void 0:e.filter((e=>1===e.display)),a=0;null===i||void 0===i||i.map(((e,n)=>{e.id===t&&n+1<=(null===i||void 0===i?void 0:i.length)&&(a=n+1)}));var n=i[a];h(n)},g=e=>{MA(e)},x=(e,t,i)=>{var a=e.id,n=e.label,r=null===u||void 0===u?void 0:u.menuList,o=null===r||void 0===r?void 0:r.map((e=>{if(e.id===a){var i=JSON.parse(JSON.stringify(e));return i.display=t,i}return e})),s=JSON.parse(JSON.stringify(o));0===t&&f(r,a),i>0&&g(n),p({menuList:s})};return{delSideMenu:x,bindMouseDown:h,getShowSideMenu:m}}function y7(){var e=x7(),t=e.delSideMenu,i=e.bindMouseDown,a=Ff(),n=a.moreMenu,r=sA(),o=n||{menuList:[]},s=o.menuList,l=null===s||void 0===s?void 0:s.filter((e=>0===e.display));return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:"more",children:l.map((e=>(0,Kg.jsxs)("div",{id:"left-menu-".concat(e.id),className:hb()("menu-item"),onMouseDown:()=>{t(e,1,r),Km("menu_show_".concat(e.id)),i(e)},children:[(0,Kg.jsx)("div",{className:"menu-item-icon",children:(0,Kg.jsx)(iP,{type:e.icon})}),(0,Kg.jsx)("div",{className:"menu-item-name",children:e.name})]},e.id)))})})}var b7=y7;function _7(){return bp.g.get("/editor/module-label-list")}function j7(e){return bp.g.get("/editor/module-list?".concat((0,jp.stringify)(e)))}var w7=i(23688),k7=i.n(w7);function T7(e){var t=e.data,i=e.setPreview,a=e.onAdd,n=(0,r.useRef)(null),o=(0,bE.Z)(n),s={meta:{type:"module"},attribute:{resId:t.id,rt_preview_url:t.imgUrl}};return(0,r.useEffect)((()=>{i(o?t:void 0)}),[o]),(0,Kg.jsx)(mL,{data:s,type:"module",children:(0,Kg.jsx)("div",{ref:n,className:k7().maskModuleItem,onClick:()=>a(t),children:(0,Kg.jsx)(LE,{poster:t.imgUrl})})})}var Z7=T7,C7=i(29856),N7=i.n(C7);function S7(e){var t=e.setPreview,i=e.onAdd,a=Cf(),n=a.openSidePanel,r=(0,DI.ZP)(_7,{}),o=r.data,s=void 0===o?[]:o,l=r.loading;return(0,Kg.jsx)(gE,{loading:l,title:!0,more:!0,columns:2,rows:5,className:N7().module,children:s.map((e=>{var a=e.class_name,r=e.id,o=e.recommendInfo;return(0,Kg.jsx)(dL,{title:a,style:{fontSize:14,color:"#262E48"},extraContent:(0,Kg.jsxs)("div",{className:N7().more,onClick:e=>{Ph(e),n({menu:"module",submenu:"".concat(a,"-").concat(r)}),Km("action_more",{action_label:"videoE_".concat(r)})},children:["\u66f4\u591a",">"]}),children:(0,Kg.jsx)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, 148px)",gridGap:16},children:o.map((e=>(0,Kg.jsx)(Z7,{data:e,setPreview:t,onAdd:i},e.id)))})},"class_name-".concat(r))}))})}var I7=i(19499),A7=i.n(I7);function P7(e){var t,i=e.hasTitle,a=void 0===i||i,r=e.class_id,o=e.setPreview,s=e.onAdd,l=Cf(),c=l.leftSideInfo,d=l.openSidePanel,u=(null===(t=c.submenu)||void 0===t?void 0:t.split("-"))||[],p=(0,n.Z)(u,2),v=p[0],m=p[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[a&&(0,Kg.jsxs)("div",{className:A7()["class-name"],onClick:e=>{d({menu:"module",submenu:""})},children:["<",v]}),(0,Kg.jsx)("div",{className:A7()["more-content"],children:(0,Kg.jsx)(yE,{request:j7,beforeLoadData:e=>e,params:{class_id:null!==r&&void 0!==r?r:m,pageSize:30},skeleton:{rows:5},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{style:{display:"grid",gap:16,gridTemplateColumns:"repeat(auto-fill, 148px)"},children:t.map((e=>(0,Kg.jsx)(Z7,{data:e,setPreview:o,onAdd:s},e.id)))})}})})]})}function M7(e){var t=e.url;return(0,Kg.jsx)("div",{className:"module-preview-modal",children:(0,Kg.jsx)("video",{src:t,width:"100%",height:"100%",autoPlay:!0,loop:!0})})}function E7(){var e=Cf(),t=e.leftSideInfo.submenu,i=(0,r.useState)(),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,d.Z)(s,500);function c(e){Km("action_module_add",{action_label:e.id}),Pg(e.id)}return(0,Kg.jsx)(tE.Z,{placement:"rightTop",visible:!!o,content:(0,Kg.jsx)(M7,{url:null===o||void 0===o?void 0:o.smallUrl}),getPopupContainer:e=>e,overlayClassName:"module-priview-popover",children:(0,Kg.jsxs)("div",{className:"maskModule",children:[(0,Kg.jsx)(eM,{visible:!t,children:(0,Kg.jsx)(S7,{setPreview:l,onAdd:c})}),(0,Kg.jsx)(eM,{visible:Boolean(t),children:(0,Kg.jsx)(P7,{setPreview:l,onAdd:c})})]})})}var L7=i(34870),D7=i.n(L7),R7=[{foreground:{r:0,g:0,b:0},background:{r:255,g:255,b:255},text:"",textType:"url",iconType:void 0},{foreground:{type:"gradient",angle:45,colorStops:[{color:{r:90,g:76,b:219},offset:0},{color:{r:133,g:74,b:255},offset:1}],coords:{x1:0,y1:0,x2:0,y2:0}},background:{r:255,g:255,b:255},text:"",textType:"url",iconType:void 0},{foreground:{r:112,g:178,b:91},background:{r:255,g:255,b:255},rt_url:xb("finger"),text:"",textType:"url",iconType:"finger"},{foreground:{type:"gradient",angle:45,colorStops:[{color:{r:247,g:181,b:0},offset:0},{color:{r:182,g:32,b:224},offset:.5},{color:{r:50,g:197,b:255},offset:1}],coords:{x1:0,y1:0,x2:0,y2:0}},background:{r:255,g:255,b:255},text:"",textType:"url",iconType:void 0}],z7=e=>{var t=e.opt,i=(0,r.useState)(),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=Kf(),c=(0,n.Z)(l,2),d=(c[0],c[1]),v=S3(),h=(0,n.Z)(v,2),f=(h[0],h[1]);(0,Ju.Z)((()=>{if(o){var e=t.rt_url,i=new vb((0,u.Z)((0,u.Z)({},t),{},{image:e,canvas:o}));return i.create(),i}}),[...Object.values(t),o]);var g=function(){var e=(0,p.Z)(m().mark((function e(){var i,a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:Km("action_qrCode_add"),eu(),i=dm(),Object.assign(i.attribute,{width:300,height:300,qrcodeInfo:(0,u.Z)({},t)}),a=xk(i),f((0,u.Z)({},a.getAssetCloned().attribute.qrcodeInfo)),d(!0);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,Kg.jsx)("div",{className:D7().item,onClick:g,children:(0,Kg.jsx)("canvas",{className:D7().canvas,ref:e=>s(e)})})},F7=()=>(0,Kg.jsx)("div",{className:D7().QrCodePanel,children:(0,Kg.jsx)("div",{className:D7().list,children:R7.map(((e,t)=>(0,Kg.jsx)(z7,{opt:e},t)))})}),O7=F7;function B7(){var e=NJ(),t=e.checkLoginStatus,i=Ep(),a=i.update,o=(0,r.useState)([{id:-1}]),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,DI.ZP)(ov,{manual:!0,onSuccess:e=>{1===e.stat&&c(e.msg)}}),u=(0,DI.ZP)(sv,{manual:!0,onSuccess:e=>{}}),v=(0,DI.ZP)(lv,{manual:!0,onSuccess:e=>{}}),h=function(){var e=(0,p.Z)(m().mark((function e(i,a,n){var r,o;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(i.stopPropagation(),!t()){e.next=3;break}return e.abrupt("return");case 3:if(r=!n&&!l.some((e=>e.id===a)),o={stat:-1,msg:""},!r){e.next=11;break}return e.next=8,u.run(a);case 8:o=e.sent,e.next=14;break;case 11:return e.next=13,v.run(a);case 13:o=e.sent;case 14:1===o.stat?(c((e=>r?[...e,{id:a}]:null===e||void 0===e?void 0:e.filter((e=>e.id!==a)))),xp.default.success(o.msg)):xp.default.error(o.msg);case 15:case"end":return e.stop()}}),e)})));return function(t,i,a){return e.apply(this,arguments)}}();function f(e){setTimeout((()=>{Lb(e?iw()[e][0]:0,!1)}))}var g=AK(),x=g.run;g.loading;function y(e){x({picId:null===e||void 0===e?void 0:e.template_id}).then((t=>{var i=LA(t),n=i[null===e||void 0===e?void 0:e.jump];lh({incrementalTime:n.pageAttr.pageInfo.pageTime-Bw().videoInfo.allAnimationTime,callback:i=>{if(!i){ow(n),Rw().length<=1&&a({width:Number(e.width),height:Number(e.height)}),zp(n.templateId);var r=Bw(),o=Du(r.id);f(o),gh(t.assets)}}})}))}function b(e){x({picId:null===e||void 0===e?void 0:e.template_id}).then((t=>{var i=LA(t),a=i[null===e||void 0===e?void 0:e.jump],n=Ow(),r=n+1;xh({index:r,templates:[a],incrementalPageTime:a.pageAttr.pageInfo.pageTime,warnAssets:t.assets})}))}return{moduleFavList:l,beMyFav:h,getNormalUserFavs:d,insertTemplate:b,handleReplace:y}}var W7=e=>{var t=e.data,i=e.className,a=void 0===i?"":i,o=e.width,s=void 0===o?150:o,l=(e.type,e.setUpdateTime,(0,yp.Z)(e,["data","className","width","type","setUpdateTime"])),c=(0,r.useRef)(null),d=E5("modulePartForAdd"),p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=B7(),g=(f.beMyFav,f.insertTemplate),x=f.handleReplace,y=(0,r.useState)(),b=(0,n.Z)(y,2),_=b[0],j=b[1];function w(e,i){0===aw().length?(x(t),Km("click"===e?"action_template_replace":"canvas"===i?"drag_replace_001":"drag_replace_002",{action_label:"part"})):d.getConfig()?(g(t),Km("click"===e?"action_template_insert":"canvas"===i?"drag_add_001":"drag_add_002",{action_label:"part"})):(j({trigger:e,dropContainer:i}),h(!0))}var k=(0,uL.c)((()=>({type:hP,item:{attribute:{width:t.width,height:t.height,rt_preview_url:t.preview_url},offset:{offsetLeft:0,offsetTop:0,offsetLeftPercent:0,offsetTopPercent:0},replace:e=>{w("drag",e)},add:()=>{g(t)}},collect:e=>({isDragging:!!e.isDragging()})}))),T=(0,n.Z)(k,3),Z=T[0],C=T[1],N=T[2];return(0,r.useEffect)((()=>{N((0,vL.r)(),{captureDraggingState:!0})}),[]),(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({ref:c,className:"template-item-wrap ".concat(a),style:{width:s,height:s*(Number(t.height)/Number(t.width)),opacity:Z.isDragging?0:1}},l),{},{children:[(0,Kg.jsxs)("div",{ref:C,className:"video-container",onClick:()=>w("click"),children:[(0,Kg.jsx)("div",{className:"module-time",children:Th(parseInt("".concat(Number(t.duration)/1e3),10))}),(0,Kg.jsx)(UM,{poster:t.preview_url,src:t.small_url,clip:[t.position,t.position+t.duration],muted:!0})]}),(0,Kg.jsx)(QJ,{visible:m,footer:null,width:360,centered:!0,onCancel:()=>{h(!1),d.setState(!1)},children:(0,Kg.jsxs)("div",{className:"replace-template-module",children:[(0,Kg.jsx)("h3",{children:"\u5c06\u7247\u6bb5\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762\uff1f"}),(0,Kg.jsxs)("div",{className:"replace-button-box",children:[(0,Kg.jsx)(CS.Z,{onClick:()=>{d.setConfig(),x(t),h(!1),Km("click"===(null===_||void 0===_?void 0:_.trigger)?"action_template_replace":"canvas"===(null===_||void 0===_?void 0:_.dropContainer)?"drag_replace_001":"drag_replace_002",{action_label:"part"})},children:"\u66ff\u6362\u5f53\u524d\u9875\u9762"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:()=>{d.setConfig(),g(t),h(!1),Km("click"===(null===_||void 0===_?void 0:_.trigger)?"action_template_insert":"canvas"===(null===_||void 0===_?void 0:_.dropContainer)?"drag_add_001":"drag_add_002",{action_label:"part"})},children:"\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762"})]}),(0,Kg.jsx)(WP.Z,{value:d.state,onChange:e=>{d.setState(e.target.checked)},children:"\u9ed8\u8ba4\u6dfb\u52a0\u4e3a\u65b0\u9875\u9762\uff0c\u4e0d\u518d\u63d0\u9192\u3002"})]})})]}))},V7=(0,hp.Pi)(W7),U7=e=>{var t=e.filters,i=e.request,a=e.type,n=(0,r.useRef)(),o=(0,_p.Z)(),s=Np(),l=s.templateInfo,c=l.last_templ_id,d=l.picId,p=o.picId||d||c;return(0,Kg.jsx)(yE,{manualRequest:!1,ref:n,request:i,beforeLoadData:e=>{var t=e.page,i=e.filter,a=(0,yp.Z)(e,["page","filter"]);return(0,u.Z)((0,u.Z)({},a),{},{p:t,filter:i?(0,o1.cv)(JSON.stringify(i)):""})},params:(0,u.Z)({template_id:p},t),skeleton:{rows:3,columns:1,className:"scene-list-skeleton"},emptyDesc:(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("p",{children:["\u672a\u627e\u5230\u201c",(0,Kg.jsx)("span",{className:"empty-keyword",children:null===t||void 0===t?void 0:t.w}),"\u201d\u76f8\u5173\u89c6\u9891\u6a21\u677f"]}),(0,Kg.jsx)("p",{children:"\u5efa\u8bae\u66f4\u6362\u5176\u4ed6\u7c7b\u4f3c\u5173\u952e\u8bcd\u641c\u7d22"})]}),children:e=>{var i,n=e.list;return(0,Kg.jsx)("div",{className:hb()("scene-list",{"scene-list-w":"w"===(null===t||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.shape)||1===t.ratio}),children:n.map((e=>{var i;return(0,Kg.jsx)(V7,{className:hb()("scene-list-item",{"scene-list-item-w":"w"===(null===t||void 0===t||null===(i=t.filter)||void 0===i?void 0:i.shape)||1===t.ratio}),data:e,width:150,type:a},e.id)}))})}})},G7=(0,r.memo)(U7),X7=i(59239),q7=i.n(X7);function H7(e){var t=e.active,i=e.onChange;return(0,Kg.jsxs)("div",{className:q7().ratioRadio,children:[(0,Kg.jsx)("div",{className:q7().ratioRadioLeft,children:"\u6bd4\u4f8b\uff1a"}),[{name:"\u6a2a\u677f",shape:"w",key:1},{name:"\u7ad6\u677f",shape:"h",key:2},{name:"\u65b9\u5f62",shape:"c",key:0}].map((e=>(0,Kg.jsx)(FP.ZP,{onClick:()=>i(e),value:e.shape,checked:t===e.key,children:e.name},"shape-".concat(e.shape))))]})}var Y7=H7,K7={g:"\u5206\u7c7b",c:"\u7528\u9014",d:"\u573a\u666f",i:"\u884c\u4e1a"};function Q7(e,t,i,a){var n;return n="radio"===a?i.map((e=>({label:e.name,value:e.id}))):i.map((e=>({label:e.name,value:e.params,checked:!!e.active,key:e.id}))),{key:t,label:e,type:a,options:n}}var J7=e=>{var t=e.request,i=e.type,a=(0,dx.Z)("all"===i?{filter:{shape:_h()}}:{ratio:1}),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=Ep(),d=c.value;(0,r.useEffect)((()=>{"all"===i&&l({filter:{shape:_h()}})}),[null===d||void 0===d?void 0:d.width,null===d||void 0===d?void 0:d.height]);var u=(0,r.useState)([]),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,DI.ZP)(tv,{onSuccess:e=>{var t=Q7("\u98ce\u683c","tags.st",e.tags.st),i=Object.keys(e.classes).map((t=>Q7(K7[t],"classes.".concat(t),e.classes[t]))),a=[...i,t];m(a)}}),f=h.run;return(0,Kg.jsx)(rE,{search:"all"===i?(0,Kg.jsx)(d1,{searchKey:"w",filters:v,onChange:e=>{l(e)},onFilter:e=>{l({filter:e}),f((0,o1.cv)(JSON.stringify(e)))},placeholder:"\u8bf7\u8f93\u5165\u5173\u952e\u8bcd\u641c\u7d22",defaultValue:{shape:_h()},className:"scene-categories",destroyFilterOnHide:!0}):(0,Kg.jsx)(Y7,{active:s.ratio,onChange:e=>{l({ratio:e.key})}}),children:(0,Kg.jsx)(G7,{filters:s,request:t,type:i})})},$7=J7,eee=YP.Z.TabPane,tee=Cp(),iee=tee.ratioType;function aee(){var e=(0,r.useState)("all"),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=NJ(),s=o.checkLoginStatus,l=(0,r.useState)(iee),c=(0,n.Z)(l,2);c[0],c[1];return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(YP.Z,{className:"scenePanelTabs",activeKey:i,destroyInactiveTabPane:!0,onChange:e=>{if(Km("panel_".concat(e)),"collection"===e){var t=s();if(t)return;a(e)}else a(e)},children:[{tab:"\u5168\u90e8",key:"all",require:av,searchShow:!0}].map((e=>(0,Kg.jsx)(eee,{tab:null===e||void 0===e?void 0:e.tab,children:(0,Kg.jsx)($7,{request:null===e||void 0===e?void 0:e.require,type:e.key})},null===e||void 0===e?void 0:e.key)))})})}var nee=(0,r.memo)(aee);function ree(){var e=Hw(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)("div",{className:"logo-font-family",children:(0,Kg.jsx)(f0,{fontFamily:i,onChange:e=>{a(e)}})})}var oee=(0,hp.Pi)(ree);function see(){var e=Yw(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)("div",{className:"fontcolor",children:(0,Kg.jsx)(tE.Z,{trigger:"click",placement:"rightBottom",overlayClassName:"color-picker",onVisibleChange:e=>{},getTooltipContainer:e=>e.parentNode,content:(0,Kg.jsx)(qL.xS,{width:270,color:i,onAfterChange:()=>{},onChange:e=>{Km("action_logo_color"),a(e.rgb)}}),children:(0,Kg.jsx)("div",{className:"fontcolorIcon",children:(0,Kg.jsx)("img",{src:x0(),alt:"colorIcon",width:30,height:36})})})})}var lee=(0,hp.Pi)(see);function cee(){var e=qw(),t=(0,n.Z)(e,2),i=t[0],a=t[1],r=(0,d.Z)((e=>{e=e.split("\n"),Km("action_logo_inputText"),i?a(e):ik((0,u.Z)((0,u.Z)({text:e},Lp()),{},{fontFamily:"fnsyhtHeavy"}))}),500);return(0,Kg.jsx)(VP.Z.TextArea,{defaultValue:null===i||void 0===i?void 0:i.join("\n"),placeholder:"\u8bf7\u8f93\u5165LOGO\u5185\u5bb9",autoSize:{minRows:3},onChange:e=>{var t=e.target.value;r(t)},onKeyDown:Ph,maxLength:20})}var dee=(0,hp.Pi)(cee),uee=i(2826),pee=i.n(uee),vee=[{rotate:325,position:"nw",desc:"\u5de6\u4e0a"},{rotate:0,position:"north",desc:"\u4e2d\u4e0a"},{rotate:45,position:"ne",desc:"\u53f3\u4e0a"},{rotate:270,position:"west",desc:"\u5de6\u4e2d"},{rotate:-1,position:"center",desc:"\u4e2d\u90e8"},{rotate:90,position:"east",desc:"\u53f3\u4e2d"},{rotate:225,position:"sw",desc:"\u5de6\u4e0b"},{rotate:180,position:"south",desc:"\u4e2d\u4e0b"},{rotate:135,position:"se",desc:"\u53f3\u4e0b"}],mee=()=>{var e=$w(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)("div",{className:pee().positionWarp,children:vee.map((e=>(0,Kg.jsx)("div",{className:hb()(pee().positionWarpItem,{[pee().positionWarpItemActive]:e.position===i}),onClick:()=>{a(e.position),Km("action_logo_position")},children:-1!==e.rotate?(0,Kg.jsx)(y0.Z,{rotate:e.rotate}):(0,Kg.jsx)("div",{className:pee().dot})},e.rotate)))})},hee=(0,hp.Pi)(mee);function fee(e){var t=e.type,i=Jw(),a=(0,n.Z)(i,2),r=a[0],o=a[1];return(0,Kg.jsx)(C0,{title:"\u6c34\u5370\u5927\u5c0f",bindChange:e=>{console.log(t),o(e),Km("action_logo_size",{action_label:t})},num:r,min:25,onAfterChange:()=>{}})}var gee=(0,hp.Pi)(fee),xee=i(574),yee=i.n(xee),bee=e=>{var t=e.picUrl,i=e.loading,a=()=>{rk("image")};return(0,Kg.jsx)("div",{className:yee().uploadedWarp,children:(0,Kg.jsxs)("div",{className:yee().imgWarp,children:[(0,Kg.jsx)("div",{className:yee().imgShow,children:i?(0,Kg.jsx)(dN.Z,{spinning:i}):(0,Kg.jsx)("img",{src:t,className:yee().img,alt:""})}),(0,Kg.jsx)(qW.Z,(0,u.Z)((0,u.Z)({},e),{},{children:(0,Kg.jsx)("div",{className:yee().replace,onClick:()=>Km("action_logo_upload"),children:"\u66ff\u6362"})})),(0,Kg.jsx)("div",{className:yee().del,onClick:a,children:"\u5220\u9664"})]})})},_ee=(0,hp.Pi)(bee),jee=qW.Z.Dragger,wee=()=>{var e=nk(),t=(0,r.useState)(!1),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=Yf(),l=s.showBindPhoneModal,c=z0({setProgress:e=>{console.log(e)},onSucceed:t=>{if(o(!1),t){var i,a={picUrl:null===t||void 0===t||null===(i=t.fileInfo)||void 0===i?void 0:i.small_cover_path,resId:"f".concat(t.file_id),ufsId:"f".concat(t.id)};e?Qw(a):tk((0,u.Z)((0,u.Z)((0,u.Z)({},a),Lp()),{},{scale:50}))}},onError:e=>{"bindPhone"===e&&l(),o(!1)}}),d=c.upLogoloadStat,p={name:"file",showUploadList:!1,beforeUpload:e=>{var t=lA();if(1!==(null===t||void 0===t?void 0:t.bind_phone))return l(),!1;O0(e,(e=>{o(!0),d(e.file)}))}};return e?(0,Kg.jsx)(_ee,(0,u.Z)({picUrl:e.attribute.picUrl,loading:a},p)):(0,Kg.jsx)("div",{className:"notuploadWarpper",children:(0,Kg.jsx)(jee,(0,u.Z)((0,u.Z)({},p),{},{children:(0,Kg.jsxs)("div",{className:"notuploadWarp",onClick:()=>Km("action_logo_upload"),children:[(0,Kg.jsx)(iP,{type:"iconshangchuan1",className:"icon"}),(0,Kg.jsx)("div",{className:"text",children:"\u53ef\u5c06\u56fe\u7247\u76f4\u63a5\u62d6\u62fd\u5230\u6b64"}),(0,Kg.jsx)("div",{className:"text1",children:"\u6216"}),(0,Kg.jsx)("div",{className:"button",children:"\u4e0a\u4f20\u56fe\u7247"}),(0,Kg.jsx)("div",{className:"text2",children:"\u652f\u6301\u56fe\u7247\u683c\u5f0f\uff1aJPG\u3001PNG \u3001GIF \u56fe\u7247\u5927\u5c0f\uff1a10M"})]})}))})},kee=(0,hp.Pi)(wee);function Tee(){var e=Xw(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)(C0,{title:"\u4e0d\u900f\u660e\u5ea6",bindChange:e=>{a(e)},num:i,min:25,onAfterChange:()=>{}})}var Zee=(0,hp.Pi)(Tee),Cee=YP.Z.TabPane,Nee=()=>{var e=Rf(),t=e.close,i=Kw(),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=nk(),c=(0,r.useState)((null===l||void 0===l?void 0:l.meta.type)||"image"),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=e=>{p(e)};return(0,Kg.jsx)("div",{className:"logoWatermark",children:(0,Kg.jsx)("div",{className:"logoWatermarkTabs",children:(0,Kg.jsxs)(YP.Z,{defaultActiveKey:"image",activeKey:u,onChange:e=>{t(),v(e),ak(e)},children:[(0,Kg.jsx)(Cee,{tab:(0,Kg.jsx)("div",{children:"\u56fe\u7247LOGO"}),children:(0,Kg.jsxs)("div",{style:{padding:18,height:"100%",overflow:"auto"},children:[(0,Kg.jsx)(kee,{}),(0,Kg.jsxs)("div",{className:"logo-handle-item",children:[(0,Kg.jsx)("span",{children:"\u56fe\u7247\u5e73\u94fa"}),(0,Kg.jsx)(KP.Z,{defaultChecked:o,onChange:e=>{s(e),Km("action_logo_isFull")}})]}),(0,Kg.jsx)(Zee,{}),(0,Kg.jsx)(gee,{type:"image"}),(0,Kg.jsxs)("div",{className:"logo-handle-item",children:[(0,Kg.jsx)("span",{children:"\u6c34\u5370\u4f4d\u7f6e"}),(0,Kg.jsx)(hee,{})]})]})},"image"),(0,Kg.jsx)(Cee,{tab:"\u6587\u5b57LOGO",children:(0,Kg.jsxs)("div",{style:{padding:18,height:"100%",overflow:"auto"},children:[(0,Kg.jsx)(dee,{}),(0,Kg.jsxs)("div",{className:"logo-handle-item",children:[(0,Kg.jsx)("span",{children:"\u6587\u5b57\u5e73\u94fa"}),(0,Kg.jsx)(KP.Z,{defaultChecked:o,onChange:e=>{Km("action_logo_isFull"),s(e)}})]}),(0,Kg.jsxs)("div",{className:"logo-handle-item",children:[(0,Kg.jsx)(oee,{}),(0,Kg.jsx)(lee,{})]}),(0,Kg.jsx)(Zee,{}),(0,Kg.jsx)(gee,{type:"text"}),(0,Kg.jsxs)("div",{className:"logo-handle-item",children:[(0,Kg.jsx)("span",{children:"\u6c34\u5370\u4f4d\u7f6e"}),(0,Kg.jsx)(hee,{})]})]})},"text")]})})})},See=(0,hp.Pi)(Nee),Iee=e=>{var t,i=e.data,a={resId:"f".concat(i.file_id),ufsId:"f".concat(i.id)},n={meta:{type:"pic"},attribute:(0,u.Z)((0,u.Z)({},a),{},{width:null===i||void 0===i?void 0:i.logoInfo.width,height:null===i||void 0===i?void 0:i.logoInfo.height,picUrl:null===i||void 0===i?void 0:i.logoInfo.cover_path,rt_preview_url:null===i||void 0===i?void 0:i.logoInfo.small_cover_path,source_key:null===i||void 0===i?void 0:i.logoInfo.small_cover_path,isUser:!0})};return(0,Kg.jsx)(mL,{data:n,type:"image",children:(0,Kg.jsx)(lK,{data:n.attribute,type:"svg"===(null===(t=i.logoInfo)||void 0===t?void 0:t.file_format)?"SVG":"image",style:{width:150,height:86,backgroundColor:"#e3e7eb"}})})},Aee=Iee;function Pee(e){var t=e.item,i=e.changeFileState,a=e.brand_id;function n(e){i(t.upId,e)}var o=Yf(),s=o.showBindPhoneModal,l=R6({onSucceed:e=>{var t=100,i=(0,u.Z)((0,u.Z)({},e.fileInfo),{},{state:1,progress:t,id:e.id});setTimeout((()=>{n(i)}),1e3)},setProgress(e){var t=e.progress;n({progress:t,state:3})},onError(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.isNotAllow,a=t.bindPhone;n({state:i?-2:-1,progress:100}),a&&s()}}),c=l.uploadStat;return(0,r.useEffect)((()=>{var e={width:t.width,height:t.height,cover_path:t.fileURL,small_cover_path:t.fileURL};switch(t.state){case 0:c(t.file,a),Object.assign(e,{state:4}),n(e);break}}),[t.state]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)("div",{className:"uploadbrandLogo",style:{width:150,height:86,backgroundColor:"#e3e7eb",display:"flex",alignItems:"center",justifyContent:"center"},children:[(0,Kg.jsx)(vK,{percent:t.progress,state:t.state,style:{width:150,height:86},hidden:1===t.state||Object.keys(t).length<1}),(0,Kg.jsx)(Aee,{data:{file_id:null===t||void 0===t?void 0:t.file_id,id:null===t||void 0===t?void 0:t.id,logoInfo:t}},"user-space-userImg-".concat(t.id))]})})}var Mee=Pee,Eee=qW.Z.Dragger,Lee=e=>{var t=e.list,i=e.UploadProps,a=e.uploadList,n=e.brand_id,r=e.changeFileState,o=NJ(),s=o.checkLoginStatus;return(0,Kg.jsx)("div",{className:"brandListWarp",children:[...a,...t].length>0?(0,Kg.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill,148px)",gap:16,alignContent:"start"},children:[(null===a||void 0===a?void 0:a.length)>0&&a.map(((e,t)=>(0,Kg.jsx)(Mee,{item:e,brand_id:n,changeFileState:r},t))),t.map((e=>(0,Kg.jsx)(Aee,{data:e},"user-space-userImg-".concat(e.id))))]}):(0,Kg.jsx)(Eee,(0,u.Z)((0,u.Z)({multiple:!0},i),{},{showUploadList:!1,accept:".png,.jpeg,.jpg",children:(0,Kg.jsxs)("div",{className:"brandList",onClick:e=>{s()},children:[(0,Kg.jsx)("div",{className:"brandListAdd",children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6"})}),(0,Kg.jsx)("div",{className:"brandListTitle",children:"\u516c\u53f8\u5f62\u8c61LOGO\u653e\u8fd9\u91cc"}),(0,Kg.jsxs)("div",{className:"brandListTxt",children:["\u62d6\u653e\u5230\u6b64\u5904\u4e0a\u4f20\u56fe\u6807",(0,Kg.jsx)("br",{})," \u6587\u4ef6\u683c\u5f0f\u53ef\u4ee5\u4e3a PNG\u3001JPG\u683c\u5f0f"]})]})}))})},Dee=(0,r.memo)(Lee),Ree=()=>{var e=(0,r.useState)([]),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1],v=(0,r.useState)(0),h=(0,n.Z)(v,2),f=h[0],g=h[1],x=y6(),y=x.brandLogoList,b=x.addBrand,_=x.bindActiveBrand,j=ag(),w=j.activeBrand,k=j.updateActiveBrand,T=(0,r.useState)([]),Z=(0,n.Z)(T,2),C=Z[0],N=Z[1],S=NJ(),I=S.checkLoginStatus,A=sA(),P=e=>{y(e,(e=>{c(null===e||void 0===e?void 0:e.total),g(e.maxCount),a(null===e||void 0===e?void 0:e.items)}))},M=(0,d.Z)(function(){var e=(0,p.Z)(m().mark((function e(t){var i,a,n,r,o,s,l,c,d;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=(0,sh.Z)(t,C,"uid"),a=[],n=0;case 3:if(!(n<i.length)){e.next=14;break}return r=i[n],o=iV(r),s=o.getImageInfo,e.next=8,s();case 8:l=e.sent,c=(0,u.Z)((0,u.Z)({},l),{},{upId:"".concat(r.uid),file:r,state:0,progress:0}),a.push(c);case 11:n++,e.next=3;break;case 14:d=a.concat(C),N(d);case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),200),E={openFileDialogOnClick:A>-1,beforeUpload:(e,t)=>(null!==w&&void 0!==w&&w.id?M(t):b("\u672a\u547d\u540d\u7684\u54c1\u724c\u5de5\u5177\u7bb1",(e=>{_((e=>{k(e),M(t)}),"")})),!1)};function L(e,t){N((i=>{var a=i,n=a.findIndex((t=>t.upId===e));a[n]&&(t.state&&Object.assign(a[n],{state:t.state}),t.width&&Object.assign(a[n],{height:t.height,width:t.width}),t.cover_path&&Object.assign(a[n],{file_format:t.file_format,cover_path:t.cover_path,small_cover_path:t.small_cover_path}),t.progress&&Object.assign(a[n],{progress:t.progress}),t.file_id&&Object.assign(a[n],{file_id:t.file_id,id:t.id}));var r=JSON.parse(JSON.stringify(a));return r}))}return(0,r.useEffect)((()=>{null!==w&&void 0!==w&&w.id&&(N([]),P(null===w||void 0===w?void 0:w.id))}),[null===w||void 0===w?void 0:w.id]),(0,Kg.jsx)("div",{className:"brandLogo",children:(0,Kg.jsx)(rE,{search:(0,Kg.jsxs)("div",{className:"brandLogoTop",children:[(0,Kg.jsx)("div",{className:"brandModal",children:(0,Kg.jsx)(B9,{updateLogoCallBack:()=>{P(null===w||void 0===w?void 0:w.id)}})}),(0,Kg.jsx)("div",{hidden:l+(null===C||void 0===C?void 0:C.length)>=f,children:(0,Kg.jsx)(qW.Z,(0,u.Z)((0,u.Z)({multiple:!0},E),{},{showUploadList:!1,accept:".png,.jpeg,.jpg,.svg",children:(0,Kg.jsx)(CS.Z,{className:"upload-icon",type:"primary",onClick:e=>{I()},children:"\u4e0a\u4f20\u54c1\u724cLOGO"})}))})]}),children:(0,Kg.jsx)("div",{className:"brandLogoContent",children:(0,Kg.jsx)(Dee,{list:i,UploadProps:E,uploadList:C,brand_id:null===w||void 0===w?void 0:w.id,changeFileState:L})})})})},zee=Ree,Fee=i(44545),Oee=i(37815),Bee=e=>{var t=(0,r.useRef)(null),i=e.playing,a=void 0!==i&&i,o=e.className,s=e.data,l=e.playingId,c=e.setPlayingId,d=(0,r.useRef)(null),p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(0),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=Number(null===s||void 0===s?void 0:s.total_time),_=(0,r.useRef)(null),j=e=>{e.stopPropagation(),s&&(c&&c(s.id),_.current&&(m?_.current.pause():_.current.play(x),h(!m)))};function w(){d.current&&!_.current&&(_.current=new iM(d.current,0,b,y))}function k(){var e;null===(e=_.current)||void 0===e||e.stop(),h(!1),y(0)}return(0,aM.Z)((()=>{k()}),t),(0,r.useEffect)((()=>{l!==s.id&&k()}),[l]),(0,r.useEffect)((()=>{a&&d.current&&(_.current=new iM(d.current,0,b,y),_.current.play(x),h(!m))}),[]),(0,Sb.Z)((()=>{var e;x>=b&&(y(0),h(!1),null===(e=_.current)||void 0===e||e.stop())}),[x]),(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({ref:t,className:"ai-item ".concat(o)},e),{},{onClick:Ph,children:[(0,Kg.jsxs)("div",{className:"ai-item-icon",onClick:j,children:[(0,Kg.jsx)(iP,{type:m?"iconzanting":"iconbofang"}),(0,Kg.jsx)("audio",{ref:d,src:(null===s||void 0===s?void 0:s.preview)||"",loop:!1,onCanPlay:w,children:"\u7cdf\u7cd5\u4e86\u8001\u94c1\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301audio,\u8bf7\u5c1d\u8bd5\u5347\u7ea7"})]}),(0,Kg.jsxs)("div",{className:"ai-item-music ".concat(m?"music-playing":""),children:[(0,Kg.jsx)("div",{className:"triangle"}),(null===s||void 0===s?void 0:s.id)&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(Oee.Z,{style:{transform:"rotate(90deg)",fontSize:15}}),(0,Kg.jsxs)("span",{style:{marginLeft:11},children:[s.total_time,"s"]})]})]})]}))},Wee=Bee,Vee=e=>{var t=e.data,i=e.onChange,a=e.playingId,o=e.setPlayingId,s=Eq(),l=oh(),c=l.bindAddAudio,d=(0,r.useState)({}),v=(0,n.Z)(d,2),h=v[0],f=v[1],g=e=>{var i={rt_title:t.title,resId:t.id,type:2,rt_url:t.preview,volume:t.ai_audio.volume,isLoop:!1,rt_duration:t.total_time,rt_sourceType:2},a=rh(2,(0,u.Z)((0,u.Z)({},i),{},{startTime:e}));c((0,u.Z)((0,u.Z)({},i),a))},x=function(){var e=(0,p.Z)(m().mark((function e(){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Vz({id:t.id});case 2:a=e.sent,0===a.code&&(xp.default.success("\u5220\u9664\u6210\u529f!"),i()),Km("ai_audio_009");case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=()=>{var e=hm(t.total_time);Tg({meta:{type:"text",addOrigin:"text"},attribute:(0,u.Z)((0,u.Z)({},Xv("text")),{},{text:[t.ai_audio.text]},e)})},b=()=>{y(),g(),Km("ai_audio_008")},_=(0,uL.c)((()=>({type:fP,item:{id:t.id,mousePosition:h,add:e=>{var t=e.relativeX/s*1e3;g(t),Km("drag_add_006")}},collect:e=>({isDragging:!!e.isDragging()})})),[h,s]),j=(0,n.Z)(_,3),w=j[0],k=j[1],T=j[2];return(0,r.useEffect)((()=>{T((0,vL.r)(),{captureDraggingState:!0})}),[h]),(0,Kg.jsxs)("div",{className:"ai-list-item",ref:k,style:{opacity:w.isDragging?0:1},id:t.id,onMouseDown:e=>{var i=document.getElementById(t.id),a=null===i||void 0===i?void 0:i.getBoundingClientRect();f({x:null===a||void 0===a?void 0:a.x,y:null===a||void 0===a?void 0:a.y})},children:[(0,Kg.jsx)("div",{className:"ai-item-add",onClick:()=>{g(),Km("ai_audio_005")},children:(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0",children:(0,Kg.jsx)(XP.Z,{})})}),(0,Kg.jsx)("div",{className:"ai-item-dec",children:(0,Kg.jsx)(tE.Z,{placement:"rightTop",title:"",content:(0,Kg.jsxs)("div",{className:"ai-item-dec-done",children:[(0,Kg.jsx)(CS.Z,{type:"text",onClick:b,children:"\u540c\u6b65\u6dfb\u52a0\u6587\u672c"}),(0,Kg.jsx)(CS.Z,{type:"text",onClick:x,children:"\u5220\u9664"})]}),trigger:"hover",getPopupContainer:()=>document.getElementById("xiudodo"),children:(0,Kg.jsx)(Fee.Z,{})})}),(0,Kg.jsx)("div",{className:"ai-item-title",children:null===t||void 0===t?void 0:t.title}),(0,Kg.jsxs)("div",{className:"ai-item-show",children:[(0,Kg.jsx)("div",{className:"triangle"}),(0,Kg.jsx)(Wee,{data:(0,u.Z)((0,u.Z)({},t),{},{total_time:(null===t||void 0===t?void 0:t.total_time)/1e3}),playingId:a,setPlayingId:o})]})]})},Uee=Vee,Gee=e=>{var t=e.reload,i=(0,r.useRef)(null),a=(0,r.useState)(),o=(0,n.Z)(a,2),s=o[0],l=o[1];function c(){var e;null===(e=i.current)||void 0===e||e.reload()}return(0,r.useEffect)((()=>{c()}),[t]),(0,Kg.jsx)(yE,{ref:i,request:Xz,emptyDesc:"\u5f53\u524d\u65e0\u6587\u5b57\u8f6c\u8bed\u97f3\u6587\u4ef6",skeleton:{rows:4,columns:1},children:e=>{var t=e.list;return(0,Kg.jsx)(Kg.Fragment,{children:t.map((e=>(0,Kg.jsx)(Uee,{playingId:s,setPlayingId:l,data:e,onChange:c},e.id)))})}})},Xee=Gee,qee=i(34625),Hee=i.n(qee);function Yee(e){var t=e.visible,i=e.setVisible,a=e.onSuccess,n=e.onFail,o=e.onError;function s(e){AWSC.use("nc",(function(t,i){window.nc=i.init({appkey:"FFFF0N0000000000A7EC",scene:"nc_other",renderTo:e,success(e){a(e)},fail(e){n(e)},error(e){o(e)}})}))}return(0,r.useEffect)((()=>{s("nc")}),[]),(0,Kg.jsx)(QJ,{visible:t,width:360,onCancel:()=>{i(!1)},centered:!0,footer:null,children:(0,Kg.jsxs)("div",{className:Hee().awsc,children:[(0,Kg.jsx)("div",{className:Hee().awscTitle,children:"\u60a8\u9700\u8981\u901a\u8fc7\u4ee5\u4e0b\u9a8c\u8bc1"}),(0,Kg.jsx)("div",{id:"nc"})]})})}var Kee=Yee;function Qee(e){var t=e.value,i=(0,r.useRef)(null),a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)(0),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=Number(t.total_time),h=(0,r.useRef)(null),f=e=>{e.stopPropagation(),h.current&&(s?h.current.pause():h.current.play(p),l(!s))};function g(){i.current&&(h.current=new iM(i.current,0,m,v))}return(0,r.useEffect)((()=>{var e;i.current&&(null!==(e=i.current)&&void 0!==e&&e.ended&&l(!s))}),[p]),(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({},e),{},{onClick:f,children:[(0,Kg.jsx)(iP,{type:s?"iconzanting":"iconbofang"}),(0,Kg.jsx)("audio",{ref:i,src:t.preview,loop:!1,onCanPlay:g,children:"\u7cdf\u7cd5\u4e86\u8001\u94c1\uff0c\u4f60\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301audio,\u8bf7\u5c1d\u8bd5\u5347\u7ea7"})]}))}var Jee=Qee,$ee=e=>{var t=e.data,i=e.choosed,a=void 0!==i&&i,n=e.onSelect,r=()=>{n(t.voice_key)};return(0,Kg.jsxs)("div",{className:"role-item ".concat(a?"role-item-choosed":""),onClick:r,children:[(0,Kg.jsx)("div",{className:"role-item-pic",children:(0,Kg.jsx)("img",{src:t.cover_url,alt:t.voice_name})}),(0,Kg.jsxs)("div",{className:"role-item-right",children:[(0,Kg.jsxs)("div",{className:"role-item-right-title",children:[t.voice_name,(0,Kg.jsx)(Jee,{className:"title-icon",value:{id:"1",total_time:0,preview:t.sample_url}})]}),(0,Kg.jsx)("div",{className:"role-item-right-desc",children:null===t||void 0===t?void 0:t.description})]})]})},ete=(0,r.memo)($ee),tte=e=>{var t=e.role,i=e.onSelect,a=(0,r.useState)([]),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)([]),d=(0,n.Z)(c,2),u=d[0],v=d[1],h=(0,r.useState)([]),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)("\u901a\u7528"),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=e=>{j(e);var t=s.filter((t=>t.category_name===e));v(t)};function k(){return T.apply(this,arguments)}function T(){return T=(0,p.Z)(m().mark((function e(){var t,i,a,n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Uz();case 2:t=e.sent,i=t.data,a=[],l(i),n=[],i.forEach((e=>{n.includes(e.category_name)||n.push(e.category_name),e.category_name===_&&a.push(e)})),v(a),n.length>0&&j(n[0]),x(n);case 11:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}return(0,r.useEffect)((()=>{k()}),[]),(0,Kg.jsxs)("div",{className:"role-part",children:[(0,Kg.jsx)(YP.Z,{activeKey:_,onChange:w,children:g.map((e=>(0,Kg.jsx)(YP.Z.TabPane,{tab:e},e)))}),(0,Kg.jsx)("div",{className:"role-list",children:u.map((e=>(0,Kg.jsx)(ete,{data:e,onSelect:e=>{i({role:e,roleType:_})},choosed:e.voice_key===t},e.voice_key)))})]})},ite=(0,r.memo)(tte),ate=e=>(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(TP.Z,(0,u.Z)({tipFormatter:null,className:"row-slider"},e)),(0,Kg.jsx)(zM.Z,(0,u.Z)((0,u.Z)({className:"row-input",controls:!1},e),{},{onKeyDown:Ph}))]}),nte=ate,rte=e=>{var t=e.playing,i=void 0!==t&&t,a=e.className,n=e.data,r=e.disabled,o=void 0!==r&&r;return(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:"ai-item ".concat(a)},e),{},{children:[!n&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"ai-item-icon",style:o&&o?{cursor:"not-allowed"}:{},children:(0,Kg.jsx)(iP,{type:"iconbofang"})}),(0,Kg.jsx)("div",{className:"ai-item-music",children:(0,Kg.jsx)("div",{className:"triangle"})})]}),n&&(0,Kg.jsx)(Wee,{playing:i,data:n})]}))},ote=rte,ste=VP.Z.TextArea,lte=e=>{var t=e.asset,i=e.onChange,a=e.onClose,o=sf(),s=o.open,l=bf(),c=l.showLoginModal,d=oA(),u=Yf(),v=u.showBindPhoneModal,h=(0,r.useState)(!0),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)(!1),b=(0,n.Z)(y,2),_=b[0],j=b[1],w=(0,r.useState)(),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=()=>{var e;return t&&(e=null===t||void 0===t?void 0:t.attribute.text,e instanceof Array)?(e||[]).join(""):""},N=(0,r.useState)(C),S=(0,n.Z)(N,2),I=S[0],A=S[1],P=(0,r.useState)(50),M=(0,n.Z)(P,2),E=M[0],L=M[1],D=(0,r.useState)(1),R=(0,n.Z)(D,2),z=R[0],F=R[1],O=(0,r.useState)(!1),B=(0,n.Z)(O,2),W=B[0],V=B[1],U=(0,r.useState)(0),G=(0,n.Z)(U,2),X=G[0],q=G[1],H=(0,r.useState)(!1),Y=(0,n.Z)(H,2),K=Y[0],Q=Y[1],J=(0,r.useState)("xiaoyun"),$=(0,n.Z)(J,2),ee=$[0],te=$[1],ie=(0,r.useState)("\u901a\u7528"),ae=(0,n.Z)(ie,2),ne=(ae[0],ae[1]),re=oh(),oe=re.bindAddAudio,se=(0,r.useState)(!1),le=(0,n.Z)(se,2),ce=le[0],de=le[1],ue=Mw(),pe=(0,n.Z)(ue,1),ve=pe[0],me=e=>{var i=t?t.assetDuration.startTime+iw()[Ow()][0]:Pb(),a=i+e.ai_audio.total_time,n={rt_title:e.ai_audio.text,resId:e.audio_info.id,type:2,rt_url:e.audio_url,startTime:i,endTime:a>ve?ve:a,volume:e.ai_audio.volume,isLoop:!1,rt_duration:e.ai_audio.total_time,rt_sourceType:2};oe(n)},he=e=>{AJ(1===e?{title:"\u5f53\u524d\u5957\u9910AI\u8bed\u97f3\u6b21\u6570\u5df2\u7528\u5b8c!",content:"\u7ee7\u7eed\u4f7f\u7528?\u9700\u8981\u5347\u7ea7\u4f1a\u5458\u5957\u9910",button:"\u5347\u7ea7\u4f1a\u5458",onOk:()=>{s()},onCancel:()=>{},width:375}:{title:"\u666e\u901a\u7528\u6237\u8d60\u9001\u6b21\u6570\u5df2\u7528\u5b8c",content:"\u7ee7\u7eed\u4f7f\u7528?\u5347\u7ea7\u6210\u79c0\u591a\u591a\u4f1a\u5458!",button:"\u5145\u503c\u4f1a\u5458",onOk:()=>{s()},onCancel:()=>{},width:375})},fe=function(){var e=(0,p.Z)(m().mark((function e(n){var r,o,s,l,u,p,h=arguments;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=h.length>1&&void 0!==h[1]?h[1]:null,d&&(null===d||void 0===d?void 0:d.id)>0){e.next=4;break}return c(),e.abrupt("return");case 4:if(1===(null===(r=lA())||void 0===r?void 0:r.bind_phone)){e.next=7;break}return v(),e.abrupt("return");case 7:if(!(ee&&I&&E)){e.next=30;break}return j(!0),u=o?{type:n,text:I,voice_key:ee,speed:z,volume:E,nc_sessionId:null===o||void 0===o?void 0:o.sessionId,nc_sig:null===o||void 0===o?void 0:o.sig,nc_token:null===o||void 0===o?void 0:o.token}:{type:n,text:I,voice_key:ee,speed:z,volume:E},e.next=12,Gz(u);case 12:if(p=e.sent,0!==p.code||!p.data){e.next=18;break}Z({id:ee,total_time:p.data.ai_audio.total_time/1e3,preview:p.data.audio_url}),"1"===n&&(Km("ai_audio_002",{action_label:ee}),t&&me(p.data),i&&i(!0),x(!1),a&&a()),e.next=29;break;case 18:if(1005!==p.code||"open_pay"!==p.data.next){e.next=22;break}he(p.data.is_vip),e.next=29;break;case 22:if(1005!==(null===p||void 0===p?void 0:p.code)||"displayNC"!==(null===p||void 0===p||null===(s=p.data)||void 0===s?void 0:s.next)){e.next=28;break}return V(!0),j(!1),e.abrupt("return");case 28:"contentBlock"===(null===(l=p.data)||void 0===l?void 0:l.next)?xp.default.error("\u7cfb\u7edf\u68c0\u6d4b\u5f53\u524d\u6587\u672c\u5b58\u5728\u8fdd\u89c4\u5acc\u7591"):xp.default.error(p.msg);case 29:j(!1);case 30:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ge=()=>{Qz().then((e=>{if(0===e.code){var t,i,a,n=-1==(null===(t=e.data)||void 0===t?void 0:t.today_value)?"\u65e0\u9650":null===(i=e.data)||void 0===i?void 0:i.today_value;q(n),Q(1===(null===(a=e.data)||void 0===a?void 0:a.is_vip))}}))};return(0,r.useEffect)((()=>{var e=document.querySelector(".ai-modal");ge(),e&&e.focus()}),[]),(0,Sb.Z)((()=>{Km("ai_audio_006")}),[ce]),(0,Kg.jsx)(QJ,{visible:g,onCancel:()=>{x(!1),a&&a()},footer:!1,width:716,centered:!0,closeIcon:(0,Kg.jsx)(EM.Z,{style:{color:"rgba(72, 78, 95, 1)"}}),zIndex:999,children:(0,Kg.jsxs)(dN.Z,{tip:"\u6b63\u5728\u5408\u6210\u8bed\u97f3",spinning:_,children:[(0,Kg.jsxs)("div",{className:"ai-modal",tabIndex:1,onKeyDown:Ph,children:[(0,Kg.jsx)("div",{className:"ai-modal-title",children:"\u6587\u5b57\u8f6c\u8bed\u97f3"}),t?(0,Kg.jsx)("div",{className:"ai-modal-name",children:I}):(0,Kg.jsx)("div",{className:"ai-modal-input",children:(0,Kg.jsx)(ste,{rows:2,placeholder:"\u8f93\u5165\u4f60\u9700\u8981\u8f6c\u5316\u7684\u6587\u5b57",maxLength:300,value:I,onCopy:Ph,onPaste:Ph,onChange:e=>{de(!0),Z(),A(e.target.value)},showCount:{formatter:e=>"\u4f60\u8fd8\u53ef\u4ee5\u8f93\u5165".concat(e.maxLength-e.count,"\u5b57")}})}),(0,Kg.jsxs)("div",{className:"ai-modal-row",children:[(0,Kg.jsx)("span",{children:"\u9009\u62e9\u89d2\u8272\uff1a"}),(0,Kg.jsx)(ite,{role:ee,onSelect:e=>{Z(),te(e.role),ne(e.roleType)}})]}),(0,Kg.jsxs)("div",{className:"ai-modal-row",children:[(0,Kg.jsx)("span",{children:"\u97f3\u91cf\uff1a"}),(0,Kg.jsx)(nte,{onChange:e=>{Z(),L(e)},value:E,min:1,step:1,max:100})]}),(0,Kg.jsxs)("div",{className:"ai-modal-row",children:[(0,Kg.jsx)("span",{children:"\u8bed\u901f\uff1a"}),(0,Kg.jsx)(nte,{onChange:e=>{Z(),F(e)},value:z,min:.5,step:.1,max:2})]}),(0,Kg.jsxs)("div",{className:"ai-modal-row noWrap ".concat(I||t?"":"opcity45"),children:[(0,Kg.jsx)("span",{children:"\u8bd5\u542c\uff1a"}),(0,Kg.jsx)(ote,{className:"row-AI",disabled:!(I||t),playing:!0,data:T,onClick:()=>{Km("ai_audio_007"),fe("0")}})]}),(null===d||void 0===d?void 0:d.id)>0&&(0,Kg.jsxs)("div",{className:"ai-modal-text",children:[K?"\u4eca\u65e5AI\u8bed\u97f3\u5e94\u7528\u6b21\u6570 \u8fd8\u5269":"\u5f53\u524d\u8d60\u9001AI\u8bed\u97f3\u5e94\u7528\u6b21\u6570 \u8fd8\u5269",(0,Kg.jsx)("span",{children:X}),"\u6b21"]}),(0,Kg.jsx)(CS.Z,{type:"primary",className:"ai-modal-button ".concat(I||t?"":"opcity45"),onClick:()=>{fe("1"),Km("ai_audio_008")},children:"\u786e\u5b9a\u5e94\u7528"})]}),W&&(0,Kg.jsx)(Kee,{visible:W,setVisible:V,onSuccess:e=>{V(!1),fe("0",e)}})]})})},cte=lte,dte=()=>{var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1];return(0,Kg.jsxs)(rE,{search:(0,Kg.jsx)(CS.Z,{className:"ai-upload-icon",type:"primary",onClick:()=>{Km("ai_audio_004"),a(!0)},children:"\u6587\u5b57\u8f6c\u8bed\u97f3"}),children:[(0,Kg.jsx)(Xee,{reload:l}),i&&(0,Kg.jsx)(cte,{onClose:()=>{a(!1)},onChange:()=>{c(!l)}})]})},ute=dte,pte=()=>{var e=Cf(),t=e.leftSideInfo,i=lA(),a=bf(),n=a.showLoginModal,o=t.menu,s=Pw(),l=Rj(),c=l.inReplacing,d=l.asset,u=K_(),p=u.inClipping,v=Xf(),m=v.open;return(0,Sb.Z)((()=>{"__module"===(null===s||void 0===s?void 0:s.meta.type)&&Km("canvas_multiSelect",{action_label:null===d||void 0===d?void 0:d.meta.type})}),[null===s||void 0===s?void 0:s.meta.type]),(0,r.useEffect)((()=>{if(c){if(!(i&&(null===i||void 0===i?void 0:i.id)>0))return void n();m("modal-replace"),Km("canvas_dbClick",{action_label:null===d||void 0===d?void 0:d.meta.type})}else c||p||If()}),[p,c,d]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(eM,{keyName:"templatePanel",visible:"template"===o,children:(0,Kg.jsx)(l4,{})}),(0,Kg.jsx)(eM,{keyName:"scenePanel",visible:"scene"===o,children:(0,Kg.jsx)(nee,{})}),(0,Kg.jsx)(eM,{keyName:"AIPanel",visible:"AI"===o&&!t.submenu,children:(0,Kg.jsx)(ute,{})}),(0,Kg.jsx)(eM,{visible:"music"===o,children:(0,Kg.jsx)($4,{})}),(0,Kg.jsx)(eM,{visible:"videoE"===o,children:(0,Kg.jsx)(N8,{})}),(0,Kg.jsx)(eM,{visible:"EffectVideo"===o,children:(0,Kg.jsx)(W8,{})}),(0,Kg.jsx)(eM,{visible:"background"===o,children:(0,Kg.jsx)(g7,{})}),(0,Kg.jsx)(eM,{visible:"text"===o,children:(0,Kg.jsx)(V9,{})}),"user-space"===o&&(0,Kg.jsx)(I2,{}),(0,Kg.jsx)(eM,{visible:"element"===o,children:(0,Kg.jsx)(s8,{})}),(0,Kg.jsx)(eM,{visible:"img"===o,children:(0,Kg.jsx)(g8,{})}),(0,Kg.jsx)(eM,{visible:"module"===o,children:(0,Kg.jsx)(E7,{})}),(0,Kg.jsx)(eM,{visible:"qrcode"===o,children:(0,Kg.jsx)(O7,{})}),(0,Kg.jsx)(eM,{visible:"more"===o,children:(0,Kg.jsx)(b7,{})}),(0,Kg.jsx)(eM,{visible:"logo"===o,children:(0,Kg.jsx)(See,{})}),(0,Kg.jsx)(eM,{visible:"role"===o,children:(0,Kg.jsx)(S5,{})}),(0,Kg.jsx)(eM,{visible:"brandLogo"===o,children:(0,Kg.jsx)(zee,{})})]})},vte=(0,hp.Pi)(pte),mte=i(10765),hte=i.n(mte);function fte(){var e=Dw(),t=[],i=[],a=(0,dg.Z)(e,(e=>e.attribute.startTime));return a.forEach((e=>{if(!e.meta.isBackground&&!e.meta.locked)switch(e.meta.type){case"text":t.push(e);break;case"mask":case"video":case"videoE":case"image":case"pic":i.push(e);break;default:}})),{texts:t,images:i}}var gte=i(65826),xte=i.n(gte);function yte(e){var t=e.selected,i=e.onSuccess,a=fte(),n=a.images;function r(){Km("bottom_0011"),t.forEach(((e,t)=>{var i=n[t],a=e.type,r=(0,yp.Z)(e,["type"]);i&&Ng({params:{meta:{type:a},attribute:r},asset:i})})),i()}return(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",height:38,paddingLeft:6},children:[(0,Kg.jsxs)("div",{style:{fontSize:12},children:["\u5df2\u9009",(0,Kg.jsx)("span",{className:xte().num,children:t.length}),"\u5f20\u56fe\u7247/\u89c6\u9891 \u8fd8\u5dee",(0,Kg.jsx)("span",{className:xte().num,children:n.length-t.length}),"\u5f20"]}),(0,Kg.jsx)("div",{className:xte()["file-action-replace"],onClick:r,children:"\u70b9\u51fb\u66ff\u6362"})]})}var bte=i(24904),_te=i.n(bte);function jte(e){var t,i=e.bgaId,a=e.onClick,n=e.active,o=(0,r.useRef)(null),s=(null===(t=vp[i])||void 0===t?void 0:t.name)||"\u65e0\u52a8\u753b";return(0,Kg.jsxs)("div",{className:_te().item,onClick:()=>{a(i)},children:["\u65e0\u52a8\u753b"===s?(0,Kg.jsx)("div",{className:hb()(_te().noAnimation,{[_te().active]:n===i}),children:(0,Kg.jsx)(iP,{type:"iconIcon-jinyong"})}):(0,Kg.jsx)("img",{onMouseEnter:()=>{o.current&&(o.current.src=(0,fb.Sx)("/image/backgroundAnimation/".concat(i,".gif")))},onMouseLeave:()=>{o.current&&(o.current.src=(0,fb.Sx)("/image/backgroundAnimation/jingtu.png"))},ref:o,src:(0,fb.Sx)("/image/backgroundAnimation/jingtu.png"),className:hb()(_te().animationImg,{[_te().active]:n===i}),alt:""}),(0,Kg.jsx)("p",{className:_te().title,children:s})]})}var wte=jte,kte=()=>{var e,t,i=iK(),a=i.backgroundAsset,o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1];function d(e){ww(e),Km(0===e?"background_007":"background_006"),xp.default.success({content:"\u8bbe\u7f6e\u6210\u529f",top:100,duration:1,maxCount:1}),c(e)}return(0,r.useEffect)((()=>{var e,t,i,n,r=null!==a&&void 0!==a&&null!==(e=a.attribute)&&void 0!==e&&null!==(t=e.bgAnimation)&&void 0!==t&&t.id?null===a||void 0===a||null===(i=a.attribute)||void 0===i||null===(n=i.bgAnimation)||void 0===n?void 0:n.id:0;c(r)}),[null===a||void 0===a||null===(e=a.attribute)||void 0===e||null===(t=e.bgAnimation)||void 0===t?void 0:t.id]),(0,Kg.jsx)("div",{className:_te().listWarp,children:(0,Kg.jsxs)("div",{className:_te().content,children:[(0,Kg.jsx)(wte,{bgaId:0,onClick:d,active:l}),null===mp||void 0===mp?void 0:mp.map((e=>(0,Kg.jsx)(wte,{bgaId:e,active:l,onClick:d},e)))]})})},Tte=(0,hp.Pi)(kte),Zte=()=>{var e=Gf(),t=e.close;return(0,Kg.jsx)(rE,{header:"\u80cc\u666f\u52a8\u753b",onCancel:t,wrapClassName:"side-setting-panel",children:(0,Kg.jsx)(Tte,{})})},Cte=Zte,Nte=i(55635),Ste=i.n(Nte),Ite=e=>{var t=e.popover,i=e.setPopover,a=F_(),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,r.useState)("color"),d=(0,n.Z)(c,2),p=d[0],v=d[1],m=(0,r.useState)(""),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=()=>{var e=[];return s&&Object.keys(s).map((t=>{var i=s[t],a=i.color,n=i.id,r=void 0===n?"":n,o=i.color;"none"!==t&&(null!==a&&void 0!==a&&a.colorStops?e.push({type:"gradient",color:i,key:t,id:r,background:ML(a)}):("string"!==typeof o&&(o=j(o)),e.push({type:"color",color:i,key:t,id:r,background:o})))})),{data:e}};if(0===x().data.length)return null;var y=(e,t)=>{l((0,u.Z)((0,u.Z)({},s),{},{[t.key]:{id:t.id,color:{type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle}}}))},b=(e,t)=>{l((0,u.Z)((0,u.Z)({},s),{},{[t.key]:{id:t.id,color:e.rgb}}))};return(0,Kg.jsx)(Kg.Fragment,{children:x().data.map((e=>(0,Kg.jsx)(tE.Z,{getTooltipContainer:e=>e,onVisibleChange:e=>{e&&Km("tool_svg-color"),i(e)},destroyTooltipOnHide:!0,visible:t&&f===e.key,trigger:"click",placement:"topLeft",overlayClassName:Ste().color,overlayInnerStyle:{left:0},content:(0,Kg.jsx)(uD,{color:e.color.color||"",gradientColorChange:t=>{y(t,e)},colorPickupChange:t=>{b(t,e)},type:p,setType:v}),children:(0,Kg.jsx)("div",{className:Ste().basicRow,style:{background:null===e||void 0===e?void 0:e.background},onClick:()=>{g(e.key),i(!t),v(e.type)}})},e.key)))})},Ate=(0,hp.Pi)(Ite),Pte=i(51377),Mte=i.n(Pte),Ete=e=>{var t=e.popover,i=e.setPopover,a=O_(),o=a.fill,s=a.updateFill,l=!!o.colorStops,c=l?ML(o):j(o),d=(0,r.useState)("color"),u=(0,n.Z)(d,2),p=u[0],v=u[1];if(!o)return null;var m=e=>{var t={type:"linear",colorStops:e.colorStops,coords:e.coords,angle:e.angle};s(t)},h=e=>{s(e.rgb)};return(0,Kg.jsx)(tE.Z,{getTooltipContainer:e=>e,onVisibleChange:e=>{e&&Km("tool_svg-path-color"),i(e)},destroyTooltipOnHide:!0,visible:t,trigger:"click",placement:"topLeft",overlayClassName:Mte().color,overlayInnerStyle:{left:0},content:(0,Kg.jsx)(uD,{color:o||"",gradientColorChange:e=>{m(e)},colorPickupChange:e=>{h(e)},type:p,setType:v}),children:(0,Kg.jsx)("div",{className:Mte().basicRow,style:{background:c},onClick:()=>{i(!t),v(p)}})})},Lte=(0,hp.Pi)(Ete),Dte=i(9196),Rte=i.n(Dte),zte=e=>{var t=e.popover,i=e.setPopover,a=bw(),o=a.backgroundColor,s=a.update,l=e=>void 0!=e.r&&void 0!=e.g&&void 0!=e.b,c=!l(o),d=(0,r.useState)("color"),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=e=>{s(e)},h=e=>{s(null===e||void 0===e?void 0:e.rgb)};return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(tE.Z,{getTooltipContainer:e=>e,onVisibleChange:e=>{e&&Km("tool_template_background_color"),i(e)},destroyTooltipOnHide:!0,visible:t,trigger:"click",placement:"topLeft",overlayClassName:Rte().color,overlayInnerStyle:{left:0},content:(0,Kg.jsx)(uD,{color:o||"",gradientColorChange:e=>{m(e)},colorPickupChange:e=>{h(e)},type:p,setType:v}),children:(0,Kg.jsx)("div",{className:Rte().basicRow,style:{background:c?U(o):j(o)},onClick:()=>{i(!t),v(c?"gradient":"color")}})})})},Fte=(0,hp.Pi)(zte),Ote=i(78972),Bte=i.n(Ote);function Wte(e){var t=e.panelKey,i=y6(),a=i.updateColorList,o=ag(),s=o.activeBrand,l=F_(),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=bw(),m=v.update,h=D_(),f=(0,n.Z)(h,2),g=(f[0],f[1]),x=(0,r.useState)([]),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=()=>{a(null===s||void 0===s?void 0:s.id,(e=>{_(null===e||void 0===e?void 0:e.items)}))},w=e=>{switch(t){case"tool-svg-color":return p((0,u.Z)((0,u.Z)({},d),{},{[Object.keys(d)[0]]:{id:Object.keys(d)[0],color:L(e)}}));case"tool-template_background_color":return m(L(e));case"tool-fontColor":g(L(e))}};(0,r.useEffect)((()=>{null!==s&&void 0!==s&&s.id&&j()}),[null===s||void 0===s?void 0:s.id]);var k=()=>{var e;return(1!=(null===b||void 0===b?void 0:b.length)||0!=(null===(e=b[0])||void 0===e?void 0:e.colorCount))&&((null===b||void 0===b?void 0:b.length)>0||(null===s||void 0===s||!s.id||void 0))};return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:Bte().brandColorTopLine,hidden:!(null!==s&&void 0!==s&&s.id)}),(0,Kg.jsxs)("div",{className:Bte().brandColor,children:[(0,Kg.jsx)("div",{className:Bte().brandColorTop,children:(0,Kg.jsx)(B9,{updateColorCallBack:j})}),(0,Kg.jsxs)("div",{className:Bte().brandColorContent,children:[(null===b||void 0===b?void 0:b.length)>0&&(0,Kg.jsx)("div",{className:Bte().contentColors,children:b.map((e=>{var t;return(null===(t=e.colors)||void 0===t?void 0:t.length)>0&&(0,Kg.jsxs)("div",{className:Bte().contentColorsItem,children:[(0,Kg.jsx)("div",{className:Bte().itemName,children:e.title}),(0,Kg.jsx)("div",{className:Bte().brandColorContentColors,children:e.colors.map(((e,t)=>(0,Kg.jsx)("div",{className:Bte().colorItem,style:{background:e},onClick:()=>{w(e)}},t)))})]},e.title)}))}),(0,Kg.jsx)(B9,{BrandModal:!0,updateColorCallBack:j,children:(0,Kg.jsxs)("div",{className:Bte().brandColorAdd,hidden:k(),children:[(0,Kg.jsx)("span",{children:"+"}),"\u6dfb\u52a0\u81ea\u5df1\u7684\u54c1\u724c\u989c\u8272"]})})]})]})]})}var Vte=Wte,Ute=()=>{var e,t,i,a,o,s=D_(),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=bw(),v=(p.update,O_()),m=(v.fill,v.updateFill,oA()),h=B_(),f=h.batchUpdateLayerColor,g=h.updateLayerColor,x=h.updateColorMatch,y=h.value,b=y.effect,_=y.effectVariant,j=y.effectColorful,w=document.querySelector(".xiudodo-main"),k=Gf(),T=k.value.panelKey,Z=k.close,C=(0,dx.Z)({colorPopover:!1,popover:!1,colorPickerSelected:{},activeIndex:-1}),N=(0,n.Z)(C,2),S=N[0],I=N[1],A=S.popover,P=(e,t)=>{I({colorPickerSelected:e,colorPopover:!0,activeIndex:t})},M=e=>{I({colorPickerSelected:e}),S.activeIndex||0===S.activeIndex?S.activeIndex>-1&&g(S.activeIndex,e):d(e)},E=()=>{var e,t={};if("tool-template_background_color"===T)return t={grid:7,divide:4},t;if("tool-svg-path-color"===T)return t={grid:7,divide:5,onselect:e=>{}},t;if("tool-svg-color"===T)return t={grid:7,divide:3,onselect:e=>d(e[0])},t;if(b){if(null===_||void 0===_||null===(e=_.rt_variantList)||void 0===e||!e.length){var i,a=null===_||void 0===_||null===(i=_.variableColorPara)||void 0===i?void 0:i.length;1===a?t={grid:6,divide:1,onselect:f}:2===a&&(t={grid:4,divide:2,onselect:f})}}else t={grid:7,divide:1,onselect:e=>d(e[0])};return t},L=(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:"rgba(".concat(null===c||void 0===c?void 0:c.r,",").concat(null===c||void 0===c?void 0:c.g,",").concat(null===c||void 0===c?void 0:c.b,",").concat(null===c||void 0===c?void 0:c.a,")")},onClick:()=>{P((0,u.Z)({},c))}}),D=()=>_.variableColorPara.map(((e,t)=>{var i=e.colorBlock;return(0,Kg.jsx)("div",{className:hb()("color-block"),style:{backgroundColor:"rgba(".concat(i.r,",").concat(i.g,",").concat(i.b,",").concat(i.a,")"),border:"1px solid #ededed",borderRadius:2,flex:"0 0 63px"},onClick:e=>{Ph(e),P(i,t)}},"colorBlock-".concat(t))})),R=()=>{var e="";return null===_||void 0===_||_.layers.forEach((t=>{t.backgroundURL&&(e=t.backgroundURL)})),(0,Kg.jsx)("div",{className:"color-block",style:{background:"url(".concat(fb.PP).concat(e,")")}})},z=null===_||void 0===_||null===(e=_.layers)||void 0===e?void 0:e.some((e=>e.backgroundURL)),F=()=>{var e;if(!b&&!_)return L;if((null===_||void 0===_||null===(e=_.variableColorPara)||void 0===e?void 0:e.length)>0)return D();if(z)return R();var t=(0,Kg.jsx)("div",{});return null!==_&&void 0!==_&&_.rt_variantColors&&(null===_||void 0===_||_.rt_variantColors.forEach(((e,i)=>{b.split("@")[1]==i&&(t=(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:"rgba(".concat(e.r,",").concat(e.g,",").concat(e.b,",").concat(e.a,")"),border:"1px solid #ededed",borderRadius:2,flex:"0 0 63px"}},"colorBlock-".concat(i)))}))),t};(0,r.useEffect)((()=>(w.addEventListener("mouseup",(()=>{I({colorPopover:!1,popover:!1})})),()=>{w.removeEventListener("mouseup",(()=>{I({colorPopover:!1,popover:!1})}))})),[w]);var O=()=>{switch(T){case"tool-svg-color":return(0,Kg.jsx)(Ate,{setPopover:e=>{I({popover:e})},popover:A});case"tool-svg-path-color":return(0,Kg.jsx)(Lte,{setPopover:e=>{I({popover:e})},popover:A});case"tool-template_background_color":return(0,Kg.jsx)(Fte,{setPopover:e=>{I({popover:e})},popover:A});default:case"":return(0,Kg.jsx)(tE.Z,{visible:S.colorPopover,trigger:"click",overlayClassName:"color-picker",onVisibleChange:e=>{0!==(null===_||void 0===_?void 0:_.rt_variantColors.length)||z||I({colorPopover:e})},getTooltipContainer:e=>e,destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{style:{width:"318px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:S.colorPickerSelected,onChange:e=>{M(e.rgb)}})}),children:(0,Kg.jsx)("div",{className:hb()("text-color",{"no-curor":(null===_||void 0===_?void 0:_.rt_variantColors.length)>0||z}),children:F()})})}};return(0,Kg.jsxs)(rE,{header:"\u989c\u8272\u8bbe\u7f6e",onCancel:Z,wrapClassName:"text-color-panel-wrap side-setting-panel",children:[(0,Kg.jsxs)("div",{className:"box-wrap",children:[(0,Kg.jsx)("div",{className:"box-title",children:"\u6587\u6863\u989c\u8272"}),j?(0,Kg.jsx)(SR,{}):(0,Kg.jsx)(Kg.Fragment,{children:O()})]}),!j&&(0,Kg.jsxs)(Kg.Fragment,{children:[2!=E().divide&&(null===m||void 0===m?void 0:m.team_id)>0&&(0,Kg.jsx)(Vte,{panelKey:T}),(0,Kg.jsx)("div",{className:"box-wrap-line"}),(0,Kg.jsxs)("div",{className:"box-wrap",style:{display:"flex",flexDirection:"column"},hidden:!(null!==_&&void 0!==_&&null!==(t=_.rt_variantList)&&void 0!==t&&t.length)&&(null===_||void 0===_||null===(i=_.variableColorPara)||void 0===i?void 0:i.length)>2&&b,children:[(null===_||void 0===_||null===(a=_.rt_variantList)||void 0===a?void 0:a.length)>0&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"box-title",children:"\u9884\u8bbe\u989c\u8272"}),(0,Kg.jsx)("div",{className:"",children:null===_||void 0===_?void 0:_.rt_variantList.map(((e,t)=>{var i=new Set,a=e.layers.length;e.layers.forEach((e=>{Object.keys(e).forEach((t=>{if(["color","strokeColor","shadowColor"].indexOf(t)>-1&&e[t].a>0){var n="rgba(".concat(e[t].r,",").concat(e[t].g,",").concat(e[t].b,",").concat(e[t].a,")");i.add(n)}if("backgroundURL"===t&&1===a){var r="url(".concat(fb.PP+e[t],")");i.add(r)}}))}));var n=[];if(0===i.size&&e.layers.forEach((e=>{Object.keys(e).forEach((t=>{if("backgroundURL"===t){var a="url(".concat(fb.PP+e[t],")");i.add(a)}}))})),0===i.size){var r=null===_||void 0===_?void 0:_.rt_variantColors[t];n.push((0,Kg.jsx)("div",{className:"color-block",style:{background:"rgba(".concat(r.r,",").concat(r.g,",").concat(r.b,",").concat(r.a,")")}}))}else i.forEach((e=>{n.push((0,Kg.jsx)("div",{className:"color-block",style:{background:e}},"tempSet"))}));return(0,Kg.jsx)("div",{className:"color-block-wrap margin-bottom-8",onClick:()=>{x(t)},children:n},"variantColor-".concat(t))}))})]}),(!(null!==_&&void 0!==_&&null!==(o=_.rt_variantList)&&void 0!==o&&o.length)&&(null===_||void 0===_?void 0:_.variableColorPara.length)<3||!b)&&(0,Kg.jsx)(XL,{grid:E().grid,divide:E().divide,onSelect:e=>{var t=E(),i=t.onselect;i&&i(e)}})]})]})]})},Gte=(0,hp.Pi)(Ute),Xte=()=>{var e=Gf(),t=e.close,i=B_(),a=i.clearFontEffect,n=i.value;return(0,Kg.jsx)(rE,{wrapClassName:"side-setting-panel textEffect",header:"\u5b57\u4f53\u7279\u6548\u8bbe\u7f6e",onCancel:t,bottom:(0,Kg.jsx)("div",{className:"textEffectBottom",hidden:!(n.effect||n.effectColorful),children:(0,Kg.jsx)(CS.Z,{onClick:a,children:"\u79fb\u9664\u7279\u6548"})}),children:(0,Kg.jsx)(i6,{clickType:"update",active:!0})})},qte=(0,hp.Pi)(Xte),Hte=i(61381),Yte=i(43061),Kte=i(105),Qte=i.n(Kte);function Jte(e){var t=e.data,i=e.successUpload,a=e.bindUploadFontState,o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(0),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=fK({onSucceed:e=>{"parseFailed"===e.message?(a(t.uid,-2),v(-2),xp.default.error("\u6587\u4ef6\u89e3\u6790\u5931\u8d25")):(c(100),a(t.uid,1),v(1),setTimeout((()=>{i(t.uid)}),1e3))},setProgress(e){var i=e.progress;2!==t.state&&(v(2),a(t.uid,2)),c(i)},onError(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i.isNotAllow,i.bindPhone;a(t.uid,-1),v(-1),xp.default.error(null===e||void 0===e?void 0:e.msg)}}),h=m.uploadStat;(0,r.useEffect)((()=>{switch(t.state){case 0:h(t);break}}),[t,t.state,h]);var f=e=>{switch(e){case 2:return(0,Kg.jsxs)("div",{className:Qte().uploadFontItemTopRight,children:["\u6b63\u5728\u4e0a\u4f20",l,"%"]});case 1:return(0,Kg.jsxs)("div",{className:Qte().uploadFontItemCheckCircleFilled,children:[(0,Kg.jsx)(w$.Z,{className:Qte().uploadFontItemCheckCircleFilledIcon}),"\u4e0a\u4f20\u6210\u529f"]});case-1:return(0,Kg.jsxs)("div",{className:Qte().uploadFontItemClose,onClick:()=>{v(0),h(t)},children:[(0,Kg.jsx)(Yte.Z,{className:Qte().uploadFontItemCloseIcon}),(0,Kg.jsx)("span",{className:Qte().uploadFontItemCloseSpan,children:"\u91cd\u65b0\u4e0a\u4f20"})]});case-2:return(0,Kg.jsxs)("div",{className:Qte().uploadFontItemClose,onClick:()=>{v(0),h(t)},children:[(0,Kg.jsx)(c4.Z,{className:Qte().uploadFontItemCloseIcon1}),(0,Kg.jsx)("span",{className:Qte().uploadFontItemCloseSpan,children:"\u91cd\u65b0\u4e0a\u4f20"})]});default:break}};return(0,Kg.jsxs)("div",{className:Qte().uploadFontItem,children:[(0,Kg.jsxs)("div",{className:Qte().uploadFontItemTop,children:[(0,Kg.jsx)("div",{className:Qte().uploadFontItemTopName,children:t.name}),f(p)]}),(0,Kg.jsx)(tM.Z,{className:Qte().uploadFontItemProgress,percent:l,showInfo:!1})]})}var $te=Jte,eie=i(71678),tie=i.n(eie);function iie(e){var t=e.fileList,i=e.beforeUpload,a=e.successUpload,o=e.bindUploadFontState,s=e.list,l=e.bindFontList,c=e.state,d=e.storeFonts,u=(0,r.useState)(!0),v=(0,n.Z)(u,2),h=v[0],f=v[1],g=(0,r.useState)(""),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=C_(),j=_.value,w=_.update,k=e=>{a(e),l({page:1})},T=function(){var e=(0,p.Z)(m().mark((function e(t){var i;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return f(!1),b("webfont-".concat(t.file_id)),d(t),e.next=5,w({resId:"f".concat(t.file_id),ufsId:"f".concat(t.id),fontFamily:"webfont-".concat(t.file_id)});case 5:i=e.sent,f(i);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Kg.jsx)(v0.E,{options:{className:"os-theme-dark",scrollbars:{autoHide:"never"},overflowBehavior:{y:"scroll"},callbacks:{onScroll:e=>{var t=e.path[0],i=t.scrollTop,a=t.scrollHeight,n=t.clientHeight;Math.round(i)+n>=a&&c.page<c.pageTotal&&l({page:c.page+1})}}},children:(null===t||void 0===t?void 0:t.length)+(null===s||void 0===s?void 0:s.length)>0?(0,Kg.jsxs)(Kg.Fragment,{children:[null===t||void 0===t?void 0:t.map((e=>1!==e.state?(0,Kg.jsx)($te,{data:e,successUpload:k,bindUploadFontState:o},e.uid):(0,Kg.jsx)(Kg.Fragment,{}))),null===s||void 0===s?void 0:s.map((e=>{var t;return(0,Kg.jsxs)("div",{className:hb()(tie().fontItem,{[tie().fontItemActive]:(null===j||void 0===j?void 0:j.resId)==="f".concat(e.file_id)}),onClick:()=>{T(e)},children:[(0,Kg.jsx)("img",{height:22,className:tie().fontItemName,src:null===e||void 0===e||null===(t=e.fileInfo)||void 0===t?void 0:t.cover_path,alt:""}),(0,Kg.jsx)("div",{children:y!=="webfont-".concat(e.file_id)||h?(null===j||void 0===j?void 0:j.fontFamily)==="webfont-".concat(e.file_id)?(0,Kg.jsx)(iP,{type:"iconduihao",style:{fontSize:20}}):(0,Kg.jsx)(Kg.Fragment,{}):(0,Kg.jsx)(dN.Z,{indicator:(0,Kg.jsx)(uN.Z,{style:{fontSize:20},spin:!0})})})]},e.id)}))]}):(0,Kg.jsx)("div",{className:tie().uploadFontwarp,children:(0,Kg.jsx)("div",{className:tie().uploadFont,children:(0,Kg.jsxs)(qW.Z.Dragger,{multiple:!0,openFileDialogOnClick:!0,showUploadList:!1,beforeUpload:i,style:{height:"100%",cursor:"auto"},onDrop:()=>{},accept:".ttf,.otf",children:[(0,Kg.jsx)("div",{className:tie().uploadFontIcon,children:(0,Kg.jsx)(XP.Z,{style:{fontSize:24}})}),(0,Kg.jsxs)("div",{className:tie().uploadFontTxt,children:["\u60a8\u5f53\u524d\u8fd8\u672a\u4e0a\u4f20\u5b57\u4f53",(0,Kg.jsx)("br",{})," \u70b9\u51fb\u4e0a\u4f20\u6216\u62d6\u62fd\u5b57\u4f53\u4e0a\u4f20"]})]})})})})}var aie=(0,hp.Pi)(iie);function nie(e){var t=e.id,i=(0,r.useState)(""),a=(0,n.Z)(i,2),o=a[0],s=a[1];return(0,r.useEffect)((()=>{AD(t).then((e=>{var t,i;0===e.code&&s(null===(t=e.data)||void 0===t||null===(i=t.fileInfo)||void 0===i?void 0:i.cover_path)}))}),[t]),(0,Kg.jsx)("div",{className:"selected-fontFamily",children:o&&(0,Kg.jsx)("img",{src:o,alt:"text",height:22})})}var rie=nie,oie=(0,hp.Pi)((e=>{var t=e.list,i=e.fontLibrary,a=e.storeFonts,o=(0,r.useState)(!0),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(""),u=(0,n.Z)(d,2),v=u[0],h=u[1],f=C_(),g=f.value,x=f.update,y=(0,r.useState)([...GD,...XD]),b=(0,n.Z)(y,2),_=b[0],j=b[1];(0,r.useEffect)((()=>{var e={cateName:"\u6700\u8fd1\u4f7f\u7528",fontList:i},a={cateName:"\u4e0a\u4f20\u5b57\u4f53",fontList:t};j([e,...GD,a,...XD])}),[i,t]);var w=function(){var e=(0,p.Z)(m().mark((function e(t,i){var n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return Km("update_fontFamily"),a(t),c(!1),h(i),e.next=6,x({fontFamily:i,resId:"",ufsId:""});case 6:n=e.sent,c(n);case 8:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,Kg.jsx)(v0.E,{options:{className:"os-theme-dark",scrollbars:{autoHide:"never"},overflowBehavior:{y:"scroll"}},children:(0,Kg.jsx)("div",{children:_.map(((e,t)=>{var i,n;return(0,Kg.jsxs)("div",{children:[(null===e||void 0===e||null===(i=e.fontList)||void 0===i?void 0:i.length)>0&&(0,Kg.jsx)("div",{className:"uploadFont-family-item-title",children:e.cateName}),(0,Kg.jsx)("div",{children:e.fontList.map(((e,t)=>{if("string"===typeof e){var i=zD(e),n="".concat(fb.PP,"/index_img/fonts/").concat(i,".svg");return(0,Kg.jsxs)("div",{className:hb()({"uploadFont-family-item":!0,"uploadFont-family-active":(null===g||void 0===g?void 0:g.fontFamily)===i}),onClick:()=>{w(e,i)},children:[(0,Kg.jsx)("img",{src:n,alt:e,height:22}),(0,Kg.jsx)("div",{children:v!==i||l?(null===g||void 0===g?void 0:g.fontFamily)===i?(0,Kg.jsx)(iP,{type:"iconduihao",style:{fontSize:20}}):(0,Kg.jsx)(Kg.Fragment,{}):(0,Kg.jsx)(dN.Z,{indicator:(0,Kg.jsx)(uN.Z,{style:{fontSize:20},spin:!0})})})]},"fontFamily-".concat(e,"-").concat(t))}return(0,Kg.jsxs)("div",{className:hb()("uploadFont-family-item",{"uploadFont-family-active":(null===g||void 0===g?void 0:g.resId)==="f".concat(e.file_id)}),onClick:()=>{Km("update_fontFamily_user"),a(e),x({resId:"f".concat(e.file_id),ufsId:"f".concat(e.id),fontFamily:"webfont-".concat(e.file_id)})},children:[(0,Kg.jsx)(rie,{id:e.file_id}),(0,Kg.jsx)("div",{children:v!=="webfont-".concat(e.file_id)||l?(null===g||void 0===g?void 0:g.fontFamily)==="webfont-".concat(e.file_id)?(0,Kg.jsx)(iP,{type:"iconduihao",style:{fontSize:20}}):(0,Kg.jsx)(Kg.Fragment,{}):(0,Kg.jsx)(dN.Z,{indicator:(0,Kg.jsx)(uN.Z,{style:{fontSize:20},spin:!0})})})]},e.id)}))}),t+1!==(null===_||void 0===_?void 0:_.length)&&(null===e||void 0===e||null===(n=e.fontList)||void 0===n?void 0:n.length)>0&&(0,Kg.jsx)("div",{className:"uploadFont-family-item-line"})]},"fontFamily-".concat(e.cateName))}))})})})),sie=e=>{var t=e.activeToolMenu,i=(0,dx.Z)({activeType:"fontLibrary",page:1,pageTotal:1}),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=NJ(),c=l.checkLoginStatus,u=sA(),p=(0,r.useState)([]),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)([]),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=oA(),_=Yf(),j=_.showBindPhoneModal,w=(0,Hte.Z)("fontLibrary",{}),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=T["".concat(b.id).concat(b.team_id)]||[],N=(0,dx.Z)({maxMemoryByte:0,useMemoryByte:0}),S=(0,n.Z)(N,2),I=S[0],A=S[1],P=(0,DI.ZP)(bD),M=P.data,E=void 0===M?{}:M,L=P.run,D=E||{},R=D.maxMemoryByte,z=void 0===R?0:R,F=D.useMemoryByte,O=void 0===F?0:F,B=e=>{ID({page:e.page,pageSize:40}).then((t=>{if(0===t.code){var i=[];e.page>1?t.data.items.length>0&&(i=[...x,...t.data.items]):i=[...t.data.items],y(i),s({page:t.data.page,pageTotal:t.data.pageTotal}),WD(i)}}))};(0,r.useEffect)((()=>{A({maxMemoryByte:z,useMemoryByte:O})}),[z,O]),(0,r.useEffect)((()=>{t&&s({activeType:"fontLibrary"})}),[t]),(0,r.useEffect)((()=>{u>0&&(L(),B({page:1}))}),[u]);var W=(0,d.Z)((e=>{for(var t=(0,sh.Z)(e,m,"uid"),i=I.maxMemoryByte,a=I.useMemoryByte,n=[],r=0;r<t.length;r++){var o=t[r];if(a+=o.size,A({useMemoryByte:a}),a>i){xp.default.info({content:"\u5b58\u50a8\u7a7a\u95f4\u5df2\u6ee1",maxCount:1});break}o.state=0,n.push(o)}var s=m.concat(n);h(s)}),200),V=(e,t)=>{m.map((i=>i.uid===e?(i.state=t,i):i))},U=()=>{var e=m.filter((e=>1!==e.uid));h(e)};function G(e,t){if(!c())return 1!==(null===b||void 0===b?void 0:b.bind_phone)?j():W(t),!1}var X=e=>{var t=!1;if("string"===typeof e)return!!(C&&C.indexOf(e)>-1);for(var i=0;i<C.length;i++){var a;if((null===(a=C[i])||void 0===a?void 0:a.id)===(null===e||void 0===e?void 0:e.id)){t=!0;break}}return t},q=e=>{var t;if(!X(e)){var i=null===(t=[e,...C])||void 0===t?void 0:t.filter(((e,t)=>t<5));Z({["".concat(b.id).concat(b.team_id)]:i})}};return(0,Kg.jsxs)("div",{className:"uploadFontWarp",children:[(0,Kg.jsxs)("div",{className:"uploadFont",children:[(0,Kg.jsx)("div",{className:hb()("uploadFont-item",{"language-item-active":"fontLibrary"===o.activeType}),onClick:()=>s({activeType:"fontLibrary"}),children:"\u5b57\u4f53\u5e93"}),(0,Kg.jsx)("div",{className:hb()("uploadFont-item",{"language-item-active":"upload"===o.activeType}),onClick:()=>s({activeType:"upload"}),children:"\u4e0a\u4f20\u5b57\u4f53"})]}),(0,Kg.jsxs)("div",{className:"uploadFont-family-wrap",children:[(0,Kg.jsxs)("div",{className:"uploadFont-family-list",children:[(0,Kg.jsx)(eM,{visible:"fontLibrary"===o.activeType,children:(0,Kg.jsx)(oie,{list:x,fontLibrary:C,storeFonts:q})}),"upload"===o.activeType&&(0,Kg.jsx)(aie,{fileList:m,beforeUpload:G,successUpload:U,bindUploadFontState:V,bindFontList:B,list:x,state:o,storeFonts:q})]}),(0,Kg.jsx)(qW.Z,{beforeUpload:G,multiple:!0,showUploadList:!1,accept:".ttf,.otf",children:(0,Kg.jsx)(CS.Z,{type:"primary",className:"uploadFont-family-button",onClick:e=>{s({activeType:"upload"})},children:"\u4e0a\u4f20\u5b57\u4f53"})})]})]})},lie=sie,cie=i(6591),die=i.n(cie),uie=e=>{var t=e.value,i=e.onChange,a=void 0===i?()=>{}:i,n=e.label,r=e.min,o=e.max,s=e.className,l=e.onAfterChange,c=void 0===l?()=>{}:l;return(0,Kg.jsxs)("div",{className:"img-filter-slider",children:[(0,Kg.jsxs)("div",{className:"title",children:[(0,Kg.jsx)("div",{className:"label",children:n}),(0,Kg.jsx)(zM.Z,{size:"small",style:{width:60},min:r,max:o,value:t,onChange:e=>{a(e),c(e)}})]}),(0,Kg.jsx)(TP.Z,{tipFormatter:null,className:s,min:r,max:o,onAfterChange:c,value:t,onChange:a})]})},pie=(0,r.memo)(uie),vie=()=>{var e=xu(),t=e&&Kh(e),i=Gf(),a=i.close,o=(0,r.useRef)(!1);if(!t)return null;var s=t.attribute.filters,l=(0,u.Z)((0,u.Z)({},x),s);return(0,Kg.jsx)(rE,{header:"\u56fe\u7247\u7f8e\u5316",onCancel:a,wrapClassName:"side-setting-panel",children:(0,Kg.jsxs)("div",{className:die().FiltersAdjust,children:[(0,Kg.jsx)("div",{className:die().list,children:pB.map((e=>{var i=(0,n.Z)(e.range,2),a=i[0],r=i[1],s=(0,n.Z)(e.sliderRange,2),c=s[0],d=s[1],u=l[e.key],p=Math.round((u-a)/(r-a)*(d-c)+c);return(0,Kg.jsx)(pie,{value:Math.min(p,d),label:e.label,className:e.key,onChange:i=>{var n=Math.floor(1e4*((i-c)/(d-c)*(r-a)+a))/1e4,s={[e.key]:n,resId:""};cj({params:s,target:t}),o.current=!0},min:c,max:d,onAfterChange:()=>{o.current&&(We("updateFilters",!0),Km("Filters3"),o.current=!1)}},e.key)}))}),(0,Kg.jsxs)("div",{className:die().bottom,children:[(0,Kg.jsx)("div",{}),(0,Kg.jsx)("div",{className:die().reset,onClick:()=>{cj({params:(0,u.Z)((0,u.Z)({},x),{},{resId:""}),target:t,save:!0}),Km("Filters4")},children:"\u91cd\u7f6e"})]})]})})},mie=(0,hp.Pi)(vie),hie={blur:0,x:0,y:0,spread:0,color:"#000"},fie=[{key:"x",range:[-100,100],label:"\u6a2a\u5411\u504f\u79fb"},{key:"y",range:[-100,100],label:"\u7eb5\u5411\u504f\u79fb"},{key:"blur",range:[0,50],label:"\u6a21\u7cca\u5ea6"}],gie=i(54547),xie=i.n(gie),yie=()=>{var e=xu(),t=Gf(),i=t.close,a=(0,r.useRef)(!1);if(!e)return null;var n=e.attribute.dropShadow,o=(0,u.Z)((0,u.Z)({},hie),n);return(0,Kg.jsx)(rE,{header:"\u6295\u5f71\u8bbe\u7f6e",onCancel:i,wrapClassName:"side-setting-panel",children:(0,Kg.jsxs)("div",{className:xie().FiltersAdjust,children:[(0,Kg.jsxs)("div",{className:xie().list,children:[(0,Kg.jsxs)("div",{className:"box-wrap",children:[(0,Kg.jsx)("div",{className:"box-title",children:"\u6587\u6863\u989c\u8272"}),(0,Kg.jsx)("div",{className:"text-color",children:(0,Kg.jsx)(tE.Z,{trigger:"click",overlayClassName:"color-picker",getTooltipContainer:e=>e,destroyTooltipOnHide:!0,content:(0,Kg.jsx)("div",{style:{width:"318px",padding:"10px"},children:(0,Kg.jsx)(QL,{color:o.color,onChange:t=>{uj({params:{color:Oh(t.rgb)},target:e}),Km("Shadow4")}})}),children:(0,Kg.jsx)("div",{className:"color-block",style:{backgroundColor:o.color},onClick:()=>{Km("Shadow3")}})})})]}),fie.map((t=>{var i=o[t.key],n=t.range[0],r=t.range[1];return(0,Kg.jsx)(pie,{value:i,label:t.label,className:t.key,onChange:i=>{var n={[t.key]:i};uj({params:n,target:e}),a.current=!0},min:n,max:r,onAfterChange:()=>{a.current&&(We("updateShadow",!0),Km("Shadow1"),a.current=!1)}},t.key)}))]}),(0,Kg.jsxs)("div",{className:xie().bottom,children:[(0,Kg.jsx)("div",{}),(0,Kg.jsx)("div",{className:xie().reset,onClick:()=>{uj({params:{},target:e,save:!0,replace:!0}),Km("Shadow2")},children:"\u91cd\u7f6e"})]})]})})},bie=(0,hp.Pi)(yie),_ie=i(81370),jie=i.n(_ie),wie=()=>{var e,t,i=xu(),a=i&&Kh(i),n=null===a||void 0===a||null===(e=a.attribute.filters)||void 0===e?void 0:e.resId,r=null===a||void 0===a||null===(t=a.attribute.filters)||void 0===t?void 0:t.strong,s=Gf(),l=s.close,c=(0,DI.ZP)(sB,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),d=c.data,p=void 0===d?[]:d,v=(e,t,i)=>{var a=!1,r=i?0:1;if((t+1+r)%4===0||t===e.length-1){var o=e.findIndex((e=>e.id===n));if(-1===o)return a;Math.floor((o+r)/4)===Math.floor(t/4)&&(a=!0)}return a},m=(0,Zm.Z)((()=>{We("updateFilters",!0),Km("Filters2")}),{wait:50}),h=m.run;return(0,Kg.jsx)(rE,{header:"\u56fe\u7247\u6ee4\u955c",onCancel:l,wrapClassName:"side-setting-panel",children:(0,Kg.jsx)("div",{className:jie().Filters,children:(0,Kg.jsx)("div",{className:jie().content,children:p.map(((e,t)=>(0,Kg.jsxs)("div",{className:jie().category,children:[(0,Kg.jsx)("div",{className:jie().title,children:e.name}),(0,Kg.jsx)("div",{className:jie().list,children:e.items.map(((i,s)=>{var l=v(e.items,s,t),c=!t&&!s;return(0,Kg.jsxs)(o().Fragment,{children:[!!c&&(0,Kg.jsxs)("div",{className:jie().item,children:[(0,Kg.jsx)("div",{className:hb()(jie().img,{[jie().active]:"origin_"===n}),onClick:()=>{cj({params:{resId:"origin_"},replace:!0,target:a,save:!0})},style:{backgroundImage:"url(".concat(fb.PP,"/img/img_filter/0.jpg)")}}),(0,Kg.jsx)("div",{className:jie().name,children:"\u539f\u8272"})]}),(0,Kg.jsxs)("div",{className:jie().item,children:[(0,Kg.jsx)("div",{className:hb()(jie().img,{[jie().active]:n===i.id}),onClick:()=>{cj({params:(0,u.Z)((0,u.Z)({},i.filters),{},{resId:i.id}),replace:!0,target:a,save:!0}),Km("Filters1")},style:{backgroundImage:"url(".concat(i.preview_url,")")}}),(0,Kg.jsx)("div",{className:jie().name,children:i.name})]}),l&&(0,Kg.jsx)(cB,{label:"\u5f3a\u5ea6",value:Math.round(100*(null!==r&&void 0!==r?r:1)),onChange:e=>{cj({params:{strong:e/100},target:a}),h()},inputNumber:!0,style:{paddingRight:20,marginBottom:10},tooltipVisible:!1})]},i.id)}))})]},e.name)))})})})},kie=(0,hp.Pi)(wie),Tie=i(27454),Zie=i.n(Tie),Cie=()=>{var e=Bw(),t=t=>{var i,a,n;if(null!==e&&void 0!==e&&null!==(i=e.endTransfer)&&void 0!==i&&null!==(a=i.attribute)&&void 0!==a&&a.animation){var r,o,s,l,c=e.endTransfer.attribute.animation,d=c.enter,u=c.exit;if(d.duration>0&&null!==t&&void 0!==t&&null!==(r=t.animation)&&void 0!==r&&r.enter&&(null===t||void 0===t||null===(o=t.animation)||void 0===o?void 0:o.enter.duration)>-1&&d.baseId===(null===t||void 0===t?void 0:t.animation.enter.baseId)&&d.details.direction===(null===t||void 0===t?void 0:t.animation.enter.details.direction))return!0;if(u.duration>0&&null!==t&&void 0!==t&&null!==(s=t.animation)&&void 0!==s&&s.exit&&(null===t||void 0===t||null===(l=t.animation)||void 0===l?void 0:l.exit.duration)>-1&&u.baseId===(null===t||void 0===t?void 0:t.animation.exit.baseId)&&u.details.direction===(null===t||void 0===t?void 0:t.animation.exit.details.direction))return!0}return Number(t.id)===Number(null===e||void 0===e||null===(n=e.endTransfer)||void 0===n?void 0:n.attribute.resId)};return{checkIsChoosed:t}},Nie=Cie;function Sie(){var e=Nie(),t=e.checkIsChoosed,i=Gf(),a=i.setParams,n=Bw(),r=Ow();return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:Zie().transitionTitle,children:"\u57fa\u7840\u8f6c\u573a"}),(0,Kg.jsx)("div",{className:Zie().transitionDown,children:IV.map(((e,i)=>{var s=t(e);return(0,Kg.jsx)(o().Fragment,{children:(0,Kg.jsxs)("div",{className:Zie().transitionItem,children:[(0,Kg.jsx)("div",{className:hb()(Zie().item,{[Zie().active]:s}),style:{background:"pink"},onClick:()=>{var t,i=null;a({templateIndex:r,transitionId:null===n||void 0===n||null===(t=n.endTransfer)||void 0===t?void 0:t.meta.id,resId:e.id}),Km("transition_item_add",{action_label:"\u57fa\u7840",asset_id:(null===e||void 0===e?void 0:e.id)||e.key}),i=e.id?{resId:e.id,rt_url:e.sample,rt_preview_url:e.preview,height:e.height,width:e.width,picUrl:e.sample,rt_total_time:Zh(e.total_frame),rt_total_frame:e.total_frame,totalTime:Zh(e.total_frame)}:{totalTime:Zh(e.total_frame),transition:e.transition},null!==n&&void 0!==n&&n.endTransfer?(Cw(r,(0,u.Z)((0,u.Z)({},e),{},{assetInfo:{attribute:i,meta:{type:e.asset_type}}})),xp.default.success("\u66ff\u6362\u6210\u529f")):(Tw(r,(0,u.Z)((0,u.Z)({},e),{},{assetInfo:{attribute:i,meta:{type:e.asset_type}}})),xp.default.success("\u6dfb\u52a0\u6210\u529f"))},children:(0,Kg.jsx)(UM,{poster:e.imageUrl,src:e.videoUrl})}),e.name]})},"transition-".concat(e.name))}))})]})}var Iie=(0,hp.Pi)(Sie),Aie=()=>{var e,t,i,a=wj(),n=a.updateColor,r=a.changeDuration,o=Bw(),s=null===o||void 0===o||null===(e=o.endTransfer)||void 0===e||null===(t=e.attribute)||void 0===t?void 0:t.colors,l=null===o||void 0===o||null===(i=o.endTransfer)||void 0===i?void 0:i.attribute.totalTime,c=e=>{r(e)},d=()=>o.pageAttr.pageInfo.offsetTime?Math.min(Nd,o.pageAttr.pageInfo.pageTime-o.pageAttr.pageInfo.offsetTime[1]-500):Math.min(Nd,o.pageAttr.pageInfo.pageTime-500);return(0,Kg.jsxs)("div",{className:Zie().transAction,children:[(0,Kg.jsxs)("div",{className:Zie().transActionItem,children:[(0,Kg.jsxs)("div",{className:Zie().transActionItemRow,children:["\u65f6\u957f",(0,Kg.jsx)(zM.Z,{min:Cd,max:d(),value:l,className:Zie().rowTip,formatter:e=>"".concat(Number((null!==e&&void 0!==e?e:0)/1e3).toFixed(1),"s"),onChange:e=>{Km("transition_action_duration",{action_label:"input"}),c(e)}})]}),(0,Kg.jsx)("div",{className:Zie().transActionItemRow,children:(0,Kg.jsx)(TP.Z,{value:l,min:Cd,max:d(),tipFormatter:e=>(0,Kg.jsxs)(Kg.Fragment,{children:[Number((null!==e&&void 0!==e?e:0)/1e3).toFixed(1),"s"]}),onChange:e=>{c(e)},onAfterChange:()=>{Km("transition_action_duration",{action_label:"slider"})}})})]}),(0,Kg.jsxs)("div",{className:Zie().transActionItem,children:[(0,Kg.jsx)("div",{className:Zie().transActionItemRow,children:"\u989c\u8272"}),s&&Object.keys(s).map((e=>(0,Kg.jsx)(tE.Z,{destroyTooltipOnHide:!0,getPopupContainer:e=>{var t;return null===(t=e.parentNode)||void 0===t?void 0:t.parentNode},placement:"bottom",trigger:"click",content:(0,Kg.jsx)(JV,{color:Oh(s[e]),onChange:t=>{Km("transition_action_color"),n(t.rgb,e)}}),children:(0,Kg.jsx)("div",{className:Zie().transActionItemRowColor,style:{backgroundColor:Oh(s[e])}})},e)))]})]})},Pie=(0,hp.Pi)(Aie);function Mie(){var e=Gf(),t=e.setParams,i=Bw(),a=Ow(),n=Nie(),r=n.checkIsChoosed,s=(e,t)=>{var i=!1;if((t+1)%2===0||t===e.length-1){var a=e.findIndex((e=>r(e)));if(-1===a)return i;Math.floor(a/2)===Math.floor(t/2)&&(i=!0)}return i},l=(0,DI.ZP)(GF,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),c=l.data;l.loading;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:Zie().transitionTitle,children:"\u906e\u7f69\u8f6c\u573a"}),(0,Kg.jsx)("div",{className:Zie().transitionDown,children:((null===c||void 0===c?void 0:c.items)||[]).map(((e,n)=>{var l=r(e);return(0,Kg.jsxs)(o().Fragment,{children:[(0,Kg.jsxs)("div",{className:Zie().transitionItem,children:[(0,Kg.jsx)("div",{className:hb()(Zie().item,{[Zie().active]:l}),onClick:()=>{var n,r=null;t({templateIndex:a,transitionId:null===i||void 0===i||null===(n=i.endTransfer)||void 0===n?void 0:n.meta.id,resId:e.id}),Km("transition_item_add",{action_label:"\u906e\u7f69",asset_id:(null===e||void 0===e?void 0:e.id)||e.key}),r=e.id?{resId:e.id,rt_url:e.sample,rt_preview_url:e.preview,height:Number(e.height),width:Number(e.width),picUrl:e.sample,rt_total_time:Zh(e.total_frame),rt_total_frame:e.total_frame,totalTime:Zh(e.total_frame)}:{totalTime:Zh(e.total_frame),transition:e.transition},null!==i&&void 0!==i&&i.endTransfer?(Cw(a,(0,u.Z)((0,u.Z)({},e),{},{assetInfo:{attribute:r,meta:{type:e.asset_type}}})),xp.default.success("\u66ff\u6362\u6210\u529f")):(Tw(a,(0,u.Z)((0,u.Z)({},e),{},{assetInfo:{attribute:r,meta:{type:e.asset_type}}})),xp.default.success("\u6dfb\u52a0\u6210\u529f"))},children:null!==e&&void 0!==e&&e.play_url?(0,Kg.jsx)(UM,{poster:e.preview,src:e.play_url}):(0,Kg.jsx)(GE,{path:e.sample,preview:e.preview})}),e.title]}),s((null===c||void 0===c?void 0:c.items)||[],n)&&(0,Kg.jsx)(Pie,{})]},"transition-".concat(e.id))}))})]})}var Eie=(0,hp.Pi)(Mie);function Lie(){var e=Gf(),t=e.setParams,i=Bw(),a=Ow(),n=(0,DI.ZP)(RV,{onError:e=>{console.log("\u51fa\u9519\u5566\uff01\uff01\u5217\u8868\u52a0\u8f7d\u5931\u8d25",e)}}),r=n.data;n.loading;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:Zie().transitionTitle,children:"\u7279\u6548\u8f6c\u573a"}),(0,Kg.jsx)("div",{className:Zie().transitionDown,onMouseDown:e=>e.preventDefault(),children:((null===r||void 0===r?void 0:r.items)||[]).map((e=>{var n;return(0,Kg.jsx)("div",{className:hb()(Zie().item,{[Zie().active]:Number(e.id)===Number(null===i||void 0===i||null===(n=i.endTransfer)||void 0===n?void 0:n.attribute.resId)}),onClick:()=>{var n,r;Km("transition_item_add",{action_label:"\u7279\u6548",asset_id:null===e||void 0===e?void 0:e.id}),t({templateIndex:a,transitionId:null===i||void 0===i||null===(n=i.endTransfer)||void 0===n?void 0:n.meta.id,resId:e.id});var o={resId:e.id,rt_url:e.sample,rt_preview_url:e.preview,rt_frame_url:e.preview,rt_total_frame:e.total_frame,rt_frame_file:e.frame_file,height:e.height,width:e.width};null!==i&&void 0!==i&&null!==(r=i.endTransfer)&&void 0!==r&&r.attribute.resId?(Yj(a,{attribute:o}),xp.default.success("\u66ff\u6362\u6210\u529f")):(Qj(a,{attribute:o}),xp.default.success("\u6dfb\u52a0\u6210\u529f"))},children:(0,Kg.jsx)(UM,{poster:e.preview,src:e.sample})},"transition-".concat(e.id))}))})]})}var Die=(0,hp.Pi)(Lie);function Rie(){var e=Gf(),t=(e.setParams,e.close),i=Bw(),a=Ow(),n=()=>{var e=null===i||void 0===i?void 0:i.endTransfer;e&&(Km("transition_delete"),Jj(a,null===e||void 0===e?void 0:e.meta.id)),t()},r=()=>{Km("transition_applyall"),Kj(a)},o=()=>null!==i&&void 0!==i&&i.endTransfer?(0,Kg.jsxs)("div",{className:Zie().transitionBottom,onMouseDown:e=>e.preventDefault(),children:[(0,Kg.jsx)(CS.Z,{onClick:r,children:"\u540c\u6b65\u5230\u6240\u6709\u9875\u9762"}),(0,Kg.jsx)(CS.Z,{onClick:n,children:"\u53d6\u6d88\u8f6c\u573a"})]}):null;return(0,Kg.jsx)(rE,{wrapClassName:"side-setting-panel",header:"\u8f6c\u573a",onCancel:t,bottom:(0,Kg.jsx)(o,{}),children:(0,Kg.jsxs)("div",{className:Zie().transitionPanel,children:[(0,Kg.jsx)(Iie,{}),(0,Kg.jsx)(Eie,{}),(0,Kg.jsx)(Die,{})]})})}var zie=(0,hp.Pi)(Rie);function Fie(){var e=Pw(),t=Gf(),i=t.value,a=i.panelKey,n=i.visible,o=t.close;t.open;return(0,r.useEffect)((()=>{e&&!n||o()}),[null===e||void 0===e?void 0:e.meta.type]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(eM,{visible:"tool-fontFamily"===a,children:(0,Kg.jsx)(lie,{activeToolMenu:a})}),(0,Kg.jsx)(eM,{visible:"video-transition"===a,children:(0,Kg.jsx)(zie,{})}),(0,Kg.jsx)(eM,{keyName:"textSpecialEffects",visible:"tool-fontEffects"===a,children:(0,Kg.jsx)(qte,{})}),(0,Kg.jsx)(eM,{keyName:"textAnimation",visible:"tool-animation"===a,children:(0,Kg.jsx)(dE,{})}),(0,Kg.jsx)(eM,{keyName:"fontColor",visible:["tool-fontColor","tool-svg-color","tool-svg-path-color","tool-template_background_color"].includes(a),children:(0,Kg.jsx)(Gte,{})}),(0,Kg.jsx)(eM,{visible:"tool-t_b_animation"===a,children:(0,Kg.jsx)(Cte,{})}),(0,Kg.jsx)(eM,{visible:"tool-filters"===a,children:(0,Kg.jsx)(kie,{})}),(0,Kg.jsx)(eM,{visible:"tool-filtersAdjust"===a,children:(0,Kg.jsx)(mie,{})}),(0,Kg.jsx)(eM,{visible:"tool-effectLayer"===a,children:(0,Kg.jsx)(mie,{})}),(0,Kg.jsx)(eM,{visible:"tool-shadow"===a,children:(0,Kg.jsx)(bie,{})}),"tool_multiReplace"===a&&(0,Kg.jsx)(I2,{Bottom:yte,header:(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,Kg.jsx)("span",{children:"\u6279\u91cf\u66ff\u6362"}),(0,Kg.jsx)("div",{className:"side-panel-close",onClick:o,children:(0,Kg.jsx)(EM.Z,{})})]})})]})}var Oie=(0,hp.Pi)(Fie);function Bie(){var e=Cf(),t=e.leftSideInfo.sidePanelVisible,i=e.openSidePanel,a=e.closeSidePanel,n=Gf(),r=n.value.visible;function o(){t?a():i(),Km("side_controller")}return(0,Kg.jsxs)("div",{className:hb()("xiudodo-aside-toolPanel",{"aside-expand":t||r}),children:[(0,Kg.jsx)("div",{className:"panel-content-wrap",children:(0,Kg.jsx)(vte,{})}),(0,Kg.jsx)("div",{className:"panel-content-wrap",hidden:!r,children:(0,Kg.jsx)(Oie,{})}),(0,Kg.jsxs)("div",{className:"xiudodo-toolPanel-controller",onClick:o,hidden:r,children:[(0,Kg.jsx)("img",{src:hte(),alt:"img"}),(0,Kg.jsx)(iP,{type:"iconjiantouyou",style:{zIndex:1}})]})]})}var Wie=i(18267),Vie=(0,hp.Pi)((()=>{var e=nM(),t=e.isPlaying,i=e.pauseVideo,a=e.playVideo;return(0,Kg.jsx)("div",{className:"xiudodo-bottom-play",onMouseDown:e=>{Ph(e),eu(),t?(i(),Km("bottom_template_pause")):(Km("bottom_template_play"),a())},children:(0,Kg.jsx)(iP,{type:t?"iconzanting":"iconbofang"})})}));function Uie(){return(0,Kg.jsx)("div",{style:{width:"100%",textAlign:"center"},children:(0,Kg.jsxs)("span",{style:{fontSize:12,border:"1px dashed #eeeff2",color:"#7e8aa9",padding:"4px 10px"},children:[(0,Kg.jsx)(iP,{type:"iconweikong"}),"\u6682\u65e0\u5185\u5bb9\u53ef\u66ff\u6362\u4fee\u6539"]})})}var Gie=i(16627),Xie=i.n(Gie),qie=(0,hp.Pi)((e=>{var t=e.data,i=Pw(),a=(0,r.useRef)(),o=t.attribute.text,s=void 0===o?[]:o,l=null===s||void 0===s?void 0:s.join(" "),c=E_(),d=(0,n.Z)(c,2),u=(d[0],d[1]),p=(0,r.useState)(!1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(""),g=(0,n.Z)(f,2),x=g[0],y=g[1];function b(){h(!1),u([x])}return(0,r.useEffect)((()=>{m&&a.current&&a.current.focus({cursor:"end"})}),[m]),(0,Kg.jsx)("div",{className:hb()(Xie()["text-item"],{[Xie()["text-item-active"]]:(null===i||void 0===i?void 0:i.meta.id)===t.meta.id}),onClick:()=>{gg({asset:t}),h(!0),y(l)},children:m?(0,Kg.jsx)(VP.Z,{ref:a,defaultValue:l,onChange:e=>y(e.target.value),onBlur:b,onPressEnter:b,style:{width:"100%"},onKeyDown:Ph}):l})})),Hie=(0,hp.Pi)((e=>{var t=e.list;return(0,Kg.jsxs)("div",{style:{width:"100%"},children:[(0,Kg.jsx)("div",{className:Xie()["text-desc"],children:"\u5355\u51fb\u9009\u4e2d\u6587\u672c\u6846\u4fee\u6539\u6587\u5b57,\u4e3a\u4e86\u4fdd\u8bc1\u6a21\u677f\u6548\u679c,\u5b57\u4f53\u4e2a\u6570\u6700\u597d\u4fdd\u6301\u4e00\u81f4\u3002"}),t.length?(0,Kg.jsx)("div",{className:Xie()["text-list"],children:(0,Kg.jsx)("div",{style:{whiteSpace:"nowrap"},children:t.map((e=>(0,Kg.jsx)(qie,{data:e},"text-".concat(e.meta.id))))})}):(0,Kg.jsx)(Uie,{})]})})),Yie=(0,hp.Pi)((e=>{var t=e.audio,i=t.rt_id,a=t.rt_title,o=t.startTime,l=t.endTime,c=t.rt_sourceType,d=zv(),u=d.activeAudio,p=d.updateActiveAudio,v=(0,r.useRef)(null),m=(0,Cm.Z)(v),h=m.width,f=void 0===h?0:h,g=Mw(),x=(0,n.Z)(g,1),y=x[0];function b(e){Ph(e),2===c?nA.Z.confirm({title:"ai\u8bed\u97f3\u9700\u8981\u5728\u65f6\u95f4\u8f74\u6a21\u5f0f\u4e0b\u8c03\u6574",okText:"\u5207\u6362\u81f3\u65f6\u95f4\u8f74\u6a21\u5f0f",cancelText:"\u5173\u95ed",onOk(){Wf("timeline")}}):p((0,s.ZN)(t))}return(0,Kg.jsx)("div",{ref:v,className:"audio-item-wrap",children:(0,Kg.jsxs)("div",{className:hb()("audio-item",{"audio-item-active":(null===u||void 0===u?void 0:u.rt_id)===i}),style:{width:"".concat((l-o)/y*100,"%"),background:2===Number(c)?"#51DB86":"#5646ED"},onClick:b,children:[(0,Kg.jsx)(LH,{height:28,src:t.rt_url,style:{position:"absolute",height:"100%",width:f,zIndex:1},waveColor:"rgba(255,255,255,0.8)"}),(0,Kg.jsx)("div",{className:"audio-item-title",children:a}),(0,Kg.jsxs)("div",{className:"audio-item-duration",children:[((l-o)/1e3).toFixed(1),"s"]})]})})}));function Kie(){var e=Ik(),t=zv(),i=t.activeAudio,a=oh(),n=a.bindRemoveAudio,r=Cf(),o=r.openSidePanel;function s(e){i?e():xp.default.info("\u8bf7\u9009\u62e9\u8981\u64cd\u4f5c\u7684\u97f3\u9891")}return(0,Kg.jsxs)("div",{className:"simple-audio-wrap",children:[(0,Kg.jsx)("div",{className:"simple-audio-list",onClick:()=>{Ov()},children:(0,Kg.jsx)("div",{style:{width:"100%"},children:e.length?e.map((e=>(0,Kg.jsx)(Yie,{audio:e},e.rt_id))):(0,Kg.jsxs)("div",{className:"simple-audio-empty",onClick:e=>{Ph(e),o({menu:"music"})},children:[(0,Kg.jsx)(iP,{type:"icontianjia"}),"\u6dfb\u52a0\u97f3\u4e50"]})})}),(0,Kg.jsxs)("div",{className:"audio-actions",children:[(0,Kg.jsx)(CS.Z,{className:"audio-action-delete",onClick:()=>s((()=>{Ov(),Km("bottom_0009"),n(null===i||void 0===i?void 0:i.rt_id)})),children:"\u5220\u9664\u97f3\u4e50"}),(0,Kg.jsx)(CS.Z,{className:"audio-action-replace",onClick:()=>s((()=>{Km("bottom_0010"),o({menu:"user-space"})})),children:"\u66ff\u6362\u81ea\u5df1\u7684\u97f3\u4e50"}),(0,Kg.jsx)(CS.Z,{className:"audio-action-replace",onClick:()=>s((()=>{Km("bottom_0010"),o({menu:"music"})})),children:"\u66ff\u6362\u4e91\u7aef\u7684\u97f3\u4e50"})]})]})}var Qie=(0,hp.Pi)(Kie),Jie=i(45747),$ie=i.n(Jie),eae=(0,hp.Pi)((e=>{var t=e.data,i=t.meta,a=t.attribute,n=i.type,r=a.picUrl,o=void 0===r?"":r,s=a.SVGUrl,l=void 0===s?"":s,c=a.rt_preview_url,d=void 0===c?"":c,u=a.rt_url;switch(n){case"image":case"pic":return(0,Kg.jsx)(LE,{poster:o});case"SVG":case"mask":return(0,Kg.jsx)(LE,{poster:l});case"lottie":return(0,Kg.jsx)(LE,{poster:d});case"video":case"videoE":return(0,Kg.jsx)(UM,{poster:d,src:u});default:return(0,Kg.jsx)(Kg.Fragment,{})}})),tae=(0,hp.Pi)((e=>{var t=e.list,i=Xf(),a=i.open,o=(0,r.useState)({visible:!1}),s=(0,n.Z)(o,2),l=s[0],c=s[1];function d(e){Ud(xu(),{attribute:e}),c({visible:!1})}return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(tK,{visible:l.visible,contentProps:{data:l.data,actionType:"cut",onOk:d},onCancel:()=>{c({visible:!1})}}),t.length?(0,Kg.jsx)("div",{className:$ie()["image-list"],children:t.map((e=>{var t,i=e;"mask"===e.meta.type&&(i=null===(t=e.assets)||void 0===t?void 0:t[0]);if(!i)return(0,Kg.jsx)(Kg.Fragment,{});var n=i,r=n.attribute,o=n.meta.type,s=i.assetDuration,l=s.startTime,d=s.endTime;return(0,Kg.jsxs)("div",{className:$ie()["image-item"],children:[(0,Kg.jsxs)("div",{className:$ie()["image-item-mask"],onClick:()=>gg({asset:e}),children:[(0,Kg.jsx)("div",{className:$ie().action,onClick:()=>{Km("bottom_0003"),a("modal-replace")},children:"\u66ff\u6362"}),(0,Kg.jsx)("div",{hidden:!["videoE","video"].includes(o),className:$ie().action,onClick:()=>{var e,t;Km("bottom_0004");var i=null!==(e=r.cst)&&void 0!==e?e:0,a=null!==(t=r.cet)&&void 0!==t?t:i+d-l;c({visible:!0,data:{width:r.width,height:r.height,duration:r.rt_total_time,preview_video:r.rt_url,cst:i,cet:a}})},children:"\u88c1\u526a"})]}),(0,Kg.jsxs)("div",{className:$ie().duration,children:[(0,Kg.jsx)(iP,{type:["image","pic"].includes(o)?"icontupian":"iconshipin2"}),"  ",((d-l)/1e3).toFixed(1),"s"]}),(0,Kg.jsx)("div",{style:{width:"100%",height:"100%",zIndex:1},children:(0,Kg.jsx)(eae,{data:i})})]},"image-".concat(e.meta.id))}))}):(0,Kg.jsx)(Uie,{})]})})),iae=[{key:"image",name:"\u66ff\u6362\u56fe\u7247/\u89c6\u9891",weblog:"0006"},{key:"text",name:"\u4fee\u6539\u6587\u5b57",weblog:"0007"},{key:"audio",name:"\u66ff\u6362\u97f3\u4e50",weblog:"0008"}];function aae(){var e=Lw(),t=e.template,i=vw(),a=i.templates,o=(0,r.useState)("image"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=Gf(),u=d.open,p=d.close,v=d.value.panelKey,m=fte(),h=m.texts,f=m.images;function g(e){var t=iw()[e][0];Lb(t,!1)}var x=(0,r.useMemo)((()=>{var e=(0,Kg.jsx)(Kg.Fragment,{});switch(l){case"text":e=(0,Kg.jsx)(Hie,{list:h});break;case"audio":e=(0,Kg.jsx)(Qie,{});break;case"image":e=(0,Kg.jsx)(tae,{list:f});break}return e}),[l,h,f]);return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"xiudod-bottom-handler",onClick:p,children:[(0,Kg.jsx)("div",{className:"xiudod-bottom-simple-tabs",children:iae.map((e=>(0,Kg.jsx)("span",{className:hb()("xiudod-bottom-simple-tab",{"xiudod-bottom-simple-tab-active":l===e.key}),onClick:()=>{Km("bottom_".concat(e.weblog)),c(e.key)},children:e.name},e.key)))}),(0,Kg.jsxs)("div",{className:"bottom-simple-goback",onClick:()=>{Ov(),Wf("timeline"),Km("bottom_0005")},children:["<"," \u8fd4\u56de\u65f6\u95f4\u8f74\u7248\u672c"]})]}),(0,Kg.jsxs)("div",{className:"bottom-simple-content",children:[(0,Kg.jsx)(Vie,{}),(0,Kg.jsx)("div",{className:"bottom-simple-assets",children:x}),(0,Kg.jsx)("div",{hidden:!f.length||"image"!==l,className:"image-multi-replace-wrap",children:(0,Kg.jsx)(CS.Z,{type:"primary",disabled:"tool_multiReplace"===v,style:{borderRadius:15},onClick:()=>{u("tool_multiReplace"),Km("bottom_0002")},children:"\u6279\u91cf\u66ff\u6362"})})]}),(0,Kg.jsx)("div",{className:"part-tabs",hidden:"audio"===l,onClick:p,children:a.map(((e,i)=>(0,Kg.jsxs)("span",{className:hb()("part-tabs-name",{"part-tabs-name-active":t.id===e.id}),onClick:()=>g(i),children:["\u7247\u6bb5",i+1]},"simplate-bottom-".concat(e.id))))})]})}var nae=(0,hp.Pi)(aae);function rae(){var e=Lw(),t=e.template,i=(null===t||void 0===t?void 0:t.videoInfo.allAnimationTime)||0,a=(null===t||void 0===t?void 0:t.videoInfo.speed)||1,r=_w(Ow()),o=(0,n.Z)(r,2),s=(o[0],o[1]),l=Ab();l/=1/a;var c=l>wd&&i-l>wd&&t.assets.length,d=l>=(null!==t&&void 0!==t&&t.startTransfer?Zd:wd)&&i-l>(t.endTransfer?Zd:wd);function u(){if(c){var e=(null===t||void 0===t?void 0:t.videoInfo)||{},i=e.pageTime,a=void 0===i?0:i,n=e.offsetTime,r=void 0===n?[0,0]:n,o=t.getTemplateCloned();Xm("splitPart");var d=Du(t.id),u=[r[0],a-r[0]-l],p=[r[0]+l,r[1]];Object.assign(o.pageAttr.pageInfo,{offsetTime:p}),s(u),nw([o],d+1)}}return{canSplit:c,canSplitTransfer:d,handleSplit:u}}function oae(e){var t=e.item,i=t.disabled,a=t.icon,o=t.iconStyle,s=t.name,l=t.onClick,c=t.popoverContent,d=t.isNew,p=t.isBeta,v=(t.active,(0,yp.Z)(t,["disabled","icon","iconStyle","name","onClick","popoverContent","isNew","isBeta","active"])),m=(0,r.useState)(!1),h=(0,n.Z)(m,2),f=h[0],g=h[1];return(0,Kg.jsx)(xF.Z,{title:t.tooltip||t.name,placement:"bottom",getTooltipContainer:e=>e,children:(0,Kg.jsx)(tE.Z,{placement:"top",trigger:"click",visible:!!c&&f,content:()=>c&&c({onClose:()=>g(!1)}),onVisibleChange:g,destroyTooltipOnHide:!0,getPopupContainer:()=>document.getElementById("xiudodo"),children:(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:hb()("xiudodo-bottom-part-action",{"xiudodo-bottom-part-action-disabled":i,"xiudodo-bottom-part-action-active":t.active}),onMouseDown:Ph,onClick:e=>{Ph(e),l&&l(e),g(!0)}},v),{},{children:[a&&(0,Kg.jsx)(iP,{type:a,style:o}),s&&(0,Kg.jsx)("span",{className:"action-name",children:s}),d&&(0,Kg.jsx)("img",{width:30,style:{position:"absolute",right:-24,top:-6},src:(0,fb.Sx)("/image/new.png"),alt:"newIcon"}),p&&(0,Kg.jsxs)("div",{className:"action-Beta",children:[(0,Kg.jsx)(iP,{type:"jingtou-duijiao",style:{fontSize:25,marginRight:5}}),"\u955c\u5934"]})]}))})})}var sae=i(68204),lae=i.n(sae);function cae(){var e=Lw(),t=e.template,i=rae(),a=i.canSplit,o=i.canSplitTransfer,s=i.handleSplit,l=_w(Ow()),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=(null===t||void 0===t?void 0:t.videoInfo)||{},v=p.allAnimationTimeBySpeed,m=p.speed,h=void 0===m?1:m,f=Mw(),g=(0,n.Z)(f,1),x=g[0],y=jf(),b=y.setTimeLinePartKey,_=_f(),j=_.changePartModal,w=(0,r.useState)(0),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=(0,r.useRef)(null),N=mh(),S=N.delete,I=bh(t),A=I.disabled,P=I.copy,M=yh(),E=M.disabled;(0,r.useEffect)((()=>{Z(v)}),[v]);var L=()=>{Rm(Mm.sce_copy),P()},D=()=>{Rm(Mm.sce_del),S()},R=()=>{j({visible:!0,currentIndex:Ow()+1}),Km("bottom_template_add")};function z(e){Km("tool_template_set_pageTime");var t=d||[0,0],i=(0,n.Z)(t,2),a=i[0],r=i[1],o=((null!==e&&void 0!==e?e:T)-v)/(1/h);u([a,r-o])}function F(e){var t,i,a=String(e).split(":");if(console.log("formatInputTime",a),2===a.length){var r=(0,n.Z)(a,2);t=r[0],i=r[1]}else if(1===a.length){var o=(0,n.Z)(a,1);i=o[0]}if(t=void 0===t?0:parseFloat(t),void 0!==i&&(i=parseFloat(i)),t>=0&&i){var s=6e4*t+1e3*i,l=jd-x+v;return l<s&&(s=l,xp.default.info(Pd)),T<1e3&&(s=1e3),s}return v}function O(e){Z(F(e))}var B=[{key:"addTemplate",name:"\u6dfb\u52a0\u7247\u6bb5",icon:"icontianjia",disabled:E,onClick:()=>R()},{id:"xiudodo-video-split",key:"split",name:"\u5206\u5272",tooltip:"\u5206\u5272\u7247\u6bb5",icon:"iconfenge",disabled:!a||!o,onClick:()=>{a?o?s():xp.default.info("\u8f6c\u573a\u7684\u7247\u6bb5\u5206\u5272\u6700\u77ed\u4e0d\u80fd\u5c0f\u4e8e".concat((Zd/1e3).toFixed(1),"s")):xp.default.info("\u7247\u6bb5\u5206\u5272\u6700\u77ed\u4e0d\u80fd\u5c0f\u4e8e".concat((wd/1e3).toFixed(1),"s"))},iconStyle:{fontSize:18}},{key:"copy",tooltip:"\u590d\u5236\u7247\u6bb5",icon:"icona-Frame6",disabled:A,onClick:L},{key:"delete",tooltip:"\u5220\u9664\u7247\u6bb5",icon:"iconicons8_trash",onClick:D,iconStyle:{fontSize:20}},{key:"pageTime",tooltip:"\u7247\u6bb5\u65f6\u957f\u8c03\u6574",name:Dq(v),icon:"icontime",popoverContent(e){var t=e.onClose;return(0,Kg.jsxs)("div",{style:{padding:"8px 10px",display:"flex"},children:[(0,Kg.jsxs)(VP.Z.Group,{compact:!0,children:[(0,Kg.jsx)("span",{className:lae().action,onClick:()=>O((T-1e3)/1e3),children:"-"}),(0,Kg.jsx)(zM.Z,{ref:C,autoFocus:!0,onFocus:e=>{e.target.select()},value:Dq(T),className:lae()["input-number"],onKeyDown:e=>{Ph(e),"Enter"===e.code&&(z(F(e.target.value)),t())},onBlur:e=>O(e.target.value),onPaste:Ph}),(0,Kg.jsx)("span",{className:lae().action,onClick:()=>O((T+1e3)/1e3),children:"+"})]}),(0,Kg.jsx)(CS.Z,{type:"primary",size:"small",style:{marginLeft:6,height:30},onClick:()=>{z(),t()},children:"\u786e\u5b9a"})]})}},{key:"timeline",name:"\u65f6\u95f4\u7ebf",tooltip:"\u65f6\u95f4\u7ebf",icon:"iconshipinfenge",isBeta:!0,disabled:!t,onClick:()=>{b(t.id),Km("Timeline1")},iconStyle:{fontSize:20}}];return(0,Kg.jsx)(Kg.Fragment,{children:B.map((e=>(0,Kg.jsx)(oae,{item:e},"templateActions-".concat(e.key))))})}var dae=(0,hp.Pi)(cae),uae=(0,hp.Pi)((()=>{var e=Lw(),t=e.template,i=oh(),a=i.bindSetSpeed,o=(null===t||void 0===t?void 0:t.videoInfo)||{},s=o.allAnimationTime,l=void 0===s?0:s,c=(o.allAnimationTimeBySpeed,zv()),d=c.activeAudio,u=(c.updateActiveAudio,c.setActiveAudioInCliping,c.inCliping,d||{}),p=u.speed,v=void 0===p?1:p,m=(0,r.useState)(v),h=(0,n.Z)(m,2),f=h[0],g=h[1];function x(e){var t=l*(1/e);if(Km("audioSpeed2"),t<wd)return g(v),void xp.default.info("\u62b1\u6b49\uff0c\u56e0\u4e3a\u8bbe\u7f6e\u500d\u901f\u540e\u89c6\u9891\u65f6\u957f\u5c0f\u4e8e".concat(wd/1e3,"\u79d2\uff0c\u65e0\u6cd5\u4f7f\u7528\u500d\u901f\u529f\u80fd"));Dv(e),d&&a(e,d.rt_id)}return(0,r.useEffect)((()=>{g(v)}),[v]),(0,Kg.jsxs)("div",{className:"speed-tool",children:[(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Kg.jsx)("span",{children:"\u500d\u901f"}),(0,Kg.jsxs)("span",{className:"inputSpeed",children:[f," x"]})]}),(0,Kg.jsx)(TP.Z,{tooltipVisible:!1,step:.1,min:.5,max:2.5,value:f,onChange:g,onAfterChange:x,marks:{.5:"0.5x",1:"",1.5:"",2:"",2.5:"2.5x"}})]})}));function pae(e){var t=e.value,i=e.onChange,a=e.label,o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1];function d(e){var t=Number(parseFloat(String(e)));t>5?t=5:t<0&&(t=0),i(1e3*t),c(t)}return(0,r.useEffect)((()=>{c(Number((t/1e3).toFixed(1)))}),[t]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Kg.jsx)("span",{children:a}),(0,Kg.jsx)(VP.Z,{value:l,style:{width:60},size:"small",suffix:"s",onChange:e=>c(e.target.value),onBlur:e=>d(e.target.value),onKeyDown:Ph})]}),(0,Kg.jsx)(cB,{value:t,tooltipVisible:!1,max:5e3,onChange:e=>d(e/1e3)})]})}function vae(){var e=Ob(),t=e.isPlaying,i=zv(),a=i.activeAudio,o=void 0===a?{}:a,s=(i.updateActiveAudio,i.setActiveAudioInCliping),l=i.inCliping,c=oh(),d=c.bindSetVolume,u=c.bindRemoveAudio,p=Sv(),v=p.visible,m=p.setVolumeController,h=Iv(),f=h.visible,g=h.setSpeedController,x=vQ(),y=x.disabled,b=x.splitAudio,_=o.fadeIn,j=void 0===_?0:_,w=o.fadeOut,k=void 0===w?0:w,T=o.rt_id,Z=(0,r.useState)(!1),C=(0,n.Z)(Z,2),N=C[0],S=C[1];function I(){Km("quick_bar_004"),u(T)}function A(){ZH(),Km("quick_bar_005")}function P(){S(!1),m(!1),g(!1),s(-1)}(0,r.useEffect)((()=>{t&&(S(!1),m(!1),g(!1))}),[t]);var M=(0,Zm.Z)((()=>{Km("quick_bar_002")}),{wait:500}),E=(0,Kg.jsx)("div",{onMouseDown:Ph,children:(0,Kg.jsx)(cB,{label:"\u97f3\u91cf",value:o.volume,onChange:e=>{d(e,T),Lv(e),M.run()},inputNumber:!0,style:{width:336,padding:"12px 18px"},tooltipVisible:!1})}),L=(0,Kg.jsxs)("div",{style:{width:280,padding:16},onMouseDown:Ph,children:[(0,Kg.jsx)(pae,{label:"\u6de1\u5165",value:j,onChange:e=>{zk(e,T),Rv({fadeIn:e})}}),(0,Kg.jsx)(pae,{label:"\u6de1\u51fa",value:k,onChange:e=>{Fk(e,T),Rv({fadeOut:e})}})]}),D=[{key:"volume",name:"\u97f3\u91cf",icon:"iconbx_bx-volume-full",disabled:!1,active:v,onClick(){P(),m(!0)}},{key:"copy",name:"\u590d\u5236",icon:"icona-Frame6",disabled:!1,onClick(){P(),A()}},{key:"delete",name:"\u5220\u9664",icon:"iconicons8_trash",onClick(){P(),I()}},{key:"adjust",name:"\u8c03\u6574",icon:"iconjianji",onClick(){P(),Km("quick_bar_003"),s(o.trackIndex)},active:l>-1},{key:"split",name:"\u5206\u5272",icon:"iconGroup",tooltip:"\u5206\u5272\u97f3\u9891",onClick(e){P(),Km("quick_bar_006"),b()},disabled:y},{key:"fade",name:"\u97f3\u6548",icon:"iconyinxiao",active:N,onClick(){Km("quick_bar_007"),P(),S(!0)}},{key:"speed",name:"\u97f3\u4e50\u500d\u901f",icon:"beisu",onClick(){P(),g(!0),Km("audioSpeed1")}}];function R(e){switch(e.key){case"fade":return(0,Kg.jsx)(MR,{trigger:"click",content:L,visible:N,onVisibleChange:e=>{S(e)},children:(0,Kg.jsx)(oae,{item:e},"templateActions-".concat(e.key))},"templateActions-".concat(e.key));case"volume":return(0,Kg.jsx)(MR,{trigger:"click",content:E,visible:v,onVisibleChange:m,children:(0,Kg.jsx)(oae,{item:e},"templateActions-".concat(e.key))},"templateActions-".concat(e.key));case"speed":return(0,Kg.jsx)(MR,{trigger:"click",content:(0,Kg.jsx)("div",{onMouseDown:Ph,children:(0,Kg.jsx)(uae,{})}),visible:f,onVisibleChange:g,children:(0,Kg.jsx)(oae,{item:e},"templateActions-".concat(e.key))},"templateActions-".concat(e.key));default:return(0,Kg.jsx)(oae,{item:e},"templateActions-".concat(e.key))}}return(0,Kg.jsx)(Kg.Fragment,{children:D.map((e=>R(e)))})}var mae=(0,hp.Pi)(vae);function hae(){var e=zv(),t=e.activeAudio,i=xu();return(0,Kg.jsxs)("div",{className:"xiudodo-bottom-part-action-wrap",children:[!i&&t&&(0,Kg.jsx)(mae,{}),!i&&!t&&(0,Kg.jsx)(dae,{})]})}var fae=(0,hp.Pi)((e=>{var t=e.style,i=Eq(),a=Ob(),o=a.isPlaying,s=Bb(),l=s.currentTime,c=(0,r.useRef)(null),d=(0,r.useState)(0),p=(0,n.Z)(d,2),v=p[0],m=p[1];return(0,r.useEffect)((()=>{var e;o&&(null===(e=c.current)||void 0===e||e.scrollIntoView());var t=0;i&&l&&(t=~~(l/1e3*i)),m(t)}),[l,i]),(0,r.useEffect)((()=>{var e;o||null===(e=c.current)||void 0===e||e.scrollIntoView()}),[o]),(0,Kg.jsxs)("div",{ref:c,className:"bottom-progress-line-wrap",style:(0,u.Z)({position:"absolute",transform:"translate(".concat(v,"px,0)")},t),children:[(0,Kg.jsx)("div",{className:"bottom-progress-line-arrow"}),(0,Kg.jsx)("div",{className:"bottom-progress-line-line"})]})}));function gae(e){var t=e.src;return(0,r.useMemo)((()=>(0,Kg.jsx)("div",{className:"selected-asset-image",style:{background:"url(".concat(t,") 15px center / auto 14px no-repeat")}})),[t])}function xae(e){var t=e.text,i=e.className;return(0,Kg.jsx)("div",{className:"selected-asset-text-wrapper",children:(0,Kg.jsx)("div",{className:hb()("selected-asset-text",i),children:t})})}var yae=e=>{var t=e.shapeType,i=aq.find((e=>e.type===t));return(0,Kg.jsxs)("div",{className:"selected-asset-svg",children:[(0,Kg.jsx)(iP,{type:(null===i||void 0===i?void 0:i.icon)||"zhixian",style:{marginRight:6}}),(null===i||void 0===i?void 0:i.name)||"\u8def\u5f84"]})},bae=yae,_ae=(0,hp.Pi)((()=>(0,Kg.jsxs)("div",{className:"selected-asset-module",children:[(0,Kg.jsx)(iP,{type:"icona-173"}),"\u7ec4\u4ef6"]}))),jae=i(67434),wae=i.n(jae);function kae(e){var t,i=e.setAuxiliaryLine,a=e.asset,n=e.template,o=(0,r.useRef)(null),s="mask"===(null===a||void 0===a?void 0:a.meta.type)&&null!==(t=a.assets)&&void 0!==t&&t.length?a.assets[0]:a,l=X_(n),c=l.value,d=l.update,u=l.min,p=Nj(),v=p.value,m=p.update,h=Eq(),f=(null===n||void 0===n?void 0:n.videoInfo.allAnimationTimeBySpeed)||0;(0,r.useEffect)((()=>{var e;null===(e=o.current)||void 0===e||e.scrollIntoViewIfNeeded(!0)}),[]);var g=!(null!==s&&void 0!==s&&s.attribute.isLoop)&&"videoE"===(null===s||void 0===s?void 0:s.meta.type),x=()=>{var e;return null!==(e=null===s||void 0===s?void 0:s.attribute.rt_total_time)&&void 0!==e?e:0},y=(0,r.useMemo)((()=>{var e=c.startTime,t=c.endTime,i=v.startTime,a=v.endTime,n=x();return i<0&&a<0?{startTime:0,endTime:Math.min(t-e,n)}:v}),[v.startTime,v.endTime,null===s||void 0===s?void 0:s.meta.id]),b=(0,r.useMemo)((()=>{var e=c.startTime,t=c.endTime,i={start:{min:-e,max:t-e-u},end:{min:-(t-e-u),max:f-t},center:{min:-e,max:f-t}};if(g){var a=y.startTime,n=y.endTime,r=x();i.start.min=Math.max(i.start.min,-a),i.end.max=Math.min(i.end.max,r-n)}return i}),[c.startTime,c.endTime,y.startTime,y.endTime,u]);function _(e,t){var i,a,n=b[e],r=n.max,o=n.min,s=c.startTime,l=c.endTime,d=10/h*1e3,u=Ab();return"start"===e?i=u-s:("end"===e||(i=u-s),a=u-l),void 0!==i&&i>o&&i<r&&Math.abs(i-t)<d?i:void 0!==a&&a>o&&a<r&&Math.abs(a-t)<d?a:t>r?r:t<o?o:t}var j=(e,t)=>{var a=e.changeTime,n=c.startTime,r=c.endTime,o=y.startTime,s=y.endTime;a=_(t,a),"start"===t?(n+=a,o+=a):"end"===t?(r+=a,s=Math.min(o+(r-n),x())):(n+=a,r+=a),r>=f&&["end","center"].includes(t)?i("end"):n<=0&&["start","center"].includes(t)?i("start"):i("");var l={duration:{startTime:n,endTime:r}};"center"!==t&&g&&Object.assign(l,{videoClip:{startTime:o,endTime:s}});var u=Ow();return u>-1&&(["start","center"].includes(t)?$b({templateIndex:u,currentTime:n+10}):$b({templateIndex:u,currentTime:r-10})),null!==l&&void 0!==l&&l.duration&&d(l.duration),null!==l&&void 0!==l&&l.videoClip&&m(l.videoClip),l};function w(e){var t=e.extra;if(t){var a=t.duration,n=a.startTime,r=a.endTime;r-n<=u&&xp.default.info("\u5df2\u8c03\u6574\u5230\u6700\u77ed\u51fa\u73b0\u65f6\u957f")}i(""),Km("updateAssetDuration"),$b(void 0)}function k(){var e=c.startTime,t=c.endTime,i=y.startTime,a=y.endTime;return Math.ceil((t-e)/(a-i))}var T=Lf(),Z=T.open;T.close;function C(){var e,t=(0,Kg.jsx)(Kg.Fragment,{});if(s){var i,n="mask"===s.meta.type&&null!==(i=s.assets)&&void 0!==i&&i.length?s.assets[0]:s,r=n.attribute,o=r.picUrl,l=r.rt_preview_url,d=r.rt_url,u=r.rt_frame_file,p=r.width,m=r.height,y=r.SVGUrl,b=(r.rt_svgString,n.meta),_=b.type,T=b.shapeType,Z=b.isOverlay,C=g?1:k()||1;switch(_){case"image":case"pic":t=(0,Kg.jsx)(gae,{src:o});break;case"svgPath":t=(0,Kg.jsx)(bae,{shapeType:T});break;case"SVG":case"mask":t=(0,Kg.jsx)(gae,{src:l||y});break;case"lottie":t=(0,Kg.jsx)(gae,{src:l});break;case"video":case"videoE":return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(MU,{startTime:c.startTime,endTime:c.endTime,duration:f,onChange:j,overlayClassName:wae()["axis-track-overlay"],durationTooltip:!1,onFinish:w,children:Z&&(0,Kg.jsxs)("div",{className:wae()["axis-track-video-overlay"],children:[(0,Kg.jsx)(iP,{type:"texiao-6hf9cnel",className:wae().icon}),(null===a||void 0===a||null===(e=a.meta)||void 0===e?void 0:e.name)||"\u89c6\u9891\u7279\u6548"]})}),!Z&&(0,Kg.jsx)("div",{className:wae()["video-frame-wrap"],children:(0,Kg.jsx)(PU,{assetUrl:d&&d.indexOf(".webm")>-1?u:d,assetDuation:x(),assetWidth:p,assetHeight:m,loopTimes:C,style:{width:x()/1e3*h*C,left:"".concat(Math.floor(100*(c.startTime/f-v.startTime/f)),"%")}})})]});case"module":t=(0,Kg.jsx)(_ae,{});break;default:t=(0,Kg.jsx)(xae,{text:null===s||void 0===s?void 0:s.attribute.text});break}return(0,Kg.jsxs)(MU,{startTime:c.startTime,endTime:c.endTime,duration:f,onChange:j,overlayClassName:hb()(wae()["axis-track-overlay"],{[wae()["axis-track-module"]]:"module"===_,[wae()["axis-track-text"]]:"text"===_,[wae()["axis-track-element"]]:!["text","module"].includes(_)}),durationTooltip:!1,onFinish:w,children:[t,(0,Kg.jsxs)("div",{className:wae().assetAea,children:[(0,Kg.jsx)("div",{className:wae()["assetAea-i"],children:!!a.animationItemDuration.i&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:wae()["assetAea-line"]}),(0,Kg.jsx)(iP,{type:"iconbofang",className:wae()["assetAea-icon"]})]})}),(0,Kg.jsx)("div",{className:wae()["assetAea-o"],children:!!a.animationItemDuration.o&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(iP,{type:"iconbofang",className:wae()["assetAea-icon"]}),(0,Kg.jsx)("div",{className:wae()["assetAea-line"]})]})})]})]})}}return(0,r.useEffect)((()=>{if(s){var e=Lh("guide"),t=e.assetGuide;t||(sg(),Z(jm),Mh("guide",{assetGuide:!0}))}}),[]),(0,Kg.jsx)("div",{ref:o,className:wae()["operate-bar"],children:C()})}var Tae=(0,hp.Pi)(kae);function Zae(){var e=Pw(),t=Lw(),i=t.template,a=Eq(),o=(0,r.useState)(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useMemo)((()=>{if(!e||"__module"===e.meta.type||e.meta.locked)return{display:"none"};var t=i.videoInfo.allAnimationTimeBySpeed,n=Mb();return{width:t/1e3*a-6,transform:"translateX(".concat(n/1e3*a+4,"px)")}}),[null===i||void 0===i?void 0:i.id,null===e||void 0===e?void 0:e.meta.id,null===e||void 0===e?void 0:e.meta.locked,a]);return(0,r.useEffect)((()=>{eu()}),[null===i||void 0===i?void 0:i.id]),(0,Kg.jsxs)("div",{id:"bottom_selected_asset",style:(0,u.Z)({},d),children:[(0,Kg.jsx)("div",{hidden:!l,className:hb()("asset-auxiliary-line",{"asset-auxiliary-line-left":"start"===l,"asset-auxiliary-line-right":"end"===l})}),i&&e&&!e.meta.isBackground?(0,Kg.jsx)(Tae,{setAuxiliaryLine:c,asset:e,template:i}):(0,Kg.jsx)(Kg.Fragment,{})]})}var Cae=(0,hp.Pi)(Zae);function Nae(){var e=(0,r.useRef)(null),t=_f(),i=t.changePartModal,a=(0,pL.L)((()=>({accept:hP,collect:e=>({hover:!!e.isOver()&&!!e.canDrop()}),drop:e=>{null===e||void 0===e||e.add()}}))),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=e=>{Ph(e),Rb(),Km("bottom_t_add_last");var t=Rw().length;i({currentIndex:t,visible:!0})};return(0,Kg.jsx)(xF.Z,{title:"\u6dfb\u52a0\u7247\u6bb5",placement:"top",children:(0,Kg.jsx)("div",{className:hb()("xiudodo-bottom-add",{"drag-hover":s.hover}),onMouseDown:c,ref:l,children:(0,Kg.jsx)("div",{className:"xiudodo-bottom-add-icon",ref:e,children:(0,Kg.jsx)(XP.Z,{})})})})}function Sae(e){e.preventDefault(),e.stopPropagation()}function Iae(e){var t=e.target,i=e.template,a=e.templateIndex;return(0,aC.Z)("s",(e=>{e.ctrlKey||(rae().handleSplit(),Km("keyPress_split_template"))}),{target:t}),(0,aC.Z)(["ctrl.d","meta.d"],(e=>{Sae(e),xh({index:a+1,templates:[i.getTemplateCloned()],incrementalPageTime:i.videoInfo.allAnimationTime}),Km("keyPress_clone_template")}),{target:t}),(0,aC.Z)(["backspace","delete"],(e=>{Sae(e),vh(),Km("keyPress_delete_template")}),{target:t}),(0,Kg.jsx)(Kg.Fragment,{})}var Aae=(0,hp.Pi)(Iae),Pae=i(72196),Mae=i.n(Pae),Eae=(0,hp.Pi)((e=>{var t=e.template,i=e.isLast,a=e.templateIndex,n=mh(t),r=(n.disabled,n.delete),o=yh(),s=o.disabled,l=o.addTemplate,c=rae(),d=c.canSplit,u=c.handleSplit,p=bh(t),v=p.disabled,m=p.copy,h=_f(),f=h.changePartModal,g=Gf(),x=g.open;function y(){var e,i;x("video-transition",{templateIndex:a,transitionId:null===(e=t.endTransfer)||void 0===e?void 0:e.meta.id,resId:null===(i=t.endTransfer)||void 0===i?void 0:i.attribute.resId}),dh(a)}var b=[{key:"addTemplate",name:"\u6dfb\u52a0\u7247\u6bb5",icon:"icontianjia",children:[{key:"addEmpty",name:"\u6dfb\u52a0\u7a7a\u767d\u7247\u6bb5",disabled:s},{key:"addPart",name:"\u6dfb\u52a0\u6a21\u677f\u7247\u6bb5"}]},{key:"copy",name:"\u590d\u5236\u7247\u6bb5",icon:"icona-Frame6",disabled:v,keyPress:Ld.clone},{key:"split",name:"\u5206\u5272\u7247\u6bb5",icon:"iconfenge",disabled:!d,iconStyle:{fontSize:20},keyPress:"S"},{key:"transition",name:"\u6dfb\u52a0\u8f6c\u573a",icon:"iconzhuanchang2",hidden:i||t.endTransfer,iconStyle:{fontSize:14,color:"#484E5F"}},{key:"replaceTransition",name:"\u66ff\u6362\u8f6c\u573a",icon:"iconzhuanchang2",hidden:!t.endTransfer,iconStyle:{fontSize:14,color:"#484E5F"}},{key:"delete",name:"\u5220\u9664\u7247\u6bb5",icon:"iconicons8_trash",iconStyle:{fontSize:20},keyPress:Ld.delete}];function _(e){var t=e.key,i=e.domEvent;switch(Ph(i),Km("part_contextMenu_".concat(t)),t){case"addEmpty":l(a+1);break;case"addPart":f({currentIndex:a+1,visible:!0});break;case"replaceTransition":case"transition":y();break;case"copy":m();break;case"delete":r();break;case"split":u();break;case"multipleReplace":Wf("simple");break}}function j(e){return e.map((e=>Array.isArray(e.children)?(0,Kg.jsx)(SH.Z.SubMenu,{title:e.name,icon:(0,Kg.jsx)(iP,{className:Mae()["icon-size"],type:e.icon}),disabled:e.disabled,popupClassName:Mae().hover,children:j(e.children)},e.key):(0,Kg.jsxs)(SH.Z.Item,{hidden:Boolean(e.hidden),disabled:Boolean(e.disabled),icon:e.icon?(0,Kg.jsx)(iP,{className:Mae()["icon-size"],style:e.iconStyle,type:e.icon}):"",children:[e.name,(0,Kg.jsx)("span",{className:"template-contextmenu-keypress",children:e.keyPress})]},e.key)))}return(0,Kg.jsx)(SH.Z,{className:Mae().hover,onMouseDown:e=>{Ph(e),e.preventDefault()},onClick:_,theme:"light",children:j(b)})})),Lae=(0,r.memo)((function(e){return(0,Kg.jsx)(NH.Z,{getPopupContainer:()=>document.querySelector("#xiudodo"),trigger:["contextMenu"],overlayStyle:{width:186},destroyPopupOnHide:!0,overlay:()=>(0,Kg.jsx)(Eae,(0,u.Z)({},e)),children:e.children})})),Dae=i(13232),Rae=i.n(Dae);function zae(e){var t=e.data,i=e.templateIndex,a=Bw(),o=a.endTransfer,s=(0,r.useRef)(null),l=_f(),c=l.changePartModal,d=yh(),u=d.hasEmpty,p=(d.addTemplate,Gf()),v=p.open,m=vw(),h=m.templates,f=(0,r.useState)(!1),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=Np();b.templateInfo.canvasInfo;function _(e){Ph(e),Km("transition_add"),dh(i),Lb(iw()[i][0],!1),v("video-transition",{templateIndex:i,transitionId:null===t||void 0===t?void 0:t.meta.id,resId:null===t||void 0===t?void 0:t.attribute.resId})}SH.Z,SH.Z.Item,SH.Z.Item;return(0,aM.Z)((()=>{y(!1)}),[s.current]),(0,r.useEffect)((()=>{y(!1)}),[t]),(0,Kg.jsx)("div",{className:Rae().partTransition,ref:s,children:(0,Kg.jsx)("div",{style:{position:"relative"},children:x?(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(xF.Z,{overlayClassName:Rae()["add-tooltip"],title:"\u6dfb\u52a0\u7a7a\u767d\u7247\u6bb5",getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:Rae()["transfer-opt-item"],onMouseDown:e=>{Ph(e),Km("template_insert"),u?xp.default.info("\u5df2\u5b58\u5728\u4e00\u4e2a\u7a7a\u767d\u6a21\u677f"):c({visible:!0,currentIndex:i+1})},children:(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6",className:Rae().icon})})}),(0,Kg.jsx)(xF.Z,{title:t?"\u66ff\u6362\u8f6c\u573a":"\u6dfb\u52a0\u8f6c\u573a",getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:Rae()["transfer-opt-item"],onMouseDown:e=>{var t,a;Ph(e),(null===(t=h[i])||void 0===t?void 0:t.videoInfo.allAnimationTime)<Zd||(null===(a=h[i+1])||void 0===a?void 0:a.videoInfo.allAnimationTime)<Zd?xp.default.info("\u65f6\u957f\u5c11\u4e8e".concat((Zd/1e3).toFixed(1),"s\u7684\u7247\u6bb5\u4e0d\u80fd\u8bbe\u7f6e\u8f6c\u573a")):_(e)},children:(0,Kg.jsx)(iP,{type:"iconzhuanchang2",className:Rae().icon})})})]}):(0,Kg.jsx)("div",{className:Rae().wrap,onMouseDown:e=>{Ph(e),y(!0)},children:t?(0,Kg.jsx)(iP,{type:"iconzhuanchang2",className:hb()(Rae().icon,{[Rae().iconChoosed]:t&&(null===t||void 0===t?void 0:t.id)===(null===o||void 0===o?void 0:o.id)})}):(0,Kg.jsx)(iP,{type:"iconxingzhuangjiehe6",className:Rae().icon})})})})}var Fae=(0,hp.Pi)(zae),Oae=(e,t)=>{var i=(0,u.Z)({},t);return e&&(i.zIndex=1e6),i},Bae=e=>{var t,i=e.data,a=e.index,o=(e.disableDelete,e.disableCopy,e.style),s=e.dragging,l=e.isLast,c=e.setClipStatus,d=e.clipStatus,p=e.handleSetClipingStyle,v=(0,yp.Z)(e,["data","index","disableDelete","disableCopy","style","dragging","isLast","setClipStatus","clipStatus","handleSetClipingStyle"]),m=Eq(),h=Mw(),f=(0,n.Z)(h,1),g=f[0],x=(Pw(),zv()),y=x.activeAudio,b=nM(),_=b.isPlaying,j=Qb(),w=j.loadComplete,k=_w(a),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=Lw(),S=N.template,I=Mw(),A=(0,n.Z)(I,1),P=A[0],M=Ep(),E=M.value,L=(0,r.useRef)(null),D=(0,r.useState)(),R=(0,n.Z)(D,2),z=R[0],F=R[1],O=(0,r.useState)(0),B=(0,n.Z)(O,2),W=B[0],V=B[1],U=(0,r.useState)(!1),G=(0,n.Z)(U,2),X=G[0],q=G[1];(0,r.useEffect)((()=>{w&&!X&&q(!0)}),[w,X]);var H=(null===S||void 0===S?void 0:S.id)===i.id,Y=i.videoInfo||{},K=Y.allAnimationTimeBySpeed,Q=Y.speed,J=void 0===Q?1:Q,$=(0,pL.L)((()=>({accept:hP,collect:e=>({hover:!!e.isOver()&&!!e.canDrop()}),drop:e=>{null===e||void 0===e||e.replace("bottom")}}))),ee=(0,n.Z)($,2),te=ee[0],ie=ee[1];(0,r.useEffect)((()=>{te.hover&&L5(a)}),[te.hover]),(0,r.useEffect)((()=>{var e=Wb();e>g&&Lb(g)}),[g]);var ae=(0,r.useMemo)((()=>K/1e3*m),[K,m]),ne=(0,r.useMemo)((()=>{var e=Rw(),t=e[a],n=i.startTransfer||i.endTransfer?Zd:wd,r={start:{min:Math.max(-Z[0],-(jd-P)),max:t.videoInfo.allAnimationTimeBySpeed-n},end:{min:-(t.videoInfo.allAnimationTimeBySpeed-n),max:jd-P}};return r}),[...Z,P]),re=50,oe=(0,r.useMemo)((()=>{if(!(ae<=0)){for(var e=re/E.height,t=E.width*e,n=Math.ceil(ae/t),r=K/n,o=[],s=0;s<n;s++)o.push((0,Kg.jsx)(LI,{canvasInfo:(0,u.Z)((0,u.Z)({},E),{},{scale:e}),currentTime:r*s,templateIndex:a},"".concat(i.id,"-").concat(r*s)));return o}}),[ae,a]);function se(e,t){var i=ae,r=e,o=ne[t],s=o.min,l=o.max,d=l/1e3*m,u=s/1e3*m;r>d?r=d:r<u&&(r=u);var p=r/m*1e3,v=p/(1/J),h=(0,n.Z)(Z,2),f=h[0],g=h[1];return"start"===t?(i-=r,f+=v,V(p)):(i+=r,g-=v,V(-p)),c({target:t,index:a}),F({width:i}),[f,g]}function le(e,t){e&&(Km("template_clip"),C(e),setTimeout((()=>{var i=Fw();i>=jd?xp.default.info("\u89c6\u9891\u65f6\u957f\u5df2\u8fbe\u5230\u6700\u5927\u9650\u5236"):"start"===t&&0===e[0]&&xp.default.info("\u6a21\u677f\u5df2\u7ecf\u62d6\u5230\u5934\u4e86")}))),c(),F(void 0),V(0)}var ce=document.querySelector(".xiudodo-bottom-scrollX");function de(e,t){var i,n;eu(),Ph(e),e.preventDefault();var r=Rw(),o=r[a].videoInfo.pageTime,s=(null===(i=iw())||void 0===i?void 0:i[a])||[0,0],l=s[0],c=l+o;Lq({e:e,target:t,targetScroll:ce,moving(e){var i=e.distanceX,r=e.justifyContent,o=e.fixedWidth;if(n=se(i,t),"start"===t){var s=l+n[0];s>=0&&$b({templateIndex:a,currentTime:n[0]+10})}else{var d=c-n[1]-10;d<c&&$b({templateIndex:a,currentTime:n[1]-10})}p(r,o)},finish(){le(n,t),$b(void 0)}})}var ue=(0,r.useRef)(null);return(0,r.useEffect)((()=>{var e;(!H||_||y)&&(null===(e=ue.current)||void 0===e||e.blur())}),[_,H,y]),(0,r.useLayoutEffect)((()=>{var e,t;null===(e=document.querySelector(".xiudodo-bottom-scrollX"))||void 0===e||e.scrollTo({left:null===(t=ue.current)||void 0===t?void 0:t.offsetLeft,top:0,behavior:"smooth"})}),[]),(0,Kg.jsx)(Lae,{template:i,templateIndex:a,isLast:l,children:(0,Kg.jsxs)("button",(0,u.Z)((0,u.Z)({tabIndex:a,className:hb()("xiudodo-bottom-part-wrap",{"xiudodo-bottom-part-selected":H,"xiudodo-bottom-part-simple":null!==(t=null===z||void 0===z?void 0:z.width)&&void 0!==t?t:ae<40}),ref:ue,style:(0,u.Z)({},o)},v),{},{onMouseDown:()=>{var e;null===(e=ue.current)||void 0===e||e.focus()},onContextMenu:e=>{var t;null===(t=ue.current)||void 0===t||t.focus()},children:[(0,Kg.jsx)(Aae,{templateIndex:a,template:i,target:ue}),(0,Kg.jsxs)("div",{ref:ie,style:{display:"flex",alignItems:"center",width:null===z||void 0===z?void 0:z.width,pointerEvents:null!==d&&void 0!==d&&d.target?"none":"all"},children:[(0,Kg.jsx)(xF.Z,{visible:"start"===(null===d||void 0===d?void 0:d.target),title:Dq(W),placement:"right",getPopupContainer:e=>e,children:(0,Kg.jsx)("div",{className:hb()("part-clip-handler","part-clip-handler-start",{"part-clip-handler-active":"start"===(null===d||void 0===d?void 0:d.target)&&d.index===a}),onMouseDown:e=>de(e,"start"),children:"|"})}),(0,Kg.jsx)(xF.Z,{visible:"end"===(null===d||void 0===d?void 0:d.target),title:Dq(K-W),placement:"left",getPopupContainer:e=>e,children:(0,Kg.jsx)("div",{ref:L,className:hb()("part-clip-handler","part-clip-handler-end",{"part-clip-handler-active":"end"===(null===d||void 0===d?void 0:d.target)&&d.index===a}),onMouseDown:e=>de(e,"end"),children:"|"})}),(0,Kg.jsx)(X1._l,{draggableId:"".concat(i.id),index:a,children:(e,t)=>{var n;return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)((0,u.Z)({ref:e.innerRef,className:"xiudodo-bottom-part-border"},e.draggableProps),e.dragHandleProps),{},{style:(0,u.Z)({width:null!==(n=null===z||void 0===z?void 0:z.width)&&void 0!==n?n:ae,overflow:"hidden",position:"relative"},Oae(t.isDragging,e.draggableProps.style)),children:(0,Kg.jsxs)("div",{ref:ue,className:hb()("xiudodo-bottom-part-poster",{"item-clip":!(null===d||void 0===d||!d.target)}),style:{backgroundColor:Oh(i.pageAttr.backgroundColor),zIndex:1},children:[(0,Kg.jsx)("div",{style:{width:ae,display:"flex",transform:"translateX(".concat(null!==z&&void 0!==z&&z.width&&"start"===(null===d||void 0===d?void 0:d.target)?(null===z||void 0===z?void 0:z.width)-ae:0,"px)")},children:oe}),(0,Kg.jsx)("div",{className:"xiudodo-bottom-part-mask",style:{opacity:te.hover?.75:0}}),(0,Kg.jsx)("div",{className:"xiudodo-bottom-part-loading",hidden:X,children:"loading\u2026"}),(0,Kg.jsxs)("div",{className:"xiudodo-bottom-part-index",children:[a<9?0:"",a+1]}),(0,Kg.jsx)("div",{className:"xiudodo-bottom-part-duration",children:Dq(K)})]})}))}},i.id)]}),!l&&!s&&(0,Kg.jsx)(Fae,{data:i.endTransfer,templateIndex:a},"transition-".concat(i.id))]}))})},Wae=(0,hp.Pi)(Bae);function Vae(e){var t=e.className,i=e.setClipStatus,a=e.clipStatus,o=(0,r.useState)(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=vw(),p=d.templates,v=d.rearrange,m=[...p],h=(0,r.useState)({}),f=(0,n.Z)(h,2),g=f[0],x=f[1];function y(e,t){var i,a=null===(i=document.querySelector(".parts"))||void 0===i?void 0:i.getBoundingClientRect().width,n={justifyContent:e};t&&Object.assign(n,{width:a}),x(n)}function b(e){var t=e.source,i=e.destination,a=e.draggableId;if(i){var n=t.index,r=i.index,o=r;n<r&&(o-=1),o<0&&(o=0),v(n,r),setTimeout((()=>{Lb(iw()[Du(Number(a))][0],!1)}),10),Xm("changePosition"),c(void 0)}}return(0,r.useEffect)((()=>{a||x({})}),[a]),(0,Kg.jsxs)(X1.Z5,{onDragEnd:b,onDragStart:(e,t)=>{c(e),Rb()},children:[(0,Kg.jsx)("div",{className:"parts-wrap",id:"bottom-parts-wrap",children:(0,Kg.jsx)(X1.bK,{droppableId:"droppable",direction:"horizontal",children:(e,n)=>(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({ref:e.innerRef,className:hb()("parts",t,{"part-draging":l}),style:(0,u.Z)({},g)},e.droppableProps),{},{children:[m.map(((e,t)=>(0,Kg.jsx)(Wae,{data:e,index:t,dragging:l,isLast:t===m.length-1,setClipStatus:i,clipStatus:a,handleSetClipingStyle:y},"part-".concat(e.id)))),e.placeholder]}))})}),(0,Kg.jsx)(Nae,{})]})}var Uae=(0,hp.Pi)(Vae),Gae=i(14127);function Xae(){var e=tf(),t=e.value,i=e.update,a=zq(),n=a.max,r=a.min,o=a.fit,s=document.querySelector(".xiudodo-bottom"),l=(0,Cm.Z)(s),c=l.width;(0,Gae.Z)((()=>{Rq()}),[c]);var d=(0,Zm.Z)((()=>{Km("time_line_slider")}),{wait:500});return(0,Kg.jsxs)("div",{style:{display:"flex",alignItems:"center",fontSize:12},onMouseDown:Ph,children:[(0,Kg.jsx)("span",{children:"\u65f6\u95f4\u8f74\u8c03\u6574\uff1a"}),(0,Kg.jsx)(TP.Z,{min:r,max:n,step:.1,style:{width:160},value:[t],onChange:e=>{i(e),d.run()},tooltipVisible:!1}),(0,Kg.jsx)(xF.Z,{title:"\u9002\u5e94\u5c4f\u5e55",getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:"fit-screen",onClick:()=>{Km("time_line_fit_screen"),i(o)},children:(0,Kg.jsx)(nQ.Z,{style:{transform:"rotate(45deg)"}})})})]})}var qae=(0,hp.Pi)(Xae),Hae=e=>{var t=Mw(),i=(0,n.Z)(t,1),a=i[0],o=tf(),s=o.value,l=e.hover,c=(0,r.useRef)({}),d=(0,r.useRef)({}),u=(0,xP.f)((e=>({currentOffset:e.getClientOffset(),initOffset:e.getInitialClientOffset(),item:e.getItem(),monitor:e}))),p=u.currentOffset,v=(u.monitor,u.item),m=u.initOffset;(0,r.useEffect)((()=>{var e;document.getElementById("xiudodo-bottom")&&(c.current=null===(e=document.getElementById("xiudodo-bottom"))||void 0===e?void 0:e.getBoundingClientRect())}),[]),(0,r.useEffect)((()=>{var e;document.getElementById("bottom-parts-wrap")&&(d.current=null===(e=document.getElementById("bottom-parts-wrap"))||void 0===e?void 0:e.getBoundingClientRect())}),[a,s]);var h=(0,r.useMemo)((()=>{if(null!==v&&void 0!==v&&v.mousePosition){var e=(null===p||void 0===p?void 0:p.x)-c.current.x-((null===m||void 0===m?void 0:m.x)-(null===v||void 0===v?void 0:v.mousePosition.x)),t=d.current.x-c.current.x;return e=Math.max(e,t),e=Math.min(e,t+d.current.width),e}}),[d.current,c.current,p]);return(0,Kg.jsx)(Kg.Fragment,{children:l&&(0,Kg.jsxs)("div",{className:"xiudodo-bottom-drag",children:[(0,Kg.jsx)("div",{className:"drag-icon",children:(0,Kg.jsx)(iP,{type:"iconyinle"})}),(0,Kg.jsx)("div",{children:"\u4f60\u53ef\u4ee5\u653e\u624b\u5566\uff01"}),(0,Kg.jsx)("div",{className:"red",style:{left:h}}),e.children]})})},Yae=(0,hp.Pi)(Hae),Kae=(0,hp.Pi)((()=>{var e=Bb(),t=e.currentTime,i=Mw(),a=(0,n.Z)(i,1),o=a[0],s=~~(t/1e3),l=~~(+o/1e3);return(0,r.useMemo)((()=>(0,Kg.jsx)(Kg.Fragment,{children:Th(s)+" / "+Th(l)})),[s,l])}));function Qae(){var e=(0,r.useRef)(null),t=(0,r.useRef)(null),i=(0,r.useState)(),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,r.useState)(225),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=(0,r.useState)(!1),m=(0,n.Z)(v,2),h=m[0],f=m[1],g=zv(),x=g.inCliping,y=Gf(),b=y.close,_=Cf(),j=_.openSidePanel,w=Eq(),k=nM(),T=k.isPlaying,Z=k.pauseVideo,C=(k.playVideo,Vf()),N=C.value;(0,r.useLayoutEffect)((()=>{f(!0)}),[]);var S=e=>{e.preventDefault(),T&&Z();var t=e.clientX,i=document.querySelectorAll(".xiudodo-bottom-part-wrap"),a=iw(),r=Bb().currentTime,o=Mw(),s=(0,n.Z)(o,1),l=s[0];i.forEach(((e,i)=>{var o=e.getBoundingClientRect(),s=o.x,l=o.width,c=(0,n.Z)(a[i],2),d=c[0],u=c[1];t>=s&&t<s+l&&(r=(t-s)/l*(u-d)+d,Lb(Math.ceil(r),!1))})),"part-clip-handler"!==e.target.className&&Fh(e,(e=>{if(Math.abs(e)>0){e_(!0);var t=r+Math.floor(e/w*1e3);t<0?t=0:t>l&&(t=l),a.forEach((e=>{var i=(0,n.Z)(e,2),a=i[0],r=i[1];t>a&&t<r&&r-t<Math.min(Math.floor(10/w*1e3),1e3)&&(t=r)})),Lb(t,!1)}}),(()=>{e_(!1),Xm("dragPlay")}))};function I(e){Ph(e),e.preventDefault(),e.nativeEvent.preventDefault(),Fh(e,((e,t)=>{var i=d-t;i>450?i=450:i<215&&(i=215),p(i)}))}var A=(0,pL.L)((()=>({accept:fP,collect:e=>({hover:!!e.isOver()&&!!e.canDrop(),position:e.getDifferenceFromInitialOffset()}),drop:(e,i)=>{var a,n=i.getInitialClientOffset()||{x:0,y:0},r=i.getClientOffset()||{x:0,y:0},o=(null===(a=t.current)||void 0===a?void 0:a.getBoundingClientRect())||{x:0,y:0},s=o.x,l=void 0===s?0:s,c=r.x-l-(n.x-(null===e||void 0===e?void 0:e.mousePosition.x));null===e||void 0===e||e.add((0,u.Z)((0,u.Z)({},r),{},{relativeX:c-6}))}}))),P=(0,n.Z)(A,2),M=P[0],E=P[1];return(0,Kg.jsxs)("div",{id:"xiudodo-bottom",className:"xiudodo-bottom-wrap",ref:E,style:{height:d},children:[(0,Kg.jsx)(Yae,(0,u.Z)({},M)),(0,Kg.jsx)("div",{className:"bottom-resize-line",onMouseDown:I}),"simple"===N?(0,Kg.jsx)(nae,{}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"xiudod-bottom-handler",onMouseDown:()=>{Ov(),eu(),T&&Z()},children:[!T&&(0,Kg.jsx)(hae,{}),(0,Kg.jsxs)("div",{className:"xiudodo-bottom-videoTime",children:[(0,Kg.jsx)(Vie,{}),(0,Kg.jsx)(Kae,{})]}),!T&&(0,Kg.jsx)(qae,{})]}),(0,Kg.jsxs)("div",{className:hb()("xiudodo-bottom-scrollX",{"xiudodo-bottom-audio-incliping":x>-1}),ref:t,onMouseDown:e=>{Pv(-1),S(e),b()},children:[(0,Kg.jsx)(fae,{}),(0,Kg.jsxs)("div",{className:"xiudodo-bottom-scrollX-content",id:"xiudodo-bottom-scrollX-content",children:[(0,Kg.jsx)("div",{className:"xiudodo-bottom-selected-asset",children:(0,Kg.jsx)(Cae,{})}),(0,Kg.jsx)("div",{className:hb()("xiudodo-bottom-parts"),id:"xiudodo-bottom-parts",ref:e,onMouseDown:()=>{Ov(),eu()},children:(0,Kg.jsx)(Uae,{setClipStatus:s,clipStatus:o})}),(0,Kg.jsx)(bQ,{wrapClassName:"xiudodo-bottom-audios-wrap",className:"xiudodo-bottom-audios",autoScroll:h,empty:(0,Kg.jsxs)("div",{className:"bottom-empty-audio",onMouseDown:e=>{Ph(e),j({menu:"music"}),b()},style:{width:"60%"},children:[(0,Kg.jsx)(Wie.Z,{})," \u80cc\u666f\u97f3\u4e50"]})})]})]})]})]})}var Jae=(0,hp.Pi)(Qae),$ae=()=>{var e=e=>{var t,i=e.size,a=void 0===i?{}:i,n=e.selector,r=void 0===n?"":n,o=e.position,s=void 0===o?"":o,l=e.offset,c=void 0===l?[0,0,0,0]:l,d=s.split("-"),u=document.querySelectorAll(r);if(!u||!a)return{};var p=null===(t=u[0])||void 0===t?void 0:t.getBoundingClientRect();if(!p)return{};var v=p.top,m=p.left,h=p.width,f=p.height,g=p.bottom,x=p.right;switch(d[0]){case"top":v=v-Number(a.height)+c[0];break;case"bottom":v=g+c[2];break;case"left":m=m-Number(a.width)+c[3];break;case"right":m=x+c[1];break;default:break}switch(d[1]){case"top":v+=c[0];break;case"bottom":v=g-Number(a.height)+c[2];break;case"left":m+=c[3];break;case"right":m=x-Number(a.width)+c[1];break;default:"left"===d[0]||"right"===d[0]?v=v+f/2-Number(a.height)/2:"top"!==d[0]&&"bottom"!==d[0]||(m=m+h/2-Number(a.width)/2);break}return{top:v,left:m,position:d}};return{getPopupContainer:e}},ene=i(25601),tne=i.n(ene),ine=()=>{var e=Lf(),t=e.guideInfo,i=e.open,a=e.close,n=(e.next,xf()),r=n.open,o=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(0!==t.buttonType)1!==t.type?(4===t.type&&(sA()<0&&r(),a()),5===t.type&&a()):t.currentStep<t.totalStep||-1!==n?i(-1!==n?_m[t.index][n]:_m[t.index][t.currentStep]):a();else{a();var o=lg();o&&i(o)}},s=new Array(t.totalStep).fill("");return(0,Kg.jsxs)("div",{className:tne().content,children:[t.src?(0,Kg.jsx)("div",{className:tne().title,children:(0,Kg.jsx)("video",{src:t.src,loop:!0,width:"100%",height:"100%",autoPlay:!0,disablePictureInPicture:!0})}):(0,Kg.jsx)("div",{className:tne().title,children:t.title}),"NoviceGuide00"===t.key?(0,Kg.jsx)("div",{className:tne().desc,children:(0,Kg.jsx)("div",{className:tne().NoviceGuidedesc,children:(0,Kg.jsxs)("p",{children:["\u6309\u7a7a\u683c\u952e\u6216\u8005",(0,Kg.jsx)("div",{className:tne().icon,children:(0,Kg.jsx)(iP,{type:"iconbofang"})}),"\u64ad\u653e\u89c6\u9891\uff0c\u53cc\u51fb\u9700\u8981\u4fee\u6539\u7684\u6587\u5b57/\u56fe\u7247/\u89c6\u9891\u3002"]})})}):(0,Kg.jsx)("div",{className:tne().desc,children:null===t||void 0===t?void 0:t.desc}),(0,Kg.jsx)("div",{className:tne().nextWrap,children:(t.ignoreBtn,(0,Kg.jsx)(CS.Z,{className:tne().next,onClick:o,children:t.buttonText}))}),(0,Kg.jsx)("div",{className:tne().bottomWrap,children:(0,Kg.jsx)("div",{className:tne().progress,children:t.currentStep&&(0,Kg.jsx)(Kg.Fragment,{children:s.map(((e,i)=>(0,Kg.jsx)("div",{className:hb()(tne().progressPoint,{[tne().choosed]:i===t.currentStep-1}),onClick:e=>{o(e,i)}},i)))})})}),(0,Kg.jsx)(CS.Z,{onClick:a,type:"link","aria-selected":!0,"aria-disabled":!0,size:"small",className:tne().close,children:"\u5173\u95ed\u6559\u5b66"})]})},ane=(0,hp.Pi)(ine),nne=()=>{var e=Lf(),t=e.guideInfo,i=e.close,a=(e.open,$ae()),o=a.getPopupContainer,s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=(0,r.useRef)(null),p=(0,Cm.Z)(u),v=(0,r.useMemo)((()=>{if(!t.visible)return{visible:t.visible,position:[]};var e=o({size:p,selector:t.popupContainer,position:t.position,offset:t.offset}),i=e.left,a=e.top,n=e.position;return{left:i,top:a,visible:t.visible,position:n}}),[t,p]);return(0,r.useEffect)((()=>{null!==t&&void 0!==t&&t.webLog&&ih(null===t||void 0===t?void 0:t.webLog)}),[t]),(0,r.useEffect)((()=>{Lh("pixeltip")||d(!0)}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)(nA.Z,{keyboard:!1,visible:c,mask:!1,wrapClassName:tne()["xdd-pixel-tip"],width:530,okText:"\u77e5\u9053\u4e86",closable:!1,footer:!1,children:[(0,Kg.jsx)(c4.Z,{style:{color:"#FF5A21",fontSize:16,marginRight:16}}),(0,Kg.jsx)("div",{children:"\u4e3a\u83b7\u5f97\u66f4\u6d41\u7545\u7684\u7f16\u8f91\u4f53\u9a8c\uff0c\u91c7\u7528\u4f4e\u5206\u8fa8\u7387\u8fdb\u884c\u9884\u89c8\uff0c\u4e0d\u4f1a\u5f71\u54cd\u89c6\u9891\u9ad8\u6e05\u5bfc\u51fa"}),(0,Kg.jsx)(CS.Z,{type:"link",style:{fontSize:12},onClick:()=>{d(!1),Eh("pixeltip",!0)},children:"\u77e5\u9053\u4e86"})]}),(0,Kg.jsx)("div",{ref:u,className:hb()(tne()["guide-wrap"]),style:{display:t.visible?"block":"none",left:v.left,top:v.top,zIndex:998},children:(0,Kg.jsxs)("div",{className:tne()["guide-content"],children:[(0,Kg.jsx)("div",{className:tne().closeIcon,onClick:i,children:(0,Kg.jsx)(iP,{type:"iconchahao"})}),(0,Kg.jsx)("div",{className:hb()(tne().arrowTip,tne()[t.position]),style:null===t||void 0===t?void 0:t.arrowStyle,children:(0,Kg.jsx)(GE,{autoPlay:!0,alwaysPlay:!0,path:(0,fb.Sx)("/help/guideJianTou.json"),preview:""})}),(0,Kg.jsx)(ane,{})]})})]})},rne=(0,hp.Pi)(nne),one=()=>{var e=x7(),t=e.delSideMenu,i=e.bindMouseDown,a=e.getShowSideMenu,o=Ff(),s=o.moreMenu,l=s||{menuList:[]},c=l.menuList,d=sA(),u=xp.default.useMessage(),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=null===c||void 0===c?void 0:c.filter((e=>1===e.display)),f=Cf(),g=f.leftSideInfo.menu,x=Gf(),y=x.value.panelKey,b=(0,r.useState)(0),_=(0,n.Z)(b,2),j=_[0],w=_[1],k=(0,r.useRef)();(0,r.useEffect)((()=>{var e=document.getElementById("left-menu-".concat(g)),t=(null===e||void 0===e?void 0:e.getBoundingClientRect().top)-40||0;w(t)}),[g]),(0,r.useEffect)((()=>{a(-1!==d)}),[d]);var T=()=>h.map((e=>(0,Kg.jsxs)("div",{id:"left-menu-".concat(e.id),className:hb()("menu-item",{"menu-item-active":!y&&g===e.id}),onMouseDown:()=>{i(e)},children:[!y&&g===e.id&&(null===e||void 0===e?void 0:e.isClose)&&(0,Kg.jsx)(iP,{type:"close-small",className:"menu-item-close",onMouseDown:a=>{k.current&&clearTimeout(k.current),Ph(a),Km("menu_hide_".concat(e.id)),t(e,0,d),k.current=setTimeout((()=>{xp.default.destroy("sideBarDel")}),5e3),v.warning({content:(0,Kg.jsxs)("div",{className:"menu-item-message",children:[(0,Kg.jsx)("div",{className:"menu-item-message-icon",children:(0,Kg.jsx)(iP,{type:e.icon,className:"message-icon"})}),(0,Kg.jsxs)("div",{className:"menu-item-message-txt",children:[e.name,"\u79fb\u52a8\u5230\u66f4\u591a"]}),(0,Kg.jsx)("div",{onClick:()=>{i(e),t(e,1,d),Km("menu_show_".concat(e.id)),xp.default.destroy("sideBarDel")},className:"menu-item-message-button",children:"\u64a4\u9500"})]}),className:"menu-item-message-warp",duration:5,icon:(0,Kg.jsx)("div",{style:{display:"none"}}),key:"sideBarDel"})}}),(0,Kg.jsx)("div",{className:"menu-item-icon",children:(0,Kg.jsx)(iP,{type:e.icon})}),e.newFun&&(0,Kg.jsx)("div",{className:"menuItemNewFun animate__animated animate__bounce animate__pulse animate__infinite"}),(0,Kg.jsx)("div",{className:"menu-item-name",children:e.name})]},e.id)));return(0,Kg.jsxs)("div",{className:hb()("xiudodo-aside",{}),onClick:()=>{Rb()},children:[m,(0,Kg.jsxs)("div",{className:"xiudodo-aside-menu",children:[T(),(0,Kg.jsx)("div",{className:"active-background",style:{top:j||10,display:!g||y?"none":""}})]})]})},sne=(0,r.memo)(one),lne=(0,hp.Pi)((()=>{var e=nM(),t=e.isPlaying,i=Am({container:document.querySelector(".xiudodo-main")}),a=i.canvasInfo.scale,n=i.value;n=void 0===n?{}:n;var o=n.width,s=n.height,l=iK(),c=l.backgroundAsset,d=l.updatePosition,p=l.backSize,v=l.position,m=(0,r.useRef)(null),h=Uf(),f=h.endCliping,g=c||{attribute:{width:1,height:1,picUrl:"",rt_url:"",rt_total_time:0}},x=g.attribute,y=x.picUrl,b=x.rt_url,_=x.rt_total_time,j=(0,r.useRef)(null),w=(0,r.useMemo)((()=>{var e=0,t=0,i=x.width/x.height;return o>s?(e=o*(p/100),t=e/i):(t=s*(p/100),e=t*i),{width:e,height:t}}),[p]),k=w.height-s,T=w.width-o,Z=(0,r.useMemo)((()=>{var e=v.left,t=v.top;return{left:{min:T<0?0:Math.min(-T-e,0),max:T<0?0:-Math.min(e,0)},top:{min:k<0?0:Math.min(-k-t,0),max:k<0?0:-Math.min(t,0)}}}),[v.top,v.left,w.width,w.height]);function C(){if(m.current){j.current=new iM(m.current,0,_);var e=Ab();j.current.setCurrentTime(e/1e3)}}function N(e){var t;Ph(e),e.preventDefault(),Fh(e,((e,i)=>{i/=a,e/=a;var n=v.top,r=v.left,o=Z.left,s=o.max,l=o.min,c=Z.top,u=c.max,p=c.min;e>s?e=s:e<l&&(e=l),i>u?i=u:i<p&&(i=p),n+=i,r+=e,t={left:r,top:n},d(t)}))}return(0,r.useEffect)((()=>{t&&f()}),[t]),(0,aM.Z)((()=>{f()}),[document.querySelector(".backgroundController")]),(0,Kg.jsx)("div",{className:"backgroundController",children:(0,Kg.jsxs)("div",{className:"backgroundContent",children:[(0,Kg.jsx)("div",{className:"backgroundAsset",style:(0,u.Z)((0,u.Z)({},w),{},{transform:"scale(".concat(a,") translate(").concat(v.left,"px,").concat(v.top,"px)"),transformOrigin:"0 0"}),children:"image"===(null===c||void 0===c?void 0:c.meta.type)?(0,Kg.jsx)("img",{width:"100%",src:y,alt:"template-background"}):(0,Kg.jsx)("video",{ref:m,width:"100%",src:b,onCanPlay:C})}),(0,Kg.jsx)("div",{className:"backgroundView",onMouseDown:N})]})})})),cne=i(41623),dne=i.n(cne);function une(e){var t=e.style,i=e.className,a=Lw(),o=a.template,s=nM(),l=s.isPlaying,c=s.playVideo,d=Bb(),p=d.currentTime,v=Pw(),m=Gf(),h=m.value.panelKey,f=Uf(),g=f.backgroundControl,x=(0,r.useState)(!0),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=Np(),w=j.templateInfo;if((0,r.useEffect)((()=>{(b&&(l||h||p>0||v)||g.inClipping)&&_(!1)}),[l,h,p,v,g.inClipping]),(0,r.useEffect)((()=>{b||_(!0)}),[w.id]),!b)return(0,Kg.jsx)(Kg.Fragment,{});var k=(null===o||void 0===o?void 0:o.template.preview_url)||(null===o||void 0===o?void 0:o.template.poster);return(0,Kg.jsx)("div",{className:"".concat(dne().wrap," ").concat(i),onClick:()=>{c(),_(!1),Km("canvas_play")},children:k&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{style:(0,u.Z)({position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden"},t),children:(0,Kg.jsx)("img",{src:k,alt:"preview"})}),(0,Kg.jsx)("div",{style:(0,u.Z)({position:"absolute",top:0,left:0,width:"100%",height:"100%",background:"url(".concat(k,") center / contain no-repeat")},t)}),(0,Kg.jsx)("div",{className:dne().icon,children:(0,Kg.jsx)(iP,{type:"iconbofang"})})]})})}var pne=(0,hp.Pi)(une),vne=i(39004),mne=i.n(vne);function hne(e){var t=e.showDesc,i=void 0===t||t,a=oA(),n=Cp(),r=(n.ratioType,sf()),o=r.open,s=NJ(),l=s.checkLoginStatus,c=()=>{l()||(Rm(Mm.canv_cli_wm),o())};return 0!==a.vip_type||0!==(null===a||void 0===a?void 0:a.team_id)?(0,Kg.jsx)(Kg.Fragment,{}):(0,Kg.jsx)(Kg.Fragment,{children:i&&(0,Kg.jsxs)("div",{className:hb()(mne().desc,mne()["desc-right"],{}),onClick:c,children:["\u79fb\u9664\u6c34\u5370",(0,Kg.jsx)("br",{}),"\u7545\u4eab\u9ad8\u6e05\u89c6\u9891"]})})}var fne=i(67155),gne=i.n(fne);function xne(e){var t=e.item,i=e.type,a=e.canvasInfo,o=e.showTip,s=e.setShowTip,l=x5(),c=l.delLine,d=()=>{var e="x"===i?t.value/100*(null===a||void 0===a?void 0:a.height):t.value/100*(null===a||void 0===a?void 0:a.width);return e},u=(0,r.useState)(d()),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=(0,r.useState)(null===a||void 0===a?void 0:a.scale),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,Cm.Z)(document.querySelector(".xiudodo-canvas")),b="x"===i?((null===y||void 0===y?void 0:y.height)-(null===a||void 0===a?void 0:a.height))/2:((null===y||void 0===y?void 0:y.width)-(null===a||void 0===a?void 0:a.width))/2,_=b>0?b+25:25,j=e=>{Ph(e),e.preventDefault(),Fh(e,((e,n)=>{var r="x"===i?n+v:e+v,o="x"===i?(null===a||void 0===a?void 0:a.height)/2:(null===a||void 0===a?void 0:a.width)/2;s(t.id),m(r<o&&r>o-10||r<o+10&&r>o?o:r)}),((e,a)=>{s("");var n="x"===i?a+v:e+v;c(i,n,t.id)}))};return(0,r.useEffect)((()=>{null!==a&&void 0!==a&&a.scale&&g!==(null===a||void 0===a?void 0:a.scale)&&(x(null===a||void 0===a?void 0:a.scale),m(v*((null===a||void 0===a?void 0:a.scale)/g)))}),[null===a||void 0===a?void 0:a.scale]),(0,Kg.jsxs)(Kg.Fragment,{children:[o===t.id&&(0,Kg.jsx)("div",{className:"x"===i?gne().referenceLineXTip:gne().referenceLineYTip,style:"x"===i?{top:"".concat(v+_,"px")}:{left:"".concat(v+_,"px")},children:(v/a.scale).toFixed(0)}),(0,Kg.jsx)("div",{className:"x"===i?gne().referenceLineX:gne().referenceLineY,style:"x"===i?{top:"".concat(v+_,"px"),left:25,width:null===y||void 0===y?void 0:y.width}:{left:"".concat(v+_,"px"),top:25,height:null===y||void 0===y?void 0:y.height},onMouseDown:j})]})}var yne=xne;function bne(e){var t=e.hoverLine,i=e.canvasInfo,a=t||{},n=a.type,r=a.pos,o=(0,Cm.Z)(document.querySelector(".xiudodo-canvas")),s="x"===n?((null===o||void 0===o?void 0:o.height)-(null===i||void 0===i?void 0:i.height))/2:((null===o||void 0===o?void 0:o.width)-(null===i||void 0===i?void 0:i.width))/2,l=s>0?s:0;return(0,Kg.jsx)(Kg.Fragment,{children:r&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"x"===n?gne().referenceLineXTip:gne().referenceLineYTip,style:"x"===n?{top:"".concat(r,"px")}:{left:"".concat(r,"px")},children:((r-25-l)/i.scale).toFixed(0)}),(0,Kg.jsx)("div",{className:"x"===n?gne().hoverLineX:gne().hoverLineY,style:"x"===n?{top:"".concat(r,"px"),left:25,width:null===o||void 0===o?void 0:o.width}:{left:"".concat(r,"px"),top:25,height:null===o||void 0===o?void 0:o.height}})]})})}var _ne=bne;function jne(e){var t=e.canvasInfo,i=Of(),a=i.referenceLineX,o=i.referenceLineY,s=i.referenceLineShow,l=i.updateReferenceLine,c=i.updateReferenceLineShow,d=x5(),u=d.hoverLine,p=d.getAddLine,v=d.setHoverLine,m=d.getDisplay,h=(0,r.useState)(""),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=Ep(),b=y.value,_=t||{},j=_.scale,w=void 0===j?0:j,k=_.width,T=_.height,Z=(0,r.useCallback)((e=>{var t=w>.5?10*e:20*e;return t&&t/window.parseInt("".concat(b))!==1?"".concat(t.toFixed(0)):"".concat(t)}),[t]),C=w<.5?20*w:10*w,N=w<.5?20:10;return(0,r.useEffect)((()=>{var e,t,i,a=null===(e=Cp())||void 0===e||null===(t=e.templates[0])||void 0===t||null===(i=t.template)||void 0===i?void 0:i.templateId;a&&(window.localStorage.getItem("referenceLineX".concat(a))&&l(JSON.parse(window.localStorage.getItem("referenceLineX".concat(a))),"x"),window.localStorage.getItem("referenceLineY".concat(a))&&l(JSON.parse(window.localStorage.getItem("referenceLineY".concat(a))),"y"),window.localStorage.getItem("referenceLineShow".concat(a))&&c(JSON.parse(window.localStorage.getItem("referenceLineShow".concat(a)))))}),[]),(0,Kg.jsx)(Kg.Fragment,{children:s&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{className:"horizontal-rulers",style:{width:k},onMouseMove:e=>{g||m(e,"y")},onMouseOut:()=>{v(null)},onMouseDown:e=>{g||p(e,"y")},children:(0,Kg.jsx)(eq.Ruler,{width:k||0,height:26,scaleWidth:C,formatter:Z,offsetLeft:0,labelInterval:N,scaleHeight:12,fontOffsetX:4,textBaseline:"top",fontColor:"#A2AAB1",scaleColor:"#CBD1D7",textAlign:"center",fontSize:"10px Arial"})}),(0,Kg.jsx)("div",{className:"vertical-rulers",style:{height:T},onMouseMove:e=>{g||m(e,"x")},onMouseOut:()=>{v(null)},onMouseDown:e=>{g||p(e,"x")},children:(0,Kg.jsx)("div",{className:"vertical-rulers-content",children:(0,Kg.jsx)(eq.Ruler,{width:T||0,height:26,scaleWidth:C,formatter:Z,offsetLeft:0,labelInterval:N,scaleHeight:12,fontOffsetX:4,textBaseline:"top",fontColor:"#A2AAB1",scaleColor:"#CBD1D7",textAlign:"center",fontSize:"10px Arial"})})}),a.map((e=>(0,Kg.jsx)(yne,{item:e,type:"x",canvasInfo:t,showTip:g,setShowTip:x},e.id))),o.map((e=>(0,Kg.jsx)(yne,{item:e,type:"y",canvasInfo:t,showTip:g,setShowTip:x},e.id))),(0,Kg.jsx)(_ne,{hoverLine:u,canvasInfo:t}),(0,Kg.jsx)("div",{className:"corner-block"})]})})}var wne=jne,kne=(i(93850),i(1402)),Tne=i(74765),Zne=i.n(Tne),Cne=()=>{var e=N_(),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useRef)(null),s=(0,r.useRef)(null),l=(0,r.useState)(!1),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=e=>{var t=Number(e);t!==i&&a(t)},v=e=>{Km("QuickActions1"),p((null!==i&&void 0!==i?i:0)+e),o.current=setTimeout((()=>{var t=1;s.current=setInterval((()=>{p((null!==i&&void 0!==i?i:0)+t*e),t+=1}),100)}),400)},m=()=>{clearTimeout(o.current),clearInterval(s.current)};return(0,Kg.jsx)(kne.Z,{options:Dd.map((e=>({label:e,value:"".concat(e),key:e}))),onSelect:e=>{p(e),Km("QuickActions1")},open:d,onDropdownVisibleChange:e=>{e||u(!1)},onFocus:()=>u(!0),children:(0,Kg.jsxs)("div",{className:Zne().FontSize,children:[(0,Kg.jsx)("div",{className:Zne().item,onMouseDown:()=>v(-1),onMouseUp:m,children:"-"}),(0,Kg.jsx)("div",{className:Zne().select,children:(0,Kg.jsx)(zM.Z,{value:i?window.parseInt(i.toString()):i,onChange:e=>{p(e),Km("QuickActions1")},style:{width:32,height:26},onKeyDown:Ph,onPaste:Ph})}),(0,Kg.jsx)("div",{className:Zne().item,onMouseDown:()=>v(1),onMouseUp:m,children:"+"})]})})},Nne=Cne,Sne=i(62356),Ine=i.n(Sne),Ane=i(65037),Pne=i.n(Ane),Mne=()=>{var e=D_(),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useRef)(null),u=xu(),p=()=>{var e,t=null===(e=d.current)||void 0===e?void 0:e.getBoundingClientRect();return t?{right:window.innerWidth-t.left-120,top:t.top+30}:{right:700,top:120}};return(0,r.useEffect)((()=>{c(!1)}),[u]),(0,Kg.jsx)("div",{className:Ine().item,children:(0,Kg.jsx)(tE.Z,{placement:"bottom",trigger:"click",visible:l,onVisibleChange:c,overlayClassName:Pne().ColorPopover,content:(0,Kg.jsx)(c2,{visible:l,title:"\u989c\u8272\u8bbe\u7f6e",onCancel:()=>c(!1),defaultPosition:p(),className:Pne().colorDraggableModal,style:{width:"auto",height:"auto",background:"#fff"},children:(0,Kg.jsx)(JV,{color:i?Oh(i):i,onChange:e=>{a(e.rgb),Km("QuickActions2")}})}),children:(0,Kg.jsx)("div",{className:Pne().Color,ref:d,style:{backgroundColor:i?"rgb(".concat(i.r,",").concat(i.g,",").concat(i.b,")"):"#fff"}})})})},Ene=(0,hp.Pi)(Mne),Lne=e=>{var t=e.onClick,i=void 0===t?()=>{}:t,a=e.iconType,n=e.text,r=()=>{i()};return(0,Kg.jsxs)("div",{onClick:r,className:Ine().item,children:[a&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(iP,{type:a,style:{fontSize:14}})," "]}),n]})};Lne.defaultProps={iconType:void 0,text:void 0,onClick:()=>{}};var Dne=Lne,Rne=()=>{var e=k_(),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsx)("div",{onClick:()=>{Km("QuickActions14"),a("bold"===i?"normal":"bold")},className:hb()(Ine().item,{[Ine().active]:"bold"===i}),children:(0,Kg.jsx)(iP,{type:"iconjiacu",style:{fontSize:14}})})},zne=(0,hp.Pi)(Rne),Fne=i(84627),One=i.n(Fne),Bne={video:"video",videoE:"video",image:"image",pic:"image",SVG:"image",lottie:"image",mask:"image",module:"group",group:"group",__module:"multiple",text:"text"},Wne=i(49541),Vne=i.n(Wne),Une=()=>{var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=tj(),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=ej(),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=xu();return(0,r.useEffect)((()=>{a(!1)}),[m]),(0,Kg.jsx)("div",{className:Ine().item,children:(0,Kg.jsx)(tE.Z,{placement:"bottom",trigger:"click",visible:i,onVisibleChange:a,className:Vne().ColorPopover,content:(0,Kg.jsx)(cB,{colon:!1,label:(0,Kg.jsx)("span",{style:{fontSize:18,cursor:"pointer"},onClick:()=>{v(!p),l||c(100)},children:(0,Kg.jsx)(iP,{className:"xiuIcon font-18",type:p?"volume-small":"volume-mute"})}),value:p?l:0,onChange:e=>{v(!!e),c(e)},inputNumber:!0,style:{width:336,padding:"12px 18px"},tooltipVisible:!1}),children:(0,Kg.jsx)(Dne,{text:l?"\u58f0\u97f3":"\u9759\u97f3",iconType:l?"volume-small":"volume-mute"})})})},Gne=(0,hp.Pi)(Une),Xne=32,qne=8,Hne=(0,hp.Pi)((e=>{var t,i=e.asset,a=e.activeAsset,o=e.containerSizeScale,s=e.assetPositionScale,l=i.attribute,c=i.meta,d=i.assetTransform,p=i.assets,v=ai(i)&&(null===i||void 0===i?void 0:i.assets)&&(null===i||void 0===i?void 0:i.assets.length)>0,m=d.rotate,h=void 0===m?0:m,f=l.effectColorful,g=l.effectVariant,x=l.startTime,y=l.endTime,b=l.rt_url,_=l.rt_total_time,j=l.height,w=l.width,k=Mi(),T=k.height,Z=k.scale,C=T*Z,N=l.cst,S=void 0===N?0:N,I=l.cet,A=void 0===I?Math.min(x-y,_):I,P=a.auxiliary.vertical.start-(Xne+qne);P<0&&(P=a.auxiliary.vertical.end+qne),P>C-Xne&&(P=0);var M=f||g,E={left:Math.max(s.left,0),top:P},L=c.type,D=ri(i),R=NJ(),z=R.checkLoginStatus,F=Lj(),O=F.startReplace,B=du(),W=B.inMask,V=B.startMask,U=Gq(),G=U.handleRemoveAsset,X=tj(),q=(0,n.Z)(X,2),H=(q[0],q[1],ej()),Y=(0,n.Z)(H,2),K=(Y[0],Y[1],Gf()),Q=K.open,J=(0,r.useState)(!1),$=(0,n.Z)(J,2),ee=$[0],te=$[1],ie={top:-40};h>=0&&h<180?ie.transformOrigin="0% 0%":h>=180&&h<360&&(ie.transformOrigin="100% 0%",ie.right=o.width);var ae=[{key:"fontSize",show:"text"===L&&!(null!==i&&void 0!==i&&i.parent),render(){return(0,Kg.jsx)(Nne,{},"fontSize")}},{key:"color",show:"text"===L&&!M,render(){return(0,Kg.jsx)(Ene,{},"color")}},{key:"fontColor",show:"text"===L&&M,text:(0,Kg.jsx)("img",{src:x0(),alt:"colorIcon",width:20,height:20}),onClick:()=>{Q("tool-fontColor"),Km("QuickActions3")}},{key:"fontWeight",show:"text"===L,render(){return(0,Kg.jsx)(zne,{},"fontWeight")}},{key:"fontFamily",show:"text"===L,text:"\u5b57\u4f53",onClick:()=>{Q("tool-fontFamily"),Km("QuickActions3")}},{key:"fontEffects",show:"text"===L&&M,text:"\u5b57\u4f53\u7279\u6548",onClick:()=>{Q("tool-fontEffects")}},{key:"replace",show:["image","video","videoE","pic","SVG","svgPath","lottie"].includes(null===i||void 0===i?void 0:i.meta.type),text:"\u66ff\u6362",iconType:"beijingtihuan",onClick:()=>{if(!z()){O();var e=Bne[L];Km("QuickActions5_".concat(e))}}},{key:"replaceMask",show:["mask"].includes(L),text:v?"\u66ff\u6362":"\u6dfb\u52a0",iconType:v?"beijingtihuan":"add-one",onClick:()=>{if(!z()){O();var e=Bne[L];Km("QuickActions5_".concat(e))}}},{key:"animation",show:["image","pic","text","lottie","mask","SVG","videoE","svgPath"].includes(L),text:"\u52a8\u753b",iconType:"donghua",onClick:()=>{Q("tool-animation");var e=Bne[L];Km("QuickActions4_".concat(e))}},{key:"mask-clip",show:!D&&!W&&(["image","pic"].includes(L)||"mask"===L&&(null===p||void 0===p?void 0:p.length)>0),iconType:"tailoring",text:"\u88c1\u526a",onClick:()=>{V(),Km("QuickActions7")}},{key:"volume",show:!W&&!(null!==i&&void 0!==i&&i.meta.isOverlay)&&(["videoE","video"].includes(null===i||void 0===i?void 0:i.meta.type)||"mask"===(null===i||void 0===i?void 0:i.meta.type)&&i.assets&&i.assets.length>0&&["videoE","video"].includes(null===(t=i.assets[0])||void 0===t?void 0:t.meta.type)),render(){return(0,Kg.jsx)(Gne,{})}},{key:"asset_delete",show:["image","pic","video","videoE","mask"].includes(L),text:"\u5220\u9664",iconType:"delete",onClick:()=>{G(i),Km("QuickActions11")}}],ne=ae.filter((e=>e.show));return ne.length?(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:One().ActionHelper,style:(0,u.Z)({},E),children:(0,Kg.jsxs)("div",{className:One().content,onMouseDown:Ph,children:[(0,Kg.jsx)(tK,{visible:ee,onCancel:()=>te(!1),contentProps:{data:{duration:_,preview_video:b,cst:S,cet:A,height:j,width:w},actionType:"cut",onOk:e=>{rj({startTime:e.cst,endTime:e.cet}),te(!1)}}}),ne.map((e=>{var t=e.iconType,i=e.text,a=e.onClick,n=e.key;return e.render?e.render():(0,Kg.jsx)(Dne,{text:i,iconType:t,onClick:a},n)}))]})})}):null}));function Yne(){var e=Pw(),t=gu(),i=Mj(),a=i.inRotating,r=Ej(),o=du(),s=o.inMask,l=null===e||void 0===e?void 0:e.meta.locked,c=t||{},d=c.assetPositionScale,u=c.containerSizeScale,p=Zf(),v=p.dropdownVisible,m=vj(e),h=(0,n.Z)(m,1),f=h[0],g=$t(t);return(0,Kg.jsx)(Kg.Fragment,{children:e&&t&&g&&!s&&!a&&!r&&!v&&!l&&!f&&(0,Kg.jsx)(Hne,{asset:e,activeAsset:t,containerSizeScale:u,assetPositionScale:d})})}var Kne=(0,hp.Pi)(Yne),Qne=i(80656),Jne=i.n(Qne),$ne=()=>{var e=Tf(),t=e.setAddSvgType,i=e.addSvgType,a=(0,r.useRef)(null),o=Am({container:document.querySelector(".xiudodo-main")}),s=o.update,l=o.newCanvasInfo,c=l.width,d=l.height,p=l.scale,v=p||1,m="line"===i,h=(0,dx.Z)({width:0,height:0,left:0,top:0}),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useRef)(null);y.current=g;var b=ib();m&&(b.strokeWidth=4,b.closed=!1);var _=()=>{if(y.current){var e=y.current,t=e.width,a=e.height,n=e.left,r=e.top,o=e.pathItems;Tg({attribute:{width:t,height:a,svgInfo:(0,u.Z)((0,u.Z)({},b),{},{pathItems:o})},meta:{type:"svgPath",shapeType:i||"path"},transform:{posX:n,posY:r}})}},w=e=>{if(a.current){var n=a.current.getBoundingClientRect(),r=n.x,o=n.y,s=(e.clientX-r)/v,l=(e.clientY-o)/v;Fh(e,((e,t)=>{var i=e/v,a=t/v,n=Math.abs(i),r=Math.abs(a),o={width:n,height:r,left:s,top:l};if(i<0&&(o.left=s+i),a<0&&(o.top=l+a),m){var c={start:[0,0],end:[i,a]};i<0&&(c.start[0]=n,c.end[0]=0),a<0&&(c.start[1]=r,c.end[1]=0),o.pathItems=[c]}x(o)}),((e,a)=>{e&&a?(_(),Km("FreeformDraw2")):Tg({attribute:{width:300,height:300,svgInfo:(0,u.Z)({},b)},meta:{type:"svgPath",shapeType:i||"path"},transform:{posX:s,posY:l}}),t(null)}))}},k=(0,r.useMemo)((()=>g.width&&g.height&&i?g.pathItems?g.pathItems:eb({width:g.width,height:g.height,type:i}):[]),[g.width,g.height,i,g.pathItems]);return(0,r.useEffect)((()=>{s("fit")}),[]),(0,Kg.jsx)("div",{ref:a,className:Jne().SvgEditor,onMouseDown:w,style:{width:c,height:d,transform:"scale(".concat(v,")"),cursor:"url(".concat((0,fb.Sx)("/image/cursor.svg"),") 15 15, crosshair")},children:(0,Kg.jsx)("div",{style:{left:g.left,top:g.top,position:"absolute",width:g.width,height:g.height},children:(0,Kg.jsx)("svg",{style:{overflow:"inherit"},width:g.width,height:g.height,preserveAspectRatio:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,Kg.jsx)("g",{stroke:"null",children:(0,Kg.jsx)("path",{style:{vectorEffect:"non-scaling-stroke"},strokeWidth:m?4:0,d:tb(k),strokeDasharray:"none",stroke:j(b.stroke),fill:j(b.fill)})})})})})},ere=$ne,tre=()=>{var e=(0,r.useRef)(null),t=Am({container:document.querySelector(".xiudodo-main")}),i=t.canvasInfo,a=t.isScroll,n=t.templateSize,o=t.scale,s=RK(),l=s.onDrop,c=s.onHover,d=jf(),p=d.timeLinePartKey,v=Tf(),m=v.addSvgType,h=du(),f=h.inMask,g=Uf(),x=g.backgroundControl,y=(0,_p.Z)(),b=Qb(),_=b.loadComplete,j=Nk(),w=j.loading;(0,r.useEffect)((()=>{if(Rw().length&&w&&_){Ah.closeWindowsLoading();var e=window.__EDITOR_PERFORMANCE__;e.completed||(e.user_resorce_post_end=(new Date).getTime(),e.completed=!0),e.completed&&!e.sended&&Wm(y),Um(y.picId,y.upicId),Lm.set({actionType:" templateFirstLoad"})}}),[w,_]),(0,r.useEffect)((()=>{_&&Rw().length&&$k()}),[_]),(0,Sb.Z)((()=>{e.current&&Im(e.current)}),[n.width,n.height]);var k=ah();return p?null:(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(wne,{canvasInfo:i}),(0,Kg.jsx)(DK,{className:"xiudodo-canvas",style:{position:"relative",width:"100%",zIndex:1,background:f?"rgba(0, 0, 0, 0.35)":void 0},onDrop:l,onHover:c,children:i&&(0,Kg.jsx)(HQ,{children:(0,Kg.jsx)("div",{children:(0,Kg.jsx)(NI,{onChange:(e,t)=>{var i=xu();Sh.open(),Lm.set({actionType:e,assetType:null===i||void 0===i?void 0:i.meta.type,assetId:null===i||void 0===i?void 0:i.meta.id}),k(i,e),$k(),t&&$A({autoSave:!0})},canvasInfo:(0,u.Z)((0,u.Z)({},n),{},{scale:o})})})})}),(0,Kg.jsx)("div",{className:hb()("xdd-expand-box",{"xdd-expand-box-centerX":!a.isScrollX,"xdd-expand-box-centerY":!a.isScrollY,"xdd-expand-box-center":!a.isScrollX&&!a.isScrollY}),style:{width:n.width*o,height:n.height*o},children:(0,Kg.jsxs)("div",{style:{pointerEvents:"auto"},children:[(0,Kg.jsx)(Kne,{}),(0,Kg.jsx)(hne,{}),m&&(0,Kg.jsx)(ere,{}),x.inClipping&&(0,Kg.jsx)(lne,{}),(0,Kg.jsx)(pne,{style:(0,u.Z)((0,u.Z)({},n),{},{transform:"scale(".concat(o,")"),transformOrigin:"left top"}),className:"xiudd-canvas-poster"})]})})]})},ire=(0,hp.Pi)(tre),are=ire,nre=(i(11116),i(60305)),rre=i(96477),ore=i.n(rre),sre=()=>{var e=yf(),t=e.loginAlert,i=e.closeReLoginTips,a=e.reLoginTips,n=e.closeLoginAlert,r=bf(),o=r.showLoginModal;function s(){i(),o()}return t?(0,Kg.jsxs)("div",{className:ore().loginAlert,children:["\u767b\u5f55\u5373\u4eab \u6bcf\u65e51\u6b21\u514d\u8d39\u4e0b\u8f7d"," ",(0,Kg.jsx)("span",{className:ore().btn,onClick:o,children:"\u7acb\u5373\u767b\u5f55"}),(0,Kg.jsx)("span",{className:ore().closeBtn,onClick:n,children:"\xd7"})]}):(0,Kg.jsxs)(nA.Z,{title:null,visible:a,onOk:s,keyboard:!1,centered:!0,closable:!1,maskClosable:!1,cancelText:null,width:400,footer:[(0,Kg.jsx)(CS.Z,{type:"primary",onClick:s,children:"\u91cd\u65b0\u767b\u5f55"},"login-btn")],getContainer:document.getElementById("xiudodo"),children:[(0,Kg.jsx)(nre.Z.Title,{level:5,children:"\u4e3a\u907f\u514d\u4f5c\u54c1\u4fdd\u5b58\u5931\u8d25\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55\uff01"}),(0,Kg.jsx)("p",{children:"\u53ef\u80fd\u7684\u539f\u56e0\uff1a\u60a8\u5207\u6362\u4e86\u8d26\u53f7\u3001\u9000\u51fa\u767b\u5f55\uff0c\u6216\u5728\u5176\u4ed6\u7ec8\u7aef\u767b\u5f55\u4e86\u6b64\u8d26\u53f7"})]})},lre=sre,cre=i(45848),dre=(0,hp.Pi)((e=>{var t,i=e.isBackground,a=e.className,o=(0,yp.Z)(e,["isBackground","className"]),s=P_(),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=iK(),v=p.backgroundTransparent,m=p.backOpacity,h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=i?m:c,b=(0,Kg.jsx)(cB,{label:"\u4e0d\u900f\u660e\u5ea6",value:y,onChange:e=>{i?v(e):d(e)},inputNumber:!0,style:{width:336,padding:"12px 18px"},tooltipVisible:!1});return(0,r.useEffect)((()=>{var e;"none"===(null===(e=o.style)||void 0===e?void 0:e.display)&&x(!1)}),[null===(t=o.style)||void 0===t?void 0:t.display]),(0,Kg.jsx)(MR,{placement:"bottom",trigger:"click",content:b,visible:g,onVisibleChange:e=>{x(e)},children:(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:a},o),{},{style:{width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:(0,Kg.jsx)(iP,{type:"butoumingdu",className:"xiuIcon font-24"})}))})}));function ure(e){var t=e.onClick,i=Z_(),a=(0,n.Z)(i,1),o=a[0],s=C_(),l=s.value,c=(0,r.useState)(""),d=(0,n.Z)(c,2),u=d[0],p=d[1];return(0,r.useEffect)((()=>{null!==l&&void 0!==l&&l.resId?AD(l.resId.slice(1)).then((e=>{var t,i;0===e.code&&p(null===(t=e.data)||void 0===t||null===(i=t.fileInfo)||void 0===i?void 0:i.cover_path)})):p("")}),[l]),(0,Kg.jsxs)("div",{className:hb()("font-family-wrap"),onClick:t,children:[(0,Kg.jsx)("div",{className:"selected-fontFamily",children:u?(0,Kg.jsx)("img",{src:u,alt:"text",height:22}):o&&(0,Kg.jsx)("img",{src:"".concat(fb.PP,"/index_img/fonts/").concat(o,".svg"),alt:"text",height:22})}),(0,Kg.jsx)(p0.Z,{})]})}var pre=(0,hp.Pi)(ure),vre=i(13378),mre=i(10432),hre=i.n(mre),fre=[12,14,16,18,22,36,40,50,80,120,140,160,180,200,250,300,350,400,500,600];function gre(e){var t=(0,vre.Z)({},e),i=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=N_(),p=(0,n.Z)(d,2),v=p[0],m=p[1],h=e=>{var t=600,i=12,a=Number(e),n=a;a>t?n=t:a<i&&(n=i),a!==v&&m(n)},f=e=>{Km("tool_fontSize"),h((null!==v&&void 0!==v?v:0)+e),i.current=setTimeout((()=>{var t=1;a.current=setInterval((()=>{h((null!==v&&void 0!==v?v:0)+t*e),t+=1}),100)}),400)},g=()=>{clearTimeout(i.current),clearInterval(a.current)};return(0,Kg.jsx)(kne.Z,{options:fre.map((e=>({label:e,value:"".concat(e),key:e}))),onSelect:e=>{h(e),Km("QuickActions1")},open:l,onDropdownVisibleChange:e=>{e||c(!1)},onFocus:()=>c(!0),children:(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({},t),{},{children:[(0,Kg.jsx)("span",{className:hre().action,onMouseDown:e=>f(-1),onMouseUp:g,children:"-"}),(0,Kg.jsx)(zM.Z,{value:Math.floor(Number(null!==v&&void 0!==v?v:0)),max:600,min:12,className:hre()["input-number"],onChange:e=>{h(e),Km("QuickActions1")},onKeyDown:Ph,onPaste:Ph}),(0,Kg.jsx)("span",{className:hre().action,onMouseDown:e=>f(1),onMouseUp:g,children:"+"})]}))})}var xre=(0,hp.Pi)(gre);function yre(){var e,t=Pw(),i=S_(),a=(0,n.Z)(i,2),r=a[0],o=a[1],s=I_(),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=A_(),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=[{key:"left",name:"\u5de6\u5bf9\u9f50",icon:"icona-bianzu2"},{key:"center",name:"\u5c45\u4e2d\u5bf9\u9f50",icon:"icona-bianzu3"},{key:"right",name:"\u53f3\u5bf9\u9f50",icon:"icona-bianzu4"}],f=(0,Zm.Z)((e=>{Km(e)}),{wait:500}),g=f.run;return(0,Kg.jsxs)("div",{style:{width:334,padding:16},onClick:Ph,children:[(0,Kg.jsxs)("div",{className:"tool-bar-flex-box flex-space-between",children:[(0,Kg.jsx)("span",{children:"\u5bf9\u9f50"}),(0,Kg.jsx)("div",{className:"tool-bar-flex-box",children:h.map((e=>(0,Kg.jsx)("div",{className:hb()("xiudd-tool-item","xiudd-tool-item-hover",{"top-tool-bar-item-active":r===e.key}),onClick:()=>{Km("tool_align",{action_label:e.key}),o(e.key)},style:{height:30},children:(0,Kg.jsx)(xF.Z,{title:e.name,children:(0,Kg.jsx)(iP,{className:hb()("xiuIcon"),type:e.icon})})},"textAlign".concat(e.key))))})]}),(0,Kg.jsx)("div",{style:{marginTop:16},children:(0,Kg.jsx)(cB,{label:"\u95f4\u8ddd",value:Math.floor(Number(null!==v&&void 0!==v?v:0)),onChange:e=>{m(e),g("tool_letterSpacing")},inputNumber:!0,tooltipVisible:!1})}),!(null!==t&&void 0!==t&&t.attribute.textBackground&&null!==t&&void 0!==t&&null!==(e=t.attribute.textBackground)&&void 0!==e&&e.enabled)&&(0,Kg.jsx)("div",{style:{marginTop:16},children:(0,Kg.jsx)(cB,{label:"\u884c\u9ad8",value:Number(null!==c&&void 0!==c?c:0),onChange:e=>{d(e),g("tool_lineHeight")},inputNumber:!0,min:1,tooltipVisible:!1})})]})}var bre=(0,hp.Pi)(yre),_re=e=>{var t=e.isBackground,i=K_(),a=i.endClip,r=iK(),o=r.backHorizontalFlip,s=r.backVerticalFlip,l=r.updateBackHorizontalFlip,c=r.updateBackVerticalFlip,d=R_(),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=z_(),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=t?o:p,y=t?s:f,b=t?l:v,_=t?c:g;return[{key:"horizontalFlip",name:"\u6c34\u5e73\u7ffb\u8f6c",icon:"icongg_edit-flip-h",active:x,onClick:()=>{a(),b(!x),Km("tool_horizontalFlip")}},{key:"verticalFlip",name:"\u5782\u76f4\u7ffb\u8f6c",icon:"icongg_edit-flip-v",active:y,onClick:()=>{a(),_(!y),Km("tool_verticalFlip")}}].map((e=>(0,Kg.jsxs)("div",{className:hb()("popover-tool-item",{"popover-tool-item-active":e.active}),onClick:e.onClick,children:[(0,Kg.jsx)(iP,{className:hb()("xiuIcon","font-18"),type:e.icon}),e.name]},"flip-".concat(e.key))))},jre=(0,hp.Pi)(_re),wre=i(8287),kre=i.n(wre),Tre=i(91236),Zre=i(43646),Cre=i.n(Zre),Nre=e=>{var t=(0,Tre.Z)("XIUDODO_BACKGROUND_COLOR"),i=(0,n.Z)(t,2),a=i[0],o=void 0===a?[]:a,l=i[1],c=(0,r.useState)({}),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=bw(),m=v.backgroundColor,h=(0,r.useState)(!1),f=(0,n.Z)(h,2),g=f[0],x=f[1],y=(0,r.useState)([]),b=(0,n.Z)(y,2),_=b[0],j=b[1];(0,r.useEffect)((()=>{if(o.length>0){var e=JSON.parse(JSON.stringify(o));e.length>5&&(e=e.slice(-5)),j(e)}}),[o]);var w=(0,Nb.Z)((t=>{Rb(),null===e||void 0===e||e.changedColor(t)}),{wait:200}),k=w.run;return(0,Kg.jsx)(MR,{visible:g,trigger:"click",onVisibleChange:e=>{x(!1),null!==u&&void 0!==u&&u.r&&l([...o,Oh(u)]),p({})},overlayInnerStyle:{marginTop:30,marginLeft:10},content:(0,Kg.jsx)(qL.AI,{width:200,color:(0,s.ZN)(m),onChange:e=>{k(e.rgb),p(e.rgb)}}),children:(0,Kg.jsxs)("div",{className:kre().toolColorView,children:[(0,Kg.jsxs)("div",{className:kre().toolColorViewItem,children:[(0,Kg.jsx)("p",{onClick:()=>{x(!1),null!==u&&void 0!==u&&u.r&&l([...o,Oh(u)]),p({})},children:"\u80cc\u666f\u989c\u8272"}),(0,Kg.jsxs)("div",{className:kre().toolColorViewItemView,children:[(0,Kg.jsx)("div",{className:kre().caihong,onClick:e=>{e.stopPropagation(),x(!0),p({})},children:(0,Kg.jsx)("img",{src:Cre(),alt:""})}),(0,Kg.jsx)(qL.iY,{circleSize:20,onChange:e=>{k(e.rgb)},colors:_})]})]}),(0,Kg.jsxs)("div",{className:kre().toolColorViewItem,children:[(0,Kg.jsx)("p",{children:"\u9884\u8bbe\u989c\u8272"}),(0,Kg.jsx)(qL.iY,{circleSize:20,onChange:e=>{k(e.rgb)},colors:["#98C2EC","#A0DD9E","#F7E7A2","#F7C098","#F6A4A4","#BBA5E1","#3385D9","#42BB3F","#F1D044","#EE8034","#EE4949","#774BC4","#FFFFFF","#C7C7C7","#969696","#5F5F5F","#3B3B3B","#000000"]})]})]})})},Sre=((0,hp.Pi)(Nre),[{rgba:{r:0,g:0,b:0,a:1},color:"#000000",border:"1px solid  #AEAEAE"},{rgba:{r:255,g:255,b:255,a:1},color:"#ffffff",border:"1px solid #E0E0E0"},{rgba:{r:47,g:183,b:158,a:1},color:"#2FB79E",border:"1px solid #239E87"},{rgba:{r:127,g:102,b:227,a:1},color:"#7F66E3",border:"1px solid #7959DA"},{rgba:{r:36,g:153,b:247,a:1},color:"#2499F7",border:"1px solid #1F8EE6"},{rgba:{r:252,g:189,b:20,a:1},color:"#FCBD14",border:"1px solid #EBAE12"}]);var Ire=e=>{var t=e.className,i=(0,yp.Z)(e,["className"]),a=bw(),n=a.backgroundColor,r=a.update,o=Lw(),s=o.template,l=e=>{Km("tool_template_background_color"),Rb(),r(e)};return(0,Kg.jsxs)(Kg.Fragment,{children:[0===(null===s||void 0===s?void 0:s.assets.length)&&Sre.map(((e,a)=>(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:hb()(t),onClick:e=>{e.stopPropagation()}},i),{},{children:(0,Kg.jsx)("div",{className:kre().colorItem,onClick:t=>{t.stopPropagation(),l(e.rgba)},style:{background:e.color,border:e.border}})}),a))),(0,Kg.jsx)(xF.Z,{title:"\u80cc\u666f\u989c\u8272",children:(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:hb()(kre().colorPro,t)},i),{},{children:[(0,Kg.jsx)(iP,{type:"beijingtianchong",style:{fontSize:20}}),"linear"===(null===n||void 0===n?void 0:n.type)?(0,Kg.jsx)(iP,{type:"jianbian",className:kre().choosedColorBottom}):(0,Kg.jsx)("div",{style:{backgroundColor:"rgba(".concat(null===n||void 0===n?void 0:n.r,", ").concat(null===n||void 0===n?void 0:n.g,", ").concat(null===n||void 0===n?void 0:n.b,", ").concat(null===n||void 0===n?void 0:n.a,")")},className:kre().choosedColor})]}))})]})},Are=(0,hp.Pi)(Ire),Pre=i(52824),Mre=i.n(Pre),Ere=e=>{e.className,(0,yp.Z)(e,["className"]);var t=$_(),i=t.zIndex,a=t.maxZIndex,n=t.minZIndex,r=(0,Nb.Z)((e=>{J_({direction:e}),Km("tool_assetLayerZIndex",{action_label:e})}),{wait:200}),o=r.run;return(0,Kg.jsxs)("div",{className:Mre().toolSelectView,children:[(0,Kg.jsxs)("div",{className:hb()(Mre().toolSelectItem,{[Mre().disabled]:(i||0)>=a}),onClick:()=>{i<=a&&o("top")},children:[(0,Kg.jsx)(iP,{type:"iconic_round-flip-to-front",style:{fontSize:20,marginRight:4}}),"\u7f6e\u4e8e\u9876\u5c42"]}),(0,Kg.jsxs)("div",{className:hb()(Mre().toolSelectItem,{[Mre().disabled]:(i||0)>=a}),onClick:()=>{i<=a&&o("up")},children:[(0,Kg.jsx)(iP,{type:"icongg_move-up",style:{fontSize:20,marginRight:4}}),"\u5411\u4e0a\u4e00\u5c42"]}),(0,Kg.jsxs)("div",{className:hb()(Mre().toolSelectItem,{[Mre().disabled]:(i||0)<=n}),onClick:()=>{i>=n&&o("down")},children:[(0,Kg.jsx)(iP,{type:"icongg_move-down",style:{fontSize:20,marginRight:4}}),"\u5411\u4e0b\u4e00\u5c42"]}),(0,Kg.jsxs)("div",{className:hb()(Mre().toolSelectItem,{[Mre().disabled]:(i||0)<=n}),onClick:()=>{i>=n&&o("bottom")},children:[(0,Kg.jsx)(iP,{type:"iconic_round-flip-to-back",style:{fontSize:20,marginRight:4}}),"\u7f6e\u4e8e\u5e95\u5c42"]})]})},Lre=(0,hp.Pi)(Ere),Dre=(0,hp.Pi)((e=>{var t=e.className,i=(0,yp.Z)(e,["className"]),a=ej(),r=(0,n.Z)(a,2),o=r[0],s=r[1],l=tj(),c=(0,n.Z)(l,2),d=c[0],p=c[1],v=nf(),m=v.value,h=v.open,f=v.close,g=(0,Kg.jsx)(cB,{colon:!1,label:(0,Kg.jsx)("span",{style:{fontSize:18,cursor:"pointer"},onClick:()=>{s(!o),d||p(100)},children:(0,Kg.jsx)(iP,{className:"xiuIcon font-18",type:o?"volume-small":"volume-mute"})}),value:o?d:0,onChange:e=>{s(!!e),p(e)},inputNumber:!0,style:{width:336,padding:"12px 18px"},tooltipVisible:!1});return(0,Kg.jsx)(MR,{placement:"bottom",trigger:"click",content:g,visible:m,onVisibleChange:e=>{e?h():f()},children:(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:t,onClick:h},i),{},{children:(0,Kg.jsx)(iP,{type:o?"volume-small":"volume-mute",className:"xiuIcon font-24"})}))})})),Rre=e=>{var t=e.item,i=e.className,a=e.type,n=void 0===a?"list":a,r=e=>{var t={width:e.width,height:e.height,resId:e.id,SVGUrl:e.sample,source_key:e.source_key,rt_svgString:""};UO.ZP.get(e.source_key).then((e=>{1===e.stat&&(t.rt_svgString=e.msg,Ch(t))})).catch((e=>{}))};return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:i||"clip-mask-item",children:(0,Kg.jsx)("div",{onClick:()=>r(t),style:{width:"index"===n?28:40,height:"index"===n?28:40,backgroundImage:"url(".concat(t.preview,")"),backgroundRepeat:"no-repeat",backgroundSize:"contain",backgroundPosition:"center"}})})})},zre=Rre,Fre=()=>(0,Kg.jsx)(yE,{request:tB,beforeLoadData:e=>e.page,wrapStyle:{height:293,padding:"10px 0 10px 10px"},children:e=>{var t=e.list;return(0,Kg.jsx)("div",{className:"clip-mask-list",children:t.map((e=>(0,Kg.jsx)(zre,{item:e},e.id)))})}}),Ore=(0,hp.Pi)(Fre),Bre=e=>{var t=e.className,i=(0,yp.Z)(e,["className"]),a=(0,r.useState)([]),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=(0,DI.ZP)(tB,{manual:!0,loadingDelay:1e3,onSuccess:(e,t)=>{l(e.items.splice(0,2))}}),d=(c.loading,c.run);return(0,r.useEffect)((()=>{d(1)}),[]),(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:hb()("clip-mask",t)},i),{},{onClick:W,children:[s.map((e=>(0,Kg.jsx)(zre,{item:e,type:"index",className:"clip-mask-tool"},e.id))),s.length>0&&(0,Kg.jsx)(MR,{trigger:"click",overlayStyle:{marginTop:10,paddingLeft:12},content:(0,Kg.jsx)(Ore,{}),children:(0,Kg.jsx)("div",{className:"clip-escWrap",children:(0,Kg.jsx)("div",{className:"clip-esc",children:(0,Kg.jsx)(iP,{className:"clip-escIcon",type:"icongengduo_tianchong"})})})})]}))},Wre=(0,hp.Pi)(Bre),Vre=i(40077),Ure=i.n(Vre),Gre=()=>{var e=F_(),t=(0,n.Z)(e,2),i=t[0],a=(t[1],()=>{var e=[];return i&&Object.keys(i).map((t=>{var a=i[t],n=a.color,r=a.id,o=void 0===r?"":r,s=a.color;"none"!==t&&(null!==n&&void 0!==n&&n.colorStops?e.push({type:"gradient",color:a,key:t,id:o,background:ML(n)}):("string"!==typeof s&&(s=j(s)),e.push({type:"color",color:a,key:t,id:o,background:s})))})),{data:e}});return 0===a().data.length?null:(0,Kg.jsx)(Kg.Fragment,{children:a().data.map((e=>{var t;return(0,Kg.jsx)("div",{className:Ure().basicRow,children:(0,Kg.jsx)("div",{className:Ure().basicRowContent,style:{flexWrap:"wrap"},children:(0,Kg.jsx)("div",{className:Ure().chooseColorGradientWrap,children:(0,Kg.jsx)("div",{className:Ure().chooseColorGradient,style:{background:null===e||void 0===e?void 0:e.background},children:null===e||void 0===e||null===(t=e.color)||void 0===t?void 0:t.background})})})},e.key)}))})},Xre=(0,hp.Pi)(Gre),qre=i(58023),Hre=i.n(qre),Yre=()=>{var e=O_(),t=e.fill;if(!t)return null;var i=t.colorStops?ML(t):j(t);return(0,Kg.jsx)("div",{className:Hre().basicRow,children:(0,Kg.jsx)("div",{className:Hre().basicRowContent,style:{flexWrap:"wrap"},children:(0,Kg.jsx)("div",{className:Hre().chooseColorGradientWrap,children:(0,Kg.jsx)("div",{className:Hre().chooseColorGradient,style:{background:i}})})})})},Kre=(0,hp.Pi)(Yre),Qre=i(41593),Jre=i.n(Qre),$re=e=>{var t=e.className,i=(0,yp.Z)(e,["className"]),a=ij(),n=a.textBackground;return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:hb()(Jre().fontBackground,t)},i),{},{children:(0,Kg.jsxs)(xF.Z,{title:"\u6587\u5b57\u5e95\u8272",children:[(0,Kg.jsx)("div",{className:Jre().colorPro,children:(0,Kg.jsx)(iP,{type:"beijingtianchong"})}),null!==n&&void 0!==n&&n.enabled?(0,Kg.jsx)("div",{className:Jre().colorProRow,children:(0,Kg.jsx)("div",{style:{backgroundColor:(null===n||void 0===n?void 0:n.color)&&w(null===n||void 0===n?void 0:n.color,null===n||void 0===n?void 0:n.opacity)},className:Jre().choosedColor})}):(0,Kg.jsx)("div",{className:Jre().icon})]})}))},eoe=(0,hp.Pi)($re),toe=i(46468),ioe=i.n(toe),aoe=e=>{var t=e.value,i=e.changeColor;return(0,Kg.jsx)("div",{className:ioe().fontBgColor,children:(0,Kg.jsx)(tE.Z,{trigger:"click",placement:"bottom",getPopupContainer:()=>document.getElementById("xiudodo"),content:(0,Kg.jsx)(qL.AI,{disableAlpha:!0,color:t,onChange:e=>{i(e.rgb)},styles:{default:{hue:{cursor:"pointer"},picker:{cursor:"pointer",width:200}}}}),children:(0,Kg.jsx)("div",{className:ioe().fontBgItem,style:{backgroundColor:t&&j(t)}})})})},noe=aoe,roe=e=>{var t=e.min,i=e.max,a=e.title,n=e.value,r=e.formatter,o=e.step,s=e.onChange,l=(e.inputProps,(0,yp.Z)(e,["min","max","title","value","formatter","step","onChange","inputProps"]));return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:Jre().fontBgRow,children:[(0,Kg.jsx)("div",{className:Jre().fontBgRowName,children:a}),(0,Kg.jsx)("span",{style:{padding:"0 8px",border:"1px solid #e3e3e3",borderRadius:4,minWidth:45,textAlign:"center"},children:r?r(n):n})]}),(0,Kg.jsx)("div",{className:Jre().fontBgRow,children:(0,Kg.jsx)(TP.Z,(0,u.Z)({min:t,max:i,onChange:s,value:n,step:o},l))})]})},ooe=roe,soe=e=>{var t,i=ij(),a=i.textBackground,n=i.open,r=i.close,o=i.changeColor,s=i.changeOpacity,l=i.changeBorderRadius,c=(0,Nb.Z)((t=>{null===e||void 0===e||e.changedColor(t)}),{wait:200}),d=(c.run,e=>{e?n():r()});return(0,Kg.jsxs)("div",{className:Jre().fontBg,children:[(0,Kg.jsxs)("div",{className:Jre().fontBgRow,children:[(0,Kg.jsx)("div",{className:Jre().fontBgRowName,children:"\u5b57\u4f53\u80cc\u666f\u8272"}),(0,Kg.jsx)(KP.Z,{checked:null===a||void 0===a?void 0:a.enabled,onChange:d})]}),(0,Kg.jsxs)("div",{className:null!==a&&void 0!==a&&a.enabled?"":Jre().disabled,children:[(0,Kg.jsxs)("div",{className:Jre().fontBgRow,children:[(0,Kg.jsx)("div",{className:Jre().fontBgRowName,children:"\u989c\u8272"}),(0,Kg.jsx)(noe,{value:null===a||void 0===a?void 0:a.color,changeColor:e=>{Km("tool_text_backgtound_color"),o(e)}})]}),(0,Kg.jsx)(ooe,{title:"\u4e0d\u900f\u660e\u5ea6",step:1,formatter:e=>"".concat(parseInt(e),"%"),min:0,max:100,onChange:e=>{s(e)},onAfterChange:()=>{Km("tool_text_backgtound_color_opacity")},value:null!==(t=null===a||void 0===a?void 0:a.opacity)&&void 0!==t?t:50}),(0,Kg.jsx)(ooe,{title:"\u5706\u89d2",min:0,max:50,onChange:e=>{Dj(!0),l(e)},value:(null===a||void 0===a?void 0:a.borderRadius)||0,onAfterChange:()=>{Km("tool_text_backgtound_radius"),Dj(!1)},tooltipVisible:!1})]})]})},loe=(0,hp.Pi)(soe),coe=i(46121),doe=i.n(coe);function uoe(e){var t=e.className,i=(0,yp.Z)(e,["className"]),a=D_(),r=(0,n.Z)(a,1),o=r[0],s=Pw(),l=s.attribute,c=l.effectColorful,d=l.effectVariant,p=c||d;return(0,Kg.jsx)("div",(0,u.Z)((0,u.Z)({className:hb()(doe().fontColor,t)},i),{},{children:(0,Kg.jsxs)(xF.Z,{title:"\u6587\u5b57\u989c\u8272",children:[(0,Kg.jsx)("div",{className:doe().colorIcon,children:(0,Kg.jsx)(iP,{type:"zitiyanse"})}),o&&!p&&(0,Kg.jsx)("div",{style:{backgroundColor:o&&j(o)},className:doe().choosedColor})]})}))}var poe=uoe,voe=i(27216),moe=i.n(voe),hoe=e=>{var t=e.title,i=e.value,a=e.onChange,n=[(0,fb.Sx)("/svg/svgStrokes/dash0-0.svg"),(0,fb.Sx)("/svg/svgStrokes/dash0-1.svg"),(0,fb.Sx)("/svg/svgStrokes/dash0-2.svg"),(0,fb.Sx)("/svg/svgStrokes/dash1-1.svg"),(0,fb.Sx)("/svg/svgStrokes/dash1-2.svg"),(0,fb.Sx)("/svg/svgStrokes/dash2-1.svg"),(0,fb.Sx)("/svg/svgStrokes/dash2-2.svg")];return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsxs)("div",{className:moe().fontBgRow,children:[(0,Kg.jsx)("div",{className:moe().fontBgRowName,children:t}),(0,Kg.jsx)(LO.Z,{placeholder:"\u9009\u62e9\u8fb9\u6846\u6837\u5f0f",value:-1===i?void 0:i,onChange:e=>{a(e)},children:n.map(((e,t)=>(0,Kg.jsx)(LO.Z.Option,{value:t,children:(0,Kg.jsx)("img",{src:e,alt:"",style:{width:108}})},e)))})]})})},foe=hoe,goe=()=>{var e=aj(),t=e.svgStroke,i=e.changeColor,a=e.changeDashStyle,n=e.changeStrokeWidth,o=e.changeRadius,s=Pw(),l=(null===s||void 0===s?void 0:s.attribute)||{},c=l.width,d=l.height,u=(null===s||void 0===s?void 0:s.meta)||{},p=u.type,v=u.shapeType,m=(0,r.useMemo)((()=>Math.floor(Math.min(c,d)/2*.5)||50),[c,d]);return(0,Kg.jsx)("div",{className:moe().fontBg,children:(0,Kg.jsxs)("div",{children:[(0,Kg.jsxs)("div",{className:moe().fontBgRow,children:[(0,Kg.jsx)("div",{className:moe().fontBgRowName,children:"\u8fb9\u6846\u989c\u8272"}),(0,Kg.jsx)(noe,{value:null===t||void 0===t?void 0:t.stroke,changeColor:e=>{Km("tool_image_overturn_color"),i(e)}})]}),(0,Kg.jsx)(foe,{title:"\u8fb9\u6846\u6837\u5f0f",onChange:e=>{a(e),Km("tool_image_overturn_border")},value:null===t||void 0===t?void 0:t.strokeDashType}),(0,Kg.jsx)(cB,{label:"\u8fb9\u6846\u5bbd\u5ea6",value:null===t||void 0===t?void 0:t.strokeWidth,step:1,min:0,colon:!1,max:m,onChange:e=>{n(e)},onAfterChange:()=>Km("tool_image_overturn_border_width"),inputNumber:!0,tooltipVisible:!1}),"svgPath"===p&&"rect"===v&&(0,Kg.jsx)(cB,{label:"\u5706\u89d2",value:(null===t||void 0===t?void 0:t.radius)||0,step:1,min:0,colon:!1,max:500,onChange:e=>{o(e)},onAfterChange:()=>{Km("FreeformDraw3")},inputNumber:!0,tooltipVisible:!1})]})})},xoe=(0,hp.Pi)(goe),yoe=e=>{var t=e.className,i=void 0===t?"":t,a=((0,yp.Z)(e,["className"]),aj()),n=a.svgStroke;return n?(0,Kg.jsx)(MR,{placement:"bottomLeft",trigger:"click",content:(0,Kg.jsx)(xoe,{}),children:(0,Kg.jsx)("div",{className:hb()(moe().fontBackgroundWrap,i),children:(0,Kg.jsxs)("div",{className:hb()(moe().fontBackground,i),children:[(0,Kg.jsx)("div",{className:moe().colorPro,children:(0,Kg.jsx)(iP,{type:"biankuangyanse"})}),(0,Kg.jsx)("div",{className:moe().colorProRow,children:(0,Kg.jsx)("div",{style:{backgroundColor:j(null===n||void 0===n?void 0:n.stroke)},className:moe().choosedColor})})]})})}):null},boe=(0,hp.Pi)(yoe),_oe=i(61496),joe=i.n(_oe),woe=[{key:"LT",iconRotate:225,styles:{left:4,top:4}},{key:"T",iconRotate:270,styles:{top:4,left:11}},{key:"RT",iconRotate:315,styles:{right:4,top:4}},{key:"L",iconRotate:180,styles:{left:4,top:7}},{key:"C",iconRotate:0,iconType:"icontuoyuanxing",styles:{left:15,top:11,fontSize:6}},{key:"R",iconRotate:0,styles:{right:4,top:7}},{key:"LB",iconRotate:135,styles:{left:4,bottom:4}},{key:"B",iconRotate:90,styles:{bottom:4,left:11}},{key:"RB",iconRotate:45,styles:{right:4,bottom:4}}],koe=10,Toe=()=>{var e=e=>{var t,i=xu();if(i){i.parent&&(i=i.parent);var a=Kb(),n=a.width,r=a.height,o=a.scale,s=koe/o,l=null===(t=i)||void 0===t?void 0:t.attribute,c=l.width,d=l.height,u={posX:(n-c)/2,posY:(r-d)/2},p={textAlign:"center"};e.split("").forEach((e=>{switch(e){case"L":u.posX=s,p.textAlign="left";break;case"R":u.posX=n-c-s,p.textAlign="right";break;case"T":u.posY=s;break;case"B":u.posY=r-d-s;break;default:break}})),Ud(i,{transform:u,attribute:p}),Km("tool_assetPosition")}};return(0,Kg.jsx)("div",{className:joe().AssetPosition,children:woe.map((t=>(0,Kg.jsx)("div",{className:joe().item,onClick:()=>e(t.key),children:(0,Kg.jsx)(iP,{style:(0,u.Z)({transform:"rotate(".concat(t.iconRotate,"deg)")},t.styles),className:joe().icon,type:t.iconType||"iconfangxiang"})},t.key)))})},Zoe=Toe;function Coe(e){var t=e.data,i=e.throttledWidth,a=e.type,o=t.key,s=t.icon,l=t.iconStyle,c=t.name,d=t.show,u=t.render,p=t.className,v=t.selected,m=t.active,h=t.hover,f=t.toolTip,g=t.onClick,x=t.openSidePanel,y=t.Dropdown,b=t.isDivider,_=t.toolItemStyle,j=t.dividerStyle,w=(0,r.useState)(!1),k=(0,n.Z)(w,2),T=k[0],Z=k[1],C=Gf(),N=C.open,S=C.close,I=C.value.panelKey,A=Pw(),P=Lj(),M=P.inReplacing,E=(P.startReplace,P.endReplace),L=K_(),D=L.inClipping,R=(L.startClip,L.endClip),z=du(),F=z.inMask,O=z.endMask,B=(0,r.useState)(!d),W=(0,n.Z)(B,2),V=W[0],U=W[1],G=()=>{var e;S(),y&&Z(!T);var t=["kt001","kt002"].indexOf("key")>-1?{action_label:null!==A&&void 0!==A&&null!==(e=A.attribute)&&void 0!==e&&e.isUser?"userUp":"asset"}:{};Km("tool_".concat(o).concat(null!==A&&void 0!==A&&A.meta.type?"_".concat(null===A||void 0===A?void 0:A.meta.type):""),t),g&&g(),x&&N("tool-".concat(o)),D&&(R(),S()),F&&(O(),S()),M&&E()};return(0,r.useEffect)((()=>{T&&Z(!1)}),[null===A||void 0===A?void 0:A.meta.id]),(0,r.useEffect)((()=>{null!==t&&void 0!==t&&t.minWidth&&"text"===a&&i<=(null===t||void 0===t?void 0:t.minWidth)?U(!0):U(!d)}),[i,d,null===t||void 0===t?void 0:t.minWidth,a]),(0,Kg.jsx)(tE.Z,{trigger:"click",placement:"bottomLeft",visible:T,destroyTooltipOnHide:!0,content:y?(0,Kg.jsx)("div",{children:(0,Kg.jsx)(y,{})}):(0,Kg.jsx)(Kg.Fragment,{}),getPopupContainer:e=>e,onVisibleChange:e=>{e||Z(e)},children:(0,Kg.jsx)(xF.Z,{title:f,placement:"top",overlayClassName:"toolItemTooltip",getPopupContainer:e=>e,children:b?"text"===a&&(0,Kg.jsx)(IR.Z,{type:"vertical",style:j,className:"xiudd-tool-item-divider"}):(0,Kg.jsx)("div",{style:_,hidden:V,className:hb()("xiudd-tool-item",p,{"xiudd-tool-item-hover":h,"xiudd-tool-item-active":v||m&&I==="tool-".concat(o)}),onClick:()=>G(),children:u?d&&u({text:c,item:t,className:hb()(p,{"xiudd-tool-item-active":v||m&&I==="tool-".concat(o)})}):(0,Kg.jsxs)(Kg.Fragment,{children:[s&&(0,Kg.jsx)(iP,{className:hb()("xiudd-tool-item-icon"),type:s,style:l||(c?{fontSize:"18px",marginRight:"5px"}:{})}),c&&(0,Kg.jsx)("span",{className:"xiudd-tool-item-name",children:c})]})})})})}var Noe=i(79508),Soe=i(16334),Ioe=i.n(Soe);function Aoe(){var e=iK(),t=(e.bindOk,e.applyAll),i=e.backgroundModerate,a=e.backgroundFill,o=e.updateSize,s=e.backSize,l=e.backgroundAsset,c=Uf(),d=c.endCliping,u=(0,r.useState)(),p=(0,n.Z)(u,2),v=(p[0],p[1]);(0,r.useEffect)((()=>{v(l)}),[]);var m=()=>{d()},h=()=>{Km("background_003"),i()},f=()=>{Km("background_004"),a()},g=()=>{Km("background_005"),t((()=>{xp.default.success({content:"\u66ff\u6362\u6210\u529f",top:100,duration:3,maxCount:1})}))},x=(0,Zm.Z)((()=>{Km("background_001")}),{wait:500}),y=x.run;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:Ioe().left,children:[(0,Kg.jsx)(cB,{value:s,onChange:e=>{y(),o(e/100)},inputNumber:!0,style:{width:216},tooltipVisible:!1,min:5,max:200,step:1}),(0,Kg.jsx)("div",{className:Ioe().itemTxt,onClick:h,children:"\u9002\u4e2d"}),(0,Kg.jsx)("div",{className:Ioe().itemTxt,onClick:f,children:"\u586b\u5145"}),(0,Kg.jsx)("div",{className:Ioe().itemTxt1,onClick:g,children:"\u80cc\u666f\u5e94\u7528\u6240\u6709\u573a\u666f"})]}),(0,Kg.jsx)("div",{className:Ioe().right,children:(0,Kg.jsxs)("div",{className:Ioe().rightItem,onClick:m,children:[(0,Kg.jsx)(Noe.Z,{className:Ioe().rightItemIcon}),"\u786e\u8ba4"]})})]})}var Poe=Aoe,Moe=(0,hp.Pi)((()=>{var e=Lw(),t=e.template,i=vw(),a=i.templates,o=(null===t||void 0===t?void 0:t.videoInfo)||{},s=o.allAnimationTime,l=void 0===s?0:s,c=o.allAnimationTimeBySpeed,d=o.speed,u=void 0===d?1:d,p=(0,r.useState)(1),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useState)(!1),g=(0,n.Z)(f,2),x=g[0],y=g[1],b=(0,r.useState)(0),_=(0,n.Z)(b,2),j=_[0],w=_[1];function k(e){var t=0,i=[];return a.forEach((a=>{var n=a.videoInfo.allAnimationTime*(1/e);n>wd&&(t+=n-a.videoInfo.allAnimationTimeBySpeed,i.push(a))})),[t,i]}function T(e,t){var i=Ow();e.forEach((e=>{kw(t,e)})),w(e.length),setTimeout((()=>{Lb(iw()[i][0],!1)}))}function Z(e){var i=l*(1/e);if(Km("speed_001"),i<wd)return h(u),void xp.default.info("\u62b1\u6b49\uff0c\u56e0\u4e3a\u8bbe\u7f6e\u500d\u901f\u540e\u89c6\u9891\u65f6\u957f\u5c0f\u4e8e".concat(wd/1e3,"\u79d2\uff0c\u65e0\u6cd5\u4f7f\u7528\u500d\u901f\u529f\u80fd"));var a=i-c,r=[t];if(x){var o=k(e),s=(0,n.Z)(o,2);a=s[0],r=s[1]}lh({incrementalTime:a})?h(u):T(r,e)}return(0,r.useEffect)((()=>{h(u)}),[u]),(0,Kg.jsxs)("div",{className:"speed-tool",children:[(0,Kg.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,Kg.jsx)("span",{children:"\u500d\u901f"}),(0,Kg.jsxs)("span",{className:"inputSpeed",children:[m," x"]})]}),(0,Kg.jsx)(TP.Z,{tooltipVisible:!1,defaultValue:u,step:.1,min:.5,max:2.5,value:m,onChange:h,onAfterChange:Z,marks:{.5:"0.5x",1:"",1.5:"",2:"",2.5:"2.5x"}}),a.length>1&&(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(WP.Z,{checked:x,onChange:e=>{Km("speed_002");var t=e.target.checked;if(t){Km("speed_002");var i=k(m),a=(0,n.Z)(i,2),r=a[0],o=a[1];lh({incrementalTime:r})||(y(t),T(o,m))}else y(t)},children:"\u9002\u7528\u4e8e\u5176\u4ed6\u7684\u7247\u6bb5"}),x&&(0,Kg.jsxs)("div",{className:"applyAll",children:["\u5df2\u6709\u300c",j,"\u300d\u4e2a\u7247\u6bb5\u5e94\u7528\u5f53\u524d\u500d\u901f."]})]})]})}));function Eoe(e){var t=e.data,i=e.throttledWidth,a=e.type,o=e.commonShow,s=(0,r.useState)([]),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=(0,r.useState)(!0),v=(0,n.Z)(p,2),m=v[0],h=v[1],f=(0,r.useRef)(null),g=()=>{var e=null===t||void 0===t?void 0:t.filter((e=>i<=(null===e||void 0===e?void 0:e.minWidth)&&(null===e||void 0===e?void 0:e.show)));(null===e||void 0===e?void 0:e.length)>0&&"text"===a?h(!1):h(!0),d(e)},x=()=>(0,Kg.jsx)("div",{className:"toolMoreContent",children:null===c||void 0===c?void 0:c.map((e=>(0,Kg.jsx)(Coe,{data:(0,u.Z)((0,u.Z)({},e),{},{minWidth:0}),type:a,throttledWidth:i},e.key)))});return(0,r.useEffect)((()=>{g()}),[i,a,o]),(0,Kg.jsxs)(Kg.Fragment,{children:[!m&&(0,Kg.jsx)(IR.Z,{type:"vertical",style:{margin:"auto",height:"25px"}}),(0,Kg.jsx)(tE.Z,{trigger:"click",placement:"bottomLeft",destroyTooltipOnHide:!0,content:x,getPopupContainer:e=>e,children:(0,Kg.jsx)(xF.Z,{title:"\u66f4\u591a",placement:"top",children:(0,Kg.jsx)("div",{className:"toolMore",hidden:m,ref:f,children:(0,Kg.jsx)(iP,{className:"toolMoreIcon",type:"icongengduo_tianchong"})})})})]})}var Loe=Eoe,Doe=(0,hp.Pi)((e=>{var t=sj(),i=t.setVolume,a=t.setVoiced,n=t.value,r=(null===n||void 0===n?void 0:n.attribute)||{},o=r.volume,s=r.voiced;return(0,Kg.jsx)(cB,{colon:!1,label:(0,Kg.jsx)("span",{style:{fontSize:18,cursor:"pointer"},onClick:()=>{a(!s),o||i(100)},children:(0,Kg.jsx)(iP,{className:"xiuIcon font-18",type:s?"volume-small":"volume-mute"})}),value:s?o:0,onChange:e=>{i(e)},inputNumber:!0,style:{width:336,padding:"12px 18px"},tooltipVisible:!1})})),Roe=i(99335),zoe=i.n(Roe),Foe=e=>{var t=e.asset,i=e.resId,a=e.u_file_id,o=void 0===a?"":a,s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=(0,r.useState)(0),p=(0,n.Z)(u,2),v=p[0],m=p[1],h=sf(),f=gj(),g=f.value,x=f.setMattingPic,y=f.clearMattingPic,b=bf(),_=oA(),j=vj(t),w=(0,n.Z)(j,1),k=w[0],T=CJ(),Z=T.updateCouponStatus,C=(0,DI.ZP)(aB,{manual:!0,pollingInterval:2e3,pollingWhenHidden:!1,onSuccess:(e,i)=>{var a=e[0],n=a.output_url,r=a.file_id,o=a.scan_flag,s=a.step,l=a.source_id;if(3==o||"error"===s)return S(),pj(t,!1),void xp.default.success("\u62a0\u56fe\u5931\u8d25");"success"===s&&(x(t,{output_url:n,file_id:r,source_id:l}),pj(t,!1),S(),xp.default.success("\u62a0\u56fe\u6210\u529f"))},onError:e=>{xp.default.error(e.message),pj(t,!1),S()}}),N=C.run,S=C.cancel,I=(0,DI.ZP)(nB,{manual:!0,onSuccess:(e,t)=>{var i=e.id;N(i)},onError:e=>{xp.default.error(e.message),pj(t,!1)}}),A=I.run,P=I.cancel,M=e=>{_.id<0?b.showLoginModal():e?y(t):iB().then((e=>{var t,a,n=null===(t=e.data)||void 0===t?void 0:t.today_value,r=null===(a=e.data)||void 0===a?void 0:a.is_vip;r&&-1===n||n>=1?(m(n),d(!0)):(Z({limitType:"matting"}),h.open(),nh("KTLimited",{resId:i,vip_type:_.vip_type}))}))},E=()=>{var e;Km("tool_kt003",{action_label:null!==t&&void 0!==t&&null!==(e=t.attribute)&&void 0!==e&&e.isUser?"userUp":"asset"}),d(!1),pj(t,!0),i&&A(i,o)};return(0,r.useEffect)((()=>()=>{P(),S(),pj(t,!1)}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{onClick:e=>e.stopPropagation(),children:(0,Kg.jsx)(QJ,{visible:c,width:380,onCancel:()=>{d(!1)},centered:!0,footer:null,children:(0,Kg.jsxs)("div",{className:zoe().mattingModal,children:[(0,Kg.jsxs)("div",{className:zoe().mattingModalTitle,children:[(0,Kg.jsxs)("span",{children:["\u4eca\u65e5\u5269\u4f59\u62a0\u56fe\u6b21\u6570\uff1a",(0,Kg.jsx)("span",{className:zoe().spanSpan,children:v})," \u6b21"]}),(0,Kg.jsxs)("span",{children:["\u672c\u6b21\u6d88\u8017\uff1a",(0,Kg.jsx)("span",{className:zoe().spanSpan,children:1})," \u6b21"]})]}),(0,Kg.jsx)("div",{className:zoe().mattingModalBtn,onClick:E,children:"\u786e\u8ba4\u62a0\u56fe"})]})})}),(0,Kg.jsxs)("div",{onClick:()=>{k||M(g)},style:k?{cursor:"not-allowed"}:{},className:zoe().mattinBtn,children:[(0,Kg.jsx)(iP,{type:"koutu",className:zoe().mattinBtnIcon}),g?"\u53d6\u6d88\u62a0\u56fe":"\u62a0\u56fe"]})]})},Ooe=(0,hp.Pi)(Foe),Boe=(0,hp.Pi)((()=>{var e,t,i,a,o,s,l,c=zv(),d=c.activeAudio,p=(c.inCliping,Pw()),v=Uf(),m=v.backgroundControl,h=v.startCliping,f=rf(),x=f.value,y=f.open,b=f.close,_=Kf(),j=(0,n.Z)(_,2),w=j[1],k=Xf(),T=k.open,Z=nM(),C=Z.isPlaying,N=L_(),S=(0,n.Z)(N,2),I=S[0],A=S[1],P=k_(),M=(0,n.Z)(P,2),E=M[0],L=M[1],D=T_(),R=(0,n.Z)(D,2),z=R[0],F=R[1],O=Gq(),B=O.handleRemoveAsset,W=NJ(),V=W.checkLoginStatus,U=Lj(),G=U.inReplacing,X=U.startReplace,q=(U.endReplace,du()),H=q.inMask,Y=q.startMask,K=q.cancelMask,Q=q.endMask,J=q.resetMask,$=iK(),ee=$.backgroundDel,te=$.backSize,ie=$.backgroundAsset,ae=af(),ne=ae.open,re=p&&$t(p),oe=p?Kh(p):void 0,se=!d&&!p&&ie&&!ie.meta.locked,le=ri(p),ce=null===oe||void 0===oe||null===(e=oe.meta)||void 0===e?void 0:e.type,de=gj(),ue=de.value,pe=(0,Cm.Z)(document.querySelector("#xiudodo-topBar-content")),ve=pe.width,me=(0,cre.Z)(ve,{wait:50})||0,he=ai(p)&&(null===p||void 0===p?void 0:p.assets)&&(null===p||void 0===p?void 0:p.assets.length)>0,fe=le?1e3:1200,ge=uu(),xe=ge.start,ye=bj(),be=ye.start,_e=_j(),je=_e.start,we=[{key:ue?"kt002":"kt001",hover:!0,show:re&&["image","pic"].includes(ce||"")&&!H,render(e){var t,i;return(0,Kg.jsx)(Ooe,(0,u.Z)((0,u.Z)({},e),{},{asset:p,resId:null===oe||void 0===oe||null===(t=oe.attribute)||void 0===t?void 0:t.resId,u_file_id:null===oe||void 0===oe||null===(i=oe.attribute)||void 0===i?void 0:i.ufsId}),"matting")}},{key:"position",name:"\u8c03\u6574\u4f4d\u7f6e",toolTip:"\u5feb\u901f\u8bbe\u7f6e\u5143\u7d20\u4f4d\u7f6e",show:re&&!(null!==p&&void 0!==p&&p.meta.isOverlay),hover:!0,minWidth:fe-200,Dropdown:Zoe},{key:"isDivider1",isDivider:!0},{key:"assetLayer",toolTip:"\u56fe\u5c42",icon:"tucengbeifen",show:!0,hover:!0,onClick:ne},{key:"assetLayerZIndex",icon:"tucengshunxu",toolTip:"\u56fe\u5c42\u987a\u5e8f",show:re&&!ii(p),Dropdown:Lre,hover:!0,minWidth:fe-250},{key:"asset_opacity",toolTip:"\u4e0d\u900f\u660e\u5ea6",hover:!0,show:re&&!H&&!["__module"].includes(String(null===p||void 0===p?void 0:p.meta.type)),render(e){return(0,Kg.jsx)(dre,(0,u.Z)({},e),"asset-opacity")}},{key:"asset_copy",toolTip:"\u62f7\u8d1d ".concat(Ld.noCopyPaste),icon:"copy",hover:!0,show:re&&!ii(p)&&!H,minWidth:fe-300,onClick(e){Gh({asset:p})}},{key:"isDivider2",isDivider:!0},{key:"t_b_opacity",toolTip:"\u8bbe\u7f6e\u80cc\u666f\u4e0d\u900f\u660e\u5ea6",hover:!0,show:se,render(e){return(0,Kg.jsx)(dre,(0,u.Z)({isBackground:!0},e),"asset-opacity")}},{key:"video-volume",toolTip:"\u97f3\u91cf",hover:!0,show:re&&!H&&(["videoE","video"].includes(null===p||void 0===p?void 0:p.meta.type)||"mask"===(null===p||void 0===p?void 0:p.meta.type)&&p.assets&&p.assets.length>0&&["videoE","video"].includes(null===(t=p.assets[0])||void 0===t?void 0:t.meta.type)),render(e){return(0,Kg.jsx)(Dre,(0,u.Z)({},e),"video-volume")}},{key:"asset-lock",toolTip:p&&p.meta.locked?"\u89e3\u9501":"\u9501\u5b9a",hover:!0,icon:p&&p.meta.locked?"lock":"unlock",show:!ii(p)&&!H&&p,onClick(){xg(p)}},{key:"t_b_lock",toolTip:ie&&ie.meta.locked?"\u89e3\u9501\u80cc\u666f":"\u9501\u5b9a\u80cc\u666f",hover:!0,icon:ie&&ie.meta.locked?"lock":"unlock",show:!p&&!d&&ie,onClick(){xg(ie)}},{key:"t_b_volume",toolTip:"\u80cc\u666f\u89c6\u9891\u97f3\u91cf",hover:!0,icon:null!==ie&&void 0!==ie&&ie.attribute.voiced?"volume-small":"volume-mute",show:se&&["video","videoE"].includes(ie.meta.type),Dropdown:Doe},{key:"asset_delete",toolTip:"\u5220\u9664 ".concat(Ld.delete),hover:!0,icon:"delete",show:re&&!(!p||ii(p)||H)||(null===p||void 0===p?void 0:p.meta.isBackground),onClick:()=>B(p)},{key:"t_b_delete",toolTip:"\u5220\u9664\u80cc\u666f",hover:!0,icon:"delete",show:se,onClick:()=>{ee()}}],ke=[{key:"linear-animation",name:"\u8def\u5f84\u52a8\u753b",toolTip:"\u8def\u5f84\u52a8\u753b",icon:"icontime",hover:!0,show:!1,onClick(){xe()}},{key:"rotate-animation",name:"\u65cb\u8f6c\u52a8\u753b",toolTip:"\u65cb\u8f6c\u52a8\u753b",icon:"icontime",hover:!0,show:!1,onClick(){be()}},{key:"shake-animation",name:"\u6296\u52a8\u52a8\u753b",toolTip:"\u6296\u52a8\u52a8\u753b",icon:"icontime",hover:!0,show:!1,onClick(){je()}},{key:"t_b_size",name:"".concat(te,"%"),toolTip:"\u8bbe\u7f6e\u80cc\u666f\u5927\u5c0f",hover:!0,show:se,onClick(){Im(document.querySelector(".xiudodo-main")),setTimeout((()=>{h()}),100)}},{key:"template_background_color",name:"\u8bbe\u7f6e\u80cc\u666f\u989c\u8272",className:"showName",hover:!0,show:!p&&!d,openSidePanel:!0,render(e){return(0,Kg.jsx)(Are,(0,u.Z)({},e),"template_background_color")}},{key:"t_b_replace",className:"showName",name:"\u66ff\u6362\u80cc\u666f",toolTip:"\u66ff\u6362\u80cc\u666f",icon:"beijingtihuan",hover:!0,show:se,onClick:()=>{T("t_b_replace")}},{key:"t_b_add",name:"\u6dfb\u52a0\u80cc\u666f",toolTip:"\u6dfb\u52a0\u80cc\u666f",icon:"add-one",hover:!0,className:"showName",show:!p&&!d&&!ie,onClick:()=>T("t_b_add")},{key:"t_speed",name:"\u500d\u901f",toolTip:"\u8bbe\u7f6e\u89c6\u9891\u500d\u901f",hover:!0,icon:"beisu",show:!p,Dropdown:Moe},{key:"t_b_animation",icon:"donghua",name:"\u80cc\u666f\u52a8\u753b",toolTip:"\u8bbe\u7f6e\u80cc\u666f\u52a8\u753b",className:"showName",active:!0,hover:!0,openSidePanel:!0,show:se},{key:"fontFamily",name:"\u5b57\u4f53",show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),openSidePanel:!0,style:{height:"inherit",margin:"auto"},render(e){return(0,Kg.jsx)(pre,{},"fontFamily")}},{key:"fontSize",name:"\u5b57\u4f53\u5927\u5c0f",show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type)&&!le,className:"font-sizeWrap",render(e){return(0,Kg.jsx)(xre,(0,u.Z)((0,u.Z)({},e),{},{style:{height:30,margin:"auto",padding:0}}),"fontSize")}},{key:"fontWeight",toolTip:"\u52a0\u7c97",icon:"jiacu",hover:!0,active:!0,show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),selected:"bold"===E,toolItemStyle:{margin:"5px 1px 5px 4px"},onClick:()=>L("bold"===E?"normal":"bold")},{key:"fontStyle",toolTip:"\u503e\u659c",icon:"xieti",toolItemStyle:{margin:"5px 1px"},hover:!0,active:!0,show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),selected:"italic"===z,onClick:()=>F("italic"===z?"normal":"italic")},{key:"fontWritingMode",toolTip:"\u7ad6\u7248\u6587\u5b57",icon:"wenbenpailie",hover:!0,active:!0,toolItemStyle:{margin:"5px 1px"},show:!le&&re&&"text"===(null===p||void 0===p?void 0:p.meta.type),onClick:()=>A("horizontal-tb"===I?"vertical-rl":"horizontal-tb")},{key:"fontTypesetting",toolTip:"\u95f4\u8ddd/\u5bf9\u9f50",icon:"duiqi",hover:!0,toolItemStyle:{margin:"5px 1px"},show:!le&&re&&"text"===(null===p||void 0===p?void 0:p.meta.type),Dropdown:bre,minWidth:fe-50},{key:"isDivider3",isDivider:!0,dividerStyle:{marginLeft:"3px"}},{key:"fontColor",active:!0,hover:!0,show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),openSidePanel:!0,render(e){return(0,Kg.jsx)(poe,(0,u.Z)({},e),"fontColor")}},{key:"text_background_color",name:"\u6587\u5b57\u80cc\u666f",hover:!0,show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),Dropdown:loe,minWidth:fe,render(e){return(0,Kg.jsx)(eoe,(0,u.Z)({},e),"color")}},{key:"isDivider4",isDivider:!0},{key:"fontEffects",toolTip:"\u5b57\u4f53\u7279\u6548",name:"\u5b57\u4f53\u7279\u6548",active:!0,hover:!0,show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),openSidePanel:!0,minWidth:fe-150},{key:"text-AITool",toolTip:"\u4e3a\u5f53\u524d\u6587\u5b57\u6dfb\u52a0\u6717\u8bfb\u914d\u97f3",name:"\u6587\u672c\u6717\u8bfb",icon:"acoustic",hover:!0,show:re&&"text"===(null===p||void 0===p?void 0:p.meta.type),minWidth:fe-100,onClick(){Km("quick_bar_001"),y()}},{key:"svg-color",name:"svg\u989c\u8272\u8bbe\u7f6e",toolTip:"\u989c\u8272\u8bbe\u7f6e",hover:!0,show:re&&["SVG"].includes(null===p||void 0===p?void 0:p.meta.type),toolItemStyle:{padding:0},openSidePanel:!0,render(){return(0,Kg.jsx)(Xre,{})}},{key:"svg-path-color",name:"svg\u989c\u8272\u8bbe\u7f6e",toolTip:"\u989c\u8272\u8bbe\u7f6e",hover:!0,show:re&&["svgPath"].includes(null===p||void 0===p?void 0:p.meta.type)&&"line"!==(null===p||void 0===p?void 0:p.meta.shapeType),toolItemStyle:{padding:0},openSidePanel:!0,render(){return(0,Kg.jsx)(Kre,{})}},{key:"svg-stroke",name:"svg\u63cf\u8fb9",toolTip:"svg\u63cf\u8fb9",hover:!0,show:re&&("SVG"===(null===p||void 0===p?void 0:p.meta.type)&&(null===(i=p.attribute)||void 0===i?void 0:i.svgStrokes)&&1===(null===(a=p.attribute)||void 0===a?void 0:a.svgStrokes.length)||"svgPath"===(null===p||void 0===p?void 0:p.meta.type)),render(e){return(0,r.createElement)(boe,(0,u.Z)((0,u.Z)({},e),{},{key:"svg-stroke"}))}},{key:"replace",icon:"beijingtihuan",name:"\u66ff\u6362",toolTip:"\u66ff\u6362",active:!0,hover:!0,selected:G,show:re&&!(null!==p&&void 0!==p&&p.meta.isOverlay)&&!H&&!["text","module","__module","mask","qrcode"].includes((null===p||void 0===p?void 0:p.meta.type)||""),onClick:()=>{V()||X()}},{key:"replaceMask",icon:he?"beijingtihuan":"add-one",name:he?"\u66ff\u6362":"\u6dfb\u52a0",toolTip:he?"\u66ff\u6362":"\u6dfb\u52a0",active:!0,hover:!0,selected:G,show:re&&!H&&ai(p),onClick:()=>{V()||X()}},{key:"image-overturn",name:"\u7ffb\u8f6c",icon:"switch-contrast",toolTip:"\u7ffb\u8f6c",hover:!0,show:re&&["image","pic","lottie","SVG","mask","svgPath","videoE"].includes((null===p||void 0===p?void 0:p.meta.type)||"")&&!H,Dropdown:jre},{key:"t_b_overturn",name:"\u80cc\u666f\u7ffb\u8f6c",icon:"switch-contrast",toolTip:"\u80cc\u666f\u7ffb\u8f6c",className:"showName",hover:!0,show:se,Dropdown:()=>(0,Kg.jsx)(jre,{isBackground:!0})},{key:"mask-clip",name:"\u88c1\u526a",toolTip:"\u88c1\u526a",icon:"tailoring",hover:!0,show:!le&&re&&!H&&!(null!==p&&void 0!==p&&p.meta.isOverlay)&&p&&(g.includes(null===p||void 0===p?void 0:p.meta.type)||"mask"===(null===p||void 0===p?void 0:p.meta.type)&&(null===(o=p.assets)||void 0===o?void 0:o.length)>0),onClick:()=>{Y()},remark:"\u8499\u7248\u88c1\u526a"},{key:"asset-mask-clip",name:"\u8499\u7248\u88c1\u526a",show:!le&&H&&p&&(g.includes(null===p||void 0===p?void 0:p.meta.type)||"mask"===(null===p||void 0===p?void 0:p.meta.type)&&(null===(s=p.assets)||void 0===s?void 0:s.length)>0),render(e){return(0,Kg.jsx)(Wre,(0,u.Z)({},e),"asset-mask-clip")}},{key:"asset-mask-cancel",name:"\u53d6\u6d88",toolTip:"\u53d6\u6d88",show:H,hover:!0,icon:"close-small",onClick(){K()}},{key:"asset-mask-reset",name:"\u91cd\u7f6e",toolTip:"\u91cd\u7f6e",show:H,hover:!0,icon:"zhongzhi",onClick(){J()}},{key:"asset-mask-ok",name:"\u786e\u5b9a",toolTip:"\u786e\u5b9a",show:H,icon:"check-small",hover:!0,onClick(){Q()}},{key:"animation",name:"\u52a8\u753b",toolTip:"\u52a8\u753b",active:!0,hover:!0,icon:"donghua",openSidePanel:!0,show:!le&&re&&!H&&Boolean(["image","pic","text","lottie","mask","SVG","videoE","svgPath"].includes((null===p||void 0===p?void 0:p.meta.type)||""))},{key:"qrcode",name:"\u4e8c\u7ef4\u7801\u8bbe\u7f6e",toolTip:"\u4e8c\u7ef4\u7801\u8bbe\u7f6e",show:re&&"qrcode"===(null===oe||void 0===oe?void 0:oe.meta.type),hover:!0,icon:"iconerweima",onClick(){w(!0)}},{key:"filters",name:"\u6ee4\u955c",toolTip:"\u56fe\u7247\u6ee4\u955c",active:!0,hover:!0,icon:"lvjing",openSidePanel:!0,show:!le&&re&&!H&&Boolean(["image","pic"].includes((null===oe||void 0===oe?void 0:oe.meta.type)||""))},{key:"filtersAdjust",name:"\u7f8e\u5316",toolTip:"\u56fe\u7247\u7f8e\u5316",active:!0,hover:!0,icon:"iconbeishu",openSidePanel:!0,show:!le&&re&&!H&&Boolean(["image","pic"].includes((null===oe||void 0===oe?void 0:oe.meta.type)||""))},{key:"shadow",name:"\u6295\u5f71",toolTip:"\u6295\u5f71",active:!0,hover:!0,icon:"huaban1-69j25b54",openSidePanel:!0,show:!le&&re&&!H&&!(null!==p&&void 0!==p&&p.meta.isOverlay)},{key:"asset_module_group",name:"\u7ec4\u5408",toolTip:"\u7ec4\u5408 ".concat(Ld.group),icon:"zuhe",hover:!0,show:ii(p)&&(null===p||void 0===p||null===(l=p.assets)||void 0===l?void 0:l.every((e=>!ti(e)))),onClick(){Fj()}},{key:"asset_module_ungroup",name:"\u62c6\u5206\u7ec4\u5408",toolTip:"\u62c6\u5206\u7ec4\u5408 ".concat(Ld.unGroup),icon:"chaifen",hover:!0,show:ti(p),onClick(){zj(p)}}];return(0,Kg.jsx)(Kg.Fragment,{children:!C&&(0,Kg.jsxs)(Kg.Fragment,{children:[m.inClipping?(0,Kg.jsx)(Poe,{}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"xiudd-tool-left",id:"xiudd-tool-left",children:[ke.map((e=>(0,Kg.jsx)(Coe,{data:e,type:null===p||void 0===p?void 0:p.meta.type,throttledWidth:me},e.key))),(0,Kg.jsx)(Loe,{data:[...ke,...we],throttledWidth:me,type:null===p||void 0===p?void 0:p.meta.type,commonShow:re})]}),(0,Kg.jsx)("div",{className:"xiudd-tool-right",id:"xiudd-tool-right",children:we.map((e=>(0,Kg.jsx)(Coe,{data:e,type:null===p||void 0===p?void 0:p.meta.type,throttledWidth:me},e.key)))})]}),x&&(0,Kg.jsx)(cte,{asset:p,onClose:b})]})})})),Woe=()=>{var e=nM(),t=e.isPlaying,i=e.pauseVideo,a=xu(),n=nf(),o=n.close;return(0,r.useEffect)((()=>{null!==a&&void 0!==a&&a.meta.id&&t&&i(),a&&Ov(),a||o()}),[a]),(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(Boe,{})})},Voe=(0,hp.Pi)(Woe),Uoe=()=>{var e=(0,r.useState)(0),t=(0,n.Z)(e,2),i=(t[0],t[1]),a=(0,Cm.Z)(document.querySelector(".xiudodo-topBar")),o=a.width,s=void 0===o?0:o,l=(0,Cm.Z)(document.querySelector(".xiudd-tool-left")),c=l.width,d=void 0===c?0:c,u=(0,Cm.Z)(document.querySelector(".xiudd-tool-right")),p=u.width,v=void 0===p?0:p,m=d+v;(0,r.useMemo)((()=>s<m||(i(0),!1)),[s,m]);return(0,Kg.jsxs)("div",{className:"xiudodo-topBar",onClick:Ph,children:[(0,Kg.jsx)(lre,{}),(0,Kg.jsx)("div",{className:"xiudodo-topBar-content",id:"xiudodo-topBar-content",children:(0,Kg.jsx)(Voe,{})})]})},Goe=Uoe,Xoe={"1080*1920":{ratio:.5625,size:{width:1080,height:1920}},"1080*1080":{ratio:1,size:{width:1080,height:1080}},"1920*1080":{ratio:1920/1080,size:{width:1920,height:1080}},"750*1000":{ratio:.75,size:{width:750,height:1e3}}};function qoe(e){var t,i=e.width/e.height,a={width:1080,height:1920};return Object.keys(Xoe).forEach((e=>{var n=Xoe[e],r=Math.abs(n.ratio-i);(void 0===t||r<t)&&(t=r,a=n.size)})),a}function Hoe(e,t){var i=e.width/e.height,a=t.width,n=a/i;return n>t.height&&(n=t.height,a=n*i),{width:a,height:n}}function Yoe(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=Cf(),i=t.openSidePanel,a=Ep(),n=a.update,o=Gp();function s(){Rq(),setTimeout((()=>{Up();var e=document.querySelector(".xiudodo-main");e&&Im(e)}))}var l=AK((e=>{var t=LA(e);if(window.__EDITOR_PERFORMANCE__.completed||(window.__EDITOR_PERFORMANCE__.user_template_get_ended=(new Date).getTime()),t.length>0){lj(e.assets),rw(t),tu(0);var i=Ik();if(null===i||void 0===i||!i.length){var a=zA(e);Mk(a);var n=FA(e);n&&Xk(n)}window.__EDITOR_PERFORMANCE__.completed||(window.__EDITOR_PERFORMANCE__.user_resorce_post_start=(new Date).getTime())}s()})),c=(0,DI.ZP)(VV,{manual:!0,onSuccess(e){if(e){var t=qoe(e),i=Hoe(e,t);n(t),dw({assets:[(0,u.Z)({type:"videoE",isBackground:!1,resId:e.gid,rt_url:e.url,rt_total_time:e.duration},i)],pageTime:Math.min(e.duration,jd),index:0,canvasSize:t}),s()}}});return(0,r.useEffect)((()=>{if(!Rw().length){var t=(0,_p.Z)(),a=t.template_version;if(e&&OA(),t.blankSize){var r=t.blankSize.split("*");cw(5e3),Lb(0,!1),n({width:Number(r[0]),height:Number(r[1])}),i({menu:"template"}),s()}else t.resourceId?c.run(t.resourceId):(l.run({picId:t.picId,upicId:t.upicId,shareId:null===t||void 0===t?void 0:t.shareId,template_version:a}),window.__EDITOR_PERFORMANCE__.completed||(window.__EDITOR_PERFORMANCE__.user_template_get_start=(new Date).getTime()))}}),[]),{loading:!o}}var Koe={count:0},Qoe=()=>{var e=rA(),t=(0,r.useState)(!1),i=(0,n.Z)(t,2),a=i[0],o=i[1],s=(0,r.useState)(!1),l=(0,n.Z)(s,2),c=l[0],d=l[1],u=yf(),p=u.loginAlert,v=u.showReLogin,m=(u.closeReLoginTips,u.loopRun),h=u.reLoginTips,f=u.stopLoop,g=u.closeLoginAlert,x=u.openLoginAlert,y=(0,DI.ZP)(aP,{manual:!0,pollingInterval:5e3,onSuccess:t=>{e(t),o(!0),Koe.count+=1,t.id>0?g():h||(a?p||v():x(),f(),y.cancel())},onError:e=>{console.log(e)}});(0,r.useEffect)((()=>{if(c)throw new Error("userinfo in dead loop,loopCount:".concat(Koe.count))}),[c]),(0,r.useEffect)((()=>{m?y.run():y.cancel()}),[m]),(0,r.useEffect)((()=>{var e=setInterval((()=>{Koe.count>20?(Koe.count=0,d(!0)):Koe.count=0}),3e4);return()=>{clearTimeout(e)}}),[])};function Joe(e){e.src;return(0,Kg.jsx)("div",{className:"bottom-layer-music",children:(0,Kg.jsx)("div",{className:"inner"})})}var $oe={position:"fixed",pointerEvents:"none",zIndex:9999,left:0,top:0,width:"100%",height:"100%"};function ese(){var e=(0,xP.f)((e=>({item:e.getItem(),itemType:e.getItemType(),initialOffset:e.getInitialSourceClientOffset(),currentOffset:e.getSourceClientOffset(),isDragging:e.isDragging()}))),t=(e.itemType,e.isDragging),i=e.item,a=e.initialOffset,n=e.currentOffset,o=(0,r.useMemo)((()=>{if(!a||!n||!i)return{display:"block"};var e=n.x,t=n.y,r="translate(".concat(e,"px,").concat(t,"px)");return{transform:r,WebkitTransform:r}}),[n]);return(0,Kg.jsx)(Kg.Fragment,{children:t?(0,Kg.jsx)("div",{style:(0,u.Z)({},$oe),children:(0,Kg.jsx)("div",{style:o,children:(0,Kg.jsx)(Joe,{data:i})})}):null})}function tse(){var e=(0,xP.f)((e=>({item:e.getItem(),itemType:e.getItemType()}))),t=e.itemType;e.item;return fP!==t?null:(0,Kg.jsx)(ese,{})}var ise=()=>{var e=Jf(),t=e.visible,i=e.close;return(0,Kg.jsx)(nA.Z,{title:null,visible:t,onCancel:i,keyboard:!1,centered:!0,maskClosable:!0,cancelText:null,width:511,footer:null,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsxs)("div",{className:"paste-tip",children:[(0,Kg.jsx)("div",{className:"paste-tip-title",children:"\u7f16\u8f91\u5668\u53f3\u952e\u83dc\u5355\u529f\u80fd\u88ab\u6d4f\u89c8\u5668\u9ed8\u8ba4\u7981\u6b62\uff0c\u4f60\u53ef\u4ee5"}),(0,Kg.jsx)("div",{className:"paste-tip-title2",children:"\u6d4f\u89c8\u5668\u89e3\u9664\u7981\u6b62\u8bfb\u53d6\u526a\u5207\u677f\uff0c \u65b9\u6cd5\u5982\u4e0b\uff1a"}),(0,Kg.jsx)("div",{className:"paste-tip-image",children:(0,Kg.jsx)("img",{src:(0,fb.Sx)("/image/help/pasteTip.png"),alt:"\u63d0\u793a"})}),(0,Kg.jsx)(CS.Z,{className:"paste-tip-button",type:"primary",onClick:i,children:"\u77e5\u9053\u4e86"})]})})},ase=ise,nse=i(87246),rse=i.n(nse),ose=i(30700),sse=i.n(ose),lse=e=>{var t=e.active,i=e.style,a=e.onClick,n=void 0===a?()=>{}:a,r=e.onMouseDown,o=void 0===r?()=>{}:r,s=e.children,l=e.hiddenContent,c=e.showContent;return(0,Kg.jsxs)("div",{className:hb()(sse().Card,{[sse().active]:t}),style:i,onClick:n,onMouseDown:o,children:[s,(0,Kg.jsx)("div",{className:sse().hidden,children:l}),(0,Kg.jsx)("div",{className:sse().show,children:c})]})};lse.defaultProps={style:void 0,onClick:()=>{}};var cse=(0,hp.Pi)(lse),dse=()=>{var e=Mi(),t=e.width,i=e.height,a=_h(),n=Rw(),r=Bw(),o=Bb(),s=o.setCurrentTime,l=Ep(),c=(l.value,"h"===a?140:210),d={width:c,height:c*(i/t)},u=e=>{tu(e),s(0)};return(0,Kg.jsx)("div",{className:rse().Parts,children:n.map(((e,t)=>{var i=cG(e.videoInfo.allAnimationTimeBySpeed),a=bh(e),n=a.copy,o=()=>{n(),Km("concise6")};return(0,Kg.jsx)(cse,{active:(null===r||void 0===r?void 0:r.id)===e.id,style:d,onClick:()=>{u(t)},hiddenContent:(0,Kg.jsxs)("div",{className:rse().operation,children:[(0,Kg.jsx)(xF.Z,{title:"\u590d\u5236\u7247\u6bb5",children:(0,Kg.jsx)("div",{className:rse().copy,onClick:o,children:(0,Kg.jsx)(iP,{type:"iconfuzhi1"})})}),(0,Kg.jsx)(xF.Z,{title:"\u5220\u9664\u7247\u6bb5",children:(0,Kg.jsx)("div",{className:rse().delete,onClick:t=>{Ph(t),hh(e),Km("concise7")},children:(0,Kg.jsx)(iP,{type:"iconshanchu"})})})]}),showContent:(0,Kg.jsxs)("div",{className:rse().duration,children:[i.m,":",i.s]}),children:(0,Kg.jsx)("div",{className:rse().cover,style:{backgroundImage:"url(".concat(e.template.poster,")")}})},e.id)}))})},use=(0,hp.Pi)(dse),pse=i(39287),vse=i.n(pse),mse=i(59353),hse=i.n(mse),fse=()=>{var e=Xf(),t=e.open,i=nM(),a=i.pauseVideo,n=yh(),r=n.hasEmpty,o=Rw(),s=Ik(),l=s.filter((e=>!(2===e.rt_sourceType&&2===e.type))),c=Gk(),d=Tv.resAssets,u=1===o.length&&r,p=d.filter((e=>e.replaced)),v=()=>{t("replace-batch"),a(),Km("concise1")},m=()=>{t("replace-audio"),a(),Km("concise2")};return(0,Kg.jsxs)("div",{className:hse().Header,children:[(0,Kg.jsxs)("div",{className:hse().left,style:{display:"none"},children:[(0,Kg.jsx)("div",{children:"\u5168\u6a21\u677f\u5df2\u66ff\u6362\u56fe\u7247/\u89c6\u9891"}),(0,Kg.jsx)(tM.Z,{className:hse().progress,percent:p.length/d.length*100,showInfo:!1}),(0,Kg.jsxs)("div",{className:hse().progressText,children:[(0,Kg.jsx)("span",{children:p.length}),"/",d.length]}),(0,Kg.jsx)(CS.Z,{disabled:p.length===d.length,onClick:v,className:hse().replace,size:"small",children:"\u4e00\u952e\u66ff\u6362"})]}),(0,Kg.jsx)("div",{className:hse().right,children:!u&&(!c||l.length<=1)&&(0,Kg.jsx)(CS.Z,{type:"text",size:"small",icon:(0,Kg.jsx)(iP,{type:"yinle-61nfm32k",style:{fontSize:16,verticalAlign:"middle"}}),onClick:m,children:"\u66ff\u6362\u80cc\u666f\u97f3\u4e50"})})]})},gse=(0,hp.Pi)(fse),xse=i(23223),yse=i.n(xse),bse=e=>{var t=[],i=[];return e.forEach((e=>{var a=hi(e),n=a.meta,r=n.type,o=n.isBackground;if(!["SVG","lottie"].includes(r)&&!o){if("module"===r){var s=bse(a.assets);return t.push(...s.mediaList),void i.push(...s.textList)}"text"!==r?t.push(e):i.push(e)}})),{mediaList:t,textList:i}},_se=e=>{var t=Dw(e).filter((e=>e.meta.isQuickEditor)),i=(0,dg.Z)([...t],["assetDuration.startTime",e=>-e.transform.zindex]);return bse(i)},jse=e=>{var t,i,a="mask"===(null===e||void 0===e||null===(t=e.meta)||void 0===t?void 0:t.type)&&null!==e&&void 0!==e&&null!==(i=e.assets)&&void 0!==i&&i.length?e.assets[0]:e,n=a.meta,r=n.type,o=n.isBackground,s=a.meta,l=!ii(a)&&!s.isTransfer&&!s.isLogo;return l&&!["SVG","lottie","text","module"].includes(r)&&!o},wse=e=>{var t=e.onClick,i=void 0===t?()=>{}:t,a=e.iconType,n=e.text,r=()=>{i()};return(0,Kg.jsxs)("div",{onClick:r,className:yse().item,children:[a&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(iP,{type:a,style:{fontSize:14}})," "]}),n]})};wse.defaultProps={iconType:void 0,text:void 0,onClick:()=>{}};var kse=wse,Tse=(0,hp.Pi)((e=>{var t,i=e.asset,a=e.activeAsset,n=e.containerSizeScale,r=e.assetPositionScale,o=i.meta,s=i.assets,l=o.replaced||"mask"===o.type&&(null===(t=s[0])||void 0===t?void 0:t.meta.replaced),c=NJ(),d=c.checkLoginStatus,p=Lj(),v=p.startReplace,m=du(),h=m.startMask,f=(0,u.Z)((0,u.Z)({},n),{},{left:Math.max(r.left,0),top:Math.max(a.auxiliary.vertical.start-50,0)}),g=[{key:"replace",text:"\u66ff\u6362",iconType:"beijingtihuan",show:!0,onClick:()=>{d()||(v(),Km("concise3"))}},{key:"mask-clip",show:l,iconType:"tailoring",text:"\u88c1\u526a",onClick:()=>{h(),Km("concise25")}}];return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:yse().ActionHelper,style:(0,u.Z)({},f),children:(0,Kg.jsx)("div",{className:yse().content,onMouseDown:Ph,children:g.filter((e=>e.show)).map((e=>{var t=e.iconType,i=e.text,a=e.onClick,n=e.key;return(0,Kg.jsx)(kse,{text:i,iconType:t,onClick:a},n)}))})})})})),Zse=()=>{var e=Pw(),t=gu(),i=Mj(),a=i.inRotating,n=Ej(),r=du(),o=r.inMask,s=null===e||void 0===e?void 0:e.meta.locked,l=t||{},c=l.assetPositionScale,d=l.containerSizeScale,u=e&&jse(e);return(0,Kg.jsx)(Kg.Fragment,{children:e&&t&&u&&!o&&!a&&!n&&!s&&(0,Kg.jsx)(Tse,{asset:e,activeAsset:t,containerSizeScale:d,assetPositionScale:c})})},Cse=(0,hp.Pi)(Zse),Nse=20,Sse=()=>{var e=(0,r.useRef)(null),t=(0,Cm.Z)(e),i=(0,r.useState)(""),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=nM(),c=l.isPlaying,d=l.pauseVideo,u=l.playVideo,p=Lp(),v=Bb(),m=v.currentTime,h=Bw(),f=xu(),g=Tv.activeIndex,x=(null===h||void 0===h?void 0:h.videoInfo.allAnimationTimeBySpeed)||0;(0,r.useEffect)((()=>{var e,t;(null===h||void 0===h||null===(e=h.template)||void 0===e?void 0:e.poster)&&s(null===h||void 0===h||null===(t=h.template)||void 0===t?void 0:t.poster)}),[h]),(0,r.useEffect)((()=>{(c||f)&&s("")}),[c,f]);var y=(0,_p.Z)(),b=Qb(),_=b.loadComplete,j=Nk(),w=j.loading;(0,r.useEffect)((()=>{if(Rw().length&&w&&_){Ah.closeWindowsLoading();var e=window.__EDITOR_PERFORMANCE__;e.completed||(e.user_resorce_post_end=(new Date).getTime(),e.completed=!0),e.completed&&!e.sended&&Wm(y),Um(y.picId,y.upicId)}}),[w,_]);var k=cG(Math.max(m,0)),T=cG(x),Z=Math.min((((null===t||void 0===t?void 0:t.width)||p.width)-2*Nse)/p.width,(((null===t||void 0===t?void 0:t.height)||p.height)-2*Nse)/p.height),C=()=>{c?d():u(),Km("concise24")},N=ah();return(0,Kg.jsxs)("div",{className:vse().Content,children:[(0,Kg.jsx)(gse,{}),(0,Kg.jsx)("div",{className:vse().canvasWrapper,ref:e,style:{padding:Nse},children:(0,Kg.jsxs)("div",{className:vse().stage,style:{width:p.width*Z,height:p.height*Z},children:[(0,Kg.jsx)("div",{className:vse().poster,style:{backgroundImage:"url(".concat(o,")"),display:o?"block":"none"},onClick:C,children:(0,Kg.jsx)("div",{className:vse().coverPlayer,children:(0,Kg.jsx)(iP,{type:c?"iconzanting":"iconbofang",className:vse().coverPlayerIcon})})}),(0,Kg.jsx)(NI,{onChange:(e,t)=>{$k(),t&&$A({autoSave:!0}),N(f,e)},wholeTemplate:!1,canvasInfo:{width:p.width,height:p.height,scale:Z}}),(0,Kg.jsx)(Cse,{})]})}),(0,Kg.jsxs)("div",{className:vse().footer,style:{width:p.width*Z},children:[(0,Kg.jsx)(TP.Z,{value:m/x*1e3,tooltipVisible:!1,className:vse().slider,max:1e3,onChange:e=>{Db(e/1e3*x,!1)}}),(0,Kg.jsxs)("div",{className:vse().partWrapper,children:[(0,Kg.jsx)("div",{className:vse().partTitle,children:(0,Kg.jsxs)("div",{className:vse().partButton,children:["\u7247\u6bb5",g<9?0:"",g+1]})}),(0,Kg.jsxs)("div",{className:vse().player,children:[(0,Kg.jsx)("div",{className:vse().playerIcon,onClick:C,children:(0,Kg.jsx)(iP,{type:c?"iconzanting":"iconbofang",className:vse().icon})}),k.m,":",k.s,"/",T.m,":",T.s]}),(0,Kg.jsx)("div",{})]})]})]})},Ise=(0,hp.Pi)(Sse),Ase=i(61082),Pse=i.n(Ase),Mse=e=>{var t=e.asset,i=e.isDrag,a=Kh(t),o=a.meta.isBackground,s=a.attribute,l=s.rt_total_time,c=s.rt_url,d=(0,r.useState)(!1),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=xu(),h=Lj(),f=h.startReplace,g=(0,r.useState)({visible:!1}),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=Jv(a),j=a.meta.type,w=["video","videoE"].includes(j),k=cG(l||0),T="video"===j&&o,Z=e=>{Ud(a,{attribute:e}),b({visible:!1})},C=()=>{gg({asset:t,withAbsoluteTime:!1})},N=e=>{Ph(e),Ij(t),eu(),Km("concise10")};return(0,Kg.jsxs)(cse,{active:(null===m||void 0===m?void 0:m.id)===t.id,style:{width:"100%",height:130},onClick:e=>{e.stopPropagation(),C()},onMouseDown:Ph,hiddenContent:(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:Pse().operation,children:[(0,Kg.jsx)(CS.Z,{size:"small",onClick:e=>{e.stopPropagation(),C(),f(),Km("concise8")},icon:(0,Kg.jsx)(iP,{type:"icontihuan2"}),children:"\u66ff\u6362"}),w&&a.meta.replaced&&(0,Kg.jsx)(CS.Z,{size:"small",style:{marginLeft:12},icon:(0,Kg.jsx)(iP,{type:"iconjianji"}),onClick:()=>{var e,i,n=t.assetDuration,r=n.startTime,o=n.endTime,s=null!==(e=a.attribute.cst)&&void 0!==e?e:0,l=null!==(i=a.attribute.cet)&&void 0!==i?i:Math.min(s+o-r,a.attribute.rt_total_time);b({visible:!0,data:{width:a.attribute.width,height:a.attribute.height,duration:a.attribute.rt_total_time,preview_video:a.attribute.rt_url,cst:s,cet:l}}),Km("concise9")},children:"\u526a\u8f91"})]}),!T&&(0,Kg.jsx)(xF.Z,{title:"\u5220\u9664\u5143\u7d20",children:(0,Kg.jsx)("div",{className:Pse().delete,onClick:N,onMouseDown:C,children:(0,Kg.jsx)(iP,{type:"iconchahao"})})})]}),showContent:w&&(0,Kg.jsxs)("div",{className:Pse().duration,children:[(0,Kg.jsx)(iP,{type:"shipin-624jcji7",style:{marginRight:3}}),k.m,":",k.s]}),children:[(0,Kg.jsx)("div",{className:Pse().MediaItem,style:{backgroundImage:"url(".concat(_,")")},onMouseEnter:()=>{!i&&v(!0)},onMouseLeave:()=>{!i&&v(!1)},children:p&&w&&(0,Kg.jsx)("video",{src:c,loop:!0,width:"100%",height:"100%",autoPlay:!0,disablePictureInPicture:!0})}),(0,Kg.jsx)(tK,{visible:y.visible,contentProps:{data:y.data,actionType:"cut",onOk:Z},onCancel:()=>{b({visible:!1})}})]})},Ese=(0,hp.Pi)(Mse),Lse=e=>{var t=e.asset,i=t.attribute.text,a=void 0===i?[]:i,r=xu(),o=E_(),s=(0,n.Z)(o,2),l=s[1];return(0,Kg.jsx)("div",{className:hb()(Pse().TextItem,{[Pse().active]:(null===r||void 0===r?void 0:r.id)===t.id}),onMouseDown:e=>{Ph(e),gg({asset:t,withAbsoluteTime:!1})},children:(0,Kg.jsx)(VP.Z.TextArea,{value:a.join("\n"),autoSize:!0,onChange:e=>{l(e.target.value.split("\n"))}})})},Dse=(0,hp.Pi)(Lse),Rse=e=>{var t=e.count,i=e.text;return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("span",{className:Pse().count,children:[t," "]}),(0,Kg.jsx)("span",{className:Pse().text,children:i})]})},zse=()=>{var e=_se(),t=e.mediaList,i=e.textList,a=Tv.activeIndex,o=(0,r.useState)("media"),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(!1),u=(0,n.Z)(d,2),p=u[0],v=(u[1],xu()),m=Bw();(0,r.useEffect)((()=>{if(v){var e=v.meta.type;c("text"===e?"text":"media")}}),[v]),(0,r.useEffect)((()=>{t.length||c("text")}),[m]);return(0,Kg.jsxs)("div",{className:Pse().Assets,children:[(0,Kg.jsxs)("div",{className:Pse().title,children:["\u7247\u6bb5",a<9?0:"",a+1," \u53ef\u66ff\u6362\u4fe1\u606f"]}),(0,Kg.jsxs)(YP.Z,{activeKey:l,onChange:c,children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:(0,Kg.jsx)(Rse,{count:t.length,text:" \u5904\u7d20\u6750"}),children:(0,Kg.jsx)("div",{className:Pse().assetList,children:t.map((e=>(0,Kg.jsx)(Ese,{isDrag:p,asset:e},e.meta.id)))})},"media"),(0,Kg.jsx)(YP.Z.TabPane,{tab:(0,Kg.jsx)(Rse,{count:i.length,text:" \u5904\u6587\u5b57"}),children:(0,Kg.jsx)("div",{className:Pse().assetList,children:i.map((e=>(0,Kg.jsx)(Dse,{asset:e},e.id)))})},"text")]})]})},Fse=(0,hp.Pi)(zse),Ose=i(31536),Bse=i.n(Ose),Wse=()=>{var e=Rw(),t=Bw(),i=Tv.setTemplateIndex;(0,r.useEffect)((()=>(t&&i(e.findIndex((e=>e.id===t.id))),()=>{i(0)})),[t,e])},Vse=(e,t,i)=>{var a=t.attribute,n=a.width,r=a.height,o=a.resId,s=a.startTime,l=t.transform,c=l.posX,d=l.posY;return"".concat(e.resId,"-").concat(e.posX,"-").concat(e.posY,"-").concat(e.width,"-").concat(e.height)==="".concat(o,"-").concat(c,"-").concat(d,"-").concat(n,"-").concat(r)&&Math.abs(i+s-e.endTime)<100},Use=()=>{(0,r.useEffect)((()=>{var e=(0,s.EH)((()=>{var e=[],t=Rw(),i=Tv.initResAssets,a=Tv.loading;if(!a){var n=0;t.forEach((t=>{var i=_se(t),a=i.mediaList;a.forEach((t=>{var i,a,r="mask"===(null===t||void 0===t||null===(i=t.meta)||void 0===i?void 0:i.type)&&null!==t&&void 0!==t&&null!==(a=t.assets)&&void 0!==a&&a.length?t.assets[0]:t,o=r.attribute,s=o.resId,l=o.endTime,c=o.width,d=o.height,u=r.transform,p=u.posX,v=u.posY,m=r.meta.replaced,h=e.find((e=>Vse(e,r,n)));h?(h.endTime=n+l,h.assets.push(r)):e.push({resId:s,width:c,height:d,posX:p,posY:v,replaced:!!m,endTime:n+l,assets:[r]})})),n+=t.videoInfo.endTime})),i(e)}}));return e}),[])},Gse=()=>{Wse(),Use();var e=Bw(),t=Tv.loading,i=Rj(),a=i.inReplacing,n=Xf(),o=n.open;return(0,r.useEffect)((()=>{a&&o("modal-replace")}),[a]),e?(0,Kg.jsxs)("div",{className:Bse().ConciseMode,onMouseDown:()=>{eu()},children:[(0,Kg.jsx)("div",{className:hb()(Bse().loading,{[Bse().show]:t}),children:(0,Kg.jsx)(dN.Z,{spinning:t,tip:"\u66ff\u6362\u4e2d..."})}),(0,Kg.jsx)(use,{}),(0,Kg.jsx)(Ise,{}),(0,Kg.jsx)(Fse,{})]}):null},Xse=(0,hp.Pi)(Gse),qse=i(62454),Hse=i.n(qse),Yse=i(75195),Kse=i.n(Yse),Qse=e=>{var t=e.active,i=e.style,a=e.onClick,n=void 0===a?()=>{}:a,o=e.onMouseDown,s=void 0===o?()=>{}:o,l=e.children,c=e.hiddenContent,d=e.showContent,u=(0,r.useRef)(null),p=(0,Cm.Z)(u);return(0,Kg.jsx)("div",{className:hb()(Kse().Card,{[Kse().active]:t}),style:i,onClick:n,onMouseDown:s,ref:u,children:(0,Kg.jsxs)("div",{style:p,children:[l,(0,Kg.jsx)("div",{className:Kse().hidden,children:c}),(0,Kg.jsx)("div",{className:Kse().show,children:d})]})})};Qse.defaultProps={style:void 0,onClick:()=>{}};var Jse=(0,hp.Pi)(Qse),$se=e=>{var t=e.asset,i=(e.isDrag,Kh(t)),a=i.meta.isBackground,o=i.attribute,s=o.rt_total_time,l=o.rt_url,c=(0,r.useState)(!1),d=(0,n.Z)(c,2),u=d[0],p=d[1],v=(xu(),Xf()),m=v.updateReplaceIngAsset,h=Lj(),f=h.startReplace,g=(0,r.useState)({visible:!1}),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=Jv(i),j=i.meta.type,w=["video","videoE"].includes(j),k=cG(s||0),T="video"===j&&a,Z=e=>{Ud(i,{attribute:e}),b({visible:!1})},C=()=>{gg({asset:t,template:t.template,withAbsoluteTime:!0}),m(i.id)},N=()=>{Ij(t),eu()};return(0,Kg.jsxs)(Jse,{active:!1,style:{width:"100%",height:0,paddingBottom:"100%"},onClick:e=>{e.stopPropagation(),C()},onMouseDown:Ph,hiddenContent:(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:Hse().operation,children:[(0,Kg.jsx)(CS.Z,{size:"small",onClick:e=>{e.stopPropagation(),C(),f(t),Km("onkeyReplace_007")},icon:(0,Kg.jsx)(iP,{type:"icontihuan2"}),children:"\u66ff\u6362"}),w&&i.meta.replaced&&(0,Kg.jsx)(CS.Z,{size:"small",style:{marginLeft:4},icon:(0,Kg.jsx)(iP,{type:"iconjianji"}),onClick:()=>{var e,a,n=t.assetDuration,r=n.startTime,o=n.endTime,s=null!==(e=i.attribute.cst)&&void 0!==e?e:0,l=null!==(a=i.attribute.cet)&&void 0!==a?a:Math.min(s+o-r,i.attribute.rt_total_time);b({visible:!0,data:{width:i.attribute.width,height:i.attribute.height,duration:i.attribute.rt_total_time,preview_video:i.attribute.rt_url,cst:s,cet:l}}),Km("onkeyReplace_008")},children:"\u526a\u8f91"})]}),!T&&(0,Kg.jsx)(NH.Z,{overlay:(0,Kg.jsx)(SH.Z,{children:(0,Kg.jsx)(SH.Z.Item,{onClick:e=>{e.item,e.key,e.keyPath;var t=e.domEvent;t.stopPropagation(),N(),Km("onkeyReplace_009")},children:"\u5220\u9664"})}),children:(0,Kg.jsx)("div",{className:Hse().actionDrop,children:(0,Kg.jsx)(Fee.Z,{})})})]}),showContent:w&&(0,Kg.jsxs)("div",{className:Hse().duration,children:[(0,Kg.jsx)(iP,{type:"shipin-624jcji7",style:{marginRight:3}}),k.m,":",k.s]}),children:[(0,Kg.jsx)("div",{className:Hse().MediaItem,style:{backgroundImage:"url(".concat(_,")")},onMouseEnter:()=>{p(!0)},onMouseLeave:()=>{p(!1)},children:u&&w&&(0,Kg.jsx)("video",{src:l,loop:!0,width:"100%",height:"100%",autoPlay:!0,disablePictureInPicture:!0})}),(0,Kg.jsx)(tK,{visible:y.visible,contentProps:{data:y.data,actionType:"cut",onOk:Z},onCancel:()=>{b({visible:!1})}})]})},ele=(0,hp.Pi)($se),tle=()=>{var e=Vv.quickAssets,t=(0,r.useState)(0),i=(0,n.Z)(t,2),a=i[0],o=i[1];return(0,Kg.jsxs)("div",{className:Hse().assetWrap,children:[(0,Kg.jsxs)("div",{className:Hse().actionWrap,children:[(0,Kg.jsx)("div",{className:hb()(Hse().actionItem,{[Hse().actionItemChoosed]:0===a}),onClick:()=>{o(0),Km("onkeyReplace_005")},children:(0,Kg.jsx)(iP,{type:"iconliebiao"})}),(0,Kg.jsx)("div",{className:hb()(Hse().actionItem,{[Hse().actionItemChoosed]:1===a}),onClick:()=>{o(1),Km("onkeyReplace_006")},children:(0,Kg.jsx)(iP,{type:"iconpingpu"})})]}),(0,Kg.jsx)("div",{className:hb()(Hse().assetList,{[Hse().assetListItemWrap]:0===a}),children:e.map(((e,t)=>0===e.length?null:0===a?(0,Kg.jsx)(Kg.Fragment,{children:(null!==e&&void 0!==e?e:[]).map((e=>(0,Kg.jsx)(ele,{isDrag:!1,asset:e},e.meta.id)))}):(0,Kg.jsxs)("div",{className:Hse().assetListItem,children:[(0,Kg.jsxs)("div",{className:Hse().assetListItemTitle,children:["\u7247\u6bb5 ",t<9?0:"",t+1]}),(0,Kg.jsx)("div",{className:Hse().assetListItemWrap,children:(null!==e&&void 0!==e?e:[]).map((e=>(0,Kg.jsx)(ele,{isDrag:!1,asset:e},e.meta.id)))})]},t)))})]})},ile=(0,hp.Pi)(tle),ale=i(4730),nle=i.n(ale),rle=e=>{var t=e,i=t.meta,a=i.type,n=i.isQuickEditor;return!["SVG","lottie","text"].includes(a)&&(n||"module"===a)},ole=e=>{var t=[];return e.forEach((e=>{var i=e,a=i.meta.type;if(rle(i))if("module"!==a)t.push(e);else{var n=ole(i.assets);t.push(...n)}})),t},sle=e=>{var t=Dw(e),i=(0,dg.Z)([...t],["assetDuration.startTime",e=>-e.transform.zindex]);return ole(i)},lle=()=>{var e=Rw(),t=[];return e.forEach((e=>{var i=sle(e);return t.push(i)})),t},cle=(e,t,i)=>{var a=t.attribute,n=a.width,r=a.height,o=a.resId,s=a.startTime,l=t.transform,c=l.posX,d=l.posY;return"".concat(e.resId,"-").concat(e.posX,"-").concat(e.posY,"-").concat(e.width,"-").concat(e.height)==="".concat(o,"-").concat(c,"-").concat(d,"-").concat(n,"-").concat(r)&&Math.abs(i+s-e.endTime)<100},dle=()=>{(0,r.useEffect)((()=>{var e=(0,s.EH)((()=>{var e=[],t=Rw(),i=Vv.initResAssets,a=Vv.initQuickAssets,n=Vv.loading;if(!n){var r=0;t.forEach((t=>{var i=sle(t);i.forEach((t=>{var i=t,a=i.attribute,n=a.resId,o=a.endTime,s=a.width,l=a.height,c=i.transform,d=c.posX,u=c.posY,p=hi(i),v=p.meta.replaced,m=e.find((e=>cle(e,i,r)));m?(m.endTime=r+o,m.assets.push(i)):e.push({resId:n,width:s,height:l,posX:d,posY:u,replaced:!!v,endTime:r+o,assets:[i]})})),r+=t.videoInfo.endTime}));var o=lle();i(e),a(o)}}));return e}),[])},ule=i(5037),ple=i.n(ule),vle=()=>{var e=Jk(),t=e.value,i=e.goNext,a=e.goPrev,n=Xf(),r=n.open,o=nM(),s=o.pauseVideo,l=Vv.resAssets,c=l.filter((e=>e.replaced)),d=()=>{r("replace-batch"),s(),Km("onkeyReplace_002")},u=c.length===l.length;return(0,Kg.jsxs)("div",{className:ple().Header,children:[(0,Kg.jsx)("div",{className:ple().top,children:"\u66ff\u6362\u7d20\u6750"}),(0,Kg.jsxs)("div",{className:ple().bottom,children:[(0,Kg.jsxs)("div",{className:ple().left,children:[(0,Kg.jsxs)("div",{className:ple().leftText,children:[(0,Kg.jsx)("span",{className:ple().replace,children:l.length}),"\u5f20\u56fe\u7247/\u89c6\u9891\uff0c\u5df2\u66ff\u6362",(0,Kg.jsx)("span",{className:ple().replace,children:c.length}),"\u5f20"]}),(0,Kg.jsxs)(CS.Z,{disabled:u,onClick:d,className:ple().replaceButton,size:"small",children:["\u4e00\u952e\u66ff\u6362",(0,Kg.jsx)("div",{className:hb()("animate__animated animate__bounce animate__pulse animate__infinite",ple().newFun)})]}),u&&(0,Kg.jsxs)("div",{className:ple().leftTip,children:[(0,Kg.jsx)(c4.Z,{className:ple().icon}),"\u6279\u91cf\u66ff\u6362\u56fe\u7247/\u89c6\u9891\u5df2\u8fbe\u4e0a\u9650,\u8bf7\u5355\u51fb\u5355\u4e2a\u56fe\u7247/\u89c6\u9891\u8fdb\u884c\u66ff\u6362"]})]}),(0,Kg.jsxs)("div",{className:ple().right,children:[(0,Kg.jsxs)("div",{className:hb()(ple().button,{[ple().buttonDisabled]:!t.hasPrev}),onClick:()=>{t.hasPrev&&a(),Km("onkeyReplace_003")},children:[(0,Kg.jsx)(iP,{type:"iconchexiao1",className:ple().icon}),"\u4e0a\u4e00\u6b65"]}),(0,Kg.jsxs)("div",{className:hb()(ple().button,{[ple().buttonDisabled]:!t.hasNext}),onClick:()=>{t.hasNext&&i(),Km("onkeyReplace_004")},children:[(0,Kg.jsx)(iP,{type:"iconchexiao1",className:ple().iconNext}),"\u4e0b\u4e00\u6b65"]})]})]})]})},mle=(0,hp.Pi)(vle),hle=()=>{dle();var e=Bw(),t=Vv.loading,i=og(),a=i.openCloseOneKeyReplace;return e?(0,Kg.jsx)(QJ,{visible:!0,onCancel:()=>{a(!1)},className:nle().oneKeyReplaceModal,centered:!0,footer:null,zIndex:998,children:(0,Kg.jsxs)("div",{className:nle().oneKeyWrapper,onMouseDown:()=>{eu()},children:[(0,Kg.jsx)("div",{className:hb()(nle().loading,{[nle().show]:t}),children:(0,Kg.jsx)(dN.Z,{spinning:!0,tip:"\u66ff\u6362\u4e2d..."})}),(0,Kg.jsx)(mle,{}),(0,Kg.jsx)(ile,{})]})}):null},fle=(0,hp.Pi)(hle),gle=(0,hp.Pi)((()=>{var e=nM(),t=e.isPlaying,i=e.pauseVideo,a=(e.playVideo,Pw()),n=Yoe(),o=n.loading,s=Qb(),l=s.loadComplete,c=Gf(),d=c.close,u=Rj(),p=u.endClip,v=Lf(),m=v.open,h=og(),f=h.isOneKeyReplace,g=jf(),x=g.timeLinePartKey,y=kf(),b=y.isConcise,_=Of(),j=_.referenceLineShow,w=(0,r.useRef)(null);return(0,r.useEffect)((()=>{a&&t&&i()}),[a]),(0,r.useEffect)((()=>{if(!o&&l){var e=Lh("guide");if(null===e||void 0===e||!e.novice){var t=(0,_p.Z)();null!==t&&void 0!==t&&t.picId&&(m(_m[0][0]),Mh("guide",{novice:!0}))}}}),[o,l]),(0,r.useEffect)((()=>{l&&Rw().length&&$k()}),[l]),Qoe(),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)(RI.W,{backend:zI.PD,children:[b?(0,Kg.jsx)(Xse,{}):(0,Kg.jsxs)("div",{className:"xiudodo-content",onContextMenu:e=>{e.preventDefault()},children:[(0,Kg.jsx)(sne,{}),(0,Kg.jsxs)("div",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[(0,Kg.jsxs)("div",{style:{flex:1,height:0,display:"flex",width:"100%",position:"relative",zIndex:2},children:[(0,Kg.jsx)(Bie,{}),(0,Kg.jsxs)("div",{"aria-label":"canvas",style:{flex:1,display:"flex",flexDirection:"column",width:0,zIndex:8},children:[(0,Kg.jsx)(Goe,{}),(0,Kg.jsx)("div",{ref:w,className:hb()("xiudodo-main",{"xiudodo-main-grid":j}),onMouseDown:e=>{var t;"hc-core-canvas-handler"!==(null===(t=e.target)||void 0===t?void 0:t.className)&&(eu(),p(),d()),Pv(-1)},children:(0,Kg.jsx)(l5,{loading:o,children:(0,Kg.jsx)(are,{})})})]})]}),null===x&&(0,Kg.jsxs)(c5,{loading:o,className:"xiudodo-bottom",children:[w.current&&(0,Kg.jsx)(CK,{container:w.current,style:{position:"absolute",right:131,top:-50}}),(0,Kg.jsx)(u5,{style:{top:-50}}),(0,Kg.jsx)(g5,{style:{top:-50}}),(0,Kg.jsx)(Jae,{})]})]}),(0,Kg.jsx)(rne,{}),(0,Kg.jsx)(kP,{}),(0,Kg.jsx)(tse,{}),(0,Kg.jsx)(ase,{})]}),f&&(0,Kg.jsx)(fle,{}),(0,Kg.jsx)(o5,{}),(0,Kg.jsx)(Y$,{})]}),(0,Kg.jsx)(y5,{})]})})),xle=gle;function yle(e){var t=e.header,i=e.main,a=e.footer,n=e.width,r=void 0===n?370:n,o=e.onCancel,s=e.visible,l=e.className,c=void 0===l?"":l;return(0,Kg.jsx)(QJ,{visible:s,onCancel:o,footer:!1,width:r,centered:!0,maskClosable:!1,children:(0,Kg.jsxs)("div",{className:"pub-modal-message ".concat(c),children:[(0,Kg.jsx)("div",{className:"PMM-header",children:t}),(0,Kg.jsx)("div",{className:"PMM-main",children:i}),(0,Kg.jsx)("div",{className:"PMM-footer",children:a})]})})}function ble(e){var t=e.icon,i=e.title,a=e.button,n=e.width,r=void 0===n?370:n,o=e.description,s=e.onCancel,l=e.visible,c=e.className,d=void 0===c?"":c,u=(0,Kg.jsx)("div",{className:"PMW-icon",children:t}),p=(0,Kg.jsxs)("div",{className:"PMW-main",children:[(0,Kg.jsx)("div",{className:"PMW-title",children:i}),o&&(0,Kg.jsx)("div",{className:"PMW-description",children:o})]}),v=(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)("div",{className:"PMW-button",children:a})});return(0,Kg.jsx)(yle,{header:u,main:p,footer:v,width:r,className:"pub-modal-warning ".concat(d),visible:l,onCancel:s})}var _le=(0,Kg.jsx)(WJ.Z,{style:{color:"#FDB202"}});function jle(){var e=LJ(),t=hf(),i=t.downloadInfo,a=i.message,n=i.description,r=i.buttonText,o=i.buttonType,s=i.remainingTimes,l=(i.pixelType,lf()),c=l.open,d=(0,Kg.jsxs)("span",{children:[a,s>0&&(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("span",{style:{color:"#5A4CDB"},children:s}),"\u6b21"]})]}),u=()=>{var i=t.buttonType,a=i.download,n=i.openVipRecharge,r=i.openVipUpgrade,s=i.openMyDownload;switch(o){case a:c(),t.close();break;case n:e.openRechargeModal(),t.close();break;case r:window.open("//xiudodo.com/pricing.html"),t.close();break;case s:window.open("//xiudodo.com/my/download"),t.close();break}};return(0,Kg.jsx)(ble,{visible:t.visible,onCancel:t.close,icon:_le,title:d,description:n,button:(0,Kg.jsx)(CS.Z,{loading:e.loading,type:"primary",onClick:u,children:r})})}var wle=jle;function kle(){var e=cf(),t=e.value,i=e.close,a=sf(),n=()=>{i(),a.open()},r=(0,Kg.jsx)(CS.Z,{type:"primary",onClick:n,children:"\u6210\u4e3aVIP\u7acb\u5373\u4e0b\u8f7d"});return(0,Kg.jsxs)(nA.Z,{visible:Boolean(t),width:370,onCancel:i,className:"upgradeVipGuidance",footer:!1,getContainer:document.getElementById("xiudodo"),children:[(0,Kg.jsx)("h6",{className:"upgradeVipGuidance-title",children:"\u5f00\u901aVIP \u89c6\u9891\u6d77\u91cf\u4e0b"}),(0,Kg.jsxs)("div",{className:"upgradeVipGuidance-main",children:[(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("span",{className:"upgradeVipGuidance-label",children:"\u6d77\u91cf"})," ",(0,Kg.jsx)("i",{children:"\xb7"})," ",(0,Kg.jsx)("em",{children:"2w+"}),"\u89c6\u9891\u5185\u5bb9\u5b9e\u65f6\u66f4\u65b0"]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("span",{className:"upgradeVipGuidance-label",children:"\u5546\u7528"})," ",(0,Kg.jsx)("i",{children:"\xb7"})," ","\u5168\u7ad9\u6240\u6709\u5185\u5bb9\u7d20\u6750\u5747",(0,Kg.jsx)("em",{children:"\u53ef\u5546\u7528"})]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("span",{className:"upgradeVipGuidance-label",children:"\u9ad8\u6548"})," ",(0,Kg.jsx)("i",{children:"\xb7"})," ","\u64cd\u4f5c\u4fbf\u6377 ",(0,Kg.jsx)("em",{children:"\u9ad8\u901f"}),"\u4e0b\u8f7d"]}),(0,Kg.jsxs)("p",{children:[(0,Kg.jsx)("span",{className:"upgradeVipGuidance-label",children:"\u8d85\u503c"})," ",(0,Kg.jsx)("i",{children:"\xb7"})," \u9650\u65f6",(0,Kg.jsx)("em",{children:"\u4f4e\u4ef7"})," \u5355\u4e2a\u89c6\u9891\u4ec5\u97001\u5206\u94b1"]}),r]})]})}function Tle(){return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(wle,{}),(0,Kg.jsx)(kle,{})]})}var Zle=i(98060),Cle=i.n(Zle);function Nle(){var e=(0,r.useState)(!1),t=(0,n.Z)(e,2),i=t[0],a=t[1],o=(0,DI.ZP)(TA),s=o.data,l=e=>{var t,i;navigator.clipboard.writeText(s.link),a(!0),null===(t=window)||void 0===t||null===(i=t.xa)||void 0===i||i.track("CopyInviteUrl",{extra:"editPage"})};return(0,r.useEffect)((()=>{var e,t;null===(e=window)||void 0===e||null===(t=e.xa)||void 0===t||t.track("pageview",{extra:"editPage"})}),[]),(0,Kg.jsxs)("div",{className:Cle().wrap,children:[(0,Kg.jsx)("div",{className:Cle().header,children:"\u9650\u65f6\u60ca\u559c"}),(0,Kg.jsx)("div",{className:Cle().desc,children:"\u4ec5\u9700\u9080\u8bf71\u4f4d\u597d\u53cb\uff0c\u5373\u53ef\u89e3\u9501\u8be5\u6a21\u677f\u7684\u5408\u6210\u4e0b\u8f7d\u6743\u9650"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:l,children:i?"\u590d\u5236\u6210\u529f":"\u70b9\u51fb\u590d\u5236\u9080\u8bf7\u94fe\u63a5"})]})}function Sle(){var e=zf(),t=e.visible,i=e.close;return(0,Kg.jsx)(nA.Z,{visible:t,onCancel:i,width:450,destroyOnClose:!0,footer:!1,centered:!0,maskClosable:!1,getContainer:document.getElementById("xiudodo"),children:(0,Kg.jsx)(Nle,{})})}i(25324);var Ile=i(45733),Ale=()=>{for(var e=Np(),t=e.templateInfo,i=Qb(),a=i.loadComplete,n=[],o=Rw(),s=0;s<o.length;s++)for(var l=o[s],c=0;c<(null===l||void 0===l||null===(d=l.assets)||void 0===d?void 0:d.length);c++){var d,u=null===l||void 0===l?void 0:l.assets[c].getAssetCloned(),p=u;p.id=l.id,n.push(p)}var v=(0,r.useMemo)((()=>{var e,i=[];a&&(null===t||void 0===t||null===(e=t.assets)||void 0===e||e.forEach((e=>{e.use_level&&n.forEach((t=>{t.attribute.resId===e.resId&&i.push(t)}))})));return{assetAll:i}}),[a,n]),m=v.assetAll;return{total:m.length,data:m}},Ple=e=>{e.close;var t=e.platform,i=e.onChange,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=DJ(),d=c.pixelType,u=c.loading,p=c.setPixelType,v=c.exportType,m=c.setExportType,h=c.remainingTimes,f=c.beforeDownLoad,g=c.today_dln_value,x=c.vipType,y=c.today_vip_dln_value,b=sf(),_=Ale(),j=(_.total,_.data,CJ()),w=j.updateCouponStatus,k=LJ(),T=k.startDownLoad;(0,r.useEffect)((()=>{"mp4"===v?i(d):i()}),[d,v]);var Z=e=>{p(e.target.value),Km("download_004",{action_label:e.target.value})},C=[{type:"480P",name:"\u6807\u6e05480P"},{type:"720P",name:"\u9ad8\u6e05720P\uff08\u65e0\u6c34\u5370\uff09",icon:"vip-badge"},{type:"1080P",name:"\u8d85\u6e051080P\uff08\u65e0\u6c34\u5370\uff09",icon:"vip-badge"}],N=[{type:"480P",name:"\u6807\u6e05GIF\u52a8\u56fe",icon:"vip-badge"},{type:"720P",name:"\u9ad8\u6e05GIF\u52a8\u56fe",icon:"vip-badge"},{type:"1080P",name:"\u8d85\u6e05GIF\u52a8\u56fe",icon:"vip-badge"}],S=(0,r.useMemo)((()=>{var e=(0,Kg.jsx)(Kg.Fragment,{}),t=e=>{var t=e.times;return(0,Kg.jsxs)("span",{className:"pixel-remind remainingTimes",children:["\u4eca\u65e5\u53ef\u4e0b\u8f7d ",(0,Kg.jsx)("span",{children:t})," \u6b21"]})};if(-1===g)return(0,Kg.jsx)("span",{className:"remainingTimes",children:"\u6d77\u91cf\u4e0b\u8f7d"});switch(x){case 0:"480P"===d&&"mp4"===v&&(e=(0,Kg.jsx)(t,{times:g}));break;default:e="480P"===d?(0,Kg.jsx)(t,{times:g}):y?(0,Kg.jsx)(t,{times:y}):(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(t,{times:y}),(0,Kg.jsx)("span",{className:"increaseRechargeModalOpenBtn",onClick:()=>{[301,302,303].indexOf(x)>-1&&w({tagKey:"20"}),[101,102,103,104].indexOf(x)>-1&&w({tagKey:"20"}),b.open()},children:"\u70b9\u6b64\u8865\u5145"})]})}return e}),[v,d,g]),I=(0,Zm.Z)((()=>{0!==h?(T(v,d,t,null,(e=>{"displayNC"===e&&l(!0)})),Km("concise12")):f()}),{wait:500}),A=I.run;return(0,Kg.jsxs)("div",{className:"pixel-type",children:[(0,Kg.jsx)("h6",{children:"\u8bf7\u9009\u62e9\u4e0b\u8f7d\u4f60\u9700\u8981\u5408\u6210\u4f5c\u54c1\u7684\u7c7b\u578b"}),(0,Kg.jsxs)("div",{className:"export-select",children:[(0,Kg.jsxs)(FP.ZP.Group,{size:"middle",buttonStyle:"solid",className:"export-type",value:v,onChange:e=>{m(e.target.value),Km("download_008",{action_label:e.target.value})},children:[(0,Kg.jsx)(FP.ZP.Button,{value:"mp4",children:"MP4\u89c6\u9891"}),(0,Kg.jsx)(FP.ZP.Button,{value:"gif",children:"GIF\u52a8\u56fe"})]}),(0,Kg.jsxs)("div",{className:"pixel-type-div",children:[(0,Kg.jsx)(FP.ZP.Group,{size:"large",className:hb()("pixel-type",{show:"mp4"===v}),value:d,onChange:e=>{Z(e),i(e.target.value)},children:(0,Kg.jsx)(Ile.Z,{direction:"vertical",children:C.map((e=>(0,Kg.jsxs)(FP.ZP,{value:e.type,children:[e.name,e.icon&&(0,Kg.jsx)(iP,{className:"vip-badge",type:"iconVIPgerenzhongxin"}),d===e.type&&S]},e.type)))})}),(0,Kg.jsx)(FP.ZP.Group,{size:"large",className:hb()("pixel-type",{show:"gif"===v}),value:d,onChange:Z,children:(0,Kg.jsx)(Ile.Z,{direction:"vertical",children:N.map((e=>(0,Kg.jsxs)(FP.ZP,{value:e.type,children:[e.name,e.icon&&(0,Kg.jsx)(iP,{className:"vip-badge",type:"iconVIPgerenzhongxin"}),d===e.type&&S]},e.type)))})})]})]}),(0,Kg.jsxs)("div",{hidden:0!==x,className:"alert-vip",children:[(0,Kg.jsx)("span",{className:"increaseRechargeModalOpenBtn",onClick:()=>b.open(),children:"\u5347\u7ea7\u4f1a\u5458"}),"\uff0c\u7acb\u4eab\u9ad8\u6e05\u65e0\u6c34\u5370\u753b\u8d28\uff01"]}),(0,Kg.jsx)(CS.Z,{loading:u,type:"primary",onClick:A,className:"open-vip-modal",size:"large",children:t?"\u7acb\u5373\u5408\u6210":"\u7acb\u5373\u4e0b\u8f7d"}),t&&(0,Kg.jsx)("div",{className:"pixel-type_footer-share",children:"\u5907\u6ce8\uff1a\u89c6\u9891\u9700\u8981\u5408\u6210\u540e\u624d\u80fd\u53d1\u5e03"}),s&&(0,Kg.jsx)(Kee,{visible:s,setVisible:l,onSuccess:e=>{l(!1),T(v,d,t,e,(e=>{"displayNC"===e&&l(!0)}))}})]})},Mle=(0,hp.Pi)(Ple),Ele=i(88616),Lle=i.n(Ele),Dle=i(3737),Rle=i.n(Dle),zle=i(26941),Fle=i.n(zle),Ole=()=>{var e=oA();return(0,Kg.jsxs)("div",{className:Rle()["right-wrap"],children:[(0,Kg.jsx)("div",{className:Rle().avatar,children:(0,Kg.jsx)("img",{src:e.avatar,alt:"avatar"})}),(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(iP,{type:"icondouyindianzan",className:hb()(Rle().icon)}),"39.9w"]}),(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(iP,{type:"iconkuaishouxiaoxi",className:hb()(Rle().icon)}),"1.5w"]}),(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(iP,{type:"iconkuaishoufenxiang",className:hb()(Rle().icon)}),"2223w"]})]})};function Ble(){var e=oA();return(0,Kg.jsxs)("div",{className:hb()(Rle().wrap,Rle()["flex-box"]),children:[(0,Kg.jsx)("div",{children:(0,Kg.jsxs)("div",{className:hb()(Rle().avatar),style:{position:"absolute",top:"50%",transform:"scale(4) translateY(-50%)",transformOrigin:" 0 0"},children:[(0,Kg.jsx)("img",{src:e.avatar,alt:"avatar"}),(0,Kg.jsx)("span",{className:Rle().ellipsis,children:"\u79c0\u591a\u591a\u7f16\u8f91\u5668"})]})}),(0,Kg.jsxs)("div",{className:Rle()["flex-box"],children:[(0,Kg.jsxs)("div",{className:Rle()["bottom-menu"],children:[(0,Kg.jsx)(iP,{type:"iconshipinhaozhuanfa",className:hb()(Rle().icon,Rle()["font-size-18"])}),"6624"]}),(0,Kg.jsxs)("div",{className:Rle()["bottom-menu"],children:[(0,Kg.jsx)(iP,{type:"iconshipinhaoredu",className:hb()(Rle().icon,Rle()["font-size-18"])}),"3.2\u4e07"]}),(0,Kg.jsxs)("div",{className:Rle()["bottom-menu"],children:[(0,Kg.jsx)(iP,{type:"iconshipinhaoxiaoxi",className:hb()(Rle().icon,Rle()["font-size-18"])}),"2223"]})]})]})}function Wle(){return(0,Kg.jsxs)("div",{className:hb()(Rle().wrap,Rle()["flex-box"],Rle()["border-top"]),children:[(0,Kg.jsx)(Ole,{}),(0,Kg.jsx)("div",{className:hb()(Rle().active,Rle()["bottom-menu"]),children:"\u9996\u9875"}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:"\u670b\u53cb"}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:(0,Kg.jsx)("img",{width:"30",src:Fle(),alt:"douYinImg"})}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:"\u6d88\u606f"}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:"\u6211"})]})}function Vle(){return(0,Kg.jsxs)("div",{className:hb()(Rle().wrap,Rle()["flex-box"],Rle()["border-top"]),children:[(0,Kg.jsx)(Ole,{}),(0,Kg.jsx)("div",{className:hb()(Rle().active,Rle()["bottom-menu"]),children:"\u9996\u9875"}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:"\u540c\u57ce"}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:(0,Kg.jsx)(iP,{className:Rle().icon,type:"iconkuaishoushipin"})}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:"\u6d88\u606f"}),(0,Kg.jsx)("div",{className:Rle()["bottom-menu"],children:"\u6211"})]})}var Ule=e=>{var t=e.type;switch(t){case"ShiPinHao":return(0,Kg.jsx)(Ble,{});case"DouYin":return(0,Kg.jsx)(Wle,{});case"KuaiShou":return(0,Kg.jsx)(Vle,{});default:return(0,Kg.jsx)(Kg.Fragment,{})}},Gle=Ule,Xle=i(84537),qle=i.n(Xle),Hle={ShiPinHao:{typeDesc:"\u89c6\u9891\u53f7",back:!0,search:!0,user:!0,menu:[{key:"1",name:"\u5173\u6ce8"},{key:"2",name:"\u670b\u53cb"},{key:"3",name:"\u63a8\u8350",active:!0}]},DouYin:{typeDesc:"\u6296\u97f3",search:!0,menu:[{key:"1",name:"\u6d66\u4e1c"},{key:"2",name:"\u5173\u6ce8"},{key:"3",name:"\u63a8\u8350",active:!0}]},KuaiShou:{typeDesc:"\u5feb\u624b",search:!0,menu:[{key:"1",name:"\u5173\u6ce8"},{key:"2",name:"\u53d1\u73b0"},{key:"3",name:"\u7cbe\u9009",active:!0}]}};function Yle(e){var t=e.type,i=Hle[t],a=i.menu,n=i.back,r=i.search,o=i.user;return(0,Kg.jsxs)("div",{className:qle().wrap,children:[(0,Kg.jsx)("div",{className:qle().left,children:(0,Kg.jsx)("div",{hidden:!n,className:qle().back,children:"<"})}),(0,Kg.jsx)("div",{className:qle().menu,children:a.map((e=>(0,Kg.jsx)("div",{className:e.active?qle().active:"",children:e.name},e.key)))}),(0,Kg.jsxs)("div",{className:qle().right,children:[r&&(0,Kg.jsx)("span",{className:qle().search,children:(0,Kg.jsx)(iP,{type:"iconshipinhaosousuo"})}),o&&(0,Kg.jsx)("span",{className:qle().user,children:(0,Kg.jsx)(iP,{type:"iconshipinhaowode"})})]})]})}var Kle=i(43471),Qle=i.n(Kle);function Jle(e){var t=Lp(),i=t.width,a=t.height;return{width:i*e,height:a*e}}function $le(e){var t=e.type,i=e.watermark,a=Np(),n=a.templateInfo,o=Yb(),s=o.isPlaying,l=o.playVideo;(0,r.useEffect)((()=>{setTimeout((()=>{l()}),1e3)}),[]);var c=(0,r.useMemo)((()=>{if("default"===t){var e=n.canvasInfo.height;if(2208===e)return.18;if(1920!==e)return.28}return.2}),[t]);return(0,Kg.jsxs)("div",{className:hb()(Qle().wrap),style:"default"===t?Jle(c):{width:216,height:424},children:[(0,Kg.jsx)("div",{hidden:s,className:Qle().play,onClick:Jb,children:(0,Kg.jsx)(iP,{type:"iconbofang"})}),(0,Kg.jsxs)("div",{className:Qle()["video-scale"],style:{transform:"scale(".concat(c,")")},children:[(0,Kg.jsxs)("div",{style:(0,u.Z)((0,u.Z)({},"default"===t?n.canvasInfo:{width:1080,height:1920}),{},{position:"relative",zIndex:1}),onClick:Jb,children:[(0,Kg.jsx)(EP,{watermark:i,className:hb()({[Qle()["video-bg"]]:"default"!==t})}),(0,Kg.jsxs)("div",{className:Qle()["video-desc"],children:[(0,Kg.jsx)("div",{hidden:!["DouYin","KuaiShou"].includes(t),className:Qle()["user-name"],children:"@\u79c0\u591a\u591a\u7f16\u8f91\u5668"}),(0,Kg.jsx)("div",{hidden:"default"===t,className:hb()(Qle()["video-title"],Qle().ellipsis),children:n.title}),(0,Kg.jsx)("div",{hidden:!["DouYin","KuaiShou"].includes(t),className:Qle().bgm,children:"@\u79c0\u591a\u591a\u521b\u4f5c\u7684\u539f\u58f0"})]}),"default"!==t&&(0,Kg.jsx)("div",{className:Qle()["video-top"],children:(0,Kg.jsx)(Yle,{type:t})})]}),(0,Kg.jsx)("div",{hidden:"default"===t,className:Qle()["video-bottom"],style:{width:1080,height:200,backgroundColor:"#000",zIndex:2},children:(0,Kg.jsx)(Gle,{type:t})})]})]})}var ece=(0,hp.Pi)($le),tce=i(98955),ice=i.n(tce);function ace(e){var t=e.watermark,i=(0,dx.Z)({type:"default"}),a=(0,n.Z)(i,2),r=a[0],o=a[1];return(0,Kg.jsx)("div",{className:ice().wrap,children:(0,Kg.jsxs)("div",{className:ice().left,children:[(0,Kg.jsx)("div",{style:{color:"rgba(0, 0, 0, 0.5)",marginBottom:16,textAlign:"center"},children:"\u89c6\u9891\u9884\u89c8\u4e2d\u5305\u542b\u7684\u97f3\u4e50\u4eba\u58f0\u6c34\u5370\uff0c\u5c06\u5728\u4e0b\u8f7d\u540e\u81ea\u52a8\u53bb\u9664"}),(0,Kg.jsx)(ece,{type:r.type,watermark:t}),(0,Kg.jsxs)("div",{className:ice().type,children:[(0,Kg.jsx)("span",{style:{marginRight:16},children:"\u573a\u666f\u6837\u673a\u9884\u89c8"}),(0,Kg.jsxs)(FP.ZP.Group,{value:r.type,onChange:e=>{o({type:e.target.value}),Km("download_002",{action_label:e.target.value})},children:[(0,Kg.jsx)(FP.ZP,{value:"default",children:"\u9ed8\u8ba4"}),(0,Kg.jsxs)(FP.ZP,{value:"ShiPinHao",children:[(0,Kg.jsx)(iP,{type:"icona-shipinhao1"}),"\u89c6\u9891\u53f7"]}),(0,Kg.jsxs)(FP.ZP,{value:"DouYin",children:[(0,Kg.jsx)(iP,{type:"icondouyin"}),"\u6296\u97f3"]}),"iconkuaishou",(0,Kg.jsxs)(FP.ZP,{value:"KuaiShou",children:[(0,Kg.jsx)(iP,{type:"iconkuaishou"}),"\u5feb\u624b"]})]}),(0,Kg.jsx)("div",{children:"\u6837\u673a\u4ec5\u4f9b\u9884\u89c8\u5c55\u793a\uff0c\u4e0b\u8f7d\u4e0d\u5e26\u6837\u673a\u6548\u679c"})]})]})})}var nce=e=>(0,Kg.jsxs)("div",(0,u.Z)((0,u.Z)({className:"upload-icon"},e),{},{children:[(0,Kg.jsx)(iP,{type:"iconic_image_upload_mult",style:{fontSize:20}}),(0,Kg.jsx)("div",{className:"text",children:"\u4e0a\u4f20"})]}));function rce(e){var t=e.currentTime,i=e.onchange,a=NJ(),o=a.checkLoginStatus,s=(0,dx.Z)(),l=(0,n.Z)(s,2),c=l[0],d=l[1],p=Np(),v=p.templateInfo,m=Ep(),h=m.value,f=Ib(),g=(0,r.useState)(null===v||void 0===v?void 0:v.cover_url),x=(0,n.Z)(g,2),y=x[0],b=x[1],_=Yf(),j=_.showBindPhoneModal,w=F0({setProgress:e=>{d({progress:e})},onSucceed:(e,t)=>{setTimeout((()=>{b(t.url),i({path:t.path,url:t.url}),d({progress:void 0})}),1e3)},onError:()=>{d({status:"error"})}}),k=w.uploadStat,T=(e,i)=>{if(!t||t<=0||null!==c&&void 0!==c&&c.progress)return null;var a=i/h.height,n=(e,t)=>t[0]<=e&&t[1]>=e,r=()=>{var e=0;if(f)for(var i=0;i<f.length;i++)n(t,f[i])&&(e=i);return e},o=()=>{var e=t,i=r();return i>0&&(e-=f[i-1][1]),e};return(0,Kg.jsx)(LI,{canvasInfo:(0,u.Z)((0,u.Z)({},h),{},{scale:a}),currentTime:o(),templateIndex:r()},"1")};return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"cover-upload",children:[(0,Kg.jsx)("div",{className:"user-upload-btn",children:(0,Kg.jsx)("div",{className:"btn",children:(0,Kg.jsx)(qW.Z,{accept:"image/png, image/jpeg",beforeUpload:e=>{var t;1!==(null===(t=lA())||void 0===t?void 0:t.bind_phone)?j():O0(e,(t=>{var i=512e3;if(e.size<=i){var a=[(0,u.Z)((0,u.Z)({},t),{},{status:"uploading",id:t.file.uid})];c.uploadFile&&(a=a.concat(c.uploadFile)),k(a[0].file)}else xp.default.info("\u6700\u5927\u4e0a\u4f20500k\u6587\u4ef6")}))},showUploadList:!1,children:(0,Kg.jsx)(nce,{onClick:e=>{Km("download_007");var t,i=o();i?e.stopPropagation():1!==(null===(t=lA())||void 0===t?void 0:t.bind_phone)&&(e.stopPropagation(),j())}})})})}),(0,Kg.jsxs)("div",{className:"cover-pic-time",style:{background:y||t?"#f0f0f0":""},children:[t<=0&&!(null!==c&&void 0!==c&&c.progress)&&(0,Kg.jsx)("img",{style:{width:"auto",height:65},src:y,alt:""}),(null===c||void 0===c?void 0:c.progress)&&(0,Kg.jsx)(tM.Z,{percent:null===c||void 0===c?void 0:c.progress,type:"circle",width:50,strokeColor:"#5A4CDB"}),T(114,67)]})]}),(0,Kg.jsx)("div",{className:"upload-tip",children:"\uff08\u82e5\u9700\u4e0a\u4f20\u5c01\u9762\uff0c\u5efa\u8bae\u5927\u5c0f\u4e0d\u8d85\u8fc7500K\uff09"})]})}var oce=(0,hp.Pi)((e=>{var t=e.value,i=e.max,a=e.onChange,n=Ub(),o=n.currentTime,s=n.setCurrentTime,l=Yb(),c=l.isPlaying,d=l.pauseVideo,u=l.playVideo,p=(0,r.useRef)();function v(){p.current&&p.current.blur()}var m=(0,Kg.jsx)("div",{className:"submit-play",onClick:c?d:u,children:(0,Kg.jsx)(iP,{type:c?"iconzanting":"iconbofang"})});return(0,Kg.jsxs)("div",{className:"static-video",children:[(0,Kg.jsxs)("div",{className:"slider-wrap",children:[m,(0,Kg.jsx)(TP.Z,{className:"slider-wrap-ant",handleStyle:{background:"#5A4CDB",width:10,height:16,borderRadius:0,top:-10,borderBottomLeftRadius:"50%",borderBottomRightRadius:"50%"},ref:p,max:i,value:o,tooltipVisible:!0,onChange:e=>{s(e)},onAfterChange:v,style:{width:"98%"},tipFormatter:e=>e!==t&&(0,Kg.jsx)("div",{style:{top:30,color:"red"},onMouseDown:Ph,onClick:()=>{a(e),v(),Km("download_005")},children:"\u8bbe\u4e3a\u5c01\u9762"}),getTooltipPopupContainer:e=>e,tooltipPlacement:"bottom",marks:null!==t&&void 0!==t&&t?{[t]:(0,Kg.jsx)("div",{onClick:()=>{a(),v(),Km("download_006")},children:"\u53d6\u6d88\u5c01\u9762"})}:{}})]}),(0,Kg.jsx)("div",{className:"static-tip",children:"\u63d0\u793a\uff1a\u70b9\u51fb\u64ad\u653e\u89c6\u9891\uff0c\u9009\u62e9\u9002\u5408\u7684\u89c6\u9891\u5e27\u4f5c\u4e3a\u5c01\u9762"})]})}));function sce(e){for(var t=iw(),i=Rw(),a=0,r=0,o=0,s=0;s<t.length;s++){var l=(0,n.Z)(t[s],2),c=l[0],d=l[1];if(e>=c&&e<d){o=s,r=e-c;break}}for(var u=0;u<i.length;u++){var p=i[u].videoInfo,v=p.allAnimationTime,m=p.speed,h=void 0===m?1:m;if(u===o){a+=r/(1/h);break}a+=v}return a}function lce(e){var t=e.watermark,i=Np(),a=i.templateInfo,o=(0,r.useState)(!1),s=(0,n.Z)(o,2),l=s[0],c=(s[1],(0,r.useState)((null===a||void 0===a?void 0:a.cover_time)||0)),d=(0,n.Z)(c,2),u=d[0],v=d[1],h=Mw(),f=(0,n.Z)(h,1),g=f[0],x=function(){var e=(0,p.Z)(m().mark((function e(t,i){var a;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:v(i),a=sce(i),$A({info:{cover_time:a,cover_path:null===t||void 0===t?void 0:t.path},onSuccess:e=>{Fp(null===t||void 0===t?void 0:t.url),Op(a)}});case 3:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}();return(0,Kg.jsxs)("div",{className:"video-cover-wrap",children:[(0,Kg.jsx)("div",{className:"video-cover-preivew-video",children:(0,Kg.jsx)(EP,{spaceControl:!l,watermark:t})}),(0,Kg.jsx)("div",{style:{display:"flex",alignItems:"center",marginBottom:20,marginTop:20},hidden:l,children:(0,Kg.jsx)(oce,{value:null!==u&&void 0!==u?u:0,max:Math.floor(g),onChange:e=>{x(null,e)}})}),(0,Kg.jsx)(rce,{currentTime:u,onchange:e=>{x(e,0)}})]})}var cce=(0,hp.Pi)(lce);function dce(e){var t=e.platform,i=void 0===t?"":t,a=lf(),o=a.value,s=a.close,l=Yb(),c=l.pauseVideo,d=(0,r.useState)(),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=()=>{s()},h=(0,r.useMemo)((()=>{var e=lA(),t=e.vip_type;return"480P"===p&&0===t}),[p]);return(0,Kg.jsx)(QJ,{visible:Boolean(o),width:1e3,footer:!1,destroyOnClose:!0,onCancel:m,centered:!0,maskClosable:!1,children:(0,Kg.jsxs)("div",{className:Lle().wrap,children:[(0,Kg.jsx)("div",{className:Lle().left,children:(0,Kg.jsxs)(YP.Z,{onChange:e=>{c(),qb(0),Km("download_001",{action_label:e})},children:[(0,Kg.jsx)(YP.Z.TabPane,{tab:"\u89c6\u9891\u9884\u89c8",children:(0,Kg.jsx)(ace,{watermark:h})},"preview"),(0,Kg.jsx)(YP.Z.TabPane,{tab:(0,Kg.jsx)("div",{style:{position:"relative"},children:(0,Kg.jsx)("span",{children:"\u89c6\u9891\u5c01\u9762\u8bbe\u7f6e"})}),children:(0,Kg.jsx)(cce,{watermark:h})},"cover")]})}),(0,Kg.jsx)("div",{className:Lle().right,children:(0,Kg.jsx)(Mle,{close:m,platform:i,onChange:v})})]})})}var uce=i(28277),pce=i.n(uce);function vce(e){var t=e.type,i=e.close,a=uf(),n=a.open,r=pf(),o=r.teamId,s="memberLess"===t,l=()=>{SA().then((e=>{var t;0===(null===e||void 0===e?void 0:e.code)?(Ym({team_id:o,action_type:"dlSetInviteReg"}),xp.default.success("\u9080\u8bf7\u94fe\u63a5\u590d\u5236\u6210\u529f"),navigator.clipboard.writeText(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.url),i()):xp.default.error(null===e||void 0===e?void 0:e.msg)}))};return(0,Kg.jsxs)("div",{className:pce().wrap,children:[(0,Kg.jsx)("div",{className:pce().header,children:s?"\u5f53\u524d\u56e2\u961f\u72b6\u6001\u65e0\u4e0b\u8f7d\u673a\u4f1a":"\u56e2\u961f\u72b6\u6001\u4e0b\u8f7d\u673a\u4f1a\u5df2\u7528\u5b8c"}),(0,Kg.jsx)("div",{className:pce().desc,children:s?"\u9080\u8bf72\u540d\u597d\u53cb\u52a0\u5165\u56e2\u961f\uff0c\u5373\u53ef\u83b7\u5f975\u6b21\u4e0b\u8f7d\u673a\u4f1a":"\u9080\u8bf7\u597d\u53cb\u52a0\u5165\u56e2\u961f\u6216\u6ce8\u518c\u5373\u53ef\u83b7\u5f971\u6b21\u4e0b\u8f7d\u673a\u4f1a"}),(0,Kg.jsxs)("div",{className:pce().buttonWarp,children:[s?null:(0,Kg.jsx)(CS.Z,{className:pce().buttonLeft,onClick:l,children:"\u9080\u8bf7\u597d\u53cb\u6ce8\u518c"}),(0,Kg.jsx)(CS.Z,{className:pce().buttonRight,type:"primary",onClick:()=>{Ym(s?{team_id:o,action_type:"memberLessInvite"}:{team_id:o,action_type:"dlSetInviteJoin"}),n()},children:s?"\u9080\u8bf7\u6210\u5458\u52a0\u5165\u56e2\u961f":"\u9080\u8bf7\u597d\u53cb\u52a0\u5165\u56e2\u961f"})]})]})}function mce(){var e=pf(),t=e.visible,i=e.close,a=e.type;return(0,Kg.jsx)(nA.Z,{visible:t,onCancel:i,width:427,destroyOnClose:!0,footer:!1,centered:!0,maskClosable:!1,children:(0,Kg.jsx)(vce,{type:a,close:i})})}var hce=i(36619),fce=i.n(hce),gce=VP.Z.TextArea,xce=()=>{var e=uf(),t=e.value,i=e.close,a=(0,r.useState)(null),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=pf(),d=c.close,u=c.teamId,p=()=>{NA().then((e=>{0===(null===e||void 0===e?void 0:e.code)?l(null===e||void 0===e?void 0:e.data):xp.default.error(null===e||void 0===e?void 0:e.msg)}))};(0,r.useEffect)((()=>{t&&(d(),p())}),[t]);var v=()=>{Ym({team_id:u,action_type:"copyInviteLink"});var e=document.getElementById("biao1");null===e||void 0===e||e.select(),document.execCommand("Copy")};return(0,Kg.jsx)(QJ,{visible:t,width:427,onCancel:i,footer:null,children:(0,Kg.jsxs)("div",{className:fce().inviteMembersModal,children:[(0,Kg.jsx)("div",{className:fce().inviteMembersModalTop,children:"\u9080\u8bf7\u6210\u5458"}),(0,Kg.jsx)(gce,{bordered:!1,rows:4,className:fce().inviteMembersModalContent,id:"biao1",value:"".concat(null===s||void 0===s?void 0:s.username," \u9080\u8bf7\u4f60\u52a0\u5165\u79c0\u591a\u591a\u9879\u76ee\u2014").concat(null===s||void 0===s?void 0:s.teamName," \u70b9\u51fb\u94fe\u63a5\u52a0\u5165:").concat(null===s||void 0===s?void 0:s.url)}),(0,Kg.jsx)("div",{className:fce().inviteMembersModalFooter,onClick:()=>v(),children:"\u590d\u5236\u94fe\u63a5"})]})})},yce=xce,bce=i(34138),_ce=i.n(bce);function jce(e){var t=e.setPlatform,i=RJ(),a=i.open,n=(0,Kg.jsx)(SH.Z,{className:_ce().shareDropdownMenu,onClick:e=>{Om(),a(),t(e.key)},children:[{icon:"icondiannao",name:"",txt:"\u4e0b\u8f7d\u5230\u7535\u8111"},{icon:"icona-kuaishou1",name:"kuaishou",txt:"\u53d1\u5e03\u5230\u5feb\u624b"}].map((e=>(0,Kg.jsxs)(SH.Z.Item,{className:_ce().shareDropdownMenuItem,children:[(0,Kg.jsx)(iP,{type:e.icon,className:_ce().shareDropdownMenuItemIcon}),e.txt]},e.name)))});return(0,Kg.jsxs)("div",{className:_ce()["down-load"],id:"down-load",children:[(0,Kg.jsx)(xF.Z,{title:"\u4e0b\u8f7d",getTooltipContainer:e=>e,children:(0,Kg.jsxs)("div",{className:_ce()["down-load-left"],onClick:()=>{Om(),t(""),a()},children:[(0,Kg.jsx)(iP,{type:"iconxiazai1",className:_ce()["down-load-left-icon"]}),(0,Kg.jsx)("span",{children:"\u9ad8\u6e05\u89c6\u9891\u4e0b\u8f7d"})]})}),(0,Kg.jsx)(NH.Z,{overlay:n,trigger:["click"],getPopupContainer:()=>document.getElementById("xiudodo"),children:(0,Kg.jsx)("span",{className:_ce()["down-load-right"],children:(0,Kg.jsx)(Ez.Z,{style:{fontSize:"17px"}})})})]})}var wce=jce,kce=()=>{var e=(0,r.useState)(""),t=(0,n.Z)(e,2),i=t[0],a=t[1];return(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)(kle,{}),(0,Kg.jsx)(R$,{}),(0,Kg.jsx)(e$,{}),(0,Kg.jsx)(Tle,{}),(0,Kg.jsx)(Sle,{}),(0,Kg.jsx)(dce,{platform:i}),(0,Kg.jsx)(mce,{}),(0,Kg.jsx)(yce,{}),(0,Kg.jsx)(wce,{setPlatform:a})]})},Tce=kce,Zce=i(74567),Cce=i.n(Zce),Nce=e=>{var t=e.type,i=df(),a=vf(),n=sf(),o=n.value,s=n.open,l=a.value,c=a.close,d=i.value,u=i.close,p="\u4f5c\u54c1"===t?l:d,v="\u4f5c\u54c1"===t?c:u,m=e=>{e&&Hm({limit_type:"\u4f5c\u54c1"===t?"download":"draft",click_type:e}),window.open("\u4f5c\u54c1"===t?"https://xiudodo.com/myspace/videos":"https://xiudodo.com/myspace/drafts","_blank"),v()},h=()=>{Hm({limit_type:"\u4f5c\u54c1"===t?"download":"draft",click_type:"openVip"}),v(),o||s()},f=oA();return(0,r.useEffect)((()=>{p&&qm({vip_type:f.vip_type,limited_type:"\u4f5c\u54c1"===t?"dlMemory":"draftMemory"})}),[p]),(0,Kg.jsx)(QJ,{closable:!1,title:null,style:{top:"25%"},visible:p,onCancel:v,wrapClassName:"capacityToRemindModal",width:475,zIndex:10111011,keyboard:!1,footer:!1,maskClosable:!1,children:(0,Kg.jsxs)("div",{className:Cce().capacityToRemindWarp,children:[(0,Kg.jsxs)("div",{className:Cce().capacityToRemindWarpTop,children:[(0,Kg.jsx)("div",{className:Cce().capacityToRemindWarpTopIcon,children:(0,Kg.jsx)(_4.Z,{})}),t,"\u50a8\u5b58\u7a7a\u95f4\u4e0d\u8db3"]}),(0,Kg.jsxs)("div",{className:Cce().capacityToRemindWarpTopCont,children:["\u60a8\u5f53\u524d\u8d26\u53f7",t,"\u5b58\u50a8\u5df2\u8fbe\u4e0a\u9650\uff0c\u8bf7\u81f3",(0,Kg.jsx)("span",{onClick:()=>m(),children:"\u3010\u5de5\u4f5c\u53f0\u3011"}),"\u5220\u9664\u90e8\u5206",t,"\u6216\u5347\u7ea7VIP \u518d\u8fdb\u884c\u7f16\u8f91\u3002"]}),(0,Kg.jsxs)("div",{className:Cce().capacityToRemindWarpTopFooter,children:[(0,Kg.jsxs)("div",{className:Cce().button1,onClick:()=>m("toDel"),children:["\u5220\u9664",t]}),(0,Kg.jsx)("div",{className:Cce().button2,onClick:h,children:"\u5347\u7ea7VIP"})]})]})})},Sce=Nce,Ice=i(28278),Ace=i.n(Ice);function Pce(e){var t=e.bindOpenMember,i=e.children,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=()=>(0,Kg.jsxs)("div",{className:Ace().openMember,children:[(0,Kg.jsxs)("div",{className:Ace().openMemberTop,children:[(0,Kg.jsxs)("div",{className:Ace().topItem,children:[(0,Kg.jsx)("img",{className:Ace().topItemImg,src:(0,fb.Sx)("/image/VIP/muban.png"),alt:""}),(0,Kg.jsx)("div",{className:Ace().topItemTxt,children:"\u6d77\u91cf\u6a21\u677f"})]}),(0,Kg.jsxs)("div",{className:Ace().topItem,children:[(0,Kg.jsx)("img",{className:Ace().topItemImg,src:(0,fb.Sx)("/image/VIP/wushuiyin.png"),alt:""}),(0,Kg.jsx)("div",{className:Ace().topItemTxt,children:"\u9ad8\u6e05\u65e0\u6c34\u5370"})]}),(0,Kg.jsxs)("div",{className:Ace().topItem,children:[(0,Kg.jsx)("img",{className:Ace().topItemImg,src:(0,fb.Sx)("/image/VIP/shangyong.png"),alt:""}),(0,Kg.jsx)("div",{className:Ace().topItemTxt,children:"\u4e2a\u4eba\u5546\u7528"})]})]}),(0,Kg.jsxs)("div",{className:Ace().openMemberContent,style:{backgroundImage:"url(".concat((0,fb.Sx)("/image/VIP/beijingkuai.png"),")")},children:[(0,Kg.jsx)("div",{className:Ace().contentTag,children:"\u5e74\u4e2d\u949c\u60e0"}),(0,Kg.jsxs)("div",{className:Ace().contentTop,children:[(0,Kg.jsx)("div",{className:Ace().topLeft,children:"\u52a0\u5165\u79c0\u591a\u591a\u4f1a\u5458"}),(0,Kg.jsxs)("div",{className:Ace().topRight,children:[(0,Kg.jsx)("span",{className:Ace().topRightLeft,children:"49"}),(0,Kg.jsx)("span",{className:Ace().topRightRight,children:"\u5143\u8d77"})]})]}),(0,Kg.jsxs)("div",{className:Ace().contentBottom,children:[(0,Kg.jsx)("div",{className:Ace().bottomLeft,children:"\u73b0\u5728\u52a0\u5165\u53ef\u4eab\u53d7\u6700\u4f4e\u4ef7\u683c"}),(0,Kg.jsx)("div",{className:Ace().bottomRight,onClick:()=>{t(),l(!1)},children:"\u7acb\u5373\u6210\u4e3a\u4f1a\u5458"})]})]}),(0,Kg.jsxs)("div",{className:Ace().openMemberBottom,children:[(0,Kg.jsx)("div",{className:Ace().openMemberBottomTitle,children:"\u73b0\u5728\u52a0\u5165\uff0c\u8fd8\u9001\u4ee5\u4e0b\u7279\u6743\uff1a"}),(0,Kg.jsxs)("div",{className:Ace().openMemberBottomTitleItem,children:[(0,Kg.jsx)("img",{className:Ace().itemImg,src:(0,fb.Sx)("/image/VIP/duihao.png"),alt:""}),(0,Kg.jsx)("span",{children:"70+AI\u667a\u80fd\u914d\u97f3\u4efb\u9009\u4f7f\u7528"})]}),(0,Kg.jsxs)("div",{className:Ace().openMemberBottomTitleItem,children:[(0,Kg.jsx)("img",{className:Ace().itemImg,src:(0,fb.Sx)("/image/VIP/duihao.png"),alt:""}),(0,Kg.jsx)("span",{children:"\u4e91\u7aef\u50a8\u5b58\u7a7a\u95f4\u6700\u9ad810G"})]}),(0,Kg.jsxs)("div",{className:Ace().openMemberBottomTitleItem,children:[(0,Kg.jsx)("img",{className:Ace().itemImg,src:(0,fb.Sx)("/image/VIP/duihao.png"),alt:""}),(0,Kg.jsx)("span",{children:"\u767e\u4e07\u6b63\u7248\u5b57\u4f53\u3001\u56fe\u7247\u3001\u5143\u7d20\u3001\u82b1\u5b57\u7d20\u6750"})]}),(0,Kg.jsxs)("div",{className:Ace().openMemberBottomTitleItem,children:[(0,Kg.jsx)("img",{className:Ace().itemImg,src:(0,fb.Sx)("/image/VIP/duihao.png"),alt:""}),(0,Kg.jsx)("span",{children:"\u89c6\u9891\u9ad8\u901f\u4f18\u5148\u5408\u6210"})]})]})]});return(0,Kg.jsx)(MR,{visible:s,onVisibleChange:e=>{l(e)},content:c,children:i})}var Mce=Pce,Ece=i(56051),Lce=i.n(Ece),Dce=e=>{var t=Af();switch(e){case 0:return{text:"\u4fdd\u5b58",iconType:"iconweibaocun",tooltip:(0,Kg.jsxs)("div",{style:{padding:6},children:[(0,Kg.jsx)("p",{style:{fontSize:14,marginBottom:6},children:"\u6240\u6709\u7f16\u8f91\u90fd\u4f1a\u81ea\u52a8\u4fdd\u5b58\uff01"}),(0,Kg.jsxs)("p",{style:{marginBottom:0},children:["\u5feb\u6377\u952e",Ld.save,"\uff0c\u6216\u624b\u52a8\u70b9\u51fb\u4fdd\u5b58"]})]})};case 1:return{text:"\u4fdd\u5b58\u4e2d",iconType:"iconbaocunzhong"};case 2:return{text:"".concat(Lce()(t).format("HH:mm")," \u5df2\u4fdd\u5b58"),iconType:"iconbaocunchenggong",tooltip:(0,Kg.jsxs)("div",{style:{padding:6},children:[(0,Kg.jsx)("p",{style:{fontSize:14,marginBottom:6},children:"\u6240\u6709\u7f16\u8f91\u90fd\u5df2\u81ea\u52a8\u4fdd\u5b58\uff01"}),(0,Kg.jsxs)("p",{style:{marginBottom:0},children:["\u5feb\u6377\u952e",Ld.save,"\uff0c\u6216\u624b\u52a8\u70b9\u51fb\u4fdd\u5b58"]})]})};case 3:return{text:"\u5df2\u81ea\u52a8\u4e3a\u60a8\u4fdd\u5b58"};case 4:return{text:"\u66f4\u6539\u672a\u4fdd\u5b58",iconType:"iconbaocunshibai1",tooltip:"\u8981\u4fdd\u5b58\u60a8\u7684\u8bbe\u8ba1,\u9700\u8981\u767b\u5f55\u6216\u6ce8\u518c"};case 6:case 5:return{text:"\u4fdd\u5b58\u5931\u8d25",iconType:"iconbaocunshibai1",tooltip:"\u6700\u8fd1\u4e00\u6b21\u4fee\u6539\u4fdd\u5b58\u4e8e".concat(Lce()(t).format("HH:mm"))};default:return{text:"\u4fdd\u5b58",iconType:"iconweibaocun",tooltip:"\u6240\u6709\u7f16\u8f91\u90fd\u4f1a\u81ea\u52a8\u4fdd\u5b58\uff01"}}},Rce=i(69561),zce=i.n(Rce),Fce=()=>{var e=Pf(),t=e.stat,i=Dce(t);return(0,Kg.jsx)("div",{id:"userSave",className:hb()("xiudodo-header-item","xiudodo-header-save","xiudodo-header-item-hover",{"xiudodo-header-save-loading":1===t}),style:{padding:"0 3px"},onClick:()=>{Km("header_save"),eP()},children:i.tooltip?(0,Kg.jsx)(xF.Z,{title:i.tooltip,getTooltipContainer:e=>e,children:(0,Kg.jsxs)("div",{className:zce().item,children:[i.iconType&&(0,Kg.jsx)(iP,{type:i.iconType,className:hb()("xiudodo-header-icon",zce().icon)}),i.text]})}):(0,Kg.jsxs)("div",{className:zce().item,children:[i.iconType&&(0,Kg.jsx)(iP,{type:i.iconType,className:hb()("xiudodo-header-icon",zce().icon)}),i.text]})})},Oce=(0,hp.Pi)(Fce),Bce=i(59092),Wce=i.n(Bce);function Vce(e){var t=e.id,i=e.setId,a=e.startSynthesis,o=(0,r.useState)(0),s=(0,n.Z)(o,2),l=s[0],c=s[1],d=(0,r.useState)(""),u=(0,n.Z)(d,2),p=u[0],v=u[1],m=(0,r.useState)(!1),h=(0,n.Z)(m,2),f=h[0],g=h[1],x=(0,r.useState)("\u590d\u5236\u94fe\u63a5\u5206\u4eab"),y=(0,n.Z)(x,2),b=y[0],_=y[1],j=Pp(),w=j.value,k=(0,r.useRef)(null),T=(0,DI.ZP)(IA,{manual:!0,pollingInterval:1e3,pollingWhenHidden:!0,onSuccess:(e,t)=>{var a=e[t[0][0]];a&&("success"!==a.status&&100!==a.progress||"share"===a.type&&(C(),i(""),v("".concat(a.url)),$m("ShareVideo","pupOpen")),"fail"!==a.status&&"recombined"!==a.status||(i(""),g(!0)),c(null===a||void 0===a?void 0:a.progress))}}),Z=T.run,C=T.cancel,N=()=>{$m("ShareVideo","clickCopy");var e=k.current;e.select(),m5()("".concat(p).concat(w)),_("\u94fe\u63a5\u5df2\u590d\u5236\u6210\u529f")};return(0,r.useEffect)((()=>{t&&Z([t])}),[t]),(0,Kg.jsxs)("div",{children:[(0,Kg.jsx)(QJ,{visible:""!==t,footer:!1,width:611,centered:!0,closable:!1,zIndex:99999999999,children:(0,Kg.jsxs)("div",{className:Wce().synthesisModal,children:[(0,Kg.jsx)("div",{className:Wce().synthesisModalTitle,children:"\u5206\u4eab\u89c6\u9891\u6b63\u5728\u52aa\u529b\u52a0\u8f7d\u4e2d"}),(0,Kg.jsx)(tM.Z,{percent:l,className:Wce().synthesisModalProgress}),(0,Kg.jsx)("div",{className:Wce().synthesisModalFooter,children:"\u89c6\u9891\u8d44\u6e90\u7ec4\u4ef6\u6574\u5408\u4e2d,\u9884\u8ba1\u5927\u7ea61\u5206\u949f"})]})}),(0,Kg.jsx)(QJ,{visible:""!==p,onCancel:()=>{v("")},footer:!1,width:717,centered:!0,zIndex:99999999999,children:(0,Kg.jsxs)("div",{className:Wce().successModal,children:[(0,Kg.jsx)("div",{className:Wce().successModalTitle,children:"\u5206\u4eab\u89c6\u9891\u9884\u89c8"}),(0,Kg.jsx)("div",{className:Wce().successModalQRcode,children:(0,Kg.jsx)(i$.ZP,{className:"QRCode",value:p,size:116})}),(0,Kg.jsx)("div",{className:Wce().successModalText,children:"\u624b\u673a\u626b\u7801\u5206\u4eab"}),(0,Kg.jsxs)("div",{className:Wce().successModalFooter,children:[(0,Kg.jsx)("div",{className:Wce().footerTitle,children:"\u5206\u4eab\u89c6\u9891\u94fe\u63a5"}),(0,Kg.jsxs)(VP.Z.Group,{compact:!0,children:[(0,Kg.jsx)(VP.Z,{ref:k,className:Wce().footerInput,style:{width:"calc(100% - 130px)"},defaultValue:"".concat(p).concat(w),value:"".concat(p).concat(w)}),(0,Kg.jsx)(CS.Z,{className:Wce().footerButton,type:"primary",onClick:N,children:b})]})]})]})}),(0,Kg.jsx)(QJ,{visible:f,onCancel:()=>{},footer:!1,width:511,centered:!0,zIndex:99999999999,children:(0,Kg.jsxs)("div",{className:Wce().fillModal,children:[(0,Kg.jsx)(WJ.Z,{className:Wce().fillModalIcon}),(0,Kg.jsx)("div",{className:Wce().fillModalText,children:"\u54ce\u5440,\u89c6\u9891\u8d44\u6e90\u4e22\u5931,\u53ef\u80fd\u9700\u8981\u60a8\u518d\u91cd\u65b0\u751f\u6210\u4e00\u4e0b\u54e6!"}),(0,Kg.jsx)(CS.Z,{type:"primary",className:Wce().fillModalButton,onClick:()=>{g(!1),a()},children:"\u91cd\u65b0\u751f\u6210"})]})})]})}var Uce=Vce;function Gce(e){var t={share_type:2,type:"video",version_id:0,template_id:e};return bp.g.post("/api/get-edit-share",{body:JSON.stringify(t),headers:{"Content-Type":"application/x-www-form-urlencoded"}})}function Xce(e){return bp.g.get("/api/get-edit-share-link?template_id=".concat(e))}function qce(e){var t="approval_doing",i=NJ(),a=i.checkLoginStatus,n=lA(),r=Yf(),o=r.showBindPhoneModal,s=Np(),l=s.templateInfo,c=s.updateApprovalUrl,d=()=>{xp.default.destroy(t)},u=e=>{Gce(e).then((e=>{1===(null===e||void 0===e?void 0:e.stat)?(c(e.url),window.open("https://pre.xiudodo.com".concat(e.url)),d()):(xp.default.error(null===e||void 0===e?void 0:e.msg),d())}))},p=e=>{Xce(e).then((t=>{1===(null===t||void 0===t?void 0:t.stat)?(d(),1===t.data.status?u(e):window.open("https://pre.xiudodo.com".concat(l.approval_url))):(xp.default.error(null===t||void 0===t?void 0:t.msg),d())}))},v=()=>{a()||(1!==(null===n||void 0===n?void 0:n.bind_phone)?o():(xp.default.loading({content:"\u6b63\u5728\u751f\u6210\u5206\u4eab\u94fe\u63a5",key:t,duration:0}),$A({onSuccess:e=>{l.approval_url&&""!==l.approval_url?p(e.info.id):u(e.info.id)}})))};return{toApprovel:v}}function Hce(){var e=qce(),t=e.toApprovel,i=(0,r.useState)(""),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=sf(),c=NJ(),d=c.checkLoginStatus,u=Yf(),p=u.showBindPhoneModal,v=oA(),m=(0,DI.ZP)(wA,{manual:!0,onSuccess:e=>{1005===(null===e||void 0===e?void 0:e.code)&&"not_vip"===e.data.err&&l.open(),null!==e&&void 0!==e&&e.download_id&&s(e.download_id)}}),h=()=>{d()||(1!==(null===v||void 0===v?void 0:v.bind_phone)?p():$A({onSuccess:e=>{var t;1===e.stat&&m.run({id:null===(t=e.info)||void 0===t?void 0:t.id,pixel_type:"720",type:"share"})}}))},f=()=>{t()};return(0,Kg.jsxs)(xF.Z,{title:"\u5206\u4eab",getTooltipContainer:e=>e,children:[(0,Kg.jsxs)("div",{id:"userSave",className:hb()("xiudodo-header-preview","xiudodo-header-share"),onClick:()=>{$m("ShareVideo","clickShare"),f()},children:[(0,Kg.jsx)(iP,{type:"icondouyinzhuanfa",className:"xiudodo-header-icon"}),(0,Kg.jsx)("span",{className:"xiudodo-header-item-desc",children:"\u5206\u4eab"})]}),(0,Kg.jsx)(Uce,{id:o,setId:s,startSynthesis:h})]})}var Yce=Hce,Kce=i(2461),Qce=i.n(Kce),Jce=i(67986),$ce=i.n(Jce);function ede(e){var t=e.templateTitle,i=(0,r.useState)(!1),a=(0,n.Z)(i,2),o=a[0],s=a[1],l=(0,r.useState)("".concat(t,"-\u526f\u672c")),c=(0,n.Z)(l,2),d=c[0],u=c[1],p=()=>{var e=""==d||d==t?"".concat(t,"-\u526f\u672c"):d;$A({onSuccess:i=>{var a;1===i.stat&&vv({id:null===i||void 0===i||null===(a=i.info)||void 0===a?void 0:a.id,title:e}).then((e=>{var i,a;0===e.code?(s(!1),xp.default.success("\u521b\u5efa\u526f\u672c\u6210\u529f"),window.open(null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.editPath,"_blank")):1005===e.code&&"contentBlock"===(null===(i=e.data)||void 0===i?void 0:i.message)?(xp.default.error("\u7cfb\u7edf\u68c0\u6d4b\u5f53\u524d\u6587\u672c\u5b58\u5728\u8fdd\u89c4\u5acc\u7591"),u("".concat(t,"-\u526f\u672c"))):xp.default.error(e.msg)}))}})};return(0,r.useEffect)((()=>{u("".concat(t,"-\u526f\u672c"))}),[t]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsx)("div",{onClick:()=>{Km("createBackup"),s(!0)},className:$ce().createCopy,children:"\u521b\u5efa\u526f\u672c"}),(0,Kg.jsx)(QJ,{visible:o,width:319,onCancel:()=>{s(!1)},footer:null,children:(0,Kg.jsxs)("div",{className:$ce().fileModal,children:[(0,Kg.jsx)("div",{className:$ce().fileModalTitle,children:"\u53e6\u5b58\u4e3a"}),(0,Kg.jsx)(VP.Z,{onKeyDown:Ph,value:d,onChange:e=>u(e.target.value),bordered:!1}),(0,Kg.jsx)("div",{className:$ce().fileModalLine}),(0,Kg.jsxs)("div",{className:$ce().fileModalFooter,children:[(0,Kg.jsx)(CS.Z,{className:$ce().fileModalFooterButton,onClick:()=>{s(!1)},children:"\u53d6\u6d88"}),(0,Kg.jsx)(CS.Z,{type:"primary",onClick:p,children:"\u786e\u8ba4"})]})]})})]})}var tde=ede,ide=i(88510),ade=i.n(ide);function nde(e){var t=e.templateTitle,i=e.updateTitle,a=function(){var e=(0,p.Z)(m().mark((function e(a){var n;return m().wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=a||"\u672a\u547d\u540d\u7684\u8bbe\u8ba1",a===t){e.next=4;break}return e.next=4,$A({info:{title:n},onSuccess:e=>{1===e.stat&&(i(n),xp.default.success("\u4fee\u6539\u6210\u529f"))}});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,Kg.jsx)(N6,{templateTitle:t,alterName:a,styles:ade()})}var rde=nde,ode=i(88324),sde=i.n(ode),lde=SH.Z.SubMenu;function cde(){var e=Of(),t=e.referenceLineX,i=e.referenceLineY,a=e.referenceLineShow,n=x5(),r=n.showLine,o=n.addY,s=n.addX,l=n.eliminate;return(0,Kg.jsx)("div",{className:sde().referenceLine,children:(0,Kg.jsxs)(SH.Z,{getPopupContainer:()=>document.querySelector("#xiudodo"),children:[(0,Kg.jsxs)(SH.Z.Item,{onClick:r,className:hb()(sde().referenceLineMenuItem,{[sde().referenceLineMenuItemActive]:a}),children:[(0,Kg.jsx)("span",{children:"\u663e\u793a\u6807\u5c3a\u548c\u53c2\u8003\u7ebf"}),(0,Kg.jsx)("span",{children:Ld.referenceLine})]},"showLine"),(0,Kg.jsxs)(lde,{title:"\u65b0\u5efa\u53c2\u8003\u7ebf",popupOffset:[-10,-30],popupClassName:"referenceLineSubMenu",children:[(0,Kg.jsx)(SH.Z.Item,{className:sde().referenceLineSubMenuItem,onClick:s,children:"\u6a2a\u5411\u53c2\u8003\u7ebf"},"xLine"),(0,Kg.jsx)(SH.Z.Item,{className:sde().referenceLineSubMenuItem,onClick:o,children:"\u7ad6\u5411\u53c2\u8003\u7ebf"},"yLine")]},"addLine"),(0,Kg.jsx)(SH.Z.Item,{onClick:l,disabled:0==t.length&&0==i.length,children:"\u6e05\u9664\u53c2\u8003\u7ebf"},"delLine")]})})}var dde=cde;function ude(e){var t=(0,_p.Z)(),i=e.className,a=(0,r.useState)(!1),o=(0,n.Z)(a,2),s=o[0],l=o[1],c=Pp(),d=c.update,u=c.value,p=Ep(),v=p.value,m=()=>{navigator.clipboard.writeText("\u8349\u7a3fID\uff1a".concat(t.upicId)),xp.default.success("\u8349\u7a3fID\u590d\u5236\u6210\u529f\uff01")},h=(0,Kg.jsx)(SH.Z,{children:(0,Kg.jsxs)("div",{className:Qce().fileDropdownMenu,children:[(0,Kg.jsx)(rde,{templateTitle:u,updateTitle:d}),(0,Kg.jsxs)("div",{className:Qce().fileDropdownMenuXs,children:[v.width,"\u50cf\u7d20 X ",v.height,"\u50cf\u7d20"]}),(0,Kg.jsxs)("div",{className:Qce().fileDropdownMenuPicId,onClick:m,children:["\u8349\u7a3fID\uff1a",t.upicId,(0,Kg.jsx)(iP,{type:"copy",style:{marginLeft:18,fontSize:15}})]}),(0,Kg.jsx)("div",{className:Qce().fileDropdownMenuLine}),(0,Kg.jsx)("div",{onClick:()=>{l(!1)},children:(0,Kg.jsx)(tde,{templateTitle:u})}),(0,Kg.jsx)("div",{className:Qce().fileDropdownMenuLine}),(0,Kg.jsx)(dde,{}),(0,Kg.jsx)("div",{className:Qce().fileDropdownMenuLine}),(0,Kg.jsx)("div",{className:Qce().fileDropdownMenuWork,onClick:()=>{Km("toWorkspace"),window.open("//xiudodo.com/myspace/videos","_blank")},children:"\u6211\u7684\u5de5\u4f5c\u53f0"})]})});return(0,Kg.jsx)(Kg.Fragment,{children:(0,Kg.jsx)(NH.Z,{overlay:h,visible:s,placement:"bottomLeft",getPopupContainer:e=>e,overlayClassName:Qce().referenceLineDropdown,onVisibleChange:e=>{l(e)},children:(0,Kg.jsx)("div",{className:hb()(Qce().file,i),children:"\u6587\u4ef6"})})})}var pde=ude,vde=i(19277),mde=i.n(vde),hde=[{label:(0,Kg.jsxs)("div",{className:mde().button,children:[(0,Kg.jsx)(iP,{type:"shijianzhou"}),"\xa0\u4e13\u4e1a\u7248"]}),value:"professional"},{label:(0,Kg.jsxs)("div",{className:mde().button,children:[(0,Kg.jsx)(iP,{type:"jisuban"}),"\xa0\u6781\u901f\u7248"]}),value:"concise"}],fde=()=>{var e=kf(),t=e.editMode,i=e.setEditMode,a=af(),n=a.close,r=e=>{i(e),localStorage.setItem("editMode",e),n(),Km("concise_switch")};return(0,Kg.jsx)("div",{className:mde().SwitchMode,children:(0,Kg.jsx)(FP.ZP.Group,{options:hde,onChange:e=>{var t=e.target.value;r(t)},value:t,optionType:"button",buttonStyle:"solid"})})},gde=(0,hp.Pi)(fde),xde=()=>{var e=of(),t=e.open,i=og(),a=i.openCloseOneKeyReplace,o=Mw(),s=(0,n.Z)(o,1),l=s[0],c=nM(),d=c.isPlaying,u=c.pauseVideo,p=Jk(),v=p.value,m=p.goNext,h=p.goPrev,f=sf(),g=f.open,x=zf(),y=x.setIsAllowShare,b=NJ(),_=b.checkLoginStatus,j=bf(),w=j.showLoginModal,k=(0,r.useState)(!1),T=(0,n.Z)(k,2),Z=T[0],C=T[1],N=sA(),S=()=>{Km("header_preview"),t()},I=()=>{d&&u(),eu()};function A(){var e=document.getElementById("xiudodo");Km("header_fullScreen");var t=document.fullScreen||document.mozFullScreen||document.webkitIsFullScreen;t?document.exitFullscreen&&document.exitFullscreen()||document.mozCancelFullScreen&&document.mozCancelFullScreen()||document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen&&e.requestFullscreen()||e.mozRequestFullScreen&&e.mozRequestFullScreen()||e.webkitRequestFullscreen&&e.webkitRequestFullscreen()||e.msRequestFullscreen&&e.msRequestFullscreen()}var P=()=>{if(Km("header_recharge"),_())return!1;g(),y(!1)};return(0,r.useEffect)((()=>{document.addEventListener("fullscreenchange",(e=>{C(!!document.fullscreenElement)}))}),[]),(0,Kg.jsxs)(Kg.Fragment,{children:[(0,Kg.jsxs)("div",{className:"xiudodo-header-wrap",onMouseDown:I,children:[(0,Kg.jsxs)("div",{className:"xiudodo-header-left",children:[(0,Kg.jsx)("a",{href:"https://xiudodo.com/hello.html",children:(0,Kg.jsxs)("span",{className:"xiudodo-header-goHome xiudodo-header-item",children:["<"," \u9996\u9875"]})}),(0,Kg.jsx)(pde,{className:"xiudodo-header-item xiudodo-header-item-hover"}),(0,Kg.jsx)(xF.Z,{title:"\u5168\u5c4f",getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:"xiudodo-header-item xiudodo-header-item-hover",onClick:A,children:(0,Kg.jsx)(iP,{type:Z?"iconcancel-full-screen":"iconquanping1"})})}),(0,Kg.jsx)(xF.Z,{title:"\u4e0a\u4e00\u6b65 ".concat(Ld.undo),getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:hb()("xiudodo-header-item","xiudodo-header-item-hover",{"xiudodo-header-item-disabled":!v.hasPrev}),onClick:()=>{v.hasPrev&&(Km("header_goPrev"),h())},children:(0,Kg.jsx)(iP,{type:"iconchexiao1"})})}),(0,Kg.jsx)(xF.Z,{title:"\u4e0b\u4e00\u6b65 ".concat(Ld.redo),getTooltipContainer:e=>e,children:(0,Kg.jsx)("div",{className:hb()("xiudodo-header-item","xiudodo-header-item-hover",{"xiudodo-header-item-disabled":!v.hasNext}),onClick:()=>{v.hasNext&&(m(),Km("header_goNext"))},children:(0,Kg.jsx)(iP,{className:"xiudodo-header-next",type:"iconchexiao1"})})}),(0,Kg.jsx)(Oce,{})]}),(0,Kg.jsxs)("div",{className:"xiudodo-header-center",children:[(0,Kg.jsx)(gde,{}),(0,Kg.jsxs)("div",{onClick:()=>{a(!0),Km("onkeyReplace_001\u200b")},className:"xiudodo-header-center-replace",children:[(0,Kg.jsx)(iP,{type:"icontihuan2",style:{marginRight:4}}),"\u4e00\u952e\u66ff\u6362",(0,Kg.jsx)("div",{className:"newFun animate__animated animate__bounce animate__pulse animate__infinite"})]})]}),(0,Kg.jsxs)("div",{className:"xiudodo-header-right",children:[(0,Kg.jsxs)("div",{onClick:w,hidden:N>0,className:"right_login_btn",children:[(0,Kg.jsx)(iP,{type:"huaban1-69i4fm83",className:"right_login_btn_icon"}),"\u767b\u5f55"]}),(0,Kg.jsx)(Mce,{bindOpenMember:P,children:(0,Kg.jsxs)("div",{onClick:P,style:{marginRight:16,whiteSpace:"nowrap",cursor:"pointer",display:"flex",alignItems:"center"},children:[(0,Kg.jsx)(iP,{type:"iconzujian11",className:"xiudodo-header-icon"}),"\u5f00\u901a\u4f1a\u5458"]})}),(0,Kg.jsx)(Yce,{}),(0,Kg.jsx)(xF.Z,{title:"\u9884\u89c8",getTooltipContainer:e=>e,children:(0,Kg.jsxs)("div",{className:"xiudodo-header-preview",onClick:S,children:[(0,Kg.jsx)(iP,{type:"iconbofang",className:"xiudodo-header-icon"}),(0,Kg.jsx)("span",{className:"xiudodo-header-item-desc",children:Th(parseInt("".concat(l/1e3),10))})]})}),(0,Kg.jsx)(Tce,{})]})]}),(0,Kg.jsx)(Sce,{type:"\u4f5c\u54c1"}),(0,Kg.jsx)(Sce,{type:"\u8349\u7a3f"})]})},yde=(0,hp.Pi)(xde);function bde(){return(0,Kg.jsx)(fJ,{header:(0,Kg.jsx)(yde,{}),content:(0,Kg.jsx)(xle,{})})}i(50111);var _de=i(55419);function jde(){window.location.reload()}function wde(){return Ah.closeWindowsLoading(),(0,Kg.jsx)(_de.ZP,{status:"error",title:"\u9875\u9762\u5d29\u6e83\u4e86~~~~~",subTitle:"\u8bf7\u70b9\u51fb\u5237\u65b0\u6309\u94ae\uff0c\u91cd\u65b0\u56de\u5230\u79c0\u591a\u591a.",extra:[(0,Kg.jsx)(CS.Z,{onClick:jde,type:"primary",children:"\u5237\u65b0"},"console")]})}class kde extends r.Component{constructor(e){super(e),this.refresh=()=>{window.location.reload()},this.closeLoading=()=>{Ah.closeWindowsLoading()},this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e,t){console.error(e,t),Gm()}render(){var e=this.state.hasError,t=this.props.children;return e?(0,Kg.jsx)(wde,{}):t}}var Tde=i(12700),Zde=(0,_p.Z)(),Cde=Zde.redirect;function Nde(){var e=(0,_p.Z)(),t=e.redirect,i=(0,Tde.Z)(fb.iU),a=(0,n.Z)(i,1),o=a[0],s=(0,Tde.Z)(fb.Kd),l=(0,n.Z)(s,1),c=l[0];switch((0,r.useEffect)((()=>{ig("ready"===o)}),[o]),(0,r.useEffect)((()=>{tg("ready"===c)}),[c]),t){case"watermark":return(0,Kg.jsx)(r1,{});case"module":case"designer":return(0,Kg.jsx)(iQ,{});default:return(0,Kg.jsx)(bde,{})}}function Sde(){return window.__EDITOR_STOP_RENDER__?null:(0,Kg.jsx)(kde,{children:(0,Kg.jsx)(Nde,{})})}Oe({videoTimerSrc:"//js.xiudodo.com/xiudodo-editor/video/empty_video.mp4",hostName:"//xiudodo.com",cdnHost:"//js.xiudodo.com",fontsPath:"//js.xiudodo.com/fonts/",handImgSrc:"//js.xiudodo.com/xiudodo-editor/image/movie-writeText-animation.png",apis:{getSpecificWord:"/apiv2/get-specific-word-info-new",getAeAnimationDetail:"/api-video/edit-video-asset-detail",getWebmFrameImage:"/video/small-frame-previews"},hpMode:!1,wholeTemplate:!0,backgroundEditable:["designer","module"].includes(Cde),autoCalcTemplateEndTime:["designer","module"].includes(Cde),container:".xiudodo-canvas",assetHoverTip:!["designer","module"].includes(Cde)}),OD(),VD()},39949:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAyCAYAAAAjrenXAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALqADAAQAAAABAAAAMgAAAAD3gl6HAAAHR0lEQVRoBe2Z+28UVRTHz53dstAWSnkl1eAjIiCFtpSoJD4SEY3LSzA2MUoAwfg3+IO/m/iDP/CzGAVCMARNtCmaEIKJURNFoNC0ghBJjI34gNoH7e7MXL/n3HtnZ2ppdnc2IZg2mdxz35/zvefeubMlmvmbUeD/rYCqpXuta/OriqF+Nz6mp7wjA+d6jsTLamFnazGIG8MP6E3Ym12eU036fiQ1B/fik6Sx8/l8Dpg7J4+htV7d2r7lscnlafM1A786qLdpooVTARUp2DdVeZqymoEjJiI4pahIpK7EwF5Zt25rfSyf2qwJ+OpHX1yqtXouotF0QpHaX8rreWNF/+UoXwOjJuDFQmEP4jsaS5F3MEe5o1Ded4wBlVbElaVJo8mqHQSbD0eqft31h9I3MisaPu/t/fS6JvWFK0ebp1s7ty0r5dNZqcFXtm96Rmt6MMLw6GjfsWMFzsOJQ1E5jGJY2BvPp7FTg2PyaFMyiOfRQQfU0rzkM9APubzStLurqyvj8mnSVOAdHdvn4wXzkgNQSl3q//HEdy5/+vSH44A95vJYmXsuXh57weXTpKnAx2j8VUw+OwJQJbVdWSabiVaAywId7HV1adJU4CpMhIn2lDo8GabvTPfXOF1+ceXYyVvXrs0vdvlq06rBWzs2deBN2ekmBtxX/Wd7rrm8SxE+aFbapAiXulsh7XL11aZVgxe1Tiy5Ut5Ht4PA6ZJYiZAo0fd2/aYrrwqcL1RK69fcwFB1TDdkj7v85HTgfM8lqB5tWtJ61SOd+fWT21WSr+pae+U32o5JFkQTacrq4eK55W35qOg/hqJFuM9Ef4EvqpeciWrKM7BXKv9b0Z7/Em/M5yvvWeqB8BnO0aKW3t5Do6XS8q2KQ6V13db7sME2lj/F1C1x/s8teH9UffGqOFSKvr8ncaFS6jhivHtqvEmlmlaEOnzLlYbmOL3tpnbtpkorChW+UK3syF+F4g+4wbw6r23gTM8Fl58ube3qmuX/NDyIUI/2R8bLLu8/1315un5T1VUUKqs6tzwbh8Y95Hy50Dy5XL489XEcROuwqqOxIvAgSL6uvdiLJQ4zna1UJnFj1BRWdfEqG3zNk5ubAbQjglIqUNk5FX+9D5zt/hYr9bMbByvYcuHS6DTnqGuZTMsGnxjRiQuVIn2y/8wng8nhys2VrgDcAydM4mpczihlg+NtlxxcJScvZzLXJjfLS1wBgL65rW3HElc/k84oMKMAf4jbP34rDg0Nv4G78j5s81YUN7q6O5yOgLIPp8iBpqa575sPEws+OjraUiiGhwG/4Q5DTjs9oE/NqvN2NjQ0DOJ7QKubQyMnBfrWn7r4/QFVvHaZ/L8nKCjMoWCiAU897HoKYfsTXAa7YMttnbSx5UUvSxOz8ANiTlFhtkcFtmdzHjaX4UnYaCPtkUofaUfSrnGeoocXa9r1kK8X1oVgV6fmNzVuzHJ44O21gcava//EbhUO+6QBoDINpLzQPBmkCj+ieQF5sEMpD1Bnygh1pi3yCr+6BRnK4AeuALcpNIVN5CPFxzV5sDnlL9HIRkNpH+K3L64LQvTzpO/QuKJvrnv0w0hW7W8fZ/gNzMzjmhdL33tK+TcFwGMwgWEgHzYehofNYAJs69kRzpvH2AyqACO+MgxsnkjBZm/ElnoGNs6JU9KGHcJnhrV5DO4/ht9/P/i1TvYkM3t2IxL9ha8oC8PKxkGSYIDLoB6PkEWOwCl2Eo6ATtSMFLVwXMXQ7jHqwjHnKBxzTnmwjVOujOjiPxmzB3B48CtfTg+v+LtRksNBRjbw4gyrKq4btWU12ElR26gsynMZHrFFWaM2A4vaAsYgKGebHeIHbc0qsVPW5j6sjWuH9MZ4tHcbS3cVATETs3ICDzUZwoVHFBYCbByTUOI27LBNeUanNgO58JBqbsqw0sWGEfIOMILlaRmaUxGB+0WnN0XgEg4M78KEwwG2CRsTHqI+l9nwMG15ZKwEz8h97RgCjgld7AoAQDhvHLGKWzDpLqDxPsaWkGLnMJ77S4Kzkg5Y4LC7BYY3JStq4KSM5bMOyGbmdvzE+kfKCjCrh5/8rYqRkk79RMrAfLLYleE+rHqJWxQfYS/UHPzfCSBGVXbAxG6kOKCkThR10K5N6aSJ9+fJeLmd6pNtA49hxRm04/YMKMB8srDt8vhQZbHM3wi+vqiPbb1gvShmYrq05LL0VkVW1MWxsV3YGEd5JUy9CR1R3CplALDxBMrCQEED55RFykchL6wAm2NRHER+TZMF5ysAYuUAgwfL3tYqNw8j8YY0QEZtDgF0iJRmp1hhWwYSBpawYSruL5Jh9ai03E5Jo7oBd2XRfmBHrKOcxhVvxEm4E29PZmVmz15cTulciwqf6NFqaZ5UfbOEiotdA8UO4BH1TYiI6gJpQ8Y65MpZAHdGi5/wyzYHFCA5L6pbO746KGcdmnOaHr83oHeeKuoFOfPKF2b24K68ZDE4/91t19p/AYiFxoVsAGv3AAAAAElFTkSuQmCC"},43646:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsCAYAAAAehFoBAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAALKADAAQAAAABAAAALAAAAAD8buejAAAMaUlEQVRYCaWZ3YudxR3Hf/O8nX1LYmqrcS2FpqWgxYKtkkANVLoFIdWLiMG/QPDCt4vYm0J7UZA2F2qECr1o64WWRkwlbYqlgRZUakGht+3FgjcbxWJeNtnsnnOeZ/r5/uaZs2c3iRo7ZPY37/Od73znN/OcBPs/QowxfPnHtq/r7OBgZHtDa4vYxaKzxWbDYhntTD20lbKzlcHQlik/9dfX7J8hhPh5pw2fp+P8M3GpGtlDAHgAQHuw1ozMAGbk3QLQvLy3Oc+CPgDuyZmxvfraX8Lp653/ugDXx+L+csN+YZ0dqAEoQABIwDa2ASbv9dluA96k/Jss9OmX3w7vfFbgnwnwzK/P7R1dnD3adcWhelxZ6JncDtjzABHTSCIxnQFnux14WvCJ+cqOvPhWWP404MWnNdj1q/eX6o0L71bl2qG6vGzjKhLN2hwZoSV2xKjRRAExM9FnTVUFyi2xaNvTymuR2EPd5fjuo3fHJao/MWica4Yv/eZfj5mN3rDQ7g6cqKDR0YMhwggSnRyBVFoI3fajqc6DEuqC8clSdw2xJdJ7N4f4jSe/M2TOa4drAr71pb89V9rqsapaLavqopXFZSuKdQuB4x+GCSh0tSDpFBnJbZ/PUwqoRwFVbFOsxmYecTEVsYgdEmrL2MVjT317+Fzuv91eFfBXXzn5WLDxE0UYW8EMBcwWNvIY2D95pYgVyEwdWJxxz+dZepoFOFUmKWxhlyrVaygfLjJ+2z7xozuvzvQVgG/7/UtLTXHx2aq+ZLViuEhcTemKfHXBxPgIIQ5hWHpWjKQ9MqJrGQAKrlOAlzCrWLOyBit16XCWXaRNtEoMExv6KJaxffand65foektgO/40y/3ssnHDShlgNFJFNM5L8aZUcKENoGTFDxge1ITbRSqyqulWXXpgwA70+QdhJhFGnmosutQSHv8mTvWwbQZ4GYz1KPVo0UzRPylhVFnMeLCms66WLMGAaspK63tGot1Y11XWdcugDLYSCyzDi0lT+ojCySFOBePZXZ7rlvY7CCAJmJVFmadcTHPOLujtUcpfpDowRen1L6TP9tfhuGhgG4VywJGFZ3Z4SbDfXlq17qWs6dwz8Es2Vtk4LJiU/TLpSkqpPJtzMK0QOUYYnfo5986v9878GfCcF2fPdoxUzHGC8BiUctW5EcwjB30TG+w5gI+KGu7gV1qZ5m5srqUiPmHcdvPkLVbckG4V2ija7dptzJbi+ley4lpyUPaDhzCTiwf0JDO8NIbjy4VYXhPKa9QwCb7VhppeQbSHm2DPFF1zjJptUXPgehujdEyyz3eia/Nh2/TCnjSrJguJ8yKYXmlzLJcXrzn2G3n/AA6w2Vz7nA9Rp/ALHqdlgAT09Vo3RmukEbX1dSLaTQMm2K4Jd222NGNgC1dy779Qtxvf4WO9fao0bKYlSQGVBZE1zCD1dI0XSrSiVlJRh4kLaq29iGqTwM+BnR6fwlbZQFrvWZLLghFsZjrSl4+ZVinzToSWLeKmNqxOHyU3pNg8SiBijl3JgCWC5Nn0LaLWYGTeuTKSnooilkvoxzt4jVUrjY+5gPCWj349g/2NWXcIw8gHzWuxB5d28s+RFlcSkx3l9xblGHNWZUsxLD4GLdzpGfoPrDxYIEFiRuCmORG09NzBq8jHzwHWLEoZiWDxmWBpW1iVlKUHNxL+EI0VNHGPb+9/cN9+K3hwUALdYZrGPBqCugOcIm+85NUYsdotfFtGrMQ+asaG+hbwD4E4Po4lADODMv3pksCtnTgNDmxhkGBEnsOUIySZlq3GXABy1p5wYDs0sGqqc7tjfL8ZWpSo1PNNsaqmZWwCOBhhEE8Q1OeBzi2Pg+rjTXVmo1gGF9o4/EOW51dwIvQp5945jLs4nsX2jEMR5tvR4DsbIa0Zmzc7wpo0mrvf9O7owcKICeJ7N6qjMNFP9l4ODFUSIvYpEYY81Tph8KZhiIBFvgyNDYu51jeyAbVOddn0Vzub7SB5uGgAWrMoWIcxObjSK+6il3P0MraeAClwxaYW7OLdQXpOlnVh8VqMDi36KzjlxL52rRgA90G2Fa3HIMkkHSPAz8a4/Gsl80OzuA9BjY7+NCG4510YalrN+DqbofJgX1hOLT5YedWnmAWdykZKO2adTyJbQEXCFkEqJyn3SI7vgUXK15ki85nkdaEAlMzZxnG2TKtjaud8oIFjGEXrdfoGano5SY3pwXVxZotzL6PtM/bTcNdtrDe2G4kMA+4nd2GHzYBdmZ7JrnchcfBO2BPaybRNwXYUYjh8uO0+1692SQ138znasklhbQDLNwlZO6/C/v6Tcdtx38be+Dft9rOj9D6iOXSBhF5N6U1gibNI6liOu0Nr/onxAqxn6Fux1XrVZjm2RyQkdOEycohKJQR7ZLWKd9ZlHYLb8gdtdRKAWNEvfQJWqCHycL7/HaT220pD2eqWX4zYJBv5JWrXkOn4aWlFJxPBimokOvzi4CqGXZUbeZ1i5H+Cj53btzaLUsfWXMBz/Efjts6l/wFZMPHX+QRLa/knolxun4h+Y3qOyiwWj1WSQ8kKFrBSwCYiZwpCjPADDptvDSVFpGB6hJQ2ZwA028HVuB3CTC2nker2GpW55yTsc4rcMzFJGYpL0aAl47lqLETgWTm9TgRCAWh1mQWVqq5aMue1x+C2HOwvdU7QPmavPoorzYzFAroAjeZ6r6IFeDFNZjWm5cyv5B28UAaaAQO55hDvIZ6YbgdUoYNLYyrrdhnptimBfiqKPedUG/S+IXlog52SoP7NmNzWiAU9fDOaf+8obMe27w2cX0JpIAqDpCF2mhRzgqYAgMGCgoGKkgXNFBaZYG0vsT1zZgmVrrvg0Z9131LmQiARShO6VYNz79nK0ywRzwInKwW4IwqT2woVJlAuWb11Ut+h+qYTwxX1M2t0g5ZxI/oB9MBG7G2CpMwPLqERbdxhLZhuBPTyKCVlhkrIhuxqYe1W9oIEUA/uPm9Dxb9ncJKTuqdqehA6eDsii3KdFmLNQEUOH1E5vbK551Qvbtx6ieB1fHq7AeGQdKFT0RHsat6sUrav8hJ+5UAkJSXVZ2d1I+I6mp4ilf5MnhEaxGrmVHlG5jTfNpq2XzI0L4vYFfPtN4LBWn97uCgBV5BM5DWt6EGKHkPi1n5YbdiSFX+6U1Sg+gwctmonzyLLAO9qr/CZ4/czcM42JvqK5YyAdKzQKqR67gHnReQF5F1rwX6xeUTkPaC3joTFEnTibEJk5qgcEaZQH0UaaPtFvtFGd68+Z0PT1Pq2GRtNtrTmH/oqyADlBUxsjpgAqbDpUXNSRbYeaIWyrt/Uw7TkvA9pA6rQxRHVGIrvV1cn3TGttpWjY1eeKhbN1Jj/sE4D0th8yAsHh7eb+8w5gmxtyXSSQd1mmlhcPapE1hFTSaXmoNI2hI0E1GgU4Q9dVBDlTGI9Jz2nzqfAO2GcOLGv388+Tk2r18tjR+Zj9DnXha7W25LQHB7DnYWaWnOGQjSWHwrp4XJEwgoURcQbxtnWmsQFn/0Mai21rWoV6d2QI35xzMqlQ/pIW9BldoVeAt6nWVrj6goB5VOwg8P2DIe4TBbLak7QHkHAVTeWVaa6GUCmAPpLQzTxkPPoKPvZ1ORD0hex69HrkxiWuU8DPmoOHzDqfPLPk7/px9is2jpgJ1Gz0/NUOQRIPlicNuXawek74lXEDVOz+ZYW1JabY7Ssx883JouFTTnFwsn23941IFr7CnA+kGbHucKwKr87vfsBRh8XkyqwSRO5XVGnCnG1tY6USIrR5KpgRIEDTLNtthUvh9c72rfIi8Pz+96/eIL6rY9qPlVw1332pMz0R6H1davYUBlVuXO+M0l6VVgp5nN4POo20BOs7zpPydXdMsn5OMLf7j8ZO6+3V4TsBp+8/v2Alq6D02fzfOKdZHhYZrN7UD7Jm7UWSEPMmXdY1DF7XYWj3Df3O82rsqs91e7nLiW/dqSnZ4p7S4O9wld0WJX0WUgm7Wby6YXoUH7LZ/YKbC+ANgIdTzRNPVdM6+Mr9CshpgOee3TZddMn/+z7ecdcRSd3sOHcgKth43A9u5NDx33FvyvUS6X5UekLXlvH+0txjrSvGgTP0urTwzXBTiPtP66LQH4MK70fibe48BYgIBOAE8txAFvLlD/sfhHvMvx+ln7VEbznNl+LsC5s56mo5dtH2/ugwDfC5BFfuBcdJsAr8QNWyG/woWyjF5P1T/Rf926L8nDXJf9HyXm9iG7bUG3AAAAAElFTkSuQmCC"},31314:function(e,t,i){e.exports=i.p+"static/emptyNoColor.54908211.png"},63543:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGoAAACACAMAAADUIAxBAAADAFBMVEUAAAAvCNmoX/C2ZvGJT+d6SeIhCNoqCNqyZPGtYvGPUumES+QlCNp+SuSfWu+6afKkXe+FTuaXVexxQOiSU+sfC9xfNd6bWO++bPONT+ktCddlOd9PKN1ZL94xCdtqSeaCQuQqBs9uQt9UK955MOBzRd9qPt81ENzYlvl3RuBEHtvOhvdfJt3RjfdKI9w+GdzGe/V4Vul1RuFDKODEdvS3i/PBcvObVeyBXepyUOgnE9yUVOyIY+thQ+WuYe9UOONsPN05FNskBcU1CtzUkfi9kPVOMuI8I98uGd3Mm/fLgPaxhfOSbex7NeFICdrbnPkzHd7ns/2sgfGheO+XcO9aPuRJLuEfBr1+P+PruP6NSunClPWNaOyYUet+OuPfpvufV+3krvzdoPqmfPGcdO9TLNYxDtdfGd/Vo/jRoPenVOyVYOmxXe+sWO2IROdzPeBxROFcMtY1FM1AGdl5QefDjPfGl/ahUOuNWOeRQOd5PuMyCtx8NeFLKN7iqfyVTOqXReh8QuNkONpQIN5HI9A9CNt0NuWMSeejZe5sK919OeI1CdsyCdisc/OIOuVxNOE5Ht59OeF9NuDkufzuvv+2bvBeKeAwCdtTKNs7DdtTFdt8OOJ9OuNvHd+9gvWeSeppNN+YY+lKItqSW+ooDMM9GdWWWuqsb/GPX+a2d/FGGN0qCdpeIN0/H8wyFcZ9ROORU+h9N+KCPeN4MeGYYOmCO+QvB9OlafG/kPZfM9tGCdpvT+SWXurntP03CNqXYejYmPp2N+Tvvv5uDdtRLezKkfV6MODTo/jwwf/uw/44CtrnuvueX+uEROS7dPK5evI1Cdk1Dtt0S/JjPeNeMOFUMO/RjPq5bvGVfutMJdVrSuKJbOnIjviYg+7PjfhTMuDtw/3UqPeZZvfDiPNhPfGIWPWylO/01P8oCdaqae+CQ+OvnO/jwfvrt/6qlu9TDNlmEt+HXOR+S+S5fPPhuPpgIN1gNOG+oPNpQd/FqPW+bvKllOyih+qLTuTdofj33f/oIKVDAAABAHRSTlMAX3x8fHx8fHx8fHx8fHx8fHx8BHx8dHx8fGB3bXJffHxie298fHlifHxqfAl8a2Z8fHx8fHx8fHx8fHx8fHx8fGVlXnx8fHx8fHx8fHtpfHx8fHx8fHxpHHx8fHx8fHx8fHx8fHZkEHx8fHx8fHx8e3tsaBUIfHx8fHx8cWJ8fHx8e3p0ZCMPe3phSDl8fHx8d2obfHx7d3Fxb1kwGHx8fHFtbGxqOiokfHx5dHRxVVJQSkUzKSUZEHdtY2BaVUtCOiYkfHt3bWleW0VBQD4zLx98fHx7dnJycWxoZ2dOQjQzfHx8e3t4cWtrWVFPTjYed3RzZGRRfHRpVTt5eXJiDlkUTAAADV5JREFUaN7sl+evS2Ecx522B22d23WMDtVTLR1qFK1Z5/aaRWylVOvSolrVFpfa1dh7b2LGJvbesfeKRGwJLyRC4oUX4vccRa9XOrwRzz/wzef3fH7f85wy/8//8//8P//YObL11s3r17dsPVzmr56Rt748CgrY5bksltAqPnFgWv4jUjxPH9a1VBGwQwEUJRaLSXJvr/zHANFTnamBAJIAiuudWFBgFfNFPM6e/JOd+6praXRYqgRD5W0srrCgwO0Sk1IOgX9cneeka55OJoejAQNV4mZBFOkieRwOQRD6PZI8BklO9i/u1NJYl80GJ4CKZXVZ4ao4YZGIwGn18Vp5TOrSqaXO5KhrEQgCAZuNJfROrCwW8aQcEaHGzcNrjM9b1vve/Yt1LS0WpF95m807UVhQuTJvMkcKULTerJb7Pudphs97T/B00pnqNqgSCkIU1+susErBCSmHxglcT0fklao+y0vSosVdPMUmkxGkCJYvX+LlghSkioQokRbHtVr10UpVlyvu5CPqSu8uEzoZjY4qVWB+EMXyigsqNyWl4ckiPqGP0Gp5pcfJ2uMleVioLl0mMPoFBQKggqKYOAzpJ53MF+n1uFZdw1e1usIQvZ171OXeXXQ6nckI+tnW2Zj2c1vBCR5HxE8kQD95cnn12oboVUnOUIuRfqYqTPvZyrMmuUE/qzTOl/L5hNlsThyVV62+IRqrU/NQ7lATJhQj/QQhNqwva6JbCJXUlMfj0DTop434KlWtXjsaK5TNyhmqv6e4ZUvQjx1gcwM2pN+wfiQJ49NrCS2trlGpajJpiNXZZFfWyhUK9HOYHA3Q/AKTAixUtNKUfngiUkMOUZsNsUK/THYoV/2Y9rMEUdHaAiyva6K1Mmq/OCThWrrG0WR1Re3YJkqJyWbnulOMfg1A9AAy3TvMZSWlqP34dESrhU7apahtiPn9FIXNylU/VEnQSYJQCdcmhKK1WlVxDipaOoGKAnYquruwppKyY6dygoL2K9YZqzSowkZF6x7jBdPFLpWUo9cz+iV9oN/maCElwzCZM6f2613s0SH9ggEwHfWs10WKSZ6Uv57GcbM64au6fJfBUFjTaccwjJLk1n7FDgcUBTvIDpVAUQjFqmFQfxxUSfR3/XZvruP3yzAYYFGmUZKnczZOTUH17+9hPr4C0K9kEosFbxceSfLDfFS0iYhcjtrPsMmJxmfHZJminFn78u4DZhtP9u7iMcH8GkDRli8PTriHuStDUUymCT6u12trgH6PFYY6UbvMTsEA7Zm+wR7OefP6wgeJRLIIdgpuysHoB0XLRVFWHg9uSkRA0aqZKEMU9MOcwKSclQ3Ugye3Dp+5NNijA9MtAgtABbhCq1BorUzGJ0s5HD6RoLWJCGP6Jn9NGUJyYrOzgbrb9eLgIe1G9eljMhpT33mue4y1wFq5qUol5esJAvTzJaHSa8c2FzqdGPJPdigLqAujpw9molo1XGtB44OPB5dlLRAPk6JKD68342ZYXx+jX2FNkM9OKYuKMqzbJwjqfrx9Kqlh+65zbGw2OzTJy7woXCA6h9Di5kgCTK8OUdFNzPgoGZXpVT1BUFPowb+iBnSbw7WxSoRC6FmyKS8cRpWujUTkvsdgemyTk6JAP6WdyvQhsxWgqm8nvie1giSIGth9KJSfG4q2KcmLh0U4rQf9KiV3KTbA+spkTifoV3Qq464YcXbqQs2JNChI6tChbzOx1y0mVSoeU+m0Fsa3/LFi96bCmhgGWLDE2TxjVmsWHvgJNQBFQVKzRo14bimYzif4elpL+3yV4DsVjfqZ9pNRSns2BbhQc/b8k1JQfftCUr3GjUUuKeiH43oUVXXXrtqgnxOqQoYpi7KBOthx4YiDa1+lbqrbD6h69RpXq1YN5+vDuDqiRvPbvdsQ9SsBCYlxNZuHxcyOqwc9fbVtybb0m0JQENW8x73hBFR6Qu6D9TVshqKlkOuUPUuoQbfaXVy7xMaaAzdVCqp58x4tWrS+Bw/ao7uSig0x0I+CAVJYUTZQkpma05eGtGvXB7ICJdNLQ6Go1j179rwvr+RbvmF3FJ5J0EfQflQ2UFM14y6lTN8WKlk3Sdzhd6ie9eu3aTNluWJDdLPfSWEyDI49O6h3gwFqFCPFHMgaw2tWCqp1T0jq3LbtCjQ/GB6q2qLZuUExUkyHrDGu36Hmd27bpEmTt8zXg1ICWjZQqzR7ERRj+nf/hk4cM2au6jcoiKpYsWLZt9BI2UL10ozbUrqTwL/RrjFz58YhqhQUiipb9i081amibHZqlWb/wdRNAdRP00XD5s7tF76XdlNMEjoV3vrtWUF1HLfm/MV0qJTp9XBVv34d5/0OBUkVKpRbMSiL+tujuTHoJnRSn9JQ9Rj/4h01mvWtERSKSiWhqHKzM48a0XHctEGX0jupOwOV8u/evHnzZiytn4JispikcstqZZy1r+MNyQtPy7qok36HAinAivUzZsxYOr80FJwtI2H4UyWZQC2oJbncv5OpbnonoahfpvdcOmPnzinL0m4KnTlPFu2NLzXU+nMozY0yz+EfG37c2MHAuklD0YcqHSrVSTt3rjy2o2Ia1Pbp7T+55k0Z+8cmTgOoMpeZ33n4HQgxnQRJvzUFSNF5xcqVK48t+wW1fnR3a7+l28f+8ZPpW7vmGtJUGMbx15oQrJudsnscamTFulBQQR8q7ErNiCJG0T5EtOp0gyat2jAR13LdppnVWrQGavlB3SwtzWXSorIbRInSxS9GZtn9HvU8Z+/aOWOFO9vpQ/T/ckCUv7/3efac9/+oB6BgxwNWkHx7beC9titEUMug0/FDVXI0LS3tQgG12nlyogKhdnb2yqS2A9QLDNlgBdFtw0Y4w13b9yuFM2lSsNO7B8x4pzNZ95Yj1LDOQtWpyjHP8ykHrCBjb1y/LWMXziQxFJ0UAbPsWlv9+zOHeahO36PbNFqSh9ENdzyBxR/k3oyM7XQmTQ9B0ZmEx9hR/6reb/cg1JpOd7ouFxd/FCqwd4aMvTJj+aZN+3Wqk+hEoUKdXpL9ymkoV3nORgVVqPHCLlgIxVtN6YNerE6lujcHrcJnkk3v9Nt3kw/QflGMPwssThFqLEKBFUQ3iPOQsZeD1Q5+JgVneuhDVeL0aDzYVFG8R9pUakik0H4CKN5qGqxDlGzm5gMwk7LoTBJMig47QEUlhjVh+A1CdQ1CIRWGxMwdm2fswZk0r594/L1XeaId6mwOWq2KAIWBAEPijMHnYSQdO1oiHH8Ffo0hSqti1oFLbmy/cCjc8fSAlIN35yMwksAsNJOyVOVM1FblmE6DUF3DoUbD4gr3zqfSUEcLglB7NE4iyaolQqUGBs5vC+ZR3JFtzc7mZxJalbxXlTJE0gHmzQqvVF8hFC7+Zs5MyQ6YZa+p7fBrtNFnRSW2BXP/d1DDKdT4lJSEFN7sen39K6/KEbUTSVeY8PFIBNWfr1RSCGoMRLdhIDTrcDqdJoSKWm6NGkO3AKqnuFIUCqJbApil1ur1+joJUKCyHRZ8PIhUqUQhVAII1iF3GLUaoIgEFbJefNwSQk0TQg2lUCCEYjCeO4gUGRS5+GAeiKAGitoPoBIo1Dn4VoSSJLfOiY8icaXCoaiVjSBUDpGmQqWXoL4IK6WgUGGVuq7HnYPGItFqt9Gu5tv+WVilRoegBtFKnaNQUuWjWJXW8PYbSSsVhNpLJENRLM5uoF6R228mQKEVOFEoyWpQ0J+udNFKJQmgtiIUindSm3RaIl2Mm62jgDW/hbp+jt7vS0ksquQyLcF+pFCjJ4ag0MqmD6xsVG/UJCZVcHZtsHJlEaBq79Ig62fPkhjVYDSBFzW72SZqvwQbNSJ6k+4miVk+Tvj7autKm5IRymzbe1dNqAwmXRmJgxo41sOII4paHHUtfhac4qEilyLX8oc29WqUPhK7aKdzSoeWRJY2V/e9gsRPFS4j64hE5nTolDUGIknpl5/caL927d27dxfbbzxpyUsPfNWdxBmVbXV6cc2O5+iUrwulGeX9ePr0EESqtaNmjb1y5cr8+evWXm1vqSINm05m3TNyCjbHc1yrZxhmt/a4NyeTVbgLGSJNYLSYZo/JA/Lz80+fPn1i9op1n99mHj64c2+xz8UZIYTwUiqMrrJiIlnt8D8bAafgPamL1Wrdt2D2x6VzC/Q4qSp8NW6Xy+Wu8VVoSQzClIh/Hw1FN3xRTenDWZe0fnzIkPiq6sYivDsLLn9TMBEYudWtn/NIvM0u3Z8ghKK3FyO3pLWFxFvpl2BLQaFCL/oeUxe2vmTib3brbX43ERTeKRJff3vOEBnMHnSjUDQRwJtqy+tG9JLDzApOCPUrUX16I48XYW4/690/eM8MJKrkpsaXBCWHGdd3oDAmjmhq/ErkEQ51RaBSI9Fq3JCmxiIil4rcRiVA0TvFGHPTwyoim4qakxIp1Jjx483Vz4mMKm5OBCgas83NcpWLmlV/Sg7knEGp1XCEskpbmjyEzznDzNUviczSfhjCR6pU88NKIrcMj82pcFGXgCXRDLHSyV+QHszMzcVEblGz6uYq8pfEqMl//ev6CSvHHTXX6dlUAAAAAElFTkSuQmCC"},10765:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAACICAYAAADwD1v8AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAiAAAAACUB+W1AAADA0lEQVR4Ae2bz2pTQRTG50zT3D9JV67cudNX8Dlcu3MtPoA+gbpymZBEi0pF6kJBQVCKCF0IIrgQFURUVBCppLlei834TczEkxDSJM25cXGy6P0mE75f53cvyeqY3U72vJ3lZ51zR0yBL2p3Mud5RLTnjLtrrW2mUfQA633J/2MA5hAy5rMhu766Qs0oil7xvUXlseChcjLb1sFCGm3Awo+hvUMsDgb3ywH9ibhpyDQrcfwI694tmpc9NZgDAH3vnLlasqaVJMk7vjdtngscyvun3upbuI11FvYOuh4KPFRO1Ib8W5Ycnof06dDemMXiwLyc6DWRaVkXX0tT+sS3QpYB99uhfh/PQoPS+EKV6GuA+qsoeADyt8HSqWocPwzv2RBEr86tma67k2XZycApBgwafgsqXUM3cC15eGFgDwP0WCfPTxcO9kDjzLLA7sRSTowv+KNQnhR6j3uq//5ZXRa42KeanVjBXIZs1odL1i9rV9VMhmxU1bJ+WbuqZjJko6qW9cvaVTWTIRtVtaxf1q6qmQzZqKpl/bJ2Vc1kyEZVLeuXtatqJkM2qmpZv6xdVTMZslFVy/pl7aqayZCNqlrWL2tX1UyGbFTVsn5Zu6pmMmSjqpb1y9pVNZMhG1W1rF/WrqqZDNmoqmX9snZVzWTIRlUt65e1q2omQzaqalm/rF1VMxmyUVXL+mXtqprJkIkYzOmguV28aufe+AGt4sFktrzLQsE46R6AlwsHY+jqEsbOPnhwbwTIB+kXGWpV0vh84BSheofIngP0jH+oAljsxBim++gcNappfAXAbwEYrgsFA/Abg7X3MFhbx2Dtfay7ATR6XQyY6C1O2DBx3Fwj+jIKGbeeG4zT/ELhpiNTx3TeY6wH928caPS9mcF4Ol9iWLleSaJ1wL6PFk67ngoMQAezaBuWVmppWt6etnzS5yaCcd+e4Vu1libRTcDbk4pm3RsH3rFkrrtSqVYtl1/MWjjt5/+BiZ7ghDUMNftxXj/kLPvazfKLeZ4fl6X8R+1/AOcMtx7/yFi1AAAAAElFTkSuQmCC"},35978:function(e,t,i){e.exports=i.p+"static/serviceQRcode.bf7c84da.png"},26941:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFIAAAA4CAYAAABuQ6+nAAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAUqADAAQAAAABAAAAOAAAAABMnuAEAAAHTUlEQVR4Ae2ce1BUVRjAv3v3ASy7MjCCsCwYUGkD6CiNmBqo1WA6gxpR05RTjvVX/lHNND4aDDW0sRnFzBxNy6HGfxAFTQyhwSyEQWUw0DIFBOUhvtgny+7eezrn4r3cu26w6bos7H4zu+fxfffs+X57zj3n7D1nKRhBco6fn8o4mLmIQrEA1MSpEaHaaeGq6HA5pQmhKZUcMUpXRcgHbHKFxRIkczAymnHIgGUpV3ZPOo8CCuEPZmj8kgMMyAA5XH6mg7HRJouFvas3ms419Ria/+oCRN1BgDoVQNXMqS352+V1DzJdOpeLkMxeWv8eAjYPAUzGlYCFkyPhzSk6iFIFDVfeuNFZu3uh44di6DlRDbgRAEVR7ZjF5gyd7CBVXMw4O/oQyJzjdc84GFSCEKQS45jQYFg761l4KkzlfK1fpM3X2uHSum1gvdk96C8FTUEKOmf2mZKrYgASkNlldQsAoRJAEE6MUidO4CCqlbhT+LHYDSa4jGHqG5o5ChQF92mayplXcwQ310ERQOYcq092sEwtbokaoorThMC2jBRQKWQPTAcDi8UCFRUVcPq3M9DZeRNMJrNEP1YTanUoxMbqYH5mBmRlZYFKJe2BDnM/NH6wFixtNzgXMUwjTdMvzKspuUQyOJArKi6G6i39fwKgRJIZJKPh64XTIBp3a7EUFx+GjZs2QW9vrzh73MWjoqLg8w0bIDf3dYlv/Z09cOGdj4G1DnD5+L7ZGqYJnTb91I9mMo6A0dL/CQ+RpJc+HfMQxPz8jfDh6tXjHiLxnzQU4ivxWSwhsdGgeytbyEIIJeqNZswOt8jcyvNhNrP9Bt+lVXIZFC1OsyloWpjW7D9wANav/0wowJ8iW7YUwPurVgkusza7rXbxSiVjtnB5pIurQuVxtM3MLOEhEk26NkIvhtjbexsKvigQCvK3CPGdMOCFViqUE+en6/k0YWfFDHHXRkNtFWuXJEy6yRuRsKioCMx4gPFXIb4TBmLRvrZIwohFkE3j6U6y2ChugkoywlRWVYnVfhl3ZhCaGC9hhJdOyWSw0YrpBNF0hDjd1tYmTvpl3JkBFaSUMMJTHy2Nlz3STGpwMs4T6+vr46N+GzozwNMebsHCA8GjdwQ3/eEzAuGjE/BZkElJSbB//3fci8R9XXx2Eb1v315ITUnh+CUkJMBLL73s0yx9tkWmJA9NJsRxX6XpsyDxDV1gJo4LmT4W8VmQPsZpxOoEQI6IyD2DAEj3OI1oFQA5IiL3DAIg3eM0olUA5IiI3DPw+oScrFLWrVsLsVrJbyUj1vZk+YlhbTq7umDr1i+hpaVlWLsnpfQ6SPGK5f84lZaWNqw50Y/mCsjrXTs+Lm5YII+jjNPpHufyx7rW6yB37CjEvyXjH+88LKTMwsKdHi7V/eK83rW/3bMHjpaWQkxMzLC1/OVkuUS/6NXFkrRzoru7G8hrtMTrIImjj+J0Q0PDaDFy63O93rXdqtUYNAqA9NCXFgAZAOkhAh4qJtAiAyA9RMBDxfhsizQYDIKL4riQ6WMRnwW5ffsObgVEViwk7usyKhNyd6DwKyBiO5orFnfqSmx8FiSp3FgASOpJxGe79mD1xs57AKSHvisab8cf3Fk+VKAkrVQKO6CHLPws5oKBhBFhiFsk1SXmwrBIcmQhOjparPbLuDMDxDASRviQXheNN4YMHhx5gEhvs0sOzsxOT/dLeGKnnRnY7+sljHCLvEHjw5qV4ov+6LynEKdzc3PFSb+MOzPo/fWshBHe+lxJU0hRJqZT1X5LshkxE5+Emp+ZKTbxqzjxnTAQS8/xKgkjBZKV0WXLnm/CR3FP8Ybthn5oum2Q3Ex37/4GdKP4YImvm7dD4jPxXSz4POKApaVDyMKb5k7NqS1u4qY/FNBrMEyW1x5ovh6EH08JT6giIyOh/MTPMGPGDN5k3IfEV+Iz8V0QvF69Vvi9cM6aMJNR8jVEz4EsXT6rER9IzuMvaNNb4KfLHUMbFLGCjFzkIf3OnYWQljaTNx13IfGN+Eh8dR6t2/YeosxXr4t9zpt7triRZEhgLS2tK8LQV/CWH81MggXxom+EV+DQaDRCF97dYDKZRLljN6pWq0GLd39oNNzh4IccuVVeDVc27xrKp6iizNoj7/IZEpAYIrWsrH4zQqxw8PDt53TwBv7nAH+WjoOH4freQ2IEBRm1R/LwTmLh9icByVsuL6t7hWHhK3ybnE7ypkeGwcqUeEgIC+VN/CI0XW2D1l1F0HfuIucvvidepGXo03k1RyVTRqJ0CZIo8hGiG0vrs1lAORQg8nQ+YlZMOMzRRkDapHDQjNN/FbDrjXCvtgHuVNfC3d/PEUD38A+j5UDRJS9mpR6j8vOFQZlw4uU/QfIGfJhfXS2/YNIog9Uh3ACVqAmWTQlTKSmbVcbbuArpHr1MaehWaCzkj068LzKbnY2xGuxhLMsM9+nBDGIszVds1n9aObtWjZVVG9NsC07nO4a7LqDzMIF/AdJGYfxvWeHUAAAAAElFTkSuQmCC"},46700:function(e,t,i){var a={"./af":60757,"./af.js":60757,"./ar":22490,"./ar-dz":15633,"./ar-dz.js":15633,"./ar-kw":12602,"./ar-kw.js":12602,"./ar-ly":34074,"./ar-ly.js":34074,"./ar-ma":98317,"./ar-ma.js":98317,"./ar-sa":29752,"./ar-sa.js":29752,"./ar-tn":66061,"./ar-tn.js":66061,"./ar.js":22490,"./az":92136,"./az.js":92136,"./be":57080,"./be.js":57080,"./bg":48473,"./bg.js":48473,"./bm":38856,"./bm.js":38856,"./bn":17146,"./bn-bd":5223,"./bn-bd.js":5223,"./bn.js":17146,"./bo":30594,"./bo.js":30594,"./br":48831,"./br.js":48831,"./bs":67530,"./bs.js":67530,"./ca":82766,"./ca.js":82766,"./cs":3830,"./cs.js":3830,"./cv":74487,"./cv.js":74487,"./cy":60146,"./cy.js":60146,"./da":66186,"./da.js":66186,"./de":86621,"./de-at":72833,"./de-at.js":72833,"./de-ch":78113,"./de-ch.js":78113,"./de.js":86621,"./dv":32345,"./dv.js":32345,"./el":69981,"./el.js":69981,"./en-au":16498,"./en-au.js":16498,"./en-ca":94555,"./en-ca.js":94555,"./en-gb":93204,"./en-gb.js":93204,"./en-ie":89988,"./en-ie.js":89988,"./en-il":3777,"./en-il.js":3777,"./en-in":23231,"./en-in.js":23231,"./en-nz":30533,"./en-nz.js":30533,"./en-sg":73034,"./en-sg.js":73034,"./eo":21496,"./eo.js":21496,"./es":65678,"./es-do":76879,"./es-do.js":76879,"./es-mx":55440,"./es-mx.js":55440,"./es-us":66963,"./es-us.js":66963,"./es.js":65678,"./et":41003,"./et.js":41003,"./eu":90013,"./eu.js":90013,"./fa":29692,"./fa.js":29692,"./fi":68102,"./fi.js":68102,"./fil":22918,"./fil.js":22918,"./fo":87496,"./fo.js":87496,"./fr":67474,"./fr-ca":1853,"./fr-ca.js":1853,"./fr-ch":44675,"./fr-ch.js":44675,"./fr.js":67474,"./fy":97061,"./fy.js":97061,"./ga":96867,"./ga.js":96867,"./gd":18364,"./gd.js":18364,"./gl":96383,"./gl.js":96383,"./gom-deva":64220,"./gom-deva.js":64220,"./gom-latn":87202,"./gom-latn.js":87202,"./gu":25249,"./gu.js":25249,"./he":96022,"./he.js":96022,"./hi":65395,"./hi.js":65395,"./hr":29361,"./hr.js":29361,"./hu":93797,"./hu.js":93797,"./hy-am":85874,"./hy-am.js":85874,"./id":77084,"./id.js":77084,"./is":12592,"./is.js":12592,"./it":54296,"./it-ch":35272,"./it-ch.js":35272,"./it.js":54296,"./ja":17620,"./ja.js":17620,"./jv":46898,"./jv.js":46898,"./ka":62752,"./ka.js":62752,"./kk":5632,"./kk.js":5632,"./km":16667,"./km.js":16667,"./kn":88963,"./kn.js":88963,"./ko":35953,"./ko.js":35953,"./ku":72004,"./ku.js":72004,"./ky":71803,"./ky.js":71803,"./lb":12835,"./lb.js":12835,"./lo":98185,"./lo.js":98185,"./lt":40538,"./lt.js":40538,"./lv":74582,"./lv.js":74582,"./me":23663,"./me.js":23663,"./mi":35840,"./mi.js":35840,"./mk":88701,"./mk.js":88701,"./ml":2209,"./ml.js":2209,"./mn":38391,"./mn.js":38391,"./mr":14481,"./mr.js":14481,"./ms":20135,"./ms-my":29977,"./ms-my.js":29977,"./ms.js":20135,"./mt":81029,"./mt.js":81029,"./my":27402,"./my.js":27402,"./nb":18929,"./nb.js":18929,"./ne":29030,"./ne.js":29030,"./nl":18208,"./nl-be":92510,"./nl-be.js":92510,"./nl.js":18208,"./nn":46456,"./nn.js":46456,"./oc-lnc":98952,"./oc-lnc.js":98952,"./pa-in":9734,"./pa-in.js":9734,"./pl":67042,"./pl.js":67042,"./pt":97351,"./pt-br":63673,"./pt-br.js":63673,"./pt.js":97351,"./ro":62080,"./ro.js":62080,"./ru":78025,"./ru.js":78025,"./sd":51922,"./sd.js":51922,"./se":82651,"./se.js":82651,"./si":16258,"./si.js":16258,"./sk":23337,"./sk.js":23337,"./sl":8683,"./sl.js":8683,"./sq":10119,"./sq.js":10119,"./sr":72660,"./sr-cyrl":9322,"./sr-cyrl.js":9322,"./sr.js":72660,"./ss":33350,"./ss.js":33350,"./sv":19607,"./sv.js":19607,"./sw":16552,"./sw.js":16552,"./ta":25391,"./ta.js":25391,"./te":78149,"./te.js":78149,"./tet":27113,"./tet.js":27113,"./tg":4503,"./tg.js":4503,"./th":33665,"./th.js":33665,"./tk":68356,"./tk.js":68356,"./tl-ph":62917,"./tl-ph.js":62917,"./tlh":42669,"./tlh.js":42669,"./tr":34573,"./tr.js":34573,"./tzl":16022,"./tzl.js":16022,"./tzm":881,"./tzm-latn":30897,"./tzm-latn.js":30897,"./tzm.js":881,"./ug-cn":45472,"./ug-cn.js":45472,"./uk":1300,"./uk.js":1300,"./ur":96961,"./ur.js":96961,"./uz":51699,"./uz-latn":87476,"./uz-latn.js":87476,"./uz.js":51699,"./vi":91544,"./vi.js":91544,"./x-pseudo":22086,"./x-pseudo.js":22086,"./yo":85911,"./yo.js":85911,"./zh-cn":38098,"./zh-cn.js":38098,"./zh-hk":53720,"./zh-hk.js":53720,"./zh-mo":10794,"./zh-mo.js":10794,"./zh-tw":36087,"./zh-tw.js":36087};function n(e){var t=r(e);return i(t)}function r(e){if(!i.o(a,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return a[e]}n.keys=function(){return Object.keys(a)},n.resolve=r,e.exports=n,n.id=46700},46601:function(){},89214:function(){},71922:function(){},2363:function(){},52361:function(){},94616:function(){},69862:function(){},40964:function(){}}]);
//# sourceMappingURL=chunk.p__index.fdc30386.js.map